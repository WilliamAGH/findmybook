{"version":3,"file":"app.js","sources":["../../../../../frontend/node_modules/esm-env/false.js","../../../../../frontend/node_modules/svelte/src/internal/shared/utils.js","../../../../../frontend/node_modules/svelte/src/internal/client/constants.js","../../../../../frontend/node_modules/svelte/src/internal/shared/errors.js","../../../../../frontend/node_modules/svelte/src/internal/client/errors.js","../../../../../frontend/node_modules/svelte/src/constants.js","../../../../../frontend/node_modules/svelte/src/internal/client/warnings.js","../../../../../frontend/node_modules/svelte/src/internal/client/reactivity/equality.js","../../../../../frontend/node_modules/svelte/src/internal/flags/index.js","../../../../../frontend/node_modules/svelte/src/internal/client/context.js","../../../../../frontend/node_modules/svelte/src/internal/client/dom/task.js","../../../../../frontend/node_modules/svelte/src/internal/client/error-handling.js","../../../../../frontend/node_modules/svelte/src/internal/client/reactivity/status.js","../../../../../frontend/node_modules/svelte/src/internal/client/reactivity/utils.js","../../../../../frontend/node_modules/svelte/src/internal/client/reactivity/batch.js","../../../../../frontend/node_modules/svelte/src/reactivity/create-subscriber.js","../../../../../frontend/node_modules/svelte/src/internal/client/dom/blocks/boundary.js","../../../../../frontend/node_modules/svelte/src/internal/client/reactivity/async.js","../../../../../frontend/node_modules/svelte/src/internal/client/reactivity/deriveds.js","../../../../../frontend/node_modules/svelte/src/internal/client/reactivity/sources.js","../../../../../frontend/node_modules/svelte/src/internal/client/proxy.js","../../../../../frontend/node_modules/svelte/src/internal/client/dom/operations.js","../../../../../frontend/node_modules/svelte/src/internal/client/dom/elements/misc.js","../../../../../frontend/node_modules/svelte/src/internal/client/dom/elements/bindings/shared.js","../../../../../frontend/node_modules/svelte/src/internal/client/reactivity/effects.js","../../../../../frontend/node_modules/svelte/src/internal/client/runtime.js","../../../../../frontend/node_modules/svelte/src/utils.js","../../../../../frontend/node_modules/svelte/src/internal/client/dom/elements/events.js","../../../../../frontend/node_modules/svelte/src/internal/client/dom/reconciler.js","../../../../../frontend/node_modules/svelte/src/internal/client/dom/template.js","../../../../../frontend/node_modules/svelte/src/internal/client/render.js","../../../../../frontend/node_modules/svelte/src/internal/client/dom/blocks/branches.js","../../../../../frontend/node_modules/svelte/src/internal/client/dom/blocks/if.js","../../../../../frontend/node_modules/svelte/src/internal/client/dom/blocks/each.js","../../../../../frontend/node_modules/clsx/dist/clsx.mjs","../../../../../frontend/node_modules/svelte/src/internal/shared/attributes.js","../../../../../frontend/node_modules/svelte/src/internal/client/dom/elements/class.js","../../../../../frontend/node_modules/svelte/src/internal/client/dom/elements/bindings/select.js","../../../../../frontend/node_modules/svelte/src/internal/client/dom/elements/attributes.js","../../../../../frontend/node_modules/svelte/src/internal/client/dom/elements/bindings/input.js","../../../../../frontend/node_modules/svelte/src/store/shared/index.js","../../../../../frontend/node_modules/svelte/src/internal/client/reactivity/props.js","../../../../../frontend/node_modules/svelte/src/index-client.js","../../../../../frontend/node_modules/svelte/src/version.js","../../../../../frontend/node_modules/svelte/src/internal/disclose-version.js","../../../../../frontend/src/lib/router/router.ts","../../../../../frontend/node_modules/zod/v4/core/core.js","../../../../../frontend/node_modules/zod/v4/core/util.js","../../../../../frontend/node_modules/zod/v4/core/errors.js","../../../../../frontend/node_modules/zod/v4/core/parse.js","../../../../../frontend/node_modules/zod/v4/core/regexes.js","../../../../../frontend/node_modules/zod/v4/core/checks.js","../../../../../frontend/node_modules/zod/v4/core/doc.js","../../../../../frontend/node_modules/zod/v4/core/versions.js","../../../../../frontend/node_modules/zod/v4/core/schemas.js","../../../../../frontend/node_modules/zod/v4/core/registries.js","../../../../../frontend/node_modules/zod/v4/core/api.js","../../../../../frontend/node_modules/zod/v4/classic/iso.js","../../../../../frontend/node_modules/zod/v4/classic/errors.js","../../../../../frontend/node_modules/zod/v4/classic/parse.js","../../../../../frontend/node_modules/zod/v4/classic/schemas.js","../../../../../frontend/src/lib/validation/validate.ts","../../../../../frontend/src/lib/services/http.ts","../../../../../frontend/src/lib/validation/schemas.ts","../../../../../frontend/src/lib/services/theme.ts","../../../../../frontend/src/lib/stores/theme.ts","../../../../../frontend/src/lib/components/TopNav.svelte","../../../../../frontend/src/lib/components/SiteFooter.svelte","../../../../../frontend/src/lib/components/BookCard.svelte","../../../../../frontend/src/lib/services/pages.ts","../../../../../frontend/src/lib/pages/HomePage.svelte","../../../../../frontend/src/lib/services/books.ts","../../../../../frontend/node_modules/@stomp/stompjs/bundles/stomp.umd.js","../../../../../frontend/node_modules/sockjs-client/lib/utils/browser-crypto.js","../../../../../frontend/node_modules/sockjs-client/lib/utils/random.js","../../../../../frontend/node_modules/sockjs-client/lib/utils/event.js","../../../../../frontend/node_modules/requires-port/index.js","../../../../../frontend/node_modules/querystringify/index.js","../../../../../frontend/node_modules/url-parse/index.js","../../../../../frontend/node_modules/sockjs-client/lib/utils/url.js","../../../../../frontend/node_modules/inherits/inherits_browser.js","../../../../../frontend/node_modules/sockjs-client/lib/event/eventtarget.js","../../../../../frontend/node_modules/sockjs-client/lib/event/emitter.js","../../../../../frontend/node_modules/sockjs-client/lib/transport/browser/websocket.js","../../../../../frontend/node_modules/sockjs-client/lib/transport/websocket.js","../../../../../frontend/node_modules/sockjs-client/lib/transport/lib/buffered-sender.js","../../../../../frontend/node_modules/sockjs-client/lib/transport/lib/polling.js","../../../../../frontend/node_modules/sockjs-client/lib/transport/lib/sender-receiver.js","../../../../../frontend/node_modules/sockjs-client/lib/transport/lib/ajax-based.js","../../../../../frontend/node_modules/sockjs-client/lib/transport/receiver/xhr.js","../../../../../frontend/node_modules/sockjs-client/lib/transport/browser/abstract-xhr.js","../../../../../frontend/node_modules/sockjs-client/lib/transport/sender/xhr-cors.js","../../../../../frontend/node_modules/sockjs-client/lib/transport/sender/xhr-local.js","../../../../../frontend/node_modules/sockjs-client/lib/utils/browser.js","../../../../../frontend/node_modules/sockjs-client/lib/transport/xhr-streaming.js","../../../../../frontend/node_modules/sockjs-client/lib/transport/sender/xdr.js","../../../../../frontend/node_modules/sockjs-client/lib/transport/xdr-streaming.js","../../../../../frontend/node_modules/sockjs-client/lib/transport/browser/eventsource.js","../../../../../frontend/node_modules/sockjs-client/lib/transport/receiver/eventsource.js","../../../../../frontend/node_modules/sockjs-client/lib/transport/eventsource.js","../../../../../frontend/node_modules/sockjs-client/lib/version.js","../../../../../frontend/node_modules/sockjs-client/lib/utils/iframe.js","../../../../../frontend/node_modules/sockjs-client/lib/transport/iframe.js","../../../../../frontend/node_modules/sockjs-client/lib/utils/object.js","../../../../../frontend/node_modules/sockjs-client/lib/transport/lib/iframe-wrap.js","../../../../../frontend/node_modules/sockjs-client/lib/transport/receiver/htmlfile.js","../../../../../frontend/node_modules/sockjs-client/lib/transport/htmlfile.js","../../../../../frontend/node_modules/sockjs-client/lib/transport/xhr-polling.js","../../../../../frontend/node_modules/sockjs-client/lib/transport/xdr-polling.js","../../../../../frontend/node_modules/sockjs-client/lib/transport/receiver/jsonp.js","../../../../../frontend/node_modules/sockjs-client/lib/transport/sender/jsonp.js","../../../../../frontend/node_modules/sockjs-client/lib/transport/jsonp-polling.js","../../../../../frontend/node_modules/sockjs-client/lib/transport-list.js","../../../../../frontend/node_modules/sockjs-client/lib/shims.js","../../../../../frontend/node_modules/sockjs-client/lib/utils/escape.js","../../../../../frontend/node_modules/sockjs-client/lib/utils/transport.js","../../../../../frontend/node_modules/sockjs-client/lib/utils/log.js","../../../../../frontend/node_modules/sockjs-client/lib/event/event.js","../../../../../frontend/node_modules/sockjs-client/lib/location.js","../../../../../frontend/node_modules/sockjs-client/lib/event/close.js","../../../../../frontend/node_modules/sockjs-client/lib/event/trans-message.js","../../../../../frontend/node_modules/sockjs-client/lib/transport/sender/xhr-fake.js","../../../../../frontend/node_modules/sockjs-client/lib/info-ajax.js","../../../../../frontend/node_modules/sockjs-client/lib/info-iframe-receiver.js","../../../../../frontend/node_modules/sockjs-client/lib/info-iframe.js","../../../../../frontend/node_modules/sockjs-client/lib/info-receiver.js","../../../../../frontend/node_modules/sockjs-client/lib/facade.js","../../../../../frontend/node_modules/sockjs-client/lib/iframe-bootstrap.js","../../../../../frontend/node_modules/sockjs-client/lib/main.js","../../../../../frontend/node_modules/sockjs-client/lib/entry.js","../../../../../frontend/src/lib/services/realtime.ts","../../../../../frontend/src/lib/pages/SearchPage.svelte","../../../../../frontend/src/lib/pages/BookPage.svelte","../../../../../frontend/src/lib/pages/SitemapPage.svelte","../../../../../frontend/src/lib/pages/NotFoundPage.svelte","../../../../../frontend/src/App.svelte","../../../../../frontend/src/main.ts"],"sourcesContent":["export default false;\n","// Store the references to globals in case someone tries to monkey patch these, causing the below\n// to de-opt (this occurs often when using popular extensions).\nexport var is_array = Array.isArray;\nexport var index_of = Array.prototype.indexOf;\nexport var includes = Array.prototype.includes;\nexport var array_from = Array.from;\nexport var object_keys = Object.keys;\nexport var define_property = Object.defineProperty;\nexport var get_descriptor = Object.getOwnPropertyDescriptor;\nexport var get_descriptors = Object.getOwnPropertyDescriptors;\nexport var object_prototype = Object.prototype;\nexport var array_prototype = Array.prototype;\nexport var get_prototype_of = Object.getPrototypeOf;\nexport var is_extensible = Object.isExtensible;\n\n/**\n * @param {any} thing\n * @returns {thing is Function}\n */\nexport function is_function(thing) {\n\treturn typeof thing === 'function';\n}\n\nexport const noop = () => {};\n\n// Adapted from https://github.com/then/is-promise/blob/master/index.js\n// Distributed under MIT License https://github.com/then/is-promise/blob/master/LICENSE\n\n/**\n * @template [T=any]\n * @param {any} value\n * @returns {value is PromiseLike<T>}\n */\nexport function is_promise(value) {\n\treturn typeof value?.then === 'function';\n}\n\n/** @param {Function} fn */\nexport function run(fn) {\n\treturn fn();\n}\n\n/** @param {Array<() => void>} arr */\nexport function run_all(arr) {\n\tfor (var i = 0; i < arr.length; i++) {\n\t\tarr[i]();\n\t}\n}\n\n/**\n * TODO replace with Promise.withResolvers once supported widely enough\n * @template [T=void]\n */\nexport function deferred() {\n\t/** @type {(value: T) => void} */\n\tvar resolve;\n\n\t/** @type {(reason: any) => void} */\n\tvar reject;\n\n\t/** @type {Promise<T>} */\n\tvar promise = new Promise((res, rej) => {\n\t\tresolve = res;\n\t\treject = rej;\n\t});\n\n\t// @ts-expect-error\n\treturn { promise, resolve, reject };\n}\n\n/**\n * @template V\n * @param {V} value\n * @param {V | (() => V)} fallback\n * @param {boolean} [lazy]\n * @returns {V}\n */\nexport function fallback(value, fallback, lazy = false) {\n\treturn value === undefined\n\t\t? lazy\n\t\t\t? /** @type {() => V} */ (fallback)()\n\t\t\t: /** @type {V} */ (fallback)\n\t\t: value;\n}\n\n/**\n * When encountering a situation like `let [a, b, c] = $derived(blah())`,\n * we need to stash an intermediate value that `a`, `b`, and `c` derive\n * from, in case it's an iterable\n * @template T\n * @param {ArrayLike<T> | Iterable<T>} value\n * @param {number} [n]\n * @returns {Array<T>}\n */\nexport function to_array(value, n) {\n\t// return arrays unchanged\n\tif (Array.isArray(value)) {\n\t\treturn value;\n\t}\n\n\t// if value is not iterable, or `n` is unspecified (indicates a rest\n\t// element, which means we're not concerned about unbounded iterables)\n\t// convert to an array with `Array.from`\n\tif (n === undefined || !(Symbol.iterator in value)) {\n\t\treturn Array.from(value);\n\t}\n\n\t// otherwise, populate an array with `n` values\n\n\t/** @type {T[]} */\n\tconst array = [];\n\n\tfor (const element of value) {\n\t\tarray.push(element);\n\t\tif (array.length === n) break;\n\t}\n\n\treturn array;\n}\n","// General flags\nexport const DERIVED = 1 << 1;\nexport const EFFECT = 1 << 2;\nexport const RENDER_EFFECT = 1 << 3;\n/**\n * An effect that does not destroy its child effects when it reruns.\n * Runs as part of render effects, i.e. not eagerly as part of tree traversal or effect flushing.\n */\nexport const MANAGED_EFFECT = 1 << 24;\n/**\n * An effect that does not destroy its child effects when it reruns (like MANAGED_EFFECT).\n * Runs eagerly as part of tree traversal or effect flushing.\n */\nexport const BLOCK_EFFECT = 1 << 4;\nexport const BRANCH_EFFECT = 1 << 5;\nexport const ROOT_EFFECT = 1 << 6;\nexport const BOUNDARY_EFFECT = 1 << 7;\n/**\n * Indicates that a reaction is connected to an effect root â€” either it is an effect,\n * or it is a derived that is depended on by at least one effect. If a derived has\n * no dependents, we can disconnect it from the graph, allowing it to either be\n * GC'd or reconnected later if an effect comes to depend on it again\n */\nexport const CONNECTED = 1 << 9;\nexport const CLEAN = 1 << 10;\nexport const DIRTY = 1 << 11;\nexport const MAYBE_DIRTY = 1 << 12;\nexport const INERT = 1 << 13;\nexport const DESTROYED = 1 << 14;\n\n// Flags exclusive to effects\n/** Set once an effect that should run synchronously has run */\nexport const EFFECT_RAN = 1 << 15;\n/**\n * 'Transparent' effects do not create a transition boundary.\n * This is on a block effect 99% of the time but may also be on a branch effect if its parent block effect was pruned\n */\nexport const EFFECT_TRANSPARENT = 1 << 16;\nexport const EAGER_EFFECT = 1 << 17;\nexport const HEAD_EFFECT = 1 << 18;\nexport const EFFECT_PRESERVED = 1 << 19;\nexport const USER_EFFECT = 1 << 20;\nexport const EFFECT_OFFSCREEN = 1 << 25;\n\n// Flags exclusive to deriveds\n/**\n * Tells that we marked this derived and its reactions as visited during the \"mark as (maybe) dirty\"-phase.\n * Will be lifted during execution of the derived and during checking its dirty state (both are necessary\n * because a derived might be checked but not executed).\n */\nexport const WAS_MARKED = 1 << 15;\n\n// Flags used for async\nexport const REACTION_IS_UPDATING = 1 << 21;\nexport const ASYNC = 1 << 22;\n\nexport const ERROR_VALUE = 1 << 23;\n\nexport const STATE_SYMBOL = Symbol('$state');\nexport const LEGACY_PROPS = Symbol('legacy props');\nexport const LOADING_ATTR_SYMBOL = Symbol('');\nexport const PROXY_PATH_SYMBOL = Symbol('proxy path');\n\n/** allow users to ignore aborted signal errors if `reason.name === 'StaleReactionError` */\nexport const STALE_REACTION = new (class StaleReactionError extends Error {\n\tname = 'StaleReactionError';\n\tmessage = 'The reaction that called `getAbortSignal()` was re-run or destroyed';\n})();\n\nexport const ELEMENT_NODE = 1;\nexport const TEXT_NODE = 3;\nexport const COMMENT_NODE = 8;\nexport const DOCUMENT_FRAGMENT_NODE = 11;\n","/* This file is generated by scripts/process-messages/index.js. Do not edit! */\n\nimport { DEV } from 'esm-env';\n\n/**\n * Cannot use `%name%(...)` unless the `experimental.async` compiler option is `true`\n * @param {string} name\n * @returns {never}\n */\nexport function experimental_async_required(name) {\n\tif (DEV) {\n\t\tconst error = new Error(`experimental_async_required\\nCannot use \\`${name}(...)\\` unless the \\`experimental.async\\` compiler option is \\`true\\`\\nhttps://svelte.dev/e/experimental_async_required`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/experimental_async_required`);\n\t}\n}\n\n/**\n * Cannot use `{@render children(...)}` if the parent component uses `let:` directives. Consider using a named snippet instead\n * @returns {never}\n */\nexport function invalid_default_snippet() {\n\tif (DEV) {\n\t\tconst error = new Error(`invalid_default_snippet\\nCannot use \\`{@render children(...)}\\` if the parent component uses \\`let:\\` directives. Consider using a named snippet instead\\nhttps://svelte.dev/e/invalid_default_snippet`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/invalid_default_snippet`);\n\t}\n}\n\n/**\n * A snippet function was passed invalid arguments. Snippets should only be instantiated via `{@render ...}`\n * @returns {never}\n */\nexport function invalid_snippet_arguments() {\n\tif (DEV) {\n\t\tconst error = new Error(`invalid_snippet_arguments\\nA snippet function was passed invalid arguments. Snippets should only be instantiated via \\`{@render ...}\\`\\nhttps://svelte.dev/e/invalid_snippet_arguments`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/invalid_snippet_arguments`);\n\t}\n}\n\n/**\n * `%name%(...)` can only be used during component initialisation\n * @param {string} name\n * @returns {never}\n */\nexport function lifecycle_outside_component(name) {\n\tif (DEV) {\n\t\tconst error = new Error(`lifecycle_outside_component\\n\\`${name}(...)\\` can only be used during component initialisation\\nhttps://svelte.dev/e/lifecycle_outside_component`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/lifecycle_outside_component`);\n\t}\n}\n\n/**\n * Context was not set in a parent component\n * @returns {never}\n */\nexport function missing_context() {\n\tif (DEV) {\n\t\tconst error = new Error(`missing_context\\nContext was not set in a parent component\\nhttps://svelte.dev/e/missing_context`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/missing_context`);\n\t}\n}\n\n/**\n * Attempted to render a snippet without a `{@render}` block. This would cause the snippet code to be stringified instead of its content being rendered to the DOM. To fix this, change `{snippet}` to `{@render snippet()}`.\n * @returns {never}\n */\nexport function snippet_without_render_tag() {\n\tif (DEV) {\n\t\tconst error = new Error(`snippet_without_render_tag\\nAttempted to render a snippet without a \\`{@render}\\` block. This would cause the snippet code to be stringified instead of its content being rendered to the DOM. To fix this, change \\`{snippet}\\` to \\`{@render snippet()}\\`.\\nhttps://svelte.dev/e/snippet_without_render_tag`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/snippet_without_render_tag`);\n\t}\n}\n\n/**\n * `%name%` is not a store with a `subscribe` method\n * @param {string} name\n * @returns {never}\n */\nexport function store_invalid_shape(name) {\n\tif (DEV) {\n\t\tconst error = new Error(`store_invalid_shape\\n\\`${name}\\` is not a store with a \\`subscribe\\` method\\nhttps://svelte.dev/e/store_invalid_shape`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/store_invalid_shape`);\n\t}\n}\n\n/**\n * The `this` prop on `<svelte:element>` must be a string, if defined\n * @returns {never}\n */\nexport function svelte_element_invalid_this_value() {\n\tif (DEV) {\n\t\tconst error = new Error(`svelte_element_invalid_this_value\\nThe \\`this\\` prop on \\`<svelte:element>\\` must be a string, if defined\\nhttps://svelte.dev/e/svelte_element_invalid_this_value`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/svelte_element_invalid_this_value`);\n\t}\n}","/* This file is generated by scripts/process-messages/index.js. Do not edit! */\n\nimport { DEV } from 'esm-env';\n\nexport *  from '../shared/errors.js';\n\n/**\n * Cannot create a `$derived(...)` with an `await` expression outside of an effect tree\n * @returns {never}\n */\nexport function async_derived_orphan() {\n\tif (DEV) {\n\t\tconst error = new Error(`async_derived_orphan\\nCannot create a \\`$derived(...)\\` with an \\`await\\` expression outside of an effect tree\\nhttps://svelte.dev/e/async_derived_orphan`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/async_derived_orphan`);\n\t}\n}\n\n/**\n * Using `bind:value` together with a checkbox input is not allowed. Use `bind:checked` instead\n * @returns {never}\n */\nexport function bind_invalid_checkbox_value() {\n\tif (DEV) {\n\t\tconst error = new Error(`bind_invalid_checkbox_value\\nUsing \\`bind:value\\` together with a checkbox input is not allowed. Use \\`bind:checked\\` instead\\nhttps://svelte.dev/e/bind_invalid_checkbox_value`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/bind_invalid_checkbox_value`);\n\t}\n}\n\n/**\n * Component %component% has an export named `%key%` that a consumer component is trying to access using `bind:%key%`, which is disallowed. Instead, use `bind:this` (e.g. `<%name% bind:this={component} />`) and then access the property on the bound component instance (e.g. `component.%key%`)\n * @param {string} component\n * @param {string} key\n * @param {string} name\n * @returns {never}\n */\nexport function bind_invalid_export(component, key, name) {\n\tif (DEV) {\n\t\tconst error = new Error(`bind_invalid_export\\nComponent ${component} has an export named \\`${key}\\` that a consumer component is trying to access using \\`bind:${key}\\`, which is disallowed. Instead, use \\`bind:this\\` (e.g. \\`<${name} bind:this={component} />\\`) and then access the property on the bound component instance (e.g. \\`component.${key}\\`)\\nhttps://svelte.dev/e/bind_invalid_export`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/bind_invalid_export`);\n\t}\n}\n\n/**\n * A component is attempting to bind to a non-bindable property `%key%` belonging to %component% (i.e. `<%name% bind:%key%={...}>`). To mark a property as bindable: `let { %key% = $bindable() } = $props()`\n * @param {string} key\n * @param {string} component\n * @param {string} name\n * @returns {never}\n */\nexport function bind_not_bindable(key, component, name) {\n\tif (DEV) {\n\t\tconst error = new Error(`bind_not_bindable\\nA component is attempting to bind to a non-bindable property \\`${key}\\` belonging to ${component} (i.e. \\`<${name} bind:${key}={...}>\\`). To mark a property as bindable: \\`let { ${key} = $bindable() } = $props()\\`\\nhttps://svelte.dev/e/bind_not_bindable`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/bind_not_bindable`);\n\t}\n}\n\n/**\n * Calling `%method%` on a component instance (of %component%) is no longer valid in Svelte 5\n * @param {string} method\n * @param {string} component\n * @returns {never}\n */\nexport function component_api_changed(method, component) {\n\tif (DEV) {\n\t\tconst error = new Error(`component_api_changed\\nCalling \\`${method}\\` on a component instance (of ${component}) is no longer valid in Svelte 5\\nhttps://svelte.dev/e/component_api_changed`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/component_api_changed`);\n\t}\n}\n\n/**\n * Attempted to instantiate %component% with `new %name%`, which is no longer valid in Svelte 5. If this component is not under your control, set the `compatibility.componentApi` compiler option to `4` to keep it working.\n * @param {string} component\n * @param {string} name\n * @returns {never}\n */\nexport function component_api_invalid_new(component, name) {\n\tif (DEV) {\n\t\tconst error = new Error(`component_api_invalid_new\\nAttempted to instantiate ${component} with \\`new ${name}\\`, which is no longer valid in Svelte 5. If this component is not under your control, set the \\`compatibility.componentApi\\` compiler option to \\`4\\` to keep it working.\\nhttps://svelte.dev/e/component_api_invalid_new`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/component_api_invalid_new`);\n\t}\n}\n\n/**\n * A derived value cannot reference itself recursively\n * @returns {never}\n */\nexport function derived_references_self() {\n\tif (DEV) {\n\t\tconst error = new Error(`derived_references_self\\nA derived value cannot reference itself recursively\\nhttps://svelte.dev/e/derived_references_self`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/derived_references_self`);\n\t}\n}\n\n/**\n * Keyed each block has duplicate key `%value%` at indexes %a% and %b%\n * @param {string} a\n * @param {string} b\n * @param {string | undefined | null} [value]\n * @returns {never}\n */\nexport function each_key_duplicate(a, b, value) {\n\tif (DEV) {\n\t\tconst error = new Error(`each_key_duplicate\\n${value\n\t\t\t? `Keyed each block has duplicate key \\`${value}\\` at indexes ${a} and ${b}`\n\t\t\t: `Keyed each block has duplicate key at indexes ${a} and ${b}`}\\nhttps://svelte.dev/e/each_key_duplicate`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/each_key_duplicate`);\n\t}\n}\n\n/**\n * `%rune%` cannot be used inside an effect cleanup function\n * @param {string} rune\n * @returns {never}\n */\nexport function effect_in_teardown(rune) {\n\tif (DEV) {\n\t\tconst error = new Error(`effect_in_teardown\\n\\`${rune}\\` cannot be used inside an effect cleanup function\\nhttps://svelte.dev/e/effect_in_teardown`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/effect_in_teardown`);\n\t}\n}\n\n/**\n * Effect cannot be created inside a `$derived` value that was not itself created inside an effect\n * @returns {never}\n */\nexport function effect_in_unowned_derived() {\n\tif (DEV) {\n\t\tconst error = new Error(`effect_in_unowned_derived\\nEffect cannot be created inside a \\`$derived\\` value that was not itself created inside an effect\\nhttps://svelte.dev/e/effect_in_unowned_derived`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/effect_in_unowned_derived`);\n\t}\n}\n\n/**\n * `%rune%` can only be used inside an effect (e.g. during component initialisation)\n * @param {string} rune\n * @returns {never}\n */\nexport function effect_orphan(rune) {\n\tif (DEV) {\n\t\tconst error = new Error(`effect_orphan\\n\\`${rune}\\` can only be used inside an effect (e.g. during component initialisation)\\nhttps://svelte.dev/e/effect_orphan`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/effect_orphan`);\n\t}\n}\n\n/**\n * `$effect.pending()` can only be called inside an effect or derived\n * @returns {never}\n */\nexport function effect_pending_outside_reaction() {\n\tif (DEV) {\n\t\tconst error = new Error(`effect_pending_outside_reaction\\n\\`$effect.pending()\\` can only be called inside an effect or derived\\nhttps://svelte.dev/e/effect_pending_outside_reaction`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/effect_pending_outside_reaction`);\n\t}\n}\n\n/**\n * Maximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state\n * @returns {never}\n */\nexport function effect_update_depth_exceeded() {\n\tif (DEV) {\n\t\tconst error = new Error(`effect_update_depth_exceeded\\nMaximum update depth exceeded. This typically indicates that an effect reads and writes the same piece of state\\nhttps://svelte.dev/e/effect_update_depth_exceeded`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/effect_update_depth_exceeded`);\n\t}\n}\n\n/**\n * Cannot use `flushSync` inside an effect\n * @returns {never}\n */\nexport function flush_sync_in_effect() {\n\tif (DEV) {\n\t\tconst error = new Error(`flush_sync_in_effect\\nCannot use \\`flushSync\\` inside an effect\\nhttps://svelte.dev/e/flush_sync_in_effect`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/flush_sync_in_effect`);\n\t}\n}\n\n/**\n * Cannot commit a fork that was already discarded\n * @returns {never}\n */\nexport function fork_discarded() {\n\tif (DEV) {\n\t\tconst error = new Error(`fork_discarded\\nCannot commit a fork that was already discarded\\nhttps://svelte.dev/e/fork_discarded`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/fork_discarded`);\n\t}\n}\n\n/**\n * Cannot create a fork inside an effect or when state changes are pending\n * @returns {never}\n */\nexport function fork_timing() {\n\tif (DEV) {\n\t\tconst error = new Error(`fork_timing\\nCannot create a fork inside an effect or when state changes are pending\\nhttps://svelte.dev/e/fork_timing`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/fork_timing`);\n\t}\n}\n\n/**\n * `getAbortSignal()` can only be called inside an effect or derived\n * @returns {never}\n */\nexport function get_abort_signal_outside_reaction() {\n\tif (DEV) {\n\t\tconst error = new Error(`get_abort_signal_outside_reaction\\n\\`getAbortSignal()\\` can only be called inside an effect or derived\\nhttps://svelte.dev/e/get_abort_signal_outside_reaction`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/get_abort_signal_outside_reaction`);\n\t}\n}\n\n/**\n * Expected to find a hydratable with key `%key%` during hydration, but did not.\n * @param {string} key\n * @returns {never}\n */\nexport function hydratable_missing_but_required(key) {\n\tif (DEV) {\n\t\tconst error = new Error(`hydratable_missing_but_required\\nExpected to find a hydratable with key \\`${key}\\` during hydration, but did not.\\nhttps://svelte.dev/e/hydratable_missing_but_required`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/hydratable_missing_but_required`);\n\t}\n}\n\n/**\n * Failed to hydrate the application\n * @returns {never}\n */\nexport function hydration_failed() {\n\tif (DEV) {\n\t\tconst error = new Error(`hydration_failed\\nFailed to hydrate the application\\nhttps://svelte.dev/e/hydration_failed`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/hydration_failed`);\n\t}\n}\n\n/**\n * Could not `{@render}` snippet due to the expression being `null` or `undefined`. Consider using optional chaining `{@render snippet?.()}`\n * @returns {never}\n */\nexport function invalid_snippet() {\n\tif (DEV) {\n\t\tconst error = new Error(`invalid_snippet\\nCould not \\`{@render}\\` snippet due to the expression being \\`null\\` or \\`undefined\\`. Consider using optional chaining \\`{@render snippet?.()}\\`\\nhttps://svelte.dev/e/invalid_snippet`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/invalid_snippet`);\n\t}\n}\n\n/**\n * `%name%(...)` cannot be used in runes mode\n * @param {string} name\n * @returns {never}\n */\nexport function lifecycle_legacy_only(name) {\n\tif (DEV) {\n\t\tconst error = new Error(`lifecycle_legacy_only\\n\\`${name}(...)\\` cannot be used in runes mode\\nhttps://svelte.dev/e/lifecycle_legacy_only`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/lifecycle_legacy_only`);\n\t}\n}\n\n/**\n * Cannot do `bind:%key%={undefined}` when `%key%` has a fallback value\n * @param {string} key\n * @returns {never}\n */\nexport function props_invalid_value(key) {\n\tif (DEV) {\n\t\tconst error = new Error(`props_invalid_value\\nCannot do \\`bind:${key}={undefined}\\` when \\`${key}\\` has a fallback value\\nhttps://svelte.dev/e/props_invalid_value`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/props_invalid_value`);\n\t}\n}\n\n/**\n * Rest element properties of `$props()` such as `%property%` are readonly\n * @param {string} property\n * @returns {never}\n */\nexport function props_rest_readonly(property) {\n\tif (DEV) {\n\t\tconst error = new Error(`props_rest_readonly\\nRest element properties of \\`$props()\\` such as \\`${property}\\` are readonly\\nhttps://svelte.dev/e/props_rest_readonly`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/props_rest_readonly`);\n\t}\n}\n\n/**\n * The `%rune%` rune is only available inside `.svelte` and `.svelte.js/ts` files\n * @param {string} rune\n * @returns {never}\n */\nexport function rune_outside_svelte(rune) {\n\tif (DEV) {\n\t\tconst error = new Error(`rune_outside_svelte\\nThe \\`${rune}\\` rune is only available inside \\`.svelte\\` and \\`.svelte.js/ts\\` files\\nhttps://svelte.dev/e/rune_outside_svelte`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/rune_outside_svelte`);\n\t}\n}\n\n/**\n * `setContext` must be called when a component first initializes, not in a subsequent effect or after an `await` expression\n * @returns {never}\n */\nexport function set_context_after_init() {\n\tif (DEV) {\n\t\tconst error = new Error(`set_context_after_init\\n\\`setContext\\` must be called when a component first initializes, not in a subsequent effect or after an \\`await\\` expression\\nhttps://svelte.dev/e/set_context_after_init`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/set_context_after_init`);\n\t}\n}\n\n/**\n * Property descriptors defined on `$state` objects must contain `value` and always be `enumerable`, `configurable` and `writable`.\n * @returns {never}\n */\nexport function state_descriptors_fixed() {\n\tif (DEV) {\n\t\tconst error = new Error(`state_descriptors_fixed\\nProperty descriptors defined on \\`$state\\` objects must contain \\`value\\` and always be \\`enumerable\\`, \\`configurable\\` and \\`writable\\`.\\nhttps://svelte.dev/e/state_descriptors_fixed`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/state_descriptors_fixed`);\n\t}\n}\n\n/**\n * Cannot set prototype of `$state` object\n * @returns {never}\n */\nexport function state_prototype_fixed() {\n\tif (DEV) {\n\t\tconst error = new Error(`state_prototype_fixed\\nCannot set prototype of \\`$state\\` object\\nhttps://svelte.dev/e/state_prototype_fixed`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/state_prototype_fixed`);\n\t}\n}\n\n/**\n * Updating state inside `$derived(...)`, `$inspect(...)` or a template expression is forbidden. If the value should not be reactive, declare it without `$state`\n * @returns {never}\n */\nexport function state_unsafe_mutation() {\n\tif (DEV) {\n\t\tconst error = new Error(`state_unsafe_mutation\\nUpdating state inside \\`$derived(...)\\`, \\`$inspect(...)\\` or a template expression is forbidden. If the value should not be reactive, declare it without \\`$state\\`\\nhttps://svelte.dev/e/state_unsafe_mutation`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/state_unsafe_mutation`);\n\t}\n}\n\n/**\n * A `<svelte:boundary>` `reset` function cannot be called while an error is still being handled\n * @returns {never}\n */\nexport function svelte_boundary_reset_onerror() {\n\tif (DEV) {\n\t\tconst error = new Error(`svelte_boundary_reset_onerror\\nA \\`<svelte:boundary>\\` \\`reset\\` function cannot be called while an error is still being handled\\nhttps://svelte.dev/e/svelte_boundary_reset_onerror`);\n\n\t\terror.name = 'Svelte error';\n\n\t\tthrow error;\n\t} else {\n\t\tthrow new Error(`https://svelte.dev/e/svelte_boundary_reset_onerror`);\n\t}\n}","export const EACH_ITEM_REACTIVE = 1;\nexport const EACH_INDEX_REACTIVE = 1 << 1;\n/** See EachBlock interface metadata.is_controlled for an explanation what this is */\nexport const EACH_IS_CONTROLLED = 1 << 2;\nexport const EACH_IS_ANIMATED = 1 << 3;\nexport const EACH_ITEM_IMMUTABLE = 1 << 4;\n\nexport const PROPS_IS_IMMUTABLE = 1;\nexport const PROPS_IS_RUNES = 1 << 1;\nexport const PROPS_IS_UPDATED = 1 << 2;\nexport const PROPS_IS_BINDABLE = 1 << 3;\nexport const PROPS_IS_LAZY_INITIAL = 1 << 4;\n\nexport const TRANSITION_IN = 1;\nexport const TRANSITION_OUT = 1 << 1;\nexport const TRANSITION_GLOBAL = 1 << 2;\n\nexport const TEMPLATE_FRAGMENT = 1;\nexport const TEMPLATE_USE_IMPORT_NODE = 1 << 1;\nexport const TEMPLATE_USE_SVG = 1 << 2;\nexport const TEMPLATE_USE_MATHML = 1 << 3;\n\nexport const HYDRATION_START = '[';\n/** used to indicate that an `{:else}...` block was rendered */\nexport const HYDRATION_START_ELSE = '[!';\nexport const HYDRATION_END = ']';\nexport const HYDRATION_ERROR = {};\n\nexport const ELEMENT_IS_NAMESPACED = 1;\nexport const ELEMENT_PRESERVE_ATTRIBUTE_CASE = 1 << 1;\nexport const ELEMENT_IS_INPUT = 1 << 2;\n\nexport const UNINITIALIZED = Symbol();\n\n// Dev-time component properties\nexport const FILENAME = Symbol('filename');\nexport const HMR = Symbol('hmr');\n\nexport const NAMESPACE_HTML = 'http://www.w3.org/1999/xhtml';\nexport const NAMESPACE_SVG = 'http://www.w3.org/2000/svg';\nexport const NAMESPACE_MATHML = 'http://www.w3.org/1998/Math/MathML';\n\n// we use a list of ignorable runtime warnings because not every runtime warning\n// can be ignored and we want to keep the validation for svelte-ignore in place\nexport const IGNORABLE_RUNTIME_WARNINGS = /** @type {const} */ ([\n\t'await_waterfall',\n\t'await_reactivity_loss',\n\t'state_snapshot_uncloneable',\n\t'binding_property_non_reactive',\n\t'hydration_attribute_changed',\n\t'hydration_html_changed',\n\t'ownership_invalid_binding',\n\t'ownership_invalid_mutation'\n]);\n\n/**\n * Whitespace inside one of these elements will not result in\n * a whitespace node being created in any circumstances. (This\n * list is almost certainly very incomplete)\n * TODO this is currently unused\n */\nexport const ELEMENTS_WITHOUT_TEXT = ['audio', 'datalist', 'dl', 'optgroup', 'select', 'video'];\n\nexport const ATTACHMENT_KEY = '@attach';\n","/* This file is generated by scripts/process-messages/index.js. Do not edit! */\n\nimport { DEV } from 'esm-env';\n\nvar bold = 'font-weight: bold';\nvar normal = 'font-weight: normal';\n\n/**\n * Assignment to `%property%` property (%location%) will evaluate to the right-hand side, not the value of `%property%` following the assignment. This may result in unexpected behaviour.\n * @param {string} property\n * @param {string} location\n */\nexport function assignment_value_stale(property, location) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] assignment_value_stale\\n%cAssignment to \\`${property}\\` property (${location}) will evaluate to the right-hand side, not the value of \\`${property}\\` following the assignment. This may result in unexpected behaviour.\\nhttps://svelte.dev/e/assignment_value_stale`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/assignment_value_stale`);\n\t}\n}\n\n/**\n * Detected reactivity loss when reading `%name%`. This happens when state is read in an async function after an earlier `await`\n * @param {string} name\n */\nexport function await_reactivity_loss(name) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] await_reactivity_loss\\n%cDetected reactivity loss when reading \\`${name}\\`. This happens when state is read in an async function after an earlier \\`await\\`\\nhttps://svelte.dev/e/await_reactivity_loss`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/await_reactivity_loss`);\n\t}\n}\n\n/**\n * An async derived, `%name%` (%location%) was not read immediately after it resolved. This often indicates an unnecessary waterfall, which can slow down your app\n * @param {string} name\n * @param {string} location\n */\nexport function await_waterfall(name, location) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] await_waterfall\\n%cAn async derived, \\`${name}\\` (${location}) was not read immediately after it resolved. This often indicates an unnecessary waterfall, which can slow down your app\\nhttps://svelte.dev/e/await_waterfall`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/await_waterfall`);\n\t}\n}\n\n/**\n * `%binding%` (%location%) is binding to a non-reactive property\n * @param {string} binding\n * @param {string | undefined | null} [location]\n */\nexport function binding_property_non_reactive(binding, location) {\n\tif (DEV) {\n\t\tconsole.warn(\n\t\t\t`%c[svelte] binding_property_non_reactive\\n%c${location\n\t\t\t\t? `\\`${binding}\\` (${location}) is binding to a non-reactive property`\n\t\t\t\t: `\\`${binding}\\` is binding to a non-reactive property`}\\nhttps://svelte.dev/e/binding_property_non_reactive`,\n\t\t\tbold,\n\t\t\tnormal\n\t\t);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/binding_property_non_reactive`);\n\t}\n}\n\n/**\n * Your `console.%method%` contained `$state` proxies. Consider using `$inspect(...)` or `$state.snapshot(...)` instead\n * @param {string} method\n */\nexport function console_log_state(method) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] console_log_state\\n%cYour \\`console.${method}\\` contained \\`$state\\` proxies. Consider using \\`$inspect(...)\\` or \\`$state.snapshot(...)\\` instead\\nhttps://svelte.dev/e/console_log_state`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/console_log_state`);\n\t}\n}\n\n/**\n * %handler% should be a function. Did you mean to %suggestion%?\n * @param {string} handler\n * @param {string} suggestion\n */\nexport function event_handler_invalid(handler, suggestion) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] event_handler_invalid\\n%c${handler} should be a function. Did you mean to ${suggestion}?\\nhttps://svelte.dev/e/event_handler_invalid`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/event_handler_invalid`);\n\t}\n}\n\n/**\n * Expected to find a hydratable with key `%key%` during hydration, but did not.\n * @param {string} key\n */\nexport function hydratable_missing_but_expected(key) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] hydratable_missing_but_expected\\n%cExpected to find a hydratable with key \\`${key}\\` during hydration, but did not.\\nhttps://svelte.dev/e/hydratable_missing_but_expected`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/hydratable_missing_but_expected`);\n\t}\n}\n\n/**\n * The `%attribute%` attribute on `%html%` changed its value between server and client renders. The client value, `%value%`, will be ignored in favour of the server value\n * @param {string} attribute\n * @param {string} html\n * @param {string} value\n */\nexport function hydration_attribute_changed(attribute, html, value) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] hydration_attribute_changed\\n%cThe \\`${attribute}\\` attribute on \\`${html}\\` changed its value between server and client renders. The client value, \\`${value}\\`, will be ignored in favour of the server value\\nhttps://svelte.dev/e/hydration_attribute_changed`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/hydration_attribute_changed`);\n\t}\n}\n\n/**\n * The value of an `{@html ...}` block %location% changed between server and client renders. The client value will be ignored in favour of the server value\n * @param {string | undefined | null} [location]\n */\nexport function hydration_html_changed(location) {\n\tif (DEV) {\n\t\tconsole.warn(\n\t\t\t`%c[svelte] hydration_html_changed\\n%c${location\n\t\t\t\t? `The value of an \\`{@html ...}\\` block ${location} changed between server and client renders. The client value will be ignored in favour of the server value`\n\t\t\t\t: 'The value of an `{@html ...}` block changed between server and client renders. The client value will be ignored in favour of the server value'}\\nhttps://svelte.dev/e/hydration_html_changed`,\n\t\t\tbold,\n\t\t\tnormal\n\t\t);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/hydration_html_changed`);\n\t}\n}\n\n/**\n * Hydration failed because the initial UI does not match what was rendered on the server. The error occurred near %location%\n * @param {string | undefined | null} [location]\n */\nexport function hydration_mismatch(location) {\n\tif (DEV) {\n\t\tconsole.warn(\n\t\t\t`%c[svelte] hydration_mismatch\\n%c${location\n\t\t\t\t? `Hydration failed because the initial UI does not match what was rendered on the server. The error occurred near ${location}`\n\t\t\t\t: 'Hydration failed because the initial UI does not match what was rendered on the server'}\\nhttps://svelte.dev/e/hydration_mismatch`,\n\t\t\tbold,\n\t\t\tnormal\n\t\t);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/hydration_mismatch`);\n\t}\n}\n\n/**\n * The `render` function passed to `createRawSnippet` should return HTML for a single element\n */\nexport function invalid_raw_snippet_render() {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] invalid_raw_snippet_render\\n%cThe \\`render\\` function passed to \\`createRawSnippet\\` should return HTML for a single element\\nhttps://svelte.dev/e/invalid_raw_snippet_render`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/invalid_raw_snippet_render`);\n\t}\n}\n\n/**\n * Detected a migrated `$:` reactive block in `%filename%` that both accesses and updates the same reactive value. This may cause recursive updates when converted to an `$effect`.\n * @param {string} filename\n */\nexport function legacy_recursive_reactive_block(filename) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] legacy_recursive_reactive_block\\n%cDetected a migrated \\`$:\\` reactive block in \\`${filename}\\` that both accesses and updates the same reactive value. This may cause recursive updates when converted to an \\`$effect\\`.\\nhttps://svelte.dev/e/legacy_recursive_reactive_block`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/legacy_recursive_reactive_block`);\n\t}\n}\n\n/**\n * Tried to unmount a component that was not mounted\n */\nexport function lifecycle_double_unmount() {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] lifecycle_double_unmount\\n%cTried to unmount a component that was not mounted\\nhttps://svelte.dev/e/lifecycle_double_unmount`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/lifecycle_double_unmount`);\n\t}\n}\n\n/**\n * %parent% passed property `%prop%` to %child% with `bind:`, but its parent component %owner% did not declare `%prop%` as a binding. Consider creating a binding between %owner% and %parent% (e.g. `bind:%prop%={...}` instead of `%prop%={...}`)\n * @param {string} parent\n * @param {string} prop\n * @param {string} child\n * @param {string} owner\n */\nexport function ownership_invalid_binding(parent, prop, child, owner) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] ownership_invalid_binding\\n%c${parent} passed property \\`${prop}\\` to ${child} with \\`bind:\\`, but its parent component ${owner} did not declare \\`${prop}\\` as a binding. Consider creating a binding between ${owner} and ${parent} (e.g. \\`bind:${prop}={...}\\` instead of \\`${prop}={...}\\`)\\nhttps://svelte.dev/e/ownership_invalid_binding`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/ownership_invalid_binding`);\n\t}\n}\n\n/**\n * Mutating unbound props (`%name%`, at %location%) is strongly discouraged. Consider using `bind:%prop%={...}` in %parent% (or using a callback) instead\n * @param {string} name\n * @param {string} location\n * @param {string} prop\n * @param {string} parent\n */\nexport function ownership_invalid_mutation(name, location, prop, parent) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] ownership_invalid_mutation\\n%cMutating unbound props (\\`${name}\\`, at ${location}) is strongly discouraged. Consider using \\`bind:${prop}={...}\\` in ${parent} (or using a callback) instead\\nhttps://svelte.dev/e/ownership_invalid_mutation`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/ownership_invalid_mutation`);\n\t}\n}\n\n/**\n * The `value` property of a `<select multiple>` element should be an array, but it received a non-array value. The selection will be kept as is.\n */\nexport function select_multiple_invalid_value() {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] select_multiple_invalid_value\\n%cThe \\`value\\` property of a \\`<select multiple>\\` element should be an array, but it received a non-array value. The selection will be kept as is.\\nhttps://svelte.dev/e/select_multiple_invalid_value`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/select_multiple_invalid_value`);\n\t}\n}\n\n/**\n * Reactive `$state(...)` proxies and the values they proxy have different identities. Because of this, comparisons with `%operator%` will produce unexpected results\n * @param {string} operator\n */\nexport function state_proxy_equality_mismatch(operator) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] state_proxy_equality_mismatch\\n%cReactive \\`$state(...)\\` proxies and the values they proxy have different identities. Because of this, comparisons with \\`${operator}\\` will produce unexpected results\\nhttps://svelte.dev/e/state_proxy_equality_mismatch`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/state_proxy_equality_mismatch`);\n\t}\n}\n\n/**\n * Tried to unmount a state proxy, rather than a component\n */\nexport function state_proxy_unmount() {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] state_proxy_unmount\\n%cTried to unmount a state proxy, rather than a component\\nhttps://svelte.dev/e/state_proxy_unmount`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/state_proxy_unmount`);\n\t}\n}\n\n/**\n * A `<svelte:boundary>` `reset` function only resets the boundary the first time it is called\n */\nexport function svelte_boundary_reset_noop() {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] svelte_boundary_reset_noop\\n%cA \\`<svelte:boundary>\\` \\`reset\\` function only resets the boundary the first time it is called\\nhttps://svelte.dev/e/svelte_boundary_reset_noop`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/svelte_boundary_reset_noop`);\n\t}\n}\n\n/**\n * The `slide` transition does not work correctly for elements with `display: %value%`\n * @param {string} value\n */\nexport function transition_slide_display(value) {\n\tif (DEV) {\n\t\tconsole.warn(`%c[svelte] transition_slide_display\\n%cThe \\`slide\\` transition does not work correctly for elements with \\`display: ${value}\\`\\nhttps://svelte.dev/e/transition_slide_display`, bold, normal);\n\t} else {\n\t\tconsole.warn(`https://svelte.dev/e/transition_slide_display`);\n\t}\n}","/** @import { Equals } from '#client' */\n\n/** @type {Equals} */\nexport function equals(value) {\n\treturn value === this.v;\n}\n\n/**\n * @param {unknown} a\n * @param {unknown} b\n * @returns {boolean}\n */\nexport function safe_not_equal(a, b) {\n\treturn a != a\n\t\t? b == b\n\t\t: a !== b || (a !== null && typeof a === 'object') || typeof a === 'function';\n}\n\n/**\n * @param {unknown} a\n * @param {unknown} b\n * @returns {boolean}\n */\nexport function not_equal(a, b) {\n\treturn a !== b;\n}\n\n/** @type {Equals} */\nexport function safe_equals(value) {\n\treturn !safe_not_equal(value, this.v);\n}\n","/** True if experimental.async=true */\nexport let async_mode_flag = false;\n/** True if we're not certain that we only have Svelte 5 code in the compilation */\nexport let legacy_mode_flag = false;\n/** True if $inspect.trace is used */\nexport let tracing_mode_flag = false;\n\nexport function enable_async_mode_flag() {\n\tasync_mode_flag = true;\n}\n\n/** ONLY USE THIS DURING TESTING */\nexport function disable_async_mode_flag() {\n\tasync_mode_flag = false;\n}\n\nexport function enable_legacy_mode_flag() {\n\tlegacy_mode_flag = true;\n}\n\nexport function enable_tracing_mode_flag() {\n\ttracing_mode_flag = true;\n}\n","/** @import { ComponentContext, DevStackEntry, Effect } from '#client' */\nimport { DEV } from 'esm-env';\nimport * as e from './errors.js';\nimport { active_effect, active_reaction } from './runtime.js';\nimport { create_user_effect } from './reactivity/effects.js';\nimport { async_mode_flag, legacy_mode_flag } from '../flags/index.js';\nimport { FILENAME } from '../../constants.js';\nimport { BRANCH_EFFECT, EFFECT_RAN } from './constants.js';\n\n/** @type {ComponentContext | null} */\nexport let component_context = null;\n\n/** @param {ComponentContext | null} context */\nexport function set_component_context(context) {\n\tcomponent_context = context;\n}\n\n/** @type {DevStackEntry | null} */\nexport let dev_stack = null;\n\n/** @param {DevStackEntry | null} stack */\nexport function set_dev_stack(stack) {\n\tdev_stack = stack;\n}\n\n/**\n * Execute a callback with a new dev stack entry\n * @param {() => any} callback - Function to execute\n * @param {DevStackEntry['type']} type - Type of block/component\n * @param {any} component - Component function\n * @param {number} line - Line number\n * @param {number} column - Column number\n * @param {Record<string, any>} [additional] - Any additional properties to add to the dev stack entry\n * @returns {any}\n */\nexport function add_svelte_meta(callback, type, component, line, column, additional) {\n\tconst parent = dev_stack;\n\n\tdev_stack = {\n\t\ttype,\n\t\tfile: component[FILENAME],\n\t\tline,\n\t\tcolumn,\n\t\tparent,\n\t\t...additional\n\t};\n\n\ttry {\n\t\treturn callback();\n\t} finally {\n\t\tdev_stack = parent;\n\t}\n}\n\n/**\n * The current component function. Different from current component context:\n * ```html\n * <!-- App.svelte -->\n * <Foo>\n *   <Bar /> <!-- context == Foo.svelte, function == App.svelte -->\n * </Foo>\n * ```\n * @type {ComponentContext['function']}\n */\nexport let dev_current_component_function = null;\n\n/** @param {ComponentContext['function']} fn */\nexport function set_dev_current_component_function(fn) {\n\tdev_current_component_function = fn;\n}\n\n/**\n * Returns a `[get, set]` pair of functions for working with context in a type-safe way.\n *\n * `get` will throw an error if no parent component called `set`.\n *\n * @template T\n * @returns {[() => T, (context: T) => T]}\n * @since 5.40.0\n */\nexport function createContext() {\n\tconst key = {};\n\n\treturn [\n\t\t() => {\n\t\t\tif (!hasContext(key)) {\n\t\t\t\te.missing_context();\n\t\t\t}\n\n\t\t\treturn getContext(key);\n\t\t},\n\t\t(context) => setContext(key, context)\n\t];\n}\n\n/**\n * Retrieves the context that belongs to the closest parent component with the specified `key`.\n * Must be called during component initialisation.\n *\n * [`createContext`](https://svelte.dev/docs/svelte/svelte#createContext) is a type-safe alternative.\n *\n * @template T\n * @param {any} key\n * @returns {T}\n */\nexport function getContext(key) {\n\tconst context_map = get_or_init_context_map('getContext');\n\tconst result = /** @type {T} */ (context_map.get(key));\n\treturn result;\n}\n\n/**\n * Associates an arbitrary `context` object with the current component and the specified `key`\n * and returns that object. The context is then available to children of the component\n * (including slotted content) with `getContext`.\n *\n * Like lifecycle functions, this must be called during component initialisation.\n *\n * [`createContext`](https://svelte.dev/docs/svelte/svelte#createContext) is a type-safe alternative.\n *\n * @template T\n * @param {any} key\n * @param {T} context\n * @returns {T}\n */\nexport function setContext(key, context) {\n\tconst context_map = get_or_init_context_map('setContext');\n\n\tif (async_mode_flag) {\n\t\tvar flags = /** @type {Effect} */ (active_effect).f;\n\t\tvar valid =\n\t\t\t!active_reaction &&\n\t\t\t(flags & BRANCH_EFFECT) !== 0 &&\n\t\t\t// pop() runs synchronously, so this indicates we're setting context after an await\n\t\t\t!(/** @type {ComponentContext} */ (component_context).i);\n\n\t\tif (!valid) {\n\t\t\te.set_context_after_init();\n\t\t}\n\t}\n\n\tcontext_map.set(key, context);\n\treturn context;\n}\n\n/**\n * Checks whether a given `key` has been set in the context of a parent component.\n * Must be called during component initialisation.\n *\n * @param {any} key\n * @returns {boolean}\n */\nexport function hasContext(key) {\n\tconst context_map = get_or_init_context_map('hasContext');\n\treturn context_map.has(key);\n}\n\n/**\n * Retrieves the whole context map that belongs to the closest parent component.\n * Must be called during component initialisation. Useful, for example, if you\n * programmatically create a component and want to pass the existing context to it.\n *\n * @template {Map<any, any>} [T=Map<any, any>]\n * @returns {T}\n */\nexport function getAllContexts() {\n\tconst context_map = get_or_init_context_map('getAllContexts');\n\treturn /** @type {T} */ (context_map);\n}\n\n/**\n * @param {Record<string, unknown>} props\n * @param {any} runes\n * @param {Function} [fn]\n * @returns {void}\n */\nexport function push(props, runes = false, fn) {\n\tcomponent_context = {\n\t\tp: component_context,\n\t\ti: false,\n\t\tc: null,\n\t\te: null,\n\t\ts: props,\n\t\tx: null,\n\t\tl: legacy_mode_flag && !runes ? { s: null, u: null, $: [] } : null\n\t};\n\n\tif (DEV) {\n\t\t// component function\n\t\tcomponent_context.function = fn;\n\t\tdev_current_component_function = fn;\n\t}\n}\n\n/**\n * @template {Record<string, any>} T\n * @param {T} [component]\n * @returns {T}\n */\nexport function pop(component) {\n\tvar context = /** @type {ComponentContext} */ (component_context);\n\tvar effects = context.e;\n\n\tif (effects !== null) {\n\t\tcontext.e = null;\n\n\t\tfor (var fn of effects) {\n\t\t\tcreate_user_effect(fn);\n\t\t}\n\t}\n\n\tif (component !== undefined) {\n\t\tcontext.x = component;\n\t}\n\n\tcontext.i = true;\n\n\tcomponent_context = context.p;\n\n\tif (DEV) {\n\t\tdev_current_component_function = component_context?.function ?? null;\n\t}\n\n\treturn component ?? /** @type {T} */ ({});\n}\n\n/** @returns {boolean} */\nexport function is_runes() {\n\treturn !legacy_mode_flag || (component_context !== null && component_context.l === null);\n}\n\n/**\n * @param {string} name\n * @returns {Map<unknown, unknown>}\n */\nfunction get_or_init_context_map(name) {\n\tif (component_context === null) {\n\t\te.lifecycle_outside_component(name);\n\t}\n\n\treturn (component_context.c ??= new Map(get_parent_context(component_context) || undefined));\n}\n\n/**\n * @param {ComponentContext} component_context\n * @returns {Map<unknown, unknown> | null}\n */\nfunction get_parent_context(component_context) {\n\tlet parent = component_context.p;\n\twhile (parent !== null) {\n\t\tconst context_map = parent.c;\n\t\tif (context_map !== null) {\n\t\t\treturn context_map;\n\t\t}\n\t\tparent = parent.p;\n\t}\n\treturn null;\n}\n","import { run_all } from '../../shared/utils.js';\nimport { is_flushing_sync } from '../reactivity/batch.js';\n\n/** @type {Array<() => void>} */\nlet micro_tasks = [];\n\nfunction run_micro_tasks() {\n\tvar tasks = micro_tasks;\n\tmicro_tasks = [];\n\trun_all(tasks);\n}\n\n/**\n * @param {() => void} fn\n */\nexport function queue_micro_task(fn) {\n\tif (micro_tasks.length === 0 && !is_flushing_sync) {\n\t\tvar tasks = micro_tasks;\n\t\tqueueMicrotask(() => {\n\t\t\t// If this is false, a flushSync happened in the meantime. Do _not_ run new scheduled microtasks in that case\n\t\t\t// as the ordering of microtasks would be broken at that point - consider this case:\n\t\t\t// - queue_micro_task schedules microtask A to flush task X\n\t\t\t// - synchronously after, flushSync runs, processing task X\n\t\t\t// - synchronously after, some other microtask B is scheduled, but not through queue_micro_task but for example a Promise.resolve() in user code\n\t\t\t// - synchronously after, queue_micro_task schedules microtask C to flush task Y\n\t\t\t// - one tick later, microtask A now resolves, flushing task Y before microtask B, which is incorrect\n\t\t\t// This if check prevents that race condition (that realistically will only happen in tests)\n\t\t\tif (tasks === micro_tasks) run_micro_tasks();\n\t\t});\n\t}\n\n\tmicro_tasks.push(fn);\n}\n\n/**\n * Synchronously run any queued tasks.\n */\nexport function flush_tasks() {\n\twhile (micro_tasks.length > 0) {\n\t\trun_micro_tasks();\n\t}\n}\n","/** @import { Derived, Effect } from '#client' */\n/** @import { Boundary } from './dom/blocks/boundary.js' */\nimport { DEV } from 'esm-env';\nimport { FILENAME } from '../../constants.js';\nimport { is_firefox } from './dom/operations.js';\nimport { ERROR_VALUE, BOUNDARY_EFFECT, EFFECT_RAN } from './constants.js';\nimport { define_property, get_descriptor } from '../shared/utils.js';\nimport { active_effect, active_reaction } from './runtime.js';\n\nconst adjustments = new WeakMap();\n\n/**\n * @param {unknown} error\n */\nexport function handle_error(error) {\n\tvar effect = active_effect;\n\n\t// for unowned deriveds, don't throw until we read the value\n\tif (effect === null) {\n\t\t/** @type {Derived} */ (active_reaction).f |= ERROR_VALUE;\n\t\treturn error;\n\t}\n\n\tif (DEV && error instanceof Error && !adjustments.has(error)) {\n\t\tadjustments.set(error, get_adjustments(error, effect));\n\t}\n\n\tif ((effect.f & EFFECT_RAN) === 0) {\n\t\t// if the error occurred while creating this subtree, we let it\n\t\t// bubble up until it hits a boundary that can handle it\n\t\tif ((effect.f & BOUNDARY_EFFECT) === 0) {\n\t\t\tif (DEV && !effect.parent && error instanceof Error) {\n\t\t\t\tapply_adjustments(error);\n\t\t\t}\n\n\t\t\tthrow error;\n\t\t}\n\n\t\t/** @type {Boundary} */ (effect.b).error(error);\n\t} else {\n\t\t// otherwise we bubble up the effect tree ourselves\n\t\tinvoke_error_boundary(error, effect);\n\t}\n}\n\n/**\n * @param {unknown} error\n * @param {Effect | null} effect\n */\nexport function invoke_error_boundary(error, effect) {\n\twhile (effect !== null) {\n\t\tif ((effect.f & BOUNDARY_EFFECT) !== 0) {\n\t\t\ttry {\n\t\t\t\t/** @type {Boundary} */ (effect.b).error(error);\n\t\t\t\treturn;\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\t\t}\n\n\t\teffect = effect.parent;\n\t}\n\n\tif (DEV && error instanceof Error) {\n\t\tapply_adjustments(error);\n\t}\n\n\tthrow error;\n}\n\n/**\n * Add useful information to the error message/stack in development\n * @param {Error} error\n * @param {Effect} effect\n */\nfunction get_adjustments(error, effect) {\n\tconst message_descriptor = get_descriptor(error, 'message');\n\n\t// if the message was already changed and it's not configurable we can't change it\n\t// or it will throw a different error swallowing the original error\n\tif (message_descriptor && !message_descriptor.configurable) return;\n\n\tvar indent = is_firefox ? '  ' : '\\t';\n\tvar component_stack = `\\n${indent}in ${effect.fn?.name || '<unknown>'}`;\n\tvar context = effect.ctx;\n\n\twhile (context !== null) {\n\t\tcomponent_stack += `\\n${indent}in ${context.function?.[FILENAME].split('/').pop()}`;\n\t\tcontext = context.p;\n\t}\n\n\treturn {\n\t\tmessage: error.message + `\\n${component_stack}\\n`,\n\t\tstack: error.stack\n\t\t\t?.split('\\n')\n\t\t\t.filter((line) => !line.includes('svelte/src/internal'))\n\t\t\t.join('\\n')\n\t};\n}\n\n/**\n * @param {Error} error\n */\nfunction apply_adjustments(error) {\n\tconst adjusted = adjustments.get(error);\n\n\tif (adjusted) {\n\t\tdefine_property(error, 'message', {\n\t\t\tvalue: adjusted.message\n\t\t});\n\n\t\tdefine_property(error, 'stack', {\n\t\t\tvalue: adjusted.stack\n\t\t});\n\t}\n}\n","/** @import { Derived, Signal } from '#client' */\nimport { CLEAN, CONNECTED, DIRTY, MAYBE_DIRTY } from '#client/constants';\n\nconst STATUS_MASK = ~(DIRTY | MAYBE_DIRTY | CLEAN);\n\n/**\n * @param {Signal} signal\n * @param {number} status\n */\nexport function set_signal_status(signal, status) {\n\tsignal.f = (signal.f & STATUS_MASK) | status;\n}\n\n/**\n * Set a derived's status to CLEAN or MAYBE_DIRTY based on its connection state.\n * @param {Derived} derived\n */\nexport function update_derived_status(derived) {\n\t// Only mark as MAYBE_DIRTY if disconnected and has dependencies.\n\tif ((derived.f & CONNECTED) !== 0 || derived.deps === null) {\n\t\tset_signal_status(derived, CLEAN);\n\t} else {\n\t\tset_signal_status(derived, MAYBE_DIRTY);\n\t}\n}\n","/** @import { Derived, Effect, Value } from '#client' */\nimport { CLEAN, DERIVED, DIRTY, MAYBE_DIRTY, WAS_MARKED } from '#client/constants';\nimport { set_signal_status } from './status.js';\n\n/**\n * @param {Value[] | null} deps\n */\nfunction clear_marked(deps) {\n\tif (deps === null) return;\n\n\tfor (const dep of deps) {\n\t\tif ((dep.f & DERIVED) === 0 || (dep.f & WAS_MARKED) === 0) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tdep.f ^= WAS_MARKED;\n\n\t\tclear_marked(/** @type {Derived} */ (dep).deps);\n\t}\n}\n\n/**\n * @param {Effect} effect\n * @param {Set<Effect>} dirty_effects\n * @param {Set<Effect>} maybe_dirty_effects\n */\nexport function defer_effect(effect, dirty_effects, maybe_dirty_effects) {\n\tif ((effect.f & DIRTY) !== 0) {\n\t\tdirty_effects.add(effect);\n\t} else if ((effect.f & MAYBE_DIRTY) !== 0) {\n\t\tmaybe_dirty_effects.add(effect);\n\t}\n\n\t// Since we're not executing these effects now, we need to clear any WAS_MARKED flags\n\t// so that other batches can correctly reach these effects during their own traversal\n\tclear_marked(effect.deps);\n\n\t// mark as clean so they get scheduled if they depend on pending async state\n\tset_signal_status(effect, CLEAN);\n}\n","/** @import { Fork } from 'svelte' */\n/** @import { Derived, Effect, Reaction, Source, Value } from '#client' */\n/** @import { Boundary } from '../dom/blocks/boundary' */\nimport {\n\tBLOCK_EFFECT,\n\tBRANCH_EFFECT,\n\tCLEAN,\n\tDESTROYED,\n\tDIRTY,\n\tEFFECT,\n\tASYNC,\n\tINERT,\n\tRENDER_EFFECT,\n\tROOT_EFFECT,\n\tMAYBE_DIRTY,\n\tDERIVED,\n\tBOUNDARY_EFFECT,\n\tEAGER_EFFECT,\n\tHEAD_EFFECT,\n\tERROR_VALUE,\n\tMANAGED_EFFECT\n} from '#client/constants';\nimport { async_mode_flag } from '../../flags/index.js';\nimport { deferred, define_property, includes } from '../../shared/utils.js';\nimport {\n\tactive_effect,\n\tget,\n\tincrement_write_version,\n\tis_dirty,\n\tupdate_effect\n} from '../runtime.js';\nimport * as e from '../errors.js';\nimport { flush_tasks, queue_micro_task } from '../dom/task.js';\nimport { DEV } from 'esm-env';\nimport { invoke_error_boundary } from '../error-handling.js';\nimport { flush_eager_effects, old_values, set_eager_effects, source, update } from './sources.js';\nimport { eager_effect, unlink_effect } from './effects.js';\nimport { defer_effect } from './utils.js';\nimport { UNINITIALIZED } from '../../../constants.js';\nimport { set_signal_status } from './status.js';\n\n/** @type {Set<Batch>} */\nconst batches = new Set();\n\n/** @type {Batch | null} */\nexport let current_batch = null;\n\n/**\n * This is needed to avoid overwriting inputs in non-async mode\n * TODO 6.0 remove this, as non-async mode will go away\n * @type {Batch | null}\n */\nexport let previous_batch = null;\n\n/**\n * When time travelling (i.e. working in one batch, while other batches\n * still have ongoing work), we ignore the real values of affected\n * signals in favour of their values within the batch\n * @type {Map<Value, any> | null}\n */\nexport let batch_values = null;\n\n// TODO this should really be a property of `batch`\n/** @type {Effect[]} */\nlet queued_root_effects = [];\n\n/** @type {Effect | null} */\nlet last_scheduled_effect = null;\n\nlet is_flushing = false;\nexport let is_flushing_sync = false;\n\nexport class Batch {\n\tcommitted = false;\n\n\t/**\n\t * The current values of any sources that are updated in this batch\n\t * They keys of this map are identical to `this.#previous`\n\t * @type {Map<Source, any>}\n\t */\n\tcurrent = new Map();\n\n\t/**\n\t * The values of any sources that are updated in this batch _before_ those updates took place.\n\t * They keys of this map are identical to `this.#current`\n\t * @type {Map<Source, any>}\n\t */\n\tprevious = new Map();\n\n\t/**\n\t * When the batch is committed (and the DOM is updated), we need to remove old branches\n\t * and append new ones by calling the functions added inside (if/each/key/etc) blocks\n\t * @type {Set<() => void>}\n\t */\n\t#commit_callbacks = new Set();\n\n\t/**\n\t * If a fork is discarded, we need to destroy any effects that are no longer needed\n\t * @type {Set<(batch: Batch) => void>}\n\t */\n\t#discard_callbacks = new Set();\n\n\t/**\n\t * The number of async effects that are currently in flight\n\t */\n\t#pending = 0;\n\n\t/**\n\t * The number of async effects that are currently in flight, _not_ inside a pending boundary\n\t */\n\t#blocking_pending = 0;\n\n\t/**\n\t * A deferred that resolves when the batch is committed, used with `settled()`\n\t * TODO replace with Promise.withResolvers once supported widely enough\n\t * @type {{ promise: Promise<void>, resolve: (value?: any) => void, reject: (reason: unknown) => void } | null}\n\t */\n\t#deferred = null;\n\n\t/**\n\t * Deferred effects (which run after async work has completed) that are DIRTY\n\t * @type {Set<Effect>}\n\t */\n\t#dirty_effects = new Set();\n\n\t/**\n\t * Deferred effects that are MAYBE_DIRTY\n\t * @type {Set<Effect>}\n\t */\n\t#maybe_dirty_effects = new Set();\n\n\t/**\n\t * A map of branches that still exist, but will be destroyed when this batch\n\t * is committed â€” we skip over these during `process`.\n\t * The value contains child effects that were dirty/maybe_dirty before being reset,\n\t * so they can be rescheduled if the branch survives.\n\t * @type {Map<Effect, { d: Effect[], m: Effect[] }>}\n\t */\n\t#skipped_branches = new Map();\n\n\tis_fork = false;\n\n\t#decrement_queued = false;\n\n\tis_deferred() {\n\t\treturn this.is_fork || this.#blocking_pending > 0;\n\t}\n\n\t/**\n\t * Add an effect to the #skipped_branches map and reset its children\n\t * @param {Effect} effect\n\t */\n\tskip_effect(effect) {\n\t\tif (!this.#skipped_branches.has(effect)) {\n\t\t\tthis.#skipped_branches.set(effect, { d: [], m: [] });\n\t\t}\n\t}\n\n\t/**\n\t * Remove an effect from the #skipped_branches map and reschedule\n\t * any tracked dirty/maybe_dirty child effects\n\t * @param {Effect} effect\n\t */\n\tunskip_effect(effect) {\n\t\tvar tracked = this.#skipped_branches.get(effect);\n\t\tif (tracked) {\n\t\t\tthis.#skipped_branches.delete(effect);\n\n\t\t\tfor (var e of tracked.d) {\n\t\t\t\tset_signal_status(e, DIRTY);\n\t\t\t\tschedule_effect(e);\n\t\t\t}\n\n\t\t\tfor (e of tracked.m) {\n\t\t\t\tset_signal_status(e, MAYBE_DIRTY);\n\t\t\t\tschedule_effect(e);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t *\n\t * @param {Effect[]} root_effects\n\t */\n\tprocess(root_effects) {\n\t\tqueued_root_effects = [];\n\n\t\tthis.apply();\n\n\t\t/** @type {Effect[]} */\n\t\tvar effects = [];\n\n\t\t/** @type {Effect[]} */\n\t\tvar render_effects = [];\n\n\t\tfor (const root of root_effects) {\n\t\t\tthis.#traverse_effect_tree(root, effects, render_effects);\n\t\t\t// Note: #traverse_effect_tree runs block effects eagerly, which can schedule effects,\n\t\t\t// which means queued_root_effects now may be filled again.\n\n\t\t\t// Helpful for debugging reactivity loss that has to do with branches being skipped:\n\t\t\t// log_inconsistent_branches(root);\n\t\t}\n\n\t\tif (this.is_deferred()) {\n\t\t\tthis.#defer_effects(render_effects);\n\t\t\tthis.#defer_effects(effects);\n\n\t\t\tfor (const [e, t] of this.#skipped_branches) {\n\t\t\t\treset_branch(e, t);\n\t\t\t}\n\t\t} else {\n\t\t\t// append/remove branches\n\t\t\tfor (const fn of this.#commit_callbacks) fn();\n\t\t\tthis.#commit_callbacks.clear();\n\n\t\t\tif (this.#pending === 0) {\n\t\t\t\tthis.#commit();\n\t\t\t}\n\n\t\t\t// If sources are written to, then work needs to happen in a separate batch, else prior sources would be mixed with\n\t\t\t// newly updated sources, which could lead to infinite loops when effects run over and over again.\n\t\t\tprevious_batch = this;\n\t\t\tcurrent_batch = null;\n\n\t\t\tflush_queued_effects(render_effects);\n\t\t\tflush_queued_effects(effects);\n\n\t\t\tprevious_batch = null;\n\n\t\t\tthis.#deferred?.resolve();\n\t\t}\n\n\t\tbatch_values = null;\n\t}\n\n\t/**\n\t * Traverse the effect tree, executing effects or stashing\n\t * them for later execution as appropriate\n\t * @param {Effect} root\n\t * @param {Effect[]} effects\n\t * @param {Effect[]} render_effects\n\t */\n\t#traverse_effect_tree(root, effects, render_effects) {\n\t\troot.f ^= CLEAN;\n\n\t\tvar effect = root.first;\n\n\t\t/** @type {Effect | null} */\n\t\tvar pending_boundary = null;\n\n\t\twhile (effect !== null) {\n\t\t\tvar flags = effect.f;\n\t\t\tvar is_branch = (flags & (BRANCH_EFFECT | ROOT_EFFECT)) !== 0;\n\t\t\tvar is_skippable_branch = is_branch && (flags & CLEAN) !== 0;\n\n\t\t\tvar skip = is_skippable_branch || (flags & INERT) !== 0 || this.#skipped_branches.has(effect);\n\n\t\t\t// Inside a `<svelte:boundary>` with a pending snippet,\n\t\t\t// all effects are deferred until the boundary resolves\n\t\t\t// (except block/async effects, which run immediately)\n\t\t\tif (\n\t\t\t\tasync_mode_flag &&\n\t\t\t\tpending_boundary === null &&\n\t\t\t\t(flags & BOUNDARY_EFFECT) !== 0 &&\n\t\t\t\teffect.b?.is_pending\n\t\t\t) {\n\t\t\t\tpending_boundary = effect;\n\t\t\t}\n\n\t\t\tif (!skip && effect.fn !== null) {\n\t\t\t\tif (is_branch) {\n\t\t\t\t\teffect.f ^= CLEAN;\n\t\t\t\t} else if (\n\t\t\t\t\tpending_boundary !== null &&\n\t\t\t\t\t(flags & (EFFECT | RENDER_EFFECT | MANAGED_EFFECT)) !== 0\n\t\t\t\t) {\n\t\t\t\t\t/** @type {Boundary} */ (pending_boundary.b).defer_effect(effect);\n\t\t\t\t} else if ((flags & EFFECT) !== 0) {\n\t\t\t\t\teffects.push(effect);\n\t\t\t\t} else if (async_mode_flag && (flags & (RENDER_EFFECT | MANAGED_EFFECT)) !== 0) {\n\t\t\t\t\trender_effects.push(effect);\n\t\t\t\t} else if (is_dirty(effect)) {\n\t\t\t\t\tif ((flags & BLOCK_EFFECT) !== 0) this.#maybe_dirty_effects.add(effect);\n\t\t\t\t\tupdate_effect(effect);\n\t\t\t\t}\n\n\t\t\t\tvar child = effect.first;\n\n\t\t\t\tif (child !== null) {\n\t\t\t\t\teffect = child;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar parent = effect.parent;\n\t\t\teffect = effect.next;\n\n\t\t\twhile (effect === null && parent !== null) {\n\t\t\t\tif (parent === pending_boundary) {\n\t\t\t\t\tpending_boundary = null;\n\t\t\t\t}\n\n\t\t\t\teffect = parent.next;\n\t\t\t\tparent = parent.parent;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @param {Effect[]} effects\n\t */\n\t#defer_effects(effects) {\n\t\tfor (var i = 0; i < effects.length; i += 1) {\n\t\t\tdefer_effect(effects[i], this.#dirty_effects, this.#maybe_dirty_effects);\n\t\t}\n\t}\n\n\t/**\n\t * Associate a change to a given source with the current\n\t * batch, noting its previous and current values\n\t * @param {Source} source\n\t * @param {any} value\n\t */\n\tcapture(source, value) {\n\t\tif (value !== UNINITIALIZED && !this.previous.has(source)) {\n\t\t\tthis.previous.set(source, value);\n\t\t}\n\n\t\t// Don't save errors in `batch_values`, or they won't be thrown in `runtime.js#get`\n\t\tif ((source.f & ERROR_VALUE) === 0) {\n\t\t\tthis.current.set(source, source.v);\n\t\t\tbatch_values?.set(source, source.v);\n\t\t}\n\t}\n\n\tactivate() {\n\t\tcurrent_batch = this;\n\t\tthis.apply();\n\t}\n\n\tdeactivate() {\n\t\t// If we're not the current batch, don't deactivate,\n\t\t// else we could create zombie batches that are never flushed\n\t\tif (current_batch !== this) return;\n\n\t\tcurrent_batch = null;\n\t\tbatch_values = null;\n\t}\n\n\tflush() {\n\t\tthis.activate();\n\n\t\tif (queued_root_effects.length > 0) {\n\t\t\tflush_effects();\n\n\t\t\tif (current_batch !== null && current_batch !== this) {\n\t\t\t\t// this can happen if a new batch was created during `flush_effects()`\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else if (this.#pending === 0) {\n\t\t\tthis.process([]); // TODO this feels awkward\n\t\t}\n\n\t\tthis.deactivate();\n\t}\n\n\tdiscard() {\n\t\tfor (const fn of this.#discard_callbacks) fn(this);\n\t\tthis.#discard_callbacks.clear();\n\t}\n\n\t#commit() {\n\t\t// If there are other pending batches, they now need to be 'rebased' â€”\n\t\t// in other words, we re-run block/async effects with the newly\n\t\t// committed state, unless the batch in question has a more\n\t\t// recent value for a given source\n\t\tif (batches.size > 1) {\n\t\t\tthis.previous.clear();\n\n\t\t\tvar previous_batch_values = batch_values;\n\t\t\tvar is_earlier = true;\n\n\t\t\tfor (const batch of batches) {\n\t\t\t\tif (batch === this) {\n\t\t\t\t\tis_earlier = false;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t/** @type {Source[]} */\n\t\t\t\tconst sources = [];\n\n\t\t\t\tfor (const [source, value] of this.current) {\n\t\t\t\t\tif (batch.current.has(source)) {\n\t\t\t\t\t\tif (is_earlier && value !== batch.current.get(source)) {\n\t\t\t\t\t\t\t// bring the value up to date\n\t\t\t\t\t\t\tbatch.current.set(source, value);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// same value or later batch has more recent value,\n\t\t\t\t\t\t\t// no need to re-run these effects\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tsources.push(source);\n\t\t\t\t}\n\n\t\t\t\tif (sources.length === 0) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Re-run async/block effects that depend on distinct values changed in both batches\n\t\t\t\tconst others = [...batch.current.keys()].filter((s) => !this.current.has(s));\n\t\t\t\tif (others.length > 0) {\n\t\t\t\t\t// Avoid running queued root effects on the wrong branch\n\t\t\t\t\tvar prev_queued_root_effects = queued_root_effects;\n\t\t\t\t\tqueued_root_effects = [];\n\n\t\t\t\t\t/** @type {Set<Value>} */\n\t\t\t\t\tconst marked = new Set();\n\t\t\t\t\t/** @type {Map<Reaction, boolean>} */\n\t\t\t\t\tconst checked = new Map();\n\t\t\t\t\tfor (const source of sources) {\n\t\t\t\t\t\tmark_effects(source, others, marked, checked);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (queued_root_effects.length > 0) {\n\t\t\t\t\t\tcurrent_batch = batch;\n\t\t\t\t\t\tbatch.apply();\n\n\t\t\t\t\t\tfor (const root of queued_root_effects) {\n\t\t\t\t\t\t\tbatch.#traverse_effect_tree(root, [], []);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// TODO do we need to do anything with the dummy effect arrays?\n\n\t\t\t\t\t\tbatch.deactivate();\n\t\t\t\t\t}\n\n\t\t\t\t\tqueued_root_effects = prev_queued_root_effects;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcurrent_batch = null;\n\t\t\tbatch_values = previous_batch_values;\n\t\t}\n\n\t\tthis.committed = true;\n\t\tbatches.delete(this);\n\t}\n\n\t/**\n\t *\n\t * @param {boolean} blocking\n\t */\n\tincrement(blocking) {\n\t\tthis.#pending += 1;\n\t\tif (blocking) this.#blocking_pending += 1;\n\t}\n\n\t/**\n\t *\n\t * @param {boolean} blocking\n\t */\n\tdecrement(blocking) {\n\t\tthis.#pending -= 1;\n\t\tif (blocking) this.#blocking_pending -= 1;\n\n\t\tif (this.#decrement_queued) return;\n\t\tthis.#decrement_queued = true;\n\n\t\tqueue_micro_task(() => {\n\t\t\tthis.#decrement_queued = false;\n\n\t\t\tif (!this.is_deferred()) {\n\t\t\t\t// we only reschedule previously-deferred effects if we expect\n\t\t\t\t// to be able to run them after processing the batch\n\t\t\t\tthis.revive();\n\t\t\t} else if (queued_root_effects.length > 0) {\n\t\t\t\t// if other effects are scheduled, process the batch _without_\n\t\t\t\t// rescheduling the previously-deferred effects\n\t\t\t\tthis.flush();\n\t\t\t}\n\t\t});\n\t}\n\n\trevive() {\n\t\tfor (const e of this.#dirty_effects) {\n\t\t\tthis.#maybe_dirty_effects.delete(e);\n\t\t\tset_signal_status(e, DIRTY);\n\t\t\tschedule_effect(e);\n\t\t}\n\n\t\tfor (const e of this.#maybe_dirty_effects) {\n\t\t\tset_signal_status(e, MAYBE_DIRTY);\n\t\t\tschedule_effect(e);\n\t\t}\n\n\t\tthis.flush();\n\t}\n\n\t/** @param {() => void} fn */\n\toncommit(fn) {\n\t\tthis.#commit_callbacks.add(fn);\n\t}\n\n\t/** @param {(batch: Batch) => void} fn */\n\tondiscard(fn) {\n\t\tthis.#discard_callbacks.add(fn);\n\t}\n\n\tsettled() {\n\t\treturn (this.#deferred ??= deferred()).promise;\n\t}\n\n\tstatic ensure() {\n\t\tif (current_batch === null) {\n\t\t\tconst batch = (current_batch = new Batch());\n\t\t\tbatches.add(current_batch);\n\n\t\t\tif (!is_flushing_sync) {\n\t\t\t\tqueue_micro_task(() => {\n\t\t\t\t\tif (current_batch !== batch) {\n\t\t\t\t\t\t// a flushSync happened in the meantime\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tbatch.flush();\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn current_batch;\n\t}\n\n\tapply() {\n\t\tif (!async_mode_flag || (!this.is_fork && batches.size === 1)) return;\n\n\t\t// if there are multiple batches, we are 'time travelling' â€”\n\t\t// we need to override values with the ones in this batch...\n\t\tbatch_values = new Map(this.current);\n\n\t\t// ...and undo changes belonging to other batches\n\t\tfor (const batch of batches) {\n\t\t\tif (batch === this) continue;\n\n\t\t\tfor (const [source, previous] of batch.previous) {\n\t\t\t\tif (!batch_values.has(source)) {\n\t\t\t\t\tbatch_values.set(source, previous);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * Synchronously flush any pending updates.\n * Returns void if no callback is provided, otherwise returns the result of calling the callback.\n * @template [T=void]\n * @param {(() => T) | undefined} [fn]\n * @returns {T}\n */\nexport function flushSync(fn) {\n\tvar was_flushing_sync = is_flushing_sync;\n\tis_flushing_sync = true;\n\n\ttry {\n\t\tvar result;\n\n\t\tif (fn) {\n\t\t\tif (current_batch !== null) {\n\t\t\t\tflush_effects();\n\t\t\t}\n\n\t\t\tresult = fn();\n\t\t}\n\n\t\twhile (true) {\n\t\t\tflush_tasks();\n\n\t\t\tif (queued_root_effects.length === 0) {\n\t\t\t\tcurrent_batch?.flush();\n\n\t\t\t\t// we need to check again, in case we just updated an `$effect.pending()`\n\t\t\t\tif (queued_root_effects.length === 0) {\n\t\t\t\t\t// this would be reset in `flush_effects()` but since we are early returning here,\n\t\t\t\t\t// we need to reset it here as well in case the first time there's 0 queued root effects\n\t\t\t\t\tlast_scheduled_effect = null;\n\n\t\t\t\t\treturn /** @type {T} */ (result);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tflush_effects();\n\t\t}\n\t} finally {\n\t\tis_flushing_sync = was_flushing_sync;\n\t}\n}\n\nfunction flush_effects() {\n\tis_flushing = true;\n\n\tvar source_stacks = DEV ? new Set() : null;\n\n\ttry {\n\t\tvar flush_count = 0;\n\n\t\twhile (queued_root_effects.length > 0) {\n\t\t\tvar batch = Batch.ensure();\n\n\t\t\tif (flush_count++ > 1000) {\n\t\t\t\tif (DEV) {\n\t\t\t\t\tvar updates = new Map();\n\n\t\t\t\t\tfor (const source of batch.current.keys()) {\n\t\t\t\t\t\tfor (const [stack, update] of source.updated ?? []) {\n\t\t\t\t\t\t\tvar entry = updates.get(stack);\n\n\t\t\t\t\t\t\tif (!entry) {\n\t\t\t\t\t\t\t\tentry = { error: update.error, count: 0 };\n\t\t\t\t\t\t\t\tupdates.set(stack, entry);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tentry.count += update.count;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (const update of updates.values()) {\n\t\t\t\t\t\tif (update.error) {\n\t\t\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\t\t\tconsole.error(update.error);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tinfinite_loop_guard();\n\t\t\t}\n\n\t\t\tbatch.process(queued_root_effects);\n\t\t\told_values.clear();\n\n\t\t\tif (DEV) {\n\t\t\t\tfor (const source of batch.current.keys()) {\n\t\t\t\t\t/** @type {Set<Source>} */ (source_stacks).add(source);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} finally {\n\t\tis_flushing = false;\n\n\t\tlast_scheduled_effect = null;\n\n\t\tif (DEV) {\n\t\t\tfor (const source of /** @type {Set<Source>} */ (source_stacks)) {\n\t\t\t\tsource.updated = null;\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction infinite_loop_guard() {\n\ttry {\n\t\te.effect_update_depth_exceeded();\n\t} catch (error) {\n\t\tif (DEV) {\n\t\t\t// stack contains no useful information, replace it\n\t\t\tdefine_property(error, 'stack', { value: '' });\n\t\t}\n\n\t\t// Best effort: invoke the boundary nearest the most recent\n\t\t// effect and hope that it's relevant to the infinite loop\n\t\tinvoke_error_boundary(error, last_scheduled_effect);\n\t}\n}\n\n/** @type {Set<Effect> | null} */\nexport let eager_block_effects = null;\n\n/**\n * @param {Array<Effect>} effects\n * @returns {void}\n */\nfunction flush_queued_effects(effects) {\n\tvar length = effects.length;\n\tif (length === 0) return;\n\n\tvar i = 0;\n\n\twhile (i < length) {\n\t\tvar effect = effects[i++];\n\n\t\tif ((effect.f & (DESTROYED | INERT)) === 0 && is_dirty(effect)) {\n\t\t\teager_block_effects = new Set();\n\n\t\t\tupdate_effect(effect);\n\n\t\t\t// Effects with no dependencies or teardown do not get added to the effect tree.\n\t\t\t// Deferred effects (e.g. `$effect(...)`) _are_ added to the tree because we\n\t\t\t// don't know if we need to keep them until they are executed. Doing the check\n\t\t\t// here (rather than in `update_effect`) allows us to skip the work for\n\t\t\t// immediate effects.\n\t\t\tif (effect.deps === null && effect.first === null && effect.nodes === null) {\n\t\t\t\t// if there's no teardown or abort controller we completely unlink\n\t\t\t\t// the effect from the graph\n\t\t\t\tif (effect.teardown === null && effect.ac === null) {\n\t\t\t\t\t// remove this effect from the graph\n\t\t\t\t\tunlink_effect(effect);\n\t\t\t\t} else {\n\t\t\t\t\t// keep the effect in the graph, but free up some memory\n\t\t\t\t\teffect.fn = null;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If update_effect() has a flushSync() in it, we may have flushed another flush_queued_effects(),\n\t\t\t// which already handled this logic and did set eager_block_effects to null.\n\t\t\tif (eager_block_effects?.size > 0) {\n\t\t\t\told_values.clear();\n\n\t\t\t\tfor (const e of eager_block_effects) {\n\t\t\t\t\t// Skip eager effects that have already been unmounted\n\t\t\t\t\tif ((e.f & (DESTROYED | INERT)) !== 0) continue;\n\n\t\t\t\t\t// Run effects in order from ancestor to descendant, else we could run into nullpointers\n\t\t\t\t\t/** @type {Effect[]} */\n\t\t\t\t\tconst ordered_effects = [e];\n\t\t\t\t\tlet ancestor = e.parent;\n\t\t\t\t\twhile (ancestor !== null) {\n\t\t\t\t\t\tif (eager_block_effects.has(ancestor)) {\n\t\t\t\t\t\t\teager_block_effects.delete(ancestor);\n\t\t\t\t\t\t\tordered_effects.push(ancestor);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tancestor = ancestor.parent;\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (let j = ordered_effects.length - 1; j >= 0; j--) {\n\t\t\t\t\t\tconst e = ordered_effects[j];\n\t\t\t\t\t\t// Skip eager effects that have already been unmounted\n\t\t\t\t\t\tif ((e.f & (DESTROYED | INERT)) !== 0) continue;\n\t\t\t\t\t\tupdate_effect(e);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\teager_block_effects.clear();\n\t\t\t}\n\t\t}\n\t}\n\n\teager_block_effects = null;\n}\n\n/**\n * This is similar to `mark_reactions`, but it only marks async/block effects\n * depending on `value` and at least one of the other `sources`, so that\n * these effects can re-run after another batch has been committed\n * @param {Value} value\n * @param {Source[]} sources\n * @param {Set<Value>} marked\n * @param {Map<Reaction, boolean>} checked\n */\nfunction mark_effects(value, sources, marked, checked) {\n\tif (marked.has(value)) return;\n\tmarked.add(value);\n\n\tif (value.reactions !== null) {\n\t\tfor (const reaction of value.reactions) {\n\t\t\tconst flags = reaction.f;\n\n\t\t\tif ((flags & DERIVED) !== 0) {\n\t\t\t\tmark_effects(/** @type {Derived} */ (reaction), sources, marked, checked);\n\t\t\t} else if (\n\t\t\t\t(flags & (ASYNC | BLOCK_EFFECT)) !== 0 &&\n\t\t\t\t(flags & DIRTY) === 0 &&\n\t\t\t\tdepends_on(reaction, sources, checked)\n\t\t\t) {\n\t\t\t\tset_signal_status(reaction, DIRTY);\n\t\t\t\tschedule_effect(/** @type {Effect} */ (reaction));\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * When committing a fork, we need to trigger eager effects so that\n * any `$state.eager(...)` expressions update immediately. This\n * function allows us to discover them\n * @param {Value} value\n * @param {Set<Effect>} effects\n */\nfunction mark_eager_effects(value, effects) {\n\tif (value.reactions === null) return;\n\n\tfor (const reaction of value.reactions) {\n\t\tconst flags = reaction.f;\n\n\t\tif ((flags & DERIVED) !== 0) {\n\t\t\tmark_eager_effects(/** @type {Derived} */ (reaction), effects);\n\t\t} else if ((flags & EAGER_EFFECT) !== 0) {\n\t\t\tset_signal_status(reaction, DIRTY);\n\t\t\teffects.add(/** @type {Effect} */ (reaction));\n\t\t}\n\t}\n}\n\n/**\n * @param {Reaction} reaction\n * @param {Source[]} sources\n * @param {Map<Reaction, boolean>} checked\n */\nfunction depends_on(reaction, sources, checked) {\n\tconst depends = checked.get(reaction);\n\tif (depends !== undefined) return depends;\n\n\tif (reaction.deps !== null) {\n\t\tfor (const dep of reaction.deps) {\n\t\t\tif (includes.call(sources, dep)) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif ((dep.f & DERIVED) !== 0 && depends_on(/** @type {Derived} */ (dep), sources, checked)) {\n\t\t\t\tchecked.set(/** @type {Derived} */ (dep), true);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\n\tchecked.set(reaction, false);\n\n\treturn false;\n}\n\n/**\n * @param {Effect} signal\n * @returns {void}\n */\nexport function schedule_effect(signal) {\n\tvar effect = (last_scheduled_effect = signal);\n\n\twhile (effect.parent !== null) {\n\t\teffect = effect.parent;\n\t\tvar flags = effect.f;\n\n\t\t// if the effect is being scheduled because a parent (each/await/etc) block\n\t\t// updated an internal source, or because a branch is being unskipped,\n\t\t// bail out or we'll cause a second flush\n\t\tif (\n\t\t\tis_flushing &&\n\t\t\teffect === active_effect &&\n\t\t\t(flags & BLOCK_EFFECT) !== 0 &&\n\t\t\t(flags & HEAD_EFFECT) === 0\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ((flags & (ROOT_EFFECT | BRANCH_EFFECT)) !== 0) {\n\t\t\tif ((flags & CLEAN) === 0) return;\n\t\t\teffect.f ^= CLEAN;\n\t\t}\n\t}\n\n\tqueued_root_effects.push(effect);\n}\n\n/** @type {Source<number>[]} */\nlet eager_versions = [];\n\nfunction eager_flush() {\n\ttry {\n\t\tflushSync(() => {\n\t\t\tfor (const version of eager_versions) {\n\t\t\t\tupdate(version);\n\t\t\t}\n\t\t});\n\t} finally {\n\t\teager_versions = [];\n\t}\n}\n\n/**\n * Implementation of `$state.eager(fn())`\n * @template T\n * @param {() => T} fn\n * @returns {T}\n */\nexport function eager(fn) {\n\tvar version = source(0);\n\tvar initial = true;\n\tvar value = /** @type {T} */ (undefined);\n\n\tget(version);\n\n\teager_effect(() => {\n\t\tif (initial) {\n\t\t\t// the first time this runs, we create an eager effect\n\t\t\t// that will run eagerly whenever the expression changes\n\t\t\tvar previous_batch_values = batch_values;\n\n\t\t\ttry {\n\t\t\t\tbatch_values = null;\n\t\t\t\tvalue = fn();\n\t\t\t} finally {\n\t\t\t\tbatch_values = previous_batch_values;\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// the second time this effect runs, it's to schedule a\n\t\t// `version` update. since this will recreate the effect,\n\t\t// we don't need to evaluate the expression here\n\t\tif (eager_versions.length === 0) {\n\t\t\tqueue_micro_task(eager_flush);\n\t\t}\n\n\t\teager_versions.push(version);\n\t});\n\n\tinitial = false;\n\n\treturn value;\n}\n\n/**\n * Mark all the effects inside a skipped branch CLEAN, so that\n * they can be correctly rescheduled later. Tracks dirty and maybe_dirty\n * effects so they can be rescheduled if the branch survives.\n * @param {Effect} effect\n * @param {{ d: Effect[], m: Effect[] }} tracked\n */\nfunction reset_branch(effect, tracked) {\n\t// clean branch = nothing dirty inside, no need to traverse further\n\tif ((effect.f & BRANCH_EFFECT) !== 0 && (effect.f & CLEAN) !== 0) {\n\t\treturn;\n\t}\n\n\tif ((effect.f & DIRTY) !== 0) {\n\t\ttracked.d.push(effect);\n\t} else if ((effect.f & MAYBE_DIRTY) !== 0) {\n\t\ttracked.m.push(effect);\n\t}\n\n\tset_signal_status(effect, CLEAN);\n\n\tvar e = effect.first;\n\twhile (e !== null) {\n\t\treset_branch(e, tracked);\n\t\te = e.next;\n\t}\n}\n\n/**\n * Creates a 'fork', in which state changes are evaluated but not applied to the DOM.\n * This is useful for speculatively loading data (for example) when you suspect that\n * the user is about to take some action.\n *\n * Frameworks like SvelteKit can use this to preload data when the user touches or\n * hovers over a link, making any subsequent navigation feel instantaneous.\n *\n * The `fn` parameter is a synchronous function that modifies some state. The\n * state changes will be reverted after the fork is initialised, then reapplied\n * if and when the fork is eventually committed.\n *\n * When it becomes clear that a fork will _not_ be committed (e.g. because the\n * user navigated elsewhere), it must be discarded to avoid leaking memory.\n *\n * @param {() => void} fn\n * @returns {Fork}\n * @since 5.42\n */\nexport function fork(fn) {\n\tif (!async_mode_flag) {\n\t\te.experimental_async_required('fork');\n\t}\n\n\tif (current_batch !== null) {\n\t\te.fork_timing();\n\t}\n\n\tvar batch = Batch.ensure();\n\tbatch.is_fork = true;\n\tbatch_values = new Map();\n\n\tvar committed = false;\n\tvar settled = batch.settled();\n\n\tflushSync(fn);\n\n\t// revert state changes\n\tfor (var [source, value] of batch.previous) {\n\t\tsource.v = value;\n\t}\n\n\t// make writable deriveds dirty, so they recalculate correctly\n\tfor (source of batch.current.keys()) {\n\t\tif ((source.f & DERIVED) !== 0) {\n\t\t\tset_signal_status(source, DIRTY);\n\t\t}\n\t}\n\n\treturn {\n\t\tcommit: async () => {\n\t\t\tif (committed) {\n\t\t\t\tawait settled;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!batches.has(batch)) {\n\t\t\t\te.fork_discarded();\n\t\t\t}\n\n\t\t\tcommitted = true;\n\n\t\t\tbatch.is_fork = false;\n\n\t\t\t// apply changes and update write versions so deriveds see the change\n\t\t\tfor (var [source, value] of batch.current) {\n\t\t\t\tsource.v = value;\n\t\t\t\tsource.wv = increment_write_version();\n\t\t\t}\n\n\t\t\t// trigger any `$state.eager(...)` expressions with the new state.\n\t\t\t// eager effects don't get scheduled like other effects, so we\n\t\t\t// can't just encounter them during traversal, we need to\n\t\t\t// proactively flush them\n\t\t\t// TODO maybe there's a better implementation?\n\t\t\tflushSync(() => {\n\t\t\t\t/** @type {Set<Effect>} */\n\t\t\t\tvar eager_effects = new Set();\n\n\t\t\t\tfor (var source of batch.current.keys()) {\n\t\t\t\t\tmark_eager_effects(source, eager_effects);\n\t\t\t\t}\n\n\t\t\t\tset_eager_effects(eager_effects);\n\t\t\t\tflush_eager_effects();\n\t\t\t});\n\n\t\t\tbatch.revive();\n\t\t\tawait settled;\n\t\t},\n\t\tdiscard: () => {\n\t\t\t// cause any MAYBE_DIRTY deriveds to update\n\t\t\t// if they depend on things thath changed\n\t\t\t// inside the discarded fork\n\t\t\tfor (var source of batch.current.keys()) {\n\t\t\t\tsource.wv = increment_write_version();\n\t\t\t}\n\n\t\t\tif (!committed && batches.has(batch)) {\n\t\t\t\tbatches.delete(batch);\n\t\t\t\tbatch.discard();\n\t\t\t}\n\t\t}\n\t};\n}\n\n/**\n * Forcibly remove all current batches, to prevent cross-talk between tests\n */\nexport function clear() {\n\tbatches.clear();\n}\n","import { get, tick, untrack } from '../internal/client/runtime.js';\nimport { effect_tracking, render_effect } from '../internal/client/reactivity/effects.js';\nimport { source, increment } from '../internal/client/reactivity/sources.js';\nimport { tag } from '../internal/client/dev/tracing.js';\nimport { DEV } from 'esm-env';\nimport { queue_micro_task } from '../internal/client/dom/task.js';\n\n/**\n * Returns a `subscribe` function that integrates external event-based systems with Svelte's reactivity.\n * It's particularly useful for integrating with web APIs like `MediaQuery`, `IntersectionObserver`, or `WebSocket`.\n *\n * If `subscribe` is called inside an effect (including indirectly, for example inside a getter),\n * the `start` callback will be called with an `update` function. Whenever `update` is called, the effect re-runs.\n *\n * If `start` returns a cleanup function, it will be called when the effect is destroyed.\n *\n * If `subscribe` is called in multiple effects, `start` will only be called once as long as the effects\n * are active, and the returned teardown function will only be called when all effects are destroyed.\n *\n * It's best understood with an example. Here's an implementation of [`MediaQuery`](https://svelte.dev/docs/svelte/svelte-reactivity#MediaQuery):\n *\n * ```js\n * import { createSubscriber } from 'svelte/reactivity';\n * import { on } from 'svelte/events';\n *\n * export class MediaQuery {\n * \t#query;\n * \t#subscribe;\n *\n * \tconstructor(query) {\n * \t\tthis.#query = window.matchMedia(`(${query})`);\n *\n * \t\tthis.#subscribe = createSubscriber((update) => {\n * \t\t\t// when the `change` event occurs, re-run any effects that read `this.current`\n * \t\t\tconst off = on(this.#query, 'change', update);\n *\n * \t\t\t// stop listening when all the effects are destroyed\n * \t\t\treturn () => off();\n * \t\t});\n * \t}\n *\n * \tget current() {\n * \t\t// This makes the getter reactive, if read in an effect\n * \t\tthis.#subscribe();\n *\n * \t\t// Return the current state of the query, whether or not we're in an effect\n * \t\treturn this.#query.matches;\n * \t}\n * }\n * ```\n * @param {(update: () => void) => (() => void) | void} start\n * @since 5.7.0\n */\nexport function createSubscriber(start) {\n\tlet subscribers = 0;\n\tlet version = source(0);\n\t/** @type {(() => void) | void} */\n\tlet stop;\n\n\tif (DEV) {\n\t\ttag(version, 'createSubscriber version');\n\t}\n\n\treturn () => {\n\t\tif (effect_tracking()) {\n\t\t\tget(version);\n\n\t\t\trender_effect(() => {\n\t\t\t\tif (subscribers === 0) {\n\t\t\t\t\tstop = untrack(() => start(() => increment(version)));\n\t\t\t\t}\n\n\t\t\t\tsubscribers += 1;\n\n\t\t\t\treturn () => {\n\t\t\t\t\tqueue_micro_task(() => {\n\t\t\t\t\t\t// Only count down after a microtask, else we would reach 0 before our own render effect reruns,\n\t\t\t\t\t\t// but reach 1 again when the tick callback of the prior teardown runs. That would mean we\n\t\t\t\t\t\t// re-subcribe unnecessarily and create a memory leak because the old subscription is never cleaned up.\n\t\t\t\t\t\tsubscribers -= 1;\n\n\t\t\t\t\t\tif (subscribers === 0) {\n\t\t\t\t\t\t\tstop?.();\n\t\t\t\t\t\t\tstop = undefined;\n\t\t\t\t\t\t\t// Increment the version to ensure any dependent deriveds are marked dirty when the subscription is picked up again later.\n\t\t\t\t\t\t\t// If we didn't do this then the comparison of write versions would determine that the derived has a later version than\n\t\t\t\t\t\t\t// the subscriber, and it would not be re-run.\n\t\t\t\t\t\t\tincrement(version);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t};\n}\n","/** @import { Effect, Source, TemplateNode, } from '#client' */\nimport {\n\tBLOCK_EFFECT,\n\tBOUNDARY_EFFECT,\n\tCOMMENT_NODE,\n\tDIRTY,\n\tEFFECT_PRESERVED,\n\tEFFECT_TRANSPARENT,\n\tMAYBE_DIRTY\n} from '#client/constants';\nimport { HYDRATION_START_ELSE } from '../../../../constants.js';\nimport { component_context, set_component_context } from '../../context.js';\nimport { handle_error, invoke_error_boundary } from '../../error-handling.js';\nimport {\n\tblock,\n\tbranch,\n\tdestroy_effect,\n\tmove_effect,\n\tpause_effect\n} from '../../reactivity/effects.js';\nimport {\n\tactive_effect,\n\tactive_reaction,\n\tget,\n\tset_active_effect,\n\tset_active_reaction\n} from '../../runtime.js';\nimport {\n\thydrate_next,\n\thydrate_node,\n\thydrating,\n\tnext,\n\tskip_nodes,\n\tset_hydrate_node\n} from '../hydration.js';\nimport { queue_micro_task } from '../task.js';\nimport * as e from '../../errors.js';\nimport * as w from '../../warnings.js';\nimport { DEV } from 'esm-env';\nimport { Batch, schedule_effect } from '../../reactivity/batch.js';\nimport { internal_set, source } from '../../reactivity/sources.js';\nimport { tag } from '../../dev/tracing.js';\nimport { createSubscriber } from '../../../../reactivity/create-subscriber.js';\nimport { create_text } from '../operations.js';\nimport { defer_effect } from '../../reactivity/utils.js';\nimport { set_signal_status } from '../../reactivity/status.js';\n\n/**\n * @typedef {{\n * \t onerror?: (error: unknown, reset: () => void) => void;\n *   failed?: (anchor: Node, error: () => unknown, reset: () => () => void) => void;\n *   pending?: (anchor: Node) => void;\n * }} BoundaryProps\n */\n\nvar flags = EFFECT_TRANSPARENT | EFFECT_PRESERVED | BOUNDARY_EFFECT;\n\n/**\n * @param {TemplateNode} node\n * @param {BoundaryProps} props\n * @param {((anchor: Node) => void)} children\n * @returns {void}\n */\nexport function boundary(node, props, children) {\n\tnew Boundary(node, props, children);\n}\n\nexport class Boundary {\n\t/** @type {Boundary | null} */\n\tparent;\n\n\tis_pending = false;\n\n\t/** @type {TemplateNode} */\n\t#anchor;\n\n\t/** @type {TemplateNode | null} */\n\t#hydrate_open = hydrating ? hydrate_node : null;\n\n\t/** @type {BoundaryProps} */\n\t#props;\n\n\t/** @type {((anchor: Node) => void)} */\n\t#children;\n\n\t/** @type {Effect} */\n\t#effect;\n\n\t/** @type {Effect | null} */\n\t#main_effect = null;\n\n\t/** @type {Effect | null} */\n\t#pending_effect = null;\n\n\t/** @type {Effect | null} */\n\t#failed_effect = null;\n\n\t/** @type {DocumentFragment | null} */\n\t#offscreen_fragment = null;\n\n\t/** @type {TemplateNode | null} */\n\t#pending_anchor = null;\n\n\t#local_pending_count = 0;\n\t#pending_count = 0;\n\t#pending_count_update_queued = false;\n\n\t#is_creating_fallback = false;\n\n\t/** @type {Set<Effect>} */\n\t#dirty_effects = new Set();\n\n\t/** @type {Set<Effect>} */\n\t#maybe_dirty_effects = new Set();\n\n\t/**\n\t * A source containing the number of pending async deriveds/expressions.\n\t * Only created if `$effect.pending()` is used inside the boundary,\n\t * otherwise updating the source results in needless `Batch.ensure()`\n\t * calls followed by no-op flushes\n\t * @type {Source<number> | null}\n\t */\n\t#effect_pending = null;\n\n\t#effect_pending_subscriber = createSubscriber(() => {\n\t\tthis.#effect_pending = source(this.#local_pending_count);\n\n\t\tif (DEV) {\n\t\t\ttag(this.#effect_pending, '$effect.pending()');\n\t\t}\n\n\t\treturn () => {\n\t\t\tthis.#effect_pending = null;\n\t\t};\n\t});\n\n\t/**\n\t * @param {TemplateNode} node\n\t * @param {BoundaryProps} props\n\t * @param {((anchor: Node) => void)} children\n\t */\n\tconstructor(node, props, children) {\n\t\tthis.#anchor = node;\n\t\tthis.#props = props;\n\t\tthis.#children = children;\n\n\t\tthis.parent = /** @type {Effect} */ (active_effect).b;\n\n\t\tthis.is_pending = !!this.#props.pending;\n\n\t\tthis.#effect = block(() => {\n\t\t\t/** @type {Effect} */ (active_effect).b = this;\n\n\t\t\tif (hydrating) {\n\t\t\t\tconst comment = this.#hydrate_open;\n\t\t\t\thydrate_next();\n\n\t\t\t\tconst server_rendered_pending =\n\t\t\t\t\t/** @type {Comment} */ (comment).nodeType === COMMENT_NODE &&\n\t\t\t\t\t/** @type {Comment} */ (comment).data === HYDRATION_START_ELSE;\n\n\t\t\t\tif (server_rendered_pending) {\n\t\t\t\t\tthis.#hydrate_pending_content();\n\t\t\t\t} else {\n\t\t\t\t\tthis.#hydrate_resolved_content();\n\n\t\t\t\t\tif (this.#pending_count === 0) {\n\t\t\t\t\t\tthis.is_pending = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar anchor = this.#get_anchor();\n\n\t\t\t\ttry {\n\t\t\t\t\tthis.#main_effect = branch(() => children(anchor));\n\t\t\t\t} catch (error) {\n\t\t\t\t\tthis.error(error);\n\t\t\t\t}\n\n\t\t\t\tif (this.#pending_count > 0) {\n\t\t\t\t\tthis.#show_pending_snippet();\n\t\t\t\t} else {\n\t\t\t\t\tthis.is_pending = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn () => {\n\t\t\t\tthis.#pending_anchor?.remove();\n\t\t\t};\n\t\t}, flags);\n\n\t\tif (hydrating) {\n\t\t\tthis.#anchor = hydrate_node;\n\t\t}\n\t}\n\n\t#hydrate_resolved_content() {\n\t\ttry {\n\t\t\tthis.#main_effect = branch(() => this.#children(this.#anchor));\n\t\t} catch (error) {\n\t\t\tthis.error(error);\n\t\t}\n\t}\n\n\t#hydrate_pending_content() {\n\t\tconst pending = this.#props.pending;\n\t\tif (!pending) return;\n\n\t\tthis.#pending_effect = branch(() => pending(this.#anchor));\n\n\t\tqueue_micro_task(() => {\n\t\t\tvar anchor = this.#get_anchor();\n\n\t\t\tthis.#main_effect = this.#run(() => {\n\t\t\t\tBatch.ensure();\n\t\t\t\treturn branch(() => this.#children(anchor));\n\t\t\t});\n\n\t\t\tif (this.#pending_count > 0) {\n\t\t\t\tthis.#show_pending_snippet();\n\t\t\t} else {\n\t\t\t\tpause_effect(/** @type {Effect} */ (this.#pending_effect), () => {\n\t\t\t\t\tthis.#pending_effect = null;\n\t\t\t\t});\n\n\t\t\t\tthis.is_pending = false;\n\t\t\t}\n\t\t});\n\t}\n\n\t#get_anchor() {\n\t\tvar anchor = this.#anchor;\n\n\t\tif (this.is_pending) {\n\t\t\tthis.#pending_anchor = create_text();\n\t\t\tthis.#anchor.before(this.#pending_anchor);\n\n\t\t\tanchor = this.#pending_anchor;\n\t\t}\n\n\t\treturn anchor;\n\t}\n\n\t/**\n\t * Defer an effect inside a pending boundary until the boundary resolves\n\t * @param {Effect} effect\n\t */\n\tdefer_effect(effect) {\n\t\tdefer_effect(effect, this.#dirty_effects, this.#maybe_dirty_effects);\n\t}\n\n\t/**\n\t * Returns `false` if the effect exists inside a boundary whose pending snippet is shown\n\t * @returns {boolean}\n\t */\n\tis_rendered() {\n\t\treturn !this.is_pending && (!this.parent || this.parent.is_rendered());\n\t}\n\n\thas_pending_snippet() {\n\t\treturn !!this.#props.pending;\n\t}\n\n\t/**\n\t * @param {() => Effect | null} fn\n\t */\n\t#run(fn) {\n\t\tvar previous_effect = active_effect;\n\t\tvar previous_reaction = active_reaction;\n\t\tvar previous_ctx = component_context;\n\n\t\tset_active_effect(this.#effect);\n\t\tset_active_reaction(this.#effect);\n\t\tset_component_context(this.#effect.ctx);\n\n\t\ttry {\n\t\t\treturn fn();\n\t\t} catch (e) {\n\t\t\thandle_error(e);\n\t\t\treturn null;\n\t\t} finally {\n\t\t\tset_active_effect(previous_effect);\n\t\t\tset_active_reaction(previous_reaction);\n\t\t\tset_component_context(previous_ctx);\n\t\t}\n\t}\n\n\t#show_pending_snippet() {\n\t\tconst pending = /** @type {(anchor: Node) => void} */ (this.#props.pending);\n\n\t\tif (this.#main_effect !== null) {\n\t\t\tthis.#offscreen_fragment = document.createDocumentFragment();\n\t\t\tthis.#offscreen_fragment.append(/** @type {TemplateNode} */ (this.#pending_anchor));\n\t\t\tmove_effect(this.#main_effect, this.#offscreen_fragment);\n\t\t}\n\n\t\tif (this.#pending_effect === null) {\n\t\t\tthis.#pending_effect = branch(() => pending(this.#anchor));\n\t\t}\n\t}\n\n\t/**\n\t * Updates the pending count associated with the currently visible pending snippet,\n\t * if any, such that we can replace the snippet with content once work is done\n\t * @param {1 | -1} d\n\t */\n\t#update_pending_count(d) {\n\t\tif (!this.has_pending_snippet()) {\n\t\t\tif (this.parent) {\n\t\t\t\tthis.parent.#update_pending_count(d);\n\t\t\t}\n\n\t\t\t// if there's no parent, we're in a scope with no pending snippet\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#pending_count += d;\n\n\t\tif (this.#pending_count === 0) {\n\t\t\tthis.is_pending = false;\n\n\t\t\t// any effects that were encountered and deferred during traversal\n\t\t\t// should be rescheduled â€” after the next traversal (which will happen\n\t\t\t// immediately, due to the same update that brought us here)\n\t\t\t// the effects will be flushed\n\t\t\tfor (const e of this.#dirty_effects) {\n\t\t\t\tset_signal_status(e, DIRTY);\n\t\t\t\tschedule_effect(e);\n\t\t\t}\n\n\t\t\tfor (const e of this.#maybe_dirty_effects) {\n\t\t\t\tset_signal_status(e, MAYBE_DIRTY);\n\t\t\t\tschedule_effect(e);\n\t\t\t}\n\n\t\t\tthis.#dirty_effects.clear();\n\t\t\tthis.#maybe_dirty_effects.clear();\n\n\t\t\tif (this.#pending_effect) {\n\t\t\t\tpause_effect(this.#pending_effect, () => {\n\t\t\t\t\tthis.#pending_effect = null;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (this.#offscreen_fragment) {\n\t\t\t\tthis.#anchor.before(this.#offscreen_fragment);\n\t\t\t\tthis.#offscreen_fragment = null;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Update the source that powers `$effect.pending()` inside this boundary,\n\t * and controls when the current `pending` snippet (if any) is removed.\n\t * Do not call from inside the class\n\t * @param {1 | -1} d\n\t */\n\tupdate_pending_count(d) {\n\t\tthis.#update_pending_count(d);\n\n\t\tthis.#local_pending_count += d;\n\n\t\tif (!this.#effect_pending || this.#pending_count_update_queued) return;\n\t\tthis.#pending_count_update_queued = true;\n\n\t\tqueue_micro_task(() => {\n\t\t\tthis.#pending_count_update_queued = false;\n\t\t\tif (this.#effect_pending) {\n\t\t\t\tinternal_set(this.#effect_pending, this.#local_pending_count);\n\t\t\t}\n\t\t});\n\t}\n\n\tget_effect_pending() {\n\t\tthis.#effect_pending_subscriber();\n\t\treturn get(/** @type {Source<number>} */ (this.#effect_pending));\n\t}\n\n\t/** @param {unknown} error */\n\terror(error) {\n\t\tvar onerror = this.#props.onerror;\n\t\tlet failed = this.#props.failed;\n\n\t\t// If we have nothing to capture the error, or if we hit an error while\n\t\t// rendering the fallback, re-throw for another boundary to handle\n\t\tif (this.#is_creating_fallback || (!onerror && !failed)) {\n\t\t\tthrow error;\n\t\t}\n\n\t\tif (this.#main_effect) {\n\t\t\tdestroy_effect(this.#main_effect);\n\t\t\tthis.#main_effect = null;\n\t\t}\n\n\t\tif (this.#pending_effect) {\n\t\t\tdestroy_effect(this.#pending_effect);\n\t\t\tthis.#pending_effect = null;\n\t\t}\n\n\t\tif (this.#failed_effect) {\n\t\t\tdestroy_effect(this.#failed_effect);\n\t\t\tthis.#failed_effect = null;\n\t\t}\n\n\t\tif (hydrating) {\n\t\t\tset_hydrate_node(/** @type {TemplateNode} */ (this.#hydrate_open));\n\t\t\tnext();\n\t\t\tset_hydrate_node(skip_nodes());\n\t\t}\n\n\t\tvar did_reset = false;\n\t\tvar calling_on_error = false;\n\n\t\tconst reset = () => {\n\t\t\tif (did_reset) {\n\t\t\t\tw.svelte_boundary_reset_noop();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdid_reset = true;\n\n\t\t\tif (calling_on_error) {\n\t\t\t\te.svelte_boundary_reset_onerror();\n\t\t\t}\n\n\t\t\t// If the failure happened while flushing effects, current_batch can be null\n\t\t\tBatch.ensure();\n\n\t\t\tthis.#local_pending_count = 0;\n\n\t\t\tif (this.#failed_effect !== null) {\n\t\t\t\tpause_effect(this.#failed_effect, () => {\n\t\t\t\t\tthis.#failed_effect = null;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// we intentionally do not try to find the nearest pending boundary. If this boundary has one, we'll render it on reset\n\t\t\t// but it would be really weird to show the parent's boundary on a child reset.\n\t\t\tthis.is_pending = this.has_pending_snippet();\n\n\t\t\tthis.#main_effect = this.#run(() => {\n\t\t\t\tthis.#is_creating_fallback = false;\n\t\t\t\treturn branch(() => this.#children(this.#anchor));\n\t\t\t});\n\n\t\t\tif (this.#pending_count > 0) {\n\t\t\t\tthis.#show_pending_snippet();\n\t\t\t} else {\n\t\t\t\tthis.is_pending = false;\n\t\t\t}\n\t\t};\n\n\t\tqueue_micro_task(() => {\n\t\t\ttry {\n\t\t\t\tcalling_on_error = true;\n\t\t\t\tonerror?.(error, reset);\n\t\t\t\tcalling_on_error = false;\n\t\t\t} catch (error) {\n\t\t\t\tinvoke_error_boundary(error, this.#effect && this.#effect.parent);\n\t\t\t}\n\n\t\t\tif (failed) {\n\t\t\t\tthis.#failed_effect = this.#run(() => {\n\t\t\t\t\tBatch.ensure();\n\t\t\t\t\tthis.#is_creating_fallback = true;\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\treturn branch(() => {\n\t\t\t\t\t\t\tfailed(\n\t\t\t\t\t\t\t\tthis.#anchor,\n\t\t\t\t\t\t\t\t() => error,\n\t\t\t\t\t\t\t\t() => reset\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t});\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tinvoke_error_boundary(error, /** @type {Effect} */ (this.#effect.parent));\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tthis.#is_creating_fallback = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport function get_boundary() {\n\treturn /** @type {Boundary} */ (/** @type {Effect} */ (active_effect).b);\n}\n\nexport function pending() {\n\tif (active_effect === null) {\n\t\te.effect_pending_outside_reaction();\n\t}\n\n\tvar boundary = active_effect.b;\n\n\tif (boundary === null) {\n\t\treturn 0; // TODO eventually we will need this to be global\n\t}\n\n\treturn boundary.get_effect_pending();\n}\n","/** @import { Blocker, Effect, Value } from '#client' */\nimport { DESTROYED, STALE_REACTION } from '#client/constants';\nimport { DEV } from 'esm-env';\nimport {\n\tcomponent_context,\n\tdev_stack,\n\tis_runes,\n\tset_component_context,\n\tset_dev_stack\n} from '../context.js';\nimport { get_boundary } from '../dom/blocks/boundary.js';\nimport { invoke_error_boundary } from '../error-handling.js';\nimport {\n\tactive_effect,\n\tactive_reaction,\n\tset_active_effect,\n\tset_active_reaction\n} from '../runtime.js';\nimport { Batch, current_batch } from './batch.js';\nimport {\n\tasync_derived,\n\tcurrent_async_effect,\n\tderived,\n\tderived_safe_equal,\n\tset_from_async_derived\n} from './deriveds.js';\nimport { aborted } from './effects.js';\n\n/**\n * @param {Blocker[]} blockers\n * @param {Array<() => any>} sync\n * @param {Array<() => Promise<any>>} async\n * @param {(values: Value[]) => any} fn\n */\nexport function flatten(blockers, sync, async, fn) {\n\tconst d = is_runes() ? derived : derived_safe_equal;\n\n\t// Filter out already-settled blockers - no need to wait for them\n\tvar pending = blockers.filter((b) => !b.settled);\n\n\tif (async.length === 0 && pending.length === 0) {\n\t\tfn(sync.map(d));\n\t\treturn;\n\t}\n\n\tvar batch = current_batch;\n\tvar parent = /** @type {Effect} */ (active_effect);\n\n\tvar restore = capture();\n\tvar blocker_promise =\n\t\tpending.length === 1\n\t\t\t? pending[0].promise\n\t\t\t: pending.length > 1\n\t\t\t\t? Promise.all(pending.map((b) => b.promise))\n\t\t\t\t: null;\n\n\t/** @param {Value[]} values */\n\tfunction finish(values) {\n\t\trestore();\n\n\t\ttry {\n\t\t\tfn(values);\n\t\t} catch (error) {\n\t\t\tif ((parent.f & DESTROYED) === 0) {\n\t\t\t\tinvoke_error_boundary(error, parent);\n\t\t\t}\n\t\t}\n\n\t\tbatch?.deactivate();\n\t\tunset_context();\n\t}\n\n\t// Fast path: blockers but no async expressions\n\tif (async.length === 0) {\n\t\t/** @type {Promise<any>} */ (blocker_promise).then(() => finish(sync.map(d)));\n\t\treturn;\n\t}\n\n\t// Full path: has async expressions\n\tfunction run() {\n\t\trestore();\n\t\tPromise.all(async.map((expression) => async_derived(expression)))\n\t\t\t.then((result) => finish([...sync.map(d), ...result]))\n\t\t\t.catch((error) => invoke_error_boundary(error, parent));\n\t}\n\n\tif (blocker_promise) {\n\t\tblocker_promise.then(run);\n\t} else {\n\t\trun();\n\t}\n}\n\n/**\n * @param {Blocker[]} blockers\n * @param {(values: Value[]) => any} fn\n */\nexport function run_after_blockers(blockers, fn) {\n\tflatten(blockers, [], [], fn);\n}\n\n/**\n * Captures the current effect context so that we can restore it after\n * some asynchronous work has happened (so that e.g. `await a + b`\n * causes `b` to be registered as a dependency).\n */\nexport function capture() {\n\tvar previous_effect = active_effect;\n\tvar previous_reaction = active_reaction;\n\tvar previous_component_context = component_context;\n\tvar previous_batch = current_batch;\n\n\tif (DEV) {\n\t\tvar previous_dev_stack = dev_stack;\n\t}\n\n\treturn function restore(activate_batch = true) {\n\t\tset_active_effect(previous_effect);\n\t\tset_active_reaction(previous_reaction);\n\t\tset_component_context(previous_component_context);\n\t\tif (activate_batch) previous_batch?.activate();\n\n\t\tif (DEV) {\n\t\t\tset_from_async_derived(null);\n\t\t\tset_dev_stack(previous_dev_stack);\n\t\t}\n\t};\n}\n\n/**\n * Wraps an `await` expression in such a way that the effect context that was\n * active before the expression evaluated can be reapplied afterwards â€”\n * `await a + b` becomes `(await $.save(a))() + b`\n * @template T\n * @param {Promise<T>} promise\n * @returns {Promise<() => T>}\n */\nexport async function save(promise) {\n\tvar restore = capture();\n\tvar value = await promise;\n\n\treturn () => {\n\t\trestore();\n\t\treturn value;\n\t};\n}\n\n/**\n * Reset `current_async_effect` after the `promise` resolves, so\n * that we can emit `await_reactivity_loss` warnings\n * @template T\n * @param {Promise<T>} promise\n * @returns {Promise<() => T>}\n */\nexport async function track_reactivity_loss(promise) {\n\tvar previous_async_effect = current_async_effect;\n\tvar value = await promise;\n\n\treturn () => {\n\t\tset_from_async_derived(previous_async_effect);\n\t\treturn value;\n\t};\n}\n\n/**\n * Used in `for await` loops in DEV, so\n * that we can emit `await_reactivity_loss` warnings\n * after each `async_iterator` result resolves and\n * after the `async_iterator` return resolves (if it runs)\n * @template T\n * @template TReturn\n * @param {Iterable<T> | AsyncIterable<T>} iterable\n * @returns {AsyncGenerator<T, TReturn | undefined>}\n */\nexport async function* for_await_track_reactivity_loss(iterable) {\n\t// This is based on the algorithms described in ECMA-262:\n\t// ForIn/OfBodyEvaluation\n\t// https://tc39.es/ecma262/multipage/ecmascript-language-statements-and-declarations.html#sec-runtime-semantics-forin-div-ofbodyevaluation-lhs-stmt-iterator-lhskind-labelset\n\t// AsyncIteratorClose\n\t// https://tc39.es/ecma262/multipage/abstract-operations.html#sec-asynciteratorclose\n\n\t/** @type {AsyncIterator<T, TReturn>} */\n\t// @ts-ignore\n\tconst iterator = iterable[Symbol.asyncIterator]?.() ?? iterable[Symbol.iterator]?.();\n\n\tif (iterator === undefined) {\n\t\tthrow new TypeError('value is not async iterable');\n\t}\n\n\t/** Whether the completion of the iterator was \"normal\", meaning it wasn't ended via `break` or a similar method */\n\tlet normal_completion = false;\n\ttry {\n\t\twhile (true) {\n\t\t\tconst { done, value } = (await track_reactivity_loss(iterator.next()))();\n\t\t\tif (done) {\n\t\t\t\tnormal_completion = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tyield value;\n\t\t}\n\t} finally {\n\t\t// If the iterator had a normal completion and `return` is defined on the iterator, call it and return the value\n\t\tif (normal_completion && iterator.return !== undefined) {\n\t\t\t// eslint-disable-next-line no-unsafe-finally\n\t\t\treturn /** @type {TReturn} */ ((await track_reactivity_loss(iterator.return()))().value);\n\t\t}\n\t}\n}\n\nexport function unset_context() {\n\tset_active_effect(null);\n\tset_active_reaction(null);\n\tset_component_context(null);\n\n\tif (DEV) {\n\t\tset_from_async_derived(null);\n\t\tset_dev_stack(null);\n\t}\n}\n\n/**\n * @param {Array<() => void | Promise<void>>} thunks\n */\nexport function run(thunks) {\n\tconst restore = capture();\n\n\tvar boundary = get_boundary();\n\tvar batch = /** @type {Batch} */ (current_batch);\n\tvar blocking = boundary.is_rendered();\n\n\tboundary.update_pending_count(1);\n\tbatch.increment(blocking);\n\n\tvar active = /** @type {Effect} */ (active_effect);\n\n\t/** @type {null | { error: any }} */\n\tvar errored = null;\n\n\t/** @param {any} error */\n\tconst handle_error = (error) => {\n\t\terrored = { error }; // wrap in object in case a promise rejects with a falsy value\n\n\t\tif (!aborted(active)) {\n\t\t\tinvoke_error_boundary(error, active);\n\t\t}\n\t};\n\n\tvar promise = Promise.resolve(thunks[0]()).catch(handle_error);\n\n\t/** @type {Blocker} */\n\tvar blocker = { promise, settled: false };\n\tvar blockers = [blocker];\n\n\tpromise.finally(() => {\n\t\tblocker.settled = true;\n\t});\n\n\tfor (const fn of thunks.slice(1)) {\n\t\tpromise = promise\n\t\t\t.then(() => {\n\t\t\t\tif (errored) {\n\t\t\t\t\tthrow errored.error;\n\t\t\t\t}\n\n\t\t\t\tif (aborted(active)) {\n\t\t\t\t\tthrow STALE_REACTION;\n\t\t\t\t}\n\n\t\t\t\trestore();\n\t\t\t\treturn fn();\n\t\t\t})\n\t\t\t.catch(handle_error);\n\n\t\tconst blocker = { promise, settled: false };\n\t\tblockers.push(blocker);\n\n\t\tpromise.finally(() => {\n\t\t\tblocker.settled = true;\n\n\t\t\tunset_context();\n\t\t\tcurrent_batch?.deactivate();\n\t\t});\n\t}\n\n\tpromise\n\t\t// wait one more tick, so that template effects are\n\t\t// guaranteed to run before `$effect(...)`\n\t\t.then(() => Promise.resolve())\n\t\t.finally(() => {\n\t\t\tboundary.update_pending_count(-1);\n\t\t\tbatch.decrement(blocking);\n\t\t});\n\n\treturn blockers;\n}\n\n/**\n * @param {Blocker[]} blockers\n */\nexport function wait(blockers) {\n\treturn Promise.all(blockers.map((b) => b.promise));\n}\n","/** @import { Derived, Effect, Source } from '#client' */\n/** @import { Batch } from './batch.js'; */\nimport { DEV } from 'esm-env';\nimport {\n\tERROR_VALUE,\n\tDERIVED,\n\tDIRTY,\n\tEFFECT_PRESERVED,\n\tSTALE_REACTION,\n\tASYNC,\n\tWAS_MARKED,\n\tDESTROYED,\n\tCLEAN\n} from '#client/constants';\nimport {\n\tactive_reaction,\n\tactive_effect,\n\tupdate_reaction,\n\tincrement_write_version,\n\tset_active_effect,\n\tpush_reaction_value,\n\tis_destroying_effect\n} from '../runtime.js';\nimport { equals, safe_equals } from './equality.js';\nimport * as e from '../errors.js';\nimport * as w from '../warnings.js';\nimport { async_effect, destroy_effect, effect_tracking, teardown } from './effects.js';\nimport { eager_effects, internal_set, set_eager_effects, source } from './sources.js';\nimport { get_error } from '../../shared/dev.js';\nimport { async_mode_flag, tracing_mode_flag } from '../../flags/index.js';\nimport { Boundary } from '../dom/blocks/boundary.js';\nimport { component_context } from '../context.js';\nimport { UNINITIALIZED } from '../../../constants.js';\nimport { batch_values, current_batch } from './batch.js';\nimport { unset_context } from './async.js';\nimport { deferred, includes } from '../../shared/utils.js';\nimport { set_signal_status, update_derived_status } from './status.js';\n\n/** @type {Effect | null} */\nexport let current_async_effect = null;\n\n/** @param {Effect | null} v */\nexport function set_from_async_derived(v) {\n\tcurrent_async_effect = v;\n}\n\nexport const recent_async_deriveds = new Set();\n\n/**\n * @template V\n * @param {() => V} fn\n * @returns {Derived<V>}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function derived(fn) {\n\tvar flags = DERIVED | DIRTY;\n\tvar parent_derived =\n\t\tactive_reaction !== null && (active_reaction.f & DERIVED) !== 0\n\t\t\t? /** @type {Derived} */ (active_reaction)\n\t\t\t: null;\n\n\tif (active_effect !== null) {\n\t\t// Since deriveds are evaluated lazily, any effects created inside them are\n\t\t// created too late to ensure that the parent effect is added to the tree\n\t\tactive_effect.f |= EFFECT_PRESERVED;\n\t}\n\n\t/** @type {Derived<V>} */\n\tconst signal = {\n\t\tctx: component_context,\n\t\tdeps: null,\n\t\teffects: null,\n\t\tequals,\n\t\tf: flags,\n\t\tfn,\n\t\treactions: null,\n\t\trv: 0,\n\t\tv: /** @type {V} */ (UNINITIALIZED),\n\t\twv: 0,\n\t\tparent: parent_derived ?? active_effect,\n\t\tac: null\n\t};\n\n\tif (DEV && tracing_mode_flag) {\n\t\tsignal.created = get_error('created at');\n\t}\n\n\treturn signal;\n}\n\n/**\n * @template V\n * @param {() => V | Promise<V>} fn\n * @param {string} [label]\n * @param {string} [location] If provided, print a warning if the value is not read immediately after update\n * @returns {Promise<Source<V>>}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function async_derived(fn, label, location) {\n\tlet parent = /** @type {Effect | null} */ (active_effect);\n\n\tif (parent === null) {\n\t\te.async_derived_orphan();\n\t}\n\n\tvar boundary = /** @type {Boundary} */ (parent.b);\n\n\tvar promise = /** @type {Promise<V>} */ (/** @type {unknown} */ (undefined));\n\tvar signal = source(/** @type {V} */ (UNINITIALIZED));\n\n\tif (DEV) signal.label = label;\n\n\t// only suspend in async deriveds created on initialisation\n\tvar should_suspend = !active_reaction;\n\n\t/** @type {Map<Batch, ReturnType<typeof deferred<V>>>} */\n\tvar deferreds = new Map();\n\n\tasync_effect(() => {\n\t\tif (DEV) current_async_effect = active_effect;\n\n\t\t/** @type {ReturnType<typeof deferred<V>>} */\n\t\tvar d = deferred();\n\t\tpromise = d.promise;\n\n\t\ttry {\n\t\t\t// If this code is changed at some point, make sure to still access the then property\n\t\t\t// of fn() to read any signals it might access, so that we track them as dependencies.\n\t\t\t// We call `unset_context` to undo any `save` calls that happen inside `fn()`\n\t\t\tPromise.resolve(fn())\n\t\t\t\t.then(d.resolve, d.reject)\n\t\t\t\t.then(() => {\n\t\t\t\t\tif (batch === current_batch && batch.committed) {\n\t\t\t\t\t\t// if the batch was rejected as stale, we need to cleanup\n\t\t\t\t\t\t// after any `$.save(...)` calls inside `fn()`\n\t\t\t\t\t\tbatch.deactivate();\n\t\t\t\t\t}\n\n\t\t\t\t\tunset_context();\n\t\t\t\t});\n\t\t} catch (error) {\n\t\t\td.reject(error);\n\t\t\tunset_context();\n\t\t}\n\n\t\tif (DEV) current_async_effect = null;\n\n\t\tvar batch = /** @type {Batch} */ (current_batch);\n\n\t\tif (should_suspend) {\n\t\t\tvar blocking = boundary.is_rendered();\n\n\t\t\tboundary.update_pending_count(1);\n\t\t\tbatch.increment(blocking);\n\n\t\t\tdeferreds.get(batch)?.reject(STALE_REACTION);\n\t\t\tdeferreds.delete(batch); // delete to ensure correct order in Map iteration below\n\t\t\tdeferreds.set(batch, d);\n\t\t}\n\n\t\t/**\n\t\t * @param {any} value\n\t\t * @param {unknown} error\n\t\t */\n\t\tconst handler = (value, error = undefined) => {\n\t\t\tcurrent_async_effect = null;\n\n\t\t\tbatch.activate();\n\n\t\t\tif (error) {\n\t\t\t\tif (error !== STALE_REACTION) {\n\t\t\t\t\tsignal.f |= ERROR_VALUE;\n\n\t\t\t\t\t// @ts-expect-error the error is the wrong type, but we don't care\n\t\t\t\t\tinternal_set(signal, error);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif ((signal.f & ERROR_VALUE) !== 0) {\n\t\t\t\t\tsignal.f ^= ERROR_VALUE;\n\t\t\t\t}\n\n\t\t\t\tinternal_set(signal, value);\n\n\t\t\t\t// All prior async derived runs are now stale\n\t\t\t\tfor (const [b, d] of deferreds) {\n\t\t\t\t\tdeferreds.delete(b);\n\t\t\t\t\tif (b === batch) break;\n\t\t\t\t\td.reject(STALE_REACTION);\n\t\t\t\t}\n\n\t\t\t\tif (DEV && location !== undefined) {\n\t\t\t\t\trecent_async_deriveds.add(signal);\n\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tif (recent_async_deriveds.has(signal)) {\n\t\t\t\t\t\t\tw.await_waterfall(/** @type {string} */ (signal.label), location);\n\t\t\t\t\t\t\trecent_async_deriveds.delete(signal);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (should_suspend) {\n\t\t\t\tboundary.update_pending_count(-1);\n\t\t\t\tbatch.decrement(blocking);\n\t\t\t}\n\t\t};\n\n\t\td.promise.then(handler, (e) => handler(null, e || 'unknown'));\n\t});\n\n\tteardown(() => {\n\t\tfor (const d of deferreds.values()) {\n\t\t\td.reject(STALE_REACTION);\n\t\t}\n\t});\n\n\tif (DEV) {\n\t\t// add a flag that lets this be printed as a derived\n\t\t// when using `$inspect.trace()`\n\t\tsignal.f |= ASYNC;\n\t}\n\n\treturn new Promise((fulfil) => {\n\t\t/** @param {Promise<V>} p */\n\t\tfunction next(p) {\n\t\t\tfunction go() {\n\t\t\t\tif (p === promise) {\n\t\t\t\t\tfulfil(signal);\n\t\t\t\t} else {\n\t\t\t\t\t// if the effect re-runs before the initial promise\n\t\t\t\t\t// resolves, delay resolution until we have a value\n\t\t\t\t\tnext(promise);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tp.then(go, go);\n\t\t}\n\n\t\tnext(promise);\n\t});\n}\n\n/**\n * @template V\n * @param {() => V} fn\n * @returns {Derived<V>}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function user_derived(fn) {\n\tconst d = derived(fn);\n\n\tif (!async_mode_flag) push_reaction_value(d);\n\n\treturn d;\n}\n\n/**\n * @template V\n * @param {() => V} fn\n * @returns {Derived<V>}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function derived_safe_equal(fn) {\n\tconst signal = derived(fn);\n\tsignal.equals = safe_equals;\n\treturn signal;\n}\n\n/**\n * @param {Derived} derived\n * @returns {void}\n */\nexport function destroy_derived_effects(derived) {\n\tvar effects = derived.effects;\n\n\tif (effects !== null) {\n\t\tderived.effects = null;\n\n\t\tfor (var i = 0; i < effects.length; i += 1) {\n\t\t\tdestroy_effect(/** @type {Effect} */ (effects[i]));\n\t\t}\n\t}\n}\n\n/**\n * The currently updating deriveds, used to detect infinite recursion\n * in dev mode and provide a nicer error than 'too much recursion'\n * @type {Derived[]}\n */\nlet stack = [];\n\n/**\n * @param {Derived} derived\n * @returns {Effect | null}\n */\nfunction get_derived_parent_effect(derived) {\n\tvar parent = derived.parent;\n\twhile (parent !== null) {\n\t\tif ((parent.f & DERIVED) === 0) {\n\t\t\t// The original parent effect might've been destroyed but the derived\n\t\t\t// is used elsewhere now - do not return the destroyed effect in that case\n\t\t\treturn (parent.f & DESTROYED) === 0 ? /** @type {Effect} */ (parent) : null;\n\t\t}\n\t\tparent = parent.parent;\n\t}\n\treturn null;\n}\n\n/**\n * @template T\n * @param {Derived} derived\n * @returns {T}\n */\nexport function execute_derived(derived) {\n\tvar value;\n\tvar prev_active_effect = active_effect;\n\n\tset_active_effect(get_derived_parent_effect(derived));\n\n\tif (DEV) {\n\t\tlet prev_eager_effects = eager_effects;\n\t\tset_eager_effects(new Set());\n\t\ttry {\n\t\t\tif (includes.call(stack, derived)) {\n\t\t\t\te.derived_references_self();\n\t\t\t}\n\n\t\t\tstack.push(derived);\n\n\t\t\tderived.f &= ~WAS_MARKED;\n\t\t\tdestroy_derived_effects(derived);\n\t\t\tvalue = update_reaction(derived);\n\t\t} finally {\n\t\t\tset_active_effect(prev_active_effect);\n\t\t\tset_eager_effects(prev_eager_effects);\n\t\t\tstack.pop();\n\t\t}\n\t} else {\n\t\ttry {\n\t\t\tderived.f &= ~WAS_MARKED;\n\t\t\tdestroy_derived_effects(derived);\n\t\t\tvalue = update_reaction(derived);\n\t\t} finally {\n\t\t\tset_active_effect(prev_active_effect);\n\t\t}\n\t}\n\n\treturn value;\n}\n\n/**\n * @param {Derived} derived\n * @returns {void}\n */\nexport function update_derived(derived) {\n\tvar value = execute_derived(derived);\n\n\tif (!derived.equals(value)) {\n\t\tderived.wv = increment_write_version();\n\n\t\t// in a fork, we don't update the underlying value, just `batch_values`.\n\t\t// the underlying value will be updated when the fork is committed.\n\t\t// otherwise, the next time we get here after a 'real world' state\n\t\t// change, `derived.equals` may incorrectly return `true`\n\t\tif (!current_batch?.is_fork || derived.deps === null) {\n\t\t\tderived.v = value;\n\n\t\t\t// deriveds without dependencies should never be recomputed\n\t\t\tif (derived.deps === null) {\n\t\t\t\tset_signal_status(derived, CLEAN);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\t// don't mark derived clean if we're reading it inside a\n\t// cleanup function, or it will cache a stale value\n\tif (is_destroying_effect) {\n\t\treturn;\n\t}\n\n\t// During time traveling we don't want to reset the status so that\n\t// traversal of the graph in the other batches still happens\n\tif (batch_values !== null) {\n\t\t// only cache the value if we're in a tracking context, otherwise we won't\n\t\t// clear the cache in `mark_reactions` when dependencies are updated\n\t\tif (effect_tracking() || current_batch?.is_fork) {\n\t\t\tbatch_values.set(derived, value);\n\t\t}\n\t} else {\n\t\tupdate_derived_status(derived);\n\t}\n}\n","/** @import { Derived, Effect, Source, Value } from '#client' */\nimport { DEV } from 'esm-env';\nimport {\n\tactive_reaction,\n\tactive_effect,\n\tuntracked_writes,\n\tget,\n\tset_untracked_writes,\n\tuntrack,\n\tincrement_write_version,\n\tupdate_effect,\n\tcurrent_sources,\n\tis_dirty,\n\tuntracking,\n\tis_destroying_effect,\n\tpush_reaction_value\n} from '../runtime.js';\nimport { equals, safe_equals } from './equality.js';\nimport {\n\tCLEAN,\n\tDERIVED,\n\tDIRTY,\n\tBRANCH_EFFECT,\n\tEAGER_EFFECT,\n\tMAYBE_DIRTY,\n\tBLOCK_EFFECT,\n\tROOT_EFFECT,\n\tASYNC,\n\tWAS_MARKED,\n\tCONNECTED\n} from '#client/constants';\nimport * as e from '../errors.js';\nimport { legacy_mode_flag, tracing_mode_flag } from '../../flags/index.js';\nimport { includes } from '../../shared/utils.js';\nimport { tag_proxy } from '../dev/tracing.js';\nimport { get_error } from '../../shared/dev.js';\nimport { component_context, is_runes } from '../context.js';\nimport { Batch, batch_values, eager_block_effects, schedule_effect } from './batch.js';\nimport { proxy } from '../proxy.js';\nimport { execute_derived } from './deriveds.js';\nimport { set_signal_status, update_derived_status } from './status.js';\n\n/** @type {Set<any>} */\nexport let eager_effects = new Set();\n\n/** @type {Map<Source, any>} */\nexport const old_values = new Map();\n\n/**\n * @param {Set<any>} v\n */\nexport function set_eager_effects(v) {\n\teager_effects = v;\n}\n\nlet eager_effects_deferred = false;\n\nexport function set_eager_effects_deferred() {\n\teager_effects_deferred = true;\n}\n\n/**\n * @template V\n * @param {V} v\n * @param {Error | null} [stack]\n * @returns {Source<V>}\n */\n// TODO rename this to `state` throughout the codebase\nexport function source(v, stack) {\n\t/** @type {Value} */\n\tvar signal = {\n\t\tf: 0, // TODO ideally we could skip this altogether, but it causes type errors\n\t\tv,\n\t\treactions: null,\n\t\tequals,\n\t\trv: 0,\n\t\twv: 0\n\t};\n\n\tif (DEV && tracing_mode_flag) {\n\t\tsignal.created = stack ?? get_error('created at');\n\t\tsignal.updated = null;\n\t\tsignal.set_during_effect = false;\n\t\tsignal.trace = null;\n\t}\n\n\treturn signal;\n}\n\n/**\n * @template V\n * @param {V} v\n * @param {Error | null} [stack]\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function state(v, stack) {\n\tconst s = source(v, stack);\n\n\tpush_reaction_value(s);\n\n\treturn s;\n}\n\n/**\n * @template V\n * @param {V} initial_value\n * @param {boolean} [immutable]\n * @returns {Source<V>}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function mutable_source(initial_value, immutable = false, trackable = true) {\n\tconst s = source(initial_value);\n\tif (!immutable) {\n\t\ts.equals = safe_equals;\n\t}\n\n\t// bind the signal to the component context, in case we need to\n\t// track updates to trigger beforeUpdate/afterUpdate callbacks\n\tif (legacy_mode_flag && trackable && component_context !== null && component_context.l !== null) {\n\t\t(component_context.l.s ??= []).push(s);\n\t}\n\n\treturn s;\n}\n\n/**\n * @template V\n * @param {Value<V>} source\n * @param {V} value\n */\nexport function mutate(source, value) {\n\tset(\n\t\tsource,\n\t\tuntrack(() => get(source))\n\t);\n\treturn value;\n}\n\n/**\n * @template V\n * @param {Source<V>} source\n * @param {V} value\n * @param {boolean} [should_proxy]\n * @returns {V}\n */\nexport function set(source, value, should_proxy = false) {\n\tif (\n\t\tactive_reaction !== null &&\n\t\t// since we are untracking the function inside `$inspect.with` we need to add this check\n\t\t// to ensure we error if state is set inside an inspect effect\n\t\t(!untracking || (active_reaction.f & EAGER_EFFECT) !== 0) &&\n\t\tis_runes() &&\n\t\t(active_reaction.f & (DERIVED | BLOCK_EFFECT | ASYNC | EAGER_EFFECT)) !== 0 &&\n\t\t(current_sources === null || !includes.call(current_sources, source))\n\t) {\n\t\te.state_unsafe_mutation();\n\t}\n\n\tlet new_value = should_proxy ? proxy(value) : value;\n\n\tif (DEV) {\n\t\ttag_proxy(new_value, /** @type {string} */ (source.label));\n\t}\n\n\treturn internal_set(source, new_value);\n}\n\n/**\n * @template V\n * @param {Source<V>} source\n * @param {V} value\n * @returns {V}\n */\nexport function internal_set(source, value) {\n\tif (!source.equals(value)) {\n\t\tvar old_value = source.v;\n\n\t\tif (is_destroying_effect) {\n\t\t\told_values.set(source, value);\n\t\t} else {\n\t\t\told_values.set(source, old_value);\n\t\t}\n\n\t\tsource.v = value;\n\n\t\tvar batch = Batch.ensure();\n\t\tbatch.capture(source, old_value);\n\n\t\tif (DEV) {\n\t\t\tif (tracing_mode_flag || active_effect !== null) {\n\t\t\t\tsource.updated ??= new Map();\n\n\t\t\t\t// For performance reasons, when not using $inspect.trace, we only start collecting stack traces\n\t\t\t\t// after the same source has been updated more than 5 times in the same flush cycle.\n\t\t\t\tconst count = (source.updated.get('')?.count ?? 0) + 1;\n\t\t\t\tsource.updated.set('', { error: /** @type {any} */ (null), count });\n\n\t\t\t\tif (tracing_mode_flag || count > 5) {\n\t\t\t\t\tconst error = get_error('updated at');\n\n\t\t\t\t\tif (error !== null) {\n\t\t\t\t\t\tlet entry = source.updated.get(error.stack);\n\n\t\t\t\t\t\tif (!entry) {\n\t\t\t\t\t\t\tentry = { error, count: 0 };\n\t\t\t\t\t\t\tsource.updated.set(error.stack, entry);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tentry.count++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (active_effect !== null) {\n\t\t\t\tsource.set_during_effect = true;\n\t\t\t}\n\t\t}\n\n\t\tif ((source.f & DERIVED) !== 0) {\n\t\t\tconst derived = /** @type {Derived} */ (source);\n\n\t\t\t// if we are assigning to a dirty derived we set it to clean/maybe dirty but we also eagerly execute it to track the dependencies\n\t\t\tif ((source.f & DIRTY) !== 0) {\n\t\t\t\texecute_derived(derived);\n\t\t\t}\n\n\t\t\tupdate_derived_status(derived);\n\t\t}\n\n\t\tsource.wv = increment_write_version();\n\n\t\t// For debugging, in case you want to know which reactions are being scheduled:\n\t\t// log_reactions(source);\n\t\tmark_reactions(source, DIRTY);\n\n\t\t// It's possible that the current reaction might not have up-to-date dependencies\n\t\t// whilst it's actively running. So in the case of ensuring it registers the reaction\n\t\t// properly for itself, we need to ensure the current effect actually gets\n\t\t// scheduled. i.e: `$effect(() => x++)`\n\t\tif (\n\t\t\tis_runes() &&\n\t\t\tactive_effect !== null &&\n\t\t\t(active_effect.f & CLEAN) !== 0 &&\n\t\t\t(active_effect.f & (BRANCH_EFFECT | ROOT_EFFECT)) === 0\n\t\t) {\n\t\t\tif (untracked_writes === null) {\n\t\t\t\tset_untracked_writes([source]);\n\t\t\t} else {\n\t\t\t\tuntracked_writes.push(source);\n\t\t\t}\n\t\t}\n\n\t\tif (!batch.is_fork && eager_effects.size > 0 && !eager_effects_deferred) {\n\t\t\tflush_eager_effects();\n\t\t}\n\t}\n\n\treturn value;\n}\n\nexport function flush_eager_effects() {\n\teager_effects_deferred = false;\n\n\tfor (const effect of eager_effects) {\n\t\t// Mark clean inspect-effects as maybe dirty and then check their dirtiness\n\t\t// instead of just updating the effects - this way we avoid overfiring.\n\t\tif ((effect.f & CLEAN) !== 0) {\n\t\t\tset_signal_status(effect, MAYBE_DIRTY);\n\t\t}\n\n\t\tif (is_dirty(effect)) {\n\t\t\tupdate_effect(effect);\n\t\t}\n\t}\n\n\teager_effects.clear();\n}\n\n/**\n * @template {number | bigint} T\n * @param {Source<T>} source\n * @param {1 | -1} [d]\n * @returns {T}\n */\nexport function update(source, d = 1) {\n\tvar value = get(source);\n\tvar result = d === 1 ? value++ : value--;\n\n\tset(source, value);\n\n\t// @ts-expect-error\n\treturn result;\n}\n\n/**\n * @template {number | bigint} T\n * @param {Source<T>} source\n * @param {1 | -1} [d]\n * @returns {T}\n */\nexport function update_pre(source, d = 1) {\n\tvar value = get(source);\n\n\t// @ts-expect-error\n\treturn set(source, d === 1 ? ++value : --value);\n}\n\n/**\n * Silently (without using `get`) increment a source\n * @param {Source<number>} source\n */\nexport function increment(source) {\n\tset(source, source.v + 1);\n}\n\n/**\n * @param {Value} signal\n * @param {number} status should be DIRTY or MAYBE_DIRTY\n * @returns {void}\n */\nfunction mark_reactions(signal, status) {\n\tvar reactions = signal.reactions;\n\tif (reactions === null) return;\n\n\tvar runes = is_runes();\n\tvar length = reactions.length;\n\n\tfor (var i = 0; i < length; i++) {\n\t\tvar reaction = reactions[i];\n\t\tvar flags = reaction.f;\n\n\t\t// In legacy mode, skip the current effect to prevent infinite loops\n\t\tif (!runes && reaction === active_effect) continue;\n\n\t\t// Inspect effects need to run immediately, so that the stack trace makes sense\n\t\tif (DEV && (flags & EAGER_EFFECT) !== 0) {\n\t\t\teager_effects.add(reaction);\n\t\t\tcontinue;\n\t\t}\n\n\t\tvar not_dirty = (flags & DIRTY) === 0;\n\n\t\t// don't set a DIRTY reaction to MAYBE_DIRTY\n\t\tif (not_dirty) {\n\t\t\tset_signal_status(reaction, status);\n\t\t}\n\n\t\tif ((flags & DERIVED) !== 0) {\n\t\t\tvar derived = /** @type {Derived} */ (reaction);\n\n\t\t\tbatch_values?.delete(derived);\n\n\t\t\tif ((flags & WAS_MARKED) === 0) {\n\t\t\t\t// Only connected deriveds can be reliably unmarked right away\n\t\t\t\tif (flags & CONNECTED) {\n\t\t\t\t\treaction.f |= WAS_MARKED;\n\t\t\t\t}\n\n\t\t\t\tmark_reactions(derived, MAYBE_DIRTY);\n\t\t\t}\n\t\t} else if (not_dirty) {\n\t\t\tif ((flags & BLOCK_EFFECT) !== 0 && eager_block_effects !== null) {\n\t\t\t\teager_block_effects.add(/** @type {Effect} */ (reaction));\n\t\t\t}\n\n\t\t\tschedule_effect(/** @type {Effect} */ (reaction));\n\t\t}\n\t}\n}\n","/** @import { Source } from '#client' */\nimport { DEV } from 'esm-env';\nimport {\n\tget,\n\tactive_effect,\n\tupdate_version,\n\tactive_reaction,\n\tset_update_version,\n\tset_active_reaction\n} from './runtime.js';\nimport {\n\tarray_prototype,\n\tget_descriptor,\n\tget_prototype_of,\n\tis_array,\n\tobject_prototype\n} from '../shared/utils.js';\nimport {\n\tstate as source,\n\tset,\n\tincrement,\n\tflush_eager_effects,\n\tset_eager_effects_deferred\n} from './reactivity/sources.js';\nimport { PROXY_PATH_SYMBOL, STATE_SYMBOL } from '#client/constants';\nimport { UNINITIALIZED } from '../../constants.js';\nimport * as e from './errors.js';\nimport { tag } from './dev/tracing.js';\nimport { get_error } from '../shared/dev.js';\nimport { tracing_mode_flag } from '../flags/index.js';\n\n// TODO move all regexes into shared module?\nconst regex_is_valid_identifier = /^[a-zA-Z_$][a-zA-Z_$0-9]*$/;\n\n/**\n * @template T\n * @param {T} value\n * @returns {T}\n */\nexport function proxy(value) {\n\t// if non-proxyable, or is already a proxy, return `value`\n\tif (typeof value !== 'object' || value === null || STATE_SYMBOL in value) {\n\t\treturn value;\n\t}\n\n\tconst prototype = get_prototype_of(value);\n\n\tif (prototype !== object_prototype && prototype !== array_prototype) {\n\t\treturn value;\n\t}\n\n\t/** @type {Map<any, Source<any>>} */\n\tvar sources = new Map();\n\tvar is_proxied_array = is_array(value);\n\tvar version = source(0);\n\n\tvar stack = DEV && tracing_mode_flag ? get_error('created at') : null;\n\tvar parent_version = update_version;\n\n\t/**\n\t * Executes the proxy in the context of the reaction it was originally created in, if any\n\t * @template T\n\t * @param {() => T} fn\n\t */\n\tvar with_parent = (fn) => {\n\t\tif (update_version === parent_version) {\n\t\t\treturn fn();\n\t\t}\n\n\t\t// child source is being created after the initial proxy â€”\n\t\t// prevent it from being associated with the current reaction\n\t\tvar reaction = active_reaction;\n\t\tvar version = update_version;\n\n\t\tset_active_reaction(null);\n\t\tset_update_version(parent_version);\n\n\t\tvar result = fn();\n\n\t\tset_active_reaction(reaction);\n\t\tset_update_version(version);\n\n\t\treturn result;\n\t};\n\n\tif (is_proxied_array) {\n\t\t// We need to create the length source eagerly to ensure that\n\t\t// mutations to the array are properly synced with our proxy\n\t\tsources.set('length', source(/** @type {any[]} */ (value).length, stack));\n\t\tif (DEV) {\n\t\t\tvalue = /** @type {any} */ (inspectable_array(/** @type {any[]} */ (value)));\n\t\t}\n\t}\n\n\t/** Used in dev for $inspect.trace() */\n\tvar path = '';\n\tlet updating = false;\n\t/** @param {string} new_path */\n\tfunction update_path(new_path) {\n\t\tif (updating) return;\n\t\tupdating = true;\n\t\tpath = new_path;\n\n\t\ttag(version, `${path} version`);\n\n\t\t// rename all child sources and child proxies\n\t\tfor (const [prop, source] of sources) {\n\t\t\ttag(source, get_label(path, prop));\n\t\t}\n\t\tupdating = false;\n\t}\n\n\treturn new Proxy(/** @type {any} */ (value), {\n\t\tdefineProperty(_, prop, descriptor) {\n\t\t\tif (\n\t\t\t\t!('value' in descriptor) ||\n\t\t\t\tdescriptor.configurable === false ||\n\t\t\t\tdescriptor.enumerable === false ||\n\t\t\t\tdescriptor.writable === false\n\t\t\t) {\n\t\t\t\t// we disallow non-basic descriptors, because unless they are applied to the\n\t\t\t\t// target object â€” which we avoid, so that state can be forked â€” we will run\n\t\t\t\t// afoul of the various invariants\n\t\t\t\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/Proxy/getOwnPropertyDescriptor#invariants\n\t\t\t\te.state_descriptors_fixed();\n\t\t\t}\n\t\t\tvar s = sources.get(prop);\n\t\t\tif (s === undefined) {\n\t\t\t\ts = with_parent(() => {\n\t\t\t\t\tvar s = source(descriptor.value, stack);\n\t\t\t\t\tsources.set(prop, s);\n\t\t\t\t\tif (DEV && typeof prop === 'string') {\n\t\t\t\t\t\ttag(s, get_label(path, prop));\n\t\t\t\t\t}\n\t\t\t\t\treturn s;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tset(s, descriptor.value, true);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\n\t\tdeleteProperty(target, prop) {\n\t\t\tvar s = sources.get(prop);\n\n\t\t\tif (s === undefined) {\n\t\t\t\tif (prop in target) {\n\t\t\t\t\tconst s = with_parent(() => source(UNINITIALIZED, stack));\n\t\t\t\t\tsources.set(prop, s);\n\t\t\t\t\tincrement(version);\n\n\t\t\t\t\tif (DEV) {\n\t\t\t\t\t\ttag(s, get_label(path, prop));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tset(s, UNINITIALIZED);\n\t\t\t\tincrement(version);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\n\t\tget(target, prop, receiver) {\n\t\t\tif (prop === STATE_SYMBOL) {\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\tif (DEV && prop === PROXY_PATH_SYMBOL) {\n\t\t\t\treturn update_path;\n\t\t\t}\n\n\t\t\tvar s = sources.get(prop);\n\t\t\tvar exists = prop in target;\n\n\t\t\t// create a source, but only if it's an own property and not a prototype property\n\t\t\tif (s === undefined && (!exists || get_descriptor(target, prop)?.writable)) {\n\t\t\t\ts = with_parent(() => {\n\t\t\t\t\tvar p = proxy(exists ? target[prop] : UNINITIALIZED);\n\t\t\t\t\tvar s = source(p, stack);\n\n\t\t\t\t\tif (DEV) {\n\t\t\t\t\t\ttag(s, get_label(path, prop));\n\t\t\t\t\t}\n\n\t\t\t\t\treturn s;\n\t\t\t\t});\n\n\t\t\t\tsources.set(prop, s);\n\t\t\t}\n\n\t\t\tif (s !== undefined) {\n\t\t\t\tvar v = get(s);\n\t\t\t\treturn v === UNINITIALIZED ? undefined : v;\n\t\t\t}\n\n\t\t\treturn Reflect.get(target, prop, receiver);\n\t\t},\n\n\t\tgetOwnPropertyDescriptor(target, prop) {\n\t\t\tvar descriptor = Reflect.getOwnPropertyDescriptor(target, prop);\n\n\t\t\tif (descriptor && 'value' in descriptor) {\n\t\t\t\tvar s = sources.get(prop);\n\t\t\t\tif (s) descriptor.value = get(s);\n\t\t\t} else if (descriptor === undefined) {\n\t\t\t\tvar source = sources.get(prop);\n\t\t\t\tvar value = source?.v;\n\n\t\t\t\tif (source !== undefined && value !== UNINITIALIZED) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t\tconfigurable: true,\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t\twritable: true\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn descriptor;\n\t\t},\n\n\t\thas(target, prop) {\n\t\t\tif (prop === STATE_SYMBOL) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tvar s = sources.get(prop);\n\t\t\tvar has = (s !== undefined && s.v !== UNINITIALIZED) || Reflect.has(target, prop);\n\n\t\t\tif (\n\t\t\t\ts !== undefined ||\n\t\t\t\t(active_effect !== null && (!has || get_descriptor(target, prop)?.writable))\n\t\t\t) {\n\t\t\t\tif (s === undefined) {\n\t\t\t\t\ts = with_parent(() => {\n\t\t\t\t\t\tvar p = has ? proxy(target[prop]) : UNINITIALIZED;\n\t\t\t\t\t\tvar s = source(p, stack);\n\n\t\t\t\t\t\tif (DEV) {\n\t\t\t\t\t\t\ttag(s, get_label(path, prop));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn s;\n\t\t\t\t\t});\n\n\t\t\t\t\tsources.set(prop, s);\n\t\t\t\t}\n\n\t\t\t\tvar value = get(s);\n\t\t\t\tif (value === UNINITIALIZED) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn has;\n\t\t},\n\n\t\tset(target, prop, value, receiver) {\n\t\t\tvar s = sources.get(prop);\n\t\t\tvar has = prop in target;\n\n\t\t\t// variable.length = value -> clear all signals with index >= value\n\t\t\tif (is_proxied_array && prop === 'length') {\n\t\t\t\tfor (var i = value; i < /** @type {Source<number>} */ (s).v; i += 1) {\n\t\t\t\t\tvar other_s = sources.get(i + '');\n\t\t\t\t\tif (other_s !== undefined) {\n\t\t\t\t\t\tset(other_s, UNINITIALIZED);\n\t\t\t\t\t} else if (i in target) {\n\t\t\t\t\t\t// If the item exists in the original, we need to create an uninitialized source,\n\t\t\t\t\t\t// else a later read of the property would result in a source being created with\n\t\t\t\t\t\t// the value of the original item at that index.\n\t\t\t\t\t\tother_s = with_parent(() => source(UNINITIALIZED, stack));\n\t\t\t\t\t\tsources.set(i + '', other_s);\n\n\t\t\t\t\t\tif (DEV) {\n\t\t\t\t\t\t\ttag(other_s, get_label(path, i));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If we haven't yet created a source for this property, we need to ensure\n\t\t\t// we do so otherwise if we read it later, then the write won't be tracked and\n\t\t\t// the heuristics of effects will be different vs if we had read the proxied\n\t\t\t// object property before writing to that property.\n\t\t\tif (s === undefined) {\n\t\t\t\tif (!has || get_descriptor(target, prop)?.writable) {\n\t\t\t\t\ts = with_parent(() => source(undefined, stack));\n\n\t\t\t\t\tif (DEV) {\n\t\t\t\t\t\ttag(s, get_label(path, prop));\n\t\t\t\t\t}\n\t\t\t\t\tset(s, proxy(value));\n\n\t\t\t\t\tsources.set(prop, s);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\thas = s.v !== UNINITIALIZED;\n\n\t\t\t\tvar p = with_parent(() => proxy(value));\n\t\t\t\tset(s, p);\n\t\t\t}\n\n\t\t\tvar descriptor = Reflect.getOwnPropertyDescriptor(target, prop);\n\n\t\t\t// Set the new value before updating any signals so that any listeners get the new value\n\t\t\tif (descriptor?.set) {\n\t\t\t\tdescriptor.set.call(receiver, value);\n\t\t\t}\n\n\t\t\tif (!has) {\n\t\t\t\t// If we have mutated an array directly, we might need to\n\t\t\t\t// signal that length has also changed. Do it before updating metadata\n\t\t\t\t// to ensure that iterating over the array as a result of a metadata update\n\t\t\t\t// will not cause the length to be out of sync.\n\t\t\t\tif (is_proxied_array && typeof prop === 'string') {\n\t\t\t\t\tvar ls = /** @type {Source<number>} */ (sources.get('length'));\n\t\t\t\t\tvar n = Number(prop);\n\n\t\t\t\t\tif (Number.isInteger(n) && n >= ls.v) {\n\t\t\t\t\t\tset(ls, n + 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tincrement(version);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\n\t\townKeys(target) {\n\t\t\tget(version);\n\n\t\t\tvar own_keys = Reflect.ownKeys(target).filter((key) => {\n\t\t\t\tvar source = sources.get(key);\n\t\t\t\treturn source === undefined || source.v !== UNINITIALIZED;\n\t\t\t});\n\n\t\t\tfor (var [key, source] of sources) {\n\t\t\t\tif (source.v !== UNINITIALIZED && !(key in target)) {\n\t\t\t\t\town_keys.push(key);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn own_keys;\n\t\t},\n\n\t\tsetPrototypeOf() {\n\t\t\te.state_prototype_fixed();\n\t\t}\n\t});\n}\n\n/**\n * @param {string} path\n * @param {string | symbol} prop\n */\nfunction get_label(path, prop) {\n\tif (typeof prop === 'symbol') return `${path}[Symbol(${prop.description ?? ''})]`;\n\tif (regex_is_valid_identifier.test(prop)) return `${path}.${prop}`;\n\treturn /^\\d+$/.test(prop) ? `${path}[${prop}]` : `${path}['${prop}']`;\n}\n\n/**\n * @param {any} value\n */\nexport function get_proxied_value(value) {\n\ttry {\n\t\tif (value !== null && typeof value === 'object' && STATE_SYMBOL in value) {\n\t\t\treturn value[STATE_SYMBOL];\n\t\t}\n\t} catch {\n\t\t// the above if check can throw an error if the value in question\n\t\t// is the contentWindow of an iframe on another domain, in which\n\t\t// case we want to just return the value (because it's definitely\n\t\t// not a proxied value) so we don't break any JavaScript interacting\n\t\t// with that iframe (such as various payment companies client side\n\t\t// JavaScript libraries interacting with their iframes on the same\n\t\t// domain)\n\t}\n\n\treturn value;\n}\n\n/**\n * @param {any} a\n * @param {any} b\n */\nexport function is(a, b) {\n\treturn Object.is(get_proxied_value(a), get_proxied_value(b));\n}\n\nconst ARRAY_MUTATING_METHODS = new Set([\n\t'copyWithin',\n\t'fill',\n\t'pop',\n\t'push',\n\t'reverse',\n\t'shift',\n\t'sort',\n\t'splice',\n\t'unshift'\n]);\n\n/**\n * Wrap array mutating methods so $inspect is triggered only once and\n * to prevent logging an array in intermediate state (e.g. with an empty slot)\n * @param {any[]} array\n */\nfunction inspectable_array(array) {\n\treturn new Proxy(array, {\n\t\tget(target, prop, receiver) {\n\t\t\tvar value = Reflect.get(target, prop, receiver);\n\t\t\tif (!ARRAY_MUTATING_METHODS.has(/** @type {string} */ (prop))) {\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * @this {any[]}\n\t\t\t * @param {any[]} args\n\t\t\t */\n\t\t\treturn function (...args) {\n\t\t\t\tset_eager_effects_deferred();\n\t\t\t\tvar result = value.apply(this, args);\n\t\t\t\tflush_eager_effects();\n\t\t\t\treturn result;\n\t\t\t};\n\t\t}\n\t});\n}\n","/** @import { Effect, TemplateNode } from '#client' */\nimport { hydrate_node, hydrating, set_hydrate_node } from './hydration.js';\nimport { DEV } from 'esm-env';\nimport { init_array_prototype_warnings } from '../dev/equality.js';\nimport { get_descriptor, is_extensible } from '../../shared/utils.js';\nimport { active_effect } from '../runtime.js';\nimport { async_mode_flag } from '../../flags/index.js';\nimport { TEXT_NODE, EFFECT_RAN } from '#client/constants';\nimport { eager_block_effects } from '../reactivity/batch.js';\n\n// export these for reference in the compiled code, making global name deduplication unnecessary\n/** @type {Window} */\nexport var $window;\n\n/** @type {Document} */\nexport var $document;\n\n/** @type {boolean} */\nexport var is_firefox;\n\n/** @type {() => Node | null} */\nvar first_child_getter;\n/** @type {() => Node | null} */\nvar next_sibling_getter;\n\n/**\n * Initialize these lazily to avoid issues when using the runtime in a server context\n * where these globals are not available while avoiding a separate server entry point\n */\nexport function init_operations() {\n\tif ($window !== undefined) {\n\t\treturn;\n\t}\n\n\t$window = window;\n\t$document = document;\n\tis_firefox = /Firefox/.test(navigator.userAgent);\n\n\tvar element_prototype = Element.prototype;\n\tvar node_prototype = Node.prototype;\n\tvar text_prototype = Text.prototype;\n\n\t// @ts-ignore\n\tfirst_child_getter = get_descriptor(node_prototype, 'firstChild').get;\n\t// @ts-ignore\n\tnext_sibling_getter = get_descriptor(node_prototype, 'nextSibling').get;\n\n\tif (is_extensible(element_prototype)) {\n\t\t// the following assignments improve perf of lookups on DOM nodes\n\t\t// @ts-expect-error\n\t\telement_prototype.__click = undefined;\n\t\t// @ts-expect-error\n\t\telement_prototype.__className = undefined;\n\t\t// @ts-expect-error\n\t\telement_prototype.__attributes = null;\n\t\t// @ts-expect-error\n\t\telement_prototype.__style = undefined;\n\t\t// @ts-expect-error\n\t\telement_prototype.__e = undefined;\n\t}\n\n\tif (is_extensible(text_prototype)) {\n\t\t// @ts-expect-error\n\t\ttext_prototype.__t = undefined;\n\t}\n\n\tif (DEV) {\n\t\t// @ts-expect-error\n\t\telement_prototype.__svelte_meta = null;\n\n\t\tinit_array_prototype_warnings();\n\t}\n}\n\n/**\n * @param {string} value\n * @returns {Text}\n */\nexport function create_text(value = '') {\n\treturn document.createTextNode(value);\n}\n\n/**\n * @template {Node} N\n * @param {N} node\n */\n/*@__NO_SIDE_EFFECTS__*/\nexport function get_first_child(node) {\n\treturn /** @type {TemplateNode | null} */ (first_child_getter.call(node));\n}\n\n/**\n * @template {Node} N\n * @param {N} node\n */\n/*@__NO_SIDE_EFFECTS__*/\nexport function get_next_sibling(node) {\n\treturn /** @type {TemplateNode | null} */ (next_sibling_getter.call(node));\n}\n\n/**\n * Don't mark this as side-effect-free, hydration needs to walk all nodes\n * @template {Node} N\n * @param {N} node\n * @param {boolean} is_text\n * @returns {TemplateNode | null}\n */\nexport function child(node, is_text) {\n\tif (!hydrating) {\n\t\treturn get_first_child(node);\n\t}\n\n\tvar child = get_first_child(hydrate_node);\n\n\t// Child can be null if we have an element with a single child, like `<p>{text}</p>`, where `text` is empty\n\tif (child === null) {\n\t\tchild = hydrate_node.appendChild(create_text());\n\t} else if (is_text && child.nodeType !== TEXT_NODE) {\n\t\tvar text = create_text();\n\t\tchild?.before(text);\n\t\tset_hydrate_node(text);\n\t\treturn text;\n\t}\n\n\tif (is_text) {\n\t\tmerge_text_nodes(/** @type {Text} */ (child));\n\t}\n\n\tset_hydrate_node(child);\n\treturn child;\n}\n\n/**\n * Don't mark this as side-effect-free, hydration needs to walk all nodes\n * @param {TemplateNode} node\n * @param {boolean} [is_text]\n * @returns {TemplateNode | null}\n */\nexport function first_child(node, is_text = false) {\n\tif (!hydrating) {\n\t\tvar first = get_first_child(node);\n\n\t\t// TODO prevent user comments with the empty string when preserveComments is true\n\t\tif (first instanceof Comment && first.data === '') return get_next_sibling(first);\n\n\t\treturn first;\n\t}\n\n\tif (is_text) {\n\t\t// if an {expression} is empty during SSR, there might be no\n\t\t// text node to hydrate â€” we must therefore create one\n\t\tif (hydrate_node?.nodeType !== TEXT_NODE) {\n\t\t\tvar text = create_text();\n\n\t\t\thydrate_node?.before(text);\n\t\t\tset_hydrate_node(text);\n\t\t\treturn text;\n\t\t}\n\n\t\tmerge_text_nodes(/** @type {Text} */ (hydrate_node));\n\t}\n\n\treturn hydrate_node;\n}\n\n/**\n * Don't mark this as side-effect-free, hydration needs to walk all nodes\n * @param {TemplateNode} node\n * @param {number} count\n * @param {boolean} is_text\n * @returns {TemplateNode | null}\n */\nexport function sibling(node, count = 1, is_text = false) {\n\tlet next_sibling = hydrating ? hydrate_node : node;\n\tvar last_sibling;\n\n\twhile (count--) {\n\t\tlast_sibling = next_sibling;\n\t\tnext_sibling = /** @type {TemplateNode} */ (get_next_sibling(next_sibling));\n\t}\n\n\tif (!hydrating) {\n\t\treturn next_sibling;\n\t}\n\n\tif (is_text) {\n\t\t// if a sibling {expression} is empty during SSR, there might be no\n\t\t// text node to hydrate â€” we must therefore create one\n\t\tif (next_sibling?.nodeType !== TEXT_NODE) {\n\t\t\tvar text = create_text();\n\t\t\t// If the next sibling is `null` and we're handling text then it's because\n\t\t\t// the SSR content was empty for the text, so we need to generate a new text\n\t\t\t// node and insert it after the last sibling\n\t\t\tif (next_sibling === null) {\n\t\t\t\tlast_sibling?.after(text);\n\t\t\t} else {\n\t\t\t\tnext_sibling.before(text);\n\t\t\t}\n\t\t\tset_hydrate_node(text);\n\t\t\treturn text;\n\t\t}\n\n\t\tmerge_text_nodes(/** @type {Text} */ (next_sibling));\n\t}\n\n\tset_hydrate_node(next_sibling);\n\treturn next_sibling;\n}\n\n/**\n * @template {Node} N\n * @param {N} node\n * @returns {void}\n */\nexport function clear_text_content(node) {\n\tnode.textContent = '';\n}\n\n/**\n * Returns `true` if we're updating the current block, for example `condition` in\n * an `{#if condition}` block just changed. In this case, the branch should be\n * appended (or removed) at the same time as other updates within the\n * current `<svelte:boundary>`\n */\nexport function should_defer_append() {\n\tif (!async_mode_flag) return false;\n\tif (eager_block_effects !== null) return false;\n\n\tvar flags = /** @type {Effect} */ (active_effect).f;\n\treturn (flags & EFFECT_RAN) !== 0;\n}\n\n/**\n *\n * @param {string} tag\n * @param {string} [namespace]\n * @param {string} [is]\n * @returns\n */\nexport function create_element(tag, namespace, is) {\n\tlet options = is ? { is } : undefined;\n\tif (namespace) {\n\t\treturn document.createElementNS(namespace, tag, options);\n\t}\n\treturn document.createElement(tag, options);\n}\n\nexport function create_fragment() {\n\treturn document.createDocumentFragment();\n}\n\n/**\n * @param {string} data\n * @returns\n */\nexport function create_comment(data = '') {\n\treturn document.createComment(data);\n}\n\n/**\n * @param {Element} element\n * @param {string} key\n * @param {string} value\n * @returns\n */\nexport function set_attribute(element, key, value = '') {\n\tif (key.startsWith('xlink:')) {\n\t\telement.setAttributeNS('http://www.w3.org/1999/xlink', key, value);\n\t\treturn;\n\t}\n\treturn element.setAttribute(key, value);\n}\n\n/**\n * Browsers split text nodes larger than 65536 bytes when parsing.\n * For hydration to succeed, we need to stitch them back together\n * @param {Text} text\n */\nexport function merge_text_nodes(text) {\n\tif (/** @type {string} */ (text.nodeValue).length < 65536) {\n\t\treturn;\n\t}\n\n\tlet next = text.nextSibling;\n\n\twhile (next !== null && next.nodeType === TEXT_NODE) {\n\t\tnext.remove();\n\n\t\t/** @type {string} */ (text.nodeValue) += /** @type {string} */ (next.nodeValue);\n\n\t\tnext = text.nextSibling;\n\t}\n}\n","import { hydrating } from '../hydration.js';\nimport { clear_text_content, get_first_child } from '../operations.js';\nimport { queue_micro_task } from '../task.js';\n\n/**\n * @param {HTMLElement} dom\n * @param {boolean} value\n * @returns {void}\n */\nexport function autofocus(dom, value) {\n\tif (value) {\n\t\tconst body = document.body;\n\t\tdom.autofocus = true;\n\n\t\tqueue_micro_task(() => {\n\t\t\tif (document.activeElement === body) {\n\t\t\t\tdom.focus();\n\t\t\t}\n\t\t});\n\t}\n}\n\n/**\n * The child of a textarea actually corresponds to the defaultValue property, so we need\n * to remove it upon hydration to avoid a bug when someone resets the form value.\n * @param {HTMLTextAreaElement} dom\n * @returns {void}\n */\nexport function remove_textarea_child(dom) {\n\tif (hydrating && get_first_child(dom) !== null) {\n\t\tclear_text_content(dom);\n\t}\n}\n\nlet listening_to_form_reset = false;\n\nexport function add_form_reset_listener() {\n\tif (!listening_to_form_reset) {\n\t\tlistening_to_form_reset = true;\n\t\tdocument.addEventListener(\n\t\t\t'reset',\n\t\t\t(evt) => {\n\t\t\t\t// Needs to happen one tick later or else the dom properties of the form\n\t\t\t\t// elements have not updated to their reset values yet\n\t\t\t\tPromise.resolve().then(() => {\n\t\t\t\t\tif (!evt.defaultPrevented) {\n\t\t\t\t\t\tfor (const e of /**@type {HTMLFormElement} */ (evt.target).elements) {\n\t\t\t\t\t\t\t// @ts-expect-error\n\t\t\t\t\t\t\te.__on_r?.();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t// In the capture phase to guarantee we get noticed of it (no possibility of stopPropagation)\n\t\t\t{ capture: true }\n\t\t);\n\t}\n}\n","import { teardown } from '../../../reactivity/effects.js';\nimport {\n\tactive_effect,\n\tactive_reaction,\n\tset_active_effect,\n\tset_active_reaction\n} from '../../../runtime.js';\nimport { add_form_reset_listener } from '../misc.js';\n\n/**\n * Fires the handler once immediately (unless corresponding arg is set to `false`),\n * then listens to the given events until the render effect context is destroyed\n * @param {EventTarget} target\n * @param {Array<string>} events\n * @param {(event?: Event) => void} handler\n * @param {any} call_handler_immediately\n */\nexport function listen(target, events, handler, call_handler_immediately = true) {\n\tif (call_handler_immediately) {\n\t\thandler();\n\t}\n\n\tfor (var name of events) {\n\t\ttarget.addEventListener(name, handler);\n\t}\n\n\tteardown(() => {\n\t\tfor (var name of events) {\n\t\t\ttarget.removeEventListener(name, handler);\n\t\t}\n\t});\n}\n\n/**\n * @template T\n * @param {() => T} fn\n */\nexport function without_reactive_context(fn) {\n\tvar previous_reaction = active_reaction;\n\tvar previous_effect = active_effect;\n\tset_active_reaction(null);\n\tset_active_effect(null);\n\ttry {\n\t\treturn fn();\n\t} finally {\n\t\tset_active_reaction(previous_reaction);\n\t\tset_active_effect(previous_effect);\n\t}\n}\n\n/**\n * Listen to the given event, and then instantiate a global form reset listener if not already done,\n * to notify all bindings when the form is reset\n * @param {HTMLElement} element\n * @param {string} event\n * @param {(is_reset?: true) => void} handler\n * @param {(is_reset?: true) => void} [on_reset]\n */\nexport function listen_to_event_and_reset_event(element, event, handler, on_reset = handler) {\n\telement.addEventListener(event, () => without_reactive_context(handler));\n\t// @ts-expect-error\n\tconst prev = element.__on_r;\n\tif (prev) {\n\t\t// special case for checkbox that can have multiple binds (group & checked)\n\t\t// @ts-expect-error\n\t\telement.__on_r = () => {\n\t\t\tprev();\n\t\t\ton_reset(true);\n\t\t};\n\t} else {\n\t\t// @ts-expect-error\n\t\telement.__on_r = () => on_reset(true);\n\t}\n\n\tadd_form_reset_listener();\n}\n","/** @import { Blocker, ComponentContext, ComponentContextLegacy, Derived, Effect, TemplateNode, TransitionManager } from '#client' */\nimport {\n\tis_dirty,\n\tactive_effect,\n\tactive_reaction,\n\tupdate_effect,\n\tget,\n\tis_destroying_effect,\n\tremove_reactions,\n\tset_active_reaction,\n\tset_is_destroying_effect,\n\tuntrack,\n\tuntracking\n} from '../runtime.js';\nimport {\n\tDIRTY,\n\tBRANCH_EFFECT,\n\tRENDER_EFFECT,\n\tEFFECT,\n\tDESTROYED,\n\tINERT,\n\tEFFECT_RAN,\n\tBLOCK_EFFECT,\n\tROOT_EFFECT,\n\tEFFECT_TRANSPARENT,\n\tDERIVED,\n\tCLEAN,\n\tEAGER_EFFECT,\n\tHEAD_EFFECT,\n\tMAYBE_DIRTY,\n\tEFFECT_PRESERVED,\n\tSTALE_REACTION,\n\tUSER_EFFECT,\n\tASYNC,\n\tCONNECTED,\n\tMANAGED_EFFECT\n} from '#client/constants';\nimport * as e from '../errors.js';\nimport { DEV } from 'esm-env';\nimport { define_property } from '../../shared/utils.js';\nimport { get_next_sibling } from '../dom/operations.js';\nimport { component_context, dev_current_component_function, dev_stack } from '../context.js';\nimport { Batch, current_batch, schedule_effect } from './batch.js';\nimport { flatten } from './async.js';\nimport { without_reactive_context } from '../dom/elements/bindings/shared.js';\nimport { set_signal_status } from './status.js';\n\n/**\n * @param {'$effect' | '$effect.pre' | '$inspect'} rune\n */\nexport function validate_effect(rune) {\n\tif (active_effect === null) {\n\t\tif (active_reaction === null) {\n\t\t\te.effect_orphan(rune);\n\t\t}\n\n\t\te.effect_in_unowned_derived();\n\t}\n\n\tif (is_destroying_effect) {\n\t\te.effect_in_teardown(rune);\n\t}\n}\n\n/**\n * @param {Effect} effect\n * @param {Effect} parent_effect\n */\nfunction push_effect(effect, parent_effect) {\n\tvar parent_last = parent_effect.last;\n\tif (parent_last === null) {\n\t\tparent_effect.last = parent_effect.first = effect;\n\t} else {\n\t\tparent_last.next = effect;\n\t\teffect.prev = parent_last;\n\t\tparent_effect.last = effect;\n\t}\n}\n\n/**\n * @param {number} type\n * @param {null | (() => void | (() => void))} fn\n * @param {boolean} sync\n * @returns {Effect}\n */\nfunction create_effect(type, fn, sync) {\n\tvar parent = active_effect;\n\n\tif (DEV) {\n\t\t// Ensure the parent is never an inspect effect\n\t\twhile (parent !== null && (parent.f & EAGER_EFFECT) !== 0) {\n\t\t\tparent = parent.parent;\n\t\t}\n\t}\n\n\tif (parent !== null && (parent.f & INERT) !== 0) {\n\t\ttype |= INERT;\n\t}\n\n\t/** @type {Effect} */\n\tvar effect = {\n\t\tctx: component_context,\n\t\tdeps: null,\n\t\tnodes: null,\n\t\tf: type | DIRTY | CONNECTED,\n\t\tfirst: null,\n\t\tfn,\n\t\tlast: null,\n\t\tnext: null,\n\t\tparent,\n\t\tb: parent && parent.b,\n\t\tprev: null,\n\t\tteardown: null,\n\t\twv: 0,\n\t\tac: null\n\t};\n\n\tif (DEV) {\n\t\teffect.component_function = dev_current_component_function;\n\t}\n\n\tif (sync) {\n\t\ttry {\n\t\t\tupdate_effect(effect);\n\t\t\teffect.f |= EFFECT_RAN;\n\t\t} catch (e) {\n\t\t\tdestroy_effect(effect);\n\t\t\tthrow e;\n\t\t}\n\t} else if (fn !== null) {\n\t\tschedule_effect(effect);\n\t}\n\n\t/** @type {Effect | null} */\n\tvar e = effect;\n\n\t// if an effect has already ran and doesn't need to be kept in the tree\n\t// (because it won't re-run, has no DOM, and has no teardown etc)\n\t// then we skip it and go to its child (if any)\n\tif (\n\t\tsync &&\n\t\te.deps === null &&\n\t\te.teardown === null &&\n\t\te.nodes === null &&\n\t\te.first === e.last && // either `null`, or a singular child\n\t\t(e.f & EFFECT_PRESERVED) === 0\n\t) {\n\t\te = e.first;\n\t\tif ((type & BLOCK_EFFECT) !== 0 && (type & EFFECT_TRANSPARENT) !== 0 && e !== null) {\n\t\t\te.f |= EFFECT_TRANSPARENT;\n\t\t}\n\t}\n\n\tif (e !== null) {\n\t\te.parent = parent;\n\n\t\tif (parent !== null) {\n\t\t\tpush_effect(e, parent);\n\t\t}\n\n\t\t// if we're in a derived, add the effect there too\n\t\tif (\n\t\t\tactive_reaction !== null &&\n\t\t\t(active_reaction.f & DERIVED) !== 0 &&\n\t\t\t(type & ROOT_EFFECT) === 0\n\t\t) {\n\t\t\tvar derived = /** @type {Derived} */ (active_reaction);\n\t\t\t(derived.effects ??= []).push(e);\n\t\t}\n\t}\n\n\treturn effect;\n}\n\n/**\n * Internal representation of `$effect.tracking()`\n * @returns {boolean}\n */\nexport function effect_tracking() {\n\treturn active_reaction !== null && !untracking;\n}\n\n/**\n * @param {() => void} fn\n */\nexport function teardown(fn) {\n\tconst effect = create_effect(RENDER_EFFECT, null, false);\n\tset_signal_status(effect, CLEAN);\n\teffect.teardown = fn;\n\treturn effect;\n}\n\n/**\n * Internal representation of `$effect(...)`\n * @param {() => void | (() => void)} fn\n */\nexport function user_effect(fn) {\n\tvalidate_effect('$effect');\n\n\tif (DEV) {\n\t\tdefine_property(fn, 'name', {\n\t\t\tvalue: '$effect'\n\t\t});\n\t}\n\n\t// Non-nested `$effect(...)` in a component should be deferred\n\t// until the component is mounted\n\tvar flags = /** @type {Effect} */ (active_effect).f;\n\tvar defer = !active_reaction && (flags & BRANCH_EFFECT) !== 0 && (flags & EFFECT_RAN) === 0;\n\n\tif (defer) {\n\t\t// Top-level `$effect(...)` in an unmounted component â€” defer until mount\n\t\tvar context = /** @type {ComponentContext} */ (component_context);\n\t\t(context.e ??= []).push(fn);\n\t} else {\n\t\t// Everything else â€” create immediately\n\t\treturn create_user_effect(fn);\n\t}\n}\n\n/**\n * @param {() => void | (() => void)} fn\n */\nexport function create_user_effect(fn) {\n\treturn create_effect(EFFECT | USER_EFFECT, fn, false);\n}\n\n/**\n * Internal representation of `$effect.pre(...)`\n * @param {() => void | (() => void)} fn\n * @returns {Effect}\n */\nexport function user_pre_effect(fn) {\n\tvalidate_effect('$effect.pre');\n\tif (DEV) {\n\t\tdefine_property(fn, 'name', {\n\t\t\tvalue: '$effect.pre'\n\t\t});\n\t}\n\treturn create_effect(RENDER_EFFECT | USER_EFFECT, fn, true);\n}\n\n/** @param {() => void | (() => void)} fn */\nexport function eager_effect(fn) {\n\treturn create_effect(EAGER_EFFECT, fn, true);\n}\n\n/**\n * Internal representation of `$effect.root(...)`\n * @param {() => void | (() => void)} fn\n * @returns {() => void}\n */\nexport function effect_root(fn) {\n\tBatch.ensure();\n\tconst effect = create_effect(ROOT_EFFECT | EFFECT_PRESERVED, fn, true);\n\n\treturn () => {\n\t\tdestroy_effect(effect);\n\t};\n}\n\n/**\n * An effect root whose children can transition out\n * @param {() => void} fn\n * @returns {(options?: { outro?: boolean }) => Promise<void>}\n */\nexport function component_root(fn) {\n\tBatch.ensure();\n\tconst effect = create_effect(ROOT_EFFECT | EFFECT_PRESERVED, fn, true);\n\n\treturn (options = {}) => {\n\t\treturn new Promise((fulfil) => {\n\t\t\tif (options.outro) {\n\t\t\t\tpause_effect(effect, () => {\n\t\t\t\t\tdestroy_effect(effect);\n\t\t\t\t\tfulfil(undefined);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tdestroy_effect(effect);\n\t\t\t\tfulfil(undefined);\n\t\t\t}\n\t\t});\n\t};\n}\n\n/**\n * @param {() => void | (() => void)} fn\n * @returns {Effect}\n */\nexport function effect(fn) {\n\treturn create_effect(EFFECT, fn, false);\n}\n\n/**\n * Internal representation of `$: ..`\n * @param {() => any} deps\n * @param {() => void | (() => void)} fn\n */\nexport function legacy_pre_effect(deps, fn) {\n\tvar context = /** @type {ComponentContextLegacy} */ (component_context);\n\n\t/** @type {{ effect: null | Effect, ran: boolean, deps: () => any }} */\n\tvar token = { effect: null, ran: false, deps };\n\n\tcontext.l.$.push(token);\n\n\ttoken.effect = render_effect(() => {\n\t\tdeps();\n\n\t\t// If this legacy pre effect has already run before the end of the reset, then\n\t\t// bail out to emulate the same behavior.\n\t\tif (token.ran) return;\n\n\t\ttoken.ran = true;\n\t\tuntrack(fn);\n\t});\n}\n\nexport function legacy_pre_effect_reset() {\n\tvar context = /** @type {ComponentContextLegacy} */ (component_context);\n\n\trender_effect(() => {\n\t\t// Run dirty `$:` statements\n\t\tfor (var token of context.l.$) {\n\t\t\ttoken.deps();\n\n\t\t\tvar effect = token.effect;\n\n\t\t\t// If the effect is CLEAN, then make it MAYBE_DIRTY. This ensures we traverse through\n\t\t\t// the effects dependencies and correctly ensure each dependency is up-to-date.\n\t\t\tif ((effect.f & CLEAN) !== 0 && effect.deps !== null) {\n\t\t\t\tset_signal_status(effect, MAYBE_DIRTY);\n\t\t\t}\n\n\t\t\tif (is_dirty(effect)) {\n\t\t\t\tupdate_effect(effect);\n\t\t\t}\n\n\t\t\ttoken.ran = false;\n\t\t}\n\t});\n}\n\n/**\n * @param {() => void | (() => void)} fn\n * @returns {Effect}\n */\nexport function async_effect(fn) {\n\treturn create_effect(ASYNC | EFFECT_PRESERVED, fn, true);\n}\n\n/**\n * @param {() => void | (() => void)} fn\n * @returns {Effect}\n */\nexport function render_effect(fn, flags = 0) {\n\treturn create_effect(RENDER_EFFECT | flags, fn, true);\n}\n\n/**\n * @param {(...expressions: any) => void | (() => void)} fn\n * @param {Array<() => any>} sync\n * @param {Array<() => Promise<any>>} async\n * @param {Blocker[]} blockers\n */\nexport function template_effect(fn, sync = [], async = [], blockers = []) {\n\tflatten(blockers, sync, async, (values) => {\n\t\tcreate_effect(RENDER_EFFECT, () => fn(...values.map(get)), true);\n\t});\n}\n\n/**\n * Like `template_effect`, but with an effect which is deferred until the batch commits\n * @param {(...expressions: any) => void | (() => void)} fn\n * @param {Array<() => any>} sync\n * @param {Array<() => Promise<any>>} async\n * @param {Blocker[]} blockers\n */\nexport function deferred_template_effect(fn, sync = [], async = [], blockers = []) {\n\tvar batch = /** @type {Batch} */ (current_batch);\n\tvar is_async = async.length > 0 || blockers.length > 0;\n\n\tif (is_async) batch.increment(true);\n\n\tflatten(blockers, sync, async, (values) => {\n\t\tcreate_effect(EFFECT, () => fn(...values.map(get)), false);\n\t\tif (is_async) batch.decrement(true);\n\t});\n}\n\n/**\n * @param {(() => void)} fn\n * @param {number} flags\n */\nexport function block(fn, flags = 0) {\n\tvar effect = create_effect(BLOCK_EFFECT | flags, fn, true);\n\tif (DEV) {\n\t\teffect.dev_stack = dev_stack;\n\t}\n\treturn effect;\n}\n\n/**\n * @param {(() => void)} fn\n * @param {number} flags\n */\nexport function managed(fn, flags = 0) {\n\tvar effect = create_effect(MANAGED_EFFECT | flags, fn, true);\n\tif (DEV) {\n\t\teffect.dev_stack = dev_stack;\n\t}\n\treturn effect;\n}\n\n/**\n * @param {(() => void)} fn\n */\nexport function branch(fn) {\n\treturn create_effect(BRANCH_EFFECT | EFFECT_PRESERVED, fn, true);\n}\n\n/**\n * @param {Effect} effect\n */\nexport function execute_effect_teardown(effect) {\n\tvar teardown = effect.teardown;\n\tif (teardown !== null) {\n\t\tconst previously_destroying_effect = is_destroying_effect;\n\t\tconst previous_reaction = active_reaction;\n\t\tset_is_destroying_effect(true);\n\t\tset_active_reaction(null);\n\t\ttry {\n\t\t\tteardown.call(null);\n\t\t} finally {\n\t\t\tset_is_destroying_effect(previously_destroying_effect);\n\t\t\tset_active_reaction(previous_reaction);\n\t\t}\n\t}\n}\n\n/**\n * @param {Effect} signal\n * @param {boolean} remove_dom\n * @returns {void}\n */\nexport function destroy_effect_children(signal, remove_dom = false) {\n\tvar effect = signal.first;\n\tsignal.first = signal.last = null;\n\n\twhile (effect !== null) {\n\t\tconst controller = effect.ac;\n\n\t\tif (controller !== null) {\n\t\t\twithout_reactive_context(() => {\n\t\t\t\tcontroller.abort(STALE_REACTION);\n\t\t\t});\n\t\t}\n\n\t\tvar next = effect.next;\n\n\t\tif ((effect.f & ROOT_EFFECT) !== 0) {\n\t\t\t// this is now an independent root\n\t\t\teffect.parent = null;\n\t\t} else {\n\t\t\tdestroy_effect(effect, remove_dom);\n\t\t}\n\n\t\teffect = next;\n\t}\n}\n\n/**\n * @param {Effect} signal\n * @returns {void}\n */\nexport function destroy_block_effect_children(signal) {\n\tvar effect = signal.first;\n\n\twhile (effect !== null) {\n\t\tvar next = effect.next;\n\t\tif ((effect.f & BRANCH_EFFECT) === 0) {\n\t\t\tdestroy_effect(effect);\n\t\t}\n\t\teffect = next;\n\t}\n}\n\n/**\n * @param {Effect} effect\n * @param {boolean} [remove_dom]\n * @returns {void}\n */\nexport function destroy_effect(effect, remove_dom = true) {\n\tvar removed = false;\n\n\tif (\n\t\t(remove_dom || (effect.f & HEAD_EFFECT) !== 0) &&\n\t\teffect.nodes !== null &&\n\t\teffect.nodes.end !== null\n\t) {\n\t\tremove_effect_dom(effect.nodes.start, /** @type {TemplateNode} */ (effect.nodes.end));\n\t\tremoved = true;\n\t}\n\n\tdestroy_effect_children(effect, remove_dom && !removed);\n\tremove_reactions(effect, 0);\n\tset_signal_status(effect, DESTROYED);\n\n\tvar transitions = effect.nodes && effect.nodes.t;\n\n\tif (transitions !== null) {\n\t\tfor (const transition of transitions) {\n\t\t\ttransition.stop();\n\t\t}\n\t}\n\n\texecute_effect_teardown(effect);\n\n\tvar parent = effect.parent;\n\n\t// If the parent doesn't have any children, then skip this work altogether\n\tif (parent !== null && parent.first !== null) {\n\t\tunlink_effect(effect);\n\t}\n\n\tif (DEV) {\n\t\teffect.component_function = null;\n\t}\n\n\t// `first` and `child` are nulled out in destroy_effect_children\n\t// we don't null out `parent` so that error propagation can work correctly\n\teffect.next =\n\t\teffect.prev =\n\t\teffect.teardown =\n\t\teffect.ctx =\n\t\teffect.deps =\n\t\teffect.fn =\n\t\teffect.nodes =\n\t\teffect.ac =\n\t\t\tnull;\n}\n\n/**\n *\n * @param {TemplateNode | null} node\n * @param {TemplateNode} end\n */\nexport function remove_effect_dom(node, end) {\n\twhile (node !== null) {\n\t\t/** @type {TemplateNode | null} */\n\t\tvar next = node === end ? null : get_next_sibling(node);\n\n\t\tnode.remove();\n\t\tnode = next;\n\t}\n}\n\n/**\n * Detach an effect from the effect tree, freeing up memory and\n * reducing the amount of work that happens on subsequent traversals\n * @param {Effect} effect\n */\nexport function unlink_effect(effect) {\n\tvar parent = effect.parent;\n\tvar prev = effect.prev;\n\tvar next = effect.next;\n\n\tif (prev !== null) prev.next = next;\n\tif (next !== null) next.prev = prev;\n\n\tif (parent !== null) {\n\t\tif (parent.first === effect) parent.first = next;\n\t\tif (parent.last === effect) parent.last = prev;\n\t}\n}\n\n/**\n * When a block effect is removed, we don't immediately destroy it or yank it\n * out of the DOM, because it might have transitions. Instead, we 'pause' it.\n * It stays around (in memory, and in the DOM) until outro transitions have\n * completed, and if the state change is reversed then we _resume_ it.\n * A paused effect does not update, and the DOM subtree becomes inert.\n * @param {Effect} effect\n * @param {() => void} [callback]\n * @param {boolean} [destroy]\n */\nexport function pause_effect(effect, callback, destroy = true) {\n\t/** @type {TransitionManager[]} */\n\tvar transitions = [];\n\n\tpause_children(effect, transitions, true);\n\n\tvar fn = () => {\n\t\tif (destroy) destroy_effect(effect);\n\t\tif (callback) callback();\n\t};\n\n\tvar remaining = transitions.length;\n\tif (remaining > 0) {\n\t\tvar check = () => --remaining || fn();\n\t\tfor (var transition of transitions) {\n\t\t\ttransition.out(check);\n\t\t}\n\t} else {\n\t\tfn();\n\t}\n}\n\n/**\n * @param {Effect} effect\n * @param {TransitionManager[]} transitions\n * @param {boolean} local\n */\nfunction pause_children(effect, transitions, local) {\n\tif ((effect.f & INERT) !== 0) return;\n\teffect.f ^= INERT;\n\n\tvar t = effect.nodes && effect.nodes.t;\n\n\tif (t !== null) {\n\t\tfor (const transition of t) {\n\t\t\tif (transition.is_global || local) {\n\t\t\t\ttransitions.push(transition);\n\t\t\t}\n\t\t}\n\t}\n\n\tvar child = effect.first;\n\n\twhile (child !== null) {\n\t\tvar sibling = child.next;\n\t\tvar transparent =\n\t\t\t(child.f & EFFECT_TRANSPARENT) !== 0 ||\n\t\t\t// If this is a branch effect without a block effect parent,\n\t\t\t// it means the parent block effect was pruned. In that case,\n\t\t\t// transparency information was transferred to the branch effect.\n\t\t\t((child.f & BRANCH_EFFECT) !== 0 && (effect.f & BLOCK_EFFECT) !== 0);\n\t\t// TODO we don't need to call pause_children recursively with a linked list in place\n\t\t// it's slightly more involved though as we have to account for `transparent` changing\n\t\t// through the tree.\n\t\tpause_children(child, transitions, transparent ? local : false);\n\t\tchild = sibling;\n\t}\n}\n\n/**\n * The opposite of `pause_effect`. We call this if (for example)\n * `x` becomes falsy then truthy: `{#if x}...{/if}`\n * @param {Effect} effect\n */\nexport function resume_effect(effect) {\n\tresume_children(effect, true);\n}\n\n/**\n * @param {Effect} effect\n * @param {boolean} local\n */\nfunction resume_children(effect, local) {\n\tif ((effect.f & INERT) === 0) return;\n\teffect.f ^= INERT;\n\n\t// If a dependency of this effect changed while it was paused,\n\t// schedule the effect to update. we don't use `is_dirty`\n\t// here because we don't want to eagerly recompute a derived like\n\t// `{#if foo}{foo.bar()}{/if}` if `foo` is now `undefined\n\tif ((effect.f & CLEAN) === 0) {\n\t\tset_signal_status(effect, DIRTY);\n\t\tschedule_effect(effect);\n\t}\n\n\tvar child = effect.first;\n\n\twhile (child !== null) {\n\t\tvar sibling = child.next;\n\t\tvar transparent = (child.f & EFFECT_TRANSPARENT) !== 0 || (child.f & BRANCH_EFFECT) !== 0;\n\t\t// TODO we don't need to call resume_children recursively with a linked list in place\n\t\t// it's slightly more involved though as we have to account for `transparent` changing\n\t\t// through the tree.\n\t\tresume_children(child, transparent ? local : false);\n\t\tchild = sibling;\n\t}\n\n\tvar t = effect.nodes && effect.nodes.t;\n\n\tif (t !== null) {\n\t\tfor (const transition of t) {\n\t\t\tif (transition.is_global || local) {\n\t\t\t\ttransition.in();\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function aborted(effect = /** @type {Effect} */ (active_effect)) {\n\treturn (effect.f & DESTROYED) !== 0;\n}\n\n/**\n * @param {Effect} effect\n * @param {DocumentFragment} fragment\n */\nexport function move_effect(effect, fragment) {\n\tif (!effect.nodes) return;\n\n\t/** @type {TemplateNode | null} */\n\tvar node = effect.nodes.start;\n\tvar end = effect.nodes.end;\n\n\twhile (node !== null) {\n\t\t/** @type {TemplateNode | null} */\n\t\tvar next = node === end ? null : get_next_sibling(node);\n\n\t\tfragment.append(node);\n\t\tnode = next;\n\t}\n}\n","/** @import { Derived, Effect, Reaction, Source, Value } from '#client' */\nimport { DEV } from 'esm-env';\nimport { get_descriptors, get_prototype_of, includes, index_of } from '../shared/utils.js';\nimport {\n\tdestroy_block_effect_children,\n\tdestroy_effect_children,\n\teffect_tracking,\n\texecute_effect_teardown\n} from './reactivity/effects.js';\nimport {\n\tDIRTY,\n\tMAYBE_DIRTY,\n\tCLEAN,\n\tDERIVED,\n\tDESTROYED,\n\tBRANCH_EFFECT,\n\tSTATE_SYMBOL,\n\tBLOCK_EFFECT,\n\tROOT_EFFECT,\n\tCONNECTED,\n\tREACTION_IS_UPDATING,\n\tSTALE_REACTION,\n\tERROR_VALUE,\n\tWAS_MARKED,\n\tMANAGED_EFFECT\n} from './constants.js';\nimport { old_values } from './reactivity/sources.js';\nimport {\n\tdestroy_derived_effects,\n\texecute_derived,\n\trecent_async_deriveds,\n\tupdate_derived\n} from './reactivity/deriveds.js';\nimport { async_mode_flag, tracing_mode_flag } from '../flags/index.js';\nimport { tracing_expressions } from './dev/tracing.js';\nimport { get_error } from '../shared/dev.js';\nimport {\n\tcomponent_context,\n\tdev_current_component_function,\n\tdev_stack,\n\tis_runes,\n\tset_component_context,\n\tset_dev_current_component_function,\n\tset_dev_stack\n} from './context.js';\nimport {\n\tBatch,\n\tbatch_values,\n\tcurrent_batch,\n\tflushSync,\n\tschedule_effect\n} from './reactivity/batch.js';\nimport { handle_error } from './error-handling.js';\nimport { UNINITIALIZED } from '../../constants.js';\nimport { captured_signals } from './legacy.js';\nimport { without_reactive_context } from './dom/elements/bindings/shared.js';\nimport { set_signal_status, update_derived_status } from './reactivity/status.js';\n\nlet is_updating_effect = false;\n\nexport let is_destroying_effect = false;\n\n/** @param {boolean} value */\nexport function set_is_destroying_effect(value) {\n\tis_destroying_effect = value;\n}\n\n/** @type {null | Reaction} */\nexport let active_reaction = null;\n\nexport let untracking = false;\n\n/** @param {null | Reaction} reaction */\nexport function set_active_reaction(reaction) {\n\tactive_reaction = reaction;\n}\n\n/** @type {null | Effect} */\nexport let active_effect = null;\n\n/** @param {null | Effect} effect */\nexport function set_active_effect(effect) {\n\tactive_effect = effect;\n}\n\n/**\n * When sources are created within a reaction, reading and writing\n * them within that reaction should not cause a re-run\n * @type {null | Source[]}\n */\nexport let current_sources = null;\n\n/** @param {Value} value */\nexport function push_reaction_value(value) {\n\tif (active_reaction !== null && (!async_mode_flag || (active_reaction.f & DERIVED) !== 0)) {\n\t\tif (current_sources === null) {\n\t\t\tcurrent_sources = [value];\n\t\t} else {\n\t\t\tcurrent_sources.push(value);\n\t\t}\n\t}\n}\n\n/**\n * The dependencies of the reaction that is currently being executed. In many cases,\n * the dependencies are unchanged between runs, and so this will be `null` unless\n * and until a new dependency is accessed â€” we track this via `skipped_deps`\n * @type {null | Value[]}\n */\nlet new_deps = null;\n\nlet skipped_deps = 0;\n\n/**\n * Tracks writes that the effect it's executed in doesn't listen to yet,\n * so that the dependency can be added to the effect later on if it then reads it\n * @type {null | Source[]}\n */\nexport let untracked_writes = null;\n\n/** @param {null | Source[]} value */\nexport function set_untracked_writes(value) {\n\tuntracked_writes = value;\n}\n\n/**\n * @type {number} Used by sources and deriveds for handling updates.\n * Version starts from 1 so that unowned deriveds differentiate between a created effect and a run one for tracing\n **/\nexport let write_version = 1;\n\n/** @type {number} Used to version each read of a source of derived to avoid duplicating depedencies inside a reaction */\nlet read_version = 0;\n\nexport let update_version = read_version;\n\n/** @param {number} value */\nexport function set_update_version(value) {\n\tupdate_version = value;\n}\n\nexport function increment_write_version() {\n\treturn ++write_version;\n}\n\n/**\n * Determines whether a derived or effect is dirty.\n * If it is MAYBE_DIRTY, will set the status to CLEAN\n * @param {Reaction} reaction\n * @returns {boolean}\n */\nexport function is_dirty(reaction) {\n\tvar flags = reaction.f;\n\n\tif ((flags & DIRTY) !== 0) {\n\t\treturn true;\n\t}\n\n\tif (flags & DERIVED) {\n\t\treaction.f &= ~WAS_MARKED;\n\t}\n\n\tif ((flags & MAYBE_DIRTY) !== 0) {\n\t\tvar dependencies = /** @type {Value[]} */ (reaction.deps);\n\t\tvar length = dependencies.length;\n\n\t\tfor (var i = 0; i < length; i++) {\n\t\t\tvar dependency = dependencies[i];\n\n\t\t\tif (is_dirty(/** @type {Derived} */ (dependency))) {\n\t\t\t\tupdate_derived(/** @type {Derived} */ (dependency));\n\t\t\t}\n\n\t\t\tif (dependency.wv > reaction.wv) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tif (\n\t\t\t(flags & CONNECTED) !== 0 &&\n\t\t\t// During time traveling we don't want to reset the status so that\n\t\t\t// traversal of the graph in the other batches still happens\n\t\t\tbatch_values === null\n\t\t) {\n\t\t\tset_signal_status(reaction, CLEAN);\n\t\t}\n\t}\n\n\treturn false;\n}\n\n/**\n * @param {Value} signal\n * @param {Effect} effect\n * @param {boolean} [root]\n */\nfunction schedule_possible_effect_self_invalidation(signal, effect, root = true) {\n\tvar reactions = signal.reactions;\n\tif (reactions === null) return;\n\n\tif (!async_mode_flag && current_sources !== null && includes.call(current_sources, signal)) {\n\t\treturn;\n\t}\n\n\tfor (var i = 0; i < reactions.length; i++) {\n\t\tvar reaction = reactions[i];\n\n\t\tif ((reaction.f & DERIVED) !== 0) {\n\t\t\tschedule_possible_effect_self_invalidation(/** @type {Derived} */ (reaction), effect, false);\n\t\t} else if (effect === reaction) {\n\t\t\tif (root) {\n\t\t\t\tset_signal_status(reaction, DIRTY);\n\t\t\t} else if ((reaction.f & CLEAN) !== 0) {\n\t\t\t\tset_signal_status(reaction, MAYBE_DIRTY);\n\t\t\t}\n\t\t\tschedule_effect(/** @type {Effect} */ (reaction));\n\t\t}\n\t}\n}\n\n/** @param {Reaction} reaction */\nexport function update_reaction(reaction) {\n\tvar previous_deps = new_deps;\n\tvar previous_skipped_deps = skipped_deps;\n\tvar previous_untracked_writes = untracked_writes;\n\tvar previous_reaction = active_reaction;\n\tvar previous_sources = current_sources;\n\tvar previous_component_context = component_context;\n\tvar previous_untracking = untracking;\n\tvar previous_update_version = update_version;\n\n\tvar flags = reaction.f;\n\n\tnew_deps = /** @type {null | Value[]} */ (null);\n\tskipped_deps = 0;\n\tuntracked_writes = null;\n\tactive_reaction = (flags & (BRANCH_EFFECT | ROOT_EFFECT)) === 0 ? reaction : null;\n\n\tcurrent_sources = null;\n\tset_component_context(reaction.ctx);\n\tuntracking = false;\n\tupdate_version = ++read_version;\n\n\tif (reaction.ac !== null) {\n\t\twithout_reactive_context(() => {\n\t\t\t/** @type {AbortController} */ (reaction.ac).abort(STALE_REACTION);\n\t\t});\n\n\t\treaction.ac = null;\n\t}\n\n\ttry {\n\t\treaction.f |= REACTION_IS_UPDATING;\n\t\tvar fn = /** @type {Function} */ (reaction.fn);\n\t\tvar result = fn();\n\t\tvar deps = reaction.deps;\n\n\t\t// Don't remove reactions during fork;\n\t\t// they must remain for when fork is discarded\n\t\tvar is_fork = current_batch?.is_fork;\n\n\t\tif (new_deps !== null) {\n\t\t\tvar i;\n\n\t\t\tif (!is_fork) {\n\t\t\t\tremove_reactions(reaction, skipped_deps);\n\t\t\t}\n\n\t\t\tif (deps !== null && skipped_deps > 0) {\n\t\t\t\tdeps.length = skipped_deps + new_deps.length;\n\t\t\t\tfor (i = 0; i < new_deps.length; i++) {\n\t\t\t\t\tdeps[skipped_deps + i] = new_deps[i];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treaction.deps = deps = new_deps;\n\t\t\t}\n\n\t\t\tif (effect_tracking() && (reaction.f & CONNECTED) !== 0) {\n\t\t\t\tfor (i = skipped_deps; i < deps.length; i++) {\n\t\t\t\t\t(deps[i].reactions ??= []).push(reaction);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (!is_fork && deps !== null && skipped_deps < deps.length) {\n\t\t\tremove_reactions(reaction, skipped_deps);\n\t\t\tdeps.length = skipped_deps;\n\t\t}\n\n\t\t// If we're inside an effect and we have untracked writes, then we need to\n\t\t// ensure that if any of those untracked writes result in re-invalidation\n\t\t// of the current effect, then that happens accordingly\n\t\tif (\n\t\t\tis_runes() &&\n\t\t\tuntracked_writes !== null &&\n\t\t\t!untracking &&\n\t\t\tdeps !== null &&\n\t\t\t(reaction.f & (DERIVED | MAYBE_DIRTY | DIRTY)) === 0\n\t\t) {\n\t\t\tfor (i = 0; i < /** @type {Source[]} */ (untracked_writes).length; i++) {\n\t\t\t\tschedule_possible_effect_self_invalidation(\n\t\t\t\t\tuntracked_writes[i],\n\t\t\t\t\t/** @type {Effect} */ (reaction)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\t// If we are returning to an previous reaction then\n\t\t// we need to increment the read version to ensure that\n\t\t// any dependencies in this reaction aren't marked with\n\t\t// the same version\n\t\tif (previous_reaction !== null && previous_reaction !== reaction) {\n\t\t\tread_version++;\n\n\t\t\t// update the `rv` of the previous reaction's deps â€” both existing and new â€”\n\t\t\t// so that they are not added again\n\t\t\tif (previous_reaction.deps !== null) {\n\t\t\t\tfor (let i = 0; i < previous_skipped_deps; i += 1) {\n\t\t\t\t\tprevious_reaction.deps[i].rv = read_version;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (previous_deps !== null) {\n\t\t\t\tfor (const dep of previous_deps) {\n\t\t\t\t\tdep.rv = read_version;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (untracked_writes !== null) {\n\t\t\t\tif (previous_untracked_writes === null) {\n\t\t\t\t\tprevious_untracked_writes = untracked_writes;\n\t\t\t\t} else {\n\t\t\t\t\tprevious_untracked_writes.push(.../** @type {Source[]} */ (untracked_writes));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ((reaction.f & ERROR_VALUE) !== 0) {\n\t\t\treaction.f ^= ERROR_VALUE;\n\t\t}\n\n\t\treturn result;\n\t} catch (error) {\n\t\treturn handle_error(error);\n\t} finally {\n\t\treaction.f ^= REACTION_IS_UPDATING;\n\t\tnew_deps = previous_deps;\n\t\tskipped_deps = previous_skipped_deps;\n\t\tuntracked_writes = previous_untracked_writes;\n\t\tactive_reaction = previous_reaction;\n\t\tcurrent_sources = previous_sources;\n\t\tset_component_context(previous_component_context);\n\t\tuntracking = previous_untracking;\n\t\tupdate_version = previous_update_version;\n\t}\n}\n\n/**\n * @template V\n * @param {Reaction} signal\n * @param {Value<V>} dependency\n * @returns {void}\n */\nfunction remove_reaction(signal, dependency) {\n\tlet reactions = dependency.reactions;\n\tif (reactions !== null) {\n\t\tvar index = index_of.call(reactions, signal);\n\t\tif (index !== -1) {\n\t\t\tvar new_length = reactions.length - 1;\n\t\t\tif (new_length === 0) {\n\t\t\t\treactions = dependency.reactions = null;\n\t\t\t} else {\n\t\t\t\t// Swap with last element and then remove.\n\t\t\t\treactions[index] = reactions[new_length];\n\t\t\t\treactions.pop();\n\t\t\t}\n\t\t}\n\t}\n\n\t// If the derived has no reactions, then we can disconnect it from the graph,\n\t// allowing it to either reconnect in the future, or be GC'd by the VM.\n\tif (\n\t\treactions === null &&\n\t\t(dependency.f & DERIVED) !== 0 &&\n\t\t// Destroying a child effect while updating a parent effect can cause a dependency to appear\n\t\t// to be unused, when in fact it is used by the currently-updating parent. Checking `new_deps`\n\t\t// allows us to skip the expensive work of disconnecting and immediately reconnecting it\n\t\t(new_deps === null || !includes.call(new_deps, dependency))\n\t) {\n\t\tvar derived = /** @type {Derived} */ (dependency);\n\n\t\t// If we are working with a derived that is owned by an effect, then mark it as being\n\t\t// disconnected and remove the mark flag, as it cannot be reliably removed otherwise\n\t\tif ((derived.f & CONNECTED) !== 0) {\n\t\t\tderived.f ^= CONNECTED;\n\t\t\tderived.f &= ~WAS_MARKED;\n\t\t}\n\n\t\tupdate_derived_status(derived);\n\n\t\t// Disconnect any reactions owned by this reaction\n\t\tdestroy_derived_effects(derived);\n\t\tremove_reactions(derived, 0);\n\t}\n}\n\n/**\n * @param {Reaction} signal\n * @param {number} start_index\n * @returns {void}\n */\nexport function remove_reactions(signal, start_index) {\n\tvar dependencies = signal.deps;\n\tif (dependencies === null) return;\n\n\tfor (var i = start_index; i < dependencies.length; i++) {\n\t\tremove_reaction(signal, dependencies[i]);\n\t}\n}\n\n/**\n * @param {Effect} effect\n * @returns {void}\n */\nexport function update_effect(effect) {\n\tvar flags = effect.f;\n\n\tif ((flags & DESTROYED) !== 0) {\n\t\treturn;\n\t}\n\n\tset_signal_status(effect, CLEAN);\n\n\tvar previous_effect = active_effect;\n\tvar was_updating_effect = is_updating_effect;\n\n\tactive_effect = effect;\n\tis_updating_effect = true;\n\n\tif (DEV) {\n\t\tvar previous_component_fn = dev_current_component_function;\n\t\tset_dev_current_component_function(effect.component_function);\n\t\tvar previous_stack = /** @type {any} */ (dev_stack);\n\t\t// only block effects have a dev stack, keep the current one otherwise\n\t\tset_dev_stack(effect.dev_stack ?? dev_stack);\n\t}\n\n\ttry {\n\t\tif ((flags & (BLOCK_EFFECT | MANAGED_EFFECT)) !== 0) {\n\t\t\tdestroy_block_effect_children(effect);\n\t\t} else {\n\t\t\tdestroy_effect_children(effect);\n\t\t}\n\n\t\texecute_effect_teardown(effect);\n\t\tvar teardown = update_reaction(effect);\n\t\teffect.teardown = typeof teardown === 'function' ? teardown : null;\n\t\teffect.wv = write_version;\n\n\t\t// In DEV, increment versions of any sources that were written to during the effect,\n\t\t// so that they are correctly marked as dirty when the effect re-runs\n\t\tif (DEV && tracing_mode_flag && (effect.f & DIRTY) !== 0 && effect.deps !== null) {\n\t\t\tfor (var dep of effect.deps) {\n\t\t\t\tif (dep.set_during_effect) {\n\t\t\t\t\tdep.wv = increment_write_version();\n\t\t\t\t\tdep.set_during_effect = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} finally {\n\t\tis_updating_effect = was_updating_effect;\n\t\tactive_effect = previous_effect;\n\n\t\tif (DEV) {\n\t\t\tset_dev_current_component_function(previous_component_fn);\n\t\t\tset_dev_stack(previous_stack);\n\t\t}\n\t}\n}\n\n/**\n * Returns a promise that resolves once any pending state changes have been applied.\n * @returns {Promise<void>}\n */\nexport async function tick() {\n\tif (async_mode_flag) {\n\t\treturn new Promise((f) => {\n\t\t\t// Race them against each other - in almost all cases requestAnimationFrame will fire first,\n\t\t\t// but e.g. in case the window is not focused or a view transition happens, requestAnimationFrame\n\t\t\t// will be delayed and setTimeout helps us resolve fast enough in that case\n\t\t\trequestAnimationFrame(() => f());\n\t\t\tsetTimeout(() => f());\n\t\t});\n\t}\n\n\tawait Promise.resolve();\n\n\t// By calling flushSync we guarantee that any pending state changes are applied after one tick.\n\t// TODO look into whether we can make flushing subsequent updates synchronously in the future.\n\tflushSync();\n}\n\n/**\n * Returns a promise that resolves once any state changes, and asynchronous work resulting from them,\n * have resolved and the DOM has been updated\n * @returns {Promise<void>}\n * @since 5.36\n */\nexport function settled() {\n\treturn Batch.ensure().settled();\n}\n\n/**\n * @template V\n * @param {Value<V>} signal\n * @returns {V}\n */\nexport function get(signal) {\n\tvar flags = signal.f;\n\tvar is_derived = (flags & DERIVED) !== 0;\n\n\tcaptured_signals?.add(signal);\n\n\t// Register the dependency on the current reaction signal.\n\tif (active_reaction !== null && !untracking) {\n\t\t// if we're in a derived that is being read inside an _async_ derived,\n\t\t// it's possible that the effect was already destroyed. In this case,\n\t\t// we don't add the dependency, because that would create a memory leak\n\t\tvar destroyed = active_effect !== null && (active_effect.f & DESTROYED) !== 0;\n\n\t\tif (!destroyed && (current_sources === null || !includes.call(current_sources, signal))) {\n\t\t\tvar deps = active_reaction.deps;\n\n\t\t\tif ((active_reaction.f & REACTION_IS_UPDATING) !== 0) {\n\t\t\t\t// we're in the effect init/update cycle\n\t\t\t\tif (signal.rv < read_version) {\n\t\t\t\t\tsignal.rv = read_version;\n\n\t\t\t\t\t// If the signal is accessing the same dependencies in the same\n\t\t\t\t\t// order as it did last time, increment `skipped_deps`\n\t\t\t\t\t// rather than updating `new_deps`, which creates GC cost\n\t\t\t\t\tif (new_deps === null && deps !== null && deps[skipped_deps] === signal) {\n\t\t\t\t\t\tskipped_deps++;\n\t\t\t\t\t} else if (new_deps === null) {\n\t\t\t\t\t\tnew_deps = [signal];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnew_deps.push(signal);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// we're adding a dependency outside the init/update cycle\n\t\t\t\t// (i.e. after an `await`)\n\t\t\t\t(active_reaction.deps ??= []).push(signal);\n\n\t\t\t\tvar reactions = signal.reactions;\n\n\t\t\t\tif (reactions === null) {\n\t\t\t\t\tsignal.reactions = [active_reaction];\n\t\t\t\t} else if (!includes.call(reactions, active_reaction)) {\n\t\t\t\t\treactions.push(active_reaction);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (DEV) {\n\t\t// TODO reinstate this, but make it actually work\n\t\t// if (current_async_effect) {\n\t\t// \tvar tracking = (current_async_effect.f & REACTION_IS_UPDATING) !== 0;\n\t\t// \tvar was_read = current_async_effect.deps?.includes(signal);\n\n\t\t// \tif (!tracking && !untracking && !was_read) {\n\t\t// \t\tw.await_reactivity_loss(/** @type {string} */ (signal.label));\n\n\t\t// \t\tvar trace = get_error('traced at');\n\t\t// \t\t// eslint-disable-next-line no-console\n\t\t// \t\tif (trace) console.warn(trace);\n\t\t// \t}\n\t\t// }\n\n\t\trecent_async_deriveds.delete(signal);\n\n\t\tif (\n\t\t\ttracing_mode_flag &&\n\t\t\t!untracking &&\n\t\t\ttracing_expressions !== null &&\n\t\t\tactive_reaction !== null &&\n\t\t\ttracing_expressions.reaction === active_reaction\n\t\t) {\n\t\t\t// Used when mapping state between special blocks like `each`\n\t\t\tif (signal.trace) {\n\t\t\t\tsignal.trace();\n\t\t\t} else {\n\t\t\t\tvar trace = get_error('traced at');\n\n\t\t\t\tif (trace) {\n\t\t\t\t\tvar entry = tracing_expressions.entries.get(signal);\n\n\t\t\t\t\tif (entry === undefined) {\n\t\t\t\t\t\tentry = { traces: [] };\n\t\t\t\t\t\ttracing_expressions.entries.set(signal, entry);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar last = entry.traces[entry.traces.length - 1];\n\n\t\t\t\t\t// traces can be duplicated, e.g. by `snapshot` invoking both\n\t\t\t\t\t// both `getOwnPropertyDescriptor` and `get` traps at once\n\t\t\t\t\tif (trace.stack !== last?.stack) {\n\t\t\t\t\t\tentry.traces.push(trace);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (is_destroying_effect && old_values.has(signal)) {\n\t\treturn old_values.get(signal);\n\t}\n\n\tif (is_derived) {\n\t\tvar derived = /** @type {Derived} */ (signal);\n\n\t\tif (is_destroying_effect) {\n\t\t\tvar value = derived.v;\n\n\t\t\t// if the derived is dirty and has reactions, or depends on the values that just changed, re-execute\n\t\t\t// (a derived can be maybe_dirty due to the effect destroy removing its last reaction)\n\t\t\tif (\n\t\t\t\t((derived.f & CLEAN) === 0 && derived.reactions !== null) ||\n\t\t\t\tdepends_on_old_values(derived)\n\t\t\t) {\n\t\t\t\tvalue = execute_derived(derived);\n\t\t\t}\n\n\t\t\told_values.set(derived, value);\n\n\t\t\treturn value;\n\t\t}\n\n\t\t// connect disconnected deriveds if we are reading them inside an effect,\n\t\t// or inside another derived that is already connected\n\t\tvar should_connect =\n\t\t\t(derived.f & CONNECTED) === 0 &&\n\t\t\t!untracking &&\n\t\t\tactive_reaction !== null &&\n\t\t\t(is_updating_effect || (active_reaction.f & CONNECTED) !== 0);\n\n\t\tvar is_new = derived.deps === null;\n\n\t\tif (is_dirty(derived)) {\n\t\t\tif (should_connect) {\n\t\t\t\t// set the flag before `update_derived`, so that the derived\n\t\t\t\t// is added as a reaction to its dependencies\n\t\t\t\tderived.f |= CONNECTED;\n\t\t\t}\n\n\t\t\tupdate_derived(derived);\n\t\t}\n\n\t\tif (should_connect && !is_new) {\n\t\t\treconnect(derived);\n\t\t}\n\t}\n\n\tif (batch_values?.has(signal)) {\n\t\treturn batch_values.get(signal);\n\t}\n\n\tif ((signal.f & ERROR_VALUE) !== 0) {\n\t\tthrow signal.v;\n\t}\n\n\treturn signal.v;\n}\n\n/**\n * (Re)connect a disconnected derived, so that it is notified\n * of changes in `mark_reactions`\n * @param {Derived} derived\n */\nfunction reconnect(derived) {\n\tif (derived.deps === null) return;\n\n\tderived.f |= CONNECTED;\n\n\tfor (const dep of derived.deps) {\n\t\t(dep.reactions ??= []).push(derived);\n\n\t\tif ((dep.f & DERIVED) !== 0 && (dep.f & CONNECTED) === 0) {\n\t\t\treconnect(/** @type {Derived} */ (dep));\n\t\t}\n\t}\n}\n\n/** @param {Derived} derived */\nfunction depends_on_old_values(derived) {\n\tif (derived.v === UNINITIALIZED) return true; // we don't know, so assume the worst\n\tif (derived.deps === null) return false;\n\n\tfor (const dep of derived.deps) {\n\t\tif (old_values.has(dep)) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif ((dep.f & DERIVED) !== 0 && depends_on_old_values(/** @type {Derived} */ (dep))) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\treturn false;\n}\n\n/**\n * Like `get`, but checks for `undefined`. Used for `var` declarations because they can be accessed before being declared\n * @template V\n * @param {Value<V> | undefined} signal\n * @returns {V | undefined}\n */\nexport function safe_get(signal) {\n\treturn signal && get(signal);\n}\n\n/**\n * When used inside a [`$derived`](https://svelte.dev/docs/svelte/$derived) or [`$effect`](https://svelte.dev/docs/svelte/$effect),\n * any state read inside `fn` will not be treated as a dependency.\n *\n * ```ts\n * $effect(() => {\n *   // this will run when `data` changes, but not when `time` changes\n *   save(data, {\n *     timestamp: untrack(() => time)\n *   });\n * });\n * ```\n * @template T\n * @param {() => T} fn\n * @returns {T}\n */\nexport function untrack(fn) {\n\tvar previous_untracking = untracking;\n\ttry {\n\t\tuntracking = true;\n\t\treturn fn();\n\t} finally {\n\t\tuntracking = previous_untracking;\n\t}\n}\n\n/**\n * @param {Record<string | symbol, unknown>} obj\n * @param {Array<string | symbol>} keys\n * @returns {Record<string | symbol, unknown>}\n */\nexport function exclude_from_object(obj, keys) {\n\t/** @type {Record<string | symbol, unknown>} */\n\tvar result = {};\n\n\tfor (var key in obj) {\n\t\tif (!keys.includes(key)) {\n\t\t\tresult[key] = obj[key];\n\t\t}\n\t}\n\n\tfor (var symbol of Object.getOwnPropertySymbols(obj)) {\n\t\tif (Object.propertyIsEnumerable.call(obj, symbol) && !keys.includes(symbol)) {\n\t\t\tresult[symbol] = obj[symbol];\n\t\t}\n\t}\n\n\treturn result;\n}\n\n/**\n * Possibly traverse an object and read all its properties so that they're all reactive in case this is `$state`.\n * Does only check first level of an object for performance reasons (heuristic should be good for 99% of all cases).\n * @param {any} value\n * @returns {void}\n */\nexport function deep_read_state(value) {\n\tif (typeof value !== 'object' || !value || value instanceof EventTarget) {\n\t\treturn;\n\t}\n\n\tif (STATE_SYMBOL in value) {\n\t\tdeep_read(value);\n\t} else if (!Array.isArray(value)) {\n\t\tfor (let key in value) {\n\t\t\tconst prop = value[key];\n\t\t\tif (typeof prop === 'object' && prop && STATE_SYMBOL in prop) {\n\t\t\t\tdeep_read(prop);\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * Deeply traverse an object and read all its properties\n * so that they're all reactive in case this is `$state`\n * @param {any} value\n * @param {Set<any>} visited\n * @returns {void}\n */\nexport function deep_read(value, visited = new Set()) {\n\tif (\n\t\ttypeof value === 'object' &&\n\t\tvalue !== null &&\n\t\t// We don't want to traverse DOM elements\n\t\t!(value instanceof EventTarget) &&\n\t\t!visited.has(value)\n\t) {\n\t\tvisited.add(value);\n\t\t// When working with a possible SvelteDate, this\n\t\t// will ensure we capture changes to it.\n\t\tif (value instanceof Date) {\n\t\t\tvalue.getTime();\n\t\t}\n\t\tfor (let key in value) {\n\t\t\ttry {\n\t\t\t\tdeep_read(value[key], visited);\n\t\t\t} catch (e) {\n\t\t\t\t// continue\n\t\t\t}\n\t\t}\n\t\tconst proto = get_prototype_of(value);\n\t\tif (\n\t\t\tproto !== Object.prototype &&\n\t\t\tproto !== Array.prototype &&\n\t\t\tproto !== Map.prototype &&\n\t\t\tproto !== Set.prototype &&\n\t\t\tproto !== Date.prototype\n\t\t) {\n\t\t\tconst descriptors = get_descriptors(proto);\n\t\t\tfor (let key in descriptors) {\n\t\t\t\tconst get = descriptors[key].get;\n\t\t\t\tif (get) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tget.call(value);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t// continue\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","const regex_return_characters = /\\r/g;\n\n/**\n * @param {string} str\n * @returns {string}\n */\nexport function hash(str) {\n\tstr = str.replace(regex_return_characters, '');\n\tlet hash = 5381;\n\tlet i = str.length;\n\n\twhile (i--) hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n\treturn (hash >>> 0).toString(36);\n}\n\nconst VOID_ELEMENT_NAMES = [\n\t'area',\n\t'base',\n\t'br',\n\t'col',\n\t'command',\n\t'embed',\n\t'hr',\n\t'img',\n\t'input',\n\t'keygen',\n\t'link',\n\t'meta',\n\t'param',\n\t'source',\n\t'track',\n\t'wbr'\n];\n\n/**\n * Returns `true` if `name` is of a void element\n * @param {string} name\n */\nexport function is_void(name) {\n\treturn VOID_ELEMENT_NAMES.includes(name) || name.toLowerCase() === '!doctype';\n}\n\nconst RESERVED_WORDS = [\n\t'arguments',\n\t'await',\n\t'break',\n\t'case',\n\t'catch',\n\t'class',\n\t'const',\n\t'continue',\n\t'debugger',\n\t'default',\n\t'delete',\n\t'do',\n\t'else',\n\t'enum',\n\t'eval',\n\t'export',\n\t'extends',\n\t'false',\n\t'finally',\n\t'for',\n\t'function',\n\t'if',\n\t'implements',\n\t'import',\n\t'in',\n\t'instanceof',\n\t'interface',\n\t'let',\n\t'new',\n\t'null',\n\t'package',\n\t'private',\n\t'protected',\n\t'public',\n\t'return',\n\t'static',\n\t'super',\n\t'switch',\n\t'this',\n\t'throw',\n\t'true',\n\t'try',\n\t'typeof',\n\t'var',\n\t'void',\n\t'while',\n\t'with',\n\t'yield'\n];\n\n/**\n * Returns `true` if `word` is a reserved JavaScript keyword\n * @param {string} word\n */\nexport function is_reserved(word) {\n\treturn RESERVED_WORDS.includes(word);\n}\n\n/**\n * @param {string} name\n */\nexport function is_capture_event(name) {\n\treturn name.endsWith('capture') && name !== 'gotpointercapture' && name !== 'lostpointercapture';\n}\n\n/** List of Element events that will be delegated */\nconst DELEGATED_EVENTS = [\n\t'beforeinput',\n\t'click',\n\t'change',\n\t'dblclick',\n\t'contextmenu',\n\t'focusin',\n\t'focusout',\n\t'input',\n\t'keydown',\n\t'keyup',\n\t'mousedown',\n\t'mousemove',\n\t'mouseout',\n\t'mouseover',\n\t'mouseup',\n\t'pointerdown',\n\t'pointermove',\n\t'pointerout',\n\t'pointerover',\n\t'pointerup',\n\t'touchend',\n\t'touchmove',\n\t'touchstart'\n];\n\n/**\n * Returns `true` if `event_name` is a delegated event\n * @param {string} event_name\n */\nexport function can_delegate_event(event_name) {\n\treturn DELEGATED_EVENTS.includes(event_name);\n}\n\n/**\n * Attributes that are boolean, i.e. they are present or not present.\n */\nconst DOM_BOOLEAN_ATTRIBUTES = [\n\t'allowfullscreen',\n\t'async',\n\t'autofocus',\n\t'autoplay',\n\t'checked',\n\t'controls',\n\t'default',\n\t'disabled',\n\t'formnovalidate',\n\t'indeterminate',\n\t'inert',\n\t'ismap',\n\t'loop',\n\t'multiple',\n\t'muted',\n\t'nomodule',\n\t'novalidate',\n\t'open',\n\t'playsinline',\n\t'readonly',\n\t'required',\n\t'reversed',\n\t'seamless',\n\t'selected',\n\t'webkitdirectory',\n\t'defer',\n\t'disablepictureinpicture',\n\t'disableremoteplayback'\n];\n\n/**\n * Returns `true` if `name` is a boolean attribute\n * @param {string} name\n */\nexport function is_boolean_attribute(name) {\n\treturn DOM_BOOLEAN_ATTRIBUTES.includes(name);\n}\n\n/**\n * @type {Record<string, string>}\n * List of attribute names that should be aliased to their property names\n * because they behave differently between setting them as an attribute and\n * setting them as a property.\n */\nconst ATTRIBUTE_ALIASES = {\n\t// no `class: 'className'` because we handle that separately\n\tformnovalidate: 'formNoValidate',\n\tismap: 'isMap',\n\tnomodule: 'noModule',\n\tplaysinline: 'playsInline',\n\treadonly: 'readOnly',\n\tdefaultvalue: 'defaultValue',\n\tdefaultchecked: 'defaultChecked',\n\tsrcobject: 'srcObject',\n\tnovalidate: 'noValidate',\n\tallowfullscreen: 'allowFullscreen',\n\tdisablepictureinpicture: 'disablePictureInPicture',\n\tdisableremoteplayback: 'disableRemotePlayback'\n};\n\n/**\n * @param {string} name\n */\nexport function normalize_attribute(name) {\n\tname = name.toLowerCase();\n\treturn ATTRIBUTE_ALIASES[name] ?? name;\n}\n\nconst DOM_PROPERTIES = [\n\t...DOM_BOOLEAN_ATTRIBUTES,\n\t'formNoValidate',\n\t'isMap',\n\t'noModule',\n\t'playsInline',\n\t'readOnly',\n\t'value',\n\t'volume',\n\t'defaultValue',\n\t'defaultChecked',\n\t'srcObject',\n\t'noValidate',\n\t'allowFullscreen',\n\t'disablePictureInPicture',\n\t'disableRemotePlayback'\n];\n\n/**\n * @param {string} name\n */\nexport function is_dom_property(name) {\n\treturn DOM_PROPERTIES.includes(name);\n}\n\nconst NON_STATIC_PROPERTIES = ['autofocus', 'muted', 'defaultValue', 'defaultChecked'];\n\n/**\n * Returns `true` if the given attribute cannot be set through the template\n * string, i.e. needs some kind of JavaScript handling to work.\n * @param {string} name\n */\nexport function cannot_be_set_statically(name) {\n\treturn NON_STATIC_PROPERTIES.includes(name);\n}\n\n/**\n * Subset of delegated events which should be passive by default.\n * These two are already passive via browser defaults on window, document and body.\n * But since\n * - we're delegating them\n * - they happen often\n * - they apply to mobile which is generally less performant\n * we're marking them as passive by default for other elements, too.\n */\nconst PASSIVE_EVENTS = ['touchstart', 'touchmove'];\n\n/**\n * Returns `true` if `name` is a passive event\n * @param {string} name\n */\nexport function is_passive_event(name) {\n\treturn PASSIVE_EVENTS.includes(name);\n}\n\nconst CONTENT_EDITABLE_BINDINGS = ['textContent', 'innerHTML', 'innerText'];\n\n/** @param {string} name */\nexport function is_content_editable_binding(name) {\n\treturn CONTENT_EDITABLE_BINDINGS.includes(name);\n}\n\nconst LOAD_ERROR_ELEMENTS = [\n\t'body',\n\t'embed',\n\t'iframe',\n\t'img',\n\t'link',\n\t'object',\n\t'script',\n\t'style',\n\t'track'\n];\n\n/**\n * Returns `true` if the element emits `load` and `error` events\n * @param {string} name\n */\nexport function is_load_error_element(name) {\n\treturn LOAD_ERROR_ELEMENTS.includes(name);\n}\n\nconst SVG_ELEMENTS = [\n\t'altGlyph',\n\t'altGlyphDef',\n\t'altGlyphItem',\n\t'animate',\n\t'animateColor',\n\t'animateMotion',\n\t'animateTransform',\n\t'circle',\n\t'clipPath',\n\t'color-profile',\n\t'cursor',\n\t'defs',\n\t'desc',\n\t'discard',\n\t'ellipse',\n\t'feBlend',\n\t'feColorMatrix',\n\t'feComponentTransfer',\n\t'feComposite',\n\t'feConvolveMatrix',\n\t'feDiffuseLighting',\n\t'feDisplacementMap',\n\t'feDistantLight',\n\t'feDropShadow',\n\t'feFlood',\n\t'feFuncA',\n\t'feFuncB',\n\t'feFuncG',\n\t'feFuncR',\n\t'feGaussianBlur',\n\t'feImage',\n\t'feMerge',\n\t'feMergeNode',\n\t'feMorphology',\n\t'feOffset',\n\t'fePointLight',\n\t'feSpecularLighting',\n\t'feSpotLight',\n\t'feTile',\n\t'feTurbulence',\n\t'filter',\n\t'font',\n\t'font-face',\n\t'font-face-format',\n\t'font-face-name',\n\t'font-face-src',\n\t'font-face-uri',\n\t'foreignObject',\n\t'g',\n\t'glyph',\n\t'glyphRef',\n\t'hatch',\n\t'hatchpath',\n\t'hkern',\n\t'image',\n\t'line',\n\t'linearGradient',\n\t'marker',\n\t'mask',\n\t'mesh',\n\t'meshgradient',\n\t'meshpatch',\n\t'meshrow',\n\t'metadata',\n\t'missing-glyph',\n\t'mpath',\n\t'path',\n\t'pattern',\n\t'polygon',\n\t'polyline',\n\t'radialGradient',\n\t'rect',\n\t'set',\n\t'solidcolor',\n\t'stop',\n\t'svg',\n\t'switch',\n\t'symbol',\n\t'text',\n\t'textPath',\n\t'tref',\n\t'tspan',\n\t'unknown',\n\t'use',\n\t'view',\n\t'vkern'\n];\n\n/** @param {string} name */\nexport function is_svg(name) {\n\treturn SVG_ELEMENTS.includes(name);\n}\n\nconst MATHML_ELEMENTS = [\n\t'annotation',\n\t'annotation-xml',\n\t'maction',\n\t'math',\n\t'merror',\n\t'mfrac',\n\t'mi',\n\t'mmultiscripts',\n\t'mn',\n\t'mo',\n\t'mover',\n\t'mpadded',\n\t'mphantom',\n\t'mprescripts',\n\t'mroot',\n\t'mrow',\n\t'ms',\n\t'mspace',\n\t'msqrt',\n\t'mstyle',\n\t'msub',\n\t'msubsup',\n\t'msup',\n\t'mtable',\n\t'mtd',\n\t'mtext',\n\t'mtr',\n\t'munder',\n\t'munderover',\n\t'semantics'\n];\n\n/** @param {string} name */\nexport function is_mathml(name) {\n\treturn MATHML_ELEMENTS.includes(name);\n}\n\nconst STATE_CREATION_RUNES = /** @type {const} */ ([\n\t'$state',\n\t'$state.raw',\n\t'$derived',\n\t'$derived.by'\n]);\n\nconst RUNES = /** @type {const} */ ([\n\t...STATE_CREATION_RUNES,\n\t'$state.eager',\n\t'$state.snapshot',\n\t'$props',\n\t'$props.id',\n\t'$bindable',\n\t'$effect',\n\t'$effect.pre',\n\t'$effect.tracking',\n\t'$effect.root',\n\t'$effect.pending',\n\t'$inspect',\n\t'$inspect().with',\n\t'$inspect.trace',\n\t'$host'\n]);\n\n/** @typedef {typeof RUNES[number]} RuneName */\n\n/**\n * @param {string} name\n * @returns {name is RuneName}\n */\nexport function is_rune(name) {\n\treturn RUNES.includes(/** @type {RuneName} */ (name));\n}\n\n/** @typedef {typeof STATE_CREATION_RUNES[number]} StateCreationRuneName */\n\n/**\n * @param {string} name\n * @returns {name is StateCreationRuneName}\n */\nexport function is_state_creation_rune(name) {\n\treturn STATE_CREATION_RUNES.includes(/** @type {StateCreationRuneName} */ (name));\n}\n\n/** List of elements that require raw contents and should not have SSR comments put in them */\nconst RAW_TEXT_ELEMENTS = /** @type {const} */ (['textarea', 'script', 'style', 'title']);\n\n/** @param {string} name */\nexport function is_raw_text_element(name) {\n\treturn RAW_TEXT_ELEMENTS.includes(/** @type {typeof RAW_TEXT_ELEMENTS[number]} */ (name));\n}\n\n/**\n * Prevent devtools trying to make `location` a clickable link by inserting a zero-width space\n * @template {string | undefined} T\n * @param {T} location\n * @returns {T};\n */\nexport function sanitize_location(location) {\n\treturn /** @type {T} */ (location?.replace(/\\//g, '/\\u200b'));\n}\n","import { teardown } from '../../reactivity/effects.js';\nimport { define_property } from '../../../shared/utils.js';\nimport { hydrating } from '../hydration.js';\nimport { queue_micro_task } from '../task.js';\nimport { FILENAME } from '../../../../constants.js';\nimport * as w from '../../warnings.js';\nimport {\n\tactive_effect,\n\tactive_reaction,\n\tset_active_effect,\n\tset_active_reaction\n} from '../../runtime.js';\nimport { without_reactive_context } from './bindings/shared.js';\n\n/** @type {Set<string>} */\nexport const all_registered_events = new Set();\n\n/** @type {Set<(events: Array<string>) => void>} */\nexport const root_event_handles = new Set();\n\n/**\n * SSR adds onload and onerror attributes to catch those events before the hydration.\n * This function detects those cases, removes the attributes and replays the events.\n * @param {HTMLElement} dom\n */\nexport function replay_events(dom) {\n\tif (!hydrating) return;\n\n\tdom.removeAttribute('onload');\n\tdom.removeAttribute('onerror');\n\t// @ts-expect-error\n\tconst event = dom.__e;\n\tif (event !== undefined) {\n\t\t// @ts-expect-error\n\t\tdom.__e = undefined;\n\t\tqueueMicrotask(() => {\n\t\t\tif (dom.isConnected) {\n\t\t\t\tdom.dispatchEvent(event);\n\t\t\t}\n\t\t});\n\t}\n}\n\n/**\n * @param {string} event_name\n * @param {EventTarget} dom\n * @param {EventListener} [handler]\n * @param {AddEventListenerOptions} [options]\n */\nexport function create_event(event_name, dom, handler, options = {}) {\n\t/**\n\t * @this {EventTarget}\n\t */\n\tfunction target_handler(/** @type {Event} */ event) {\n\t\tif (!options.capture) {\n\t\t\t// Only call in the bubble phase, else delegated events would be called before the capturing events\n\t\t\thandle_event_propagation.call(dom, event);\n\t\t}\n\t\tif (!event.cancelBubble) {\n\t\t\treturn without_reactive_context(() => {\n\t\t\t\treturn handler?.call(this, event);\n\t\t\t});\n\t\t}\n\t}\n\n\t// Chrome has a bug where pointer events don't work when attached to a DOM element that has been cloned\n\t// with cloneNode() and the DOM element is disconnected from the document. To ensure the event works, we\n\t// defer the attachment till after it's been appended to the document. TODO: remove this once Chrome fixes\n\t// this bug. The same applies to wheel events and touch events.\n\tif (\n\t\tevent_name.startsWith('pointer') ||\n\t\tevent_name.startsWith('touch') ||\n\t\tevent_name === 'wheel'\n\t) {\n\t\tqueue_micro_task(() => {\n\t\t\tdom.addEventListener(event_name, target_handler, options);\n\t\t});\n\t} else {\n\t\tdom.addEventListener(event_name, target_handler, options);\n\t}\n\n\treturn target_handler;\n}\n\n/**\n * Attaches an event handler to an element and returns a function that removes the handler. Using this\n * rather than `addEventListener` will preserve the correct order relative to handlers added declaratively\n * (with attributes like `onclick`), which use event delegation for performance reasons\n *\n * @param {EventTarget} element\n * @param {string} type\n * @param {EventListener} handler\n * @param {AddEventListenerOptions} [options]\n */\nexport function on(element, type, handler, options = {}) {\n\tvar target_handler = create_event(type, element, handler, options);\n\n\treturn () => {\n\t\telement.removeEventListener(type, target_handler, options);\n\t};\n}\n\n/**\n * @param {string} event_name\n * @param {Element} dom\n * @param {EventListener} [handler]\n * @param {boolean} [capture]\n * @param {boolean} [passive]\n * @returns {void}\n */\nexport function event(event_name, dom, handler, capture, passive) {\n\tvar options = { capture, passive };\n\tvar target_handler = create_event(event_name, dom, handler, options);\n\n\tif (\n\t\tdom === document.body ||\n\t\t// @ts-ignore\n\t\tdom === window ||\n\t\t// @ts-ignore\n\t\tdom === document ||\n\t\t// Firefox has quirky behavior, it can happen that we still get \"canplay\" events when the element is already removed\n\t\tdom instanceof HTMLMediaElement\n\t) {\n\t\tteardown(() => {\n\t\t\tdom.removeEventListener(event_name, target_handler, options);\n\t\t});\n\t}\n}\n\n/**\n * @param {Array<string>} events\n * @returns {void}\n */\nexport function delegate(events) {\n\tfor (var i = 0; i < events.length; i++) {\n\t\tall_registered_events.add(events[i]);\n\t}\n\n\tfor (var fn of root_event_handles) {\n\t\tfn(events);\n\t}\n}\n\n// used to store the reference to the currently propagated event\n// to prevent garbage collection between microtasks in Firefox\n// If the event object is GCed too early, the expando __root property\n// set on the event object is lost, causing the event delegation\n// to process the event twice\nlet last_propagated_event = null;\n\n/**\n * @this {EventTarget}\n * @param {Event} event\n * @returns {void}\n */\nexport function handle_event_propagation(event) {\n\tvar handler_element = this;\n\tvar owner_document = /** @type {Node} */ (handler_element).ownerDocument;\n\tvar event_name = event.type;\n\tvar path = event.composedPath?.() || [];\n\tvar current_target = /** @type {null | Element} */ (path[0] || event.target);\n\n\tlast_propagated_event = event;\n\n\t// composedPath contains list of nodes the event has propagated through.\n\t// We check __root to skip all nodes below it in case this is a\n\t// parent of the __root node, which indicates that there's nested\n\t// mounted apps. In this case we don't want to trigger events multiple times.\n\tvar path_idx = 0;\n\n\t// the `last_propagated_event === event` check is redundant, but\n\t// without it the variable will be DCE'd and things will\n\t// fail mysteriously in Firefox\n\t// @ts-expect-error is added below\n\tvar handled_at = last_propagated_event === event && event.__root;\n\n\tif (handled_at) {\n\t\tvar at_idx = path.indexOf(handled_at);\n\t\tif (\n\t\t\tat_idx !== -1 &&\n\t\t\t(handler_element === document || handler_element === /** @type {any} */ (window))\n\t\t) {\n\t\t\t// This is the fallback document listener or a window listener, but the event was already handled\n\t\t\t// -> ignore, but set handle_at to document/window so that we're resetting the event\n\t\t\t// chain in case someone manually dispatches the same event object again.\n\t\t\t// @ts-expect-error\n\t\t\tevent.__root = handler_element;\n\t\t\treturn;\n\t\t}\n\n\t\t// We're deliberately not skipping if the index is higher, because\n\t\t// someone could create an event programmatically and emit it multiple times,\n\t\t// in which case we want to handle the whole propagation chain properly each time.\n\t\t// (this will only be a false negative if the event is dispatched multiple times and\n\t\t// the fallback document listener isn't reached in between, but that's super rare)\n\t\tvar handler_idx = path.indexOf(handler_element);\n\t\tif (handler_idx === -1) {\n\t\t\t// handle_idx can theoretically be -1 (happened in some JSDOM testing scenarios with an event listener on the window object)\n\t\t\t// so guard against that, too, and assume that everything was handled at this point.\n\t\t\treturn;\n\t\t}\n\n\t\tif (at_idx <= handler_idx) {\n\t\t\tpath_idx = at_idx;\n\t\t}\n\t}\n\n\tcurrent_target = /** @type {Element} */ (path[path_idx] || event.target);\n\t// there can only be one delegated event per element, and we either already handled the current target,\n\t// or this is the very first target in the chain which has a non-delegated listener, in which case it's safe\n\t// to handle a possible delegated event on it later (through the root delegation listener for example).\n\tif (current_target === handler_element) return;\n\n\t// Proxy currentTarget to correct target\n\tdefine_property(event, 'currentTarget', {\n\t\tconfigurable: true,\n\t\tget() {\n\t\t\treturn current_target || owner_document;\n\t\t}\n\t});\n\n\t// This started because of Chromium issue https://chromestatus.com/feature/5128696823545856,\n\t// where removal or moving of of the DOM can cause sync `blur` events to fire, which can cause logic\n\t// to run inside the current `active_reaction`, which isn't what we want at all. However, on reflection,\n\t// it's probably best that all event handled by Svelte have this behaviour, as we don't really want\n\t// an event handler to run in the context of another reaction or effect.\n\tvar previous_reaction = active_reaction;\n\tvar previous_effect = active_effect;\n\tset_active_reaction(null);\n\tset_active_effect(null);\n\n\ttry {\n\t\t/**\n\t\t * @type {unknown}\n\t\t */\n\t\tvar throw_error;\n\t\t/**\n\t\t * @type {unknown[]}\n\t\t */\n\t\tvar other_errors = [];\n\n\t\twhile (current_target !== null) {\n\t\t\t/** @type {null | Element} */\n\t\t\tvar parent_element =\n\t\t\t\tcurrent_target.assignedSlot ||\n\t\t\t\tcurrent_target.parentNode ||\n\t\t\t\t/** @type {any} */ (current_target).host ||\n\t\t\t\tnull;\n\n\t\t\ttry {\n\t\t\t\t// @ts-expect-error\n\t\t\t\tvar delegated = current_target['__' + event_name];\n\n\t\t\t\tif (\n\t\t\t\t\tdelegated != null &&\n\t\t\t\t\t(!(/** @type {any} */ (current_target).disabled) ||\n\t\t\t\t\t\t// DOM could've been updated already by the time this is reached, so we check this as well\n\t\t\t\t\t\t// -> the target could not have been disabled because it emits the event in the first place\n\t\t\t\t\t\tevent.target === current_target)\n\t\t\t\t) {\n\t\t\t\t\tdelegated.call(current_target, event);\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tif (throw_error) {\n\t\t\t\t\tother_errors.push(error);\n\t\t\t\t} else {\n\t\t\t\t\tthrow_error = error;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (event.cancelBubble || parent_element === handler_element || parent_element === null) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcurrent_target = parent_element;\n\t\t}\n\n\t\tif (throw_error) {\n\t\t\tfor (let error of other_errors) {\n\t\t\t\t// Throw the rest of the errors, one-by-one on a microtask\n\t\t\t\tqueueMicrotask(() => {\n\t\t\t\t\tthrow error;\n\t\t\t\t});\n\t\t\t}\n\t\t\tthrow throw_error;\n\t\t}\n\t} finally {\n\t\t// @ts-expect-error is used above\n\t\tevent.__root = handler_element;\n\t\t// @ts-ignore remove proxy on currentTarget\n\t\tdelete event.currentTarget;\n\t\tset_active_reaction(previous_reaction);\n\t\tset_active_effect(previous_effect);\n\t}\n}\n\n/**\n * In dev, warn if an event handler is not a function, as it means the\n * user probably called the handler or forgot to add a `() =>`\n * @param {() => (event: Event, ...args: any) => void} thunk\n * @param {EventTarget} element\n * @param {[Event, ...any]} args\n * @param {any} component\n * @param {[number, number]} [loc]\n * @param {boolean} [remove_parens]\n */\nexport function apply(\n\tthunk,\n\telement,\n\targs,\n\tcomponent,\n\tloc,\n\thas_side_effects = false,\n\tremove_parens = false\n) {\n\tlet handler;\n\tlet error;\n\n\ttry {\n\t\thandler = thunk();\n\t} catch (e) {\n\t\terror = e;\n\t}\n\n\tif (typeof handler !== 'function' && (has_side_effects || handler != null || error)) {\n\t\tconst filename = component?.[FILENAME];\n\t\tconst location = loc ? ` at ${filename}:${loc[0]}:${loc[1]}` : ` in ${filename}`;\n\t\tconst phase = args[0]?.eventPhase < Event.BUBBLING_PHASE ? 'capture' : '';\n\t\tconst event_name = args[0]?.type + phase;\n\t\tconst description = `\\`${event_name}\\` handler${location}`;\n\t\tconst suggestion = remove_parens ? 'remove the trailing `()`' : 'add a leading `() =>`';\n\n\t\tw.event_handler_invalid(description, suggestion);\n\n\t\tif (error) {\n\t\t\tthrow error;\n\t\t}\n\t}\n\thandler?.apply(element, args);\n}\n","/** @param {string} html */\nexport function create_fragment_from_html(html) {\n\tvar elem = document.createElement('template');\n\telem.innerHTML = html.replaceAll('<!>', '<!---->'); // XHTML compliance\n\treturn elem.content;\n}\n","/** @import { Effect, EffectNodes, TemplateNode } from '#client' */\n/** @import { TemplateStructure } from './types' */\nimport { hydrate_next, hydrate_node, hydrating, set_hydrate_node } from './hydration.js';\nimport {\n\tcreate_text,\n\tget_first_child,\n\tget_next_sibling,\n\tis_firefox,\n\tcreate_element,\n\tcreate_fragment,\n\tcreate_comment,\n\tset_attribute,\n\tmerge_text_nodes\n} from './operations.js';\nimport { create_fragment_from_html } from './reconciler.js';\nimport { active_effect } from '../runtime.js';\nimport {\n\tNAMESPACE_MATHML,\n\tNAMESPACE_SVG,\n\tTEMPLATE_FRAGMENT,\n\tTEMPLATE_USE_IMPORT_NODE,\n\tTEMPLATE_USE_MATHML,\n\tTEMPLATE_USE_SVG\n} from '../../../constants.js';\nimport { COMMENT_NODE, DOCUMENT_FRAGMENT_NODE, EFFECT_RAN, TEXT_NODE } from '#client/constants';\n\n/**\n * @param {TemplateNode} start\n * @param {TemplateNode | null} end\n */\nexport function assign_nodes(start, end) {\n\tvar effect = /** @type {Effect} */ (active_effect);\n\tif (effect.nodes === null) {\n\t\teffect.nodes = { start, end, a: null, t: null };\n\t}\n}\n\n/**\n * @param {string} content\n * @param {number} flags\n * @returns {() => Node | Node[]}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function from_html(content, flags) {\n\tvar is_fragment = (flags & TEMPLATE_FRAGMENT) !== 0;\n\tvar use_import_node = (flags & TEMPLATE_USE_IMPORT_NODE) !== 0;\n\n\t/** @type {Node} */\n\tvar node;\n\n\t/**\n\t * Whether or not the first item is a text/element node. If not, we need to\n\t * create an additional comment node to act as `effect.nodes.start`\n\t */\n\tvar has_start = !content.startsWith('<!>');\n\n\treturn () => {\n\t\tif (hydrating) {\n\t\t\tassign_nodes(hydrate_node, null);\n\t\t\treturn hydrate_node;\n\t\t}\n\n\t\tif (node === undefined) {\n\t\t\tnode = create_fragment_from_html(has_start ? content : '<!>' + content);\n\t\t\tif (!is_fragment) node = /** @type {TemplateNode} */ (get_first_child(node));\n\t\t}\n\n\t\tvar clone = /** @type {TemplateNode} */ (\n\t\t\tuse_import_node || is_firefox ? document.importNode(node, true) : node.cloneNode(true)\n\t\t);\n\n\t\tif (is_fragment) {\n\t\t\tvar start = /** @type {TemplateNode} */ (get_first_child(clone));\n\t\t\tvar end = /** @type {TemplateNode} */ (clone.lastChild);\n\n\t\t\tassign_nodes(start, end);\n\t\t} else {\n\t\t\tassign_nodes(clone, clone);\n\t\t}\n\n\t\treturn clone;\n\t};\n}\n\n/**\n * @param {string} content\n * @param {number} flags\n * @param {'svg' | 'math'} ns\n * @returns {() => Node | Node[]}\n */\n/*#__NO_SIDE_EFFECTS__*/\nfunction from_namespace(content, flags, ns = 'svg') {\n\t/**\n\t * Whether or not the first item is a text/element node. If not, we need to\n\t * create an additional comment node to act as `effect.nodes.start`\n\t */\n\tvar has_start = !content.startsWith('<!>');\n\n\tvar is_fragment = (flags & TEMPLATE_FRAGMENT) !== 0;\n\tvar wrapped = `<${ns}>${has_start ? content : '<!>' + content}</${ns}>`;\n\n\t/** @type {Element | DocumentFragment} */\n\tvar node;\n\n\treturn () => {\n\t\tif (hydrating) {\n\t\t\tassign_nodes(hydrate_node, null);\n\t\t\treturn hydrate_node;\n\t\t}\n\n\t\tif (!node) {\n\t\t\tvar fragment = /** @type {DocumentFragment} */ (create_fragment_from_html(wrapped));\n\t\t\tvar root = /** @type {Element} */ (get_first_child(fragment));\n\n\t\t\tif (is_fragment) {\n\t\t\t\tnode = document.createDocumentFragment();\n\t\t\t\twhile (get_first_child(root)) {\n\t\t\t\t\tnode.appendChild(/** @type {TemplateNode} */ (get_first_child(root)));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnode = /** @type {Element} */ (get_first_child(root));\n\t\t\t}\n\t\t}\n\n\t\tvar clone = /** @type {TemplateNode} */ (node.cloneNode(true));\n\n\t\tif (is_fragment) {\n\t\t\tvar start = /** @type {TemplateNode} */ (get_first_child(clone));\n\t\t\tvar end = /** @type {TemplateNode} */ (clone.lastChild);\n\n\t\t\tassign_nodes(start, end);\n\t\t} else {\n\t\t\tassign_nodes(clone, clone);\n\t\t}\n\n\t\treturn clone;\n\t};\n}\n\n/**\n * @param {string} content\n * @param {number} flags\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function from_svg(content, flags) {\n\treturn from_namespace(content, flags, 'svg');\n}\n\n/**\n * @param {string} content\n * @param {number} flags\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function from_mathml(content, flags) {\n\treturn from_namespace(content, flags, 'math');\n}\n\n/**\n * @param {TemplateStructure[]} structure\n * @param {typeof NAMESPACE_SVG | typeof NAMESPACE_MATHML | undefined} [ns]\n */\nfunction fragment_from_tree(structure, ns) {\n\tvar fragment = create_fragment();\n\n\tfor (var item of structure) {\n\t\tif (typeof item === 'string') {\n\t\t\tfragment.append(create_text(item));\n\t\t\tcontinue;\n\t\t}\n\n\t\t// if `preserveComments === true`, comments are represented as `['// <data>']`\n\t\tif (item === undefined || item[0][0] === '/') {\n\t\t\tfragment.append(create_comment(item ? item[0].slice(3) : ''));\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst [name, attributes, ...children] = item;\n\n\t\tconst namespace = name === 'svg' ? NAMESPACE_SVG : name === 'math' ? NAMESPACE_MATHML : ns;\n\n\t\tvar element = create_element(name, namespace, attributes?.is);\n\n\t\tfor (var key in attributes) {\n\t\t\tset_attribute(element, key, attributes[key]);\n\t\t}\n\n\t\tif (children.length > 0) {\n\t\t\tvar target =\n\t\t\t\telement.tagName === 'TEMPLATE'\n\t\t\t\t\t? /** @type {HTMLTemplateElement} */ (element).content\n\t\t\t\t\t: element;\n\n\t\t\ttarget.append(\n\t\t\t\tfragment_from_tree(children, element.tagName === 'foreignObject' ? undefined : namespace)\n\t\t\t);\n\t\t}\n\n\t\tfragment.append(element);\n\t}\n\n\treturn fragment;\n}\n\n/**\n * @param {TemplateStructure[]} structure\n * @param {number} flags\n * @returns {() => Node | Node[]}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function from_tree(structure, flags) {\n\tvar is_fragment = (flags & TEMPLATE_FRAGMENT) !== 0;\n\tvar use_import_node = (flags & TEMPLATE_USE_IMPORT_NODE) !== 0;\n\n\t/** @type {Node} */\n\tvar node;\n\n\treturn () => {\n\t\tif (hydrating) {\n\t\t\tassign_nodes(hydrate_node, null);\n\t\t\treturn hydrate_node;\n\t\t}\n\n\t\tif (node === undefined) {\n\t\t\tconst ns =\n\t\t\t\t(flags & TEMPLATE_USE_SVG) !== 0\n\t\t\t\t\t? NAMESPACE_SVG\n\t\t\t\t\t: (flags & TEMPLATE_USE_MATHML) !== 0\n\t\t\t\t\t\t? NAMESPACE_MATHML\n\t\t\t\t\t\t: undefined;\n\n\t\t\tnode = fragment_from_tree(structure, ns);\n\t\t\tif (!is_fragment) node = /** @type {TemplateNode} */ (get_first_child(node));\n\t\t}\n\n\t\tvar clone = /** @type {TemplateNode} */ (\n\t\t\tuse_import_node || is_firefox ? document.importNode(node, true) : node.cloneNode(true)\n\t\t);\n\n\t\tif (is_fragment) {\n\t\t\tvar start = /** @type {TemplateNode} */ (get_first_child(clone));\n\t\t\tvar end = /** @type {TemplateNode} */ (clone.lastChild);\n\n\t\t\tassign_nodes(start, end);\n\t\t} else {\n\t\t\tassign_nodes(clone, clone);\n\t\t}\n\n\t\treturn clone;\n\t};\n}\n\n/**\n * @param {() => Element | DocumentFragment} fn\n */\nexport function with_script(fn) {\n\treturn () => run_scripts(fn());\n}\n\n/**\n * Creating a document fragment from HTML that contains script tags will not execute\n * the scripts. We need to replace the script tags with new ones so that they are executed.\n * @param {Element | DocumentFragment} node\n * @returns {Node | Node[]}\n */\nfunction run_scripts(node) {\n\t// scripts were SSR'd, in which case they will run\n\tif (hydrating) return node;\n\n\tconst is_fragment = node.nodeType === DOCUMENT_FRAGMENT_NODE;\n\tconst scripts =\n\t\t/** @type {HTMLElement} */ (node).tagName === 'SCRIPT'\n\t\t\t? [/** @type {HTMLScriptElement} */ (node)]\n\t\t\t: node.querySelectorAll('script');\n\n\tconst effect = /** @type {Effect & { nodes: EffectNodes }} */ (active_effect);\n\n\tfor (const script of scripts) {\n\t\tconst clone = document.createElement('script');\n\t\tfor (var attribute of script.attributes) {\n\t\t\tclone.setAttribute(attribute.name, attribute.value);\n\t\t}\n\n\t\tclone.textContent = script.textContent;\n\n\t\t// The script has changed - if it's at the edges, the effect now points at dead nodes\n\t\tif (is_fragment ? node.firstChild === script : node === script) {\n\t\t\teffect.nodes.start = clone;\n\t\t}\n\t\tif (is_fragment ? node.lastChild === script : node === script) {\n\t\t\teffect.nodes.end = clone;\n\t\t}\n\n\t\tscript.replaceWith(clone);\n\t}\n\treturn node;\n}\n\n/**\n * Don't mark this as side-effect-free, hydration needs to walk all nodes\n * @param {any} value\n */\nexport function text(value = '') {\n\tif (!hydrating) {\n\t\tvar t = create_text(value + '');\n\t\tassign_nodes(t, t);\n\t\treturn t;\n\t}\n\n\tvar node = hydrate_node;\n\n\tif (node.nodeType !== TEXT_NODE) {\n\t\t// if an {expression} is empty during SSR, we need to insert an empty text node\n\t\tnode.before((node = create_text()));\n\t\tset_hydrate_node(node);\n\t} else {\n\t\tmerge_text_nodes(/** @type {Text} */ (node));\n\t}\n\n\tassign_nodes(node, node);\n\treturn node;\n}\n\n/**\n * @returns {TemplateNode | DocumentFragment}\n */\nexport function comment() {\n\t// we're not delegating to `template` here for performance reasons\n\tif (hydrating) {\n\t\tassign_nodes(hydrate_node, null);\n\t\treturn hydrate_node;\n\t}\n\n\tvar frag = document.createDocumentFragment();\n\tvar start = document.createComment('');\n\tvar anchor = create_text();\n\tfrag.append(start, anchor);\n\n\tassign_nodes(start, anchor);\n\n\treturn frag;\n}\n\n/**\n * Assign the created (or in hydration mode, traversed) dom elements to the current block\n * and insert the elements into the dom (in client mode).\n * @param {Text | Comment | Element} anchor\n * @param {DocumentFragment | Element} dom\n */\nexport function append(anchor, dom) {\n\tif (hydrating) {\n\t\tvar effect = /** @type {Effect & { nodes: EffectNodes }} */ (active_effect);\n\n\t\t// When hydrating and outer component and an inner component is async, i.e. blocked on a promise,\n\t\t// then by the time the inner resolves we have already advanced to the end of the hydrated nodes\n\t\t// of the parent component. Check for defined for that reason to avoid rewinding the parent's end marker.\n\t\tif ((effect.f & EFFECT_RAN) === 0 || effect.nodes.end === null) {\n\t\t\teffect.nodes.end = hydrate_node;\n\t\t}\n\n\t\thydrate_next();\n\t\treturn;\n\t}\n\n\tif (anchor === null) {\n\t\t// edge case â€” void `<svelte:element>` with content\n\t\treturn;\n\t}\n\n\tanchor.before(/** @type {Node} */ (dom));\n}\n\n/**\n * Create (or hydrate) an unique UID for the component instance.\n */\nexport function props_id() {\n\tif (\n\t\thydrating &&\n\t\thydrate_node &&\n\t\thydrate_node.nodeType === COMMENT_NODE &&\n\t\thydrate_node.textContent?.startsWith(`$`)\n\t) {\n\t\tconst id = hydrate_node.textContent.substring(1);\n\t\thydrate_next();\n\t\treturn id;\n\t}\n\n\t// @ts-expect-error This way we ensure the id is unique even across Svelte runtimes\n\t(window.__svelte ??= {}).uid ??= 1;\n\n\t// @ts-expect-error\n\treturn `c${window.__svelte.uid++}`;\n}\n","/** @import { ComponentContext, Effect, EffectNodes, TemplateNode } from '#client' */\n/** @import { Component, ComponentType, SvelteComponent, MountOptions } from '../../index.js' */\nimport { DEV } from 'esm-env';\nimport {\n\tclear_text_content,\n\tcreate_text,\n\tget_first_child,\n\tget_next_sibling,\n\tinit_operations\n} from './dom/operations.js';\nimport { HYDRATION_END, HYDRATION_ERROR, HYDRATION_START } from '../../constants.js';\nimport { active_effect } from './runtime.js';\nimport { push, pop, component_context } from './context.js';\nimport { component_root } from './reactivity/effects.js';\nimport { hydrate_node, hydrating, set_hydrate_node, set_hydrating } from './dom/hydration.js';\nimport { array_from } from '../shared/utils.js';\nimport {\n\tall_registered_events,\n\thandle_event_propagation,\n\troot_event_handles\n} from './dom/elements/events.js';\nimport * as w from './warnings.js';\nimport * as e from './errors.js';\nimport { assign_nodes } from './dom/template.js';\nimport { is_passive_event } from '../../utils.js';\nimport { COMMENT_NODE, STATE_SYMBOL } from './constants.js';\nimport { boundary } from './dom/blocks/boundary.js';\n\n/**\n * This is normally true â€” block effects should run their intro transitions â€”\n * but is false during hydration (unless `options.intro` is `true`) and\n * when creating the children of a `<svelte:element>` that just changed tag\n */\nexport let should_intro = true;\n\n/** @param {boolean} value */\nexport function set_should_intro(value) {\n\tshould_intro = value;\n}\n\n/**\n * @param {Element} text\n * @param {string} value\n * @returns {void}\n */\nexport function set_text(text, value) {\n\t// For objects, we apply string coercion (which might make things like $state array references in the template reactive) before diffing\n\tvar str = value == null ? '' : typeof value === 'object' ? value + '' : value;\n\t// @ts-expect-error\n\tif (str !== (text.__t ??= text.nodeValue)) {\n\t\t// @ts-expect-error\n\t\ttext.__t = str;\n\t\ttext.nodeValue = str + '';\n\t}\n}\n\n/**\n * Mounts a component to the given target and returns the exports and potentially the props (if compiled with `accessors: true`) of the component.\n * Transitions will play during the initial render unless the `intro` option is set to `false`.\n *\n * @template {Record<string, any>} Props\n * @template {Record<string, any>} Exports\n * @param {ComponentType<SvelteComponent<Props>> | Component<Props, Exports, any>} component\n * @param {MountOptions<Props>} options\n * @returns {Exports}\n */\nexport function mount(component, options) {\n\treturn _mount(component, options);\n}\n\n/**\n * Hydrates a component on the given target and returns the exports and potentially the props (if compiled with `accessors: true`) of the component\n *\n * @template {Record<string, any>} Props\n * @template {Record<string, any>} Exports\n * @param {ComponentType<SvelteComponent<Props>> | Component<Props, Exports, any>} component\n * @param {{} extends Props ? {\n * \t\ttarget: Document | Element | ShadowRoot;\n * \t\tprops?: Props;\n * \t\tevents?: Record<string, (e: any) => any>;\n *  \tcontext?: Map<any, any>;\n * \t\tintro?: boolean;\n * \t\trecover?: boolean;\n * \t} : {\n * \t\ttarget: Document | Element | ShadowRoot;\n * \t\tprops: Props;\n * \t\tevents?: Record<string, (e: any) => any>;\n *  \tcontext?: Map<any, any>;\n * \t\tintro?: boolean;\n * \t\trecover?: boolean;\n * \t}} options\n * @returns {Exports}\n */\nexport function hydrate(component, options) {\n\tinit_operations();\n\toptions.intro = options.intro ?? false;\n\tconst target = options.target;\n\tconst was_hydrating = hydrating;\n\tconst previous_hydrate_node = hydrate_node;\n\n\ttry {\n\t\tvar anchor = get_first_child(target);\n\n\t\twhile (\n\t\t\tanchor &&\n\t\t\t(anchor.nodeType !== COMMENT_NODE || /** @type {Comment} */ (anchor).data !== HYDRATION_START)\n\t\t) {\n\t\t\tanchor = get_next_sibling(anchor);\n\t\t}\n\n\t\tif (!anchor) {\n\t\t\tthrow HYDRATION_ERROR;\n\t\t}\n\n\t\tset_hydrating(true);\n\t\tset_hydrate_node(/** @type {Comment} */ (anchor));\n\n\t\tconst instance = _mount(component, { ...options, anchor });\n\n\t\tset_hydrating(false);\n\n\t\treturn /**  @type {Exports} */ (instance);\n\t} catch (error) {\n\t\t// re-throw Svelte errors - they are certainly not related to hydration\n\t\tif (\n\t\t\terror instanceof Error &&\n\t\t\terror.message.split('\\n').some((line) => line.startsWith('https://svelte.dev/e/'))\n\t\t) {\n\t\t\tthrow error;\n\t\t}\n\t\tif (error !== HYDRATION_ERROR) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.warn('Failed to hydrate: ', error);\n\t\t}\n\n\t\tif (options.recover === false) {\n\t\t\te.hydration_failed();\n\t\t}\n\n\t\t// If an error occurred above, the operations might not yet have been initialised.\n\t\tinit_operations();\n\t\tclear_text_content(target);\n\n\t\tset_hydrating(false);\n\t\treturn mount(component, options);\n\t} finally {\n\t\tset_hydrating(was_hydrating);\n\t\tset_hydrate_node(previous_hydrate_node);\n\t}\n}\n\n/** @type {Map<string, number>} */\nconst document_listeners = new Map();\n\n/**\n * @template {Record<string, any>} Exports\n * @param {ComponentType<SvelteComponent<any>> | Component<any>} Component\n * @param {MountOptions} options\n * @returns {Exports}\n */\nfunction _mount(Component, { target, anchor, props = {}, events, context, intro = true }) {\n\tinit_operations();\n\n\t/** @type {Set<string>} */\n\tvar registered_events = new Set();\n\n\t/** @param {Array<string>} events */\n\tvar event_handle = (events) => {\n\t\tfor (var i = 0; i < events.length; i++) {\n\t\t\tvar event_name = events[i];\n\n\t\t\tif (registered_events.has(event_name)) continue;\n\t\t\tregistered_events.add(event_name);\n\n\t\t\tvar passive = is_passive_event(event_name);\n\n\t\t\t// Add the event listener to both the container and the document.\n\t\t\t// The container listener ensures we catch events from within in case\n\t\t\t// the outer content stops propagation of the event.\n\t\t\ttarget.addEventListener(event_name, handle_event_propagation, { passive });\n\n\t\t\tvar n = document_listeners.get(event_name);\n\n\t\t\tif (n === undefined) {\n\t\t\t\t// The document listener ensures we catch events that originate from elements that were\n\t\t\t\t// manually moved outside of the container (e.g. via manual portals).\n\t\t\t\tdocument.addEventListener(event_name, handle_event_propagation, { passive });\n\t\t\t\tdocument_listeners.set(event_name, 1);\n\t\t\t} else {\n\t\t\t\tdocument_listeners.set(event_name, n + 1);\n\t\t\t}\n\t\t}\n\t};\n\n\tevent_handle(array_from(all_registered_events));\n\troot_event_handles.add(event_handle);\n\n\t/** @type {Exports} */\n\t// @ts-expect-error will be defined because the render effect runs synchronously\n\tvar component = undefined;\n\n\tvar unmount = component_root(() => {\n\t\tvar anchor_node = anchor ?? target.appendChild(create_text());\n\n\t\tboundary(\n\t\t\t/** @type {TemplateNode} */ (anchor_node),\n\t\t\t{\n\t\t\t\tpending: () => {}\n\t\t\t},\n\t\t\t(anchor_node) => {\n\t\t\t\tif (context) {\n\t\t\t\t\tpush({});\n\t\t\t\t\tvar ctx = /** @type {ComponentContext} */ (component_context);\n\t\t\t\t\tctx.c = context;\n\t\t\t\t}\n\n\t\t\t\tif (events) {\n\t\t\t\t\t// We can't spread the object or else we'd lose the state proxy stuff, if it is one\n\t\t\t\t\t/** @type {any} */ (props).$$events = events;\n\t\t\t\t}\n\n\t\t\t\tif (hydrating) {\n\t\t\t\t\tassign_nodes(/** @type {TemplateNode} */ (anchor_node), null);\n\t\t\t\t}\n\n\t\t\t\tshould_intro = intro;\n\t\t\t\t// @ts-expect-error the public typings are not what the actual function looks like\n\t\t\t\tcomponent = Component(anchor_node, props) || {};\n\t\t\t\tshould_intro = true;\n\n\t\t\t\tif (hydrating) {\n\t\t\t\t\t/** @type {Effect & { nodes: EffectNodes }} */ (active_effect).nodes.end = hydrate_node;\n\n\t\t\t\t\tif (\n\t\t\t\t\t\thydrate_node === null ||\n\t\t\t\t\t\thydrate_node.nodeType !== COMMENT_NODE ||\n\t\t\t\t\t\t/** @type {Comment} */ (hydrate_node).data !== HYDRATION_END\n\t\t\t\t\t) {\n\t\t\t\t\t\tw.hydration_mismatch();\n\t\t\t\t\t\tthrow HYDRATION_ERROR;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (context) {\n\t\t\t\t\tpop();\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\treturn () => {\n\t\t\tfor (var event_name of registered_events) {\n\t\t\t\ttarget.removeEventListener(event_name, handle_event_propagation);\n\n\t\t\t\tvar n = /** @type {number} */ (document_listeners.get(event_name));\n\n\t\t\t\tif (--n === 0) {\n\t\t\t\t\tdocument.removeEventListener(event_name, handle_event_propagation);\n\t\t\t\t\tdocument_listeners.delete(event_name);\n\t\t\t\t} else {\n\t\t\t\t\tdocument_listeners.set(event_name, n);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\troot_event_handles.delete(event_handle);\n\n\t\t\tif (anchor_node !== anchor) {\n\t\t\t\tanchor_node.parentNode?.removeChild(anchor_node);\n\t\t\t}\n\t\t};\n\t});\n\n\tmounted_components.set(component, unmount);\n\treturn component;\n}\n\n/**\n * References of the components that were mounted or hydrated.\n * Uses a `WeakMap` to avoid memory leaks.\n */\nlet mounted_components = new WeakMap();\n\n/**\n * Unmounts a component that was previously mounted using `mount` or `hydrate`.\n *\n * Since 5.13.0, if `options.outro` is `true`, [transitions](https://svelte.dev/docs/svelte/transition) will play before the component is removed from the DOM.\n *\n * Returns a `Promise` that resolves after transitions have completed if `options.outro` is true, or immediately otherwise (prior to 5.13.0, returns `void`).\n *\n * ```js\n * import { mount, unmount } from 'svelte';\n * import App from './App.svelte';\n *\n * const app = mount(App, { target: document.body });\n *\n * // later...\n * unmount(app, { outro: true });\n * ```\n * @param {Record<string, any>} component\n * @param {{ outro?: boolean }} [options]\n * @returns {Promise<void>}\n */\nexport function unmount(component, options) {\n\tconst fn = mounted_components.get(component);\n\n\tif (fn) {\n\t\tmounted_components.delete(component);\n\t\treturn fn(options);\n\t}\n\n\tif (DEV) {\n\t\tif (STATE_SYMBOL in component) {\n\t\t\tw.state_proxy_unmount();\n\t\t} else {\n\t\t\tw.lifecycle_double_unmount();\n\t\t}\n\t}\n\n\treturn Promise.resolve();\n}\n","/** @import { Effect, TemplateNode } from '#client' */\nimport { Batch, current_batch } from '../../reactivity/batch.js';\nimport {\n\tbranch,\n\tdestroy_effect,\n\tmove_effect,\n\tpause_effect,\n\tresume_effect\n} from '../../reactivity/effects.js';\nimport { hydrate_node, hydrating } from '../hydration.js';\nimport { create_text, should_defer_append } from '../operations.js';\n\n/**\n * @typedef {{ effect: Effect, fragment: DocumentFragment }} Branch\n */\n\n/**\n * @template Key\n */\nexport class BranchManager {\n\t/** @type {TemplateNode} */\n\tanchor;\n\n\t/** @type {Map<Batch, Key>} */\n\t#batches = new Map();\n\n\t/**\n\t * Map of keys to effects that are currently rendered in the DOM.\n\t * These effects are visible and actively part of the document tree.\n\t * Example:\n\t * ```\n\t * {#if condition}\n\t * \tfoo\n\t * {:else}\n\t * \tbar\n\t * {/if}\n\t * ```\n\t * Can result in the entries `true->Effect` and `false->Effect`\n\t * @type {Map<Key, Effect>}\n\t */\n\t#onscreen = new Map();\n\n\t/**\n\t * Similar to #onscreen with respect to the keys, but contains branches that are not yet\n\t * in the DOM, because their insertion is deferred.\n\t * @type {Map<Key, Branch>}\n\t */\n\t#offscreen = new Map();\n\n\t/**\n\t * Keys of effects that are currently outroing\n\t * @type {Set<Key>}\n\t */\n\t#outroing = new Set();\n\n\t/**\n\t * Whether to pause (i.e. outro) on change, or destroy immediately.\n\t * This is necessary for `<svelte:element>`\n\t */\n\t#transition = true;\n\n\t/**\n\t * @param {TemplateNode} anchor\n\t * @param {boolean} transition\n\t */\n\tconstructor(anchor, transition = true) {\n\t\tthis.anchor = anchor;\n\t\tthis.#transition = transition;\n\t}\n\n\t#commit = () => {\n\t\tvar batch = /** @type {Batch} */ (current_batch);\n\n\t\t// if this batch was made obsolete, bail\n\t\tif (!this.#batches.has(batch)) return;\n\n\t\tvar key = /** @type {Key} */ (this.#batches.get(batch));\n\n\t\tvar onscreen = this.#onscreen.get(key);\n\n\t\tif (onscreen) {\n\t\t\t// effect is already in the DOM â€” abort any current outro\n\t\t\tresume_effect(onscreen);\n\t\t\tthis.#outroing.delete(key);\n\t\t} else {\n\t\t\t// effect is currently offscreen. put it in the DOM\n\t\t\tvar offscreen = this.#offscreen.get(key);\n\n\t\t\tif (offscreen) {\n\t\t\t\tthis.#onscreen.set(key, offscreen.effect);\n\t\t\t\tthis.#offscreen.delete(key);\n\n\t\t\t\t// remove the anchor...\n\t\t\t\t/** @type {TemplateNode} */ (offscreen.fragment.lastChild).remove();\n\n\t\t\t\t// ...and append the fragment\n\t\t\t\tthis.anchor.before(offscreen.fragment);\n\t\t\t\tonscreen = offscreen.effect;\n\t\t\t}\n\t\t}\n\n\t\tfor (const [b, k] of this.#batches) {\n\t\t\tthis.#batches.delete(b);\n\n\t\t\tif (b === batch) {\n\t\t\t\t// keep values for newer batches\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tconst offscreen = this.#offscreen.get(k);\n\n\t\t\tif (offscreen) {\n\t\t\t\t// for older batches, destroy offscreen effects\n\t\t\t\t// as they will never be committed\n\t\t\t\tdestroy_effect(offscreen.effect);\n\t\t\t\tthis.#offscreen.delete(k);\n\t\t\t}\n\t\t}\n\n\t\t// outro/destroy all onscreen effects...\n\t\tfor (const [k, effect] of this.#onscreen) {\n\t\t\t// ...except the one that was just committed\n\t\t\t//    or those that are already outroing (else the transition is aborted and the effect destroyed right away)\n\t\t\tif (k === key || this.#outroing.has(k)) continue;\n\n\t\t\tconst on_destroy = () => {\n\t\t\t\tconst keys = Array.from(this.#batches.values());\n\n\t\t\t\tif (keys.includes(k)) {\n\t\t\t\t\t// keep the effect offscreen, as another batch will need it\n\t\t\t\t\tvar fragment = document.createDocumentFragment();\n\t\t\t\t\tmove_effect(effect, fragment);\n\n\t\t\t\t\tfragment.append(create_text()); // TODO can we avoid this?\n\n\t\t\t\t\tthis.#offscreen.set(k, { effect, fragment });\n\t\t\t\t} else {\n\t\t\t\t\tdestroy_effect(effect);\n\t\t\t\t}\n\n\t\t\t\tthis.#outroing.delete(k);\n\t\t\t\tthis.#onscreen.delete(k);\n\t\t\t};\n\n\t\t\tif (this.#transition || !onscreen) {\n\t\t\t\tthis.#outroing.add(k);\n\t\t\t\tpause_effect(effect, on_destroy, false);\n\t\t\t} else {\n\t\t\t\ton_destroy();\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t * @param {Batch} batch\n\t */\n\t#discard = (batch) => {\n\t\tthis.#batches.delete(batch);\n\n\t\tconst keys = Array.from(this.#batches.values());\n\n\t\tfor (const [k, branch] of this.#offscreen) {\n\t\t\tif (!keys.includes(k)) {\n\t\t\t\tdestroy_effect(branch.effect);\n\t\t\t\tthis.#offscreen.delete(k);\n\t\t\t}\n\t\t}\n\t};\n\n\t/**\n\t *\n\t * @param {any} key\n\t * @param {null | ((target: TemplateNode) => void)} fn\n\t */\n\tensure(key, fn) {\n\t\tvar batch = /** @type {Batch} */ (current_batch);\n\t\tvar defer = should_defer_append();\n\n\t\tif (fn && !this.#onscreen.has(key) && !this.#offscreen.has(key)) {\n\t\t\tif (defer) {\n\t\t\t\tvar fragment = document.createDocumentFragment();\n\t\t\t\tvar target = create_text();\n\n\t\t\t\tfragment.append(target);\n\n\t\t\t\tthis.#offscreen.set(key, {\n\t\t\t\t\teffect: branch(() => fn(target)),\n\t\t\t\t\tfragment\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.#onscreen.set(\n\t\t\t\t\tkey,\n\t\t\t\t\tbranch(() => fn(this.anchor))\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tthis.#batches.set(batch, key);\n\n\t\tif (defer) {\n\t\t\tfor (const [k, effect] of this.#onscreen) {\n\t\t\t\tif (k === key) {\n\t\t\t\t\tbatch.unskip_effect(effect);\n\t\t\t\t} else {\n\t\t\t\t\tbatch.skip_effect(effect);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (const [k, branch] of this.#offscreen) {\n\t\t\t\tif (k === key) {\n\t\t\t\t\tbatch.unskip_effect(branch.effect);\n\t\t\t\t} else {\n\t\t\t\t\tbatch.skip_effect(branch.effect);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tbatch.oncommit(this.#commit);\n\t\t\tbatch.ondiscard(this.#discard);\n\t\t} else {\n\t\t\tif (hydrating) {\n\t\t\t\tthis.anchor = hydrate_node;\n\t\t\t}\n\n\t\t\tthis.#commit();\n\t\t}\n\t}\n}\n","/** @import { TemplateNode } from '#client' */\nimport { EFFECT_TRANSPARENT } from '#client/constants';\nimport {\n\thydrate_next,\n\thydrating,\n\tread_hydration_instruction,\n\tskip_nodes,\n\tset_hydrate_node,\n\tset_hydrating\n} from '../hydration.js';\nimport { block } from '../../reactivity/effects.js';\nimport { HYDRATION_START_ELSE } from '../../../../constants.js';\nimport { BranchManager } from './branches.js';\n\n// TODO reinstate https://github.com/sveltejs/svelte/pull/15250\n\n/**\n * @param {TemplateNode} node\n * @param {(branch: (fn: (anchor: Node) => void, flag?: boolean) => void) => void} fn\n * @param {boolean} [elseif] True if this is an `{:else if ...}` block rather than an `{#if ...}`, as that affects which transitions are considered 'local'\n * @returns {void}\n */\nexport function if_block(node, fn, elseif = false) {\n\tif (hydrating) {\n\t\thydrate_next();\n\t}\n\n\tvar branches = new BranchManager(node);\n\tvar flags = elseif ? EFFECT_TRANSPARENT : 0;\n\n\t/**\n\t * @param {boolean} condition,\n\t * @param {null | ((anchor: Node) => void)} fn\n\t */\n\tfunction update_branch(condition, fn) {\n\t\tif (hydrating) {\n\t\t\tconst is_else = read_hydration_instruction(node) === HYDRATION_START_ELSE;\n\n\t\t\tif (condition === is_else) {\n\t\t\t\t// Hydration mismatch: remove everything inside the anchor and start fresh.\n\t\t\t\t// This could happen with `{#if browser}...{/if}`, for example\n\t\t\t\tvar anchor = skip_nodes();\n\n\t\t\t\tset_hydrate_node(anchor);\n\t\t\t\tbranches.anchor = anchor;\n\n\t\t\t\tset_hydrating(false);\n\t\t\t\tbranches.ensure(condition, fn);\n\t\t\t\tset_hydrating(true);\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tbranches.ensure(condition, fn);\n\t}\n\n\tblock(() => {\n\t\tvar has_branch = false;\n\n\t\tfn((fn, flag = true) => {\n\t\t\thas_branch = true;\n\t\t\tupdate_branch(flag, fn);\n\t\t});\n\n\t\tif (!has_branch) {\n\t\t\tupdate_branch(false, null);\n\t\t}\n\t}, flags);\n}\n","/** @import { EachItem, EachOutroGroup, EachState, Effect, EffectNodes, MaybeSource, Source, TemplateNode, TransitionManager, Value } from '#client' */\n/** @import { Batch } from '../../reactivity/batch.js'; */\nimport {\n\tEACH_INDEX_REACTIVE,\n\tEACH_IS_ANIMATED,\n\tEACH_IS_CONTROLLED,\n\tEACH_ITEM_IMMUTABLE,\n\tEACH_ITEM_REACTIVE,\n\tHYDRATION_END,\n\tHYDRATION_START_ELSE\n} from '../../../../constants.js';\nimport {\n\thydrate_next,\n\thydrate_node,\n\thydrating,\n\tread_hydration_instruction,\n\tskip_nodes,\n\tset_hydrate_node,\n\tset_hydrating\n} from '../hydration.js';\nimport {\n\tclear_text_content,\n\tcreate_text,\n\tget_first_child,\n\tget_next_sibling,\n\tshould_defer_append\n} from '../operations.js';\nimport {\n\tblock,\n\tbranch,\n\tdestroy_effect,\n\tpause_effect,\n\tresume_effect\n} from '../../reactivity/effects.js';\nimport { source, mutable_source, internal_set } from '../../reactivity/sources.js';\nimport { array_from, is_array } from '../../../shared/utils.js';\nimport { BRANCH_EFFECT, COMMENT_NODE, EFFECT_OFFSCREEN, INERT } from '#client/constants';\nimport { queue_micro_task } from '../task.js';\nimport { get } from '../../runtime.js';\nimport { DEV } from 'esm-env';\nimport { derived_safe_equal } from '../../reactivity/deriveds.js';\nimport { current_batch } from '../../reactivity/batch.js';\n\n// When making substantive changes to this file, validate them with the each block stress test:\n// https://svelte.dev/playground/1972b2cf46564476ad8c8c6405b23b7b\n// This test also exists in this repo, as `packages/svelte/tests/manual/each-stress-test`\n\n/**\n * @param {any} _\n * @param {number} i\n */\nexport function index(_, i) {\n\treturn i;\n}\n\n/**\n * Pause multiple effects simultaneously, and coordinate their\n * subsequent destruction. Used in each blocks\n * @param {EachState} state\n * @param {Effect[]} to_destroy\n * @param {null | Node} controlled_anchor\n */\nfunction pause_effects(state, to_destroy, controlled_anchor) {\n\t/** @type {TransitionManager[]} */\n\tvar transitions = [];\n\tvar length = to_destroy.length;\n\n\t/** @type {EachOutroGroup} */\n\tvar group;\n\tvar remaining = to_destroy.length;\n\n\tfor (var i = 0; i < length; i++) {\n\t\tlet effect = to_destroy[i];\n\n\t\tpause_effect(\n\t\t\teffect,\n\t\t\t() => {\n\t\t\t\tif (group) {\n\t\t\t\t\tgroup.pending.delete(effect);\n\t\t\t\t\tgroup.done.add(effect);\n\n\t\t\t\t\tif (group.pending.size === 0) {\n\t\t\t\t\t\tvar groups = /** @type {Set<EachOutroGroup>} */ (state.outrogroups);\n\n\t\t\t\t\t\tdestroy_effects(array_from(group.done));\n\t\t\t\t\t\tgroups.delete(group);\n\n\t\t\t\t\t\tif (groups.size === 0) {\n\t\t\t\t\t\t\tstate.outrogroups = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tremaining -= 1;\n\t\t\t\t}\n\t\t\t},\n\t\t\tfalse\n\t\t);\n\t}\n\n\tif (remaining === 0) {\n\t\t// If we're in a controlled each block (i.e. the block is the only child of an\n\t\t// element), and we are removing all items, _and_ there are no out transitions,\n\t\t// we can use the fast path â€” emptying the element and replacing the anchor\n\t\tvar fast_path = transitions.length === 0 && controlled_anchor !== null;\n\n\t\tif (fast_path) {\n\t\t\tvar anchor = /** @type {Element} */ (controlled_anchor);\n\t\t\tvar parent_node = /** @type {Element} */ (anchor.parentNode);\n\n\t\t\tclear_text_content(parent_node);\n\t\t\tparent_node.append(anchor);\n\n\t\t\tstate.items.clear();\n\t\t}\n\n\t\tdestroy_effects(to_destroy, !fast_path);\n\t} else {\n\t\tgroup = {\n\t\t\tpending: new Set(to_destroy),\n\t\t\tdone: new Set()\n\t\t};\n\n\t\t(state.outrogroups ??= new Set()).add(group);\n\t}\n}\n\n/**\n * @param {Effect[]} to_destroy\n * @param {boolean} remove_dom\n */\nfunction destroy_effects(to_destroy, remove_dom = true) {\n\t// TODO only destroy effects if no pending batch needs them. otherwise,\n\t// just re-add the `EFFECT_OFFSCREEN` flag\n\tfor (var i = 0; i < to_destroy.length; i++) {\n\t\tdestroy_effect(to_destroy[i], remove_dom);\n\t}\n}\n\n/** @type {TemplateNode} */\nvar offscreen_anchor;\n\n/**\n * @template V\n * @param {Element | Comment} node The next sibling node, or the parent node if this is a 'controlled' block\n * @param {number} flags\n * @param {() => V[]} get_collection\n * @param {(value: V, index: number) => any} get_key\n * @param {(anchor: Node, item: MaybeSource<V>, index: MaybeSource<number>) => void} render_fn\n * @param {null | ((anchor: Node) => void)} fallback_fn\n * @returns {void}\n */\nexport function each(node, flags, get_collection, get_key, render_fn, fallback_fn = null) {\n\tvar anchor = node;\n\n\t/** @type {Map<any, EachItem>} */\n\tvar items = new Map();\n\n\tvar is_controlled = (flags & EACH_IS_CONTROLLED) !== 0;\n\n\tif (is_controlled) {\n\t\tvar parent_node = /** @type {Element} */ (node);\n\n\t\tanchor = hydrating\n\t\t\t? set_hydrate_node(get_first_child(parent_node))\n\t\t\t: parent_node.appendChild(create_text());\n\t}\n\n\tif (hydrating) {\n\t\thydrate_next();\n\t}\n\n\t/** @type {Effect | null} */\n\tvar fallback = null;\n\n\t// TODO: ideally we could use derived for runes mode but because of the ability\n\t// to use a store which can be mutated, we can't do that here as mutating a store\n\t// will still result in the collection array being the same from the store\n\tvar each_array = derived_safe_equal(() => {\n\t\tvar collection = get_collection();\n\n\t\treturn is_array(collection) ? collection : collection == null ? [] : array_from(collection);\n\t});\n\n\t/** @type {V[]} */\n\tvar array;\n\n\tvar first_run = true;\n\n\tfunction commit() {\n\t\tstate.fallback = fallback;\n\t\treconcile(state, array, anchor, flags, get_key);\n\n\t\tif (fallback !== null) {\n\t\t\tif (array.length === 0) {\n\t\t\t\tif ((fallback.f & EFFECT_OFFSCREEN) === 0) {\n\t\t\t\t\tresume_effect(fallback);\n\t\t\t\t} else {\n\t\t\t\t\tfallback.f ^= EFFECT_OFFSCREEN;\n\t\t\t\t\tmove(fallback, null, anchor);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tpause_effect(fallback, () => {\n\t\t\t\t\t// TODO only null out if no pending batch needs it,\n\t\t\t\t\t// otherwise re-add `fallback.fragment` and move the\n\t\t\t\t\t// effect into it\n\t\t\t\t\tfallback = null;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tvar effect = block(() => {\n\t\tarray = /** @type {V[]} */ (get(each_array));\n\t\tvar length = array.length;\n\n\t\t/** `true` if there was a hydration mismatch. Needs to be a `let` or else it isn't treeshaken out */\n\t\tlet mismatch = false;\n\n\t\tif (hydrating) {\n\t\t\tvar is_else = read_hydration_instruction(anchor) === HYDRATION_START_ELSE;\n\n\t\t\tif (is_else !== (length === 0)) {\n\t\t\t\t// hydration mismatch â€” remove the server-rendered DOM and start over\n\t\t\t\tanchor = skip_nodes();\n\n\t\t\t\tset_hydrate_node(anchor);\n\t\t\t\tset_hydrating(false);\n\t\t\t\tmismatch = true;\n\t\t\t}\n\t\t}\n\n\t\tvar keys = new Set();\n\t\tvar batch = /** @type {Batch} */ (current_batch);\n\t\tvar defer = should_defer_append();\n\n\t\tfor (var index = 0; index < length; index += 1) {\n\t\t\tif (\n\t\t\t\thydrating &&\n\t\t\t\thydrate_node.nodeType === COMMENT_NODE &&\n\t\t\t\t/** @type {Comment} */ (hydrate_node).data === HYDRATION_END\n\t\t\t) {\n\t\t\t\t// The server rendered fewer items than expected,\n\t\t\t\t// so break out and continue appending non-hydrated items\n\t\t\t\tanchor = /** @type {Comment} */ (hydrate_node);\n\t\t\t\tmismatch = true;\n\t\t\t\tset_hydrating(false);\n\t\t\t}\n\n\t\t\tvar value = array[index];\n\t\t\tvar key = get_key(value, index);\n\n\t\t\tvar item = first_run ? null : items.get(key);\n\n\t\t\tif (item) {\n\t\t\t\t// update before reconciliation, to trigger any async updates\n\t\t\t\tif (item.v) internal_set(item.v, value);\n\t\t\t\tif (item.i) internal_set(item.i, index);\n\n\t\t\t\tif (defer) {\n\t\t\t\t\tbatch.unskip_effect(item.e);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\titem = create_item(\n\t\t\t\t\titems,\n\t\t\t\t\tfirst_run ? anchor : (offscreen_anchor ??= create_text()),\n\t\t\t\t\tvalue,\n\t\t\t\t\tkey,\n\t\t\t\t\tindex,\n\t\t\t\t\trender_fn,\n\t\t\t\t\tflags,\n\t\t\t\t\tget_collection\n\t\t\t\t);\n\n\t\t\t\tif (!first_run) {\n\t\t\t\t\titem.e.f |= EFFECT_OFFSCREEN;\n\t\t\t\t}\n\n\t\t\t\titems.set(key, item);\n\t\t\t}\n\n\t\t\tkeys.add(key);\n\t\t}\n\n\t\tif (length === 0 && fallback_fn && !fallback) {\n\t\t\tif (first_run) {\n\t\t\t\tfallback = branch(() => fallback_fn(anchor));\n\t\t\t} else {\n\t\t\t\tfallback = branch(() => fallback_fn((offscreen_anchor ??= create_text())));\n\t\t\t\tfallback.f |= EFFECT_OFFSCREEN;\n\t\t\t}\n\t\t}\n\n\t\t// remove excess nodes\n\t\tif (hydrating && length > 0) {\n\t\t\tset_hydrate_node(skip_nodes());\n\t\t}\n\n\t\tif (!first_run) {\n\t\t\tif (defer) {\n\t\t\t\tfor (const [key, item] of items) {\n\t\t\t\t\tif (!keys.has(key)) {\n\t\t\t\t\t\tbatch.skip_effect(item.e);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbatch.oncommit(commit);\n\t\t\t\tbatch.ondiscard(() => {\n\t\t\t\t\t// TODO presumably we need to do something here?\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcommit();\n\t\t\t}\n\t\t}\n\n\t\tif (mismatch) {\n\t\t\t// continue in hydration mode\n\t\t\tset_hydrating(true);\n\t\t}\n\n\t\t// When we mount the each block for the first time, the collection won't be\n\t\t// connected to this effect as the effect hasn't finished running yet and its deps\n\t\t// won't be assigned. However, it's possible that when reconciling the each block\n\t\t// that a mutation occurred and it's made the collection MAYBE_DIRTY, so reading the\n\t\t// collection again can provide consistency to the reactive graph again as the deriveds\n\t\t// will now be `CLEAN`.\n\t\tget(each_array);\n\t});\n\n\t/** @type {EachState} */\n\tvar state = { effect, flags, items, outrogroups: null, fallback };\n\n\tfirst_run = false;\n\n\tif (hydrating) {\n\t\tanchor = hydrate_node;\n\t}\n}\n\n/**\n * Skip past any non-branch effects (which could be created with `createSubscriber`, for example) to find the next branch effect\n * @param {Effect | null} effect\n * @returns {Effect | null}\n */\nfunction skip_to_branch(effect) {\n\twhile (effect !== null && (effect.f & BRANCH_EFFECT) === 0) {\n\t\teffect = effect.next;\n\t}\n\treturn effect;\n}\n\n/**\n * Add, remove, or reorder items output by an each block as its input changes\n * @template V\n * @param {EachState} state\n * @param {Array<V>} array\n * @param {Element | Comment | Text} anchor\n * @param {number} flags\n * @param {(value: V, index: number) => any} get_key\n * @returns {void}\n */\nfunction reconcile(state, array, anchor, flags, get_key) {\n\tvar is_animated = (flags & EACH_IS_ANIMATED) !== 0;\n\n\tvar length = array.length;\n\tvar items = state.items;\n\tvar current = skip_to_branch(state.effect.first);\n\n\t/** @type {undefined | Set<Effect>} */\n\tvar seen;\n\n\t/** @type {Effect | null} */\n\tvar prev = null;\n\n\t/** @type {undefined | Set<Effect>} */\n\tvar to_animate;\n\n\t/** @type {Effect[]} */\n\tvar matched = [];\n\n\t/** @type {Effect[]} */\n\tvar stashed = [];\n\n\t/** @type {V} */\n\tvar value;\n\n\t/** @type {any} */\n\tvar key;\n\n\t/** @type {Effect | undefined} */\n\tvar effect;\n\n\t/** @type {number} */\n\tvar i;\n\n\tif (is_animated) {\n\t\tfor (i = 0; i < length; i += 1) {\n\t\t\tvalue = array[i];\n\t\t\tkey = get_key(value, i);\n\t\t\teffect = /** @type {EachItem} */ (items.get(key)).e;\n\n\t\t\t// offscreen == coming in now, no animation in that case,\n\t\t\t// else this would happen https://github.com/sveltejs/svelte/issues/17181\n\t\t\tif ((effect.f & EFFECT_OFFSCREEN) === 0) {\n\t\t\t\teffect.nodes?.a?.measure();\n\t\t\t\t(to_animate ??= new Set()).add(effect);\n\t\t\t}\n\t\t}\n\t}\n\n\tfor (i = 0; i < length; i += 1) {\n\t\tvalue = array[i];\n\t\tkey = get_key(value, i);\n\n\t\teffect = /** @type {EachItem} */ (items.get(key)).e;\n\n\t\tif (state.outrogroups !== null) {\n\t\t\tfor (const group of state.outrogroups) {\n\t\t\t\tgroup.pending.delete(effect);\n\t\t\t\tgroup.done.delete(effect);\n\t\t\t}\n\t\t}\n\n\t\tif ((effect.f & EFFECT_OFFSCREEN) !== 0) {\n\t\t\teffect.f ^= EFFECT_OFFSCREEN;\n\n\t\t\tif (effect === current) {\n\t\t\t\tmove(effect, null, anchor);\n\t\t\t} else {\n\t\t\t\tvar next = prev ? prev.next : current;\n\n\t\t\t\tif (effect === state.effect.last) {\n\t\t\t\t\tstate.effect.last = effect.prev;\n\t\t\t\t}\n\n\t\t\t\tif (effect.prev) effect.prev.next = effect.next;\n\t\t\t\tif (effect.next) effect.next.prev = effect.prev;\n\t\t\t\tlink(state, prev, effect);\n\t\t\t\tlink(state, effect, next);\n\n\t\t\t\tmove(effect, next, anchor);\n\t\t\t\tprev = effect;\n\n\t\t\t\tmatched = [];\n\t\t\t\tstashed = [];\n\n\t\t\t\tcurrent = skip_to_branch(prev.next);\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t}\n\n\t\tif ((effect.f & INERT) !== 0) {\n\t\t\tresume_effect(effect);\n\t\t\tif (is_animated) {\n\t\t\t\teffect.nodes?.a?.unfix();\n\t\t\t\t(to_animate ??= new Set()).delete(effect);\n\t\t\t}\n\t\t}\n\n\t\tif (effect !== current) {\n\t\t\tif (seen !== undefined && seen.has(effect)) {\n\t\t\t\tif (matched.length < stashed.length) {\n\t\t\t\t\t// more efficient to move later items to the front\n\t\t\t\t\tvar start = stashed[0];\n\t\t\t\t\tvar j;\n\n\t\t\t\t\tprev = start.prev;\n\n\t\t\t\t\tvar a = matched[0];\n\t\t\t\t\tvar b = matched[matched.length - 1];\n\n\t\t\t\t\tfor (j = 0; j < matched.length; j += 1) {\n\t\t\t\t\t\tmove(matched[j], start, anchor);\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (j = 0; j < stashed.length; j += 1) {\n\t\t\t\t\t\tseen.delete(stashed[j]);\n\t\t\t\t\t}\n\n\t\t\t\t\tlink(state, a.prev, b.next);\n\t\t\t\t\tlink(state, prev, a);\n\t\t\t\t\tlink(state, b, start);\n\n\t\t\t\t\tcurrent = start;\n\t\t\t\t\tprev = b;\n\t\t\t\t\ti -= 1;\n\n\t\t\t\t\tmatched = [];\n\t\t\t\t\tstashed = [];\n\t\t\t\t} else {\n\t\t\t\t\t// more efficient to move earlier items to the back\n\t\t\t\t\tseen.delete(effect);\n\t\t\t\t\tmove(effect, current, anchor);\n\n\t\t\t\t\tlink(state, effect.prev, effect.next);\n\t\t\t\t\tlink(state, effect, prev === null ? state.effect.first : prev.next);\n\t\t\t\t\tlink(state, prev, effect);\n\n\t\t\t\t\tprev = effect;\n\t\t\t\t}\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tmatched = [];\n\t\t\tstashed = [];\n\n\t\t\twhile (current !== null && current !== effect) {\n\t\t\t\t(seen ??= new Set()).add(current);\n\t\t\t\tstashed.push(current);\n\t\t\t\tcurrent = skip_to_branch(current.next);\n\t\t\t}\n\n\t\t\tif (current === null) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t}\n\n\t\tif ((effect.f & EFFECT_OFFSCREEN) === 0) {\n\t\t\tmatched.push(effect);\n\t\t}\n\n\t\tprev = effect;\n\t\tcurrent = skip_to_branch(effect.next);\n\t}\n\n\tif (state.outrogroups !== null) {\n\t\tfor (const group of state.outrogroups) {\n\t\t\tif (group.pending.size === 0) {\n\t\t\t\tdestroy_effects(array_from(group.done));\n\t\t\t\tstate.outrogroups?.delete(group);\n\t\t\t}\n\t\t}\n\n\t\tif (state.outrogroups.size === 0) {\n\t\t\tstate.outrogroups = null;\n\t\t}\n\t}\n\n\tif (current !== null || seen !== undefined) {\n\t\t/** @type {Effect[]} */\n\t\tvar to_destroy = [];\n\n\t\tif (seen !== undefined) {\n\t\t\tfor (effect of seen) {\n\t\t\t\tif ((effect.f & INERT) === 0) {\n\t\t\t\t\tto_destroy.push(effect);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\twhile (current !== null) {\n\t\t\t// If the each block isn't inert, then inert effects are currently outroing and will be removed once the transition is finished\n\t\t\tif ((current.f & INERT) === 0 && current !== state.fallback) {\n\t\t\t\tto_destroy.push(current);\n\t\t\t}\n\n\t\t\tcurrent = skip_to_branch(current.next);\n\t\t}\n\n\t\tvar destroy_length = to_destroy.length;\n\n\t\tif (destroy_length > 0) {\n\t\t\tvar controlled_anchor = (flags & EACH_IS_CONTROLLED) !== 0 && length === 0 ? anchor : null;\n\n\t\t\tif (is_animated) {\n\t\t\t\tfor (i = 0; i < destroy_length; i += 1) {\n\t\t\t\t\tto_destroy[i].nodes?.a?.measure();\n\t\t\t\t}\n\n\t\t\t\tfor (i = 0; i < destroy_length; i += 1) {\n\t\t\t\t\tto_destroy[i].nodes?.a?.fix();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tpause_effects(state, to_destroy, controlled_anchor);\n\t\t}\n\t}\n\n\tif (is_animated) {\n\t\tqueue_micro_task(() => {\n\t\t\tif (to_animate === undefined) return;\n\t\t\tfor (effect of to_animate) {\n\t\t\t\teffect.nodes?.a?.apply();\n\t\t\t}\n\t\t});\n\t}\n}\n\n/**\n * @template V\n * @param {Map<any, EachItem>} items\n * @param {Node} anchor\n * @param {V} value\n * @param {unknown} key\n * @param {number} index\n * @param {(anchor: Node, item: V | Source<V>, index: number | Value<number>, collection: () => V[]) => void} render_fn\n * @param {number} flags\n * @param {() => V[]} get_collection\n * @returns {EachItem}\n */\nfunction create_item(items, anchor, value, key, index, render_fn, flags, get_collection) {\n\tvar v =\n\t\t(flags & EACH_ITEM_REACTIVE) !== 0\n\t\t\t? (flags & EACH_ITEM_IMMUTABLE) === 0\n\t\t\t\t? mutable_source(value, false, false)\n\t\t\t\t: source(value)\n\t\t\t: null;\n\n\tvar i = (flags & EACH_INDEX_REACTIVE) !== 0 ? source(index) : null;\n\n\tif (DEV && v) {\n\t\t// For tracing purposes, we need to link the source signal we create with the\n\t\t// collection + index so that tracing works as intended\n\t\tv.trace = () => {\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-unused-expressions\n\t\t\tget_collection()[i?.v ?? index];\n\t\t};\n\t}\n\n\treturn {\n\t\tv,\n\t\ti,\n\t\te: branch(() => {\n\t\t\trender_fn(anchor, v ?? value, i ?? index, get_collection);\n\n\t\t\treturn () => {\n\t\t\t\titems.delete(key);\n\t\t\t};\n\t\t})\n\t};\n}\n\n/**\n * @param {Effect} effect\n * @param {Effect | null} next\n * @param {Text | Element | Comment} anchor\n */\nfunction move(effect, next, anchor) {\n\tif (!effect.nodes) return;\n\n\tvar node = effect.nodes.start;\n\tvar end = effect.nodes.end;\n\n\tvar dest =\n\t\tnext && (next.f & EFFECT_OFFSCREEN) === 0\n\t\t\t? /** @type {EffectNodes} */ (next.nodes).start\n\t\t\t: anchor;\n\n\twhile (node !== null) {\n\t\tvar next_node = /** @type {TemplateNode} */ (get_next_sibling(node));\n\t\tdest.before(node);\n\n\t\tif (node === end) {\n\t\t\treturn;\n\t\t}\n\n\t\tnode = next_node;\n\t}\n}\n\n/**\n * @param {EachState} state\n * @param {Effect | null} prev\n * @param {Effect | null} next\n */\nfunction link(state, prev, next) {\n\tif (prev === null) {\n\t\tstate.effect.first = next;\n\t} else {\n\t\tprev.next = next;\n\t}\n\n\tif (next === null) {\n\t\tstate.effect.last = prev;\n\t} else {\n\t\tnext.prev = prev;\n\t}\n}\n","function r(e){var t,f,n=\"\";if(\"string\"==typeof e||\"number\"==typeof e)n+=e;else if(\"object\"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=\" \"),n+=f)}else for(f in e)e[f]&&(n&&(n+=\" \"),n+=f);return n}export function clsx(){for(var e,t,f=0,n=\"\",o=arguments.length;f<o;f++)(e=arguments[f])&&(t=r(e))&&(n&&(n+=\" \"),n+=t);return n}export default clsx;","import { escape_html } from '../../escaping.js';\nimport { clsx as _clsx } from 'clsx';\n\n/**\n * `<div translate={false}>` should be rendered as `<div translate=\"no\">` and _not_\n * `<div translate=\"false\">`, which is equivalent to `<div translate=\"yes\">`. There\n * may be other odd cases that need to be added to this list in future\n * @type {Record<string, Map<any, string>>}\n */\nconst replacements = {\n\ttranslate: new Map([\n\t\t[true, 'yes'],\n\t\t[false, 'no']\n\t])\n};\n\n/**\n * @template V\n * @param {string} name\n * @param {V} value\n * @param {boolean} [is_boolean]\n * @returns {string}\n */\nexport function attr(name, value, is_boolean = false) {\n\t// attribute hidden for values other than \"until-found\" behaves like a boolean attribute\n\tif (name === 'hidden' && value !== 'until-found') {\n\t\tis_boolean = true;\n\t}\n\tif (value == null || (!value && is_boolean)) return '';\n\tconst normalized = (name in replacements && replacements[name].get(value)) || value;\n\tconst assignment = is_boolean ? '' : `=\"${escape_html(normalized, true)}\"`;\n\treturn ` ${name}${assignment}`;\n}\n\n/**\n * Small wrapper around clsx to preserve Svelte's (weird) handling of falsy values.\n * TODO Svelte 6 revisit this, and likely turn all falsy values into the empty string (what clsx also does)\n * @param  {any} value\n */\nexport function clsx(value) {\n\tif (typeof value === 'object') {\n\t\treturn _clsx(value);\n\t} else {\n\t\treturn value ?? '';\n\t}\n}\n\nconst whitespace = [...' \\t\\n\\r\\f\\u00a0\\u000b\\ufeff'];\n\n/**\n * @param {any} value\n * @param {string | null} [hash]\n * @param {Record<string, boolean>} [directives]\n * @returns {string | null}\n */\nexport function to_class(value, hash, directives) {\n\tvar classname = value == null ? '' : '' + value;\n\n\tif (hash) {\n\t\tclassname = classname ? classname + ' ' + hash : hash;\n\t}\n\n\tif (directives) {\n\t\tfor (var key in directives) {\n\t\t\tif (directives[key]) {\n\t\t\t\tclassname = classname ? classname + ' ' + key : key;\n\t\t\t} else if (classname.length) {\n\t\t\t\tvar len = key.length;\n\t\t\t\tvar a = 0;\n\n\t\t\t\twhile ((a = classname.indexOf(key, a)) >= 0) {\n\t\t\t\t\tvar b = a + len;\n\n\t\t\t\t\tif (\n\t\t\t\t\t\t(a === 0 || whitespace.includes(classname[a - 1])) &&\n\t\t\t\t\t\t(b === classname.length || whitespace.includes(classname[b]))\n\t\t\t\t\t) {\n\t\t\t\t\t\tclassname = (a === 0 ? '' : classname.substring(0, a)) + classname.substring(b + 1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ta = b;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn classname === '' ? null : classname;\n}\n\n/**\n *\n * @param {Record<string,any>} styles\n * @param {boolean} important\n */\nfunction append_styles(styles, important = false) {\n\tvar separator = important ? ' !important;' : ';';\n\tvar css = '';\n\n\tfor (var key in styles) {\n\t\tvar value = styles[key];\n\t\tif (value != null && value !== '') {\n\t\t\tcss += ' ' + key + ': ' + value + separator;\n\t\t}\n\t}\n\n\treturn css;\n}\n\n/**\n * @param {string} name\n * @returns {string}\n */\nfunction to_css_name(name) {\n\tif (name[0] !== '-' || name[1] !== '-') {\n\t\treturn name.toLowerCase();\n\t}\n\treturn name;\n}\n\n/**\n * @param {any} value\n * @param {Record<string, any> | [Record<string, any>, Record<string, any>]} [styles]\n * @returns {string | null}\n */\nexport function to_style(value, styles) {\n\tif (styles) {\n\t\tvar new_style = '';\n\n\t\t/** @type {Record<string,any> | undefined} */\n\t\tvar normal_styles;\n\n\t\t/** @type {Record<string,any> | undefined} */\n\t\tvar important_styles;\n\n\t\tif (Array.isArray(styles)) {\n\t\t\tnormal_styles = styles[0];\n\t\t\timportant_styles = styles[1];\n\t\t} else {\n\t\t\tnormal_styles = styles;\n\t\t}\n\n\t\tif (value) {\n\t\t\tvalue = String(value)\n\t\t\t\t.replaceAll(/\\s*\\/\\*.*?\\*\\/\\s*/g, '')\n\t\t\t\t.trim();\n\n\t\t\t/** @type {boolean | '\"' | \"'\"} */\n\t\t\tvar in_str = false;\n\t\t\tvar in_apo = 0;\n\t\t\tvar in_comment = false;\n\n\t\t\tvar reserved_names = [];\n\n\t\t\tif (normal_styles) {\n\t\t\t\treserved_names.push(...Object.keys(normal_styles).map(to_css_name));\n\t\t\t}\n\t\t\tif (important_styles) {\n\t\t\t\treserved_names.push(...Object.keys(important_styles).map(to_css_name));\n\t\t\t}\n\n\t\t\tvar start_index = 0;\n\t\t\tvar name_index = -1;\n\n\t\t\tconst len = value.length;\n\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\tvar c = value[i];\n\n\t\t\t\tif (in_comment) {\n\t\t\t\t\tif (c === '/' && value[i - 1] === '*') {\n\t\t\t\t\t\tin_comment = false;\n\t\t\t\t\t}\n\t\t\t\t} else if (in_str) {\n\t\t\t\t\tif (in_str === c) {\n\t\t\t\t\t\tin_str = false;\n\t\t\t\t\t}\n\t\t\t\t} else if (c === '/' && value[i + 1] === '*') {\n\t\t\t\t\tin_comment = true;\n\t\t\t\t} else if (c === '\"' || c === \"'\") {\n\t\t\t\t\tin_str = c;\n\t\t\t\t} else if (c === '(') {\n\t\t\t\t\tin_apo++;\n\t\t\t\t} else if (c === ')') {\n\t\t\t\t\tin_apo--;\n\t\t\t\t}\n\n\t\t\t\tif (!in_comment && in_str === false && in_apo === 0) {\n\t\t\t\t\tif (c === ':' && name_index === -1) {\n\t\t\t\t\t\tname_index = i;\n\t\t\t\t\t} else if (c === ';' || i === len - 1) {\n\t\t\t\t\t\tif (name_index !== -1) {\n\t\t\t\t\t\t\tvar name = to_css_name(value.substring(start_index, name_index).trim());\n\n\t\t\t\t\t\t\tif (!reserved_names.includes(name)) {\n\t\t\t\t\t\t\t\tif (c !== ';') {\n\t\t\t\t\t\t\t\t\ti++;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tvar property = value.substring(start_index, i).trim();\n\t\t\t\t\t\t\t\tnew_style += ' ' + property + ';';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstart_index = i + 1;\n\t\t\t\t\t\tname_index = -1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (normal_styles) {\n\t\t\tnew_style += append_styles(normal_styles);\n\t\t}\n\n\t\tif (important_styles) {\n\t\t\tnew_style += append_styles(important_styles, true);\n\t\t}\n\n\t\tnew_style = new_style.trim();\n\t\treturn new_style === '' ? null : new_style;\n\t}\n\n\treturn value == null ? null : String(value);\n}\n","import { to_class } from '../../../shared/attributes.js';\nimport { hydrating } from '../hydration.js';\n\n/**\n * @param {Element} dom\n * @param {boolean | number} is_html\n * @param {string | null} value\n * @param {string} [hash]\n * @param {Record<string, any>} [prev_classes]\n * @param {Record<string, any>} [next_classes]\n * @returns {Record<string, boolean> | undefined}\n */\nexport function set_class(dom, is_html, value, hash, prev_classes, next_classes) {\n\t// @ts-expect-error need to add __className to patched prototype\n\tvar prev = dom.__className;\n\n\tif (\n\t\thydrating ||\n\t\tprev !== value ||\n\t\tprev === undefined // for edge case of `class={undefined}`\n\t) {\n\t\tvar next_class_name = to_class(value, hash, next_classes);\n\n\t\tif (!hydrating || next_class_name !== dom.getAttribute('class')) {\n\t\t\t// Removing the attribute when the value is only an empty string causes\n\t\t\t// performance issues vs simply making the className an empty string. So\n\t\t\t// we should only remove the class if the value is nullish\n\t\t\t// and there no hash/directives :\n\t\t\tif (next_class_name == null) {\n\t\t\t\tdom.removeAttribute('class');\n\t\t\t} else if (is_html) {\n\t\t\t\tdom.className = next_class_name;\n\t\t\t} else {\n\t\t\t\tdom.setAttribute('class', next_class_name);\n\t\t\t}\n\t\t}\n\n\t\t// @ts-expect-error need to add __className to patched prototype\n\t\tdom.__className = value;\n\t} else if (next_classes && prev_classes !== next_classes) {\n\t\tfor (var key in next_classes) {\n\t\t\tvar is_present = !!next_classes[key];\n\n\t\t\tif (prev_classes == null || is_present !== !!prev_classes[key]) {\n\t\t\t\tdom.classList.toggle(key, is_present);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn next_classes;\n}\n","import { effect, teardown } from '../../../reactivity/effects.js';\nimport { listen_to_event_and_reset_event } from './shared.js';\nimport { is } from '../../../proxy.js';\nimport { is_array } from '../../../../shared/utils.js';\nimport * as w from '../../../warnings.js';\nimport { Batch, current_batch, previous_batch } from '../../../reactivity/batch.js';\n\n/**\n * Selects the correct option(s) (depending on whether this is a multiple select)\n * @template V\n * @param {HTMLSelectElement} select\n * @param {V} value\n * @param {boolean} mounting\n */\nexport function select_option(select, value, mounting = false) {\n\tif (select.multiple) {\n\t\t// If value is null or undefined, keep the selection as is\n\t\tif (value == undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If not an array, warn and keep the selection as is\n\t\tif (!is_array(value)) {\n\t\t\treturn w.select_multiple_invalid_value();\n\t\t}\n\n\t\t// Otherwise, update the selection\n\t\tfor (var option of select.options) {\n\t\t\toption.selected = value.includes(get_option_value(option));\n\t\t}\n\n\t\treturn;\n\t}\n\n\tfor (option of select.options) {\n\t\tvar option_value = get_option_value(option);\n\t\tif (is(option_value, value)) {\n\t\t\toption.selected = true;\n\t\t\treturn;\n\t\t}\n\t}\n\n\tif (!mounting || value !== undefined) {\n\t\tselect.selectedIndex = -1; // no option should be selected\n\t}\n}\n\n/**\n * Selects the correct option(s) if `value` is given,\n * and then sets up a mutation observer to sync the\n * current selection to the dom when it changes. Such\n * changes could for example occur when options are\n * inside an `#each` block.\n * @param {HTMLSelectElement} select\n */\nexport function init_select(select) {\n\tvar observer = new MutationObserver(() => {\n\t\t// @ts-ignore\n\t\tselect_option(select, select.__value);\n\t\t// Deliberately don't update the potential binding value,\n\t\t// the model should be preserved unless explicitly changed\n\t});\n\n\tobserver.observe(select, {\n\t\t// Listen to option element changes\n\t\tchildList: true,\n\t\tsubtree: true, // because of <optgroup>\n\t\t// Listen to option element value attribute changes\n\t\t// (doesn't get notified of select value changes,\n\t\t// because that property is not reflected as an attribute)\n\t\tattributes: true,\n\t\tattributeFilter: ['value']\n\t});\n\n\tteardown(() => {\n\t\tobserver.disconnect();\n\t});\n}\n\n/**\n * @param {HTMLSelectElement} select\n * @param {() => unknown} get\n * @param {(value: unknown) => void} set\n * @returns {void}\n */\nexport function bind_select_value(select, get, set = get) {\n\tvar batches = new WeakSet();\n\tvar mounting = true;\n\n\tlisten_to_event_and_reset_event(select, 'change', (is_reset) => {\n\t\tvar query = is_reset ? '[selected]' : ':checked';\n\t\t/** @type {unknown} */\n\t\tvar value;\n\n\t\tif (select.multiple) {\n\t\t\tvalue = [].map.call(select.querySelectorAll(query), get_option_value);\n\t\t} else {\n\t\t\t/** @type {HTMLOptionElement | null} */\n\t\t\tvar selected_option =\n\t\t\t\tselect.querySelector(query) ??\n\t\t\t\t// will fall back to first non-disabled option if no option is selected\n\t\t\t\tselect.querySelector('option:not([disabled])');\n\t\t\tvalue = selected_option && get_option_value(selected_option);\n\t\t}\n\n\t\tset(value);\n\n\t\tif (current_batch !== null) {\n\t\t\tbatches.add(current_batch);\n\t\t}\n\t});\n\n\t// Needs to be an effect, not a render_effect, so that in case of each loops the logic runs after the each block has updated\n\teffect(() => {\n\t\tvar value = get();\n\n\t\tif (select === document.activeElement) {\n\t\t\t// we need both, because in non-async mode, render effects run before previous_batch is set\n\t\t\tvar batch = /** @type {Batch} */ (previous_batch ?? current_batch);\n\n\t\t\t// Don't update the <select> if it is focused. We can get here if, for example,\n\t\t\t// an update is deferred because of async work depending on the select:\n\t\t\t//\n\t\t\t// <select bind:value={selected}>...</select>\n\t\t\t// <p>{await find(selected)}</p>\n\t\t\tif (batches.has(batch)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tselect_option(select, value, mounting);\n\n\t\t// Mounting and value undefined -> take selection from dom\n\t\tif (mounting && value === undefined) {\n\t\t\t/** @type {HTMLOptionElement | null} */\n\t\t\tvar selected_option = select.querySelector(':checked');\n\t\t\tif (selected_option !== null) {\n\t\t\t\tvalue = get_option_value(selected_option);\n\t\t\t\tset(value);\n\t\t\t}\n\t\t}\n\n\t\t// @ts-ignore\n\t\tselect.__value = value;\n\t\tmounting = false;\n\t});\n\n\tinit_select(select);\n}\n\n/** @param {HTMLOptionElement} option */\nfunction get_option_value(option) {\n\t// __value only exists if the <option> has a value attribute\n\tif ('__value' in option) {\n\t\treturn option.__value;\n\t} else {\n\t\treturn option.value;\n\t}\n}\n","/** @import { Blocker, Effect } from '#client' */\nimport { DEV } from 'esm-env';\nimport { hydrating, set_hydrating } from '../hydration.js';\nimport { get_descriptors, get_prototype_of } from '../../../shared/utils.js';\nimport { create_event, delegate } from './events.js';\nimport { add_form_reset_listener, autofocus } from './misc.js';\nimport * as w from '../../warnings.js';\nimport { LOADING_ATTR_SYMBOL } from '#client/constants';\nimport { queue_micro_task } from '../task.js';\nimport { is_capture_event, can_delegate_event, normalize_attribute } from '../../../../utils.js';\nimport {\n\tactive_effect,\n\tactive_reaction,\n\tget,\n\tset_active_effect,\n\tset_active_reaction\n} from '../../runtime.js';\nimport { attach } from './attachments.js';\nimport { clsx } from '../../../shared/attributes.js';\nimport { set_class } from './class.js';\nimport { set_style } from './style.js';\nimport { ATTACHMENT_KEY, NAMESPACE_HTML, UNINITIALIZED } from '../../../../constants.js';\nimport { branch, destroy_effect, effect, managed } from '../../reactivity/effects.js';\nimport { init_select, select_option } from './bindings/select.js';\nimport { flatten } from '../../reactivity/async.js';\n\nexport const CLASS = Symbol('class');\nexport const STYLE = Symbol('style');\n\nconst IS_CUSTOM_ELEMENT = Symbol('is custom element');\nconst IS_HTML = Symbol('is html');\n\n/**\n * The value/checked attribute in the template actually corresponds to the defaultValue property, so we need\n * to remove it upon hydration to avoid a bug when someone resets the form value.\n * @param {HTMLInputElement} input\n * @returns {void}\n */\nexport function remove_input_defaults(input) {\n\tif (!hydrating) return;\n\n\tvar already_removed = false;\n\n\t// We try and remove the default attributes later, rather than sync during hydration.\n\t// Doing it sync during hydration has a negative impact on performance, but deferring the\n\t// work in an idle task alleviates this greatly. If a form reset event comes in before\n\t// the idle callback, then we ensure the input defaults are cleared just before.\n\tvar remove_defaults = () => {\n\t\tif (already_removed) return;\n\t\talready_removed = true;\n\n\t\t// Remove the attributes but preserve the values\n\t\tif (input.hasAttribute('value')) {\n\t\t\tvar value = input.value;\n\t\t\tset_attribute(input, 'value', null);\n\t\t\tinput.value = value;\n\t\t}\n\n\t\tif (input.hasAttribute('checked')) {\n\t\t\tvar checked = input.checked;\n\t\t\tset_attribute(input, 'checked', null);\n\t\t\tinput.checked = checked;\n\t\t}\n\t};\n\n\t// @ts-expect-error\n\tinput.__on_r = remove_defaults;\n\tqueue_micro_task(remove_defaults);\n\tadd_form_reset_listener();\n}\n\n/**\n * @param {Element} element\n * @param {any} value\n */\nexport function set_value(element, value) {\n\tvar attributes = get_attributes(element);\n\n\tif (\n\t\tattributes.value ===\n\t\t\t(attributes.value =\n\t\t\t\t// treat null and undefined the same for the initial value\n\t\t\t\tvalue ?? undefined) ||\n\t\t// @ts-expect-error\n\t\t// `progress` elements always need their value set when it's `0`\n\t\t(element.value === value && (value !== 0 || element.nodeName !== 'PROGRESS'))\n\t) {\n\t\treturn;\n\t}\n\n\t// @ts-expect-error\n\telement.value = value ?? '';\n}\n\n/**\n * @param {Element} element\n * @param {boolean} checked\n */\nexport function set_checked(element, checked) {\n\tvar attributes = get_attributes(element);\n\n\tif (\n\t\tattributes.checked ===\n\t\t(attributes.checked =\n\t\t\t// treat null and undefined the same for the initial value\n\t\t\tchecked ?? undefined)\n\t) {\n\t\treturn;\n\t}\n\n\t// @ts-expect-error\n\telement.checked = checked;\n}\n\n/**\n * Sets the `selected` attribute on an `option` element.\n * Not set through the property because that doesn't reflect to the DOM,\n * which means it wouldn't be taken into account when a form is reset.\n * @param {HTMLOptionElement} element\n * @param {boolean} selected\n */\nexport function set_selected(element, selected) {\n\tif (selected) {\n\t\t// The selected option could've changed via user selection, and\n\t\t// setting the value without this check would set it back.\n\t\tif (!element.hasAttribute('selected')) {\n\t\t\telement.setAttribute('selected', '');\n\t\t}\n\t} else {\n\t\telement.removeAttribute('selected');\n\t}\n}\n\n/**\n * Applies the default checked property without influencing the current checked property.\n * @param {HTMLInputElement} element\n * @param {boolean} checked\n */\nexport function set_default_checked(element, checked) {\n\tconst existing_value = element.checked;\n\telement.defaultChecked = checked;\n\telement.checked = existing_value;\n}\n\n/**\n * Applies the default value property without influencing the current value property.\n * @param {HTMLInputElement | HTMLTextAreaElement} element\n * @param {string} value\n */\nexport function set_default_value(element, value) {\n\tconst existing_value = element.value;\n\telement.defaultValue = value;\n\telement.value = existing_value;\n}\n\n/**\n * @param {Element} element\n * @param {string} attribute\n * @param {string | null} value\n * @param {boolean} [skip_warning]\n */\nexport function set_attribute(element, attribute, value, skip_warning) {\n\tvar attributes = get_attributes(element);\n\n\tif (hydrating) {\n\t\tattributes[attribute] = element.getAttribute(attribute);\n\n\t\tif (\n\t\t\tattribute === 'src' ||\n\t\t\tattribute === 'srcset' ||\n\t\t\t(attribute === 'href' && element.nodeName === 'LINK')\n\t\t) {\n\t\t\tif (!skip_warning) {\n\t\t\t\tcheck_src_in_dev_hydration(element, attribute, value ?? '');\n\t\t\t}\n\n\t\t\t// If we reset these attributes, they would result in another network request, which we want to avoid.\n\t\t\t// We assume they are the same between client and server as checking if they are equal is expensive\n\t\t\t// (we can't just compare the strings as they can be different between client and server but result in the\n\t\t\t// same url, so we would need to create hidden anchor elements to compare them)\n\t\t\treturn;\n\t\t}\n\t}\n\n\tif (attributes[attribute] === (attributes[attribute] = value)) return;\n\n\tif (attribute === 'loading') {\n\t\t// @ts-expect-error\n\t\telement[LOADING_ATTR_SYMBOL] = value;\n\t}\n\n\tif (value == null) {\n\t\telement.removeAttribute(attribute);\n\t} else if (typeof value !== 'string' && get_setters(element).includes(attribute)) {\n\t\t// @ts-ignore\n\t\telement[attribute] = value;\n\t} else {\n\t\telement.setAttribute(attribute, value);\n\t}\n}\n\n/**\n * @param {Element} dom\n * @param {string} attribute\n * @param {string} value\n */\nexport function set_xlink_attribute(dom, attribute, value) {\n\tdom.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\n\n/**\n * @param {HTMLElement} node\n * @param {string} prop\n * @param {any} value\n */\nexport function set_custom_element_data(node, prop, value) {\n\t// We need to ensure that setting custom element props, which can\n\t// invoke lifecycle methods on other custom elements, does not also\n\t// associate those lifecycle methods with the current active reaction\n\t// or effect\n\tvar previous_reaction = active_reaction;\n\tvar previous_effect = active_effect;\n\n\t// If we're hydrating but the custom element is from Svelte, and it already scaffolded,\n\t// then it might run block logic in hydration mode, which we have to prevent.\n\tlet was_hydrating = hydrating;\n\tif (hydrating) {\n\t\tset_hydrating(false);\n\t}\n\n\tset_active_reaction(null);\n\tset_active_effect(null);\n\n\ttry {\n\t\tif (\n\t\t\t// `style` should use `set_attribute` rather than the setter\n\t\t\tprop !== 'style' &&\n\t\t\t// Don't compute setters for custom elements while they aren't registered yet,\n\t\t\t// because during their upgrade/instantiation they might add more setters.\n\t\t\t// Instead, fall back to a simple \"an object, then set as property\" heuristic.\n\t\t\t(setters_cache.has(node.getAttribute('is') || node.nodeName) ||\n\t\t\t// customElements may not be available in browser extension contexts\n\t\t\t!customElements ||\n\t\t\tcustomElements.get(node.getAttribute('is') || node.tagName.toLowerCase())\n\t\t\t\t? get_setters(node).includes(prop)\n\t\t\t\t: value && typeof value === 'object')\n\t\t) {\n\t\t\t// @ts-expect-error\n\t\t\tnode[prop] = value;\n\t\t} else {\n\t\t\t// We did getters etc checks already, stringify before passing to set_attribute\n\t\t\t// to ensure it doesn't invoke the same logic again, and potentially populating\n\t\t\t// the setters cache too early.\n\t\t\tset_attribute(node, prop, value == null ? value : String(value));\n\t\t}\n\t} finally {\n\t\tset_active_reaction(previous_reaction);\n\t\tset_active_effect(previous_effect);\n\t\tif (was_hydrating) {\n\t\t\tset_hydrating(true);\n\t\t}\n\t}\n}\n\n/**\n * Spreads attributes onto a DOM element, taking into account the currently set attributes\n * @param {Element & ElementCSSInlineStyle} element\n * @param {Record<string | symbol, any> | undefined} prev\n * @param {Record<string | symbol, any>} next New attributes - this function mutates this object\n * @param {string} [css_hash]\n * @param {boolean} [should_remove_defaults]\n * @param {boolean} [skip_warning]\n * @returns {Record<string, any>}\n */\nfunction set_attributes(\n\telement,\n\tprev,\n\tnext,\n\tcss_hash,\n\tshould_remove_defaults = false,\n\tskip_warning = false\n) {\n\tif (hydrating && should_remove_defaults && element.tagName === 'INPUT') {\n\t\tvar input = /** @type {HTMLInputElement} */ (element);\n\t\tvar attribute = input.type === 'checkbox' ? 'defaultChecked' : 'defaultValue';\n\n\t\tif (!(attribute in next)) {\n\t\t\tremove_input_defaults(input);\n\t\t}\n\t}\n\n\tvar attributes = get_attributes(element);\n\n\tvar is_custom_element = attributes[IS_CUSTOM_ELEMENT];\n\tvar preserve_attribute_case = !attributes[IS_HTML];\n\n\t// If we're hydrating but the custom element is from Svelte, and it already scaffolded,\n\t// then it might run block logic in hydration mode, which we have to prevent.\n\tlet is_hydrating_custom_element = hydrating && is_custom_element;\n\tif (is_hydrating_custom_element) {\n\t\tset_hydrating(false);\n\t}\n\n\tvar current = prev || {};\n\tvar is_option_element = element.tagName === 'OPTION';\n\n\tfor (var key in prev) {\n\t\tif (!(key in next)) {\n\t\t\tnext[key] = null;\n\t\t}\n\t}\n\n\tif (next.class) {\n\t\tnext.class = clsx(next.class);\n\t} else if (css_hash || next[CLASS]) {\n\t\tnext.class = null; /* force call to set_class() */\n\t}\n\n\tif (next[STYLE]) {\n\t\tnext.style ??= null; /* force call to set_style() */\n\t}\n\n\tvar setters = get_setters(element);\n\n\t// since key is captured we use const\n\tfor (const key in next) {\n\t\t// let instead of var because referenced in a closure\n\t\tlet value = next[key];\n\n\t\t// Up here because we want to do this for the initial value, too, even if it's undefined,\n\t\t// and this wouldn't be reached in case of undefined because of the equality check below\n\t\tif (is_option_element && key === 'value' && value == null) {\n\t\t\t// The <option> element is a special case because removing the value attribute means\n\t\t\t// the value is set to the text content of the option element, and setting the value\n\t\t\t// to null or undefined means the value is set to the string \"null\" or \"undefined\".\n\t\t\t// To align with how we handle this case in non-spread-scenarios, this logic is needed.\n\t\t\t// There's a super-edge-case bug here that is left in in favor of smaller code size:\n\t\t\t// Because of the \"set missing props to null\" logic above, we can't differentiate\n\t\t\t// between a missing value and an explicitly set value of null or undefined. That means\n\t\t\t// that once set, the value attribute of an <option> element can't be removed. This is\n\t\t\t// a very rare edge case, and removing the attribute altogether isn't possible either\n\t\t\t// for the <option value={undefined}> case, so we're not losing any functionality here.\n\t\t\t// @ts-ignore\n\t\t\telement.value = element.__value = '';\n\t\t\tcurrent[key] = value;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (key === 'class') {\n\t\t\tvar is_html = element.namespaceURI === 'http://www.w3.org/1999/xhtml';\n\t\t\tset_class(element, is_html, value, css_hash, prev?.[CLASS], next[CLASS]);\n\t\t\tcurrent[key] = value;\n\t\t\tcurrent[CLASS] = next[CLASS];\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (key === 'style') {\n\t\t\tset_style(element, value, prev?.[STYLE], next[STYLE]);\n\t\t\tcurrent[key] = value;\n\t\t\tcurrent[STYLE] = next[STYLE];\n\t\t\tcontinue;\n\t\t}\n\n\t\tvar prev_value = current[key];\n\n\t\t// Skip if value is unchanged, unless it's `undefined` and the element still has the attribute\n\t\tif (value === prev_value && !(value === undefined && element.hasAttribute(key))) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tcurrent[key] = value;\n\n\t\tvar prefix = key[0] + key[1]; // this is faster than key.slice(0, 2)\n\t\tif (prefix === '$$') continue;\n\n\t\tif (prefix === 'on') {\n\t\t\t/** @type {{ capture?: true }} */\n\t\t\tconst opts = {};\n\t\t\tconst event_handle_key = '$$' + key;\n\t\t\tlet event_name = key.slice(2);\n\t\t\tvar delegated = can_delegate_event(event_name);\n\n\t\t\tif (is_capture_event(event_name)) {\n\t\t\t\tevent_name = event_name.slice(0, -7);\n\t\t\t\topts.capture = true;\n\t\t\t}\n\n\t\t\tif (!delegated && prev_value) {\n\t\t\t\t// Listening to same event but different handler -> our handle function below takes care of this\n\t\t\t\t// If we were to remove and add listeners in this case, it could happen that the event is \"swallowed\"\n\t\t\t\t// (the browser seems to not know yet that a new one exists now) and doesn't reach the handler\n\t\t\t\t// https://github.com/sveltejs/svelte/issues/11903\n\t\t\t\tif (value != null) continue;\n\n\t\t\t\telement.removeEventListener(event_name, current[event_handle_key], opts);\n\t\t\t\tcurrent[event_handle_key] = null;\n\t\t\t}\n\n\t\t\tif (value != null) {\n\t\t\t\tif (!delegated) {\n\t\t\t\t\t/**\n\t\t\t\t\t * @this {any}\n\t\t\t\t\t * @param {Event} evt\n\t\t\t\t\t */\n\t\t\t\t\tfunction handle(evt) {\n\t\t\t\t\t\tcurrent[key].call(this, evt);\n\t\t\t\t\t}\n\n\t\t\t\t\tcurrent[event_handle_key] = create_event(event_name, element, handle, opts);\n\t\t\t\t} else {\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\telement[`__${event_name}`] = value;\n\t\t\t\t\tdelegate([event_name]);\n\t\t\t\t}\n\t\t\t} else if (delegated) {\n\t\t\t\t// @ts-ignore\n\t\t\t\telement[`__${event_name}`] = undefined;\n\t\t\t}\n\t\t} else if (key === 'style') {\n\t\t\t// avoid using the setter\n\t\t\tset_attribute(element, key, value);\n\t\t} else if (key === 'autofocus') {\n\t\t\tautofocus(/** @type {HTMLElement} */ (element), Boolean(value));\n\t\t} else if (!is_custom_element && (key === '__value' || (key === 'value' && value != null))) {\n\t\t\t// @ts-ignore We're not running this for custom elements because __value is actually\n\t\t\t// how Lit stores the current value on the element, and messing with that would break things.\n\t\t\telement.value = element.__value = value;\n\t\t} else if (key === 'selected' && is_option_element) {\n\t\t\tset_selected(/** @type {HTMLOptionElement} */ (element), value);\n\t\t} else {\n\t\t\tvar name = key;\n\t\t\tif (!preserve_attribute_case) {\n\t\t\t\tname = normalize_attribute(name);\n\t\t\t}\n\n\t\t\tvar is_default = name === 'defaultValue' || name === 'defaultChecked';\n\n\t\t\tif (value == null && !is_custom_element && !is_default) {\n\t\t\t\tattributes[key] = null;\n\n\t\t\t\tif (name === 'value' || name === 'checked') {\n\t\t\t\t\t// removing value/checked also removes defaultValue/defaultChecked â€” preserve\n\t\t\t\t\tlet input = /** @type {HTMLInputElement} */ (element);\n\t\t\t\t\tconst use_default = prev === undefined;\n\t\t\t\t\tif (name === 'value') {\n\t\t\t\t\t\tlet previous = input.defaultValue;\n\t\t\t\t\t\tinput.removeAttribute(name);\n\t\t\t\t\t\tinput.defaultValue = previous;\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tinput.value = input.__value = use_default ? previous : null;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlet previous = input.defaultChecked;\n\t\t\t\t\t\tinput.removeAttribute(name);\n\t\t\t\t\t\tinput.defaultChecked = previous;\n\t\t\t\t\t\tinput.checked = use_default ? previous : false;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\telement.removeAttribute(key);\n\t\t\t\t}\n\t\t\t} else if (\n\t\t\t\tis_default ||\n\t\t\t\t(setters.includes(name) && (is_custom_element || typeof value !== 'string'))\n\t\t\t) {\n\t\t\t\t// @ts-ignore\n\t\t\t\telement[name] = value;\n\t\t\t\t// remove it from attributes's cache\n\t\t\t\tif (name in attributes) attributes[name] = UNINITIALIZED;\n\t\t\t} else if (typeof value !== 'function') {\n\t\t\t\tset_attribute(element, name, value, skip_warning);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (is_hydrating_custom_element) {\n\t\tset_hydrating(true);\n\t}\n\n\treturn current;\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} element\n * @param {(...expressions: any) => Record<string | symbol, any>} fn\n * @param {Array<() => any>} sync\n * @param {Array<() => Promise<any>>} async\n * @param {Blocker[]} blockers\n * @param {string} [css_hash]\n * @param {boolean} [should_remove_defaults]\n * @param {boolean} [skip_warning]\n */\nexport function attribute_effect(\n\telement,\n\tfn,\n\tsync = [],\n\tasync = [],\n\tblockers = [],\n\tcss_hash,\n\tshould_remove_defaults = false,\n\tskip_warning = false\n) {\n\tflatten(blockers, sync, async, (values) => {\n\t\t/** @type {Record<string | symbol, any> | undefined} */\n\t\tvar prev = undefined;\n\n\t\t/** @type {Record<symbol, Effect>} */\n\t\tvar effects = {};\n\n\t\tvar is_select = element.nodeName === 'SELECT';\n\t\tvar inited = false;\n\n\t\tmanaged(() => {\n\t\t\tvar next = fn(...values.map(get));\n\t\t\t/** @type {Record<string | symbol, any>} */\n\t\t\tvar current = set_attributes(\n\t\t\t\telement,\n\t\t\t\tprev,\n\t\t\t\tnext,\n\t\t\t\tcss_hash,\n\t\t\t\tshould_remove_defaults,\n\t\t\t\tskip_warning\n\t\t\t);\n\n\t\t\tif (inited && is_select && 'value' in next) {\n\t\t\t\tselect_option(/** @type {HTMLSelectElement} */ (element), next.value);\n\t\t\t}\n\n\t\t\tfor (let symbol of Object.getOwnPropertySymbols(effects)) {\n\t\t\t\tif (!next[symbol]) destroy_effect(effects[symbol]);\n\t\t\t}\n\n\t\t\tfor (let symbol of Object.getOwnPropertySymbols(next)) {\n\t\t\t\tvar n = next[symbol];\n\n\t\t\t\tif (symbol.description === ATTACHMENT_KEY && (!prev || n !== prev[symbol])) {\n\t\t\t\t\tif (effects[symbol]) destroy_effect(effects[symbol]);\n\t\t\t\t\teffects[symbol] = branch(() => attach(element, () => n));\n\t\t\t\t}\n\n\t\t\t\tcurrent[symbol] = n;\n\t\t\t}\n\n\t\t\tprev = current;\n\t\t});\n\n\t\tif (is_select) {\n\t\t\tvar select = /** @type {HTMLSelectElement} */ (element);\n\n\t\t\teffect(() => {\n\t\t\t\tselect_option(select, /** @type {Record<string | symbol, any>} */ (prev).value, true);\n\t\t\t\tinit_select(select);\n\t\t\t});\n\t\t}\n\n\t\tinited = true;\n\t});\n}\n\n/**\n *\n * @param {Element} element\n */\nfunction get_attributes(element) {\n\treturn /** @type {Record<string | symbol, unknown>} **/ (\n\t\t// @ts-expect-error\n\t\telement.__attributes ??= {\n\t\t\t[IS_CUSTOM_ELEMENT]: element.nodeName.includes('-'),\n\t\t\t[IS_HTML]: element.namespaceURI === NAMESPACE_HTML\n\t\t}\n\t);\n}\n\n/** @type {Map<string, string[]>} */\nvar setters_cache = new Map();\n\n/** @param {Element} element */\nfunction get_setters(element) {\n\tvar cache_key = element.getAttribute('is') || element.nodeName;\n\tvar setters = setters_cache.get(cache_key);\n\tif (setters) return setters;\n\tsetters_cache.set(cache_key, (setters = []));\n\n\tvar descriptors;\n\tvar proto = element; // In the case of custom elements there might be setters on the instance\n\tvar element_proto = Element.prototype;\n\n\t// Stop at Element, from there on there's only unnecessary setters we're not interested in\n\t// Do not use contructor.name here as that's unreliable in some browser environments\n\twhile (element_proto !== proto) {\n\t\tdescriptors = get_descriptors(proto);\n\n\t\tfor (var key in descriptors) {\n\t\t\tif (descriptors[key].set) {\n\t\t\t\tsetters.push(key);\n\t\t\t}\n\t\t}\n\n\t\tproto = get_prototype_of(proto);\n\t}\n\n\treturn setters;\n}\n\n/**\n * @param {any} element\n * @param {string} attribute\n * @param {string} value\n */\nfunction check_src_in_dev_hydration(element, attribute, value) {\n\tif (!DEV) return;\n\tif (attribute === 'srcset' && srcset_url_equal(element, value)) return;\n\tif (src_url_equal(element.getAttribute(attribute) ?? '', value)) return;\n\n\tw.hydration_attribute_changed(\n\t\tattribute,\n\t\telement.outerHTML.replace(element.innerHTML, element.innerHTML && '...'),\n\t\tString(value)\n\t);\n}\n\n/**\n * @param {string} element_src\n * @param {string} url\n * @returns {boolean}\n */\nfunction src_url_equal(element_src, url) {\n\tif (element_src === url) return true;\n\treturn new URL(element_src, document.baseURI).href === new URL(url, document.baseURI).href;\n}\n\n/** @param {string} srcset */\nfunction split_srcset(srcset) {\n\treturn srcset.split(',').map((src) => src.trim().split(' ').filter(Boolean));\n}\n\n/**\n * @param {HTMLSourceElement | HTMLImageElement} element\n * @param {string} srcset\n * @returns {boolean}\n */\nfunction srcset_url_equal(element, srcset) {\n\tvar element_urls = split_srcset(element.srcset);\n\tvar urls = split_srcset(srcset);\n\n\treturn (\n\t\turls.length === element_urls.length &&\n\t\turls.every(\n\t\t\t([url, width], i) =>\n\t\t\t\twidth === element_urls[i][1] &&\n\t\t\t\t// We need to test both ways because Vite will create an a full URL with\n\t\t\t\t// `new URL(asset, import.meta.url).href` for the client when `base: './'`, and the\n\t\t\t\t// relative URLs inside srcset are not automatically resolved to absolute URLs by\n\t\t\t\t// browsers (in contrast to img.src). This means both SSR and DOM code could\n\t\t\t\t// contain relative or absolute URLs.\n\t\t\t\t(src_url_equal(element_urls[i][0], url) || src_url_equal(url, element_urls[i][0]))\n\t\t)\n\t);\n}\n","/** @import { Batch } from '../../../reactivity/batch.js' */\nimport { DEV } from 'esm-env';\nimport { render_effect, teardown } from '../../../reactivity/effects.js';\nimport { listen_to_event_and_reset_event } from './shared.js';\nimport * as e from '../../../errors.js';\nimport { is } from '../../../proxy.js';\nimport { queue_micro_task } from '../../task.js';\nimport { hydrating } from '../../hydration.js';\nimport { tick, untrack } from '../../../runtime.js';\nimport { is_runes } from '../../../context.js';\nimport { current_batch, previous_batch } from '../../../reactivity/batch.js';\n\n/**\n * @param {HTMLInputElement} input\n * @param {() => unknown} get\n * @param {(value: unknown) => void} set\n * @returns {void}\n */\nexport function bind_value(input, get, set = get) {\n\tvar batches = new WeakSet();\n\n\tlisten_to_event_and_reset_event(input, 'input', async (is_reset) => {\n\t\tif (DEV && input.type === 'checkbox') {\n\t\t\t// TODO should this happen in prod too?\n\t\t\te.bind_invalid_checkbox_value();\n\t\t}\n\n\t\t/** @type {any} */\n\t\tvar value = is_reset ? input.defaultValue : input.value;\n\t\tvalue = is_numberlike_input(input) ? to_number(value) : value;\n\t\tset(value);\n\n\t\tif (current_batch !== null) {\n\t\t\tbatches.add(current_batch);\n\t\t}\n\n\t\t// Because `{#each ...}` blocks work by updating sources inside the flush,\n\t\t// we need to wait a tick before checking to see if we should forcibly\n\t\t// update the input and reset the selection state\n\t\tawait tick();\n\n\t\t// Respect any validation in accessors\n\t\tif (value !== (value = get())) {\n\t\t\tvar start = input.selectionStart;\n\t\t\tvar end = input.selectionEnd;\n\t\t\tvar length = input.value.length;\n\n\t\t\t// the value is coerced on assignment\n\t\t\tinput.value = value ?? '';\n\n\t\t\t// Restore selection\n\t\t\tif (end !== null) {\n\t\t\t\tvar new_length = input.value.length;\n\t\t\t\t// If cursor was at end and new input is longer, move cursor to new end\n\t\t\t\tif (start === end && end === length && new_length > length) {\n\t\t\t\t\tinput.selectionStart = new_length;\n\t\t\t\t\tinput.selectionEnd = new_length;\n\t\t\t\t} else {\n\t\t\t\t\tinput.selectionStart = start;\n\t\t\t\t\tinput.selectionEnd = Math.min(end, new_length);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\tif (\n\t\t// If we are hydrating and the value has since changed,\n\t\t// then use the updated value from the input instead.\n\t\t(hydrating && input.defaultValue !== input.value) ||\n\t\t// If defaultValue is set, then value == defaultValue\n\t\t// TODO Svelte 6: remove input.value check and set to empty string?\n\t\t(untrack(get) == null && input.value)\n\t) {\n\t\tset(is_numberlike_input(input) ? to_number(input.value) : input.value);\n\n\t\tif (current_batch !== null) {\n\t\t\tbatches.add(current_batch);\n\t\t}\n\t}\n\n\trender_effect(() => {\n\t\tif (DEV && input.type === 'checkbox') {\n\t\t\t// TODO should this happen in prod too?\n\t\t\te.bind_invalid_checkbox_value();\n\t\t}\n\n\t\tvar value = get();\n\n\t\tif (input === document.activeElement) {\n\t\t\t// we need both, because in non-async mode, render effects run before previous_batch is set\n\t\t\tvar batch = /** @type {Batch} */ (previous_batch ?? current_batch);\n\n\t\t\t// Never rewrite the contents of a focused input. We can get here if, for example,\n\t\t\t// an update is deferred because of async work depending on the input:\n\t\t\t//\n\t\t\t// <input bind:value={query}>\n\t\t\t// <p>{await find(query)}</p>\n\t\t\tif (batches.has(batch)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (is_numberlike_input(input) && value === to_number(input.value)) {\n\t\t\t// handles 0 vs 00 case (see https://github.com/sveltejs/svelte/issues/9959)\n\t\t\treturn;\n\t\t}\n\n\t\tif (input.type === 'date' && !value && !input.value) {\n\t\t\t// Handles the case where a temporarily invalid date is set (while typing, for example with a leading 0 for the day)\n\t\t\t// and prevents this state from clearing the other parts of the date input (see https://github.com/sveltejs/svelte/issues/7897)\n\t\t\treturn;\n\t\t}\n\n\t\t// don't set the value of the input if it's the same to allow\n\t\t// minlength to work properly\n\t\tif (value !== input.value) {\n\t\t\t// @ts-expect-error the value is coerced on assignment\n\t\t\tinput.value = value ?? '';\n\t\t}\n\t});\n}\n\n/** @type {Set<HTMLInputElement[]>} */\nconst pending = new Set();\n\n/**\n * @param {HTMLInputElement[]} inputs\n * @param {null | [number]} group_index\n * @param {HTMLInputElement} input\n * @param {() => unknown} get\n * @param {(value: unknown) => void} set\n * @returns {void}\n */\nexport function bind_group(inputs, group_index, input, get, set = get) {\n\tvar is_checkbox = input.getAttribute('type') === 'checkbox';\n\tvar binding_group = inputs;\n\n\t// needs to be let or related code isn't treeshaken out if it's always false\n\tlet hydration_mismatch = false;\n\n\tif (group_index !== null) {\n\t\tfor (var index of group_index) {\n\t\t\t// @ts-expect-error\n\t\t\tbinding_group = binding_group[index] ??= [];\n\t\t}\n\t}\n\n\tbinding_group.push(input);\n\n\tlisten_to_event_and_reset_event(\n\t\tinput,\n\t\t'change',\n\t\t() => {\n\t\t\t// @ts-ignore\n\t\t\tvar value = input.__value;\n\n\t\t\tif (is_checkbox) {\n\t\t\t\tvalue = get_binding_group_value(binding_group, value, input.checked);\n\t\t\t}\n\n\t\t\tset(value);\n\t\t},\n\t\t// TODO better default value handling\n\t\t() => set(is_checkbox ? [] : null)\n\t);\n\n\trender_effect(() => {\n\t\tvar value = get();\n\n\t\t// If we are hydrating and the value has since changed, then use the update value\n\t\t// from the input instead.\n\t\tif (hydrating && input.defaultChecked !== input.checked) {\n\t\t\thydration_mismatch = true;\n\t\t\treturn;\n\t\t}\n\n\t\tif (is_checkbox) {\n\t\t\tvalue = value || [];\n\t\t\t// @ts-ignore\n\t\t\tinput.checked = value.includes(input.__value);\n\t\t} else {\n\t\t\t// @ts-ignore\n\t\t\tinput.checked = is(input.__value, value);\n\t\t}\n\t});\n\n\tteardown(() => {\n\t\tvar index = binding_group.indexOf(input);\n\n\t\tif (index !== -1) {\n\t\t\tbinding_group.splice(index, 1);\n\t\t}\n\t});\n\n\tif (!pending.has(binding_group)) {\n\t\tpending.add(binding_group);\n\n\t\tqueue_micro_task(() => {\n\t\t\t// necessary to maintain binding group order in all insertion scenarios\n\t\t\tbinding_group.sort((a, b) => (a.compareDocumentPosition(b) === 4 ? -1 : 1));\n\t\t\tpending.delete(binding_group);\n\t\t});\n\t}\n\n\tqueue_micro_task(() => {\n\t\tif (hydration_mismatch) {\n\t\t\tvar value;\n\n\t\t\tif (is_checkbox) {\n\t\t\t\tvalue = get_binding_group_value(binding_group, value, input.checked);\n\t\t\t} else {\n\t\t\t\tvar hydration_input = binding_group.find((input) => input.checked);\n\t\t\t\t// @ts-ignore\n\t\t\t\tvalue = hydration_input?.__value;\n\t\t\t}\n\n\t\t\tset(value);\n\t\t}\n\t});\n}\n\n/**\n * @param {HTMLInputElement} input\n * @param {() => unknown} get\n * @param {(value: unknown) => void} set\n * @returns {void}\n */\nexport function bind_checked(input, get, set = get) {\n\tlisten_to_event_and_reset_event(input, 'change', (is_reset) => {\n\t\tvar value = is_reset ? input.defaultChecked : input.checked;\n\t\tset(value);\n\t});\n\n\tif (\n\t\t// If we are hydrating and the value has since changed,\n\t\t// then use the update value from the input instead.\n\t\t(hydrating && input.defaultChecked !== input.checked) ||\n\t\t// If defaultChecked is set, then checked == defaultChecked\n\t\tuntrack(get) == null\n\t) {\n\t\tset(input.checked);\n\t}\n\n\trender_effect(() => {\n\t\tvar value = get();\n\t\tinput.checked = Boolean(value);\n\t});\n}\n\n/**\n * @template V\n * @param {Array<HTMLInputElement>} group\n * @param {V} __value\n * @param {boolean} checked\n * @returns {V[]}\n */\nfunction get_binding_group_value(group, __value, checked) {\n\t/** @type {Set<V>} */\n\tvar value = new Set();\n\n\tfor (var i = 0; i < group.length; i += 1) {\n\t\tif (group[i].checked) {\n\t\t\t// @ts-ignore\n\t\t\tvalue.add(group[i].__value);\n\t\t}\n\t}\n\n\tif (!checked) {\n\t\tvalue.delete(__value);\n\t}\n\n\treturn Array.from(value);\n}\n\n/**\n * @param {HTMLInputElement} input\n */\nfunction is_numberlike_input(input) {\n\tvar type = input.type;\n\treturn type === 'number' || type === 'range';\n}\n\n/**\n * @param {string} value\n */\nfunction to_number(value) {\n\treturn value === '' ? null : +value;\n}\n\n/**\n * @param {HTMLInputElement} input\n * @param {() => FileList | null} get\n * @param {(value: FileList | null) => void} set\n */\nexport function bind_files(input, get, set = get) {\n\tlisten_to_event_and_reset_event(input, 'change', () => {\n\t\tset(input.files);\n\t});\n\n\tif (\n\t\t// If we are hydrating and the value has since changed,\n\t\t// then use the updated value from the input instead.\n\t\thydrating &&\n\t\tinput.files\n\t) {\n\t\tset(input.files);\n\t}\n\n\trender_effect(() => {\n\t\tinput.files = get();\n\t});\n}\n","/** @import { Readable, StartStopNotifier, Subscriber, Unsubscriber, Updater, Writable } from '../public.js' */\n/** @import { Stores, StoresValues, SubscribeInvalidateTuple } from '../private.js' */\nimport { noop, run_all } from '../../internal/shared/utils.js';\nimport { safe_not_equal } from '../../internal/client/reactivity/equality.js';\nimport { subscribe_to_store } from '../utils.js';\n\n/**\n * @type {Array<SubscribeInvalidateTuple<any> | any>}\n */\nconst subscriber_queue = [];\n\n/**\n * Creates a `Readable` store that allows reading by subscription.\n *\n * @template T\n * @param {T} [value] initial value\n * @param {StartStopNotifier<T>} [start]\n * @returns {Readable<T>}\n */\nexport function readable(value, start) {\n\treturn {\n\t\tsubscribe: writable(value, start).subscribe\n\t};\n}\n\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n *\n * @template T\n * @param {T} [value] initial value\n * @param {StartStopNotifier<T>} [start]\n * @returns {Writable<T>}\n */\nexport function writable(value, start = noop) {\n\t/** @type {Unsubscriber | null} */\n\tlet stop = null;\n\n\t/** @type {Set<SubscribeInvalidateTuple<T>>} */\n\tconst subscribers = new Set();\n\n\t/**\n\t * @param {T} new_value\n\t * @returns {void}\n\t */\n\tfunction set(new_value) {\n\t\tif (safe_not_equal(value, new_value)) {\n\t\t\tvalue = new_value;\n\t\t\tif (stop) {\n\t\t\t\t// store is ready\n\t\t\t\tconst run_queue = !subscriber_queue.length;\n\t\t\t\tfor (const subscriber of subscribers) {\n\t\t\t\t\tsubscriber[1]();\n\t\t\t\t\tsubscriber_queue.push(subscriber, value);\n\t\t\t\t}\n\t\t\t\tif (run_queue) {\n\t\t\t\t\tfor (let i = 0; i < subscriber_queue.length; i += 2) {\n\t\t\t\t\t\tsubscriber_queue[i][0](subscriber_queue[i + 1]);\n\t\t\t\t\t}\n\t\t\t\t\tsubscriber_queue.length = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @param {Updater<T>} fn\n\t * @returns {void}\n\t */\n\tfunction update(fn) {\n\t\tset(fn(/** @type {T} */ (value)));\n\t}\n\n\t/**\n\t * @param {Subscriber<T>} run\n\t * @param {() => void} [invalidate]\n\t * @returns {Unsubscriber}\n\t */\n\tfunction subscribe(run, invalidate = noop) {\n\t\t/** @type {SubscribeInvalidateTuple<T>} */\n\t\tconst subscriber = [run, invalidate];\n\t\tsubscribers.add(subscriber);\n\t\tif (subscribers.size === 1) {\n\t\t\tstop = start(set, update) || noop;\n\t\t}\n\t\trun(/** @type {T} */ (value));\n\t\treturn () => {\n\t\t\tsubscribers.delete(subscriber);\n\t\t\tif (subscribers.size === 0 && stop) {\n\t\t\t\tstop();\n\t\t\t\tstop = null;\n\t\t\t}\n\t\t};\n\t}\n\treturn { set, update, subscribe };\n}\n\n/**\n * Derived value store by synchronizing one or more readable stores and\n * applying an aggregation function over its input values.\n *\n * @template {Stores} S\n * @template T\n * @overload\n * @param {S} stores\n * @param {(values: StoresValues<S>, set: (value: T) => void, update: (fn: Updater<T>) => void) => Unsubscriber | void} fn\n * @param {T} [initial_value]\n * @returns {Readable<T>}\n */\n/**\n * Derived value store by synchronizing one or more readable stores and\n * applying an aggregation function over its input values.\n *\n * @template {Stores} S\n * @template T\n * @overload\n * @param {S} stores\n * @param {(values: StoresValues<S>) => T} fn\n * @param {T} [initial_value]\n * @returns {Readable<T>}\n */\n/**\n * @template {Stores} S\n * @template T\n * @param {S} stores\n * @param {Function} fn\n * @param {T} [initial_value]\n * @returns {Readable<T>}\n */\nexport function derived(stores, fn, initial_value) {\n\tconst single = !Array.isArray(stores);\n\t/** @type {Array<Readable<any>>} */\n\tconst stores_array = single ? [stores] : stores;\n\tif (!stores_array.every(Boolean)) {\n\t\tthrow new Error('derived() expects stores as input, got a falsy value');\n\t}\n\tconst auto = fn.length < 2;\n\treturn readable(initial_value, (set, update) => {\n\t\tlet started = false;\n\t\t/** @type {T[]} */\n\t\tconst values = [];\n\t\tlet pending = 0;\n\t\tlet cleanup = noop;\n\t\tconst sync = () => {\n\t\t\tif (pending) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcleanup();\n\t\t\tconst result = fn(single ? values[0] : values, set, update);\n\t\t\tif (auto) {\n\t\t\t\tset(result);\n\t\t\t} else {\n\t\t\t\tcleanup = typeof result === 'function' ? result : noop;\n\t\t\t}\n\t\t};\n\t\tconst unsubscribers = stores_array.map((store, i) =>\n\t\t\tsubscribe_to_store(\n\t\t\t\tstore,\n\t\t\t\t(value) => {\n\t\t\t\t\tvalues[i] = value;\n\t\t\t\t\tpending &= ~(1 << i);\n\t\t\t\t\tif (started) {\n\t\t\t\t\t\tsync();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tpending |= 1 << i;\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t\tstarted = true;\n\t\tsync();\n\t\treturn function stop() {\n\t\t\trun_all(unsubscribers);\n\t\t\tcleanup();\n\t\t\t// We need to set this to false because callbacks can still happen despite having unsubscribed:\n\t\t\t// Callbacks might already be placed in the queue which doesn't know it should no longer\n\t\t\t// invoke this derived store.\n\t\t\tstarted = false;\n\t\t};\n\t});\n}\n\n/**\n * Takes a store and returns a new one derived from the old one that is readable.\n *\n * @template T\n * @param {Readable<T>} store  - store to make readonly\n * @returns {Readable<T>}\n */\nexport function readonly(store) {\n\treturn {\n\t\t// @ts-expect-error TODO i suspect the bind is unnecessary\n\t\tsubscribe: store.subscribe.bind(store)\n\t};\n}\n\n/**\n * Get the current value from a store by subscribing and immediately unsubscribing.\n *\n * @template T\n * @param {Readable<T>} store\n * @returns {T}\n */\nexport function get(store) {\n\tlet value;\n\tsubscribe_to_store(store, (_) => (value = _))();\n\t// @ts-expect-error\n\treturn value;\n}\n","/** @import { Effect, Source } from './types.js' */\nimport { DEV } from 'esm-env';\nimport {\n\tPROPS_IS_BINDABLE,\n\tPROPS_IS_IMMUTABLE,\n\tPROPS_IS_LAZY_INITIAL,\n\tPROPS_IS_RUNES,\n\tPROPS_IS_UPDATED\n} from '../../../constants.js';\nimport { get_descriptor, is_function } from '../../shared/utils.js';\nimport { set, source, update } from './sources.js';\nimport { derived, derived_safe_equal } from './deriveds.js';\nimport {\n\tactive_effect,\n\tget,\n\tis_destroying_effect,\n\tset_active_effect,\n\tuntrack\n} from '../runtime.js';\nimport * as e from '../errors.js';\nimport { DESTROYED, LEGACY_PROPS, STATE_SYMBOL } from '#client/constants';\nimport { proxy } from '../proxy.js';\nimport { capture_store_binding } from './store.js';\nimport { legacy_mode_flag } from '../../flags/index.js';\n\n/**\n * @param {((value?: number) => number)} fn\n * @param {1 | -1} [d]\n * @returns {number}\n */\nexport function update_prop(fn, d = 1) {\n\tconst value = fn();\n\tfn(value + d);\n\treturn value;\n}\n\n/**\n * @param {((value?: number) => number)} fn\n * @param {1 | -1} [d]\n * @returns {number}\n */\nexport function update_pre_prop(fn, d = 1) {\n\tconst value = fn() + d;\n\tfn(value);\n\treturn value;\n}\n\n/**\n * The proxy handler for rest props (i.e. `const { x, ...rest } = $props()`).\n * Is passed the full `$$props` object and excludes the named props.\n * @type {ProxyHandler<{ props: Record<string | symbol, unknown>, exclude: Array<string | symbol>, name?: string }>}}\n */\nconst rest_props_handler = {\n\tget(target, key) {\n\t\tif (target.exclude.includes(key)) return;\n\t\treturn target.props[key];\n\t},\n\tset(target, key) {\n\t\tif (DEV) {\n\t\t\t// TODO should this happen in prod too?\n\t\t\te.props_rest_readonly(`${target.name}.${String(key)}`);\n\t\t}\n\n\t\treturn false;\n\t},\n\tgetOwnPropertyDescriptor(target, key) {\n\t\tif (target.exclude.includes(key)) return;\n\t\tif (key in target.props) {\n\t\t\treturn {\n\t\t\t\tenumerable: true,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: target.props[key]\n\t\t\t};\n\t\t}\n\t},\n\thas(target, key) {\n\t\tif (target.exclude.includes(key)) return false;\n\t\treturn key in target.props;\n\t},\n\townKeys(target) {\n\t\treturn Reflect.ownKeys(target.props).filter((key) => !target.exclude.includes(key));\n\t}\n};\n\n/**\n * @param {Record<string, unknown>} props\n * @param {string[]} exclude\n * @param {string} [name]\n * @returns {Record<string, unknown>}\n */\n/*#__NO_SIDE_EFFECTS__*/\nexport function rest_props(props, exclude, name) {\n\treturn new Proxy(\n\t\tDEV ? { props, exclude, name, other: {}, to_proxy: [] } : { props, exclude },\n\t\trest_props_handler\n\t);\n}\n\n/**\n * The proxy handler for legacy $$restProps and $$props\n * @type {ProxyHandler<{ props: Record<string | symbol, unknown>, exclude: Array<string | symbol>, special: Record<string | symbol, (v?: unknown) => unknown>, version: Source<number>, parent_effect: Effect }>}}\n */\nconst legacy_rest_props_handler = {\n\tget(target, key) {\n\t\tif (target.exclude.includes(key)) return;\n\t\tget(target.version);\n\t\treturn key in target.special ? target.special[key]() : target.props[key];\n\t},\n\tset(target, key, value) {\n\t\tif (!(key in target.special)) {\n\t\t\tvar previous_effect = active_effect;\n\n\t\t\ttry {\n\t\t\t\tset_active_effect(target.parent_effect);\n\n\t\t\t\t// Handle props that can temporarily get out of sync with the parent\n\t\t\t\t/** @type {Record<string, (v?: unknown) => unknown>} */\n\t\t\t\ttarget.special[key] = prop(\n\t\t\t\t\t{\n\t\t\t\t\t\tget [key]() {\n\t\t\t\t\t\t\treturn target.props[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t/** @type {string} */ (key),\n\t\t\t\t\tPROPS_IS_UPDATED\n\t\t\t\t);\n\t\t\t} finally {\n\t\t\t\tset_active_effect(previous_effect);\n\t\t\t}\n\t\t}\n\n\t\ttarget.special[key](value);\n\t\tupdate(target.version); // $$props is coarse-grained: when $$props.x is updated, usages of $$props.y etc are also rerun\n\t\treturn true;\n\t},\n\tgetOwnPropertyDescriptor(target, key) {\n\t\tif (target.exclude.includes(key)) return;\n\t\tif (key in target.props) {\n\t\t\treturn {\n\t\t\t\tenumerable: true,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: target.props[key]\n\t\t\t};\n\t\t}\n\t},\n\tdeleteProperty(target, key) {\n\t\t// Svelte 4 allowed for deletions on $$restProps\n\t\tif (target.exclude.includes(key)) return true;\n\t\ttarget.exclude.push(key);\n\t\tupdate(target.version);\n\t\treturn true;\n\t},\n\thas(target, key) {\n\t\tif (target.exclude.includes(key)) return false;\n\t\treturn key in target.props;\n\t},\n\townKeys(target) {\n\t\treturn Reflect.ownKeys(target.props).filter((key) => !target.exclude.includes(key));\n\t}\n};\n\n/**\n * @param {Record<string, unknown>} props\n * @param {string[]} exclude\n * @returns {Record<string, unknown>}\n */\nexport function legacy_rest_props(props, exclude) {\n\treturn new Proxy(\n\t\t{\n\t\t\tprops,\n\t\t\texclude,\n\t\t\tspecial: {},\n\t\t\tversion: source(0),\n\t\t\t// TODO this is only necessary because we need to track component\n\t\t\t// destruction inside `prop`, because of `bind:this`, but it\n\t\t\t// seems likely that we can simplify `bind:this` instead\n\t\t\tparent_effect: /** @type {Effect} */ (active_effect)\n\t\t},\n\t\tlegacy_rest_props_handler\n\t);\n}\n\n/**\n * The proxy handler for spread props. Handles the incoming array of props\n * that looks like `() => { dynamic: props }, { static: prop }, ..` and wraps\n * them so that the whole thing is passed to the component as the `$$props` argument.\n * @type {ProxyHandler<{ props: Array<Record<string | symbol, unknown> | (() => Record<string | symbol, unknown>)> }>}}\n */\nconst spread_props_handler = {\n\tget(target, key) {\n\t\tlet i = target.props.length;\n\t\twhile (i--) {\n\t\t\tlet p = target.props[i];\n\t\t\tif (is_function(p)) p = p();\n\t\t\tif (typeof p === 'object' && p !== null && key in p) return p[key];\n\t\t}\n\t},\n\tset(target, key, value) {\n\t\tlet i = target.props.length;\n\t\twhile (i--) {\n\t\t\tlet p = target.props[i];\n\t\t\tif (is_function(p)) p = p();\n\t\t\tconst desc = get_descriptor(p, key);\n\t\t\tif (desc && desc.set) {\n\t\t\t\tdesc.set(value);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\tgetOwnPropertyDescriptor(target, key) {\n\t\tlet i = target.props.length;\n\t\twhile (i--) {\n\t\t\tlet p = target.props[i];\n\t\t\tif (is_function(p)) p = p();\n\t\t\tif (typeof p === 'object' && p !== null && key in p) {\n\t\t\t\tconst descriptor = get_descriptor(p, key);\n\t\t\t\tif (descriptor && !descriptor.configurable) {\n\t\t\t\t\t// Prevent a \"Non-configurability Report Error\": The target is an array, it does\n\t\t\t\t\t// not actually contain this property. If it is now described as non-configurable,\n\t\t\t\t\t// the proxy throws a validation error. Setting it to true avoids that.\n\t\t\t\t\tdescriptor.configurable = true;\n\t\t\t\t}\n\t\t\t\treturn descriptor;\n\t\t\t}\n\t\t}\n\t},\n\thas(target, key) {\n\t\t// To prevent a false positive `is_entry_props` in the `prop` function\n\t\tif (key === STATE_SYMBOL || key === LEGACY_PROPS) return false;\n\n\t\tfor (let p of target.props) {\n\t\t\tif (is_function(p)) p = p();\n\t\t\tif (p != null && key in p) return true;\n\t\t}\n\n\t\treturn false;\n\t},\n\townKeys(target) {\n\t\t/** @type {Array<string | symbol>} */\n\t\tconst keys = [];\n\n\t\tfor (let p of target.props) {\n\t\t\tif (is_function(p)) p = p();\n\t\t\tif (!p) continue;\n\n\t\t\tfor (const key in p) {\n\t\t\t\tif (!keys.includes(key)) keys.push(key);\n\t\t\t}\n\n\t\t\tfor (const key of Object.getOwnPropertySymbols(p)) {\n\t\t\t\tif (!keys.includes(key)) keys.push(key);\n\t\t\t}\n\t\t}\n\n\t\treturn keys;\n\t}\n};\n\n/**\n * @param {Array<Record<string, unknown> | (() => Record<string, unknown>)>} props\n * @returns {any}\n */\nexport function spread_props(...props) {\n\treturn new Proxy({ props }, spread_props_handler);\n}\n\n/**\n * This function is responsible for synchronizing a possibly bound prop with the inner component state.\n * It is used whenever the compiler sees that the component writes to the prop, or when it has a default prop_value.\n * @template V\n * @param {Record<string, unknown>} props\n * @param {string} key\n * @param {number} flags\n * @param {V | (() => V)} [fallback]\n * @returns {(() => V | ((arg: V) => V) | ((arg: V, mutation: boolean) => V))}\n */\nexport function prop(props, key, flags, fallback) {\n\tvar runes = !legacy_mode_flag || (flags & PROPS_IS_RUNES) !== 0;\n\tvar bindable = (flags & PROPS_IS_BINDABLE) !== 0;\n\tvar lazy = (flags & PROPS_IS_LAZY_INITIAL) !== 0;\n\n\tvar fallback_value = /** @type {V} */ (fallback);\n\tvar fallback_dirty = true;\n\n\tvar get_fallback = () => {\n\t\tif (fallback_dirty) {\n\t\t\tfallback_dirty = false;\n\n\t\t\tfallback_value = lazy\n\t\t\t\t? untrack(/** @type {() => V} */ (fallback))\n\t\t\t\t: /** @type {V} */ (fallback);\n\t\t}\n\n\t\treturn fallback_value;\n\t};\n\n\t/** @type {((v: V) => void) | undefined} */\n\tvar setter;\n\n\tif (bindable) {\n\t\t// Can be the case when someone does `mount(Component, props)` with `let props = $state({...})`\n\t\t// or `createClassComponent(Component, props)`\n\t\tvar is_entry_props = STATE_SYMBOL in props || LEGACY_PROPS in props;\n\n\t\tsetter =\n\t\t\tget_descriptor(props, key)?.set ??\n\t\t\t(is_entry_props && key in props ? (v) => (props[key] = v) : undefined);\n\t}\n\n\tvar initial_value;\n\tvar is_store_sub = false;\n\n\tif (bindable) {\n\t\t[initial_value, is_store_sub] = capture_store_binding(() => /** @type {V} */ (props[key]));\n\t} else {\n\t\tinitial_value = /** @type {V} */ (props[key]);\n\t}\n\n\tif (initial_value === undefined && fallback !== undefined) {\n\t\tinitial_value = get_fallback();\n\n\t\tif (setter) {\n\t\t\tif (runes) e.props_invalid_value(key);\n\t\t\tsetter(initial_value);\n\t\t}\n\t}\n\n\t/** @type {() => V} */\n\tvar getter;\n\n\tif (runes) {\n\t\tgetter = () => {\n\t\t\tvar value = /** @type {V} */ (props[key]);\n\t\t\tif (value === undefined) return get_fallback();\n\t\t\tfallback_dirty = true;\n\t\t\treturn value;\n\t\t};\n\t} else {\n\t\tgetter = () => {\n\t\t\tvar value = /** @type {V} */ (props[key]);\n\n\t\t\tif (value !== undefined) {\n\t\t\t\t// in legacy mode, we don't revert to the fallback value\n\t\t\t\t// if the prop goes from defined to undefined. The easiest\n\t\t\t\t// way to model this is to make the fallback undefined\n\t\t\t\t// as soon as the prop has a value\n\t\t\t\tfallback_value = /** @type {V} */ (undefined);\n\t\t\t}\n\n\t\t\treturn value === undefined ? fallback_value : value;\n\t\t};\n\t}\n\n\t// prop is never written to â€” we only need a getter\n\tif (runes && (flags & PROPS_IS_UPDATED) === 0) {\n\t\treturn getter;\n\t}\n\n\t// prop is written to, but the parent component had `bind:foo` which\n\t// means we can just call `$$props.foo = value` directly\n\tif (setter) {\n\t\tvar legacy_parent = props.$$legacy;\n\t\treturn /** @type {() => V} */ (\n\t\t\tfunction (/** @type {V} */ value, /** @type {boolean} */ mutation) {\n\t\t\t\tif (arguments.length > 0) {\n\t\t\t\t\t// We don't want to notify if the value was mutated and the parent is in runes mode.\n\t\t\t\t\t// In that case the state proxy (if it exists) should take care of the notification.\n\t\t\t\t\t// If the parent is not in runes mode, we need to notify on mutation, too, that the prop\n\t\t\t\t\t// has changed because the parent will not be able to detect the change otherwise.\n\t\t\t\t\tif (!runes || !mutation || legacy_parent || is_store_sub) {\n\t\t\t\t\t\t/** @type {Function} */ (setter)(mutation ? getter() : value);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\n\t\t\t\treturn getter();\n\t\t\t}\n\t\t);\n\t}\n\n\t// Either prop is written to, but there's no binding, which means we\n\t// create a derived that we can write to locally.\n\t// Or we are in legacy mode where we always create a derived to replicate that\n\t// Svelte 4 did not trigger updates when a primitive value was updated to the same value.\n\tvar overridden = false;\n\n\tvar d = ((flags & PROPS_IS_IMMUTABLE) !== 0 ? derived : derived_safe_equal)(() => {\n\t\toverridden = false;\n\t\treturn getter();\n\t});\n\n\tif (DEV) {\n\t\td.label = key;\n\t}\n\n\t// Capture the initial value if it's bindable\n\tif (bindable) get(d);\n\n\tvar parent_effect = /** @type {Effect} */ (active_effect);\n\n\treturn /** @type {() => V} */ (\n\t\tfunction (/** @type {any} */ value, /** @type {boolean} */ mutation) {\n\t\t\tif (arguments.length > 0) {\n\t\t\t\tconst new_value = mutation ? get(d) : runes && bindable ? proxy(value) : value;\n\n\t\t\t\tset(d, new_value);\n\t\t\t\toverridden = true;\n\n\t\t\t\tif (fallback_value !== undefined) {\n\t\t\t\t\tfallback_value = new_value;\n\t\t\t\t}\n\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\t// special case â€” avoid recalculating the derived if we're in a\n\t\t\t// teardown function and the prop was overridden locally, or the\n\t\t\t// component was already destroyed (this latter part is necessary\n\t\t\t// because `bind:this` can read props after the component has\n\t\t\t// been destroyed. TODO simplify `bind:this`\n\t\t\tif ((is_destroying_effect && overridden) || (parent_effect.f & DESTROYED) !== 0) {\n\t\t\t\treturn d.v;\n\t\t\t}\n\n\t\t\treturn get(d);\n\t\t}\n\t);\n}\n","/** @import { ComponentContext, ComponentContextLegacy } from '#client' */\n/** @import { EventDispatcher } from './index.js' */\n/** @import { NotFunction } from './internal/types.js' */\nimport { active_reaction, untrack } from './internal/client/runtime.js';\nimport { is_array } from './internal/shared/utils.js';\nimport { user_effect } from './internal/client/index.js';\nimport * as e from './internal/client/errors.js';\nimport { legacy_mode_flag } from './internal/flags/index.js';\nimport { component_context } from './internal/client/context.js';\nimport { DEV } from 'esm-env';\n\nif (DEV) {\n\t/**\n\t * @param {string} rune\n\t */\n\tfunction throw_rune_error(rune) {\n\t\tif (!(rune in globalThis)) {\n\t\t\t// TODO if people start adjusting the \"this can contain runes\" config through v-p-s more, adjust this message\n\t\t\t/** @type {any} */\n\t\t\tlet value; // let's hope noone modifies this global, but belts and braces\n\t\t\tObject.defineProperty(globalThis, rune, {\n\t\t\t\tconfigurable: true,\n\t\t\t\t// eslint-disable-next-line getter-return\n\t\t\t\tget: () => {\n\t\t\t\t\tif (value !== undefined) {\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t}\n\n\t\t\t\t\te.rune_outside_svelte(rune);\n\t\t\t\t},\n\t\t\t\tset: (v) => {\n\t\t\t\t\tvalue = v;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tthrow_rune_error('$state');\n\tthrow_rune_error('$effect');\n\tthrow_rune_error('$derived');\n\tthrow_rune_error('$inspect');\n\tthrow_rune_error('$props');\n\tthrow_rune_error('$bindable');\n}\n\n/**\n * Returns an [`AbortSignal`](https://developer.mozilla.org/en-US/docs/Web/API/AbortSignal) that aborts when the current [derived](https://svelte.dev/docs/svelte/$derived) or [effect](https://svelte.dev/docs/svelte/$effect) re-runs or is destroyed.\n *\n * Must be called while a derived or effect is running.\n *\n * ```svelte\n * <script>\n * \timport { getAbortSignal } from 'svelte';\n *\n * \tlet { id } = $props();\n *\n * \tasync function getData(id) {\n * \t\tconst response = await fetch(`/items/${id}`, {\n * \t\t\tsignal: getAbortSignal()\n * \t\t});\n *\n * \t\treturn await response.json();\n * \t}\n *\n * \tconst data = $derived(await getData(id));\n * </script>\n * ```\n */\nexport function getAbortSignal() {\n\tif (active_reaction === null) {\n\t\te.get_abort_signal_outside_reaction();\n\t}\n\n\treturn (active_reaction.ac ??= new AbortController()).signal;\n}\n\n/**\n * `onMount`, like [`$effect`](https://svelte.dev/docs/svelte/$effect), schedules a function to run as soon as the component has been mounted to the DOM.\n * Unlike `$effect`, the provided function only runs once.\n *\n * It must be called during the component's initialisation (but doesn't need to live _inside_ the component;\n * it can be called from an external module). If a function is returned _synchronously_ from `onMount`,\n * it will be called when the component is unmounted.\n *\n * `onMount` functions do not run during [server-side rendering](https://svelte.dev/docs/svelte/svelte-server#render).\n *\n * @template T\n * @param {() => NotFunction<T> | Promise<NotFunction<T>> | (() => any)} fn\n * @returns {void}\n */\nexport function onMount(fn) {\n\tif (component_context === null) {\n\t\te.lifecycle_outside_component('onMount');\n\t}\n\n\tif (legacy_mode_flag && component_context.l !== null) {\n\t\tinit_update_callbacks(component_context).m.push(fn);\n\t} else {\n\t\tuser_effect(() => {\n\t\t\tconst cleanup = untrack(fn);\n\t\t\tif (typeof cleanup === 'function') return /** @type {() => void} */ (cleanup);\n\t\t});\n\t}\n}\n\n/**\n * Schedules a callback to run immediately before the component is unmounted.\n *\n * Out of `onMount`, `beforeUpdate`, `afterUpdate` and `onDestroy`, this is the\n * only one that runs inside a server-side component.\n *\n * @param {() => any} fn\n * @returns {void}\n */\nexport function onDestroy(fn) {\n\tif (component_context === null) {\n\t\te.lifecycle_outside_component('onDestroy');\n\t}\n\n\tonMount(() => () => untrack(fn));\n}\n\n/**\n * @template [T=any]\n * @param {string} type\n * @param {T} [detail]\n * @param {any}params_0\n * @returns {CustomEvent<T>}\n */\nfunction create_custom_event(type, detail, { bubbles = false, cancelable = false } = {}) {\n\treturn new CustomEvent(type, { detail, bubbles, cancelable });\n}\n\n/**\n * Creates an event dispatcher that can be used to dispatch [component events](https://svelte.dev/docs/svelte/legacy-on#Component-events).\n * Event dispatchers are functions that can take two arguments: `name` and `detail`.\n *\n * Component events created with `createEventDispatcher` create a\n * [CustomEvent](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent).\n * These events do not [bubble](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Building_blocks/Events#Event_bubbling_and_capture).\n * The `detail` argument corresponds to the [CustomEvent.detail](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/detail)\n * property and can contain any type of data.\n *\n * The event dispatcher can be typed to narrow the allowed event names and the type of the `detail` argument:\n * ```ts\n * const dispatch = createEventDispatcher<{\n *  loaded: null; // does not take a detail argument\n *  change: string; // takes a detail argument of type string, which is required\n *  optional: number | null; // takes an optional detail argument of type number\n * }>();\n * ```\n *\n * @deprecated Use callback props and/or the `$host()` rune instead â€” see [migration guide](https://svelte.dev/docs/svelte/v5-migration-guide#Event-changes-Component-events)\n * @template {Record<string, any>} [EventMap = any]\n * @returns {EventDispatcher<EventMap>}\n */\nexport function createEventDispatcher() {\n\tconst active_component_context = component_context;\n\tif (active_component_context === null) {\n\t\te.lifecycle_outside_component('createEventDispatcher');\n\t}\n\n\t/**\n\t * @param [detail]\n\t * @param [options]\n\t */\n\treturn (type, detail, options) => {\n\t\tconst events = /** @type {Record<string, Function | Function[]>} */ (\n\t\t\tactive_component_context.s.$$events\n\t\t)?.[/** @type {string} */ (type)];\n\n\t\tif (events) {\n\t\t\tconst callbacks = is_array(events) ? events.slice() : [events];\n\t\t\t// TODO are there situations where events could be dispatched\n\t\t\t// in a server (non-DOM) environment?\n\t\t\tconst event = create_custom_event(/** @type {string} */ (type), detail, options);\n\t\t\tfor (const fn of callbacks) {\n\t\t\t\tfn.call(active_component_context.x, event);\n\t\t\t}\n\t\t\treturn !event.defaultPrevented;\n\t\t}\n\n\t\treturn true;\n\t};\n}\n\n// TODO mark beforeUpdate and afterUpdate as deprecated in Svelte 6\n\n/**\n * Schedules a callback to run immediately before the component is updated after any state change.\n *\n * The first time the callback runs will be before the initial `onMount`.\n *\n * In runes mode use `$effect.pre` instead.\n *\n * @deprecated Use [`$effect.pre`](https://svelte.dev/docs/svelte/$effect#$effect.pre) instead\n * @param {() => void} fn\n * @returns {void}\n */\nexport function beforeUpdate(fn) {\n\tif (component_context === null) {\n\t\te.lifecycle_outside_component('beforeUpdate');\n\t}\n\n\tif (component_context.l === null) {\n\t\te.lifecycle_legacy_only('beforeUpdate');\n\t}\n\n\tinit_update_callbacks(component_context).b.push(fn);\n}\n\n/**\n * Schedules a callback to run immediately after the component has been updated.\n *\n * The first time the callback runs will be after the initial `onMount`.\n *\n * In runes mode use `$effect` instead.\n *\n * @deprecated Use [`$effect`](https://svelte.dev/docs/svelte/$effect) instead\n * @param {() => void} fn\n * @returns {void}\n */\nexport function afterUpdate(fn) {\n\tif (component_context === null) {\n\t\te.lifecycle_outside_component('afterUpdate');\n\t}\n\n\tif (component_context.l === null) {\n\t\te.lifecycle_legacy_only('afterUpdate');\n\t}\n\n\tinit_update_callbacks(component_context).a.push(fn);\n}\n\n/**\n * Legacy-mode: Init callbacks object for onMount/beforeUpdate/afterUpdate\n * @param {ComponentContext} context\n */\nfunction init_update_callbacks(context) {\n\tvar l = /** @type {ComponentContextLegacy} */ (context).l;\n\treturn (l.u ??= { a: [], b: [], m: [] });\n}\n\nexport { flushSync, fork } from './internal/client/reactivity/batch.js';\nexport {\n\tcreateContext,\n\tgetContext,\n\tgetAllContexts,\n\thasContext,\n\tsetContext\n} from './internal/client/context.js';\nexport { hydratable } from './internal/client/hydratable.js';\nexport { hydrate, mount, unmount } from './internal/client/render.js';\nexport { tick, untrack, settled } from './internal/client/runtime.js';\nexport { createRawSnippet } from './internal/client/dom/blocks/snippet.js';\n","// generated during release, do not modify\n\n/**\n * The current version, as set in package.json.\n * @type {string}\n */\nexport const VERSION = '5.49.2';\nexport const PUBLIC_VERSION = '5';\n","import { PUBLIC_VERSION } from '../version.js';\n\nif (typeof window !== 'undefined') {\n\t// @ts-expect-error\n\t((window.__svelte ??= {}).v ??= new Set()).add(PUBLIC_VERSION);\n}\n","import { writable } from \"svelte/store\";\n\nexport type RouteName = \"home\" | \"search\" | \"book\" | \"sitemap\" | \"notFound\";\n\nexport interface RouteMatch {\n  name: RouteName;\n  params: {\n    identifier?: string;\n    view?: \"authors\" | \"books\";\n    letter?: string;\n    page?: number;\n  };\n}\n\nconst INITIAL_URL =\n  typeof window !== \"undefined\" ? new URL(window.location.href) : new URL(\"http://localhost/\");\n\nexport const currentUrl = writable<URL>(INITIAL_URL);\n\nfunction parsePage(value: string): number {\n  const parsed = Number.parseInt(value, 10);\n  if (!Number.isFinite(parsed) || parsed < 1) {\n    return 1;\n  }\n  return parsed;\n}\n\nexport function matchRoute(pathname: string): RouteMatch {\n  if (pathname === \"/\") {\n    return { name: \"home\", params: {} };\n  }\n\n  if (pathname === \"/search\") {\n    return { name: \"search\", params: {} };\n  }\n\n  const bookMatch = pathname.match(/^\\/book\\/([^/]+)$/);\n  if (bookMatch) {\n    return {\n      name: \"book\",\n      params: {\n        identifier: decodeURIComponent(bookMatch[1]),\n      },\n    };\n  }\n\n  if (pathname === \"/sitemap\") {\n    return {\n      name: \"sitemap\",\n      params: {\n        view: \"authors\",\n        letter: \"A\",\n        page: 1,\n      },\n    };\n  }\n\n  const sitemapMatch = pathname.match(/^\\/sitemap\\/(authors|books)\\/([^/]+)\\/(\\d+)$/);\n  if (sitemapMatch) {\n    return {\n      name: \"sitemap\",\n      params: {\n        view: sitemapMatch[1] === \"books\" ? \"books\" : \"authors\",\n        letter: decodeURIComponent(sitemapMatch[2]),\n        page: parsePage(sitemapMatch[3]),\n      },\n    };\n  }\n\n  if (pathname === \"/404\") {\n    return { name: \"notFound\", params: {} };\n  }\n\n  return { name: \"notFound\", params: {} };\n}\n\nfunction shouldHandleAsSpaLink(anchor: HTMLAnchorElement): boolean {\n  if (anchor.target && anchor.target !== \"_self\") {\n    return false;\n  }\n\n  if (anchor.hasAttribute(\"download\") || anchor.dataset.noSpa === \"true\") {\n    return false;\n  }\n\n  const url = new URL(anchor.href, window.location.origin);\n  if (url.origin !== window.location.origin) {\n    return false;\n  }\n\n  const passthroughPrefixes = [\"/api\", \"/admin\", \"/actuator\", \"/ws\", \"/topic\", \"/sitemap.xml\", \"/sitemap-xml\", \"/r\"];\n\n  for (const prefix of passthroughPrefixes) {\n    if (url.pathname === prefix || url.pathname.startsWith(`${prefix}/`)) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction publishUrl(): void {\n  currentUrl.set(new URL(window.location.href));\n}\n\nexport function navigate(pathWithQuery: string, replace = false): void {\n  const target = new URL(pathWithQuery, window.location.origin);\n  if (replace) {\n    window.history.replaceState(null, \"\", `${target.pathname}${target.search}${target.hash}`);\n  } else {\n    window.history.pushState(null, \"\", `${target.pathname}${target.search}${target.hash}`);\n  }\n  publishUrl();\n}\n\nexport function initializeSpaRouting(): () => void {\n  const onPopState = (): void => {\n    publishUrl();\n  };\n\n  const onDocumentClick = (event: MouseEvent): void => {\n    if (event.defaultPrevented || event.button !== 0) {\n      return;\n    }\n\n    if (event.metaKey || event.ctrlKey || event.shiftKey || event.altKey) {\n      return;\n    }\n\n    const target = event.target;\n    if (!(target instanceof Element)) {\n      return;\n    }\n\n    const anchor = target.closest(\"a[href]\");\n    if (!(anchor instanceof HTMLAnchorElement)) {\n      return;\n    }\n\n    if (!shouldHandleAsSpaLink(anchor)) {\n      return;\n    }\n\n    const url = new URL(anchor.href, window.location.origin);\n    event.preventDefault();\n    navigate(`${url.pathname}${url.search}${url.hash}`);\n  };\n\n  window.addEventListener(\"popstate\", onPopState);\n  document.addEventListener(\"click\", onDocumentClick);\n\n  return () => {\n    window.removeEventListener(\"popstate\", onPopState);\n    document.removeEventListener(\"click\", onDocumentClick);\n  };\n}\n","/** A special constant with type `never` */\nexport const NEVER = Object.freeze({\n    status: \"aborted\",\n});\nexport /*@__NO_SIDE_EFFECTS__*/ function $constructor(name, initializer, params) {\n    function init(inst, def) {\n        var _a;\n        Object.defineProperty(inst, \"_zod\", {\n            value: inst._zod ?? {},\n            enumerable: false,\n        });\n        (_a = inst._zod).traits ?? (_a.traits = new Set());\n        inst._zod.traits.add(name);\n        initializer(inst, def);\n        // support prototype modifications\n        for (const k in _.prototype) {\n            if (!(k in inst))\n                Object.defineProperty(inst, k, { value: _.prototype[k].bind(inst) });\n        }\n        inst._zod.constr = _;\n        inst._zod.def = def;\n    }\n    // doesn't work if Parent has a constructor with arguments\n    const Parent = params?.Parent ?? Object;\n    class Definition extends Parent {\n    }\n    Object.defineProperty(Definition, \"name\", { value: name });\n    function _(def) {\n        var _a;\n        const inst = params?.Parent ? new Definition() : this;\n        init(inst, def);\n        (_a = inst._zod).deferred ?? (_a.deferred = []);\n        for (const fn of inst._zod.deferred) {\n            fn();\n        }\n        return inst;\n    }\n    Object.defineProperty(_, \"init\", { value: init });\n    Object.defineProperty(_, Symbol.hasInstance, {\n        value: (inst) => {\n            if (params?.Parent && inst instanceof params.Parent)\n                return true;\n            return inst?._zod?.traits?.has(name);\n        },\n    });\n    Object.defineProperty(_, \"name\", { value: name });\n    return _;\n}\n//////////////////////////////   UTILITIES   ///////////////////////////////////////\nexport const $brand = Symbol(\"zod_brand\");\nexport class $ZodAsyncError extends Error {\n    constructor() {\n        super(`Encountered Promise during synchronous parse. Use .parseAsync() instead.`);\n    }\n}\nexport const globalConfig = {};\nexport function config(newConfig) {\n    if (newConfig)\n        Object.assign(globalConfig, newConfig);\n    return globalConfig;\n}\n","// functions\nexport function assertEqual(val) {\n    return val;\n}\nexport function assertNotEqual(val) {\n    return val;\n}\nexport function assertIs(_arg) { }\nexport function assertNever(_x) {\n    throw new Error();\n}\nexport function assert(_) { }\nexport function getEnumValues(entries) {\n    const numericValues = Object.values(entries).filter((v) => typeof v === \"number\");\n    const values = Object.entries(entries)\n        .filter(([k, _]) => numericValues.indexOf(+k) === -1)\n        .map(([_, v]) => v);\n    return values;\n}\nexport function joinValues(array, separator = \"|\") {\n    return array.map((val) => stringifyPrimitive(val)).join(separator);\n}\nexport function jsonStringifyReplacer(_, value) {\n    if (typeof value === \"bigint\")\n        return value.toString();\n    return value;\n}\nexport function cached(getter) {\n    const set = false;\n    return {\n        get value() {\n            if (!set) {\n                const value = getter();\n                Object.defineProperty(this, \"value\", { value });\n                return value;\n            }\n            throw new Error(\"cached value already set\");\n        },\n    };\n}\nexport function nullish(input) {\n    return input === null || input === undefined;\n}\nexport function cleanRegex(source) {\n    const start = source.startsWith(\"^\") ? 1 : 0;\n    const end = source.endsWith(\"$\") ? source.length - 1 : source.length;\n    return source.slice(start, end);\n}\nexport function floatSafeRemainder(val, step) {\n    const valDecCount = (val.toString().split(\".\")[1] || \"\").length;\n    const stepDecCount = (step.toString().split(\".\")[1] || \"\").length;\n    const decCount = valDecCount > stepDecCount ? valDecCount : stepDecCount;\n    const valInt = Number.parseInt(val.toFixed(decCount).replace(\".\", \"\"));\n    const stepInt = Number.parseInt(step.toFixed(decCount).replace(\".\", \"\"));\n    return (valInt % stepInt) / 10 ** decCount;\n}\nexport function defineLazy(object, key, getter) {\n    const set = false;\n    Object.defineProperty(object, key, {\n        get() {\n            if (!set) {\n                const value = getter();\n                object[key] = value;\n                return value;\n            }\n            throw new Error(\"cached value already set\");\n        },\n        set(v) {\n            Object.defineProperty(object, key, {\n                value: v,\n                // configurable: true,\n            });\n            // object[key] = v;\n        },\n        configurable: true,\n    });\n}\nexport function assignProp(target, prop, value) {\n    Object.defineProperty(target, prop, {\n        value,\n        writable: true,\n        enumerable: true,\n        configurable: true,\n    });\n}\nexport function getElementAtPath(obj, path) {\n    if (!path)\n        return obj;\n    return path.reduce((acc, key) => acc?.[key], obj);\n}\nexport function promiseAllObject(promisesObj) {\n    const keys = Object.keys(promisesObj);\n    const promises = keys.map((key) => promisesObj[key]);\n    return Promise.all(promises).then((results) => {\n        const resolvedObj = {};\n        for (let i = 0; i < keys.length; i++) {\n            resolvedObj[keys[i]] = results[i];\n        }\n        return resolvedObj;\n    });\n}\nexport function randomString(length = 10) {\n    const chars = \"abcdefghijklmnopqrstuvwxyz\";\n    let str = \"\";\n    for (let i = 0; i < length; i++) {\n        str += chars[Math.floor(Math.random() * chars.length)];\n    }\n    return str;\n}\nexport function esc(str) {\n    return JSON.stringify(str);\n}\nexport const captureStackTrace = Error.captureStackTrace\n    ? Error.captureStackTrace\n    : (..._args) => { };\nexport function isObject(data) {\n    return typeof data === \"object\" && data !== null && !Array.isArray(data);\n}\nexport const allowsEval = cached(() => {\n    if (typeof navigator !== \"undefined\" && navigator?.userAgent?.includes(\"Cloudflare\")) {\n        return false;\n    }\n    try {\n        const F = Function;\n        new F(\"\");\n        return true;\n    }\n    catch (_) {\n        return false;\n    }\n});\nexport function isPlainObject(o) {\n    if (isObject(o) === false)\n        return false;\n    // modified constructor\n    const ctor = o.constructor;\n    if (ctor === undefined)\n        return true;\n    // modified prototype\n    const prot = ctor.prototype;\n    if (isObject(prot) === false)\n        return false;\n    // ctor doesn't have static `isPrototypeOf`\n    if (Object.prototype.hasOwnProperty.call(prot, \"isPrototypeOf\") === false) {\n        return false;\n    }\n    return true;\n}\nexport function numKeys(data) {\n    let keyCount = 0;\n    for (const key in data) {\n        if (Object.prototype.hasOwnProperty.call(data, key)) {\n            keyCount++;\n        }\n    }\n    return keyCount;\n}\nexport const getParsedType = (data) => {\n    const t = typeof data;\n    switch (t) {\n        case \"undefined\":\n            return \"undefined\";\n        case \"string\":\n            return \"string\";\n        case \"number\":\n            return Number.isNaN(data) ? \"nan\" : \"number\";\n        case \"boolean\":\n            return \"boolean\";\n        case \"function\":\n            return \"function\";\n        case \"bigint\":\n            return \"bigint\";\n        case \"symbol\":\n            return \"symbol\";\n        case \"object\":\n            if (Array.isArray(data)) {\n                return \"array\";\n            }\n            if (data === null) {\n                return \"null\";\n            }\n            if (data.then && typeof data.then === \"function\" && data.catch && typeof data.catch === \"function\") {\n                return \"promise\";\n            }\n            if (typeof Map !== \"undefined\" && data instanceof Map) {\n                return \"map\";\n            }\n            if (typeof Set !== \"undefined\" && data instanceof Set) {\n                return \"set\";\n            }\n            if (typeof Date !== \"undefined\" && data instanceof Date) {\n                return \"date\";\n            }\n            if (typeof File !== \"undefined\" && data instanceof File) {\n                return \"file\";\n            }\n            return \"object\";\n        default:\n            throw new Error(`Unknown data type: ${t}`);\n    }\n};\nexport const propertyKeyTypes = new Set([\"string\", \"number\", \"symbol\"]);\nexport const primitiveTypes = new Set([\"string\", \"number\", \"bigint\", \"boolean\", \"symbol\", \"undefined\"]);\nexport function escapeRegex(str) {\n    return str.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n}\n// zod-specific utils\nexport function clone(inst, def, params) {\n    const cl = new inst._zod.constr(def ?? inst._zod.def);\n    if (!def || params?.parent)\n        cl._zod.parent = inst;\n    return cl;\n}\nexport function normalizeParams(_params) {\n    const params = _params;\n    if (!params)\n        return {};\n    if (typeof params === \"string\")\n        return { error: () => params };\n    if (params?.message !== undefined) {\n        if (params?.error !== undefined)\n            throw new Error(\"Cannot specify both `message` and `error` params\");\n        params.error = params.message;\n    }\n    delete params.message;\n    if (typeof params.error === \"string\")\n        return { ...params, error: () => params.error };\n    return params;\n}\nexport function createTransparentProxy(getter) {\n    let target;\n    return new Proxy({}, {\n        get(_, prop, receiver) {\n            target ?? (target = getter());\n            return Reflect.get(target, prop, receiver);\n        },\n        set(_, prop, value, receiver) {\n            target ?? (target = getter());\n            return Reflect.set(target, prop, value, receiver);\n        },\n        has(_, prop) {\n            target ?? (target = getter());\n            return Reflect.has(target, prop);\n        },\n        deleteProperty(_, prop) {\n            target ?? (target = getter());\n            return Reflect.deleteProperty(target, prop);\n        },\n        ownKeys(_) {\n            target ?? (target = getter());\n            return Reflect.ownKeys(target);\n        },\n        getOwnPropertyDescriptor(_, prop) {\n            target ?? (target = getter());\n            return Reflect.getOwnPropertyDescriptor(target, prop);\n        },\n        defineProperty(_, prop, descriptor) {\n            target ?? (target = getter());\n            return Reflect.defineProperty(target, prop, descriptor);\n        },\n    });\n}\nexport function stringifyPrimitive(value) {\n    if (typeof value === \"bigint\")\n        return value.toString() + \"n\";\n    if (typeof value === \"string\")\n        return `\"${value}\"`;\n    return `${value}`;\n}\nexport function optionalKeys(shape) {\n    return Object.keys(shape).filter((k) => {\n        return shape[k]._zod.optin === \"optional\" && shape[k]._zod.optout === \"optional\";\n    });\n}\nexport const NUMBER_FORMAT_RANGES = {\n    safeint: [Number.MIN_SAFE_INTEGER, Number.MAX_SAFE_INTEGER],\n    int32: [-2147483648, 2147483647],\n    uint32: [0, 4294967295],\n    float32: [-3.4028234663852886e38, 3.4028234663852886e38],\n    float64: [-Number.MAX_VALUE, Number.MAX_VALUE],\n};\nexport const BIGINT_FORMAT_RANGES = {\n    int64: [/* @__PURE__*/ BigInt(\"-9223372036854775808\"), /* @__PURE__*/ BigInt(\"9223372036854775807\")],\n    uint64: [/* @__PURE__*/ BigInt(0), /* @__PURE__*/ BigInt(\"18446744073709551615\")],\n};\nexport function pick(schema, mask) {\n    const newShape = {};\n    const currDef = schema._zod.def; //.shape;\n    for (const key in mask) {\n        if (!(key in currDef.shape)) {\n            throw new Error(`Unrecognized key: \"${key}\"`);\n        }\n        if (!mask[key])\n            continue;\n        // pick key\n        newShape[key] = currDef.shape[key];\n    }\n    return clone(schema, {\n        ...schema._zod.def,\n        shape: newShape,\n        checks: [],\n    });\n}\nexport function omit(schema, mask) {\n    const newShape = { ...schema._zod.def.shape };\n    const currDef = schema._zod.def; //.shape;\n    for (const key in mask) {\n        if (!(key in currDef.shape)) {\n            throw new Error(`Unrecognized key: \"${key}\"`);\n        }\n        if (!mask[key])\n            continue;\n        delete newShape[key];\n    }\n    return clone(schema, {\n        ...schema._zod.def,\n        shape: newShape,\n        checks: [],\n    });\n}\nexport function extend(schema, shape) {\n    if (!isPlainObject(shape)) {\n        throw new Error(\"Invalid input to extend: expected a plain object\");\n    }\n    const def = {\n        ...schema._zod.def,\n        get shape() {\n            const _shape = { ...schema._zod.def.shape, ...shape };\n            assignProp(this, \"shape\", _shape); // self-caching\n            return _shape;\n        },\n        checks: [], // delete existing checks\n    };\n    return clone(schema, def);\n}\nexport function merge(a, b) {\n    return clone(a, {\n        ...a._zod.def,\n        get shape() {\n            const _shape = { ...a._zod.def.shape, ...b._zod.def.shape };\n            assignProp(this, \"shape\", _shape); // self-caching\n            return _shape;\n        },\n        catchall: b._zod.def.catchall,\n        checks: [], // delete existing checks\n    });\n}\nexport function partial(Class, schema, mask) {\n    const oldShape = schema._zod.def.shape;\n    const shape = { ...oldShape };\n    if (mask) {\n        for (const key in mask) {\n            if (!(key in oldShape)) {\n                throw new Error(`Unrecognized key: \"${key}\"`);\n            }\n            if (!mask[key])\n                continue;\n            // if (oldShape[key]!._zod.optin === \"optional\") continue;\n            shape[key] = Class\n                ? new Class({\n                    type: \"optional\",\n                    innerType: oldShape[key],\n                })\n                : oldShape[key];\n        }\n    }\n    else {\n        for (const key in oldShape) {\n            // if (oldShape[key]!._zod.optin === \"optional\") continue;\n            shape[key] = Class\n                ? new Class({\n                    type: \"optional\",\n                    innerType: oldShape[key],\n                })\n                : oldShape[key];\n        }\n    }\n    return clone(schema, {\n        ...schema._zod.def,\n        shape,\n        checks: [],\n    });\n}\nexport function required(Class, schema, mask) {\n    const oldShape = schema._zod.def.shape;\n    const shape = { ...oldShape };\n    if (mask) {\n        for (const key in mask) {\n            if (!(key in shape)) {\n                throw new Error(`Unrecognized key: \"${key}\"`);\n            }\n            if (!mask[key])\n                continue;\n            // overwrite with non-optional\n            shape[key] = new Class({\n                type: \"nonoptional\",\n                innerType: oldShape[key],\n            });\n        }\n    }\n    else {\n        for (const key in oldShape) {\n            // overwrite with non-optional\n            shape[key] = new Class({\n                type: \"nonoptional\",\n                innerType: oldShape[key],\n            });\n        }\n    }\n    return clone(schema, {\n        ...schema._zod.def,\n        shape,\n        // optional: [],\n        checks: [],\n    });\n}\nexport function aborted(x, startIndex = 0) {\n    for (let i = startIndex; i < x.issues.length; i++) {\n        if (x.issues[i]?.continue !== true)\n            return true;\n    }\n    return false;\n}\nexport function prefixIssues(path, issues) {\n    return issues.map((iss) => {\n        var _a;\n        (_a = iss).path ?? (_a.path = []);\n        iss.path.unshift(path);\n        return iss;\n    });\n}\nexport function unwrapMessage(message) {\n    return typeof message === \"string\" ? message : message?.message;\n}\nexport function finalizeIssue(iss, ctx, config) {\n    const full = { ...iss, path: iss.path ?? [] };\n    // for backwards compatibility\n    if (!iss.message) {\n        const message = unwrapMessage(iss.inst?._zod.def?.error?.(iss)) ??\n            unwrapMessage(ctx?.error?.(iss)) ??\n            unwrapMessage(config.customError?.(iss)) ??\n            unwrapMessage(config.localeError?.(iss)) ??\n            \"Invalid input\";\n        full.message = message;\n    }\n    // delete (full as any).def;\n    delete full.inst;\n    delete full.continue;\n    if (!ctx?.reportInput) {\n        delete full.input;\n    }\n    return full;\n}\nexport function getSizableOrigin(input) {\n    if (input instanceof Set)\n        return \"set\";\n    if (input instanceof Map)\n        return \"map\";\n    if (input instanceof File)\n        return \"file\";\n    return \"unknown\";\n}\nexport function getLengthableOrigin(input) {\n    if (Array.isArray(input))\n        return \"array\";\n    if (typeof input === \"string\")\n        return \"string\";\n    return \"unknown\";\n}\nexport function issue(...args) {\n    const [iss, input, inst] = args;\n    if (typeof iss === \"string\") {\n        return {\n            message: iss,\n            code: \"custom\",\n            input,\n            inst,\n        };\n    }\n    return { ...iss };\n}\nexport function cleanEnum(obj) {\n    return Object.entries(obj)\n        .filter(([k, _]) => {\n        // return true if NaN, meaning it's not a number, thus a string key\n        return Number.isNaN(Number.parseInt(k, 10));\n    })\n        .map((el) => el[1]);\n}\n// instanceof\nexport class Class {\n    constructor(..._args) { }\n}\n","import { $constructor } from \"./core.js\";\nimport * as util from \"./util.js\";\nconst initializer = (inst, def) => {\n    inst.name = \"$ZodError\";\n    Object.defineProperty(inst, \"_zod\", {\n        value: inst._zod,\n        enumerable: false,\n    });\n    Object.defineProperty(inst, \"issues\", {\n        value: def,\n        enumerable: false,\n    });\n    Object.defineProperty(inst, \"message\", {\n        get() {\n            return JSON.stringify(def, util.jsonStringifyReplacer, 2);\n        },\n        enumerable: true,\n        // configurable: false,\n    });\n    Object.defineProperty(inst, \"toString\", {\n        value: () => inst.message,\n        enumerable: false,\n    });\n};\nexport const $ZodError = $constructor(\"$ZodError\", initializer);\nexport const $ZodRealError = $constructor(\"$ZodError\", initializer, { Parent: Error });\nexport function flattenError(error, mapper = (issue) => issue.message) {\n    const fieldErrors = {};\n    const formErrors = [];\n    for (const sub of error.issues) {\n        if (sub.path.length > 0) {\n            fieldErrors[sub.path[0]] = fieldErrors[sub.path[0]] || [];\n            fieldErrors[sub.path[0]].push(mapper(sub));\n        }\n        else {\n            formErrors.push(mapper(sub));\n        }\n    }\n    return { formErrors, fieldErrors };\n}\nexport function formatError(error, _mapper) {\n    const mapper = _mapper ||\n        function (issue) {\n            return issue.message;\n        };\n    const fieldErrors = { _errors: [] };\n    const processError = (error) => {\n        for (const issue of error.issues) {\n            if (issue.code === \"invalid_union\" && issue.errors.length) {\n                issue.errors.map((issues) => processError({ issues }));\n            }\n            else if (issue.code === \"invalid_key\") {\n                processError({ issues: issue.issues });\n            }\n            else if (issue.code === \"invalid_element\") {\n                processError({ issues: issue.issues });\n            }\n            else if (issue.path.length === 0) {\n                fieldErrors._errors.push(mapper(issue));\n            }\n            else {\n                let curr = fieldErrors;\n                let i = 0;\n                while (i < issue.path.length) {\n                    const el = issue.path[i];\n                    const terminal = i === issue.path.length - 1;\n                    if (!terminal) {\n                        curr[el] = curr[el] || { _errors: [] };\n                    }\n                    else {\n                        curr[el] = curr[el] || { _errors: [] };\n                        curr[el]._errors.push(mapper(issue));\n                    }\n                    curr = curr[el];\n                    i++;\n                }\n            }\n        }\n    };\n    processError(error);\n    return fieldErrors;\n}\nexport function treeifyError(error, _mapper) {\n    const mapper = _mapper ||\n        function (issue) {\n            return issue.message;\n        };\n    const result = { errors: [] };\n    const processError = (error, path = []) => {\n        var _a, _b;\n        for (const issue of error.issues) {\n            if (issue.code === \"invalid_union\" && issue.errors.length) {\n                // regular union error\n                issue.errors.map((issues) => processError({ issues }, issue.path));\n            }\n            else if (issue.code === \"invalid_key\") {\n                processError({ issues: issue.issues }, issue.path);\n            }\n            else if (issue.code === \"invalid_element\") {\n                processError({ issues: issue.issues }, issue.path);\n            }\n            else {\n                const fullpath = [...path, ...issue.path];\n                if (fullpath.length === 0) {\n                    result.errors.push(mapper(issue));\n                    continue;\n                }\n                let curr = result;\n                let i = 0;\n                while (i < fullpath.length) {\n                    const el = fullpath[i];\n                    const terminal = i === fullpath.length - 1;\n                    if (typeof el === \"string\") {\n                        curr.properties ?? (curr.properties = {});\n                        (_a = curr.properties)[el] ?? (_a[el] = { errors: [] });\n                        curr = curr.properties[el];\n                    }\n                    else {\n                        curr.items ?? (curr.items = []);\n                        (_b = curr.items)[el] ?? (_b[el] = { errors: [] });\n                        curr = curr.items[el];\n                    }\n                    if (terminal) {\n                        curr.errors.push(mapper(issue));\n                    }\n                    i++;\n                }\n            }\n        }\n    };\n    processError(error);\n    return result;\n}\n/** Format a ZodError as a human-readable string in the following form.\n *\n * From\n *\n * ```ts\n * ZodError {\n *   issues: [\n *     {\n *       expected: 'string',\n *       code: 'invalid_type',\n *       path: [ 'username' ],\n *       message: 'Invalid input: expected string'\n *     },\n *     {\n *       expected: 'number',\n *       code: 'invalid_type',\n *       path: [ 'favoriteNumbers', 1 ],\n *       message: 'Invalid input: expected number'\n *     }\n *   ];\n * }\n * ```\n *\n * to\n *\n * ```\n * username\n *   âœ– Expected number, received string at \"username\n * favoriteNumbers[0]\n *   âœ– Invalid input: expected number\n * ```\n */\nexport function toDotPath(path) {\n    const segs = [];\n    for (const seg of path) {\n        if (typeof seg === \"number\")\n            segs.push(`[${seg}]`);\n        else if (typeof seg === \"symbol\")\n            segs.push(`[${JSON.stringify(String(seg))}]`);\n        else if (/[^\\w$]/.test(seg))\n            segs.push(`[${JSON.stringify(seg)}]`);\n        else {\n            if (segs.length)\n                segs.push(\".\");\n            segs.push(seg);\n        }\n    }\n    return segs.join(\"\");\n}\nexport function prettifyError(error) {\n    const lines = [];\n    // sort by path length\n    const issues = [...error.issues].sort((a, b) => a.path.length - b.path.length);\n    // Process each issue\n    for (const issue of issues) {\n        lines.push(`âœ– ${issue.message}`);\n        if (issue.path?.length)\n            lines.push(`  â†’ at ${toDotPath(issue.path)}`);\n    }\n    // Convert Map to formatted string\n    return lines.join(\"\\n\");\n}\n","import * as core from \"./core.js\";\nimport * as errors from \"./errors.js\";\nimport * as util from \"./util.js\";\nexport const _parse = (_Err) => (schema, value, _ctx, _params) => {\n    const ctx = _ctx ? Object.assign(_ctx, { async: false }) : { async: false };\n    const result = schema._zod.run({ value, issues: [] }, ctx);\n    if (result instanceof Promise) {\n        throw new core.$ZodAsyncError();\n    }\n    if (result.issues.length) {\n        const e = new (_params?.Err ?? _Err)(result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())));\n        util.captureStackTrace(e, _params?.callee);\n        throw e;\n    }\n    return result.value;\n};\nexport const parse = /* @__PURE__*/ _parse(errors.$ZodRealError);\nexport const _parseAsync = (_Err) => async (schema, value, _ctx, params) => {\n    const ctx = _ctx ? Object.assign(_ctx, { async: true }) : { async: true };\n    let result = schema._zod.run({ value, issues: [] }, ctx);\n    if (result instanceof Promise)\n        result = await result;\n    if (result.issues.length) {\n        const e = new (params?.Err ?? _Err)(result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())));\n        util.captureStackTrace(e, params?.callee);\n        throw e;\n    }\n    return result.value;\n};\nexport const parseAsync = /* @__PURE__*/ _parseAsync(errors.$ZodRealError);\nexport const _safeParse = (_Err) => (schema, value, _ctx) => {\n    const ctx = _ctx ? { ..._ctx, async: false } : { async: false };\n    const result = schema._zod.run({ value, issues: [] }, ctx);\n    if (result instanceof Promise) {\n        throw new core.$ZodAsyncError();\n    }\n    return result.issues.length\n        ? {\n            success: false,\n            error: new (_Err ?? errors.$ZodError)(result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config()))),\n        }\n        : { success: true, data: result.value };\n};\nexport const safeParse = /* @__PURE__*/ _safeParse(errors.$ZodRealError);\nexport const _safeParseAsync = (_Err) => async (schema, value, _ctx) => {\n    const ctx = _ctx ? Object.assign(_ctx, { async: true }) : { async: true };\n    let result = schema._zod.run({ value, issues: [] }, ctx);\n    if (result instanceof Promise)\n        result = await result;\n    return result.issues.length\n        ? {\n            success: false,\n            error: new _Err(result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config()))),\n        }\n        : { success: true, data: result.value };\n};\nexport const safeParseAsync = /* @__PURE__*/ _safeParseAsync(errors.$ZodRealError);\n","export const cuid = /^[cC][^\\s-]{8,}$/;\nexport const cuid2 = /^[0-9a-z]+$/;\nexport const ulid = /^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/;\nexport const xid = /^[0-9a-vA-V]{20}$/;\nexport const ksuid = /^[A-Za-z0-9]{27}$/;\nexport const nanoid = /^[a-zA-Z0-9_-]{21}$/;\n/** ISO 8601-1 duration regex. Does not support the 8601-2 extensions like negative durations or fractional/negative components. */\nexport const duration = /^P(?:(\\d+W)|(?!.*W)(?=\\d|T\\d)(\\d+Y)?(\\d+M)?(\\d+D)?(T(?=\\d)(\\d+H)?(\\d+M)?(\\d+([.,]\\d+)?S)?)?)$/;\n/** Implements ISO 8601-2 extensions like explicit +- prefixes, mixing weeks with other units, and fractional/negative components. */\nexport const extendedDuration = /^[-+]?P(?!$)(?:(?:[-+]?\\d+Y)|(?:[-+]?\\d+[.,]\\d+Y$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:(?:[-+]?\\d+W)|(?:[-+]?\\d+[.,]\\d+W$))?(?:(?:[-+]?\\d+D)|(?:[-+]?\\d+[.,]\\d+D$))?(?:T(?=[\\d+-])(?:(?:[-+]?\\d+H)|(?:[-+]?\\d+[.,]\\d+H$))?(?:(?:[-+]?\\d+M)|(?:[-+]?\\d+[.,]\\d+M$))?(?:[-+]?\\d+(?:[.,]\\d+)?S)?)??$/;\n/** A regex for any UUID-like identifier: 8-4-4-4-12 hex pattern */\nexport const guid = /^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/;\n/** Returns a regex for validating an RFC 4122 UUID.\n *\n * @param version Optionally specify a version 1-8. If no version is specified, all versions are supported. */\nexport const uuid = (version) => {\n    if (!version)\n        return /^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/;\n    return new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${version}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`);\n};\nexport const uuid4 = /*@__PURE__*/ uuid(4);\nexport const uuid6 = /*@__PURE__*/ uuid(6);\nexport const uuid7 = /*@__PURE__*/ uuid(7);\n/** Practical email validation */\nexport const email = /^(?!\\.)(?!.*\\.\\.)([A-Za-z0-9_'+\\-\\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\\-]*\\.)+[A-Za-z]{2,}$/;\n/** Equivalent to the HTML5 input[type=email] validation implemented by browsers. Source: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/email */\nexport const html5Email = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n/** The classic emailregex.com regex for RFC 5322-compliant emails */\nexport const rfc5322Email = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n/** A loose regex that allows Unicode characters, enforces length limits, and that's about it. */\nexport const unicodeEmail = /^[^\\s@\"]{1,64}@[^\\s@]{1,255}$/u;\nexport const browserEmail = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n// from https://thekevinscott.com/emojis-in-javascript/#writing-a-regular-expression\nexport const _emoji = `^(\\\\p{Extended_Pictographic}|\\\\p{Emoji_Component})+$`;\nexport function emoji() {\n    return new RegExp(_emoji, \"u\");\n}\nexport const ipv4 = /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/;\nexport const ipv6 = /^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/;\nexport const cidrv4 = /^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\/([0-9]|[1-2][0-9]|3[0-2])$/;\nexport const cidrv6 = /^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/;\n// https://stackoverflow.com/questions/7860392/determine-if-string-is-in-base64-using-javascript\nexport const base64 = /^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/;\nexport const base64url = /^[A-Za-z0-9_-]*$/;\n// based on https://stackoverflow.com/questions/106179/regular-expression-to-match-dns-hostname-or-ip-address\n// export const hostname: RegExp =\n//   /^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\\-]*[a-zA-Z0-9])\\.)+([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\\-]*[A-Za-z0-9])$/;\nexport const hostname = /^([a-zA-Z0-9-]+\\.)*[a-zA-Z0-9-]+$/;\nexport const domain = /^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\\.)+[a-zA-Z]{2,}$/;\n// https://blog.stevenlevithan.com/archives/validate-phone-number#r4-3 (regex sans spaces)\nexport const e164 = /^\\+(?:[0-9]){6,14}[0-9]$/;\n// const dateSource = `((\\\\d\\\\d[2468][048]|\\\\d\\\\d[13579][26]|\\\\d\\\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\\\d|30)|(02)-(0[1-9]|1\\\\d|2[0-8])))`;\nconst dateSource = `(?:(?:\\\\d\\\\d[2468][048]|\\\\d\\\\d[13579][26]|\\\\d\\\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\\\d|30)|(?:02)-(?:0[1-9]|1\\\\d|2[0-8])))`;\nexport const date = /*@__PURE__*/ new RegExp(`^${dateSource}$`);\nfunction timeSource(args) {\n    const hhmm = `(?:[01]\\\\d|2[0-3]):[0-5]\\\\d`;\n    const regex = typeof args.precision === \"number\"\n        ? args.precision === -1\n            ? `${hhmm}`\n            : args.precision === 0\n                ? `${hhmm}:[0-5]\\\\d`\n                : `${hhmm}:[0-5]\\\\d\\\\.\\\\d{${args.precision}}`\n        : `${hhmm}(?::[0-5]\\\\d(?:\\\\.\\\\d+)?)?`;\n    return regex;\n}\nexport function time(args) {\n    return new RegExp(`^${timeSource(args)}$`);\n}\n// Adapted from https://stackoverflow.com/a/3143231\nexport function datetime(args) {\n    const time = timeSource({ precision: args.precision });\n    const opts = [\"Z\"];\n    if (args.local)\n        opts.push(\"\");\n    if (args.offset)\n        opts.push(`([+-]\\\\d{2}:\\\\d{2})`);\n    const timeRegex = `${time}(?:${opts.join(\"|\")})`;\n    return new RegExp(`^${dateSource}T(?:${timeRegex})$`);\n}\nexport const string = (params) => {\n    const regex = params ? `[\\\\s\\\\S]{${params?.minimum ?? 0},${params?.maximum ?? \"\"}}` : `[\\\\s\\\\S]*`;\n    return new RegExp(`^${regex}$`);\n};\nexport const bigint = /^\\d+n?$/;\nexport const integer = /^\\d+$/;\nexport const number = /^-?\\d+(?:\\.\\d+)?/i;\nexport const boolean = /true|false/i;\nconst _null = /null/i;\nexport { _null as null };\nconst _undefined = /undefined/i;\nexport { _undefined as undefined };\n// regex for string with no uppercase letters\nexport const lowercase = /^[^A-Z]*$/;\n// regex for string with no lowercase letters\nexport const uppercase = /^[^a-z]*$/;\n","// import { $ZodType } from \"./schemas.js\";\nimport * as core from \"./core.js\";\nimport * as regexes from \"./regexes.js\";\nimport * as util from \"./util.js\";\nexport const $ZodCheck = /*@__PURE__*/ core.$constructor(\"$ZodCheck\", (inst, def) => {\n    var _a;\n    inst._zod ?? (inst._zod = {});\n    inst._zod.def = def;\n    (_a = inst._zod).onattach ?? (_a.onattach = []);\n});\nconst numericOriginMap = {\n    number: \"number\",\n    bigint: \"bigint\",\n    object: \"date\",\n};\nexport const $ZodCheckLessThan = /*@__PURE__*/ core.$constructor(\"$ZodCheckLessThan\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const origin = numericOriginMap[typeof def.value];\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        const curr = (def.inclusive ? bag.maximum : bag.exclusiveMaximum) ?? Number.POSITIVE_INFINITY;\n        if (def.value < curr) {\n            if (def.inclusive)\n                bag.maximum = def.value;\n            else\n                bag.exclusiveMaximum = def.value;\n        }\n    });\n    inst._zod.check = (payload) => {\n        if (def.inclusive ? payload.value <= def.value : payload.value < def.value) {\n            return;\n        }\n        payload.issues.push({\n            origin,\n            code: \"too_big\",\n            maximum: def.value,\n            input: payload.value,\n            inclusive: def.inclusive,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckGreaterThan = /*@__PURE__*/ core.$constructor(\"$ZodCheckGreaterThan\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const origin = numericOriginMap[typeof def.value];\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        const curr = (def.inclusive ? bag.minimum : bag.exclusiveMinimum) ?? Number.NEGATIVE_INFINITY;\n        if (def.value > curr) {\n            if (def.inclusive)\n                bag.minimum = def.value;\n            else\n                bag.exclusiveMinimum = def.value;\n        }\n    });\n    inst._zod.check = (payload) => {\n        if (def.inclusive ? payload.value >= def.value : payload.value > def.value) {\n            return;\n        }\n        payload.issues.push({\n            origin,\n            code: \"too_small\",\n            minimum: def.value,\n            input: payload.value,\n            inclusive: def.inclusive,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckMultipleOf = \n/*@__PURE__*/ core.$constructor(\"$ZodCheckMultipleOf\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        var _a;\n        (_a = inst._zod.bag).multipleOf ?? (_a.multipleOf = def.value);\n    });\n    inst._zod.check = (payload) => {\n        if (typeof payload.value !== typeof def.value)\n            throw new Error(\"Cannot mix number and bigint in multiple_of check.\");\n        const isMultiple = typeof payload.value === \"bigint\"\n            ? payload.value % def.value === BigInt(0)\n            : util.floatSafeRemainder(payload.value, def.value) === 0;\n        if (isMultiple)\n            return;\n        payload.issues.push({\n            origin: typeof payload.value,\n            code: \"not_multiple_of\",\n            divisor: def.value,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckNumberFormat = /*@__PURE__*/ core.$constructor(\"$ZodCheckNumberFormat\", (inst, def) => {\n    $ZodCheck.init(inst, def); // no format checks\n    def.format = def.format || \"float64\";\n    const isInt = def.format?.includes(\"int\");\n    const origin = isInt ? \"int\" : \"number\";\n    const [minimum, maximum] = util.NUMBER_FORMAT_RANGES[def.format];\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = def.format;\n        bag.minimum = minimum;\n        bag.maximum = maximum;\n        if (isInt)\n            bag.pattern = regexes.integer;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        if (isInt) {\n            if (!Number.isInteger(input)) {\n                // invalid_format issue\n                // payload.issues.push({\n                //   expected: def.format,\n                //   format: def.format,\n                //   code: \"invalid_format\",\n                //   input,\n                //   inst,\n                // });\n                // invalid_type issue\n                payload.issues.push({\n                    expected: origin,\n                    format: def.format,\n                    code: \"invalid_type\",\n                    input,\n                    inst,\n                });\n                return;\n                // not_multiple_of issue\n                // payload.issues.push({\n                //   code: \"not_multiple_of\",\n                //   origin: \"number\",\n                //   input,\n                //   inst,\n                //   divisor: 1,\n                // });\n            }\n            if (!Number.isSafeInteger(input)) {\n                if (input > 0) {\n                    // too_big\n                    payload.issues.push({\n                        input,\n                        code: \"too_big\",\n                        maximum: Number.MAX_SAFE_INTEGER,\n                        note: \"Integers must be within the safe integer range.\",\n                        inst,\n                        origin,\n                        continue: !def.abort,\n                    });\n                }\n                else {\n                    // too_small\n                    payload.issues.push({\n                        input,\n                        code: \"too_small\",\n                        minimum: Number.MIN_SAFE_INTEGER,\n                        note: \"Integers must be within the safe integer range.\",\n                        inst,\n                        origin,\n                        continue: !def.abort,\n                    });\n                }\n                return;\n            }\n        }\n        if (input < minimum) {\n            payload.issues.push({\n                origin: \"number\",\n                input,\n                code: \"too_small\",\n                minimum,\n                inclusive: true,\n                inst,\n                continue: !def.abort,\n            });\n        }\n        if (input > maximum) {\n            payload.issues.push({\n                origin: \"number\",\n                input,\n                code: \"too_big\",\n                maximum,\n                inst,\n            });\n        }\n    };\n});\nexport const $ZodCheckBigIntFormat = /*@__PURE__*/ core.$constructor(\"$ZodCheckBigIntFormat\", (inst, def) => {\n    $ZodCheck.init(inst, def); // no format checks\n    const [minimum, maximum] = util.BIGINT_FORMAT_RANGES[def.format];\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = def.format;\n        bag.minimum = minimum;\n        bag.maximum = maximum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        if (input < minimum) {\n            payload.issues.push({\n                origin: \"bigint\",\n                input,\n                code: \"too_small\",\n                minimum: minimum,\n                inclusive: true,\n                inst,\n                continue: !def.abort,\n            });\n        }\n        if (input > maximum) {\n            payload.issues.push({\n                origin: \"bigint\",\n                input,\n                code: \"too_big\",\n                maximum,\n                inst,\n            });\n        }\n    };\n});\nexport const $ZodCheckMaxSize = /*@__PURE__*/ core.$constructor(\"$ZodCheckMaxSize\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.size !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const curr = (inst._zod.bag.maximum ?? Number.POSITIVE_INFINITY);\n        if (def.maximum < curr)\n            inst._zod.bag.maximum = def.maximum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const size = input.size;\n        if (size <= def.maximum)\n            return;\n        payload.issues.push({\n            origin: util.getSizableOrigin(input),\n            code: \"too_big\",\n            maximum: def.maximum,\n            input,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckMinSize = /*@__PURE__*/ core.$constructor(\"$ZodCheckMinSize\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.size !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const curr = (inst._zod.bag.minimum ?? Number.NEGATIVE_INFINITY);\n        if (def.minimum > curr)\n            inst._zod.bag.minimum = def.minimum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const size = input.size;\n        if (size >= def.minimum)\n            return;\n        payload.issues.push({\n            origin: util.getSizableOrigin(input),\n            code: \"too_small\",\n            minimum: def.minimum,\n            input,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckSizeEquals = /*@__PURE__*/ core.$constructor(\"$ZodCheckSizeEquals\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.size !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.minimum = def.size;\n        bag.maximum = def.size;\n        bag.size = def.size;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const size = input.size;\n        if (size === def.size)\n            return;\n        const tooBig = size > def.size;\n        payload.issues.push({\n            origin: util.getSizableOrigin(input),\n            ...(tooBig ? { code: \"too_big\", maximum: def.size } : { code: \"too_small\", minimum: def.size }),\n            inclusive: true,\n            exact: true,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckMaxLength = /*@__PURE__*/ core.$constructor(\"$ZodCheckMaxLength\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.length !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const curr = (inst._zod.bag.maximum ?? Number.POSITIVE_INFINITY);\n        if (def.maximum < curr)\n            inst._zod.bag.maximum = def.maximum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const length = input.length;\n        if (length <= def.maximum)\n            return;\n        const origin = util.getLengthableOrigin(input);\n        payload.issues.push({\n            origin,\n            code: \"too_big\",\n            maximum: def.maximum,\n            inclusive: true,\n            input,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckMinLength = /*@__PURE__*/ core.$constructor(\"$ZodCheckMinLength\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.length !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const curr = (inst._zod.bag.minimum ?? Number.NEGATIVE_INFINITY);\n        if (def.minimum > curr)\n            inst._zod.bag.minimum = def.minimum;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const length = input.length;\n        if (length >= def.minimum)\n            return;\n        const origin = util.getLengthableOrigin(input);\n        payload.issues.push({\n            origin,\n            code: \"too_small\",\n            minimum: def.minimum,\n            inclusive: true,\n            input,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckLengthEquals = /*@__PURE__*/ core.$constructor(\"$ZodCheckLengthEquals\", (inst, def) => {\n    var _a;\n    $ZodCheck.init(inst, def);\n    (_a = inst._zod.def).when ?? (_a.when = (payload) => {\n        const val = payload.value;\n        return !util.nullish(val) && val.length !== undefined;\n    });\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.minimum = def.length;\n        bag.maximum = def.length;\n        bag.length = def.length;\n    });\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const length = input.length;\n        if (length === def.length)\n            return;\n        const origin = util.getLengthableOrigin(input);\n        const tooBig = length > def.length;\n        payload.issues.push({\n            origin,\n            ...(tooBig ? { code: \"too_big\", maximum: def.length } : { code: \"too_small\", minimum: def.length }),\n            inclusive: true,\n            exact: true,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckStringFormat = /*@__PURE__*/ core.$constructor(\"$ZodCheckStringFormat\", (inst, def) => {\n    var _a, _b;\n    $ZodCheck.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = def.format;\n        if (def.pattern) {\n            bag.patterns ?? (bag.patterns = new Set());\n            bag.patterns.add(def.pattern);\n        }\n    });\n    if (def.pattern)\n        (_a = inst._zod).check ?? (_a.check = (payload) => {\n            def.pattern.lastIndex = 0;\n            if (def.pattern.test(payload.value))\n                return;\n            payload.issues.push({\n                origin: \"string\",\n                code: \"invalid_format\",\n                format: def.format,\n                input: payload.value,\n                ...(def.pattern ? { pattern: def.pattern.toString() } : {}),\n                inst,\n                continue: !def.abort,\n            });\n        });\n    else\n        (_b = inst._zod).check ?? (_b.check = () => { });\n});\nexport const $ZodCheckRegex = /*@__PURE__*/ core.$constructor(\"$ZodCheckRegex\", (inst, def) => {\n    $ZodCheckStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        def.pattern.lastIndex = 0;\n        if (def.pattern.test(payload.value))\n            return;\n        payload.issues.push({\n            origin: \"string\",\n            code: \"invalid_format\",\n            format: \"regex\",\n            input: payload.value,\n            pattern: def.pattern.toString(),\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckLowerCase = /*@__PURE__*/ core.$constructor(\"$ZodCheckLowerCase\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.lowercase);\n    $ZodCheckStringFormat.init(inst, def);\n});\nexport const $ZodCheckUpperCase = /*@__PURE__*/ core.$constructor(\"$ZodCheckUpperCase\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.uppercase);\n    $ZodCheckStringFormat.init(inst, def);\n});\nexport const $ZodCheckIncludes = /*@__PURE__*/ core.$constructor(\"$ZodCheckIncludes\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const escapedRegex = util.escapeRegex(def.includes);\n    const pattern = new RegExp(typeof def.position === \"number\" ? `^.{${def.position}}${escapedRegex}` : escapedRegex);\n    def.pattern = pattern;\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.patterns ?? (bag.patterns = new Set());\n        bag.patterns.add(pattern);\n    });\n    inst._zod.check = (payload) => {\n        if (payload.value.includes(def.includes, def.position))\n            return;\n        payload.issues.push({\n            origin: \"string\",\n            code: \"invalid_format\",\n            format: \"includes\",\n            includes: def.includes,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckStartsWith = /*@__PURE__*/ core.$constructor(\"$ZodCheckStartsWith\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const pattern = new RegExp(`^${util.escapeRegex(def.prefix)}.*`);\n    def.pattern ?? (def.pattern = pattern);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.patterns ?? (bag.patterns = new Set());\n        bag.patterns.add(pattern);\n    });\n    inst._zod.check = (payload) => {\n        if (payload.value.startsWith(def.prefix))\n            return;\n        payload.issues.push({\n            origin: \"string\",\n            code: \"invalid_format\",\n            format: \"starts_with\",\n            prefix: def.prefix,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCheckEndsWith = /*@__PURE__*/ core.$constructor(\"$ZodCheckEndsWith\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const pattern = new RegExp(`.*${util.escapeRegex(def.suffix)}$`);\n    def.pattern ?? (def.pattern = pattern);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.patterns ?? (bag.patterns = new Set());\n        bag.patterns.add(pattern);\n    });\n    inst._zod.check = (payload) => {\n        if (payload.value.endsWith(def.suffix))\n            return;\n        payload.issues.push({\n            origin: \"string\",\n            code: \"invalid_format\",\n            format: \"ends_with\",\n            suffix: def.suffix,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\n///////////////////////////////////\n/////    $ZodCheckProperty    /////\n///////////////////////////////////\nfunction handleCheckPropertyResult(result, payload, property) {\n    if (result.issues.length) {\n        payload.issues.push(...util.prefixIssues(property, result.issues));\n    }\n}\nexport const $ZodCheckProperty = /*@__PURE__*/ core.$constructor(\"$ZodCheckProperty\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    inst._zod.check = (payload) => {\n        const result = def.schema._zod.run({\n            value: payload.value[def.property],\n            issues: [],\n        }, {});\n        if (result instanceof Promise) {\n            return result.then((result) => handleCheckPropertyResult(result, payload, def.property));\n        }\n        handleCheckPropertyResult(result, payload, def.property);\n        return;\n    };\n});\nexport const $ZodCheckMimeType = /*@__PURE__*/ core.$constructor(\"$ZodCheckMimeType\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    const mimeSet = new Set(def.mime);\n    inst._zod.onattach.push((inst) => {\n        inst._zod.bag.mime = def.mime;\n    });\n    inst._zod.check = (payload) => {\n        if (mimeSet.has(payload.value.type))\n            return;\n        payload.issues.push({\n            code: \"invalid_value\",\n            values: def.mime,\n            input: payload.value.type,\n            inst,\n        });\n    };\n});\nexport const $ZodCheckOverwrite = /*@__PURE__*/ core.$constructor(\"$ZodCheckOverwrite\", (inst, def) => {\n    $ZodCheck.init(inst, def);\n    inst._zod.check = (payload) => {\n        payload.value = def.tx(payload.value);\n    };\n});\n","export class Doc {\n    constructor(args = []) {\n        this.content = [];\n        this.indent = 0;\n        if (this)\n            this.args = args;\n    }\n    indented(fn) {\n        this.indent += 1;\n        fn(this);\n        this.indent -= 1;\n    }\n    write(arg) {\n        if (typeof arg === \"function\") {\n            arg(this, { execution: \"sync\" });\n            arg(this, { execution: \"async\" });\n            return;\n        }\n        const content = arg;\n        const lines = content.split(\"\\n\").filter((x) => x);\n        const minIndent = Math.min(...lines.map((x) => x.length - x.trimStart().length));\n        const dedented = lines.map((x) => x.slice(minIndent)).map((x) => \" \".repeat(this.indent * 2) + x);\n        for (const line of dedented) {\n            this.content.push(line);\n        }\n    }\n    compile() {\n        const F = Function;\n        const args = this?.args;\n        const content = this?.content ?? [``];\n        const lines = [...content.map((x) => `  ${x}`)];\n        // console.log(lines.join(\"\\n\"));\n        return new F(...args, lines.join(\"\\n\"));\n    }\n}\n","export const version = {\n    major: 4,\n    minor: 0,\n    patch: 0,\n};\n","import * as checks from \"./checks.js\";\nimport * as core from \"./core.js\";\nimport { Doc } from \"./doc.js\";\nimport { safeParse, safeParseAsync } from \"./parse.js\";\nimport * as regexes from \"./regexes.js\";\nimport * as util from \"./util.js\";\nimport { version } from \"./versions.js\";\nexport const $ZodType = /*@__PURE__*/ core.$constructor(\"$ZodType\", (inst, def) => {\n    var _a;\n    inst ?? (inst = {});\n    inst._zod.def = def; // set _def property\n    inst._zod.bag = inst._zod.bag || {}; // initialize _bag object\n    inst._zod.version = version;\n    const checks = [...(inst._zod.def.checks ?? [])];\n    // if inst is itself a checks.$ZodCheck, run it as a check\n    if (inst._zod.traits.has(\"$ZodCheck\")) {\n        checks.unshift(inst);\n    }\n    //\n    for (const ch of checks) {\n        for (const fn of ch._zod.onattach) {\n            fn(inst);\n        }\n    }\n    if (checks.length === 0) {\n        // deferred initializer\n        // inst._zod.parse is not yet defined\n        (_a = inst._zod).deferred ?? (_a.deferred = []);\n        inst._zod.deferred?.push(() => {\n            inst._zod.run = inst._zod.parse;\n        });\n    }\n    else {\n        const runChecks = (payload, checks, ctx) => {\n            let isAborted = util.aborted(payload);\n            let asyncResult;\n            for (const ch of checks) {\n                if (ch._zod.def.when) {\n                    const shouldRun = ch._zod.def.when(payload);\n                    if (!shouldRun)\n                        continue;\n                }\n                else if (isAborted) {\n                    continue;\n                }\n                const currLen = payload.issues.length;\n                const _ = ch._zod.check(payload);\n                if (_ instanceof Promise && ctx?.async === false) {\n                    throw new core.$ZodAsyncError();\n                }\n                if (asyncResult || _ instanceof Promise) {\n                    asyncResult = (asyncResult ?? Promise.resolve()).then(async () => {\n                        await _;\n                        const nextLen = payload.issues.length;\n                        if (nextLen === currLen)\n                            return;\n                        if (!isAborted)\n                            isAborted = util.aborted(payload, currLen);\n                    });\n                }\n                else {\n                    const nextLen = payload.issues.length;\n                    if (nextLen === currLen)\n                        continue;\n                    if (!isAborted)\n                        isAborted = util.aborted(payload, currLen);\n                }\n            }\n            if (asyncResult) {\n                return asyncResult.then(() => {\n                    return payload;\n                });\n            }\n            return payload;\n        };\n        inst._zod.run = (payload, ctx) => {\n            const result = inst._zod.parse(payload, ctx);\n            if (result instanceof Promise) {\n                if (ctx.async === false)\n                    throw new core.$ZodAsyncError();\n                return result.then((result) => runChecks(result, checks, ctx));\n            }\n            return runChecks(result, checks, ctx);\n        };\n    }\n    inst[\"~standard\"] = {\n        validate: (value) => {\n            try {\n                const r = safeParse(inst, value);\n                return r.success ? { value: r.data } : { issues: r.error?.issues };\n            }\n            catch (_) {\n                return safeParseAsync(inst, value).then((r) => (r.success ? { value: r.data } : { issues: r.error?.issues }));\n            }\n        },\n        vendor: \"zod\",\n        version: 1,\n    };\n});\nexport { clone } from \"./util.js\";\nexport const $ZodString = /*@__PURE__*/ core.$constructor(\"$ZodString\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = [...(inst?._zod.bag?.patterns ?? [])].pop() ?? regexes.string(inst._zod.bag);\n    inst._zod.parse = (payload, _) => {\n        if (def.coerce)\n            try {\n                payload.value = String(payload.value);\n            }\n            catch (_) { }\n        if (typeof payload.value === \"string\")\n            return payload;\n        payload.issues.push({\n            expected: \"string\",\n            code: \"invalid_type\",\n            input: payload.value,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodStringFormat = /*@__PURE__*/ core.$constructor(\"$ZodStringFormat\", (inst, def) => {\n    // check initialization must come first\n    checks.$ZodCheckStringFormat.init(inst, def);\n    $ZodString.init(inst, def);\n});\nexport const $ZodGUID = /*@__PURE__*/ core.$constructor(\"$ZodGUID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.guid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodUUID = /*@__PURE__*/ core.$constructor(\"$ZodUUID\", (inst, def) => {\n    if (def.version) {\n        const versionMap = {\n            v1: 1,\n            v2: 2,\n            v3: 3,\n            v4: 4,\n            v5: 5,\n            v6: 6,\n            v7: 7,\n            v8: 8,\n        };\n        const v = versionMap[def.version];\n        if (v === undefined)\n            throw new Error(`Invalid UUID version: \"${def.version}\"`);\n        def.pattern ?? (def.pattern = regexes.uuid(v));\n    }\n    else\n        def.pattern ?? (def.pattern = regexes.uuid());\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodEmail = /*@__PURE__*/ core.$constructor(\"$ZodEmail\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.email);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodURL = /*@__PURE__*/ core.$constructor(\"$ZodURL\", (inst, def) => {\n    $ZodStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        try {\n            const orig = payload.value;\n            const url = new URL(orig);\n            const href = url.href;\n            if (def.hostname) {\n                def.hostname.lastIndex = 0;\n                if (!def.hostname.test(url.hostname)) {\n                    payload.issues.push({\n                        code: \"invalid_format\",\n                        format: \"url\",\n                        note: \"Invalid hostname\",\n                        pattern: regexes.hostname.source,\n                        input: payload.value,\n                        inst,\n                        continue: !def.abort,\n                    });\n                }\n            }\n            if (def.protocol) {\n                def.protocol.lastIndex = 0;\n                if (!def.protocol.test(url.protocol.endsWith(\":\") ? url.protocol.slice(0, -1) : url.protocol)) {\n                    payload.issues.push({\n                        code: \"invalid_format\",\n                        format: \"url\",\n                        note: \"Invalid protocol\",\n                        pattern: def.protocol.source,\n                        input: payload.value,\n                        inst,\n                        continue: !def.abort,\n                    });\n                }\n            }\n            // payload.value = url.href;\n            if (!orig.endsWith(\"/\") && href.endsWith(\"/\")) {\n                payload.value = href.slice(0, -1);\n            }\n            else {\n                payload.value = href;\n            }\n            return;\n        }\n        catch (_) {\n            payload.issues.push({\n                code: \"invalid_format\",\n                format: \"url\",\n                input: payload.value,\n                inst,\n                continue: !def.abort,\n            });\n        }\n    };\n});\nexport const $ZodEmoji = /*@__PURE__*/ core.$constructor(\"$ZodEmoji\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.emoji());\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodNanoID = /*@__PURE__*/ core.$constructor(\"$ZodNanoID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.nanoid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodCUID = /*@__PURE__*/ core.$constructor(\"$ZodCUID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.cuid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodCUID2 = /*@__PURE__*/ core.$constructor(\"$ZodCUID2\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.cuid2);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodULID = /*@__PURE__*/ core.$constructor(\"$ZodULID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.ulid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodXID = /*@__PURE__*/ core.$constructor(\"$ZodXID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.xid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodKSUID = /*@__PURE__*/ core.$constructor(\"$ZodKSUID\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.ksuid);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodISODateTime = /*@__PURE__*/ core.$constructor(\"$ZodISODateTime\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.datetime(def));\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodISODate = /*@__PURE__*/ core.$constructor(\"$ZodISODate\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.date);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodISOTime = /*@__PURE__*/ core.$constructor(\"$ZodISOTime\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.time(def));\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodISODuration = /*@__PURE__*/ core.$constructor(\"$ZodISODuration\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.duration);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodIPv4 = /*@__PURE__*/ core.$constructor(\"$ZodIPv4\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.ipv4);\n    $ZodStringFormat.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = `ipv4`;\n    });\n});\nexport const $ZodIPv6 = /*@__PURE__*/ core.$constructor(\"$ZodIPv6\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.ipv6);\n    $ZodStringFormat.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        const bag = inst._zod.bag;\n        bag.format = `ipv6`;\n    });\n    inst._zod.check = (payload) => {\n        try {\n            new URL(`http://[${payload.value}]`);\n            // return;\n        }\n        catch {\n            payload.issues.push({\n                code: \"invalid_format\",\n                format: \"ipv6\",\n                input: payload.value,\n                inst,\n                continue: !def.abort,\n            });\n        }\n    };\n});\nexport const $ZodCIDRv4 = /*@__PURE__*/ core.$constructor(\"$ZodCIDRv4\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.cidrv4);\n    $ZodStringFormat.init(inst, def);\n});\nexport const $ZodCIDRv6 = /*@__PURE__*/ core.$constructor(\"$ZodCIDRv6\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.cidrv6); // not used for validation\n    $ZodStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        const [address, prefix] = payload.value.split(\"/\");\n        try {\n            if (!prefix)\n                throw new Error();\n            const prefixNum = Number(prefix);\n            if (`${prefixNum}` !== prefix)\n                throw new Error();\n            if (prefixNum < 0 || prefixNum > 128)\n                throw new Error();\n            new URL(`http://[${address}]`);\n        }\n        catch {\n            payload.issues.push({\n                code: \"invalid_format\",\n                format: \"cidrv6\",\n                input: payload.value,\n                inst,\n                continue: !def.abort,\n            });\n        }\n    };\n});\n//////////////////////////////   ZodBase64   //////////////////////////////\nexport function isValidBase64(data) {\n    if (data === \"\")\n        return true;\n    if (data.length % 4 !== 0)\n        return false;\n    try {\n        atob(data);\n        return true;\n    }\n    catch {\n        return false;\n    }\n}\nexport const $ZodBase64 = /*@__PURE__*/ core.$constructor(\"$ZodBase64\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.base64);\n    $ZodStringFormat.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        inst._zod.bag.contentEncoding = \"base64\";\n    });\n    inst._zod.check = (payload) => {\n        if (isValidBase64(payload.value))\n            return;\n        payload.issues.push({\n            code: \"invalid_format\",\n            format: \"base64\",\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\n//////////////////////////////   ZodBase64   //////////////////////////////\nexport function isValidBase64URL(data) {\n    if (!regexes.base64url.test(data))\n        return false;\n    const base64 = data.replace(/[-_]/g, (c) => (c === \"-\" ? \"+\" : \"/\"));\n    const padded = base64.padEnd(Math.ceil(base64.length / 4) * 4, \"=\");\n    return isValidBase64(padded);\n}\nexport const $ZodBase64URL = /*@__PURE__*/ core.$constructor(\"$ZodBase64URL\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.base64url);\n    $ZodStringFormat.init(inst, def);\n    inst._zod.onattach.push((inst) => {\n        inst._zod.bag.contentEncoding = \"base64url\";\n    });\n    inst._zod.check = (payload) => {\n        if (isValidBase64URL(payload.value))\n            return;\n        payload.issues.push({\n            code: \"invalid_format\",\n            format: \"base64url\",\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodE164 = /*@__PURE__*/ core.$constructor(\"$ZodE164\", (inst, def) => {\n    def.pattern ?? (def.pattern = regexes.e164);\n    $ZodStringFormat.init(inst, def);\n});\n//////////////////////////////   ZodJWT   //////////////////////////////\nexport function isValidJWT(token, algorithm = null) {\n    try {\n        const tokensParts = token.split(\".\");\n        if (tokensParts.length !== 3)\n            return false;\n        const [header] = tokensParts;\n        if (!header)\n            return false;\n        const parsedHeader = JSON.parse(atob(header));\n        if (\"typ\" in parsedHeader && parsedHeader?.typ !== \"JWT\")\n            return false;\n        if (!parsedHeader.alg)\n            return false;\n        if (algorithm && (!(\"alg\" in parsedHeader) || parsedHeader.alg !== algorithm))\n            return false;\n        return true;\n    }\n    catch {\n        return false;\n    }\n}\nexport const $ZodJWT = /*@__PURE__*/ core.$constructor(\"$ZodJWT\", (inst, def) => {\n    $ZodStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        if (isValidJWT(payload.value, def.alg))\n            return;\n        payload.issues.push({\n            code: \"invalid_format\",\n            format: \"jwt\",\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodCustomStringFormat = /*@__PURE__*/ core.$constructor(\"$ZodCustomStringFormat\", (inst, def) => {\n    $ZodStringFormat.init(inst, def);\n    inst._zod.check = (payload) => {\n        if (def.fn(payload.value))\n            return;\n        payload.issues.push({\n            code: \"invalid_format\",\n            format: def.format,\n            input: payload.value,\n            inst,\n            continue: !def.abort,\n        });\n    };\n});\nexport const $ZodNumber = /*@__PURE__*/ core.$constructor(\"$ZodNumber\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = inst._zod.bag.pattern ?? regexes.number;\n    inst._zod.parse = (payload, _ctx) => {\n        if (def.coerce)\n            try {\n                payload.value = Number(payload.value);\n            }\n            catch (_) { }\n        const input = payload.value;\n        if (typeof input === \"number\" && !Number.isNaN(input) && Number.isFinite(input)) {\n            return payload;\n        }\n        const received = typeof input === \"number\"\n            ? Number.isNaN(input)\n                ? \"NaN\"\n                : !Number.isFinite(input)\n                    ? \"Infinity\"\n                    : undefined\n            : undefined;\n        payload.issues.push({\n            expected: \"number\",\n            code: \"invalid_type\",\n            input,\n            inst,\n            ...(received ? { received } : {}),\n        });\n        return payload;\n    };\n});\nexport const $ZodNumberFormat = /*@__PURE__*/ core.$constructor(\"$ZodNumber\", (inst, def) => {\n    checks.$ZodCheckNumberFormat.init(inst, def);\n    $ZodNumber.init(inst, def); // no format checksp\n});\nexport const $ZodBoolean = /*@__PURE__*/ core.$constructor(\"$ZodBoolean\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = regexes.boolean;\n    inst._zod.parse = (payload, _ctx) => {\n        if (def.coerce)\n            try {\n                payload.value = Boolean(payload.value);\n            }\n            catch (_) { }\n        const input = payload.value;\n        if (typeof input === \"boolean\")\n            return payload;\n        payload.issues.push({\n            expected: \"boolean\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodBigInt = /*@__PURE__*/ core.$constructor(\"$ZodBigInt\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = regexes.bigint;\n    inst._zod.parse = (payload, _ctx) => {\n        if (def.coerce)\n            try {\n                payload.value = BigInt(payload.value);\n            }\n            catch (_) { }\n        if (typeof payload.value === \"bigint\")\n            return payload;\n        payload.issues.push({\n            expected: \"bigint\",\n            code: \"invalid_type\",\n            input: payload.value,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodBigIntFormat = /*@__PURE__*/ core.$constructor(\"$ZodBigInt\", (inst, def) => {\n    checks.$ZodCheckBigIntFormat.init(inst, def);\n    $ZodBigInt.init(inst, def); // no format checks\n});\nexport const $ZodSymbol = /*@__PURE__*/ core.$constructor(\"$ZodSymbol\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (typeof input === \"symbol\")\n            return payload;\n        payload.issues.push({\n            expected: \"symbol\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodUndefined = /*@__PURE__*/ core.$constructor(\"$ZodUndefined\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = regexes.undefined;\n    inst._zod.values = new Set([undefined]);\n    inst._zod.optin = \"optional\";\n    inst._zod.optout = \"optional\";\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (typeof input === \"undefined\")\n            return payload;\n        payload.issues.push({\n            expected: \"undefined\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodNull = /*@__PURE__*/ core.$constructor(\"$ZodNull\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.pattern = regexes.null;\n    inst._zod.values = new Set([null]);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (input === null)\n            return payload;\n        payload.issues.push({\n            expected: \"null\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodAny = /*@__PURE__*/ core.$constructor(\"$ZodAny\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload) => payload;\n});\nexport const $ZodUnknown = /*@__PURE__*/ core.$constructor(\"$ZodUnknown\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload) => payload;\n});\nexport const $ZodNever = /*@__PURE__*/ core.$constructor(\"$ZodNever\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        payload.issues.push({\n            expected: \"never\",\n            code: \"invalid_type\",\n            input: payload.value,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodVoid = /*@__PURE__*/ core.$constructor(\"$ZodVoid\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (typeof input === \"undefined\")\n            return payload;\n        payload.issues.push({\n            expected: \"void\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodDate = /*@__PURE__*/ core.$constructor(\"$ZodDate\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        if (def.coerce) {\n            try {\n                payload.value = new Date(payload.value);\n            }\n            catch (_err) { }\n        }\n        const input = payload.value;\n        const isDate = input instanceof Date;\n        const isValidDate = isDate && !Number.isNaN(input.getTime());\n        if (isValidDate)\n            return payload;\n        payload.issues.push({\n            expected: \"date\",\n            code: \"invalid_type\",\n            input,\n            ...(isDate ? { received: \"Invalid Date\" } : {}),\n            inst,\n        });\n        return payload;\n    };\n});\nfunction handleArrayResult(result, final, index) {\n    if (result.issues.length) {\n        final.issues.push(...util.prefixIssues(index, result.issues));\n    }\n    final.value[index] = result.value;\n}\nexport const $ZodArray = /*@__PURE__*/ core.$constructor(\"$ZodArray\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!Array.isArray(input)) {\n            payload.issues.push({\n                expected: \"array\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        payload.value = Array(input.length);\n        const proms = [];\n        for (let i = 0; i < input.length; i++) {\n            const item = input[i];\n            const result = def.element._zod.run({\n                value: item,\n                issues: [],\n            }, ctx);\n            if (result instanceof Promise) {\n                proms.push(result.then((result) => handleArrayResult(result, payload, i)));\n            }\n            else {\n                handleArrayResult(result, payload, i);\n            }\n        }\n        if (proms.length) {\n            return Promise.all(proms).then(() => payload);\n        }\n        return payload; //handleArrayResultsAsync(parseResults, final);\n    };\n});\nfunction handleObjectResult(result, final, key) {\n    // if(isOptional)\n    if (result.issues.length) {\n        final.issues.push(...util.prefixIssues(key, result.issues));\n    }\n    final.value[key] = result.value;\n}\nfunction handleOptionalObjectResult(result, final, key, input) {\n    if (result.issues.length) {\n        // validation failed against value schema\n        if (input[key] === undefined) {\n            // if input was undefined, ignore the error\n            if (key in input) {\n                final.value[key] = undefined;\n            }\n            else {\n                final.value[key] = result.value;\n            }\n        }\n        else {\n            final.issues.push(...util.prefixIssues(key, result.issues));\n        }\n    }\n    else if (result.value === undefined) {\n        // validation returned `undefined`\n        if (key in input)\n            final.value[key] = undefined;\n    }\n    else {\n        // non-undefined value\n        final.value[key] = result.value;\n    }\n}\nexport const $ZodObject = /*@__PURE__*/ core.$constructor(\"$ZodObject\", (inst, def) => {\n    // requires cast because technically $ZodObject doesn't extend\n    $ZodType.init(inst, def);\n    const _normalized = util.cached(() => {\n        const keys = Object.keys(def.shape);\n        for (const k of keys) {\n            if (!(def.shape[k] instanceof $ZodType)) {\n                throw new Error(`Invalid element at key \"${k}\": expected a Zod schema`);\n            }\n        }\n        const okeys = util.optionalKeys(def.shape);\n        return {\n            shape: def.shape,\n            keys,\n            keySet: new Set(keys),\n            numKeys: keys.length,\n            optionalKeys: new Set(okeys),\n        };\n    });\n    util.defineLazy(inst._zod, \"propValues\", () => {\n        const shape = def.shape;\n        const propValues = {};\n        for (const key in shape) {\n            const field = shape[key]._zod;\n            if (field.values) {\n                propValues[key] ?? (propValues[key] = new Set());\n                for (const v of field.values)\n                    propValues[key].add(v);\n            }\n        }\n        return propValues;\n    });\n    const generateFastpass = (shape) => {\n        const doc = new Doc([\"shape\", \"payload\", \"ctx\"]);\n        const normalized = _normalized.value;\n        const parseStr = (key) => {\n            const k = util.esc(key);\n            return `shape[${k}]._zod.run({ value: input[${k}], issues: [] }, ctx)`;\n        };\n        doc.write(`const input = payload.value;`);\n        const ids = Object.create(null);\n        let counter = 0;\n        for (const key of normalized.keys) {\n            ids[key] = `key_${counter++}`;\n        }\n        // A: preserve key order {\n        doc.write(`const newResult = {}`);\n        for (const key of normalized.keys) {\n            if (normalized.optionalKeys.has(key)) {\n                const id = ids[key];\n                doc.write(`const ${id} = ${parseStr(key)};`);\n                const k = util.esc(key);\n                doc.write(`\n        if (${id}.issues.length) {\n          if (input[${k}] === undefined) {\n            if (${k} in input) {\n              newResult[${k}] = undefined;\n            }\n          } else {\n            payload.issues = payload.issues.concat(\n              ${id}.issues.map((iss) => ({\n                ...iss,\n                path: iss.path ? [${k}, ...iss.path] : [${k}],\n              }))\n            );\n          }\n        } else if (${id}.value === undefined) {\n          if (${k} in input) newResult[${k}] = undefined;\n        } else {\n          newResult[${k}] = ${id}.value;\n        }\n        `);\n            }\n            else {\n                const id = ids[key];\n                //  const id = ids[key];\n                doc.write(`const ${id} = ${parseStr(key)};`);\n                doc.write(`\n          if (${id}.issues.length) payload.issues = payload.issues.concat(${id}.issues.map(iss => ({\n            ...iss,\n            path: iss.path ? [${util.esc(key)}, ...iss.path] : [${util.esc(key)}]\n          })));`);\n                doc.write(`newResult[${util.esc(key)}] = ${id}.value`);\n            }\n        }\n        doc.write(`payload.value = newResult;`);\n        doc.write(`return payload;`);\n        const fn = doc.compile();\n        return (payload, ctx) => fn(shape, payload, ctx);\n    };\n    let fastpass;\n    const isObject = util.isObject;\n    const jit = !core.globalConfig.jitless;\n    const allowsEval = util.allowsEval;\n    const fastEnabled = jit && allowsEval.value; // && !def.catchall;\n    const catchall = def.catchall;\n    let value;\n    inst._zod.parse = (payload, ctx) => {\n        value ?? (value = _normalized.value);\n        const input = payload.value;\n        if (!isObject(input)) {\n            payload.issues.push({\n                expected: \"object\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        const proms = [];\n        if (jit && fastEnabled && ctx?.async === false && ctx.jitless !== true) {\n            // always synchronous\n            if (!fastpass)\n                fastpass = generateFastpass(def.shape);\n            payload = fastpass(payload, ctx);\n        }\n        else {\n            payload.value = {};\n            const shape = value.shape;\n            for (const key of value.keys) {\n                const el = shape[key];\n                // do not add omitted optional keys\n                // if (!(key in input)) {\n                //   if (optionalKeys.has(key)) continue;\n                //   payload.issues.push({\n                //     code: \"invalid_type\",\n                //     path: [key],\n                //     expected: \"nonoptional\",\n                //     note: `Missing required key: \"${key}\"`,\n                //     input,\n                //     inst,\n                //   });\n                // }\n                const r = el._zod.run({ value: input[key], issues: [] }, ctx);\n                const isOptional = el._zod.optin === \"optional\" && el._zod.optout === \"optional\";\n                if (r instanceof Promise) {\n                    proms.push(r.then((r) => isOptional ? handleOptionalObjectResult(r, payload, key, input) : handleObjectResult(r, payload, key)));\n                }\n                else if (isOptional) {\n                    handleOptionalObjectResult(r, payload, key, input);\n                }\n                else {\n                    handleObjectResult(r, payload, key);\n                }\n            }\n        }\n        if (!catchall) {\n            // return payload;\n            return proms.length ? Promise.all(proms).then(() => payload) : payload;\n        }\n        const unrecognized = [];\n        // iterate over input keys\n        const keySet = value.keySet;\n        const _catchall = catchall._zod;\n        const t = _catchall.def.type;\n        for (const key of Object.keys(input)) {\n            if (keySet.has(key))\n                continue;\n            if (t === \"never\") {\n                unrecognized.push(key);\n                continue;\n            }\n            const r = _catchall.run({ value: input[key], issues: [] }, ctx);\n            if (r instanceof Promise) {\n                proms.push(r.then((r) => handleObjectResult(r, payload, key)));\n            }\n            else {\n                handleObjectResult(r, payload, key);\n            }\n        }\n        if (unrecognized.length) {\n            payload.issues.push({\n                code: \"unrecognized_keys\",\n                keys: unrecognized,\n                input,\n                inst,\n            });\n        }\n        if (!proms.length)\n            return payload;\n        return Promise.all(proms).then(() => {\n            return payload;\n        });\n    };\n});\nfunction handleUnionResults(results, final, inst, ctx) {\n    for (const result of results) {\n        if (result.issues.length === 0) {\n            final.value = result.value;\n            return final;\n        }\n    }\n    final.issues.push({\n        code: \"invalid_union\",\n        input: final.value,\n        inst,\n        errors: results.map((result) => result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config()))),\n    });\n    return final;\n}\nexport const $ZodUnion = /*@__PURE__*/ core.$constructor(\"$ZodUnion\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"optin\", () => def.options.some((o) => o._zod.optin === \"optional\") ? \"optional\" : undefined);\n    util.defineLazy(inst._zod, \"optout\", () => def.options.some((o) => o._zod.optout === \"optional\") ? \"optional\" : undefined);\n    util.defineLazy(inst._zod, \"values\", () => {\n        if (def.options.every((o) => o._zod.values)) {\n            return new Set(def.options.flatMap((option) => Array.from(option._zod.values)));\n        }\n        return undefined;\n    });\n    util.defineLazy(inst._zod, \"pattern\", () => {\n        if (def.options.every((o) => o._zod.pattern)) {\n            const patterns = def.options.map((o) => o._zod.pattern);\n            return new RegExp(`^(${patterns.map((p) => util.cleanRegex(p.source)).join(\"|\")})$`);\n        }\n        return undefined;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        let async = false;\n        const results = [];\n        for (const option of def.options) {\n            const result = option._zod.run({\n                value: payload.value,\n                issues: [],\n            }, ctx);\n            if (result instanceof Promise) {\n                results.push(result);\n                async = true;\n            }\n            else {\n                if (result.issues.length === 0)\n                    return result;\n                results.push(result);\n            }\n        }\n        if (!async)\n            return handleUnionResults(results, payload, inst, ctx);\n        return Promise.all(results).then((results) => {\n            return handleUnionResults(results, payload, inst, ctx);\n        });\n    };\n});\nexport const $ZodDiscriminatedUnion = \n/*@__PURE__*/\ncore.$constructor(\"$ZodDiscriminatedUnion\", (inst, def) => {\n    $ZodUnion.init(inst, def);\n    const _super = inst._zod.parse;\n    util.defineLazy(inst._zod, \"propValues\", () => {\n        const propValues = {};\n        for (const option of def.options) {\n            const pv = option._zod.propValues;\n            if (!pv || Object.keys(pv).length === 0)\n                throw new Error(`Invalid discriminated union option at index \"${def.options.indexOf(option)}\"`);\n            for (const [k, v] of Object.entries(pv)) {\n                if (!propValues[k])\n                    propValues[k] = new Set();\n                for (const val of v) {\n                    propValues[k].add(val);\n                }\n            }\n        }\n        return propValues;\n    });\n    const disc = util.cached(() => {\n        const opts = def.options;\n        const map = new Map();\n        for (const o of opts) {\n            const values = o._zod.propValues[def.discriminator];\n            if (!values || values.size === 0)\n                throw new Error(`Invalid discriminated union option at index \"${def.options.indexOf(o)}\"`);\n            for (const v of values) {\n                if (map.has(v)) {\n                    throw new Error(`Duplicate discriminator value \"${String(v)}\"`);\n                }\n                map.set(v, o);\n            }\n        }\n        return map;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!util.isObject(input)) {\n            payload.issues.push({\n                code: \"invalid_type\",\n                expected: \"object\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        const opt = disc.value.get(input?.[def.discriminator]);\n        if (opt) {\n            return opt._zod.run(payload, ctx);\n        }\n        if (def.unionFallback) {\n            return _super(payload, ctx);\n        }\n        // no matching discriminator\n        payload.issues.push({\n            code: \"invalid_union\",\n            errors: [],\n            note: \"No matching discriminator\",\n            input,\n            path: [def.discriminator],\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodIntersection = /*@__PURE__*/ core.$constructor(\"$ZodIntersection\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        const left = def.left._zod.run({ value: input, issues: [] }, ctx);\n        const right = def.right._zod.run({ value: input, issues: [] }, ctx);\n        const async = left instanceof Promise || right instanceof Promise;\n        if (async) {\n            return Promise.all([left, right]).then(([left, right]) => {\n                return handleIntersectionResults(payload, left, right);\n            });\n        }\n        return handleIntersectionResults(payload, left, right);\n    };\n});\nfunction mergeValues(a, b) {\n    // const aType = parse.t(a);\n    // const bType = parse.t(b);\n    if (a === b) {\n        return { valid: true, data: a };\n    }\n    if (a instanceof Date && b instanceof Date && +a === +b) {\n        return { valid: true, data: a };\n    }\n    if (util.isPlainObject(a) && util.isPlainObject(b)) {\n        const bKeys = Object.keys(b);\n        const sharedKeys = Object.keys(a).filter((key) => bKeys.indexOf(key) !== -1);\n        const newObj = { ...a, ...b };\n        for (const key of sharedKeys) {\n            const sharedValue = mergeValues(a[key], b[key]);\n            if (!sharedValue.valid) {\n                return {\n                    valid: false,\n                    mergeErrorPath: [key, ...sharedValue.mergeErrorPath],\n                };\n            }\n            newObj[key] = sharedValue.data;\n        }\n        return { valid: true, data: newObj };\n    }\n    if (Array.isArray(a) && Array.isArray(b)) {\n        if (a.length !== b.length) {\n            return { valid: false, mergeErrorPath: [] };\n        }\n        const newArray = [];\n        for (let index = 0; index < a.length; index++) {\n            const itemA = a[index];\n            const itemB = b[index];\n            const sharedValue = mergeValues(itemA, itemB);\n            if (!sharedValue.valid) {\n                return {\n                    valid: false,\n                    mergeErrorPath: [index, ...sharedValue.mergeErrorPath],\n                };\n            }\n            newArray.push(sharedValue.data);\n        }\n        return { valid: true, data: newArray };\n    }\n    return { valid: false, mergeErrorPath: [] };\n}\nfunction handleIntersectionResults(result, left, right) {\n    if (left.issues.length) {\n        result.issues.push(...left.issues);\n    }\n    if (right.issues.length) {\n        result.issues.push(...right.issues);\n    }\n    if (util.aborted(result))\n        return result;\n    const merged = mergeValues(left.value, right.value);\n    if (!merged.valid) {\n        throw new Error(`Unmergable intersection. Error path: ` + `${JSON.stringify(merged.mergeErrorPath)}`);\n    }\n    result.value = merged.data;\n    return result;\n}\nexport const $ZodTuple = /*@__PURE__*/ core.$constructor(\"$ZodTuple\", (inst, def) => {\n    $ZodType.init(inst, def);\n    const items = def.items;\n    const optStart = items.length - [...items].reverse().findIndex((item) => item._zod.optin !== \"optional\");\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!Array.isArray(input)) {\n            payload.issues.push({\n                input,\n                inst,\n                expected: \"tuple\",\n                code: \"invalid_type\",\n            });\n            return payload;\n        }\n        payload.value = [];\n        const proms = [];\n        if (!def.rest) {\n            const tooBig = input.length > items.length;\n            const tooSmall = input.length < optStart - 1;\n            if (tooBig || tooSmall) {\n                payload.issues.push({\n                    input,\n                    inst,\n                    origin: \"array\",\n                    ...(tooBig ? { code: \"too_big\", maximum: items.length } : { code: \"too_small\", minimum: items.length }),\n                });\n                return payload;\n            }\n        }\n        let i = -1;\n        for (const item of items) {\n            i++;\n            if (i >= input.length)\n                if (i >= optStart)\n                    continue;\n            const result = item._zod.run({\n                value: input[i],\n                issues: [],\n            }, ctx);\n            if (result instanceof Promise) {\n                proms.push(result.then((result) => handleTupleResult(result, payload, i)));\n            }\n            else {\n                handleTupleResult(result, payload, i);\n            }\n        }\n        if (def.rest) {\n            const rest = input.slice(items.length);\n            for (const el of rest) {\n                i++;\n                const result = def.rest._zod.run({\n                    value: el,\n                    issues: [],\n                }, ctx);\n                if (result instanceof Promise) {\n                    proms.push(result.then((result) => handleTupleResult(result, payload, i)));\n                }\n                else {\n                    handleTupleResult(result, payload, i);\n                }\n            }\n        }\n        if (proms.length)\n            return Promise.all(proms).then(() => payload);\n        return payload;\n    };\n});\nfunction handleTupleResult(result, final, index) {\n    if (result.issues.length) {\n        final.issues.push(...util.prefixIssues(index, result.issues));\n    }\n    final.value[index] = result.value;\n}\nexport const $ZodRecord = /*@__PURE__*/ core.$constructor(\"$ZodRecord\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!util.isPlainObject(input)) {\n            payload.issues.push({\n                expected: \"record\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        const proms = [];\n        if (def.keyType._zod.values) {\n            const values = def.keyType._zod.values;\n            payload.value = {};\n            for (const key of values) {\n                if (typeof key === \"string\" || typeof key === \"number\" || typeof key === \"symbol\") {\n                    const result = def.valueType._zod.run({ value: input[key], issues: [] }, ctx);\n                    if (result instanceof Promise) {\n                        proms.push(result.then((result) => {\n                            if (result.issues.length) {\n                                payload.issues.push(...util.prefixIssues(key, result.issues));\n                            }\n                            payload.value[key] = result.value;\n                        }));\n                    }\n                    else {\n                        if (result.issues.length) {\n                            payload.issues.push(...util.prefixIssues(key, result.issues));\n                        }\n                        payload.value[key] = result.value;\n                    }\n                }\n            }\n            let unrecognized;\n            for (const key in input) {\n                if (!values.has(key)) {\n                    unrecognized = unrecognized ?? [];\n                    unrecognized.push(key);\n                }\n            }\n            if (unrecognized && unrecognized.length > 0) {\n                payload.issues.push({\n                    code: \"unrecognized_keys\",\n                    input,\n                    inst,\n                    keys: unrecognized,\n                });\n            }\n        }\n        else {\n            payload.value = {};\n            for (const key of Reflect.ownKeys(input)) {\n                if (key === \"__proto__\")\n                    continue;\n                const keyResult = def.keyType._zod.run({ value: key, issues: [] }, ctx);\n                if (keyResult instanceof Promise) {\n                    throw new Error(\"Async schemas not supported in object keys currently\");\n                }\n                if (keyResult.issues.length) {\n                    payload.issues.push({\n                        origin: \"record\",\n                        code: \"invalid_key\",\n                        issues: keyResult.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n                        input: key,\n                        path: [key],\n                        inst,\n                    });\n                    payload.value[keyResult.value] = keyResult.value;\n                    continue;\n                }\n                const result = def.valueType._zod.run({ value: input[key], issues: [] }, ctx);\n                if (result instanceof Promise) {\n                    proms.push(result.then((result) => {\n                        if (result.issues.length) {\n                            payload.issues.push(...util.prefixIssues(key, result.issues));\n                        }\n                        payload.value[keyResult.value] = result.value;\n                    }));\n                }\n                else {\n                    if (result.issues.length) {\n                        payload.issues.push(...util.prefixIssues(key, result.issues));\n                    }\n                    payload.value[keyResult.value] = result.value;\n                }\n            }\n        }\n        if (proms.length) {\n            return Promise.all(proms).then(() => payload);\n        }\n        return payload;\n    };\n});\nexport const $ZodMap = /*@__PURE__*/ core.$constructor(\"$ZodMap\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!(input instanceof Map)) {\n            payload.issues.push({\n                expected: \"map\",\n                code: \"invalid_type\",\n                input,\n                inst,\n            });\n            return payload;\n        }\n        const proms = [];\n        payload.value = new Map();\n        for (const [key, value] of input) {\n            const keyResult = def.keyType._zod.run({ value: key, issues: [] }, ctx);\n            const valueResult = def.valueType._zod.run({ value: value, issues: [] }, ctx);\n            if (keyResult instanceof Promise || valueResult instanceof Promise) {\n                proms.push(Promise.all([keyResult, valueResult]).then(([keyResult, valueResult]) => {\n                    handleMapResult(keyResult, valueResult, payload, key, input, inst, ctx);\n                }));\n            }\n            else {\n                handleMapResult(keyResult, valueResult, payload, key, input, inst, ctx);\n            }\n        }\n        if (proms.length)\n            return Promise.all(proms).then(() => payload);\n        return payload;\n    };\n});\nfunction handleMapResult(keyResult, valueResult, final, key, input, inst, ctx) {\n    if (keyResult.issues.length) {\n        if (util.propertyKeyTypes.has(typeof key)) {\n            final.issues.push(...util.prefixIssues(key, keyResult.issues));\n        }\n        else {\n            final.issues.push({\n                origin: \"map\",\n                code: \"invalid_key\",\n                input,\n                inst,\n                issues: keyResult.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n            });\n        }\n    }\n    if (valueResult.issues.length) {\n        if (util.propertyKeyTypes.has(typeof key)) {\n            final.issues.push(...util.prefixIssues(key, valueResult.issues));\n        }\n        else {\n            final.issues.push({\n                origin: \"map\",\n                code: \"invalid_element\",\n                input,\n                inst,\n                key: key,\n                issues: valueResult.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n            });\n        }\n    }\n    final.value.set(keyResult.value, valueResult.value);\n}\nexport const $ZodSet = /*@__PURE__*/ core.$constructor(\"$ZodSet\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const input = payload.value;\n        if (!(input instanceof Set)) {\n            payload.issues.push({\n                input,\n                inst,\n                expected: \"set\",\n                code: \"invalid_type\",\n            });\n            return payload;\n        }\n        const proms = [];\n        payload.value = new Set();\n        for (const item of input) {\n            const result = def.valueType._zod.run({ value: item, issues: [] }, ctx);\n            if (result instanceof Promise) {\n                proms.push(result.then((result) => handleSetResult(result, payload)));\n            }\n            else\n                handleSetResult(result, payload);\n        }\n        if (proms.length)\n            return Promise.all(proms).then(() => payload);\n        return payload;\n    };\n});\nfunction handleSetResult(result, final) {\n    if (result.issues.length) {\n        final.issues.push(...result.issues);\n    }\n    final.value.add(result.value);\n}\nexport const $ZodEnum = /*@__PURE__*/ core.$constructor(\"$ZodEnum\", (inst, def) => {\n    $ZodType.init(inst, def);\n    const values = util.getEnumValues(def.entries);\n    inst._zod.values = new Set(values);\n    inst._zod.pattern = new RegExp(`^(${values\n        .filter((k) => util.propertyKeyTypes.has(typeof k))\n        .map((o) => (typeof o === \"string\" ? util.escapeRegex(o) : o.toString()))\n        .join(\"|\")})$`);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (inst._zod.values.has(input)) {\n            return payload;\n        }\n        payload.issues.push({\n            code: \"invalid_value\",\n            values,\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodLiteral = /*@__PURE__*/ core.$constructor(\"$ZodLiteral\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.values = new Set(def.values);\n    inst._zod.pattern = new RegExp(`^(${def.values\n        .map((o) => (typeof o === \"string\" ? util.escapeRegex(o) : o ? o.toString() : String(o)))\n        .join(\"|\")})$`);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (inst._zod.values.has(input)) {\n            return payload;\n        }\n        payload.issues.push({\n            code: \"invalid_value\",\n            values: def.values,\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodFile = /*@__PURE__*/ core.$constructor(\"$ZodFile\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        const input = payload.value;\n        if (input instanceof File)\n            return payload;\n        payload.issues.push({\n            expected: \"file\",\n            code: \"invalid_type\",\n            input,\n            inst,\n        });\n        return payload;\n    };\n});\nexport const $ZodTransform = /*@__PURE__*/ core.$constructor(\"$ZodTransform\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        const _out = def.transform(payload.value, payload);\n        if (_ctx.async) {\n            const output = _out instanceof Promise ? _out : Promise.resolve(_out);\n            return output.then((output) => {\n                payload.value = output;\n                return payload;\n            });\n        }\n        if (_out instanceof Promise) {\n            throw new core.$ZodAsyncError();\n        }\n        payload.value = _out;\n        return payload;\n    };\n});\nexport const $ZodOptional = /*@__PURE__*/ core.$constructor(\"$ZodOptional\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.optin = \"optional\";\n    inst._zod.optout = \"optional\";\n    util.defineLazy(inst._zod, \"values\", () => {\n        return def.innerType._zod.values ? new Set([...def.innerType._zod.values, undefined]) : undefined;\n    });\n    util.defineLazy(inst._zod, \"pattern\", () => {\n        const pattern = def.innerType._zod.pattern;\n        return pattern ? new RegExp(`^(${util.cleanRegex(pattern.source)})?$`) : undefined;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        if (def.innerType._zod.optin === \"optional\") {\n            return def.innerType._zod.run(payload, ctx);\n        }\n        if (payload.value === undefined) {\n            return payload;\n        }\n        return def.innerType._zod.run(payload, ctx);\n    };\n});\nexport const $ZodNullable = /*@__PURE__*/ core.$constructor(\"$ZodNullable\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"optin\", () => def.innerType._zod.optin);\n    util.defineLazy(inst._zod, \"optout\", () => def.innerType._zod.optout);\n    util.defineLazy(inst._zod, \"pattern\", () => {\n        const pattern = def.innerType._zod.pattern;\n        return pattern ? new RegExp(`^(${util.cleanRegex(pattern.source)}|null)$`) : undefined;\n    });\n    util.defineLazy(inst._zod, \"values\", () => {\n        return def.innerType._zod.values ? new Set([...def.innerType._zod.values, null]) : undefined;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        if (payload.value === null)\n            return payload;\n        return def.innerType._zod.run(payload, ctx);\n    };\n});\nexport const $ZodDefault = /*@__PURE__*/ core.$constructor(\"$ZodDefault\", (inst, def) => {\n    $ZodType.init(inst, def);\n    // inst._zod.qin = \"true\";\n    inst._zod.optin = \"optional\";\n    util.defineLazy(inst._zod, \"values\", () => def.innerType._zod.values);\n    inst._zod.parse = (payload, ctx) => {\n        if (payload.value === undefined) {\n            payload.value = def.defaultValue;\n            /**\n             * $ZodDefault always returns the default value immediately.\n             * It doesn't pass the default value into the validator (\"prefault\"). There's no reason to pass the default value through validation. The validity of the default is enforced by TypeScript statically. Otherwise, it's the responsibility of the user to ensure the default is valid. In the case of pipes with divergent in/out types, you can specify the default on the `in` schema of your ZodPipe to set a \"prefault\" for the pipe.   */\n            return payload;\n        }\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then((result) => handleDefaultResult(result, def));\n        }\n        return handleDefaultResult(result, def);\n    };\n});\nfunction handleDefaultResult(payload, def) {\n    if (payload.value === undefined) {\n        payload.value = def.defaultValue;\n    }\n    return payload;\n}\nexport const $ZodPrefault = /*@__PURE__*/ core.$constructor(\"$ZodPrefault\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.optin = \"optional\";\n    util.defineLazy(inst._zod, \"values\", () => def.innerType._zod.values);\n    inst._zod.parse = (payload, ctx) => {\n        if (payload.value === undefined) {\n            payload.value = def.defaultValue;\n        }\n        return def.innerType._zod.run(payload, ctx);\n    };\n});\nexport const $ZodNonOptional = /*@__PURE__*/ core.$constructor(\"$ZodNonOptional\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"values\", () => {\n        const v = def.innerType._zod.values;\n        return v ? new Set([...v].filter((x) => x !== undefined)) : undefined;\n    });\n    inst._zod.parse = (payload, ctx) => {\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then((result) => handleNonOptionalResult(result, inst));\n        }\n        return handleNonOptionalResult(result, inst);\n    };\n});\nfunction handleNonOptionalResult(payload, inst) {\n    if (!payload.issues.length && payload.value === undefined) {\n        payload.issues.push({\n            code: \"invalid_type\",\n            expected: \"nonoptional\",\n            input: payload.value,\n            inst,\n        });\n    }\n    return payload;\n}\nexport const $ZodSuccess = /*@__PURE__*/ core.$constructor(\"$ZodSuccess\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then((result) => {\n                payload.value = result.issues.length === 0;\n                return payload;\n            });\n        }\n        payload.value = result.issues.length === 0;\n        return payload;\n    };\n});\nexport const $ZodCatch = /*@__PURE__*/ core.$constructor(\"$ZodCatch\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.optin = \"optional\";\n    util.defineLazy(inst._zod, \"optout\", () => def.innerType._zod.optout);\n    util.defineLazy(inst._zod, \"values\", () => def.innerType._zod.values);\n    inst._zod.parse = (payload, ctx) => {\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then((result) => {\n                payload.value = result.value;\n                if (result.issues.length) {\n                    payload.value = def.catchValue({\n                        ...payload,\n                        error: {\n                            issues: result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n                        },\n                        input: payload.value,\n                    });\n                    payload.issues = [];\n                }\n                return payload;\n            });\n        }\n        payload.value = result.value;\n        if (result.issues.length) {\n            payload.value = def.catchValue({\n                ...payload,\n                error: {\n                    issues: result.issues.map((iss) => util.finalizeIssue(iss, ctx, core.config())),\n                },\n                input: payload.value,\n            });\n            payload.issues = [];\n        }\n        return payload;\n    };\n});\nexport const $ZodNaN = /*@__PURE__*/ core.$constructor(\"$ZodNaN\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        if (typeof payload.value !== \"number\" || !Number.isNaN(payload.value)) {\n            payload.issues.push({\n                input: payload.value,\n                inst,\n                expected: \"nan\",\n                code: \"invalid_type\",\n            });\n            return payload;\n        }\n        return payload;\n    };\n});\nexport const $ZodPipe = /*@__PURE__*/ core.$constructor(\"$ZodPipe\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"values\", () => def.in._zod.values);\n    util.defineLazy(inst._zod, \"optin\", () => def.in._zod.optin);\n    util.defineLazy(inst._zod, \"optout\", () => def.out._zod.optout);\n    inst._zod.parse = (payload, ctx) => {\n        const left = def.in._zod.run(payload, ctx);\n        if (left instanceof Promise) {\n            return left.then((left) => handlePipeResult(left, def, ctx));\n        }\n        return handlePipeResult(left, def, ctx);\n    };\n});\nfunction handlePipeResult(left, def, ctx) {\n    if (util.aborted(left)) {\n        return left;\n    }\n    return def.out._zod.run({ value: left.value, issues: left.issues }, ctx);\n}\nexport const $ZodReadonly = /*@__PURE__*/ core.$constructor(\"$ZodReadonly\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"propValues\", () => def.innerType._zod.propValues);\n    util.defineLazy(inst._zod, \"values\", () => def.innerType._zod.values);\n    util.defineLazy(inst._zod, \"optin\", () => def.innerType._zod.optin);\n    util.defineLazy(inst._zod, \"optout\", () => def.innerType._zod.optout);\n    inst._zod.parse = (payload, ctx) => {\n        const result = def.innerType._zod.run(payload, ctx);\n        if (result instanceof Promise) {\n            return result.then(handleReadonlyResult);\n        }\n        return handleReadonlyResult(result);\n    };\n});\nfunction handleReadonlyResult(payload) {\n    payload.value = Object.freeze(payload.value);\n    return payload;\n}\nexport const $ZodTemplateLiteral = /*@__PURE__*/ core.$constructor(\"$ZodTemplateLiteral\", (inst, def) => {\n    $ZodType.init(inst, def);\n    const regexParts = [];\n    for (const part of def.parts) {\n        if (part instanceof $ZodType) {\n            if (!part._zod.pattern) {\n                // if (!source)\n                throw new Error(`Invalid template literal part, no pattern found: ${[...part._zod.traits].shift()}`);\n            }\n            const source = part._zod.pattern instanceof RegExp ? part._zod.pattern.source : part._zod.pattern;\n            if (!source)\n                throw new Error(`Invalid template literal part: ${part._zod.traits}`);\n            const start = source.startsWith(\"^\") ? 1 : 0;\n            const end = source.endsWith(\"$\") ? source.length - 1 : source.length;\n            regexParts.push(source.slice(start, end));\n        }\n        else if (part === null || util.primitiveTypes.has(typeof part)) {\n            regexParts.push(util.escapeRegex(`${part}`));\n        }\n        else {\n            throw new Error(`Invalid template literal part: ${part}`);\n        }\n    }\n    inst._zod.pattern = new RegExp(`^${regexParts.join(\"\")}$`);\n    inst._zod.parse = (payload, _ctx) => {\n        if (typeof payload.value !== \"string\") {\n            payload.issues.push({\n                input: payload.value,\n                inst,\n                expected: \"template_literal\",\n                code: \"invalid_type\",\n            });\n            return payload;\n        }\n        inst._zod.pattern.lastIndex = 0;\n        if (!inst._zod.pattern.test(payload.value)) {\n            payload.issues.push({\n                input: payload.value,\n                inst,\n                code: \"invalid_format\",\n                format: \"template_literal\",\n                pattern: inst._zod.pattern.source,\n            });\n            return payload;\n        }\n        return payload;\n    };\n});\nexport const $ZodPromise = /*@__PURE__*/ core.$constructor(\"$ZodPromise\", (inst, def) => {\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, ctx) => {\n        return Promise.resolve(payload.value).then((inner) => def.innerType._zod.run({ value: inner, issues: [] }, ctx));\n    };\n});\nexport const $ZodLazy = /*@__PURE__*/ core.$constructor(\"$ZodLazy\", (inst, def) => {\n    $ZodType.init(inst, def);\n    util.defineLazy(inst._zod, \"innerType\", () => def.getter());\n    util.defineLazy(inst._zod, \"pattern\", () => inst._zod.innerType._zod.pattern);\n    util.defineLazy(inst._zod, \"propValues\", () => inst._zod.innerType._zod.propValues);\n    util.defineLazy(inst._zod, \"optin\", () => inst._zod.innerType._zod.optin);\n    util.defineLazy(inst._zod, \"optout\", () => inst._zod.innerType._zod.optout);\n    inst._zod.parse = (payload, ctx) => {\n        const inner = inst._zod.innerType;\n        return inner._zod.run(payload, ctx);\n    };\n});\nexport const $ZodCustom = /*@__PURE__*/ core.$constructor(\"$ZodCustom\", (inst, def) => {\n    checks.$ZodCheck.init(inst, def);\n    $ZodType.init(inst, def);\n    inst._zod.parse = (payload, _) => {\n        return payload;\n    };\n    inst._zod.check = (payload) => {\n        const input = payload.value;\n        const r = def.fn(input);\n        if (r instanceof Promise) {\n            return r.then((r) => handleRefineResult(r, payload, input, inst));\n        }\n        handleRefineResult(r, payload, input, inst);\n        return;\n    };\n});\nfunction handleRefineResult(result, payload, input, inst) {\n    if (!result) {\n        const _iss = {\n            code: \"custom\",\n            input,\n            inst, // incorporates params.error into issue reporting\n            path: [...(inst._zod.def.path ?? [])], // incorporates params.error into issue reporting\n            continue: !inst._zod.def.abort,\n            // params: inst._zod.def.params,\n        };\n        if (inst._zod.def.params)\n            _iss.params = inst._zod.def.params;\n        payload.issues.push(util.issue(_iss));\n    }\n}\n","export const $output = Symbol(\"ZodOutput\");\nexport const $input = Symbol(\"ZodInput\");\nexport class $ZodRegistry {\n    constructor() {\n        this._map = new Map();\n        this._idmap = new Map();\n    }\n    add(schema, ..._meta) {\n        const meta = _meta[0];\n        this._map.set(schema, meta);\n        if (meta && typeof meta === \"object\" && \"id\" in meta) {\n            if (this._idmap.has(meta.id)) {\n                throw new Error(`ID ${meta.id} already exists in the registry`);\n            }\n            this._idmap.set(meta.id, schema);\n        }\n        return this;\n    }\n    clear() {\n        this._map = new Map();\n        this._idmap = new Map();\n        return this;\n    }\n    remove(schema) {\n        const meta = this._map.get(schema);\n        if (meta && typeof meta === \"object\" && \"id\" in meta) {\n            this._idmap.delete(meta.id);\n        }\n        this._map.delete(schema);\n        return this;\n    }\n    get(schema) {\n        // return this._map.get(schema) as any;\n        // inherit metadata\n        const p = schema._zod.parent;\n        if (p) {\n            const pm = { ...(this.get(p) ?? {}) };\n            delete pm.id; // do not inherit id\n            return { ...pm, ...this._map.get(schema) };\n        }\n        return this._map.get(schema);\n    }\n    has(schema) {\n        return this._map.has(schema);\n    }\n}\n// registries\nexport function registry() {\n    return new $ZodRegistry();\n}\nexport const globalRegistry = /*@__PURE__*/ registry();\n","import * as checks from \"./checks.js\";\nimport * as schemas from \"./schemas.js\";\nimport * as util from \"./util.js\";\nexport function _string(Class, params) {\n    return new Class({\n        type: \"string\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _coercedString(Class, params) {\n    return new Class({\n        type: \"string\",\n        coerce: true,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _email(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"email\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _guid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"guid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uuid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"uuid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uuidv4(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"uuid\",\n        check: \"string_format\",\n        abort: false,\n        version: \"v4\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uuidv6(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"uuid\",\n        check: \"string_format\",\n        abort: false,\n        version: \"v6\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uuidv7(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"uuid\",\n        check: \"string_format\",\n        abort: false,\n        version: \"v7\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _url(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"url\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _emoji(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"emoji\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _nanoid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"nanoid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _cuid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"cuid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _cuid2(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"cuid2\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _ulid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"ulid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _xid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"xid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _ksuid(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"ksuid\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _ipv4(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"ipv4\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _ipv6(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"ipv6\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _cidrv4(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"cidrv4\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _cidrv6(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"cidrv6\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _base64(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"base64\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _base64url(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"base64url\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _e164(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"e164\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _jwt(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"jwt\",\n        check: \"string_format\",\n        abort: false,\n        ...util.normalizeParams(params),\n    });\n}\nexport const TimePrecision = {\n    Any: null,\n    Minute: -1,\n    Second: 0,\n    Millisecond: 3,\n    Microsecond: 6,\n};\nexport function _isoDateTime(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"datetime\",\n        check: \"string_format\",\n        offset: false,\n        local: false,\n        precision: null,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _isoDate(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"date\",\n        check: \"string_format\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _isoTime(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"time\",\n        check: \"string_format\",\n        precision: null,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _isoDuration(Class, params) {\n    return new Class({\n        type: \"string\",\n        format: \"duration\",\n        check: \"string_format\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _number(Class, params) {\n    return new Class({\n        type: \"number\",\n        checks: [],\n        ...util.normalizeParams(params),\n    });\n}\nexport function _coercedNumber(Class, params) {\n    return new Class({\n        type: \"number\",\n        coerce: true,\n        checks: [],\n        ...util.normalizeParams(params),\n    });\n}\nexport function _int(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"safeint\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _float32(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"float32\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _float64(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"float64\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _int32(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"int32\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uint32(Class, params) {\n    return new Class({\n        type: \"number\",\n        check: \"number_format\",\n        abort: false,\n        format: \"uint32\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _boolean(Class, params) {\n    return new Class({\n        type: \"boolean\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _coercedBoolean(Class, params) {\n    return new Class({\n        type: \"boolean\",\n        coerce: true,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _bigint(Class, params) {\n    return new Class({\n        type: \"bigint\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _coercedBigint(Class, params) {\n    return new Class({\n        type: \"bigint\",\n        coerce: true,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _int64(Class, params) {\n    return new Class({\n        type: \"bigint\",\n        check: \"bigint_format\",\n        abort: false,\n        format: \"int64\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uint64(Class, params) {\n    return new Class({\n        type: \"bigint\",\n        check: \"bigint_format\",\n        abort: false,\n        format: \"uint64\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _symbol(Class, params) {\n    return new Class({\n        type: \"symbol\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _undefined(Class, params) {\n    return new Class({\n        type: \"undefined\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _null(Class, params) {\n    return new Class({\n        type: \"null\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _any(Class) {\n    return new Class({\n        type: \"any\",\n    });\n}\nexport function _unknown(Class) {\n    return new Class({\n        type: \"unknown\",\n    });\n}\nexport function _never(Class, params) {\n    return new Class({\n        type: \"never\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _void(Class, params) {\n    return new Class({\n        type: \"void\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _date(Class, params) {\n    return new Class({\n        type: \"date\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _coercedDate(Class, params) {\n    return new Class({\n        type: \"date\",\n        coerce: true,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _nan(Class, params) {\n    return new Class({\n        type: \"nan\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _lt(value, params) {\n    return new checks.$ZodCheckLessThan({\n        check: \"less_than\",\n        ...util.normalizeParams(params),\n        value,\n        inclusive: false,\n    });\n}\nexport function _lte(value, params) {\n    return new checks.$ZodCheckLessThan({\n        check: \"less_than\",\n        ...util.normalizeParams(params),\n        value,\n        inclusive: true,\n    });\n}\nexport { \n/** @deprecated Use `z.lte()` instead. */\n_lte as _max, };\nexport function _gt(value, params) {\n    return new checks.$ZodCheckGreaterThan({\n        check: \"greater_than\",\n        ...util.normalizeParams(params),\n        value,\n        inclusive: false,\n    });\n}\nexport function _gte(value, params) {\n    return new checks.$ZodCheckGreaterThan({\n        check: \"greater_than\",\n        ...util.normalizeParams(params),\n        value,\n        inclusive: true,\n    });\n}\nexport { \n/** @deprecated Use `z.gte()` instead. */\n_gte as _min, };\nexport function _positive(params) {\n    return _gt(0, params);\n}\n// negative\nexport function _negative(params) {\n    return _lt(0, params);\n}\n// nonpositive\nexport function _nonpositive(params) {\n    return _lte(0, params);\n}\n// nonnegative\nexport function _nonnegative(params) {\n    return _gte(0, params);\n}\nexport function _multipleOf(value, params) {\n    return new checks.$ZodCheckMultipleOf({\n        check: \"multiple_of\",\n        ...util.normalizeParams(params),\n        value,\n    });\n}\nexport function _maxSize(maximum, params) {\n    return new checks.$ZodCheckMaxSize({\n        check: \"max_size\",\n        ...util.normalizeParams(params),\n        maximum,\n    });\n}\nexport function _minSize(minimum, params) {\n    return new checks.$ZodCheckMinSize({\n        check: \"min_size\",\n        ...util.normalizeParams(params),\n        minimum,\n    });\n}\nexport function _size(size, params) {\n    return new checks.$ZodCheckSizeEquals({\n        check: \"size_equals\",\n        ...util.normalizeParams(params),\n        size,\n    });\n}\nexport function _maxLength(maximum, params) {\n    const ch = new checks.$ZodCheckMaxLength({\n        check: \"max_length\",\n        ...util.normalizeParams(params),\n        maximum,\n    });\n    return ch;\n}\nexport function _minLength(minimum, params) {\n    return new checks.$ZodCheckMinLength({\n        check: \"min_length\",\n        ...util.normalizeParams(params),\n        minimum,\n    });\n}\nexport function _length(length, params) {\n    return new checks.$ZodCheckLengthEquals({\n        check: \"length_equals\",\n        ...util.normalizeParams(params),\n        length,\n    });\n}\nexport function _regex(pattern, params) {\n    return new checks.$ZodCheckRegex({\n        check: \"string_format\",\n        format: \"regex\",\n        ...util.normalizeParams(params),\n        pattern,\n    });\n}\nexport function _lowercase(params) {\n    return new checks.$ZodCheckLowerCase({\n        check: \"string_format\",\n        format: \"lowercase\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _uppercase(params) {\n    return new checks.$ZodCheckUpperCase({\n        check: \"string_format\",\n        format: \"uppercase\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _includes(includes, params) {\n    return new checks.$ZodCheckIncludes({\n        check: \"string_format\",\n        format: \"includes\",\n        ...util.normalizeParams(params),\n        includes,\n    });\n}\nexport function _startsWith(prefix, params) {\n    return new checks.$ZodCheckStartsWith({\n        check: \"string_format\",\n        format: \"starts_with\",\n        ...util.normalizeParams(params),\n        prefix,\n    });\n}\nexport function _endsWith(suffix, params) {\n    return new checks.$ZodCheckEndsWith({\n        check: \"string_format\",\n        format: \"ends_with\",\n        ...util.normalizeParams(params),\n        suffix,\n    });\n}\nexport function _property(property, schema, params) {\n    return new checks.$ZodCheckProperty({\n        check: \"property\",\n        property,\n        schema,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _mime(types, params) {\n    return new checks.$ZodCheckMimeType({\n        check: \"mime_type\",\n        mime: types,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _overwrite(tx) {\n    return new checks.$ZodCheckOverwrite({\n        check: \"overwrite\",\n        tx,\n    });\n}\n// normalize\nexport function _normalize(form) {\n    return _overwrite((input) => input.normalize(form));\n}\n// trim\nexport function _trim() {\n    return _overwrite((input) => input.trim());\n}\n// toLowerCase\nexport function _toLowerCase() {\n    return _overwrite((input) => input.toLowerCase());\n}\n// toUpperCase\nexport function _toUpperCase() {\n    return _overwrite((input) => input.toUpperCase());\n}\nexport function _array(Class, element, params) {\n    return new Class({\n        type: \"array\",\n        element,\n        // get element() {\n        //   return element;\n        // },\n        ...util.normalizeParams(params),\n    });\n}\nexport function _union(Class, options, params) {\n    return new Class({\n        type: \"union\",\n        options,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _discriminatedUnion(Class, discriminator, options, params) {\n    return new Class({\n        type: \"union\",\n        options,\n        discriminator,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _intersection(Class, left, right) {\n    return new Class({\n        type: \"intersection\",\n        left,\n        right,\n    });\n}\n// export function _tuple(\n//   Class: util.SchemaClass<schemas.$ZodTuple>,\n//   items: [],\n//   params?: string | $ZodTupleParams\n// ): schemas.$ZodTuple<[], null>;\nexport function _tuple(Class, items, _paramsOrRest, _params) {\n    const hasRest = _paramsOrRest instanceof schemas.$ZodType;\n    const params = hasRest ? _params : _paramsOrRest;\n    const rest = hasRest ? _paramsOrRest : null;\n    return new Class({\n        type: \"tuple\",\n        items,\n        rest,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _record(Class, keyType, valueType, params) {\n    return new Class({\n        type: \"record\",\n        keyType,\n        valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _map(Class, keyType, valueType, params) {\n    return new Class({\n        type: \"map\",\n        keyType,\n        valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _set(Class, valueType, params) {\n    return new Class({\n        type: \"set\",\n        valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _enum(Class, values, params) {\n    const entries = Array.isArray(values) ? Object.fromEntries(values.map((v) => [v, v])) : values;\n    // if (Array.isArray(values)) {\n    //   for (const value of values) {\n    //     entries[value] = value;\n    //   }\n    // } else {\n    //   Object.assign(entries, values);\n    // }\n    // const entries: util.EnumLike = {};\n    // for (const val of values) {\n    //   entries[val] = val;\n    // }\n    return new Class({\n        type: \"enum\",\n        entries,\n        ...util.normalizeParams(params),\n    });\n}\n/** @deprecated This API has been merged into `z.enum()`. Use `z.enum()` instead.\n *\n * ```ts\n * enum Colors { red, green, blue }\n * z.enum(Colors);\n * ```\n */\nexport function _nativeEnum(Class, entries, params) {\n    return new Class({\n        type: \"enum\",\n        entries,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _literal(Class, value, params) {\n    return new Class({\n        type: \"literal\",\n        values: Array.isArray(value) ? value : [value],\n        ...util.normalizeParams(params),\n    });\n}\nexport function _file(Class, params) {\n    return new Class({\n        type: \"file\",\n        ...util.normalizeParams(params),\n    });\n}\nexport function _transform(Class, fn) {\n    return new Class({\n        type: \"transform\",\n        transform: fn,\n    });\n}\nexport function _optional(Class, innerType) {\n    return new Class({\n        type: \"optional\",\n        innerType,\n    });\n}\nexport function _nullable(Class, innerType) {\n    return new Class({\n        type: \"nullable\",\n        innerType,\n    });\n}\nexport function _default(Class, innerType, defaultValue) {\n    return new Class({\n        type: \"default\",\n        innerType,\n        get defaultValue() {\n            return typeof defaultValue === \"function\" ? defaultValue() : defaultValue;\n        },\n    });\n}\nexport function _nonoptional(Class, innerType, params) {\n    return new Class({\n        type: \"nonoptional\",\n        innerType,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _success(Class, innerType) {\n    return new Class({\n        type: \"success\",\n        innerType,\n    });\n}\nexport function _catch(Class, innerType, catchValue) {\n    return new Class({\n        type: \"catch\",\n        innerType,\n        catchValue: (typeof catchValue === \"function\" ? catchValue : () => catchValue),\n    });\n}\nexport function _pipe(Class, in_, out) {\n    return new Class({\n        type: \"pipe\",\n        in: in_,\n        out,\n    });\n}\nexport function _readonly(Class, innerType) {\n    return new Class({\n        type: \"readonly\",\n        innerType,\n    });\n}\nexport function _templateLiteral(Class, parts, params) {\n    return new Class({\n        type: \"template_literal\",\n        parts,\n        ...util.normalizeParams(params),\n    });\n}\nexport function _lazy(Class, getter) {\n    return new Class({\n        type: \"lazy\",\n        getter,\n    });\n}\nexport function _promise(Class, innerType) {\n    return new Class({\n        type: \"promise\",\n        innerType,\n    });\n}\nexport function _custom(Class, fn, _params) {\n    const norm = util.normalizeParams(_params);\n    norm.abort ?? (norm.abort = true); // default to abort:false\n    const schema = new Class({\n        type: \"custom\",\n        check: \"custom\",\n        fn: fn,\n        ...norm,\n    });\n    return schema;\n}\n// export function _refine<T>(\n//   Class: util.SchemaClass<schemas.$ZodCustom>,\n//   fn: (arg: NoInfer<T>) => util.MaybeAsync<unknown>,\n//   _params: string | $ZodCustomParams = {}\n// ): checks.$ZodCheck<T> {\n//   return _custom(Class, fn, _params);\n// }\n// same as _custom but defaults to abort:false\nexport function _refine(Class, fn, _params) {\n    const schema = new Class({\n        type: \"custom\",\n        check: \"custom\",\n        fn: fn,\n        ...util.normalizeParams(_params),\n    });\n    return schema;\n}\nexport function _stringbool(Classes, _params) {\n    const params = util.normalizeParams(_params);\n    let truthyArray = params.truthy ?? [\"true\", \"1\", \"yes\", \"on\", \"y\", \"enabled\"];\n    let falsyArray = params.falsy ?? [\"false\", \"0\", \"no\", \"off\", \"n\", \"disabled\"];\n    if (params.case !== \"sensitive\") {\n        truthyArray = truthyArray.map((v) => (typeof v === \"string\" ? v.toLowerCase() : v));\n        falsyArray = falsyArray.map((v) => (typeof v === \"string\" ? v.toLowerCase() : v));\n    }\n    const truthySet = new Set(truthyArray);\n    const falsySet = new Set(falsyArray);\n    const _Pipe = Classes.Pipe ?? schemas.$ZodPipe;\n    const _Boolean = Classes.Boolean ?? schemas.$ZodBoolean;\n    const _String = Classes.String ?? schemas.$ZodString;\n    const _Transform = Classes.Transform ?? schemas.$ZodTransform;\n    const tx = new _Transform({\n        type: \"transform\",\n        transform: (input, payload) => {\n            let data = input;\n            if (params.case !== \"sensitive\")\n                data = data.toLowerCase();\n            if (truthySet.has(data)) {\n                return true;\n            }\n            else if (falsySet.has(data)) {\n                return false;\n            }\n            else {\n                payload.issues.push({\n                    code: \"invalid_value\",\n                    expected: \"stringbool\",\n                    values: [...truthySet, ...falsySet],\n                    input: payload.value,\n                    inst: tx,\n                });\n                return {};\n            }\n        },\n        error: params.error,\n    });\n    // params.error;\n    const innerPipe = new _Pipe({\n        type: \"pipe\",\n        in: new _String({ type: \"string\", error: params.error }),\n        out: tx,\n        error: params.error,\n    });\n    const outerPipe = new _Pipe({\n        type: \"pipe\",\n        in: innerPipe,\n        out: new _Boolean({\n            type: \"boolean\",\n            error: params.error,\n        }),\n        error: params.error,\n    });\n    return outerPipe;\n}\nexport function _stringFormat(Class, format, fnOrRegex, _params = {}) {\n    const params = util.normalizeParams(_params);\n    const def = {\n        ...util.normalizeParams(_params),\n        check: \"string_format\",\n        type: \"string\",\n        format,\n        fn: typeof fnOrRegex === \"function\" ? fnOrRegex : (val) => fnOrRegex.test(val),\n        ...params,\n    };\n    if (fnOrRegex instanceof RegExp) {\n        def.pattern = fnOrRegex;\n    }\n    const inst = new Class(def);\n    return inst;\n}\n","import * as core from \"../core/index.js\";\nimport * as schemas from \"./schemas.js\";\nexport const ZodISODateTime = /*@__PURE__*/ core.$constructor(\"ZodISODateTime\", (inst, def) => {\n    core.$ZodISODateTime.init(inst, def);\n    schemas.ZodStringFormat.init(inst, def);\n});\nexport function datetime(params) {\n    return core._isoDateTime(ZodISODateTime, params);\n}\nexport const ZodISODate = /*@__PURE__*/ core.$constructor(\"ZodISODate\", (inst, def) => {\n    core.$ZodISODate.init(inst, def);\n    schemas.ZodStringFormat.init(inst, def);\n});\nexport function date(params) {\n    return core._isoDate(ZodISODate, params);\n}\nexport const ZodISOTime = /*@__PURE__*/ core.$constructor(\"ZodISOTime\", (inst, def) => {\n    core.$ZodISOTime.init(inst, def);\n    schemas.ZodStringFormat.init(inst, def);\n});\nexport function time(params) {\n    return core._isoTime(ZodISOTime, params);\n}\nexport const ZodISODuration = /*@__PURE__*/ core.$constructor(\"ZodISODuration\", (inst, def) => {\n    core.$ZodISODuration.init(inst, def);\n    schemas.ZodStringFormat.init(inst, def);\n});\nexport function duration(params) {\n    return core._isoDuration(ZodISODuration, params);\n}\n","import * as core from \"../core/index.js\";\nimport { $ZodError } from \"../core/index.js\";\nconst initializer = (inst, issues) => {\n    $ZodError.init(inst, issues);\n    inst.name = \"ZodError\";\n    Object.defineProperties(inst, {\n        format: {\n            value: (mapper) => core.formatError(inst, mapper),\n            // enumerable: false,\n        },\n        flatten: {\n            value: (mapper) => core.flattenError(inst, mapper),\n            // enumerable: false,\n        },\n        addIssue: {\n            value: (issue) => inst.issues.push(issue),\n            // enumerable: false,\n        },\n        addIssues: {\n            value: (issues) => inst.issues.push(...issues),\n            // enumerable: false,\n        },\n        isEmpty: {\n            get() {\n                return inst.issues.length === 0;\n            },\n            // enumerable: false,\n        },\n    });\n    // Object.defineProperty(inst, \"isEmpty\", {\n    //   get() {\n    //     return inst.issues.length === 0;\n    //   },\n    // });\n};\nexport const ZodError = core.$constructor(\"ZodError\", initializer);\nexport const ZodRealError = core.$constructor(\"ZodError\", initializer, {\n    Parent: Error,\n});\n// /** @deprecated Use `z.core.$ZodErrorMapCtx` instead. */\n// export type ErrorMapCtx = core.$ZodErrorMapCtx;\n","import * as core from \"../core/index.js\";\nimport { ZodRealError } from \"./errors.js\";\nexport const parse = /* @__PURE__ */ core._parse(ZodRealError);\nexport const parseAsync = /* @__PURE__ */ core._parseAsync(ZodRealError);\nexport const safeParse = /* @__PURE__ */ core._safeParse(ZodRealError);\nexport const safeParseAsync = /* @__PURE__ */ core._safeParseAsync(ZodRealError);\n","import * as core from \"../core/index.js\";\nimport { util } from \"../core/index.js\";\nimport * as checks from \"./checks.js\";\nimport * as iso from \"./iso.js\";\nimport * as parse from \"./parse.js\";\nexport const ZodType = /*@__PURE__*/ core.$constructor(\"ZodType\", (inst, def) => {\n    core.$ZodType.init(inst, def);\n    inst.def = def;\n    Object.defineProperty(inst, \"_def\", { value: def });\n    // base methods\n    inst.check = (...checks) => {\n        return inst.clone({\n            ...def,\n            checks: [\n                ...(def.checks ?? []),\n                ...checks.map((ch) => typeof ch === \"function\" ? { _zod: { check: ch, def: { check: \"custom\" }, onattach: [] } } : ch),\n            ],\n        }\n        // { parent: true }\n        );\n    };\n    inst.clone = (def, params) => core.clone(inst, def, params);\n    inst.brand = () => inst;\n    inst.register = ((reg, meta) => {\n        reg.add(inst, meta);\n        return inst;\n    });\n    // parsing\n    inst.parse = (data, params) => parse.parse(inst, data, params, { callee: inst.parse });\n    inst.safeParse = (data, params) => parse.safeParse(inst, data, params);\n    inst.parseAsync = async (data, params) => parse.parseAsync(inst, data, params, { callee: inst.parseAsync });\n    inst.safeParseAsync = async (data, params) => parse.safeParseAsync(inst, data, params);\n    inst.spa = inst.safeParseAsync;\n    // refinements\n    inst.refine = (check, params) => inst.check(refine(check, params));\n    inst.superRefine = (refinement) => inst.check(superRefine(refinement));\n    inst.overwrite = (fn) => inst.check(checks.overwrite(fn));\n    // wrappers\n    inst.optional = () => optional(inst);\n    inst.nullable = () => nullable(inst);\n    inst.nullish = () => optional(nullable(inst));\n    inst.nonoptional = (params) => nonoptional(inst, params);\n    inst.array = () => array(inst);\n    inst.or = (arg) => union([inst, arg]);\n    inst.and = (arg) => intersection(inst, arg);\n    inst.transform = (tx) => pipe(inst, transform(tx));\n    inst.default = (def) => _default(inst, def);\n    inst.prefault = (def) => prefault(inst, def);\n    // inst.coalesce = (def, params) => coalesce(inst, def, params);\n    inst.catch = (params) => _catch(inst, params);\n    inst.pipe = (target) => pipe(inst, target);\n    inst.readonly = () => readonly(inst);\n    // meta\n    inst.describe = (description) => {\n        const cl = inst.clone();\n        core.globalRegistry.add(cl, { description });\n        return cl;\n    };\n    Object.defineProperty(inst, \"description\", {\n        get() {\n            return core.globalRegistry.get(inst)?.description;\n        },\n        configurable: true,\n    });\n    inst.meta = (...args) => {\n        if (args.length === 0) {\n            return core.globalRegistry.get(inst);\n        }\n        const cl = inst.clone();\n        core.globalRegistry.add(cl, args[0]);\n        return cl;\n    };\n    // helpers\n    inst.isOptional = () => inst.safeParse(undefined).success;\n    inst.isNullable = () => inst.safeParse(null).success;\n    return inst;\n});\n/** @internal */\nexport const _ZodString = /*@__PURE__*/ core.$constructor(\"_ZodString\", (inst, def) => {\n    core.$ZodString.init(inst, def);\n    ZodType.init(inst, def);\n    const bag = inst._zod.bag;\n    inst.format = bag.format ?? null;\n    inst.minLength = bag.minimum ?? null;\n    inst.maxLength = bag.maximum ?? null;\n    // validations\n    inst.regex = (...args) => inst.check(checks.regex(...args));\n    inst.includes = (...args) => inst.check(checks.includes(...args));\n    inst.startsWith = (...args) => inst.check(checks.startsWith(...args));\n    inst.endsWith = (...args) => inst.check(checks.endsWith(...args));\n    inst.min = (...args) => inst.check(checks.minLength(...args));\n    inst.max = (...args) => inst.check(checks.maxLength(...args));\n    inst.length = (...args) => inst.check(checks.length(...args));\n    inst.nonempty = (...args) => inst.check(checks.minLength(1, ...args));\n    inst.lowercase = (params) => inst.check(checks.lowercase(params));\n    inst.uppercase = (params) => inst.check(checks.uppercase(params));\n    // transforms\n    inst.trim = () => inst.check(checks.trim());\n    inst.normalize = (...args) => inst.check(checks.normalize(...args));\n    inst.toLowerCase = () => inst.check(checks.toLowerCase());\n    inst.toUpperCase = () => inst.check(checks.toUpperCase());\n});\nexport const ZodString = /*@__PURE__*/ core.$constructor(\"ZodString\", (inst, def) => {\n    core.$ZodString.init(inst, def);\n    _ZodString.init(inst, def);\n    inst.email = (params) => inst.check(core._email(ZodEmail, params));\n    inst.url = (params) => inst.check(core._url(ZodURL, params));\n    inst.jwt = (params) => inst.check(core._jwt(ZodJWT, params));\n    inst.emoji = (params) => inst.check(core._emoji(ZodEmoji, params));\n    inst.guid = (params) => inst.check(core._guid(ZodGUID, params));\n    inst.uuid = (params) => inst.check(core._uuid(ZodUUID, params));\n    inst.uuidv4 = (params) => inst.check(core._uuidv4(ZodUUID, params));\n    inst.uuidv6 = (params) => inst.check(core._uuidv6(ZodUUID, params));\n    inst.uuidv7 = (params) => inst.check(core._uuidv7(ZodUUID, params));\n    inst.nanoid = (params) => inst.check(core._nanoid(ZodNanoID, params));\n    inst.guid = (params) => inst.check(core._guid(ZodGUID, params));\n    inst.cuid = (params) => inst.check(core._cuid(ZodCUID, params));\n    inst.cuid2 = (params) => inst.check(core._cuid2(ZodCUID2, params));\n    inst.ulid = (params) => inst.check(core._ulid(ZodULID, params));\n    inst.base64 = (params) => inst.check(core._base64(ZodBase64, params));\n    inst.base64url = (params) => inst.check(core._base64url(ZodBase64URL, params));\n    inst.xid = (params) => inst.check(core._xid(ZodXID, params));\n    inst.ksuid = (params) => inst.check(core._ksuid(ZodKSUID, params));\n    inst.ipv4 = (params) => inst.check(core._ipv4(ZodIPv4, params));\n    inst.ipv6 = (params) => inst.check(core._ipv6(ZodIPv6, params));\n    inst.cidrv4 = (params) => inst.check(core._cidrv4(ZodCIDRv4, params));\n    inst.cidrv6 = (params) => inst.check(core._cidrv6(ZodCIDRv6, params));\n    inst.e164 = (params) => inst.check(core._e164(ZodE164, params));\n    // iso\n    inst.datetime = (params) => inst.check(iso.datetime(params));\n    inst.date = (params) => inst.check(iso.date(params));\n    inst.time = (params) => inst.check(iso.time(params));\n    inst.duration = (params) => inst.check(iso.duration(params));\n});\nexport function string(params) {\n    return core._string(ZodString, params);\n}\nexport const ZodStringFormat = /*@__PURE__*/ core.$constructor(\"ZodStringFormat\", (inst, def) => {\n    core.$ZodStringFormat.init(inst, def);\n    _ZodString.init(inst, def);\n});\nexport const ZodEmail = /*@__PURE__*/ core.$constructor(\"ZodEmail\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodEmail.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function email(params) {\n    return core._email(ZodEmail, params);\n}\nexport const ZodGUID = /*@__PURE__*/ core.$constructor(\"ZodGUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodGUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function guid(params) {\n    return core._guid(ZodGUID, params);\n}\nexport const ZodUUID = /*@__PURE__*/ core.$constructor(\"ZodUUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodUUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function uuid(params) {\n    return core._uuid(ZodUUID, params);\n}\nexport function uuidv4(params) {\n    return core._uuidv4(ZodUUID, params);\n}\n// ZodUUIDv6\nexport function uuidv6(params) {\n    return core._uuidv6(ZodUUID, params);\n}\n// ZodUUIDv7\nexport function uuidv7(params) {\n    return core._uuidv7(ZodUUID, params);\n}\nexport const ZodURL = /*@__PURE__*/ core.$constructor(\"ZodURL\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodURL.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function url(params) {\n    return core._url(ZodURL, params);\n}\nexport const ZodEmoji = /*@__PURE__*/ core.$constructor(\"ZodEmoji\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodEmoji.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function emoji(params) {\n    return core._emoji(ZodEmoji, params);\n}\nexport const ZodNanoID = /*@__PURE__*/ core.$constructor(\"ZodNanoID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodNanoID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function nanoid(params) {\n    return core._nanoid(ZodNanoID, params);\n}\nexport const ZodCUID = /*@__PURE__*/ core.$constructor(\"ZodCUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodCUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function cuid(params) {\n    return core._cuid(ZodCUID, params);\n}\nexport const ZodCUID2 = /*@__PURE__*/ core.$constructor(\"ZodCUID2\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodCUID2.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function cuid2(params) {\n    return core._cuid2(ZodCUID2, params);\n}\nexport const ZodULID = /*@__PURE__*/ core.$constructor(\"ZodULID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodULID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function ulid(params) {\n    return core._ulid(ZodULID, params);\n}\nexport const ZodXID = /*@__PURE__*/ core.$constructor(\"ZodXID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodXID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function xid(params) {\n    return core._xid(ZodXID, params);\n}\nexport const ZodKSUID = /*@__PURE__*/ core.$constructor(\"ZodKSUID\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodKSUID.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function ksuid(params) {\n    return core._ksuid(ZodKSUID, params);\n}\nexport const ZodIPv4 = /*@__PURE__*/ core.$constructor(\"ZodIPv4\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodIPv4.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function ipv4(params) {\n    return core._ipv4(ZodIPv4, params);\n}\nexport const ZodIPv6 = /*@__PURE__*/ core.$constructor(\"ZodIPv6\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodIPv6.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function ipv6(params) {\n    return core._ipv6(ZodIPv6, params);\n}\nexport const ZodCIDRv4 = /*@__PURE__*/ core.$constructor(\"ZodCIDRv4\", (inst, def) => {\n    core.$ZodCIDRv4.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function cidrv4(params) {\n    return core._cidrv4(ZodCIDRv4, params);\n}\nexport const ZodCIDRv6 = /*@__PURE__*/ core.$constructor(\"ZodCIDRv6\", (inst, def) => {\n    core.$ZodCIDRv6.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function cidrv6(params) {\n    return core._cidrv6(ZodCIDRv6, params);\n}\nexport const ZodBase64 = /*@__PURE__*/ core.$constructor(\"ZodBase64\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodBase64.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function base64(params) {\n    return core._base64(ZodBase64, params);\n}\nexport const ZodBase64URL = /*@__PURE__*/ core.$constructor(\"ZodBase64URL\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodBase64URL.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function base64url(params) {\n    return core._base64url(ZodBase64URL, params);\n}\nexport const ZodE164 = /*@__PURE__*/ core.$constructor(\"ZodE164\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodE164.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function e164(params) {\n    return core._e164(ZodE164, params);\n}\nexport const ZodJWT = /*@__PURE__*/ core.$constructor(\"ZodJWT\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodJWT.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function jwt(params) {\n    return core._jwt(ZodJWT, params);\n}\nexport const ZodCustomStringFormat = /*@__PURE__*/ core.$constructor(\"ZodCustomStringFormat\", (inst, def) => {\n    // ZodStringFormat.init(inst, def);\n    core.$ZodCustomStringFormat.init(inst, def);\n    ZodStringFormat.init(inst, def);\n});\nexport function stringFormat(format, fnOrRegex, _params = {}) {\n    return core._stringFormat(ZodCustomStringFormat, format, fnOrRegex, _params);\n}\nexport const ZodNumber = /*@__PURE__*/ core.$constructor(\"ZodNumber\", (inst, def) => {\n    core.$ZodNumber.init(inst, def);\n    ZodType.init(inst, def);\n    inst.gt = (value, params) => inst.check(checks.gt(value, params));\n    inst.gte = (value, params) => inst.check(checks.gte(value, params));\n    inst.min = (value, params) => inst.check(checks.gte(value, params));\n    inst.lt = (value, params) => inst.check(checks.lt(value, params));\n    inst.lte = (value, params) => inst.check(checks.lte(value, params));\n    inst.max = (value, params) => inst.check(checks.lte(value, params));\n    inst.int = (params) => inst.check(int(params));\n    inst.safe = (params) => inst.check(int(params));\n    inst.positive = (params) => inst.check(checks.gt(0, params));\n    inst.nonnegative = (params) => inst.check(checks.gte(0, params));\n    inst.negative = (params) => inst.check(checks.lt(0, params));\n    inst.nonpositive = (params) => inst.check(checks.lte(0, params));\n    inst.multipleOf = (value, params) => inst.check(checks.multipleOf(value, params));\n    inst.step = (value, params) => inst.check(checks.multipleOf(value, params));\n    // inst.finite = (params) => inst.check(core.finite(params));\n    inst.finite = () => inst;\n    const bag = inst._zod.bag;\n    inst.minValue =\n        Math.max(bag.minimum ?? Number.NEGATIVE_INFINITY, bag.exclusiveMinimum ?? Number.NEGATIVE_INFINITY) ?? null;\n    inst.maxValue =\n        Math.min(bag.maximum ?? Number.POSITIVE_INFINITY, bag.exclusiveMaximum ?? Number.POSITIVE_INFINITY) ?? null;\n    inst.isInt = (bag.format ?? \"\").includes(\"int\") || Number.isSafeInteger(bag.multipleOf ?? 0.5);\n    inst.isFinite = true;\n    inst.format = bag.format ?? null;\n});\nexport function number(params) {\n    return core._number(ZodNumber, params);\n}\nexport const ZodNumberFormat = /*@__PURE__*/ core.$constructor(\"ZodNumberFormat\", (inst, def) => {\n    core.$ZodNumberFormat.init(inst, def);\n    ZodNumber.init(inst, def);\n});\nexport function int(params) {\n    return core._int(ZodNumberFormat, params);\n}\nexport function float32(params) {\n    return core._float32(ZodNumberFormat, params);\n}\nexport function float64(params) {\n    return core._float64(ZodNumberFormat, params);\n}\nexport function int32(params) {\n    return core._int32(ZodNumberFormat, params);\n}\nexport function uint32(params) {\n    return core._uint32(ZodNumberFormat, params);\n}\nexport const ZodBoolean = /*@__PURE__*/ core.$constructor(\"ZodBoolean\", (inst, def) => {\n    core.$ZodBoolean.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function boolean(params) {\n    return core._boolean(ZodBoolean, params);\n}\nexport const ZodBigInt = /*@__PURE__*/ core.$constructor(\"ZodBigInt\", (inst, def) => {\n    core.$ZodBigInt.init(inst, def);\n    ZodType.init(inst, def);\n    inst.gte = (value, params) => inst.check(checks.gte(value, params));\n    inst.min = (value, params) => inst.check(checks.gte(value, params));\n    inst.gt = (value, params) => inst.check(checks.gt(value, params));\n    inst.gte = (value, params) => inst.check(checks.gte(value, params));\n    inst.min = (value, params) => inst.check(checks.gte(value, params));\n    inst.lt = (value, params) => inst.check(checks.lt(value, params));\n    inst.lte = (value, params) => inst.check(checks.lte(value, params));\n    inst.max = (value, params) => inst.check(checks.lte(value, params));\n    inst.positive = (params) => inst.check(checks.gt(BigInt(0), params));\n    inst.negative = (params) => inst.check(checks.lt(BigInt(0), params));\n    inst.nonpositive = (params) => inst.check(checks.lte(BigInt(0), params));\n    inst.nonnegative = (params) => inst.check(checks.gte(BigInt(0), params));\n    inst.multipleOf = (value, params) => inst.check(checks.multipleOf(value, params));\n    const bag = inst._zod.bag;\n    inst.minValue = bag.minimum ?? null;\n    inst.maxValue = bag.maximum ?? null;\n    inst.format = bag.format ?? null;\n});\nexport function bigint(params) {\n    return core._bigint(ZodBigInt, params);\n}\nexport const ZodBigIntFormat = /*@__PURE__*/ core.$constructor(\"ZodBigIntFormat\", (inst, def) => {\n    core.$ZodBigIntFormat.init(inst, def);\n    ZodBigInt.init(inst, def);\n});\n// int64\nexport function int64(params) {\n    return core._int64(ZodBigIntFormat, params);\n}\n// uint64\nexport function uint64(params) {\n    return core._uint64(ZodBigIntFormat, params);\n}\nexport const ZodSymbol = /*@__PURE__*/ core.$constructor(\"ZodSymbol\", (inst, def) => {\n    core.$ZodSymbol.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function symbol(params) {\n    return core._symbol(ZodSymbol, params);\n}\nexport const ZodUndefined = /*@__PURE__*/ core.$constructor(\"ZodUndefined\", (inst, def) => {\n    core.$ZodUndefined.init(inst, def);\n    ZodType.init(inst, def);\n});\nfunction _undefined(params) {\n    return core._undefined(ZodUndefined, params);\n}\nexport { _undefined as undefined };\nexport const ZodNull = /*@__PURE__*/ core.$constructor(\"ZodNull\", (inst, def) => {\n    core.$ZodNull.init(inst, def);\n    ZodType.init(inst, def);\n});\nfunction _null(params) {\n    return core._null(ZodNull, params);\n}\nexport { _null as null };\nexport const ZodAny = /*@__PURE__*/ core.$constructor(\"ZodAny\", (inst, def) => {\n    core.$ZodAny.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function any() {\n    return core._any(ZodAny);\n}\nexport const ZodUnknown = /*@__PURE__*/ core.$constructor(\"ZodUnknown\", (inst, def) => {\n    core.$ZodUnknown.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function unknown() {\n    return core._unknown(ZodUnknown);\n}\nexport const ZodNever = /*@__PURE__*/ core.$constructor(\"ZodNever\", (inst, def) => {\n    core.$ZodNever.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function never(params) {\n    return core._never(ZodNever, params);\n}\nexport const ZodVoid = /*@__PURE__*/ core.$constructor(\"ZodVoid\", (inst, def) => {\n    core.$ZodVoid.init(inst, def);\n    ZodType.init(inst, def);\n});\nfunction _void(params) {\n    return core._void(ZodVoid, params);\n}\nexport { _void as void };\nexport const ZodDate = /*@__PURE__*/ core.$constructor(\"ZodDate\", (inst, def) => {\n    core.$ZodDate.init(inst, def);\n    ZodType.init(inst, def);\n    inst.min = (value, params) => inst.check(checks.gte(value, params));\n    inst.max = (value, params) => inst.check(checks.lte(value, params));\n    const c = inst._zod.bag;\n    inst.minDate = c.minimum ? new Date(c.minimum) : null;\n    inst.maxDate = c.maximum ? new Date(c.maximum) : null;\n});\nexport function date(params) {\n    return core._date(ZodDate, params);\n}\nexport const ZodArray = /*@__PURE__*/ core.$constructor(\"ZodArray\", (inst, def) => {\n    core.$ZodArray.init(inst, def);\n    ZodType.init(inst, def);\n    inst.element = def.element;\n    inst.min = (minLength, params) => inst.check(checks.minLength(minLength, params));\n    inst.nonempty = (params) => inst.check(checks.minLength(1, params));\n    inst.max = (maxLength, params) => inst.check(checks.maxLength(maxLength, params));\n    inst.length = (len, params) => inst.check(checks.length(len, params));\n    inst.unwrap = () => inst.element;\n});\nexport function array(element, params) {\n    return core._array(ZodArray, element, params);\n}\n// .keyof\nexport function keyof(schema) {\n    const shape = schema._zod.def.shape;\n    return literal(Object.keys(shape));\n}\nexport const ZodObject = /*@__PURE__*/ core.$constructor(\"ZodObject\", (inst, def) => {\n    core.$ZodObject.init(inst, def);\n    ZodType.init(inst, def);\n    util.defineLazy(inst, \"shape\", () => def.shape);\n    inst.keyof = () => _enum(Object.keys(inst._zod.def.shape));\n    inst.catchall = (catchall) => inst.clone({ ...inst._zod.def, catchall: catchall });\n    inst.passthrough = () => inst.clone({ ...inst._zod.def, catchall: unknown() });\n    // inst.nonstrict = () => inst.clone({ ...inst._zod.def, catchall: api.unknown() });\n    inst.loose = () => inst.clone({ ...inst._zod.def, catchall: unknown() });\n    inst.strict = () => inst.clone({ ...inst._zod.def, catchall: never() });\n    inst.strip = () => inst.clone({ ...inst._zod.def, catchall: undefined });\n    inst.extend = (incoming) => {\n        return util.extend(inst, incoming);\n    };\n    inst.merge = (other) => util.merge(inst, other);\n    inst.pick = (mask) => util.pick(inst, mask);\n    inst.omit = (mask) => util.omit(inst, mask);\n    inst.partial = (...args) => util.partial(ZodOptional, inst, args[0]);\n    inst.required = (...args) => util.required(ZodNonOptional, inst, args[0]);\n});\nexport function object(shape, params) {\n    const def = {\n        type: \"object\",\n        get shape() {\n            util.assignProp(this, \"shape\", { ...shape });\n            return this.shape;\n        },\n        ...util.normalizeParams(params),\n    };\n    return new ZodObject(def);\n}\n// strictObject\nexport function strictObject(shape, params) {\n    return new ZodObject({\n        type: \"object\",\n        get shape() {\n            util.assignProp(this, \"shape\", { ...shape });\n            return this.shape;\n        },\n        catchall: never(),\n        ...util.normalizeParams(params),\n    });\n}\n// looseObject\nexport function looseObject(shape, params) {\n    return new ZodObject({\n        type: \"object\",\n        get shape() {\n            util.assignProp(this, \"shape\", { ...shape });\n            return this.shape;\n        },\n        catchall: unknown(),\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodUnion = /*@__PURE__*/ core.$constructor(\"ZodUnion\", (inst, def) => {\n    core.$ZodUnion.init(inst, def);\n    ZodType.init(inst, def);\n    inst.options = def.options;\n});\nexport function union(options, params) {\n    return new ZodUnion({\n        type: \"union\",\n        options: options,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodDiscriminatedUnion = /*@__PURE__*/ core.$constructor(\"ZodDiscriminatedUnion\", (inst, def) => {\n    ZodUnion.init(inst, def);\n    core.$ZodDiscriminatedUnion.init(inst, def);\n});\nexport function discriminatedUnion(discriminator, options, params) {\n    // const [options, params] = args;\n    return new ZodDiscriminatedUnion({\n        type: \"union\",\n        options,\n        discriminator,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodIntersection = /*@__PURE__*/ core.$constructor(\"ZodIntersection\", (inst, def) => {\n    core.$ZodIntersection.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function intersection(left, right) {\n    return new ZodIntersection({\n        type: \"intersection\",\n        left: left,\n        right: right,\n    });\n}\nexport const ZodTuple = /*@__PURE__*/ core.$constructor(\"ZodTuple\", (inst, def) => {\n    core.$ZodTuple.init(inst, def);\n    ZodType.init(inst, def);\n    inst.rest = (rest) => inst.clone({\n        ...inst._zod.def,\n        rest: rest,\n    });\n});\nexport function tuple(items, _paramsOrRest, _params) {\n    const hasRest = _paramsOrRest instanceof core.$ZodType;\n    const params = hasRest ? _params : _paramsOrRest;\n    const rest = hasRest ? _paramsOrRest : null;\n    return new ZodTuple({\n        type: \"tuple\",\n        items: items,\n        rest,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodRecord = /*@__PURE__*/ core.$constructor(\"ZodRecord\", (inst, def) => {\n    core.$ZodRecord.init(inst, def);\n    ZodType.init(inst, def);\n    inst.keyType = def.keyType;\n    inst.valueType = def.valueType;\n});\nexport function record(keyType, valueType, params) {\n    return new ZodRecord({\n        type: \"record\",\n        keyType,\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\n// type alksjf = core.output<core.$ZodRecordKey>;\nexport function partialRecord(keyType, valueType, params) {\n    return new ZodRecord({\n        type: \"record\",\n        keyType: union([keyType, never()]),\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodMap = /*@__PURE__*/ core.$constructor(\"ZodMap\", (inst, def) => {\n    core.$ZodMap.init(inst, def);\n    ZodType.init(inst, def);\n    inst.keyType = def.keyType;\n    inst.valueType = def.valueType;\n});\nexport function map(keyType, valueType, params) {\n    return new ZodMap({\n        type: \"map\",\n        keyType: keyType,\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodSet = /*@__PURE__*/ core.$constructor(\"ZodSet\", (inst, def) => {\n    core.$ZodSet.init(inst, def);\n    ZodType.init(inst, def);\n    inst.min = (...args) => inst.check(core._minSize(...args));\n    inst.nonempty = (params) => inst.check(core._minSize(1, params));\n    inst.max = (...args) => inst.check(core._maxSize(...args));\n    inst.size = (...args) => inst.check(core._size(...args));\n});\nexport function set(valueType, params) {\n    return new ZodSet({\n        type: \"set\",\n        valueType: valueType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodEnum = /*@__PURE__*/ core.$constructor(\"ZodEnum\", (inst, def) => {\n    core.$ZodEnum.init(inst, def);\n    ZodType.init(inst, def);\n    inst.enum = def.entries;\n    inst.options = Object.values(def.entries);\n    const keys = new Set(Object.keys(def.entries));\n    inst.extract = (values, params) => {\n        const newEntries = {};\n        for (const value of values) {\n            if (keys.has(value)) {\n                newEntries[value] = def.entries[value];\n            }\n            else\n                throw new Error(`Key ${value} not found in enum`);\n        }\n        return new ZodEnum({\n            ...def,\n            checks: [],\n            ...util.normalizeParams(params),\n            entries: newEntries,\n        });\n    };\n    inst.exclude = (values, params) => {\n        const newEntries = { ...def.entries };\n        for (const value of values) {\n            if (keys.has(value)) {\n                delete newEntries[value];\n            }\n            else\n                throw new Error(`Key ${value} not found in enum`);\n        }\n        return new ZodEnum({\n            ...def,\n            checks: [],\n            ...util.normalizeParams(params),\n            entries: newEntries,\n        });\n    };\n});\nfunction _enum(values, params) {\n    const entries = Array.isArray(values) ? Object.fromEntries(values.map((v) => [v, v])) : values;\n    return new ZodEnum({\n        type: \"enum\",\n        entries,\n        ...util.normalizeParams(params),\n    });\n}\nexport { _enum as enum };\n/** @deprecated This API has been merged into `z.enum()`. Use `z.enum()` instead.\n *\n * ```ts\n * enum Colors { red, green, blue }\n * z.enum(Colors);\n * ```\n */\nexport function nativeEnum(entries, params) {\n    return new ZodEnum({\n        type: \"enum\",\n        entries,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodLiteral = /*@__PURE__*/ core.$constructor(\"ZodLiteral\", (inst, def) => {\n    core.$ZodLiteral.init(inst, def);\n    ZodType.init(inst, def);\n    inst.values = new Set(def.values);\n    Object.defineProperty(inst, \"value\", {\n        get() {\n            if (def.values.length > 1) {\n                throw new Error(\"This schema contains multiple valid literal values. Use `.values` instead.\");\n            }\n            return def.values[0];\n        },\n    });\n});\nexport function literal(value, params) {\n    return new ZodLiteral({\n        type: \"literal\",\n        values: Array.isArray(value) ? value : [value],\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodFile = /*@__PURE__*/ core.$constructor(\"ZodFile\", (inst, def) => {\n    core.$ZodFile.init(inst, def);\n    ZodType.init(inst, def);\n    inst.min = (size, params) => inst.check(core._minSize(size, params));\n    inst.max = (size, params) => inst.check(core._maxSize(size, params));\n    inst.mime = (types, params) => inst.check(core._mime(Array.isArray(types) ? types : [types], params));\n});\nexport function file(params) {\n    return core._file(ZodFile, params);\n}\nexport const ZodTransform = /*@__PURE__*/ core.$constructor(\"ZodTransform\", (inst, def) => {\n    core.$ZodTransform.init(inst, def);\n    ZodType.init(inst, def);\n    inst._zod.parse = (payload, _ctx) => {\n        payload.addIssue = (issue) => {\n            if (typeof issue === \"string\") {\n                payload.issues.push(util.issue(issue, payload.value, def));\n            }\n            else {\n                // for Zod 3 backwards compatibility\n                const _issue = issue;\n                if (_issue.fatal)\n                    _issue.continue = false;\n                _issue.code ?? (_issue.code = \"custom\");\n                _issue.input ?? (_issue.input = payload.value);\n                _issue.inst ?? (_issue.inst = inst);\n                _issue.continue ?? (_issue.continue = true);\n                payload.issues.push(util.issue(_issue));\n            }\n        };\n        const output = def.transform(payload.value, payload);\n        if (output instanceof Promise) {\n            return output.then((output) => {\n                payload.value = output;\n                return payload;\n            });\n        }\n        payload.value = output;\n        return payload;\n    };\n});\nexport function transform(fn) {\n    return new ZodTransform({\n        type: \"transform\",\n        transform: fn,\n    });\n}\nexport const ZodOptional = /*@__PURE__*/ core.$constructor(\"ZodOptional\", (inst, def) => {\n    core.$ZodOptional.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function optional(innerType) {\n    return new ZodOptional({\n        type: \"optional\",\n        innerType: innerType,\n    });\n}\nexport const ZodNullable = /*@__PURE__*/ core.$constructor(\"ZodNullable\", (inst, def) => {\n    core.$ZodNullable.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function nullable(innerType) {\n    return new ZodNullable({\n        type: \"nullable\",\n        innerType: innerType,\n    });\n}\n// nullish\nexport function nullish(innerType) {\n    return optional(nullable(innerType));\n}\nexport const ZodDefault = /*@__PURE__*/ core.$constructor(\"ZodDefault\", (inst, def) => {\n    core.$ZodDefault.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n    inst.removeDefault = inst.unwrap;\n});\nexport function _default(innerType, defaultValue) {\n    return new ZodDefault({\n        type: \"default\",\n        innerType: innerType,\n        get defaultValue() {\n            return typeof defaultValue === \"function\" ? defaultValue() : defaultValue;\n        },\n    });\n}\nexport const ZodPrefault = /*@__PURE__*/ core.$constructor(\"ZodPrefault\", (inst, def) => {\n    core.$ZodPrefault.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function prefault(innerType, defaultValue) {\n    return new ZodPrefault({\n        type: \"prefault\",\n        innerType: innerType,\n        get defaultValue() {\n            return typeof defaultValue === \"function\" ? defaultValue() : defaultValue;\n        },\n    });\n}\nexport const ZodNonOptional = /*@__PURE__*/ core.$constructor(\"ZodNonOptional\", (inst, def) => {\n    core.$ZodNonOptional.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function nonoptional(innerType, params) {\n    return new ZodNonOptional({\n        type: \"nonoptional\",\n        innerType: innerType,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodSuccess = /*@__PURE__*/ core.$constructor(\"ZodSuccess\", (inst, def) => {\n    core.$ZodSuccess.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function success(innerType) {\n    return new ZodSuccess({\n        type: \"success\",\n        innerType: innerType,\n    });\n}\nexport const ZodCatch = /*@__PURE__*/ core.$constructor(\"ZodCatch\", (inst, def) => {\n    core.$ZodCatch.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n    inst.removeCatch = inst.unwrap;\n});\nfunction _catch(innerType, catchValue) {\n    return new ZodCatch({\n        type: \"catch\",\n        innerType: innerType,\n        catchValue: (typeof catchValue === \"function\" ? catchValue : () => catchValue),\n    });\n}\nexport { _catch as catch };\nexport const ZodNaN = /*@__PURE__*/ core.$constructor(\"ZodNaN\", (inst, def) => {\n    core.$ZodNaN.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function nan(params) {\n    return core._nan(ZodNaN, params);\n}\nexport const ZodPipe = /*@__PURE__*/ core.$constructor(\"ZodPipe\", (inst, def) => {\n    core.$ZodPipe.init(inst, def);\n    ZodType.init(inst, def);\n    inst.in = def.in;\n    inst.out = def.out;\n});\nexport function pipe(in_, out) {\n    return new ZodPipe({\n        type: \"pipe\",\n        in: in_,\n        out: out,\n        // ...util.normalizeParams(params),\n    });\n}\nexport const ZodReadonly = /*@__PURE__*/ core.$constructor(\"ZodReadonly\", (inst, def) => {\n    core.$ZodReadonly.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function readonly(innerType) {\n    return new ZodReadonly({\n        type: \"readonly\",\n        innerType: innerType,\n    });\n}\nexport const ZodTemplateLiteral = /*@__PURE__*/ core.$constructor(\"ZodTemplateLiteral\", (inst, def) => {\n    core.$ZodTemplateLiteral.init(inst, def);\n    ZodType.init(inst, def);\n});\nexport function templateLiteral(parts, params) {\n    return new ZodTemplateLiteral({\n        type: \"template_literal\",\n        parts,\n        ...util.normalizeParams(params),\n    });\n}\nexport const ZodLazy = /*@__PURE__*/ core.$constructor(\"ZodLazy\", (inst, def) => {\n    core.$ZodLazy.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.getter();\n});\nexport function lazy(getter) {\n    return new ZodLazy({\n        type: \"lazy\",\n        getter: getter,\n    });\n}\nexport const ZodPromise = /*@__PURE__*/ core.$constructor(\"ZodPromise\", (inst, def) => {\n    core.$ZodPromise.init(inst, def);\n    ZodType.init(inst, def);\n    inst.unwrap = () => inst._zod.def.innerType;\n});\nexport function promise(innerType) {\n    return new ZodPromise({\n        type: \"promise\",\n        innerType: innerType,\n    });\n}\nexport const ZodCustom = /*@__PURE__*/ core.$constructor(\"ZodCustom\", (inst, def) => {\n    core.$ZodCustom.init(inst, def);\n    ZodType.init(inst, def);\n});\n// custom checks\nexport function check(fn) {\n    const ch = new core.$ZodCheck({\n        check: \"custom\",\n        // ...util.normalizeParams(params),\n    });\n    ch._zod.check = fn;\n    return ch;\n}\nexport function custom(fn, _params) {\n    return core._custom(ZodCustom, fn ?? (() => true), _params);\n}\nexport function refine(fn, _params = {}) {\n    return core._refine(ZodCustom, fn, _params);\n}\n// superRefine\nexport function superRefine(fn) {\n    const ch = check((payload) => {\n        payload.addIssue = (issue) => {\n            if (typeof issue === \"string\") {\n                payload.issues.push(util.issue(issue, payload.value, ch._zod.def));\n            }\n            else {\n                // for Zod 3 backwards compatibility\n                const _issue = issue;\n                if (_issue.fatal)\n                    _issue.continue = false;\n                _issue.code ?? (_issue.code = \"custom\");\n                _issue.input ?? (_issue.input = payload.value);\n                _issue.inst ?? (_issue.inst = ch);\n                _issue.continue ?? (_issue.continue = !ch._zod.def.abort);\n                payload.issues.push(util.issue(_issue));\n            }\n        };\n        return fn(payload.value, payload);\n    });\n    return ch;\n}\nfunction _instanceof(cls, params = {\n    error: `Input not instance of ${cls.name}`,\n}) {\n    const inst = new ZodCustom({\n        type: \"custom\",\n        check: \"custom\",\n        fn: (data) => data instanceof cls,\n        abort: true,\n        ...util.normalizeParams(params),\n    });\n    inst._zod.bag.Class = cls;\n    return inst;\n}\nexport { _instanceof as instanceof };\n// stringbool\nexport const stringbool = (...args) => core._stringbool({\n    Pipe: ZodPipe,\n    Boolean: ZodBoolean,\n    String: ZodString,\n    Transform: ZodTransform,\n}, ...args);\nexport function json(params) {\n    const jsonSchema = lazy(() => {\n        return union([string(params), number(), boolean(), _null(), array(jsonSchema), record(string(), jsonSchema)]);\n    });\n    return jsonSchema;\n}\n// preprocess\n// /** @deprecated Use `z.pipe()` and `z.transform()` instead. */\nexport function preprocess(fn, schema) {\n    return pipe(transform(fn), schema);\n}\n","/**\n * Schema-driven payload validation using Zod v4.\n *\n * Provides typed validation helpers for API responses and realtime event payloads,\n * logging structured diagnostics on failure.\n */\nimport { z } from \"zod/v4\";\n\nconst MAX_REPORTED_ISSUES = 8;\n\nexport type ValidationResult<T> = { success: true; data: T } | { success: false; error: z.ZodError };\n\nexport function validateWithSchema<T>(schema: z.ZodType<T>, payload: unknown, recordId: string): ValidationResult<T> {\n  const result = schema.safeParse(payload);\n  if (!result.success) {\n    const issueText = result.error.issues\n      .slice(0, MAX_REPORTED_ISSUES)\n      .map((issue) => {\n        const path = issue.path.length > 0 ? issue.path.join(\".\") : \"(root)\";\n        return `${path}: ${issue.message}`;\n      })\n      .join(\"; \");\n\n    console.error(`[zod] ${recordId} validation failed`, issueText, payload);\n    return { success: false, error: result.error };\n  }\n  return { success: true, data: result.data };\n}\n\nexport async function validateFetchJson<T>(response: Response, schema: z.ZodType<T>, recordId: string): Promise<{ success: true; data: T } | { success: false; error: string }> {\n  if (!response.ok) {\n    return { success: false, error: `HTTP ${response.status}: ${response.statusText}` };\n  }\n\n  let payload: unknown;\n  try {\n    payload = await response.json();\n  } catch (error) {\n    return {\n      success: false,\n      error: `Invalid JSON response: ${error instanceof Error ? error.message : String(error)}`,\n    };\n  }\n\n  const validation = validateWithSchema(schema, payload, recordId);\n  if (!validation.success) {\n    return { success: false, error: `Schema validation failed for ${recordId}` };\n  }\n\n  return { success: true, data: validation.data };\n}\n","import { validateFetchJson } from \"$lib/validation/validate\";\nimport type { z } from \"zod/v4\";\n\nconst CSRF_COOKIE = \"XSRF-TOKEN\";\nconst CSRF_HEADER = \"X-XSRF-TOKEN\";\n\nfunction getCookie(cookieName: string): string | null {\n  if (typeof document === \"undefined\") {\n    return null;\n  }\n  const entry = document.cookie\n    .split(\";\")\n    .map((part) => part.trim())\n    .find((part) => part.startsWith(`${cookieName}=`));\n\n  if (!entry) {\n    return null;\n  }\n\n  const token = entry.substring(cookieName.length + 1);\n  try {\n    return decodeURIComponent(token);\n  } catch {\n    return token;\n  }\n}\n\nfunction withCsrf(init: RequestInit): RequestInit {\n  const headers = new Headers(init.headers ?? {});\n  const token = getCookie(CSRF_COOKIE);\n  if (token && !headers.has(CSRF_HEADER)) {\n    headers.set(CSRF_HEADER, token);\n  }\n  return { ...init, headers };\n}\n\nexport async function getJson<T>(url: string, schema: z.ZodType<T>, recordId: string): Promise<T> {\n  const response = await fetch(url, { method: \"GET\", cache: \"no-store\", credentials: \"same-origin\" });\n  const result = await validateFetchJson(response, schema, recordId);\n  if (!result.success) {\n    throw new Error(result.error);\n  }\n  return result.data;\n}\n\nexport async function postJson<TRequest extends object, TResponse>(\n  url: string,\n  payload: TRequest,\n  responseSchema: z.ZodType<TResponse>,\n  recordId: string,\n): Promise<TResponse> {\n  const response = await fetch(\n    url,\n    withCsrf({\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      credentials: \"same-origin\",\n      body: JSON.stringify(payload),\n    }),\n  );\n\n  const result = await validateFetchJson(response, responseSchema, recordId);\n  if (!result.success) {\n    throw new Error(result.error);\n  }\n  return result.data;\n}\n","import { z } from \"zod/v4\";\n\nexport const AuthorSchema = z.object({\n  id: z.string().nullable().optional(),\n  name: z.string(),\n});\n\nexport const CollectionSchema = z.object({\n  id: z.string().nullable().optional(),\n  name: z.string().nullable().optional(),\n  type: z.string().nullable().optional(),\n  rank: z.number().nullable().optional(),\n  source: z.string().nullable().optional(),\n});\n\nexport const TagSchema = z.object({\n  key: z.string(),\n  attributes: z.record(z.string(), z.unknown()).optional().default({}),\n});\n\nexport const CoverSchema = z.object({\n  s3ImagePath: z.string().nullable().optional(),\n  externalImageUrl: z.string().nullable().optional(),\n  width: z.number().nullable().optional(),\n  height: z.number().nullable().optional(),\n  highResolution: z.boolean().nullable().optional(),\n  preferredUrl: z.string().nullable().optional(),\n  fallbackUrl: z.string().nullable().optional(),\n  source: z.string().nullable().optional(),\n});\n\nexport const EditionSchema = z.object({\n  googleBooksId: z.string().nullable().optional(),\n  type: z.string().nullable().optional(),\n  identifier: z.string().nullable().optional(),\n  isbn10: z.string().nullable().optional(),\n  isbn13: z.string().nullable().optional(),\n  publishedDate: z.union([z.string(), z.number(), z.null()]).optional(),\n  coverImageUrl: z.string().nullable().optional(),\n});\n\nexport const PublicationSchema = z.object({\n  publishedDate: z.union([z.string(), z.number(), z.null()]).optional(),\n  language: z.string().nullable().optional(),\n  pageCount: z.number().nullable().optional(),\n  publisher: z.string().nullable().optional(),\n});\n\nexport const BookSchema = z.object({\n  id: z.string(),\n  slug: z.string().nullable().optional(),\n  title: z.string().nullable().optional(),\n  description: z.string().nullable().optional(),\n  publication: PublicationSchema.nullable().optional(),\n  authors: z.array(AuthorSchema).optional().default([]),\n  categories: z.array(z.string()).optional().default([]),\n  collections: z.array(CollectionSchema).optional().default([]),\n  tags: z.array(TagSchema).optional().default([]),\n  cover: CoverSchema.nullable().optional(),\n  editions: z.array(EditionSchema).optional().default([]),\n  recommendationIds: z.array(z.string()).optional().default([]),\n  extras: z.record(z.string(), z.unknown()).optional().default({}),\n});\n\nexport const SearchHitSchema = BookSchema.extend({\n  matchType: z.string().nullable().optional(),\n  relevanceScore: z.number().nullable().optional(),\n});\n\nexport const SearchResponseSchema = z.object({\n  query: z.string(),\n  queryHash: z.string(),\n  startIndex: z.number(),\n  maxResults: z.number(),\n  totalResults: z.number(),\n  hasMore: z.boolean(),\n  nextStartIndex: z.number(),\n  prefetchedCount: z.number(),\n  orderBy: z.string(),\n  coverSource: z.string(),\n  resolution: z.string(),\n  results: z.array(SearchHitSchema),\n});\n\nexport const SimilarBooksSchema = z.array(BookSchema);\n\nexport const BookCardSchema = z.object({\n  id: z.string(),\n  slug: z.string().nullable().optional(),\n  title: z.string(),\n  authors: z.array(z.string()).optional().default([]),\n  cover_url: z.string().nullable().optional(),\n  cover_s3_key: z.string().nullable().optional(),\n  fallback_cover_url: z.string().nullable().optional(),\n  average_rating: z.number().nullable().optional(),\n  ratings_count: z.number().nullable().optional(),\n  tags: z.record(z.string(), z.unknown()).optional().default({}),\n});\n\nexport const HomePayloadSchema = z.object({\n  currentBestsellers: z.array(BookCardSchema),\n  recentBooks: z.array(BookCardSchema),\n});\n\nexport const SitemapBookSchema = z.object({\n  id: z.string().nullable().optional(),\n  slug: z.string(),\n  title: z.string(),\n  updatedAt: z.union([z.string(), z.number(), z.null()]).optional(),\n});\n\nexport const SitemapAuthorSchema = z.object({\n  authorId: z.string(),\n  authorName: z.string(),\n  lastModified: z.union([z.string(), z.number(), z.null()]).optional(),\n  books: z.array(SitemapBookSchema),\n});\n\nexport const SitemapPayloadSchema = z.object({\n  viewType: z.enum([\"authors\", \"books\"]),\n  activeLetter: z.string(),\n  pageNumber: z.number(),\n  totalPages: z.number(),\n  totalItems: z.number(),\n  letters: z.array(z.string()),\n  baseUrl: z.string(),\n  books: z.array(SitemapBookSchema).optional().default([]),\n  authors: z.array(SitemapAuthorSchema).optional().default([]),\n});\n\nexport const ThemePreferenceSchema = z.object({\n  theme: z.string().nullable(),\n  source: z.string(),\n});\n\nexport const AffiliateLinksSchema = z.record(z.string(), z.string()).optional().default({});\n\nexport const SearchProgressEventSchema = z.object({\n  message: z.string().optional(),\n});\n\nexport const SearchResultsEventSchema = z.object({\n  newResults: z.array(z.unknown()).optional().default([]),\n});\n\nexport const BookCoverUpdateEventSchema = z.object({\n  newCoverUrl: z.string().optional(),\n});\n\nexport const RealtimeSearchHitCandidateSchema = z.object({\n  id: z.string(),\n  slug: z.string().optional(),\n  title: z.string().optional(),\n  description: z.string().nullable().optional(),\n  authors: z.array(z.string()).optional().default([]),\n  categories: z.array(z.string()).optional().default([]),\n  publishedDate: z.union([z.string(), z.number()]).optional(),\n  language: z.string().optional(),\n  pageCount: z.number().optional(),\n  publisher: z.string().optional(),\n  cover: z\n    .object({\n      s3ImagePath: z.string().optional(),\n      externalImageUrl: z.string().optional(),\n      preferredUrl: z.string().optional(),\n      fallbackUrl: z.string().optional(),\n      source: z.string().optional(),\n    })\n    .optional(),\n  matchType: z.string().optional(),\n  relevanceScore: z.number().optional(),\n});\n\nexport type Book = z.infer<typeof BookSchema>;\nexport type SearchHit = z.infer<typeof SearchHitSchema>;\nexport type SearchResponse = z.infer<typeof SearchResponseSchema>;\nexport type BookCard = z.infer<typeof BookCardSchema>;\nexport type HomePayload = z.infer<typeof HomePayloadSchema>;\nexport type SitemapPayload = z.infer<typeof SitemapPayloadSchema>;\nexport type ThemePreference = z.infer<typeof ThemePreferenceSchema>;\n","import { getJson, postJson } from \"$lib/services/http\";\nimport { ThemePreferenceSchema, type ThemePreference } from \"$lib/validation/schemas\";\n\nexport type ThemeMode = \"light\" | \"dark\" | \"system\";\n\nexport function getThemePreference(): Promise<ThemePreference> {\n  return getJson(\"/api/theme\", ThemePreferenceSchema, \"getThemePreference\");\n}\n\nexport function persistThemePreference(theme: ThemeMode | null, useSystem: boolean): Promise<ThemePreference> {\n  return postJson(\"/api/theme\", { theme, useSystem }, ThemePreferenceSchema, \"persistThemePreference\");\n}\n","import { writable } from \"svelte/store\";\nimport { getThemePreference, persistThemePreference, type ThemeMode } from \"$lib/services/theme\";\n\nexport const themeMode = writable<ThemeMode>(\"system\");\n\nfunction applyTheme(theme: ThemeMode): void {\n  const root = document.documentElement;\n  if (theme === \"system\") {\n    root.setAttribute(\"data-theme\", \"_auto_\");\n    return;\n  }\n  root.setAttribute(\"data-theme\", theme);\n}\n\nfunction readLocalTheme(): ThemeMode | null {\n  const saved = window.localStorage.getItem(\"preferred_theme\");\n  if (saved === \"light\" || saved === \"dark\" || saved === \"system\") {\n    return saved;\n  }\n  return null;\n}\n\nasync function loadServerTheme(): Promise<ThemeMode> {\n  const preference = await getThemePreference();\n  if (preference.theme === \"light\" || preference.theme === \"dark\") {\n    return preference.theme;\n  }\n  return \"system\";\n}\n\nexport async function initializeTheme(): Promise<void> {\n  if (typeof window === \"undefined\") {\n    return;\n  }\n\n  const localTheme = readLocalTheme();\n  if (localTheme) {\n    themeMode.set(localTheme);\n    applyTheme(localTheme);\n    return;\n  }\n\n  try {\n    const serverTheme = await loadServerTheme();\n    themeMode.set(serverTheme);\n    applyTheme(serverTheme);\n    window.localStorage.setItem(\"preferred_theme\", serverTheme);\n  } catch (error) {\n    console.error(\"Failed to load theme preference\", error);\n    themeMode.set(\"system\");\n    applyTheme(\"system\");\n  }\n}\n\nexport async function updateTheme(nextTheme: ThemeMode): Promise<void> {\n  themeMode.set(nextTheme);\n  applyTheme(nextTheme);\n  window.localStorage.setItem(\"preferred_theme\", nextTheme);\n\n  try {\n    await persistThemePreference(nextTheme === \"system\" ? null : nextTheme, nextTheme === \"system\");\n  } catch (error) {\n    console.error(\"Failed to persist theme preference\", error);\n  }\n}\n","<script lang=\"ts\">\n  import type { RouteName } from \"$lib/router/router\";\n  import { navigate } from \"$lib/router/router\";\n  import { themeMode, updateTheme } from \"$lib/stores/theme\";\n\n  let { activeRoute }: { activeRoute: RouteName } = $props();\n\n  let quickQuery = $state(\"\");\n  let currentTheme = $state<\"light\" | \"dark\" | \"system\">(\"system\");\n\n  const unsubscribe = themeMode.subscribe((value) => {\n    currentTheme = value;\n  });\n\n  $effect(() => {\n    return () => {\n      unsubscribe();\n    };\n  });\n\n  function submitQuickSearch(event: SubmitEvent): void {\n    event.preventDefault();\n    const trimmed = quickQuery.trim();\n    if (!trimmed) {\n      return;\n    }\n    navigate(`/search?query=${encodeURIComponent(trimmed)}`);\n  }\n\n  function isActive(route: RouteName): string {\n    return activeRoute === route\n      ? \"bg-canvas-200 text-canvas-900 shadow-sm\"\n      : \"text-anthracite-700 hover:bg-linen-100 hover:text-anthracite-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-slate-100\";\n  }\n</script>\n\n<header class=\"sticky top-0 z-30 border-b border-linen-200/80 bg-white/90 backdrop-blur dark:border-slate-700 dark:bg-slate-900/90\">\n  <div class=\"mx-auto flex max-w-6xl flex-col gap-3 px-4 py-3 md:px-6 lg:flex-row lg:items-center lg:justify-between\">\n    <div class=\"flex items-center gap-4\">\n      <a href=\"/\" class=\"text-lg font-semibold tracking-tight text-anthracite-900 dark:text-slate-100\">FindMyBook</a>\n      <nav class=\"hidden items-center gap-1 rounded-lg border border-linen-200 bg-linen-50 p-1 dark:border-slate-700 dark:bg-slate-800 md:flex\">\n        <a href=\"/\" class={`rounded-md px-3 py-1.5 text-sm transition ${isActive(\"home\")}`}>Home</a>\n        <a href=\"/search\" class={`rounded-md px-3 py-1.5 text-sm transition ${isActive(\"search\")}`}>Search</a>\n        <a href=\"/sitemap\" class={`rounded-md px-3 py-1.5 text-sm transition ${isActive(\"sitemap\")}`}>Sitemap</a>\n      </nav>\n    </div>\n\n    <div class=\"flex flex-col gap-3 sm:flex-row sm:items-center\">\n      <form onsubmit={submitQuickSearch} class=\"flex items-center gap-2\">\n        <input\n          bind:value={quickQuery}\n          type=\"search\"\n          placeholder=\"Quick search\"\n          class=\"w-full rounded-lg border border-linen-300 bg-white px-3 py-1.5 text-sm text-anthracite-900 outline-none ring-canvas-300 transition focus:ring-2 dark:border-slate-600 dark:bg-slate-800 dark:text-slate-100 sm:w-56\"\n        />\n        <button\n          type=\"submit\"\n          class=\"rounded-lg bg-canvas-500 px-3 py-1.5 text-sm font-medium text-white transition hover:bg-canvas-600\"\n        >\n          Go\n        </button>\n      </form>\n\n      <label class=\"flex items-center gap-2 text-sm text-anthracite-700 dark:text-slate-200\">\n        Theme\n        <select\n          value={currentTheme}\n          onchange={(event) => {\n            const nextTheme = (event.currentTarget as HTMLSelectElement).value as \"light\" | \"dark\" | \"system\";\n            void updateTheme(nextTheme);\n          }}\n          class=\"rounded-md border border-linen-300 bg-white px-2 py-1 text-sm dark:border-slate-600 dark:bg-slate-800\"\n        >\n          <option value=\"system\">System</option>\n          <option value=\"light\">Light</option>\n          <option value=\"dark\">Dark</option>\n        </select>\n      </label>\n    </div>\n  </div>\n</header>\n","<script lang=\"ts\">\n</script>\n\n<footer class=\"border-t border-linen-200 bg-white dark:border-slate-700 dark:bg-slate-900\">\n  <div class=\"mx-auto flex max-w-6xl flex-col gap-2 px-4 py-6 text-sm text-anthracite-600 dark:text-slate-400 md:flex-row md:items-center md:justify-between md:px-6\">\n    <p>FindMyBook</p>\n    <div class=\"flex items-center gap-4\">\n      <a href=\"/search\" class=\"transition hover:text-canvas-600 dark:hover:text-canvas-400\">Search</a>\n      <a href=\"/sitemap\" class=\"transition hover:text-canvas-600 dark:hover:text-canvas-400\">Sitemap</a>\n      <a href=\"https://findmybook.net\" data-no-spa=\"true\" class=\"transition hover:text-canvas-600 dark:hover:text-canvas-400\">Production</a>\n    </div>\n  </div>\n</footer>\n","<script lang=\"ts\">\n  export interface BookCardDisplay {\n    id: string;\n    slug: string | null;\n    title: string;\n    authors: string[];\n    description?: string | null;\n    coverUrl?: string | null;\n    fallbackCoverUrl?: string | null;\n    averageRating?: number | null;\n    ratingsCount?: number | null;\n  }\n\n  let {\n    book,\n    href,\n    layout = \"grid\",\n  }: {\n    book: BookCardDisplay;\n    href: string;\n    layout?: \"grid\" | \"list\";\n  } = $props();\n\n  const fallbackImage = \"/images/placeholder-book-cover.svg\";\n\n  function coverSource(): string {\n    if (book.coverUrl && book.coverUrl.trim().length > 0) {\n      return book.coverUrl;\n    }\n    if (book.fallbackCoverUrl && book.fallbackCoverUrl.trim().length > 0) {\n      return book.fallbackCoverUrl;\n    }\n    return fallbackImage;\n  }\n</script>\n\n{#if layout === \"list\"}\n  <article class=\"flex gap-4 rounded-xl border border-linen-200 bg-white p-4 shadow-sm transition hover:shadow-md dark:border-slate-700 dark:bg-slate-800\">\n    <img src={coverSource()} alt={`${book.title} cover`} class=\"h-40 w-28 shrink-0 rounded-lg object-cover\" loading=\"lazy\" />\n    <div class=\"flex min-w-0 flex-1 flex-col gap-2\">\n      <a href={href} class=\"line-clamp-2 text-lg font-semibold text-anthracite-900 transition hover:text-canvas-700 dark:text-slate-100 dark:hover:text-canvas-400\">\n        {book.title}\n      </a>\n      <p class=\"line-clamp-1 text-sm text-anthracite-700 dark:text-slate-300\">\n        {book.authors.length > 0 ? book.authors.join(\", \") : \"Unknown author\"}\n      </p>\n      {#if book.description}\n        <p class=\"line-clamp-3 text-sm text-anthracite-600 dark:text-slate-400\">{book.description}</p>\n      {/if}\n      {#if book.averageRating !== null && book.averageRating !== undefined}\n        <p class=\"text-xs font-medium text-canvas-700 dark:text-canvas-400\">\n          {book.averageRating.toFixed(1)} ({book.ratingsCount ?? 0} ratings)\n        </p>\n      {/if}\n    </div>\n  </article>\n{:else}\n  <article class=\"group overflow-hidden rounded-xl border border-linen-200 bg-white shadow-sm transition hover:-translate-y-0.5 hover:shadow-md dark:border-slate-700 dark:bg-slate-800\">\n    <a href={href} class=\"block\">\n      <img src={coverSource()} alt={`${book.title} cover`} class=\"h-64 w-full object-cover\" loading=\"lazy\" />\n    </a>\n    <div class=\"space-y-2 p-4\">\n      <a href={href} class=\"line-clamp-2 text-base font-semibold text-anthracite-900 transition group-hover:text-canvas-700 dark:text-slate-100 dark:group-hover:text-canvas-400\">\n        {book.title}\n      </a>\n      <p class=\"line-clamp-1 text-sm text-anthracite-700 dark:text-slate-300\">\n        {book.authors.length > 0 ? book.authors.join(\", \") : \"Unknown author\"}\n      </p>\n      {#if book.averageRating !== null && book.averageRating !== undefined}\n        <p class=\"text-xs font-medium text-canvas-700 dark:text-canvas-400\">\n          {book.averageRating.toFixed(1)} ({book.ratingsCount ?? 0})\n        </p>\n      {/if}\n    </div>\n  </article>\n{/if}\n","import { getJson } from \"$lib/services/http\";\nimport { type HomePayload, type SitemapPayload, HomePayloadSchema, SitemapPayloadSchema } from \"$lib/validation/schemas\";\n\nexport function getHomePagePayload(): Promise<HomePayload> {\n  return getJson(\"/api/pages/home\", HomePayloadSchema, \"getHomePagePayload\");\n}\n\nexport function getSitemapPayload(viewType: \"authors\" | \"books\", letter: string, pageNumber: number): Promise<SitemapPayload> {\n  const url = new URL(\"/api/pages/sitemap\", window.location.origin);\n  url.searchParams.set(\"view\", viewType);\n  url.searchParams.set(\"letter\", letter);\n  url.searchParams.set(\"page\", String(pageNumber));\n  return getJson(`${url.pathname}${url.search}`, SitemapPayloadSchema, \"getSitemapPayload\");\n}\n","<script lang=\"ts\">\n  import { onMount } from \"svelte\";\n  import { navigate } from \"$lib/router/router\";\n  import BookCard, { type BookCardDisplay } from \"$lib/components/BookCard.svelte\";\n  import { getHomePagePayload } from \"$lib/services/pages\";\n\n  let loading = $state(true);\n  let errorMessage = $state<string | null>(null);\n  let bestsellers = $state<BookCardDisplay[]>([]);\n  let recentBooks = $state<BookCardDisplay[]>([]);\n  let query = $state(\"\");\n\n  function toDisplayCard(payload: {\n    id: string;\n    slug?: string | null;\n    title: string;\n    authors?: string[];\n    cover_url?: string | null;\n    fallback_cover_url?: string | null;\n    average_rating?: number | null;\n    ratings_count?: number | null;\n  }): BookCardDisplay {\n    return {\n      id: payload.id,\n      slug: payload.slug ?? payload.id,\n      title: payload.title,\n      authors: payload.authors ?? [],\n      coverUrl: payload.cover_url ?? null,\n      fallbackCoverUrl: payload.fallback_cover_url ?? null,\n      averageRating: payload.average_rating ?? null,\n      ratingsCount: payload.ratings_count ?? null,\n    };\n  }\n\n  async function loadHome(): Promise<void> {\n    loading = true;\n    errorMessage = null;\n\n    try {\n      const payload = await getHomePagePayload();\n      bestsellers = payload.currentBestsellers.map(toDisplayCard);\n      recentBooks = payload.recentBooks.map(toDisplayCard);\n    } catch (error) {\n      errorMessage = error instanceof Error ? error.message : \"Unable to load homepage content\";\n      bestsellers = [];\n      recentBooks = [];\n    } finally {\n      loading = false;\n    }\n  }\n\n  function submitSearch(event: SubmitEvent): void {\n    event.preventDefault();\n    const trimmed = query.trim();\n    if (!trimmed) {\n      return;\n    }\n    navigate(`/search?query=${encodeURIComponent(trimmed)}`);\n  }\n\n  onMount(() => {\n    void loadHome();\n  });\n</script>\n\n<section class=\"bg-gradient-to-b from-linen-50 to-white px-4 py-10 dark:from-slate-900 dark:to-slate-900 md:px-6 md:py-16\">\n  <div class=\"mx-auto max-w-4xl text-center\">\n    <h1 class=\"text-3xl font-semibold tracking-tight text-anthracite-900 dark:text-slate-100 md:text-5xl\">Find your next great read</h1>\n    <p class=\"mx-auto mt-4 max-w-2xl text-base text-anthracite-700 dark:text-slate-300 md:text-lg\">\n      Search by title, author, or ISBN with realtime results, rich book details, and sitemap browsing.\n    </p>\n    <form onsubmit={submitSearch} class=\"mx-auto mt-8 flex max-w-2xl flex-col gap-3 sm:flex-row\">\n      <input\n        bind:value={query}\n        type=\"search\"\n        placeholder=\"Search by title, author, or ISBN\"\n        class=\"w-full rounded-xl border border-linen-300 bg-white px-4 py-3 text-anthracite-900 outline-none ring-canvas-300 transition focus:ring-2 dark:border-slate-600 dark:bg-slate-800 dark:text-slate-100\"\n        required\n      />\n      <button type=\"submit\" class=\"rounded-xl bg-canvas-500 px-5 py-3 font-medium text-white transition hover:bg-canvas-600\">Search</button>\n    </form>\n  </div>\n</section>\n\n<section class=\"mx-auto grid max-w-6xl gap-10 px-4 py-8 md:px-6 md:py-12\">\n  {#if loading}\n    <p class=\"text-sm text-anthracite-600 dark:text-slate-300\">Loading homepage sections...</p>\n  {:else if errorMessage}\n    <div class=\"rounded-xl border border-red-200 bg-red-50 p-4 text-sm text-red-700 dark:border-red-900/40 dark:bg-red-950/40 dark:text-red-200\">\n      {errorMessage}\n    </div>\n  {/if}\n\n  <div class=\"space-y-4\">\n    <div class=\"flex items-center justify-between\">\n      <h2 class=\"text-2xl font-semibold text-anthracite-900 dark:text-slate-100\">NYT Bestsellers</h2>\n      <a href=\"/search?query=new%20york%20times\" class=\"text-sm font-medium text-canvas-700 transition hover:text-canvas-800 dark:text-canvas-400\">View all</a>\n    </div>\n    {#if !loading && bestsellers.length === 0}\n      <p class=\"text-sm text-anthracite-600 dark:text-slate-400\">No current bestsellers available.</p>\n    {:else}\n      <div class=\"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4\">\n        {#each bestsellers as book (book.id)}\n          <BookCard book={book} href={`/book/${encodeURIComponent(book.slug ?? book.id)}`} />\n        {/each}\n      </div>\n    {/if}\n  </div>\n\n  <div class=\"space-y-4\">\n    <div class=\"flex items-center justify-between\">\n      <h2 class=\"text-2xl font-semibold text-anthracite-900 dark:text-slate-100\">Recently Viewed</h2>\n      <a href=\"/search?query=explore\" class=\"text-sm font-medium text-canvas-700 transition hover:text-canvas-800 dark:text-canvas-400\">Explore more</a>\n    </div>\n    {#if !loading && recentBooks.length === 0}\n      <p class=\"text-sm text-anthracite-600 dark:text-slate-400\">No recent books yet. Start searching to build your list.</p>\n    {:else}\n      <div class=\"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4\">\n        {#each recentBooks as book (book.id)}\n          <BookCard book={book} href={`/book/${encodeURIComponent(book.slug ?? book.id)}`} />\n        {/each}\n      </div>\n    {/if}\n  </div>\n</section>\n","/**\n * Book data access layer â€” search, detail, similar books, and affiliate links.\n *\n * All data flows through the backend HTTP API with typed Zod validation at the boundary.\n * Includes normalizers for realtime search hits received via WebSocket.\n */\nimport { getJson } from \"$lib/services/http\";\nimport { validateWithSchema } from \"$lib/validation/validate\";\nimport {\n  type Book,\n  type SearchHit,\n  type SearchResponse,\n  BookSchema,\n  SearchResponseSchema,\n  SimilarBooksSchema,\n  AffiliateLinksSchema,\n  RealtimeSearchHitCandidateSchema,\n} from \"$lib/validation/schemas\";\n\nconst DEFAULT_SIMILAR_BOOKS_LIMIT = 6;\n\nexport interface SearchParams {\n  query: string;\n  startIndex: number;\n  maxResults: number;\n  orderBy: string;\n  coverSource: string;\n  resolution: string;\n  publishedYear: number | null;\n}\n\nfunction buildSearchUrl(params: SearchParams): string {\n  const url = new URL(\"/api/books/search\", window.location.origin);\n  url.searchParams.set(\"query\", params.query);\n  url.searchParams.set(\"startIndex\", String(params.startIndex));\n  url.searchParams.set(\"maxResults\", String(params.maxResults));\n  url.searchParams.set(\"orderBy\", params.orderBy);\n  url.searchParams.set(\"coverSource\", params.coverSource);\n  url.searchParams.set(\"resolution\", params.resolution);\n\n  if (params.publishedYear !== null) {\n    url.searchParams.set(\"publishedYear\", String(params.publishedYear));\n  }\n\n  return `${url.pathname}${url.search}`;\n}\n\nexport function searchBooks(params: SearchParams): Promise<SearchResponse> {\n  return getJson(buildSearchUrl(params), SearchResponseSchema, \"searchBooks\");\n}\n\nexport function getBook(identifier: string): Promise<Book> {\n  return getJson(`/api/books/${encodeURIComponent(identifier)}`, BookSchema, `getBook:${identifier}`);\n}\n\nexport function getSimilarBooks(identifier: string, limit = DEFAULT_SIMILAR_BOOKS_LIMIT): Promise<Book[]> {\n  return getJson(\n    `/api/books/${encodeURIComponent(identifier)}/similar?limit=${limit}`,\n    SimilarBooksSchema,\n    `getSimilarBooks:${identifier}`,\n  );\n}\n\nexport function getAffiliateLinks(identifier: string): Promise<Record<string, string>> {\n  return getJson(\n    `/api/pages/book/${encodeURIComponent(identifier)}/affiliate-links`,\n    AffiliateLinksSchema,\n    `getAffiliateLinks:${identifier}`,\n  );\n}\n\nfunction normalizeAuthorNames(rawAuthors: string[]): Array<{ id: string | null; name: string }> {\n  return rawAuthors.map((name) => ({ id: null, name }));\n}\n\n/**\n * Build a fully-typed Cover object from a loosely-typed realtime candidate cover payload.\n * Fills missing fields with null to satisfy the SearchHit cover contract.\n */\nfunction buildNormalizedCover(raw: Record<string, unknown>): SearchHit[\"cover\"] {\n  return {\n    s3ImagePath: (raw.s3ImagePath as string) ?? null,\n    externalImageUrl: (raw.externalImageUrl as string) ?? null,\n    width: null,\n    height: null,\n    highResolution: null,\n    preferredUrl: (raw.preferredUrl as string) ?? null,\n    fallbackUrl: (raw.fallbackUrl as string) ?? null,\n    source: (raw.source as string) ?? null,\n  };\n}\n\nfunction normalizeSearchHit(raw: unknown): SearchHit | null {\n  const validation = validateWithSchema(RealtimeSearchHitCandidateSchema, raw, \"realtimeSearchHit\");\n  if (!validation.success) {\n    console.warn(\"Dropped unparseable realtime search hit\", raw);\n    return null;\n  }\n\n  const candidate = validation.data;\n  const publishedDate = candidate.publishedDate ?? null;\n\n  return {\n    id: candidate.id,\n    slug: candidate.slug ?? candidate.id,\n    title: candidate.title ?? \"Untitled\",\n    description: candidate.description ?? null,\n    publication: {\n      publishedDate,\n      language: candidate.language ?? null,\n      pageCount: candidate.pageCount ?? null,\n      publisher: candidate.publisher ?? null,\n    },\n    authors: normalizeAuthorNames(candidate.authors),\n    categories: candidate.categories,\n    collections: [],\n    tags: [],\n    cover: buildNormalizedCover(candidate.cover ?? {}),\n    editions: [],\n    recommendationIds: [],\n    extras: {},\n    matchType: candidate.matchType ?? null,\n    relevanceScore: candidate.relevanceScore ?? null,\n  };\n}\n\nexport function normalizeRealtimeSearchHits(incoming: unknown[]): SearchHit[] {\n  return incoming\n    .map(normalizeSearchHit)\n    .filter((item): item is SearchHit => item !== null);\n}\n\nexport function mergeSearchHits(existingHits: SearchHit[], incomingHits: SearchHit[]): SearchHit[] {\n  const merged = new Map(existingHits.map((hit) => [hit.id, hit]));\n  for (const candidate of incomingHits) {\n    if (!merged.has(candidate.id)) {\n      merged.set(candidate.id, candidate);\n    }\n  }\n  return Array.from(merged.values());\n}\n","(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.StompJs = {}));\n})(this, (function (exports) { 'use strict';\n\n    /**\n     * @internal\n     */\n    function augmentWebsocket(webSocket, debug) {\n        webSocket.terminate = function () {\n            const noOp = () => { };\n            // set all callbacks to no op\n            this.onerror = noOp;\n            this.onmessage = noOp;\n            this.onopen = noOp;\n            const ts = new Date();\n            const id = Math.random().toString().substring(2, 8); // A simulated id\n            const origOnClose = this.onclose;\n            // Track delay in actual closure of the socket\n            this.onclose = closeEvent => {\n                const delay = new Date().getTime() - ts.getTime();\n                debug(`Discarded socket (#${id})  closed after ${delay}ms, with code/reason: ${closeEvent.code}/${closeEvent.reason}`);\n            };\n            this.close();\n            origOnClose?.call(webSocket, {\n                code: 4001,\n                reason: `Quick discarding socket (#${id}) without waiting for the shutdown sequence.`,\n                wasClean: false,\n            });\n        };\n    }\n\n    /**\n     * Some byte values, used as per STOMP specifications.\n     *\n     * Part of `@stomp/stompjs`.\n     *\n     * @internal\n     */\n    const BYTE = {\n        // LINEFEED byte (octet 10)\n        LF: '\\x0A',\n        // NULL byte (octet 0)\n        NULL: '\\x00',\n    };\n\n    /**\n     * Frame class represents a STOMP frame.\n     *\n     * @internal\n     */\n    class FrameImpl {\n        /**\n         * body of the frame\n         */\n        get body() {\n            if (!this._body && this.isBinaryBody) {\n                this._body = new TextDecoder().decode(this._binaryBody);\n            }\n            return this._body || '';\n        }\n        /**\n         * body as Uint8Array\n         */\n        get binaryBody() {\n            if (!this._binaryBody && !this.isBinaryBody) {\n                this._binaryBody = new TextEncoder().encode(this._body);\n            }\n            // At this stage it will definitely have a valid value\n            return this._binaryBody;\n        }\n        /**\n         * Frame constructor. `command`, `headers` and `body` are available as properties.\n         *\n         * @internal\n         */\n        constructor(params) {\n            const { command, headers, body, binaryBody, escapeHeaderValues, skipContentLengthHeader, } = params;\n            this.command = command;\n            this.headers = Object.assign({}, headers || {});\n            if (binaryBody) {\n                this._binaryBody = binaryBody;\n                this.isBinaryBody = true;\n            }\n            else {\n                this._body = body || '';\n                this.isBinaryBody = false;\n            }\n            this.escapeHeaderValues = escapeHeaderValues || false;\n            this.skipContentLengthHeader = skipContentLengthHeader || false;\n        }\n        /**\n         * deserialize a STOMP Frame from raw data.\n         *\n         * @internal\n         */\n        static fromRawFrame(rawFrame, escapeHeaderValues) {\n            const headers = {};\n            const trim = (str) => str.replace(/^\\s+|\\s+$/g, '');\n            // In case of repeated headers, as per standards, first value need to be used\n            for (const header of rawFrame.headers.reverse()) {\n                header.indexOf(':');\n                const key = trim(header[0]);\n                let value = trim(header[1]);\n                if (escapeHeaderValues &&\n                    rawFrame.command !== 'CONNECT' &&\n                    rawFrame.command !== 'CONNECTED') {\n                    value = FrameImpl.hdrValueUnEscape(value);\n                }\n                headers[key] = value;\n            }\n            return new FrameImpl({\n                command: rawFrame.command,\n                headers,\n                binaryBody: rawFrame.binaryBody,\n                escapeHeaderValues,\n            });\n        }\n        /**\n         * @internal\n         */\n        toString() {\n            return this.serializeCmdAndHeaders();\n        }\n        /**\n         * serialize this Frame in a format suitable to be passed to WebSocket.\n         * If the body is string the output will be string.\n         * If the body is binary (i.e. of type Unit8Array) it will be serialized to ArrayBuffer.\n         *\n         * @internal\n         */\n        serialize() {\n            const cmdAndHeaders = this.serializeCmdAndHeaders();\n            if (this.isBinaryBody) {\n                return FrameImpl.toUnit8Array(cmdAndHeaders, this._binaryBody).buffer;\n            }\n            else {\n                return cmdAndHeaders + this._body + BYTE.NULL;\n            }\n        }\n        serializeCmdAndHeaders() {\n            const lines = [this.command];\n            if (this.skipContentLengthHeader) {\n                delete this.headers['content-length'];\n            }\n            for (const name of Object.keys(this.headers || {})) {\n                const value = this.headers[name];\n                if (this.escapeHeaderValues &&\n                    this.command !== 'CONNECT' &&\n                    this.command !== 'CONNECTED') {\n                    lines.push(`${name}:${FrameImpl.hdrValueEscape(`${value}`)}`);\n                }\n                else {\n                    lines.push(`${name}:${value}`);\n                }\n            }\n            if (this.isBinaryBody ||\n                (!this.isBodyEmpty() && !this.skipContentLengthHeader)) {\n                lines.push(`content-length:${this.bodyLength()}`);\n            }\n            return lines.join(BYTE.LF) + BYTE.LF + BYTE.LF;\n        }\n        isBodyEmpty() {\n            return this.bodyLength() === 0;\n        }\n        bodyLength() {\n            const binaryBody = this.binaryBody;\n            return binaryBody ? binaryBody.length : 0;\n        }\n        /**\n         * Compute the size of a UTF-8 string by counting its number of bytes\n         * (and not the number of characters composing the string)\n         */\n        static sizeOfUTF8(s) {\n            return s ? new TextEncoder().encode(s).length : 0;\n        }\n        static toUnit8Array(cmdAndHeaders, binaryBody) {\n            const uint8CmdAndHeaders = new TextEncoder().encode(cmdAndHeaders);\n            const nullTerminator = new Uint8Array([0]);\n            const uint8Frame = new Uint8Array(uint8CmdAndHeaders.length + binaryBody.length + nullTerminator.length);\n            uint8Frame.set(uint8CmdAndHeaders);\n            uint8Frame.set(binaryBody, uint8CmdAndHeaders.length);\n            uint8Frame.set(nullTerminator, uint8CmdAndHeaders.length + binaryBody.length);\n            return uint8Frame;\n        }\n        /**\n         * Serialize a STOMP frame as per STOMP standards, suitable to be sent to the STOMP broker.\n         *\n         * @internal\n         */\n        static marshall(params) {\n            const frame = new FrameImpl(params);\n            return frame.serialize();\n        }\n        /**\n         *  Escape header values\n         */\n        static hdrValueEscape(str) {\n            return str\n                .replace(/\\\\/g, '\\\\\\\\')\n                .replace(/\\r/g, '\\\\r')\n                .replace(/\\n/g, '\\\\n')\n                .replace(/:/g, '\\\\c');\n        }\n        /**\n         * UnEscape header values\n         */\n        static hdrValueUnEscape(str) {\n            return str\n                .replace(/\\\\r/g, '\\r')\n                .replace(/\\\\n/g, '\\n')\n                .replace(/\\\\c/g, ':')\n                .replace(/\\\\\\\\/g, '\\\\');\n        }\n    }\n\n    /**\n     * @internal\n     */\n    const NULL = 0;\n    /**\n     * @internal\n     */\n    const LF = 10;\n    /**\n     * @internal\n     */\n    const CR = 13;\n    /**\n     * @internal\n     */\n    const COLON = 58;\n    /**\n     * This is an evented, rec descent parser.\n     * A stream of Octets can be passed and whenever it recognizes\n     * a complete Frame or an incoming ping it will invoke the registered callbacks.\n     *\n     * All incoming Octets are fed into _onByte function.\n     * Depending on current state the _onByte function keeps changing.\n     * Depending on the state it keeps accumulating into _token and _results.\n     * State is indicated by current value of _onByte, all states are named as _collect.\n     *\n     * STOMP standards https://stomp.github.io/stomp-specification-1.2.html\n     * imply that all lengths are considered in bytes (instead of string lengths).\n     * So, before actual parsing, if the incoming data is String it is converted to Octets.\n     * This allows faithful implementation of the protocol and allows NULL Octets to be present in the body.\n     *\n     * There is no peek function on the incoming data.\n     * When a state change occurs based on an Octet without consuming the Octet,\n     * the Octet, after state change, is fed again (_reinjectByte).\n     * This became possible as the state change can be determined by inspecting just one Octet.\n     *\n     * There are two modes to collect the body, if content-length header is there then it by counting Octets\n     * otherwise it is determined by NULL terminator.\n     *\n     * Following the standards, the command and headers are converted to Strings\n     * and the body is returned as Octets.\n     * Headers are returned as an array and not as Hash - to allow multiple occurrence of an header.\n     *\n     * This parser does not use Regular Expressions as that can only operate on Strings.\n     *\n     * It handles if multiple STOMP frames are given as one chunk, a frame is split into multiple chunks, or\n     * any combination there of. The parser remembers its state (any partial frame) and continues when a new chunk\n     * is pushed.\n     *\n     * Typically the higher level function will convert headers to Hash, handle unescaping of header values\n     * (which is protocol version specific), and convert body to text.\n     *\n     * Check the parser.spec.js to understand cases that this parser is supposed to handle.\n     *\n     * Part of `@stomp/stompjs`.\n     *\n     * @internal\n     */\n    class Parser {\n        constructor(onFrame, onIncomingPing) {\n            this.onFrame = onFrame;\n            this.onIncomingPing = onIncomingPing;\n            this._encoder = new TextEncoder();\n            this._decoder = new TextDecoder();\n            this._token = [];\n            this._initState();\n        }\n        parseChunk(segment, appendMissingNULLonIncoming = false) {\n            let chunk;\n            if (typeof segment === 'string') {\n                chunk = this._encoder.encode(segment);\n            }\n            else {\n                chunk = new Uint8Array(segment);\n            }\n            // See https://github.com/stomp-js/stompjs/issues/89\n            // Remove when underlying issue is fixed.\n            //\n            // Send a NULL byte, if the last byte of a Text frame was not NULL.F\n            if (appendMissingNULLonIncoming && chunk[chunk.length - 1] !== 0) {\n                const chunkWithNull = new Uint8Array(chunk.length + 1);\n                chunkWithNull.set(chunk, 0);\n                chunkWithNull[chunk.length] = 0;\n                chunk = chunkWithNull;\n            }\n            // tslint:disable-next-line:prefer-for-of\n            for (let i = 0; i < chunk.length; i++) {\n                const byte = chunk[i];\n                this._onByte(byte);\n            }\n        }\n        // The following implements a simple Rec Descent Parser.\n        // The grammar is simple and just one byte tells what should be the next state\n        _collectFrame(byte) {\n            if (byte === NULL) {\n                // Ignore\n                return;\n            }\n            if (byte === CR) {\n                // Ignore CR\n                return;\n            }\n            if (byte === LF) {\n                // Incoming Ping\n                this.onIncomingPing();\n                return;\n            }\n            this._onByte = this._collectCommand;\n            this._reinjectByte(byte);\n        }\n        _collectCommand(byte) {\n            if (byte === CR) {\n                // Ignore CR\n                return;\n            }\n            if (byte === LF) {\n                this._results.command = this._consumeTokenAsUTF8();\n                this._onByte = this._collectHeaders;\n                return;\n            }\n            this._consumeByte(byte);\n        }\n        _collectHeaders(byte) {\n            if (byte === CR) {\n                // Ignore CR\n                return;\n            }\n            if (byte === LF) {\n                this._setupCollectBody();\n                return;\n            }\n            this._onByte = this._collectHeaderKey;\n            this._reinjectByte(byte);\n        }\n        _reinjectByte(byte) {\n            this._onByte(byte);\n        }\n        _collectHeaderKey(byte) {\n            if (byte === COLON) {\n                this._headerKey = this._consumeTokenAsUTF8();\n                this._onByte = this._collectHeaderValue;\n                return;\n            }\n            this._consumeByte(byte);\n        }\n        _collectHeaderValue(byte) {\n            if (byte === CR) {\n                // Ignore CR\n                return;\n            }\n            if (byte === LF) {\n                this._results.headers.push([\n                    this._headerKey,\n                    this._consumeTokenAsUTF8(),\n                ]);\n                this._headerKey = undefined;\n                this._onByte = this._collectHeaders;\n                return;\n            }\n            this._consumeByte(byte);\n        }\n        _setupCollectBody() {\n            const contentLengthHeader = this._results.headers.filter((header) => {\n                return header[0] === 'content-length';\n            })[0];\n            if (contentLengthHeader) {\n                this._bodyBytesRemaining = parseInt(contentLengthHeader[1], 10);\n                this._onByte = this._collectBodyFixedSize;\n            }\n            else {\n                this._onByte = this._collectBodyNullTerminated;\n            }\n        }\n        _collectBodyNullTerminated(byte) {\n            if (byte === NULL) {\n                this._retrievedBody();\n                return;\n            }\n            this._consumeByte(byte);\n        }\n        _collectBodyFixedSize(byte) {\n            // It is post decrement, so that we discard the trailing NULL octet\n            if (this._bodyBytesRemaining-- === 0) {\n                this._retrievedBody();\n                return;\n            }\n            this._consumeByte(byte);\n        }\n        _retrievedBody() {\n            this._results.binaryBody = this._consumeTokenAsRaw();\n            try {\n                this.onFrame(this._results);\n            }\n            catch (e) {\n                console.log(`Ignoring an exception thrown by a frame handler. Original exception: `, e);\n            }\n            this._initState();\n        }\n        // Rec Descent Parser helpers\n        _consumeByte(byte) {\n            this._token.push(byte);\n        }\n        _consumeTokenAsUTF8() {\n            return this._decoder.decode(this._consumeTokenAsRaw());\n        }\n        _consumeTokenAsRaw() {\n            const rawResult = new Uint8Array(this._token);\n            this._token = [];\n            return rawResult;\n        }\n        _initState() {\n            this._results = {\n                command: undefined,\n                headers: [],\n                binaryBody: undefined,\n            };\n            this._token = [];\n            this._headerKey = undefined;\n            this._onByte = this._collectFrame;\n        }\n    }\n\n    /**\n     * Possible states for the IStompSocket\n     */\n    exports.StompSocketState = void 0;\n    (function (StompSocketState) {\n        StompSocketState[StompSocketState[\"CONNECTING\"] = 0] = \"CONNECTING\";\n        StompSocketState[StompSocketState[\"OPEN\"] = 1] = \"OPEN\";\n        StompSocketState[StompSocketState[\"CLOSING\"] = 2] = \"CLOSING\";\n        StompSocketState[StompSocketState[\"CLOSED\"] = 3] = \"CLOSED\";\n    })(exports.StompSocketState || (exports.StompSocketState = {}));\n    /**\n     * Possible activation state\n     */\n    exports.ActivationState = void 0;\n    (function (ActivationState) {\n        ActivationState[ActivationState[\"ACTIVE\"] = 0] = \"ACTIVE\";\n        ActivationState[ActivationState[\"DEACTIVATING\"] = 1] = \"DEACTIVATING\";\n        ActivationState[ActivationState[\"INACTIVE\"] = 2] = \"INACTIVE\";\n    })(exports.ActivationState || (exports.ActivationState = {}));\n    /**\n     * Possible reconnection wait time modes\n     */\n    exports.ReconnectionTimeMode = void 0;\n    (function (ReconnectionTimeMode) {\n        ReconnectionTimeMode[ReconnectionTimeMode[\"LINEAR\"] = 0] = \"LINEAR\";\n        ReconnectionTimeMode[ReconnectionTimeMode[\"EXPONENTIAL\"] = 1] = \"EXPONENTIAL\";\n    })(exports.ReconnectionTimeMode || (exports.ReconnectionTimeMode = {}));\n    /**\n     * Possible ticker strategies for outgoing heartbeat ping\n     */\n    exports.TickerStrategy = void 0;\n    (function (TickerStrategy) {\n        TickerStrategy[\"Interval\"] = \"interval\";\n        TickerStrategy[\"Worker\"] = \"worker\";\n    })(exports.TickerStrategy || (exports.TickerStrategy = {}));\n\n    class Ticker {\n        constructor(_interval, _strategy = exports.TickerStrategy.Interval, _debug) {\n            this._interval = _interval;\n            this._strategy = _strategy;\n            this._debug = _debug;\n            this._workerScript = `\n    var startTime = Date.now();\n    setInterval(function() {\n        self.postMessage(Date.now() - startTime);\n    }, ${this._interval});\n  `;\n        }\n        start(tick) {\n            this.stop();\n            if (this.shouldUseWorker()) {\n                this.runWorker(tick);\n            }\n            else {\n                this.runInterval(tick);\n            }\n        }\n        stop() {\n            this.disposeWorker();\n            this.disposeInterval();\n        }\n        shouldUseWorker() {\n            return (typeof Worker !== 'undefined' && this._strategy === exports.TickerStrategy.Worker);\n        }\n        runWorker(tick) {\n            this._debug('Using runWorker for outgoing pings');\n            if (!this._worker) {\n                this._worker = new Worker(URL.createObjectURL(new Blob([this._workerScript], { type: 'text/javascript' })));\n                this._worker.onmessage = message => tick(message.data);\n            }\n        }\n        runInterval(tick) {\n            this._debug('Using runInterval for outgoing pings');\n            if (!this._timer) {\n                const startTime = Date.now();\n                this._timer = setInterval(() => {\n                    tick(Date.now() - startTime);\n                }, this._interval);\n            }\n        }\n        disposeWorker() {\n            if (this._worker) {\n                this._worker.terminate();\n                delete this._worker;\n                this._debug('Outgoing ping disposeWorker');\n            }\n        }\n        disposeInterval() {\n            if (this._timer) {\n                clearInterval(this._timer);\n                delete this._timer;\n                this._debug('Outgoing ping disposeInterval');\n            }\n        }\n    }\n\n    /**\n     * Supported STOMP versions\n     *\n     * Part of `@stomp/stompjs`.\n     */\n    class Versions {\n        /**\n         * Takes an array of versions, typical elements '1.2', '1.1', or '1.0'\n         *\n         * You will be creating an instance of this class if you want to override\n         * supported versions to be declared during STOMP handshake.\n         */\n        constructor(versions) {\n            this.versions = versions;\n        }\n        /**\n         * Used as part of CONNECT STOMP Frame\n         */\n        supportedVersions() {\n            return this.versions.join(',');\n        }\n        /**\n         * Used while creating a WebSocket\n         */\n        protocolVersions() {\n            return this.versions.map(x => `v${x.replace('.', '')}.stomp`);\n        }\n    }\n    /**\n     * Indicates protocol version 1.0\n     */\n    Versions.V1_0 = '1.0';\n    /**\n     * Indicates protocol version 1.1\n     */\n    Versions.V1_1 = '1.1';\n    /**\n     * Indicates protocol version 1.2\n     */\n    Versions.V1_2 = '1.2';\n    /**\n     * @internal\n     */\n    Versions.default = new Versions([\n        Versions.V1_2,\n        Versions.V1_1,\n        Versions.V1_0,\n    ]);\n\n    /**\n     * The STOMP protocol handler\n     *\n     * Part of `@stomp/stompjs`.\n     *\n     * @internal\n     */\n    class StompHandler {\n        get connectedVersion() {\n            return this._connectedVersion;\n        }\n        get connected() {\n            return this._connected;\n        }\n        constructor(_client, _webSocket, config) {\n            this._client = _client;\n            this._webSocket = _webSocket;\n            this._connected = false;\n            this._serverFrameHandlers = {\n                // [CONNECTED Frame](https://stomp.github.com/stomp-specification-1.2.html#CONNECTED_Frame)\n                CONNECTED: frame => {\n                    this.debug(`connected to server ${frame.headers.server}`);\n                    this._connected = true;\n                    this._connectedVersion = frame.headers.version;\n                    // STOMP version 1.2 needs header values to be escaped\n                    if (this._connectedVersion === Versions.V1_2) {\n                        this._escapeHeaderValues = true;\n                    }\n                    this._setupHeartbeat(frame.headers);\n                    this.onConnect(frame);\n                },\n                // [MESSAGE Frame](https://stomp.github.com/stomp-specification-1.2.html#MESSAGE)\n                MESSAGE: frame => {\n                    // the callback is registered when the client calls\n                    // `subscribe()`.\n                    // If there is no registered subscription for the received message,\n                    // the default `onUnhandledMessage` callback is used that the client can set.\n                    // This is useful for subscriptions that are automatically created\n                    // on the browser side (e.g. [RabbitMQ's temporary\n                    // queues](https://www.rabbitmq.com/stomp.html)).\n                    const subscription = frame.headers.subscription;\n                    const onReceive = this._subscriptions[subscription] || this.onUnhandledMessage;\n                    // bless the frame to be a Message\n                    const message = frame;\n                    const client = this;\n                    const messageId = this._connectedVersion === Versions.V1_2\n                        ? message.headers.ack\n                        : message.headers['message-id'];\n                    // add `ack()` and `nack()` methods directly to the returned frame\n                    // so that a simple call to `message.ack()` can acknowledge the message.\n                    message.ack = (headers = {}) => {\n                        return client.ack(messageId, subscription, headers);\n                    };\n                    message.nack = (headers = {}) => {\n                        return client.nack(messageId, subscription, headers);\n                    };\n                    onReceive(message);\n                },\n                // [RECEIPT Frame](https://stomp.github.com/stomp-specification-1.2.html#RECEIPT)\n                RECEIPT: frame => {\n                    const callback = this._receiptWatchers[frame.headers['receipt-id']];\n                    if (callback) {\n                        callback(frame);\n                        // Server will acknowledge only once, remove the callback\n                        delete this._receiptWatchers[frame.headers['receipt-id']];\n                    }\n                    else {\n                        this.onUnhandledReceipt(frame);\n                    }\n                },\n                // [ERROR Frame](https://stomp.github.com/stomp-specification-1.2.html#ERROR)\n                ERROR: frame => {\n                    this.onStompError(frame);\n                },\n            };\n            // used to index subscribers\n            this._counter = 0;\n            // subscription callbacks indexed by subscriber's ID\n            this._subscriptions = {};\n            // receipt-watchers indexed by receipts-ids\n            this._receiptWatchers = {};\n            this._partialData = '';\n            this._escapeHeaderValues = false;\n            this._lastServerActivityTS = Date.now();\n            this.debug = config.debug;\n            this.stompVersions = config.stompVersions;\n            this.connectHeaders = config.connectHeaders;\n            this.disconnectHeaders = config.disconnectHeaders;\n            this.heartbeatIncoming = config.heartbeatIncoming;\n            this.heartbeatToleranceMultiplier = config.heartbeatGracePeriods;\n            this.heartbeatOutgoing = config.heartbeatOutgoing;\n            this.splitLargeFrames = config.splitLargeFrames;\n            this.maxWebSocketChunkSize = config.maxWebSocketChunkSize;\n            this.forceBinaryWSFrames = config.forceBinaryWSFrames;\n            this.logRawCommunication = config.logRawCommunication;\n            this.appendMissingNULLonIncoming = config.appendMissingNULLonIncoming;\n            this.discardWebsocketOnCommFailure = config.discardWebsocketOnCommFailure;\n            this.onConnect = config.onConnect;\n            this.onDisconnect = config.onDisconnect;\n            this.onStompError = config.onStompError;\n            this.onWebSocketClose = config.onWebSocketClose;\n            this.onWebSocketError = config.onWebSocketError;\n            this.onUnhandledMessage = config.onUnhandledMessage;\n            this.onUnhandledReceipt = config.onUnhandledReceipt;\n            this.onUnhandledFrame = config.onUnhandledFrame;\n            this.onHeartbeatReceived = config.onHeartbeatReceived;\n            this.onHeartbeatLost = config.onHeartbeatLost;\n        }\n        start() {\n            const parser = new Parser(\n            // On Frame\n            rawFrame => {\n                const frame = FrameImpl.fromRawFrame(rawFrame, this._escapeHeaderValues);\n                // if this.logRawCommunication is set, the rawChunk is logged at this._webSocket.onmessage\n                if (!this.logRawCommunication) {\n                    this.debug(`<<< ${frame}`);\n                }\n                const serverFrameHandler = this._serverFrameHandlers[frame.command] || this.onUnhandledFrame;\n                serverFrameHandler(frame);\n            }, \n            // On Incoming Ping\n            () => {\n                this.debug('<<< PONG');\n                this.onHeartbeatReceived();\n            });\n            this._webSocket.onmessage = (evt) => {\n                this.debug('Received data');\n                this._lastServerActivityTS = Date.now();\n                if (this.logRawCommunication) {\n                    const rawChunkAsString = evt.data instanceof ArrayBuffer\n                        ? new TextDecoder().decode(evt.data)\n                        : evt.data;\n                    this.debug(`<<< ${rawChunkAsString}`);\n                }\n                parser.parseChunk(evt.data, this.appendMissingNULLonIncoming);\n            };\n            this._webSocket.onclose = (closeEvent) => {\n                this.debug(`Connection closed to ${this._webSocket.url}`);\n                this._cleanUp();\n                this.onWebSocketClose(closeEvent);\n            };\n            this._webSocket.onerror = (errorEvent) => {\n                this.onWebSocketError(errorEvent);\n            };\n            const onOpen = () => {\n                // Clone before updating\n                const connectHeaders = Object.assign({}, this.connectHeaders);\n                this.debug('Web Socket Opened...');\n                connectHeaders['accept-version'] = this.stompVersions.supportedVersions();\n                connectHeaders['heart-beat'] = [\n                    this.heartbeatOutgoing,\n                    this.heartbeatIncoming,\n                ].join(',');\n                this._transmit({ command: 'CONNECT', headers: connectHeaders });\n            };\n            if (this._webSocket.readyState === exports.StompSocketState.OPEN) {\n                onOpen();\n            }\n            else {\n                this._webSocket.onopen = onOpen;\n            }\n        }\n        _setupHeartbeat(headers) {\n            if (headers.version !== Versions.V1_1 &&\n                headers.version !== Versions.V1_2) {\n                return;\n            }\n            // It is valid for the server to not send this header\n            // https://stomp.github.io/stomp-specification-1.2.html#Heart-beating\n            if (!headers['heart-beat']) {\n                return;\n            }\n            // heart-beat header received from the server looks like:\n            //\n            //     heart-beat: sx, sy\n            const [serverOutgoing, serverIncoming] = headers['heart-beat']\n                .split(',')\n                .map((v) => parseInt(v, 10));\n            if (this.heartbeatOutgoing !== 0 && serverIncoming !== 0) {\n                const ttl = Math.max(this.heartbeatOutgoing, serverIncoming);\n                this.debug(`send PING every ${ttl}ms`);\n                this._pinger = new Ticker(ttl, this._client.heartbeatStrategy, this.debug);\n                this._pinger.start(() => {\n                    if (this._webSocket.readyState === exports.StompSocketState.OPEN) {\n                        this._webSocket.send(BYTE.LF);\n                        this.debug('>>> PING');\n                    }\n                });\n            }\n            if (this.heartbeatIncoming !== 0 && serverOutgoing !== 0) {\n                const ttl = Math.max(this.heartbeatIncoming, serverOutgoing);\n                this.debug(`check PONG every ${ttl}ms`);\n                this._ponger = setInterval(() => {\n                    const delta = Date.now() - this._lastServerActivityTS;\n                    // We wait multiple grace periods to be flexible on window's setInterval calls\n                    if (delta > ttl * this.heartbeatToleranceMultiplier) {\n                        this.debug(`did not receive server activity for the last ${delta}ms`);\n                        this.onHeartbeatLost();\n                        this._closeOrDiscardWebsocket();\n                    }\n                }, ttl);\n            }\n        }\n        _closeOrDiscardWebsocket() {\n            if (this.discardWebsocketOnCommFailure) {\n                this.debug('Discarding websocket, the underlying socket may linger for a while');\n                this.discardWebsocket();\n            }\n            else {\n                this.debug('Issuing close on the websocket');\n                this._closeWebsocket();\n            }\n        }\n        forceDisconnect() {\n            if (this._webSocket) {\n                if (this._webSocket.readyState === exports.StompSocketState.CONNECTING ||\n                    this._webSocket.readyState === exports.StompSocketState.OPEN) {\n                    this._closeOrDiscardWebsocket();\n                }\n            }\n        }\n        _closeWebsocket() {\n            this._webSocket.onmessage = () => { }; // ignore messages\n            this._webSocket.close();\n        }\n        discardWebsocket() {\n            if (typeof this._webSocket.terminate !== 'function') {\n                augmentWebsocket(this._webSocket, (msg) => this.debug(msg));\n            }\n            // @ts-ignore - this method will be there at this stage\n            this._webSocket.terminate();\n        }\n        _transmit(params) {\n            const { command, headers, body, binaryBody, skipContentLengthHeader } = params;\n            const frame = new FrameImpl({\n                command,\n                headers,\n                body,\n                binaryBody,\n                escapeHeaderValues: this._escapeHeaderValues,\n                skipContentLengthHeader,\n            });\n            let rawChunk = frame.serialize();\n            if (this.logRawCommunication) {\n                this.debug(`>>> ${rawChunk}`);\n            }\n            else {\n                this.debug(`>>> ${frame}`);\n            }\n            if (this.forceBinaryWSFrames && typeof rawChunk === 'string') {\n                rawChunk = new TextEncoder().encode(rawChunk);\n            }\n            if (typeof rawChunk !== 'string' || !this.splitLargeFrames) {\n                this._webSocket.send(rawChunk);\n            }\n            else {\n                let out = rawChunk;\n                while (out.length > 0) {\n                    const chunk = out.substring(0, this.maxWebSocketChunkSize);\n                    out = out.substring(this.maxWebSocketChunkSize);\n                    this._webSocket.send(chunk);\n                    this.debug(`chunk sent = ${chunk.length}, remaining = ${out.length}`);\n                }\n            }\n        }\n        dispose() {\n            if (this.connected) {\n                try {\n                    // clone before updating\n                    const disconnectHeaders = Object.assign({}, this.disconnectHeaders);\n                    if (!disconnectHeaders.receipt) {\n                        disconnectHeaders.receipt = `close-${this._counter++}`;\n                    }\n                    this.watchForReceipt(disconnectHeaders.receipt, frame => {\n                        this._closeWebsocket();\n                        this._cleanUp();\n                        this.onDisconnect(frame);\n                    });\n                    this._transmit({ command: 'DISCONNECT', headers: disconnectHeaders });\n                }\n                catch (error) {\n                    this.debug(`Ignoring error during disconnect ${error}`);\n                }\n            }\n            else {\n                if (this._webSocket.readyState === exports.StompSocketState.CONNECTING ||\n                    this._webSocket.readyState === exports.StompSocketState.OPEN) {\n                    this._closeWebsocket();\n                }\n            }\n        }\n        _cleanUp() {\n            this._connected = false;\n            if (this._pinger) {\n                this._pinger.stop();\n                this._pinger = undefined;\n            }\n            if (this._ponger) {\n                clearInterval(this._ponger);\n                this._ponger = undefined;\n            }\n        }\n        publish(params) {\n            const { destination, headers, body, binaryBody, skipContentLengthHeader } = params;\n            const hdrs = Object.assign({ destination }, headers);\n            this._transmit({\n                command: 'SEND',\n                headers: hdrs,\n                body,\n                binaryBody,\n                skipContentLengthHeader,\n            });\n        }\n        watchForReceipt(receiptId, callback) {\n            this._receiptWatchers[receiptId] = callback;\n        }\n        subscribe(destination, callback, headers = {}) {\n            headers = Object.assign({}, headers);\n            if (!headers.id) {\n                headers.id = `sub-${this._counter++}`;\n            }\n            headers.destination = destination;\n            this._subscriptions[headers.id] = callback;\n            this._transmit({ command: 'SUBSCRIBE', headers });\n            const client = this;\n            return {\n                id: headers.id,\n                unsubscribe(hdrs) {\n                    return client.unsubscribe(headers.id, hdrs);\n                },\n            };\n        }\n        unsubscribe(id, headers = {}) {\n            headers = Object.assign({}, headers);\n            delete this._subscriptions[id];\n            headers.id = id;\n            this._transmit({ command: 'UNSUBSCRIBE', headers });\n        }\n        begin(transactionId) {\n            const txId = transactionId || `tx-${this._counter++}`;\n            this._transmit({\n                command: 'BEGIN',\n                headers: {\n                    transaction: txId,\n                },\n            });\n            const client = this;\n            return {\n                id: txId,\n                commit() {\n                    client.commit(txId);\n                },\n                abort() {\n                    client.abort(txId);\n                },\n            };\n        }\n        commit(transactionId) {\n            this._transmit({\n                command: 'COMMIT',\n                headers: {\n                    transaction: transactionId,\n                },\n            });\n        }\n        abort(transactionId) {\n            this._transmit({\n                command: 'ABORT',\n                headers: {\n                    transaction: transactionId,\n                },\n            });\n        }\n        ack(messageId, subscriptionId, headers = {}) {\n            headers = Object.assign({}, headers);\n            if (this._connectedVersion === Versions.V1_2) {\n                headers.id = messageId;\n            }\n            else {\n                headers['message-id'] = messageId;\n            }\n            headers.subscription = subscriptionId;\n            this._transmit({ command: 'ACK', headers });\n        }\n        nack(messageId, subscriptionId, headers = {}) {\n            headers = Object.assign({}, headers);\n            if (this._connectedVersion === Versions.V1_2) {\n                headers.id = messageId;\n            }\n            else {\n                headers['message-id'] = messageId;\n            }\n            headers.subscription = subscriptionId;\n            return this._transmit({ command: 'NACK', headers });\n        }\n    }\n\n    /**\n     * STOMP Client Class.\n     *\n     * Part of `@stomp/stompjs`.\n     *\n     * This class provides a robust implementation for connecting to and interacting with a\n     * STOMP-compliant messaging broker over WebSocket. It supports STOMP versions 1.2, 1.1, and 1.0.\n     *\n     * Features:\n     * - Handles automatic reconnections.\n     * - Supports heartbeat mechanisms to detect and report communication failures.\n     * - Allows customization of connection and WebSocket behaviors through configurations.\n     * - Compatible with both browser environments and Node.js with polyfill support for WebSocket.\n     */\n    class Client {\n        /**\n         * Provides access to the underlying WebSocket instance.\n         * This property is **read-only**.\n         *\n         * Example:\n         * ```javascript\n         * const webSocket = client.webSocket;\n         * if (webSocket) {\n         *   console.log('WebSocket is connected:', webSocket.readyState === WebSocket.OPEN);\n         * }\n         * ```\n         *\n         * **Caution:**\n         * Directly interacting with the WebSocket instance (e.g., sending or receiving frames)\n         * can interfere with the proper functioning of this library. Such actions may cause\n         * unexpected behavior, disconnections, or invalid state in the library's internal mechanisms.\n         *\n         * Instead, use the library's provided methods to manage STOMP communication.\n         *\n         * @returns The WebSocket instance used by the STOMP handler, or `undefined` if not connected.\n         */\n        get webSocket() {\n            return this._stompHandler?._webSocket;\n        }\n        /**\n         * Allows customization of the disconnection headers.\n         *\n         * Any changes made during an active session will also be applied immediately.\n         *\n         * Example:\n         * ```javascript\n         * client.disconnectHeaders = {\n         *   receipt: 'custom-receipt-id'\n         * };\n         * ```\n         */\n        get disconnectHeaders() {\n            return this._disconnectHeaders;\n        }\n        set disconnectHeaders(value) {\n            this._disconnectHeaders = value;\n            if (this._stompHandler) {\n                this._stompHandler.disconnectHeaders = this._disconnectHeaders;\n            }\n        }\n        /**\n         * Indicates whether there is an active connection to the STOMP broker.\n         *\n         * Usage:\n         * ```javascript\n         * if (client.connected) {\n         *   console.log('Client is connected to the broker.');\n         * } else {\n         *   console.log('No connection to the broker.');\n         * }\n         * ```\n         *\n         * @returns `true` if the client is currently connected, `false` otherwise.\n         */\n        get connected() {\n            return !!this._stompHandler && this._stompHandler.connected;\n        }\n        /**\n         * The version of the STOMP protocol negotiated with the server during connection.\n         *\n         * This is a **read-only** property and reflects the negotiated protocol version after\n         * a successful connection.\n         *\n         * Example:\n         * ```javascript\n         * console.log('Connected STOMP version:', client.connectedVersion);\n         * ```\n         *\n         * @returns The negotiated STOMP protocol version or `undefined` if not connected.\n         */\n        get connectedVersion() {\n            return this._stompHandler ? this._stompHandler.connectedVersion : undefined;\n        }\n        /**\n         * Indicates whether the client is currently active.\n         *\n         * A client is considered active if it is connected or actively attempting to reconnect.\n         *\n         * Example:\n         * ```javascript\n         * if (client.active) {\n         *   console.log('The client is active.');\n         * } else {\n         *   console.log('The client is inactive.');\n         * }\n         * ```\n         *\n         * @returns `true` if the client is active, otherwise `false`.\n         */\n        get active() {\n            return this.state === exports.ActivationState.ACTIVE;\n        }\n        _changeState(state) {\n            this.state = state;\n            this.onChangeState(state);\n        }\n        /**\n         * Constructs a new STOMP client instance.\n         *\n         * The constructor initializes default values and sets up no-op callbacks for all events.\n         * Configuration can be passed during construction, or updated later using `configure`.\n         *\n         * Example:\n         * ```javascript\n         * const client = new Client({\n         *   brokerURL: 'wss://broker.example.com',\n         *   reconnectDelay: 5000\n         * });\n         * ```\n         *\n         * @param conf Optional configuration object to initialize the client with.\n         */\n        constructor(conf = {}) {\n            /**\n             * STOMP protocol versions to use during the handshake. By default, the client will attempt\n             * versions `1.2`, `1.1`, and `1.0` in descending order of preference.\n             *\n             * Example:\n             * ```javascript\n             * // Configure the client to only use versions 1.1 and 1.0\n             * client.stompVersions = new Versions(['1.1', '1.0']);\n             * ```\n             */\n            this.stompVersions = Versions.default;\n            /**\n             * Timeout for establishing STOMP connection, in milliseconds.\n             *\n             * If the connection is not established within this period, the attempt will fail.\n             * The default is `0`, meaning no timeout is set for connection attempts.\n             *\n             * Example:\n             * ```javascript\n             * client.connectionTimeout = 5000; // Fail connection if not established in 5 seconds\n             * ```\n             */\n            this.connectionTimeout = 0;\n            /**\n             * Delay (in milliseconds) between reconnection attempts if the connection drops.\n             *\n             * Set to `0` to disable automatic reconnections. The default value is `5000` ms (5 seconds).\n             *\n             * Example:\n             * ```javascript\n             * client.reconnectDelay = 3000; // Attempt reconnection every 3 seconds\n             * client.reconnectDelay = 0; // Disable automatic reconnection\n             * ```\n             */\n            this.reconnectDelay = 5000;\n            /**\n             * The next reconnection delay, used internally.\n             * Initialized to the value of [Client#reconnectDelay]{@link Client#reconnectDelay}, and it may\n             * dynamically change based on [Client#reconnectTimeMode]{@link Client#reconnectTimeMode}.\n             */\n            this._nextReconnectDelay = 0;\n            /**\n             * Maximum delay (in milliseconds) between reconnection attempts when using exponential backoff.\n             *\n             * Default is 15 minutes (`15 * 60 * 1000` milliseconds). If `0`, there will be no upper limit.\n             *\n             * Example:\n             * ```javascript\n             * client.maxReconnectDelay = 10000; // Maximum wait time is 10 seconds\n             * ```\n             */\n            this.maxReconnectDelay = 15 * 60 * 1000;\n            /**\n             * Mode for determining the time interval between reconnection attempts.\n             *\n             * Available modes:\n             * - `ReconnectionTimeMode.LINEAR` (default): Fixed delays between reconnection attempts.\n             * - `ReconnectionTimeMode.EXPONENTIAL`: Delay doubles after each attempt, capped by [maxReconnectDelay]{@link Client#maxReconnectDelay}.\n             *\n             * Example:\n             * ```javascript\n             * client.reconnectTimeMode = ReconnectionTimeMode.EXPONENTIAL;\n             * client.reconnectDelay = 200; // Initial delay of 200 ms, doubles with each attempt\n             * client.maxReconnectDelay = 2 * 60 * 1000; // Cap delay at 10 minutes\n             * ```\n             */\n            this.reconnectTimeMode = exports.ReconnectionTimeMode.LINEAR;\n            /**\n             * Interval (in milliseconds) for receiving heartbeat signals from the server.\n             *\n             * Specifies the expected frequency of heartbeats sent by the server. Set to `0` to disable.\n             *\n             * Example:\n             * ```javascript\n             * client.heartbeatIncoming = 10000; // Expect a heartbeat every 10 seconds\n             * ```\n             */\n            this.heartbeatIncoming = 10000;\n            /**\n             * Multiplier for adjusting tolerance when processing heartbeat signals.\n             *\n             * Tolerance level is calculated using the multiplier:\n             * `tolerance = heartbeatIncoming * heartbeatToleranceMultiplier`.\n             * This helps account for delays in network communication or variations in timings.\n             *\n             * Default value is `2`.\n             *\n             * Example:\n             * ```javascript\n             * client.heartbeatToleranceMultiplier = 2.5; // Tolerates longer delays\n             * ```\n             */\n            this.heartbeatToleranceMultiplier = 2;\n            /**\n             * Interval (in milliseconds) for sending heartbeat signals to the server.\n             *\n             * Specifies how frequently heartbeats should be sent to the server. Set to `0` to disable.\n             *\n             * Example:\n             * ```javascript\n             * client.heartbeatOutgoing = 5000; // Send a heartbeat every 5 seconds\n             * ```\n             */\n            this.heartbeatOutgoing = 10000;\n            /**\n             * Strategy for sending outgoing heartbeats.\n             *\n             * Options:\n             * - `TickerStrategy.Worker`: Uses Web Workers for sending heartbeats (recommended for long-running or background sessions).\n             * - `TickerStrategy.Interval`: Uses standard JavaScript `setInterval` (default).\n             *\n             * Note:\n             * - If Web Workers are unavailable (e.g., in Node.js), the `Interval` strategy is used automatically.\n             * - Web Workers are preferable in browsers for reducing disconnects when tabs are in the background.\n             *\n             * Example:\n             * ```javascript\n             * client.heartbeatStrategy = TickerStrategy.Worker;\n             * ```\n             */\n            this.heartbeatStrategy = exports.TickerStrategy.Interval;\n            /**\n             * Enables splitting of large text WebSocket frames into smaller chunks.\n             *\n             * This setting is enabled for brokers that support only chunked messages (e.g., Java Spring-based brokers).\n             * Default is `false`.\n             *\n             * Warning:\n             * - Should not be used with WebSocket-compliant brokers, as chunking may cause large message failures.\n             * - Binary WebSocket frames are never split.\n             *\n             * Example:\n             * ```javascript\n             * client.splitLargeFrames = true;\n             * client.maxWebSocketChunkSize = 4096; // Allow chunks of 4 KB\n             * ```\n             */\n            this.splitLargeFrames = false;\n            /**\n             * Maximum size (in bytes) for individual WebSocket chunks if [splitLargeFrames]{@link Client#splitLargeFrames} is enabled.\n             *\n             * Default is 8 KB (`8 * 1024` bytes). This value has no effect if [splitLargeFrames]{@link Client#splitLargeFrames} is `false`.\n             */\n            this.maxWebSocketChunkSize = 8 * 1024;\n            /**\n             * Forces all WebSocket frames to use binary transport, irrespective of payload type.\n             *\n             * Default behavior determines frame type based on payload (e.g., binary data for ArrayBuffers).\n             *\n             * Example:\n             * ```javascript\n             * client.forceBinaryWSFrames = true;\n             * ```\n             */\n            this.forceBinaryWSFrames = false;\n            /**\n             * Workaround for a React Native WebSocket bug, where messages containing `NULL` are chopped.\n             *\n             * Enabling this appends a `NULL` character to incoming frames to ensure they remain valid STOMP packets.\n             *\n             * Warning:\n             * - For brokers that split large messages, this may cause data loss or connection termination.\n             *\n             * Example:\n             * ```javascript\n             * client.appendMissingNULLonIncoming = true;\n             * ```\n             */\n            this.appendMissingNULLonIncoming = false;\n            /**\n             * Instruct the library to immediately terminate the socket on communication failures, even\n             * before the WebSocket is completely closed.\n             *\n             * This is particularly useful in browser environments where WebSocket closure may get delayed,\n             * causing prolonged reconnection intervals under certain failure conditions.\n             *\n             *\n             * Example:\n             * ```javascript\n             * client.discardWebsocketOnCommFailure = true; // Enable aggressive closing of WebSocket\n             * ```\n             *\n             * Default value: `false`.\n             */\n            this.discardWebsocketOnCommFailure = false;\n            /**\n             * Current activation state of the client.\n             *\n             * Possible states:\n             * - `ActivationState.ACTIVE`: Client is connected or actively attempting to connect.\n             * - `ActivationState.INACTIVE`: Client is disconnected and not attempting to reconnect.\n             * - `ActivationState.DEACTIVATING`: Client is in the process of disconnecting.\n             *\n             * Note: The client may transition directly from `ACTIVE` to `INACTIVE` without entering\n             * the `DEACTIVATING` state.\n             */\n            this.state = exports.ActivationState.INACTIVE;\n            // No op callbacks\n            const noOp = () => { };\n            this.debug = noOp;\n            this.beforeConnect = noOp;\n            this.onConnect = noOp;\n            this.onDisconnect = noOp;\n            this.onUnhandledMessage = noOp;\n            this.onUnhandledReceipt = noOp;\n            this.onUnhandledFrame = noOp;\n            this.onHeartbeatReceived = noOp;\n            this.onHeartbeatLost = noOp;\n            this.onStompError = noOp;\n            this.onWebSocketClose = noOp;\n            this.onWebSocketError = noOp;\n            this.logRawCommunication = false;\n            this.onChangeState = noOp;\n            // These parameters would typically get proper values before connect is called\n            this.connectHeaders = {};\n            this._disconnectHeaders = {};\n            // Apply configuration\n            this.configure(conf);\n        }\n        /**\n         * Updates the client's configuration.\n         *\n         * All properties in the provided configuration object will override the current settings.\n         *\n         * Additionally, a warning is logged if `maxReconnectDelay` is configured to a\n         * value lower than `reconnectDelay`, and `maxReconnectDelay` is adjusted to match `reconnectDelay`.\n         *\n         * Example:\n         * ```javascript\n         * client.configure({\n         *   reconnectDelay: 3000,\n         *   maxReconnectDelay: 10000\n         * });\n         * ```\n         *\n         * @param conf Configuration object containing the new settings.\n         */\n        configure(conf) {\n            // bulk assign all properties to this\n            Object.assign(this, conf);\n            // Warn on incorrect maxReconnectDelay settings\n            if (this.maxReconnectDelay > 0 &&\n                this.maxReconnectDelay < this.reconnectDelay) {\n                this.debug(`Warning: maxReconnectDelay (${this.maxReconnectDelay}ms) is less than reconnectDelay (${this.reconnectDelay}ms). Using reconnectDelay as the maxReconnectDelay delay.`);\n                this.maxReconnectDelay = this.reconnectDelay;\n            }\n        }\n        /**\n         * Activates the client, initiating a connection to the STOMP broker.\n         *\n         * On activation, the client attempts to connect and sets its state to `ACTIVE`. If the connection\n         * is lost, it will automatically retry based on `reconnectDelay` or `maxReconnectDelay`. If\n         * `reconnectTimeMode` is set to `EXPONENTIAL`, the reconnect delay increases exponentially.\n         *\n         * To stop reconnection attempts and disconnect, call [Client#deactivate]{@link Client#deactivate}.\n         *\n         * Example:\n         * ```javascript\n         * client.activate(); // Connect to the broker\n         * ```\n         *\n         * If the client is currently `DEACTIVATING`, connection is delayed until the deactivation process completes.\n         */\n        activate() {\n            const _activate = () => {\n                if (this.active) {\n                    this.debug('Already ACTIVE, ignoring request to activate');\n                    return;\n                }\n                this._changeState(exports.ActivationState.ACTIVE);\n                this._nextReconnectDelay = this.reconnectDelay;\n                this._connect();\n            };\n            // if it is deactivating, wait for it to complete before activating.\n            if (this.state === exports.ActivationState.DEACTIVATING) {\n                this.debug('Waiting for deactivation to finish before activating');\n                this.deactivate().then(() => {\n                    _activate();\n                });\n            }\n            else {\n                _activate();\n            }\n        }\n        async _connect() {\n            await this.beforeConnect(this);\n            if (this._stompHandler) {\n                this.debug('There is already a stompHandler, skipping the call to connect');\n                return;\n            }\n            if (!this.active) {\n                this.debug('Client has been marked inactive, will not attempt to connect');\n                return;\n            }\n            // setup connection watcher\n            if (this.connectionTimeout > 0) {\n                // clear first\n                if (this._connectionWatcher) {\n                    clearTimeout(this._connectionWatcher);\n                }\n                this._connectionWatcher = setTimeout(() => {\n                    if (this.connected) {\n                        return;\n                    }\n                    // Connection not established, close the underlying socket\n                    // a reconnection will be attempted\n                    this.debug(`Connection not established in ${this.connectionTimeout}ms, closing socket`);\n                    this.forceDisconnect();\n                }, this.connectionTimeout);\n            }\n            this.debug('Opening Web Socket...');\n            // Get the actual WebSocket (or a similar object)\n            const webSocket = this._createWebSocket();\n            this._stompHandler = new StompHandler(this, webSocket, {\n                debug: this.debug,\n                stompVersions: this.stompVersions,\n                connectHeaders: this.connectHeaders,\n                disconnectHeaders: this._disconnectHeaders,\n                heartbeatIncoming: this.heartbeatIncoming,\n                heartbeatGracePeriods: this.heartbeatToleranceMultiplier,\n                heartbeatOutgoing: this.heartbeatOutgoing,\n                heartbeatStrategy: this.heartbeatStrategy,\n                splitLargeFrames: this.splitLargeFrames,\n                maxWebSocketChunkSize: this.maxWebSocketChunkSize,\n                forceBinaryWSFrames: this.forceBinaryWSFrames,\n                logRawCommunication: this.logRawCommunication,\n                appendMissingNULLonIncoming: this.appendMissingNULLonIncoming,\n                discardWebsocketOnCommFailure: this.discardWebsocketOnCommFailure,\n                onConnect: frame => {\n                    // Successfully connected, stop the connection watcher\n                    if (this._connectionWatcher) {\n                        clearTimeout(this._connectionWatcher);\n                        this._connectionWatcher = undefined;\n                    }\n                    // Reset reconnect delay after successful connection\n                    this._nextReconnectDelay = this.reconnectDelay;\n                    if (!this.active) {\n                        this.debug('STOMP got connected while deactivate was issued, will disconnect now');\n                        this._disposeStompHandler();\n                        return;\n                    }\n                    this.onConnect(frame);\n                },\n                onDisconnect: frame => {\n                    this.onDisconnect(frame);\n                },\n                onStompError: frame => {\n                    this.onStompError(frame);\n                },\n                onWebSocketClose: evt => {\n                    this._stompHandler = undefined; // a new one will be created in case of a reconnect\n                    if (this.state === exports.ActivationState.DEACTIVATING) {\n                        // Mark deactivation complete\n                        this._changeState(exports.ActivationState.INACTIVE);\n                    }\n                    // The callback is called before attempting to reconnect, this would allow the client\n                    // to be `deactivated` in the callback.\n                    this.onWebSocketClose(evt);\n                    if (this.active) {\n                        this._schedule_reconnect();\n                    }\n                },\n                onWebSocketError: evt => {\n                    this.onWebSocketError(evt);\n                },\n                onUnhandledMessage: message => {\n                    this.onUnhandledMessage(message);\n                },\n                onUnhandledReceipt: frame => {\n                    this.onUnhandledReceipt(frame);\n                },\n                onUnhandledFrame: frame => {\n                    this.onUnhandledFrame(frame);\n                },\n                onHeartbeatReceived: () => {\n                    this.onHeartbeatReceived();\n                },\n                onHeartbeatLost: () => {\n                    this.onHeartbeatLost();\n                },\n            });\n            this._stompHandler.start();\n        }\n        _createWebSocket() {\n            let webSocket;\n            if (this.webSocketFactory) {\n                webSocket = this.webSocketFactory();\n            }\n            else if (this.brokerURL) {\n                webSocket = new WebSocket(this.brokerURL, this.stompVersions.protocolVersions());\n            }\n            else {\n                throw new Error('Either brokerURL or webSocketFactory must be provided');\n            }\n            webSocket.binaryType = 'arraybuffer';\n            return webSocket;\n        }\n        _schedule_reconnect() {\n            if (this._nextReconnectDelay > 0) {\n                this.debug(`STOMP: scheduling reconnection in ${this._nextReconnectDelay}ms`);\n                this._reconnector = setTimeout(() => {\n                    if (this.reconnectTimeMode === exports.ReconnectionTimeMode.EXPONENTIAL) {\n                        this._nextReconnectDelay = this._nextReconnectDelay * 2;\n                        // Truncated exponential backoff with a set limit unless disabled\n                        if (this.maxReconnectDelay !== 0) {\n                            this._nextReconnectDelay = Math.min(this._nextReconnectDelay, this.maxReconnectDelay);\n                        }\n                    }\n                    this._connect();\n                }, this._nextReconnectDelay);\n            }\n        }\n        /**\n         * Disconnects the client and stops the automatic reconnection loop.\n         *\n         * If there is an active STOMP connection at the time of invocation, the appropriate callbacks\n         * will be triggered during the shutdown sequence. Once deactivated, the client will enter the\n         * `INACTIVE` state, and no further reconnection attempts will be made.\n         *\n         * **Behavior**:\n         * - If there is no active WebSocket connection, this method resolves immediately.\n         * - If there is an active connection, the method waits for the underlying WebSocket\n         *   to properly close before resolving.\n         * - Multiple calls to this method are safe. Each invocation resolves upon completion.\n         * - To reactivate, call [Client#activate]{@link Client#activate}.\n         *\n         * **Experimental Option:**\n         * - By specifying the `force: true` option, the WebSocket connection is discarded immediately,\n         *   bypassing both the STOMP and WebSocket shutdown sequences.\n         * - **Caution:** Using `force: true` may leave the WebSocket in an inconsistent state,\n         *   and brokers may not immediately detect the termination.\n         *\n         * Example:\n         * ```javascript\n         * // Graceful disconnect\n         * await client.deactivate();\n         *\n         * // Forced disconnect to speed up shutdown when the connection is stale\n         * await client.deactivate({ force: true });\n         * ```\n         *\n         * @param options Configuration options for deactivation. Use `force: true` for immediate shutdown.\n         * @returns A Promise that resolves when the deactivation process completes.\n         */\n        async deactivate(options = {}) {\n            const force = options.force || false;\n            const needToDispose = this.active;\n            let retPromise;\n            if (this.state === exports.ActivationState.INACTIVE) {\n                this.debug(`Already INACTIVE, nothing more to do`);\n                return Promise.resolve();\n            }\n            this._changeState(exports.ActivationState.DEACTIVATING);\n            // Clear reconnection timer just to be safe\n            this._nextReconnectDelay = 0;\n            // Clear if a reconnection was scheduled\n            if (this._reconnector) {\n                clearTimeout(this._reconnector);\n                this._reconnector = undefined;\n            }\n            if (this._stompHandler &&\n                // @ts-ignore - if there is a _stompHandler, there is the webSocket\n                this.webSocket.readyState !== exports.StompSocketState.CLOSED) {\n                const origOnWebSocketClose = this._stompHandler.onWebSocketClose;\n                // we need to wait for the underlying websocket to close\n                retPromise = new Promise((resolve, reject) => {\n                    // @ts-ignore - there is a _stompHandler\n                    this._stompHandler.onWebSocketClose = evt => {\n                        origOnWebSocketClose(evt);\n                        resolve();\n                    };\n                });\n            }\n            else {\n                // indicate that auto reconnect loop should terminate\n                this._changeState(exports.ActivationState.INACTIVE);\n                return Promise.resolve();\n            }\n            if (force) {\n                this._stompHandler?.discardWebsocket();\n            }\n            else if (needToDispose) {\n                this._disposeStompHandler();\n            }\n            return retPromise;\n        }\n        /**\n         * Forces a disconnect by directly closing the WebSocket.\n         *\n         * Unlike a normal disconnect, this does not send a DISCONNECT sequence to the broker but\n         * instead closes the WebSocket connection directly. After forcing a disconnect, the client\n         * will automatically attempt to reconnect based on its `reconnectDelay` configuration.\n         *\n         * **Note:** To prevent further reconnect attempts, call [Client#deactivate]{@link Client#deactivate}.\n         *\n         * Example:\n         * ```javascript\n         * client.forceDisconnect();\n         * ```\n         */\n        forceDisconnect() {\n            if (this._stompHandler) {\n                this._stompHandler.forceDisconnect();\n            }\n        }\n        _disposeStompHandler() {\n            // Dispose STOMP Handler\n            if (this._stompHandler) {\n                this._stompHandler.dispose();\n            }\n        }\n        /**\n         * Sends a message to the specified destination on the STOMP broker.\n         *\n         * The `body` must be a `string`. For non-string payloads (e.g., JSON), encode it as a string before sending.\n         * If sending binary data, use the `binaryBody` parameter as a [Uint8Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array).\n         *\n         * **Content-Length Behavior**:\n         * - For non-binary messages, the `content-length` header is added by default.\n         * - The `content-length` header can be skipped for text frames by setting `skipContentLengthHeader: true` in the parameters.\n         * - For binary messages, the `content-length` header is always included.\n         *\n         * **Notes**:\n         * - Ensure that brokers support binary frames before using `binaryBody`.\n         * - Sending messages with NULL octets and missing `content-length` headers can cause brokers to disconnect and throw errors.\n         *\n         * Example:\n         * ```javascript\n         * // Basic text message\n         * client.publish({ destination: \"/queue/test\", body: \"Hello, STOMP\" });\n         *\n         * // Text message with additional headers\n         * client.publish({ destination: \"/queue/test\", headers: { priority: 9 }, body: \"Hello, STOMP\" });\n         *\n         * // Skip content-length header\n         * client.publish({ destination: \"/queue/test\", body: \"Hello, STOMP\", skipContentLengthHeader: true });\n         *\n         * // Binary message\n         * const binaryData = new Uint8Array([1, 2, 3, 4]);\n         * client.publish({\n         *   destination: '/topic/special',\n         *   binaryBody: binaryData,\n         *   headers: { 'content-type': 'application/octet-stream' }\n         * });\n         * ```\n         */\n        publish(params) {\n            this._checkConnection();\n            // @ts-ignore - we already checked that there is a _stompHandler, and it is connected\n            this._stompHandler.publish(params);\n        }\n        _checkConnection() {\n            if (!this.connected) {\n                throw new TypeError('There is no underlying STOMP connection');\n            }\n        }\n        /**\n         * Monitors for a receipt acknowledgment from the broker for specific operations.\n         *\n         * Add a `receipt` header to the operation (like subscribe or publish), and use this method with\n         * the same receipt ID to detect when the broker has acknowledged the operation's completion.\n         *\n         * The callback is invoked with the corresponding {@link IFrame} when the receipt is received.\n         *\n         * Example:\n         * ```javascript\n         * const receiptId = \"unique-receipt-id\";\n         *\n         * client.watchForReceipt(receiptId, (frame) => {\n         *   console.log(\"Operation acknowledged by the broker:\", frame);\n         * });\n         *\n         * // Attach the receipt header to an operation\n         * client.publish({ destination: \"/queue/test\", headers: { receipt: receiptId }, body: \"Hello\" });\n         * ```\n         *\n         * @param receiptId Unique identifier for the receipt.\n         * @param callback Callback function invoked on receiving the RECEIPT frame.\n         */\n        watchForReceipt(receiptId, callback) {\n            this._checkConnection();\n            // @ts-ignore - we already checked that there is a _stompHandler, and it is connected\n            this._stompHandler.watchForReceipt(receiptId, callback);\n        }\n        /**\n         * Subscribes to a destination on the STOMP broker.\n         *\n         * The callback is triggered for each message received from the subscribed destination. The message\n         * is passed as an {@link IMessage} instance.\n         *\n         * **Subscription ID**:\n         * - If no `id` is provided in `headers`, the library generates a unique subscription ID automatically.\n         * - Provide an explicit `id` in `headers` if you wish to manage the subscription ID manually.\n         *\n         * Example:\n         * ```javascript\n         * const callback = (message) => {\n         *   console.log(\"Received message:\", message.body);\n         * };\n         *\n         * // Auto-generated subscription ID\n         * const subscription = client.subscribe(\"/queue/test\", callback);\n         *\n         * // Explicit subscription ID\n         * const mySubId = \"my-subscription-id\";\n         * const subscription = client.subscribe(\"/queue/test\", callback, { id: mySubId });\n         * ```\n         *\n         * @param destination Destination to subscribe to.\n         * @param callback Function invoked for each received message.\n         * @param headers Optional headers for subscription, such as `id`.\n         * @returns A {@link StompSubscription} which can be used to manage the subscription.\n         */\n        subscribe(destination, callback, headers = {}) {\n            this._checkConnection();\n            // @ts-ignore - we already checked that there is a _stompHandler, and it is connected\n            return this._stompHandler.subscribe(destination, callback, headers);\n        }\n        /**\n         * Unsubscribes from a subscription on the STOMP broker.\n         *\n         * Prefer using the `unsubscribe` method directly on the {@link StompSubscription} returned from `subscribe` for cleaner management:\n         * ```javascript\n         * const subscription = client.subscribe(\"/queue/test\", callback);\n         * // Unsubscribe using the subscription object\n         * subscription.unsubscribe();\n         * ```\n         *\n         * This method can also be used directly with the subscription ID.\n         *\n         * Example:\n         * ```javascript\n         * client.unsubscribe(\"my-subscription-id\");\n         * ```\n         *\n         * @param id Subscription ID to unsubscribe.\n         * @param headers Optional headers to pass for the UNSUBSCRIBE frame.\n         */\n        unsubscribe(id, headers = {}) {\n            this._checkConnection();\n            // @ts-ignore - we already checked that there is a _stompHandler, and it is connected\n            this._stompHandler.unsubscribe(id, headers);\n        }\n        /**\n         * Starts a new transaction. The returned {@link ITransaction} object provides\n         * methods for [commit]{@link ITransaction#commit} and [abort]{@link ITransaction#abort}.\n         *\n         * If `transactionId` is not provided, the library generates a unique ID internally.\n         *\n         * Example:\n         * ```javascript\n         * const tx = client.begin(); // Auto-generated ID\n         *\n         * // Or explicitly specify a transaction ID\n         * const tx = client.begin(\"my-transaction-id\");\n         * ```\n         *\n         * @param transactionId Optional transaction ID.\n         * @returns An instance of {@link ITransaction}.\n         */\n        begin(transactionId) {\n            this._checkConnection();\n            // @ts-ignore - we already checked that there is a _stompHandler, and it is connected\n            return this._stompHandler.begin(transactionId);\n        }\n        /**\n         * Commits a transaction.\n         *\n         * It is strongly recommended to call [commit]{@link ITransaction#commit} on\n         * the transaction object returned by [client#begin]{@link Client#begin}.\n         *\n         * Example:\n         * ```javascript\n         * const tx = client.begin();\n         * // Perform operations under this transaction\n         * tx.commit();\n         * ```\n         *\n         * @param transactionId The ID of the transaction to commit.\n         */\n        commit(transactionId) {\n            this._checkConnection();\n            // @ts-ignore - we already checked that there is a _stompHandler, and it is connected\n            this._stompHandler.commit(transactionId);\n        }\n        /**\n         * Aborts a transaction.\n         *\n         * It is strongly recommended to call [abort]{@link ITransaction#abort} directly\n         * on the transaction object returned by [client#begin]{@link Client#begin}.\n         *\n         * Example:\n         * ```javascript\n         * const tx = client.begin();\n         * // Perform operations under this transaction\n         * tx.abort(); // Abort the transaction\n         * ```\n         *\n         * @param transactionId The ID of the transaction to abort.\n         */\n        abort(transactionId) {\n            this._checkConnection();\n            // @ts-ignore - we already checked that there is a _stompHandler, and it is connected\n            this._stompHandler.abort(transactionId);\n        }\n        /**\n         * Acknowledges receipt of a message. Typically, this should be done by calling\n         * [ack]{@link IMessage#ack} directly on the {@link IMessage} instance passed\n         * to the subscription callback.\n         *\n         * Example:\n         * ```javascript\n         * const callback = (message) => {\n         *   // Process the message\n         *   message.ack(); // Acknowledge the message\n         * };\n         *\n         * client.subscribe(\"/queue/example\", callback, { ack: \"client\" });\n         * ```\n         *\n         * @param messageId The ID of the message to acknowledge.\n         * @param subscriptionId The ID of the subscription.\n         * @param headers Optional headers for the acknowledgment frame.\n         */\n        ack(messageId, subscriptionId, headers = {}) {\n            this._checkConnection();\n            // @ts-ignore - we already checked that there is a _stompHandler, and it is connected\n            this._stompHandler.ack(messageId, subscriptionId, headers);\n        }\n        /**\n         * Rejects a message (negative acknowledgment). Like acknowledgments, this should\n         * typically be done by calling [nack]{@link IMessage#nack} directly on the {@link IMessage}\n         * instance passed to the subscription callback.\n         *\n         * Example:\n         * ```javascript\n         * const callback = (message) => {\n         *   // Process the message\n         *   if (isError(message)) {\n         *     message.nack(); // Reject the message\n         *   }\n         * };\n         *\n         * client.subscribe(\"/queue/example\", callback, { ack: \"client\" });\n         * ```\n         *\n         * @param messageId The ID of the message to negatively acknowledge.\n         * @param subscriptionId The ID of the subscription.\n         * @param headers Optional headers for the NACK frame.\n         */\n        nack(messageId, subscriptionId, headers = {}) {\n            this._checkConnection();\n            // @ts-ignore - we already checked that there is a _stompHandler, and it is connected\n            this._stompHandler.nack(messageId, subscriptionId, headers);\n        }\n    }\n\n    /**\n     * Configuration options for STOMP Client, each key corresponds to\n     * field by the same name in {@link Client}. This can be passed to\n     * the constructor of {@link Client} or to [Client#configure]{@link Client#configure}.\n     *\n     * Part of `@stomp/stompjs`.\n     */\n    class StompConfig {\n    }\n\n    /**\n     * STOMP headers. Many function calls will accept headers as parameters.\n     * The headers sent by Broker will be available as [IFrame#headers]{@link IFrame#headers}.\n     *\n     * `key` and `value` must be valid strings.\n     * In addition, `key` must not contain `CR`, `LF`, or `:`.\n     *\n     * Part of `@stomp/stompjs`.\n     */\n    class StompHeaders {\n    }\n\n    /**\n     * Part of `@stomp/stompjs`.\n     *\n     * @internal\n     */\n    class HeartbeatInfo {\n        constructor(client) {\n            this.client = client;\n        }\n        get outgoing() {\n            return this.client.heartbeatOutgoing;\n        }\n        set outgoing(value) {\n            this.client.heartbeatOutgoing = value;\n        }\n        get incoming() {\n            return this.client.heartbeatIncoming;\n        }\n        set incoming(value) {\n            this.client.heartbeatIncoming = value;\n        }\n    }\n\n    /**\n     * Available for backward compatibility, please shift to using {@link Client}.\n     *\n     * **Deprecated**\n     *\n     * Part of `@stomp/stompjs`.\n     *\n     * To upgrade, please follow the [Upgrade Guide](https://stomp-js.github.io/guide/stompjs/upgrading-stompjs.html)\n     */\n    class CompatClient extends Client {\n        /**\n         * Available for backward compatibility, please shift to using {@link Client}\n         * and [Client#webSocketFactory]{@link Client#webSocketFactory}.\n         *\n         * **Deprecated**\n         *\n         * @internal\n         */\n        constructor(webSocketFactory) {\n            super();\n            /**\n             * It is no op now. No longer needed. Large packets work out of the box.\n             */\n            this.maxWebSocketFrameSize = 16 * 1024;\n            this._heartbeatInfo = new HeartbeatInfo(this);\n            this.reconnect_delay = 0;\n            this.webSocketFactory = webSocketFactory;\n            // Default from previous version\n            this.debug = (...message) => {\n                console.log(...message);\n            };\n        }\n        _parseConnect(...args) {\n            let closeEventCallback;\n            let connectCallback;\n            let errorCallback;\n            let headers = {};\n            if (args.length < 2) {\n                throw new Error('Connect requires at least 2 arguments');\n            }\n            if (typeof args[1] === 'function') {\n                [headers, connectCallback, errorCallback, closeEventCallback] = args;\n            }\n            else {\n                switch (args.length) {\n                    case 6:\n                        [\n                            headers.login,\n                            headers.passcode,\n                            connectCallback,\n                            errorCallback,\n                            closeEventCallback,\n                            headers.host,\n                        ] = args;\n                        break;\n                    default:\n                        [\n                            headers.login,\n                            headers.passcode,\n                            connectCallback,\n                            errorCallback,\n                            closeEventCallback,\n                        ] = args;\n                }\n            }\n            return [headers, connectCallback, errorCallback, closeEventCallback];\n        }\n        /**\n         * Available for backward compatibility, please shift to using [Client#activate]{@link Client#activate}.\n         *\n         * **Deprecated**\n         *\n         * The `connect` method accepts different number of arguments and types. See the Overloads list. Use the\n         * version with headers to pass your broker specific options.\n         *\n         * overloads:\n         * - connect(headers, connectCallback)\n         * - connect(headers, connectCallback, errorCallback)\n         * - connect(login, passcode, connectCallback)\n         * - connect(login, passcode, connectCallback, errorCallback)\n         * - connect(login, passcode, connectCallback, errorCallback, closeEventCallback)\n         * - connect(login, passcode, connectCallback, errorCallback, closeEventCallback, host)\n         *\n         * params:\n         * - headers, see [Client#connectHeaders]{@link Client#connectHeaders}\n         * - connectCallback, see [Client#onConnect]{@link Client#onConnect}\n         * - errorCallback, see [Client#onStompError]{@link Client#onStompError}\n         * - closeEventCallback, see [Client#onWebSocketClose]{@link Client#onWebSocketClose}\n         * - login [String], see [Client#connectHeaders](../classes/Client.html#connectHeaders)\n         * - passcode [String], [Client#connectHeaders](../classes/Client.html#connectHeaders)\n         * - host [String], see [Client#connectHeaders](../classes/Client.html#connectHeaders)\n         *\n         * To upgrade, please follow the [Upgrade Guide](../additional-documentation/upgrading.html)\n         */\n        connect(...args) {\n            const out = this._parseConnect(...args);\n            if (out[0]) {\n                this.connectHeaders = out[0];\n            }\n            if (out[1]) {\n                this.onConnect = out[1];\n            }\n            if (out[2]) {\n                this.onStompError = out[2];\n            }\n            if (out[3]) {\n                this.onWebSocketClose = out[3];\n            }\n            super.activate();\n        }\n        /**\n         * Available for backward compatibility, please shift to using [Client#deactivate]{@link Client#deactivate}.\n         *\n         * **Deprecated**\n         *\n         * See:\n         * [Client#onDisconnect]{@link Client#onDisconnect}, and\n         * [Client#disconnectHeaders]{@link Client#disconnectHeaders}\n         *\n         * To upgrade, please follow the [Upgrade Guide](../additional-documentation/upgrading.html)\n         */\n        disconnect(disconnectCallback, headers = {}) {\n            if (disconnectCallback) {\n                this.onDisconnect = disconnectCallback;\n            }\n            this.disconnectHeaders = headers;\n            super.deactivate();\n        }\n        /**\n         * Available for backward compatibility, use [Client#publish]{@link Client#publish}.\n         *\n         * Send a message to a named destination. Refer to your STOMP broker documentation for types\n         * and naming of destinations. The headers will, typically, be available to the subscriber.\n         * However, there may be special purpose headers corresponding to your STOMP broker.\n         *\n         *  **Deprecated**, use [Client#publish]{@link Client#publish}\n         *\n         * Note: Body must be String. You will need to covert the payload to string in case it is not string (e.g. JSON)\n         *\n         * ```javascript\n         *        client.send(\"/queue/test\", {priority: 9}, \"Hello, STOMP\");\n         *\n         *        // If you want to send a message with a body, you must also pass the headers argument.\n         *        client.send(\"/queue/test\", {}, \"Hello, STOMP\");\n         * ```\n         *\n         * To upgrade, please follow the [Upgrade Guide](../additional-documentation/upgrading.html)\n         */\n        send(destination, headers = {}, body = '') {\n            headers = Object.assign({}, headers);\n            const skipContentLengthHeader = headers['content-length'] === false;\n            if (skipContentLengthHeader) {\n                delete headers['content-length'];\n            }\n            this.publish({\n                destination,\n                headers: headers,\n                body,\n                skipContentLengthHeader,\n            });\n        }\n        /**\n         * Available for backward compatibility, renamed to [Client#reconnectDelay]{@link Client#reconnectDelay}.\n         *\n         * **Deprecated**\n         */\n        set reconnect_delay(value) {\n            this.reconnectDelay = value;\n        }\n        /**\n         * Available for backward compatibility, renamed to [Client#webSocket]{@link Client#webSocket}.\n         *\n         * **Deprecated**\n         */\n        get ws() {\n            return this.webSocket;\n        }\n        /**\n         * Available for backward compatibility, renamed to [Client#connectedVersion]{@link Client#connectedVersion}.\n         *\n         * **Deprecated**\n         */\n        get version() {\n            return this.connectedVersion;\n        }\n        /**\n         * Available for backward compatibility, renamed to [Client#onUnhandledMessage]{@link Client#onUnhandledMessage}.\n         *\n         * **Deprecated**\n         */\n        get onreceive() {\n            return this.onUnhandledMessage;\n        }\n        /**\n         * Available for backward compatibility, renamed to [Client#onUnhandledMessage]{@link Client#onUnhandledMessage}.\n         *\n         * **Deprecated**\n         */\n        set onreceive(value) {\n            this.onUnhandledMessage = value;\n        }\n        /**\n         * Available for backward compatibility, renamed to [Client#onUnhandledReceipt]{@link Client#onUnhandledReceipt}.\n         * Prefer using [Client#watchForReceipt]{@link Client#watchForReceipt}.\n         *\n         * **Deprecated**\n         */\n        get onreceipt() {\n            return this.onUnhandledReceipt;\n        }\n        /**\n         * Available for backward compatibility, renamed to [Client#onUnhandledReceipt]{@link Client#onUnhandledReceipt}.\n         *\n         * **Deprecated**\n         */\n        set onreceipt(value) {\n            this.onUnhandledReceipt = value;\n        }\n        /**\n         * Available for backward compatibility, renamed to [Client#heartbeatIncoming]{@link Client#heartbeatIncoming}\n         * [Client#heartbeatOutgoing]{@link Client#heartbeatOutgoing}.\n         *\n         * **Deprecated**\n         */\n        get heartbeat() {\n            return this._heartbeatInfo;\n        }\n        /**\n         * Available for backward compatibility, renamed to [Client#heartbeatIncoming]{@link Client#heartbeatIncoming}\n         * [Client#heartbeatOutgoing]{@link Client#heartbeatOutgoing}.\n         *\n         * **Deprecated**\n         */\n        set heartbeat(value) {\n            this.heartbeatIncoming = value.incoming;\n            this.heartbeatOutgoing = value.outgoing;\n        }\n    }\n\n    /**\n     * STOMP Class, acts like a factory to create {@link Client}.\n     *\n     * Part of `@stomp/stompjs`.\n     *\n     * **Deprecated**\n     *\n     * It will be removed in next major version. Please switch to {@link Client}.\n     */\n    class Stomp {\n        /**\n         * This method creates a WebSocket client that is connected to\n         * the STOMP server located at the url.\n         *\n         * ```javascript\n         *        var url = \"ws://localhost:61614/stomp\";\n         *        var client = Stomp.client(url);\n         * ```\n         *\n         * **Deprecated**\n         *\n         * It will be removed in next major version. Please switch to {@link Client}\n         * using [Client#brokerURL]{@link Client#brokerURL}.\n         */\n        static client(url, protocols) {\n            // This is a hack to allow another implementation than the standard\n            // HTML5 WebSocket class.\n            //\n            // It is possible to use another class by calling\n            //\n            //     Stomp.WebSocketClass = MozWebSocket\n            //\n            // *prior* to call `Stomp.client()`.\n            //\n            // This hack is deprecated and `Stomp.over()` method should be used\n            // instead.\n            // See remarks on the function Stomp.over\n            if (protocols == null) {\n                protocols = Versions.default.protocolVersions();\n            }\n            const wsFn = () => {\n                const klass = Stomp.WebSocketClass || WebSocket;\n                return new klass(url, protocols);\n            };\n            return new CompatClient(wsFn);\n        }\n        /**\n         * This method is an alternative to [Stomp#client]{@link Stomp#client} to let the user\n         * specify the WebSocket to use (either a standard HTML5 WebSocket or\n         * a similar object).\n         *\n         * In order to support reconnection, the function Client._connect should be callable more than once.\n         * While reconnecting\n         * a new instance of underlying transport (TCP Socket, WebSocket or SockJS) will be needed. So, this function\n         * alternatively allows passing a function that should return a new instance of the underlying socket.\n         *\n         * ```javascript\n         *        var client = Stomp.over(function(){\n         *          return new WebSocket('ws://localhost:15674/ws')\n         *        });\n         * ```\n         *\n         * **Deprecated**\n         *\n         * It will be removed in next major version. Please switch to {@link Client}\n         * using [Client#webSocketFactory]{@link Client#webSocketFactory}.\n         */\n        static over(ws) {\n            let wsFn;\n            if (typeof ws === 'function') {\n                wsFn = ws;\n            }\n            else {\n                console.warn('Stomp.over did not receive a factory, auto reconnect will not work. ' +\n                    'Please see https://stomp-js.github.io/api-docs/latest/classes/Stomp.html#over');\n                wsFn = () => ws;\n            }\n            return new CompatClient(wsFn);\n        }\n    }\n    /**\n     * In case you need to use a non standard class for WebSocket.\n     *\n     * For example when using within NodeJS environment:\n     *\n     * ```javascript\n     *        StompJs = require('../../esm5/');\n     *        Stomp = StompJs.Stomp;\n     *        Stomp.WebSocketClass = require('websocket').w3cwebsocket;\n     * ```\n     *\n     * **Deprecated**\n     *\n     *\n     * It will be removed in next major version. Please switch to {@link Client}\n     * using [Client#webSocketFactory]{@link Client#webSocketFactory}.\n     */\n    // tslint:disable-next-line:variable-name\n    Stomp.WebSocketClass = null;\n\n    exports.Client = Client;\n    exports.CompatClient = CompatClient;\n    exports.FrameImpl = FrameImpl;\n    exports.Parser = Parser;\n    exports.Stomp = Stomp;\n    exports.StompConfig = StompConfig;\n    exports.StompHeaders = StompHeaders;\n    exports.Versions = Versions;\n\n}));\n//# sourceMappingURL=stomp.umd.js.map\n","'use strict';\n\nif (global.crypto && global.crypto.getRandomValues) {\n  module.exports.randomBytes = function(length) {\n    var bytes = new Uint8Array(length);\n    global.crypto.getRandomValues(bytes);\n    return bytes;\n  };\n} else {\n  module.exports.randomBytes = function(length) {\n    var bytes = new Array(length);\n    for (var i = 0; i < length; i++) {\n      bytes[i] = Math.floor(Math.random() * 256);\n    }\n    return bytes;\n  };\n}\n","'use strict';\n\nvar crypto = require('crypto');\n\n// This string has length 32, a power of 2, so the modulus doesn't introduce a\n// bias.\nvar _randomStringChars = 'abcdefghijklmnopqrstuvwxyz012345';\nmodule.exports = {\n  string: function(length) {\n    var max = _randomStringChars.length;\n    var bytes = crypto.randomBytes(length);\n    var ret = [];\n    for (var i = 0; i < length; i++) {\n      ret.push(_randomStringChars.substr(bytes[i] % max, 1));\n    }\n    return ret.join('');\n  }\n\n, number: function(max) {\n    return Math.floor(Math.random() * max);\n  }\n\n, numberString: function(max) {\n    var t = ('' + (max - 1)).length;\n    var p = new Array(t + 1).join('0');\n    return (p + this.number(max)).slice(-t);\n  }\n};\n","'use strict';\n\nvar random = require('./random');\n\nvar onUnload = {}\n  , afterUnload = false\n    // detect google chrome packaged apps because they don't allow the 'unload' event\n  , isChromePackagedApp = global.chrome && global.chrome.app && global.chrome.app.runtime\n  ;\n\nmodule.exports = {\n  attachEvent: function(event, listener) {\n    if (typeof global.addEventListener !== 'undefined') {\n      global.addEventListener(event, listener, false);\n    } else if (global.document && global.attachEvent) {\n      // IE quirks.\n      // According to: http://stevesouders.com/misc/test-postmessage.php\n      // the message gets delivered only to 'document', not 'window'.\n      global.document.attachEvent('on' + event, listener);\n      // I get 'window' for ie8.\n      global.attachEvent('on' + event, listener);\n    }\n  }\n\n, detachEvent: function(event, listener) {\n    if (typeof global.addEventListener !== 'undefined') {\n      global.removeEventListener(event, listener, false);\n    } else if (global.document && global.detachEvent) {\n      global.document.detachEvent('on' + event, listener);\n      global.detachEvent('on' + event, listener);\n    }\n  }\n\n, unloadAdd: function(listener) {\n    if (isChromePackagedApp) {\n      return null;\n    }\n\n    var ref = random.string(8);\n    onUnload[ref] = listener;\n    if (afterUnload) {\n      setTimeout(this.triggerUnloadCallbacks, 0);\n    }\n    return ref;\n  }\n\n, unloadDel: function(ref) {\n    if (ref in onUnload) {\n      delete onUnload[ref];\n    }\n  }\n\n, triggerUnloadCallbacks: function() {\n    for (var ref in onUnload) {\n      onUnload[ref]();\n      delete onUnload[ref];\n    }\n  }\n};\n\nvar unloadTriggered = function() {\n  if (afterUnload) {\n    return;\n  }\n  afterUnload = true;\n  module.exports.triggerUnloadCallbacks();\n};\n\n// 'unload' alone is not reliable in opera within an iframe, but we\n// can't use `beforeunload` as IE fires it on javascript: links.\nif (!isChromePackagedApp) {\n  module.exports.attachEvent('unload', unloadTriggered);\n}\n","'use strict';\n\n/**\n * Check if we're required to add a port number.\n *\n * @see https://url.spec.whatwg.org/#default-port\n * @param {Number|String} port Port number we need to check\n * @param {String} protocol Protocol we need to check against.\n * @returns {Boolean} Is it a default port for the given protocol\n * @api private\n */\nmodule.exports = function required(port, protocol) {\n  protocol = protocol.split(':')[0];\n  port = +port;\n\n  if (!port) return false;\n\n  switch (protocol) {\n    case 'http':\n    case 'ws':\n    return port !== 80;\n\n    case 'https':\n    case 'wss':\n    return port !== 443;\n\n    case 'ftp':\n    return port !== 21;\n\n    case 'gopher':\n    return port !== 70;\n\n    case 'file':\n    return false;\n  }\n\n  return port !== 0;\n};\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , undef;\n\n/**\n * Decode a URI encoded string.\n *\n * @param {String} input The URI encoded string.\n * @returns {String|Null} The decoded string.\n * @api private\n */\nfunction decode(input) {\n  try {\n    return decodeURIComponent(input.replace(/\\+/g, ' '));\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Attempts to encode a given input.\n *\n * @param {String} input The string that needs to be encoded.\n * @returns {String|Null} The encoded string.\n * @api private\n */\nfunction encode(input) {\n  try {\n    return encodeURIComponent(input);\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Simple query string parser.\n *\n * @param {String} query The query string that needs to be parsed.\n * @returns {Object}\n * @api public\n */\nfunction querystring(query) {\n  var parser = /([^=?#&]+)=?([^&]*)/g\n    , result = {}\n    , part;\n\n  while (part = parser.exec(query)) {\n    var key = decode(part[1])\n      , value = decode(part[2]);\n\n    //\n    // Prevent overriding of existing properties. This ensures that build-in\n    // methods like `toString` or __proto__ are not overriden by malicious\n    // querystrings.\n    //\n    // In the case if failed decoding, we want to omit the key/value pairs\n    // from the result.\n    //\n    if (key === null || value === null || key in result) continue;\n    result[key] = value;\n  }\n\n  return result;\n}\n\n/**\n * Transform a query string to an object.\n *\n * @param {Object} obj Object that should be transformed.\n * @param {String} prefix Optional prefix.\n * @returns {String}\n * @api public\n */\nfunction querystringify(obj, prefix) {\n  prefix = prefix || '';\n\n  var pairs = []\n    , value\n    , key;\n\n  //\n  // Optionally prefix with a '?' if needed\n  //\n  if ('string' !== typeof prefix) prefix = '?';\n\n  for (key in obj) {\n    if (has.call(obj, key)) {\n      value = obj[key];\n\n      //\n      // Edge cases where we actually want to encode the value to an empty\n      // string instead of the stringified value.\n      //\n      if (!value && (value === null || value === undef || isNaN(value))) {\n        value = '';\n      }\n\n      key = encode(key);\n      value = encode(value);\n\n      //\n      // If we failed to encode the strings, we should bail out as we don't\n      // want to add invalid strings to the query.\n      //\n      if (key === null || value === null) continue;\n      pairs.push(key +'='+ value);\n    }\n  }\n\n  return pairs.length ? prefix + pairs.join('&') : '';\n}\n\n//\n// Expose the module.\n//\nexports.stringify = querystringify;\nexports.parse = querystring;\n","'use strict';\n\nvar required = require('requires-port')\n  , qs = require('querystringify')\n  , controlOrWhitespace = /^[\\x00-\\x20\\u00a0\\u1680\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000\\ufeff]+/\n  , CRHTLF = /[\\n\\r\\t]/g\n  , slashes = /^[A-Za-z][A-Za-z0-9+-.]*:\\/\\//\n  , port = /:\\d+$/\n  , protocolre = /^([a-z][a-z0-9.+-]*:)?(\\/\\/)?([\\\\/]+)?([\\S\\s]*)/i\n  , windowsDriveLetter = /^[a-zA-Z]:/;\n\n/**\n * Remove control characters and whitespace from the beginning of a string.\n *\n * @param {Object|String} str String to trim.\n * @returns {String} A new string representing `str` stripped of control\n *     characters and whitespace from its beginning.\n * @public\n */\nfunction trimLeft(str) {\n  return (str ? str : '').toString().replace(controlOrWhitespace, '');\n}\n\n/**\n * These are the parse rules for the URL parser, it informs the parser\n * about:\n *\n * 0. The char it Needs to parse, if it's a string it should be done using\n *    indexOf, RegExp using exec and NaN means set as current value.\n * 1. The property we should set when parsing this value.\n * 2. Indication if it's backwards or forward parsing, when set as number it's\n *    the value of extra chars that should be split off.\n * 3. Inherit from location if non existing in the parser.\n * 4. `toLowerCase` the resulting value.\n */\nvar rules = [\n  ['#', 'hash'],                        // Extract from the back.\n  ['?', 'query'],                       // Extract from the back.\n  function sanitize(address, url) {     // Sanitize what is left of the address\n    return isSpecial(url.protocol) ? address.replace(/\\\\/g, '/') : address;\n  },\n  ['/', 'pathname'],                    // Extract from the back.\n  ['@', 'auth', 1],                     // Extract from the front.\n  [NaN, 'host', undefined, 1, 1],       // Set left over value.\n  [/:(\\d*)$/, 'port', undefined, 1],    // RegExp the back.\n  [NaN, 'hostname', undefined, 1, 1]    // Set left over.\n];\n\n/**\n * These properties should not be copied or inherited from. This is only needed\n * for all non blob URL's as a blob URL does not include a hash, only the\n * origin.\n *\n * @type {Object}\n * @private\n */\nvar ignore = { hash: 1, query: 1 };\n\n/**\n * The location object differs when your code is loaded through a normal page,\n * Worker or through a worker using a blob. And with the blobble begins the\n * trouble as the location object will contain the URL of the blob, not the\n * location of the page where our code is loaded in. The actual origin is\n * encoded in the `pathname` so we can thankfully generate a good \"default\"\n * location from it so we can generate proper relative URL's again.\n *\n * @param {Object|String} loc Optional default location object.\n * @returns {Object} lolcation object.\n * @public\n */\nfunction lolcation(loc) {\n  var globalVar;\n\n  if (typeof window !== 'undefined') globalVar = window;\n  else if (typeof global !== 'undefined') globalVar = global;\n  else if (typeof self !== 'undefined') globalVar = self;\n  else globalVar = {};\n\n  var location = globalVar.location || {};\n  loc = loc || location;\n\n  var finaldestination = {}\n    , type = typeof loc\n    , key;\n\n  if ('blob:' === loc.protocol) {\n    finaldestination = new Url(unescape(loc.pathname), {});\n  } else if ('string' === type) {\n    finaldestination = new Url(loc, {});\n    for (key in ignore) delete finaldestination[key];\n  } else if ('object' === type) {\n    for (key in loc) {\n      if (key in ignore) continue;\n      finaldestination[key] = loc[key];\n    }\n\n    if (finaldestination.slashes === undefined) {\n      finaldestination.slashes = slashes.test(loc.href);\n    }\n  }\n\n  return finaldestination;\n}\n\n/**\n * Check whether a protocol scheme is special.\n *\n * @param {String} The protocol scheme of the URL\n * @return {Boolean} `true` if the protocol scheme is special, else `false`\n * @private\n */\nfunction isSpecial(scheme) {\n  return (\n    scheme === 'file:' ||\n    scheme === 'ftp:' ||\n    scheme === 'http:' ||\n    scheme === 'https:' ||\n    scheme === 'ws:' ||\n    scheme === 'wss:'\n  );\n}\n\n/**\n * @typedef ProtocolExtract\n * @type Object\n * @property {String} protocol Protocol matched in the URL, in lowercase.\n * @property {Boolean} slashes `true` if protocol is followed by \"//\", else `false`.\n * @property {String} rest Rest of the URL that is not part of the protocol.\n */\n\n/**\n * Extract protocol information from a URL with/without double slash (\"//\").\n *\n * @param {String} address URL we want to extract from.\n * @param {Object} location\n * @return {ProtocolExtract} Extracted information.\n * @private\n */\nfunction extractProtocol(address, location) {\n  address = trimLeft(address);\n  address = address.replace(CRHTLF, '');\n  location = location || {};\n\n  var match = protocolre.exec(address);\n  var protocol = match[1] ? match[1].toLowerCase() : '';\n  var forwardSlashes = !!match[2];\n  var otherSlashes = !!match[3];\n  var slashesCount = 0;\n  var rest;\n\n  if (forwardSlashes) {\n    if (otherSlashes) {\n      rest = match[2] + match[3] + match[4];\n      slashesCount = match[2].length + match[3].length;\n    } else {\n      rest = match[2] + match[4];\n      slashesCount = match[2].length;\n    }\n  } else {\n    if (otherSlashes) {\n      rest = match[3] + match[4];\n      slashesCount = match[3].length;\n    } else {\n      rest = match[4]\n    }\n  }\n\n  if (protocol === 'file:') {\n    if (slashesCount >= 2) {\n      rest = rest.slice(2);\n    }\n  } else if (isSpecial(protocol)) {\n    rest = match[4];\n  } else if (protocol) {\n    if (forwardSlashes) {\n      rest = rest.slice(2);\n    }\n  } else if (slashesCount >= 2 && isSpecial(location.protocol)) {\n    rest = match[4];\n  }\n\n  return {\n    protocol: protocol,\n    slashes: forwardSlashes || isSpecial(protocol),\n    slashesCount: slashesCount,\n    rest: rest\n  };\n}\n\n/**\n * Resolve a relative URL pathname against a base URL pathname.\n *\n * @param {String} relative Pathname of the relative URL.\n * @param {String} base Pathname of the base URL.\n * @return {String} Resolved pathname.\n * @private\n */\nfunction resolve(relative, base) {\n  if (relative === '') return base;\n\n  var path = (base || '/').split('/').slice(0, -1).concat(relative.split('/'))\n    , i = path.length\n    , last = path[i - 1]\n    , unshift = false\n    , up = 0;\n\n  while (i--) {\n    if (path[i] === '.') {\n      path.splice(i, 1);\n    } else if (path[i] === '..') {\n      path.splice(i, 1);\n      up++;\n    } else if (up) {\n      if (i === 0) unshift = true;\n      path.splice(i, 1);\n      up--;\n    }\n  }\n\n  if (unshift) path.unshift('');\n  if (last === '.' || last === '..') path.push('');\n\n  return path.join('/');\n}\n\n/**\n * The actual URL instance. Instead of returning an object we've opted-in to\n * create an actual constructor as it's much more memory efficient and\n * faster and it pleases my OCD.\n *\n * It is worth noting that we should not use `URL` as class name to prevent\n * clashes with the global URL instance that got introduced in browsers.\n *\n * @constructor\n * @param {String} address URL we want to parse.\n * @param {Object|String} [location] Location defaults for relative paths.\n * @param {Boolean|Function} [parser] Parser for the query string.\n * @private\n */\nfunction Url(address, location, parser) {\n  address = trimLeft(address);\n  address = address.replace(CRHTLF, '');\n\n  if (!(this instanceof Url)) {\n    return new Url(address, location, parser);\n  }\n\n  var relative, extracted, parse, instruction, index, key\n    , instructions = rules.slice()\n    , type = typeof location\n    , url = this\n    , i = 0;\n\n  //\n  // The following if statements allows this module two have compatibility with\n  // 2 different API:\n  //\n  // 1. Node.js's `url.parse` api which accepts a URL, boolean as arguments\n  //    where the boolean indicates that the query string should also be parsed.\n  //\n  // 2. The `URL` interface of the browser which accepts a URL, object as\n  //    arguments. The supplied object will be used as default values / fall-back\n  //    for relative paths.\n  //\n  if ('object' !== type && 'string' !== type) {\n    parser = location;\n    location = null;\n  }\n\n  if (parser && 'function' !== typeof parser) parser = qs.parse;\n\n  location = lolcation(location);\n\n  //\n  // Extract protocol information before running the instructions.\n  //\n  extracted = extractProtocol(address || '', location);\n  relative = !extracted.protocol && !extracted.slashes;\n  url.slashes = extracted.slashes || relative && location.slashes;\n  url.protocol = extracted.protocol || location.protocol || '';\n  address = extracted.rest;\n\n  //\n  // When the authority component is absent the URL starts with a path\n  // component.\n  //\n  if (\n    extracted.protocol === 'file:' && (\n      extracted.slashesCount !== 2 || windowsDriveLetter.test(address)) ||\n    (!extracted.slashes &&\n      (extracted.protocol ||\n        extracted.slashesCount < 2 ||\n        !isSpecial(url.protocol)))\n  ) {\n    instructions[3] = [/(.*)/, 'pathname'];\n  }\n\n  for (; i < instructions.length; i++) {\n    instruction = instructions[i];\n\n    if (typeof instruction === 'function') {\n      address = instruction(address, url);\n      continue;\n    }\n\n    parse = instruction[0];\n    key = instruction[1];\n\n    if (parse !== parse) {\n      url[key] = address;\n    } else if ('string' === typeof parse) {\n      index = parse === '@'\n        ? address.lastIndexOf(parse)\n        : address.indexOf(parse);\n\n      if (~index) {\n        if ('number' === typeof instruction[2]) {\n          url[key] = address.slice(0, index);\n          address = address.slice(index + instruction[2]);\n        } else {\n          url[key] = address.slice(index);\n          address = address.slice(0, index);\n        }\n      }\n    } else if ((index = parse.exec(address))) {\n      url[key] = index[1];\n      address = address.slice(0, index.index);\n    }\n\n    url[key] = url[key] || (\n      relative && instruction[3] ? location[key] || '' : ''\n    );\n\n    //\n    // Hostname, host and protocol should be lowercased so they can be used to\n    // create a proper `origin`.\n    //\n    if (instruction[4]) url[key] = url[key].toLowerCase();\n  }\n\n  //\n  // Also parse the supplied query string in to an object. If we're supplied\n  // with a custom parser as function use that instead of the default build-in\n  // parser.\n  //\n  if (parser) url.query = parser(url.query);\n\n  //\n  // If the URL is relative, resolve the pathname against the base URL.\n  //\n  if (\n      relative\n    && location.slashes\n    && url.pathname.charAt(0) !== '/'\n    && (url.pathname !== '' || location.pathname !== '')\n  ) {\n    url.pathname = resolve(url.pathname, location.pathname);\n  }\n\n  //\n  // Default to a / for pathname if none exists. This normalizes the URL\n  // to always have a /\n  //\n  if (url.pathname.charAt(0) !== '/' && isSpecial(url.protocol)) {\n    url.pathname = '/' + url.pathname;\n  }\n\n  //\n  // We should not add port numbers if they are already the default port number\n  // for a given protocol. As the host also contains the port number we're going\n  // override it with the hostname which contains no port number.\n  //\n  if (!required(url.port, url.protocol)) {\n    url.host = url.hostname;\n    url.port = '';\n  }\n\n  //\n  // Parse down the `auth` for the username and password.\n  //\n  url.username = url.password = '';\n\n  if (url.auth) {\n    index = url.auth.indexOf(':');\n\n    if (~index) {\n      url.username = url.auth.slice(0, index);\n      url.username = encodeURIComponent(decodeURIComponent(url.username));\n\n      url.password = url.auth.slice(index + 1);\n      url.password = encodeURIComponent(decodeURIComponent(url.password))\n    } else {\n      url.username = encodeURIComponent(decodeURIComponent(url.auth));\n    }\n\n    url.auth = url.password ? url.username +':'+ url.password : url.username;\n  }\n\n  url.origin = url.protocol !== 'file:' && isSpecial(url.protocol) && url.host\n    ? url.protocol +'//'+ url.host\n    : 'null';\n\n  //\n  // The href is just the compiled result.\n  //\n  url.href = url.toString();\n}\n\n/**\n * This is convenience method for changing properties in the URL instance to\n * insure that they all propagate correctly.\n *\n * @param {String} part          Property we need to adjust.\n * @param {Mixed} value          The newly assigned value.\n * @param {Boolean|Function} fn  When setting the query, it will be the function\n *                               used to parse the query.\n *                               When setting the protocol, double slash will be\n *                               removed from the final url if it is true.\n * @returns {URL} URL instance for chaining.\n * @public\n */\nfunction set(part, value, fn) {\n  var url = this;\n\n  switch (part) {\n    case 'query':\n      if ('string' === typeof value && value.length) {\n        value = (fn || qs.parse)(value);\n      }\n\n      url[part] = value;\n      break;\n\n    case 'port':\n      url[part] = value;\n\n      if (!required(value, url.protocol)) {\n        url.host = url.hostname;\n        url[part] = '';\n      } else if (value) {\n        url.host = url.hostname +':'+ value;\n      }\n\n      break;\n\n    case 'hostname':\n      url[part] = value;\n\n      if (url.port) value += ':'+ url.port;\n      url.host = value;\n      break;\n\n    case 'host':\n      url[part] = value;\n\n      if (port.test(value)) {\n        value = value.split(':');\n        url.port = value.pop();\n        url.hostname = value.join(':');\n      } else {\n        url.hostname = value;\n        url.port = '';\n      }\n\n      break;\n\n    case 'protocol':\n      url.protocol = value.toLowerCase();\n      url.slashes = !fn;\n      break;\n\n    case 'pathname':\n    case 'hash':\n      if (value) {\n        var char = part === 'pathname' ? '/' : '#';\n        url[part] = value.charAt(0) !== char ? char + value : value;\n      } else {\n        url[part] = value;\n      }\n      break;\n\n    case 'username':\n    case 'password':\n      url[part] = encodeURIComponent(value);\n      break;\n\n    case 'auth':\n      var index = value.indexOf(':');\n\n      if (~index) {\n        url.username = value.slice(0, index);\n        url.username = encodeURIComponent(decodeURIComponent(url.username));\n\n        url.password = value.slice(index + 1);\n        url.password = encodeURIComponent(decodeURIComponent(url.password));\n      } else {\n        url.username = encodeURIComponent(decodeURIComponent(value));\n      }\n  }\n\n  for (var i = 0; i < rules.length; i++) {\n    var ins = rules[i];\n\n    if (ins[4]) url[ins[1]] = url[ins[1]].toLowerCase();\n  }\n\n  url.auth = url.password ? url.username +':'+ url.password : url.username;\n\n  url.origin = url.protocol !== 'file:' && isSpecial(url.protocol) && url.host\n    ? url.protocol +'//'+ url.host\n    : 'null';\n\n  url.href = url.toString();\n\n  return url;\n}\n\n/**\n * Transform the properties back in to a valid and full URL string.\n *\n * @param {Function} stringify Optional query stringify function.\n * @returns {String} Compiled version of the URL.\n * @public\n */\nfunction toString(stringify) {\n  if (!stringify || 'function' !== typeof stringify) stringify = qs.stringify;\n\n  var query\n    , url = this\n    , host = url.host\n    , protocol = url.protocol;\n\n  if (protocol && protocol.charAt(protocol.length - 1) !== ':') protocol += ':';\n\n  var result =\n    protocol +\n    ((url.protocol && url.slashes) || isSpecial(url.protocol) ? '//' : '');\n\n  if (url.username) {\n    result += url.username;\n    if (url.password) result += ':'+ url.password;\n    result += '@';\n  } else if (url.password) {\n    result += ':'+ url.password;\n    result += '@';\n  } else if (\n    url.protocol !== 'file:' &&\n    isSpecial(url.protocol) &&\n    !host &&\n    url.pathname !== '/'\n  ) {\n    //\n    // Add back the empty userinfo, otherwise the original invalid URL\n    // might be transformed into a valid one with `url.pathname` as host.\n    //\n    result += '@';\n  }\n\n  //\n  // Trailing colon is removed from `url.host` when it is parsed. If it still\n  // ends with a colon, then add back the trailing colon that was removed. This\n  // prevents an invalid URL from being transformed into a valid one.\n  //\n  if (host[host.length - 1] === ':' || (port.test(url.hostname) && !url.port)) {\n    host += ':';\n  }\n\n  result += host + url.pathname;\n\n  query = 'object' === typeof url.query ? stringify(url.query) : url.query;\n  if (query) result += '?' !== query.charAt(0) ? '?'+ query : query;\n\n  if (url.hash) result += url.hash;\n\n  return result;\n}\n\nUrl.prototype = { set: set, toString: toString };\n\n//\n// Expose the URL parser and some additional properties that might be useful for\n// others or testing.\n//\nUrl.extractProtocol = extractProtocol;\nUrl.location = lolcation;\nUrl.trimLeft = trimLeft;\nUrl.qs = qs;\n\nmodule.exports = Url;\n","'use strict';\n\nvar URL = require('url-parse');\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:utils:url');\n}\n\nmodule.exports = {\n  getOrigin: function(url) {\n    if (!url) {\n      return null;\n    }\n\n    var p = new URL(url);\n    if (p.protocol === 'file:') {\n      return null;\n    }\n\n    var port = p.port;\n    if (!port) {\n      port = (p.protocol === 'https:') ? '443' : '80';\n    }\n\n    return p.protocol + '//' + p.hostname + ':' + port;\n  }\n\n, isOriginEqual: function(a, b) {\n    var res = this.getOrigin(a) === this.getOrigin(b);\n    debug('same', a, b, res);\n    return res;\n  }\n\n, isSchemeEqual: function(a, b) {\n    return (a.split(':')[0] === b.split(':')[0]);\n  }\n\n, addPath: function (url, path) {\n    var qs = url.split('?');\n    return qs[0] + path + (qs[1] ? '?' + qs[1] : '');\n  }\n\n, addQuery: function (url, q) {\n    return url + (url.indexOf('?') === -1 ? ('?' + q) : ('&' + q));\n  }\n\n, isLoopbackAddr: function (addr) {\n    return /^127\\.([0-9]{1,3})\\.([0-9]{1,3})\\.([0-9]{1,3})$/i.test(addr) || /^\\[::1\\]$/.test(addr);\n  }\n};\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","'use strict';\n\n/* Simplified implementation of DOM2 EventTarget.\n *   http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-EventTarget\n */\n\nfunction EventTarget() {\n  this._listeners = {};\n}\n\nEventTarget.prototype.addEventListener = function(eventType, listener) {\n  if (!(eventType in this._listeners)) {\n    this._listeners[eventType] = [];\n  }\n  var arr = this._listeners[eventType];\n  // #4\n  if (arr.indexOf(listener) === -1) {\n    // Make a copy so as not to interfere with a current dispatchEvent.\n    arr = arr.concat([listener]);\n  }\n  this._listeners[eventType] = arr;\n};\n\nEventTarget.prototype.removeEventListener = function(eventType, listener) {\n  var arr = this._listeners[eventType];\n  if (!arr) {\n    return;\n  }\n  var idx = arr.indexOf(listener);\n  if (idx !== -1) {\n    if (arr.length > 1) {\n      // Make a copy so as not to interfere with a current dispatchEvent.\n      this._listeners[eventType] = arr.slice(0, idx).concat(arr.slice(idx + 1));\n    } else {\n      delete this._listeners[eventType];\n    }\n    return;\n  }\n};\n\nEventTarget.prototype.dispatchEvent = function() {\n  var event = arguments[0];\n  var t = event.type;\n  // equivalent of Array.prototype.slice.call(arguments, 0);\n  var args = arguments.length === 1 ? [event] : Array.apply(null, arguments);\n  // TODO: This doesn't match the real behavior; per spec, onfoo get\n  // their place in line from the /first/ time they're set from\n  // non-null. Although WebKit bumps it to the end every time it's\n  // set.\n  if (this['on' + t]) {\n    this['on' + t].apply(this, args);\n  }\n  if (t in this._listeners) {\n    // Grab a reference to the listeners list. removeEventListener may alter the list.\n    var listeners = this._listeners[t];\n    for (var i = 0; i < listeners.length; i++) {\n      listeners[i].apply(this, args);\n    }\n  }\n};\n\nmodule.exports = EventTarget;\n","'use strict';\n\nvar inherits = require('inherits')\n  , EventTarget = require('./eventtarget')\n  ;\n\nfunction EventEmitter() {\n  EventTarget.call(this);\n}\n\ninherits(EventEmitter, EventTarget);\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  if (type) {\n    delete this._listeners[type];\n  } else {\n    this._listeners = {};\n  }\n};\n\nEventEmitter.prototype.once = function(type, listener) {\n  var self = this\n    , fired = false;\n\n  function g() {\n    self.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  this.on(type, g);\n};\n\nEventEmitter.prototype.emit = function() {\n  var type = arguments[0];\n  var listeners = this._listeners[type];\n  if (!listeners) {\n    return;\n  }\n  // equivalent of Array.prototype.slice.call(arguments, 1);\n  var l = arguments.length;\n  var args = new Array(l - 1);\n  for (var ai = 1; ai < l; ai++) {\n    args[ai - 1] = arguments[ai];\n  }\n  for (var i = 0; i < listeners.length; i++) {\n    listeners[i].apply(this, args);\n  }\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener = EventTarget.prototype.addEventListener;\nEventEmitter.prototype.removeListener = EventTarget.prototype.removeEventListener;\n\nmodule.exports.EventEmitter = EventEmitter;\n","'use strict';\n\nvar Driver = global.WebSocket || global.MozWebSocket;\nif (Driver) {\n\tmodule.exports = function WebSocketBrowserDriver(url) {\n\t\treturn new Driver(url);\n\t};\n} else {\n\tmodule.exports = undefined;\n}\n","'use strict';\n\nvar utils = require('../utils/event')\n  , urlUtils = require('../utils/url')\n  , inherits = require('inherits')\n  , EventEmitter = require('events').EventEmitter\n  , WebsocketDriver = require('./driver/websocket')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:websocket');\n}\n\nfunction WebSocketTransport(transUrl, ignore, options) {\n  if (!WebSocketTransport.enabled()) {\n    throw new Error('Transport created when disabled');\n  }\n\n  EventEmitter.call(this);\n  debug('constructor', transUrl);\n\n  var self = this;\n  var url = urlUtils.addPath(transUrl, '/websocket');\n  if (url.slice(0, 5) === 'https') {\n    url = 'wss' + url.slice(5);\n  } else {\n    url = 'ws' + url.slice(4);\n  }\n  this.url = url;\n\n  this.ws = new WebsocketDriver(this.url, [], options);\n  this.ws.onmessage = function(e) {\n    debug('message event', e.data);\n    self.emit('message', e.data);\n  };\n  // Firefox has an interesting bug. If a websocket connection is\n  // created after onunload, it stays alive even when user\n  // navigates away from the page. In such situation let's lie -\n  // let's not open the ws connection at all. See:\n  // https://github.com/sockjs/sockjs-client/issues/28\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=696085\n  this.unloadRef = utils.unloadAdd(function() {\n    debug('unload');\n    self.ws.close();\n  });\n  this.ws.onclose = function(e) {\n    debug('close event', e.code, e.reason);\n    self.emit('close', e.code, e.reason);\n    self._cleanup();\n  };\n  this.ws.onerror = function(e) {\n    debug('error event', e);\n    self.emit('close', 1006, 'WebSocket connection broken');\n    self._cleanup();\n  };\n}\n\ninherits(WebSocketTransport, EventEmitter);\n\nWebSocketTransport.prototype.send = function(data) {\n  var msg = '[' + data + ']';\n  debug('send', msg);\n  this.ws.send(msg);\n};\n\nWebSocketTransport.prototype.close = function() {\n  debug('close');\n  var ws = this.ws;\n  this._cleanup();\n  if (ws) {\n    ws.close();\n  }\n};\n\nWebSocketTransport.prototype._cleanup = function() {\n  debug('_cleanup');\n  var ws = this.ws;\n  if (ws) {\n    ws.onmessage = ws.onclose = ws.onerror = null;\n  }\n  utils.unloadDel(this.unloadRef);\n  this.unloadRef = this.ws = null;\n  this.removeAllListeners();\n};\n\nWebSocketTransport.enabled = function() {\n  debug('enabled');\n  return !!WebsocketDriver;\n};\nWebSocketTransport.transportName = 'websocket';\n\n// In theory, ws should require 1 round trip. But in chrome, this is\n// not very stable over SSL. Most likely a ws connection requires a\n// separate SSL connection, in which case 2 round trips are an\n// absolute minumum.\nWebSocketTransport.roundTrips = 2;\n\nmodule.exports = WebSocketTransport;\n","'use strict';\n\nvar inherits = require('inherits')\n  , EventEmitter = require('events').EventEmitter\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:buffered-sender');\n}\n\nfunction BufferedSender(url, sender) {\n  debug(url);\n  EventEmitter.call(this);\n  this.sendBuffer = [];\n  this.sender = sender;\n  this.url = url;\n}\n\ninherits(BufferedSender, EventEmitter);\n\nBufferedSender.prototype.send = function(message) {\n  debug('send', message);\n  this.sendBuffer.push(message);\n  if (!this.sendStop) {\n    this.sendSchedule();\n  }\n};\n\n// For polling transports in a situation when in the message callback,\n// new message is being send. If the sending connection was started\n// before receiving one, it is possible to saturate the network and\n// timeout due to the lack of receiving socket. To avoid that we delay\n// sending messages by some small time, in order to let receiving\n// connection be started beforehand. This is only a halfmeasure and\n// does not fix the big problem, but it does make the tests go more\n// stable on slow networks.\nBufferedSender.prototype.sendScheduleWait = function() {\n  debug('sendScheduleWait');\n  var self = this;\n  var tref;\n  this.sendStop = function() {\n    debug('sendStop');\n    self.sendStop = null;\n    clearTimeout(tref);\n  };\n  tref = setTimeout(function() {\n    debug('timeout');\n    self.sendStop = null;\n    self.sendSchedule();\n  }, 25);\n};\n\nBufferedSender.prototype.sendSchedule = function() {\n  debug('sendSchedule', this.sendBuffer.length);\n  var self = this;\n  if (this.sendBuffer.length > 0) {\n    var payload = '[' + this.sendBuffer.join(',') + ']';\n    this.sendStop = this.sender(this.url, payload, function(err) {\n      self.sendStop = null;\n      if (err) {\n        debug('error', err);\n        self.emit('close', err.code || 1006, 'Sending error: ' + err);\n        self.close();\n      } else {\n        self.sendScheduleWait();\n      }\n    });\n    this.sendBuffer = [];\n  }\n};\n\nBufferedSender.prototype._cleanup = function() {\n  debug('_cleanup');\n  this.removeAllListeners();\n};\n\nBufferedSender.prototype.close = function() {\n  debug('close');\n  this._cleanup();\n  if (this.sendStop) {\n    this.sendStop();\n    this.sendStop = null;\n  }\n};\n\nmodule.exports = BufferedSender;\n","'use strict';\n\nvar inherits = require('inherits')\n  , EventEmitter = require('events').EventEmitter\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:polling');\n}\n\nfunction Polling(Receiver, receiveUrl, AjaxObject) {\n  debug(receiveUrl);\n  EventEmitter.call(this);\n  this.Receiver = Receiver;\n  this.receiveUrl = receiveUrl;\n  this.AjaxObject = AjaxObject;\n  this._scheduleReceiver();\n}\n\ninherits(Polling, EventEmitter);\n\nPolling.prototype._scheduleReceiver = function() {\n  debug('_scheduleReceiver');\n  var self = this;\n  var poll = this.poll = new this.Receiver(this.receiveUrl, this.AjaxObject);\n\n  poll.on('message', function(msg) {\n    debug('message', msg);\n    self.emit('message', msg);\n  });\n\n  poll.once('close', function(code, reason) {\n    debug('close', code, reason, self.pollIsClosing);\n    self.poll = poll = null;\n\n    if (!self.pollIsClosing) {\n      if (reason === 'network') {\n        self._scheduleReceiver();\n      } else {\n        self.emit('close', code || 1006, reason);\n        self.removeAllListeners();\n      }\n    }\n  });\n};\n\nPolling.prototype.abort = function() {\n  debug('abort');\n  this.removeAllListeners();\n  this.pollIsClosing = true;\n  if (this.poll) {\n    this.poll.abort();\n  }\n};\n\nmodule.exports = Polling;\n","'use strict';\n\nvar inherits = require('inherits')\n  , urlUtils = require('../../utils/url')\n  , BufferedSender = require('./buffered-sender')\n  , Polling = require('./polling')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:sender-receiver');\n}\n\nfunction SenderReceiver(transUrl, urlSuffix, senderFunc, Receiver, AjaxObject) {\n  var pollUrl = urlUtils.addPath(transUrl, urlSuffix);\n  debug(pollUrl);\n  var self = this;\n  BufferedSender.call(this, transUrl, senderFunc);\n\n  this.poll = new Polling(Receiver, pollUrl, AjaxObject);\n  this.poll.on('message', function(msg) {\n    debug('poll message', msg);\n    self.emit('message', msg);\n  });\n  this.poll.once('close', function(code, reason) {\n    debug('poll close', code, reason);\n    self.poll = null;\n    self.emit('close', code, reason);\n    self.close();\n  });\n}\n\ninherits(SenderReceiver, BufferedSender);\n\nSenderReceiver.prototype.close = function() {\n  BufferedSender.prototype.close.call(this);\n  debug('close');\n  this.removeAllListeners();\n  if (this.poll) {\n    this.poll.abort();\n    this.poll = null;\n  }\n};\n\nmodule.exports = SenderReceiver;\n","'use strict';\n\nvar inherits = require('inherits')\n  , urlUtils = require('../../utils/url')\n  , SenderReceiver = require('./sender-receiver')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:ajax-based');\n}\n\nfunction createAjaxSender(AjaxObject) {\n  return function(url, payload, callback) {\n    debug('create ajax sender', url, payload);\n    var opt = {};\n    if (typeof payload === 'string') {\n      opt.headers = {'Content-type': 'text/plain'};\n    }\n    var ajaxUrl = urlUtils.addPath(url, '/xhr_send');\n    var xo = new AjaxObject('POST', ajaxUrl, payload, opt);\n    xo.once('finish', function(status) {\n      debug('finish', status);\n      xo = null;\n\n      if (status !== 200 && status !== 204) {\n        return callback(new Error('http status ' + status));\n      }\n      callback();\n    });\n    return function() {\n      debug('abort');\n      xo.close();\n      xo = null;\n\n      var err = new Error('Aborted');\n      err.code = 1000;\n      callback(err);\n    };\n  };\n}\n\nfunction AjaxBasedTransport(transUrl, urlSuffix, Receiver, AjaxObject) {\n  SenderReceiver.call(this, transUrl, urlSuffix, createAjaxSender(AjaxObject), Receiver, AjaxObject);\n}\n\ninherits(AjaxBasedTransport, SenderReceiver);\n\nmodule.exports = AjaxBasedTransport;\n","'use strict';\n\nvar inherits = require('inherits')\n  , EventEmitter = require('events').EventEmitter\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:receiver:xhr');\n}\n\nfunction XhrReceiver(url, AjaxObject) {\n  debug(url);\n  EventEmitter.call(this);\n  var self = this;\n\n  this.bufferPosition = 0;\n\n  this.xo = new AjaxObject('POST', url, null);\n  this.xo.on('chunk', this._chunkHandler.bind(this));\n  this.xo.once('finish', function(status, text) {\n    debug('finish', status, text);\n    self._chunkHandler(status, text);\n    self.xo = null;\n    var reason = status === 200 ? 'network' : 'permanent';\n    debug('close', reason);\n    self.emit('close', null, reason);\n    self._cleanup();\n  });\n}\n\ninherits(XhrReceiver, EventEmitter);\n\nXhrReceiver.prototype._chunkHandler = function(status, text) {\n  debug('_chunkHandler', status);\n  if (status !== 200 || !text) {\n    return;\n  }\n\n  for (var idx = -1; ; this.bufferPosition += idx + 1) {\n    var buf = text.slice(this.bufferPosition);\n    idx = buf.indexOf('\\n');\n    if (idx === -1) {\n      break;\n    }\n    var msg = buf.slice(0, idx);\n    if (msg) {\n      debug('message', msg);\n      this.emit('message', msg);\n    }\n  }\n};\n\nXhrReceiver.prototype._cleanup = function() {\n  debug('_cleanup');\n  this.removeAllListeners();\n};\n\nXhrReceiver.prototype.abort = function() {\n  debug('abort');\n  if (this.xo) {\n    this.xo.close();\n    debug('close');\n    this.emit('close', null, 'user');\n    this.xo = null;\n  }\n  this._cleanup();\n};\n\nmodule.exports = XhrReceiver;\n","'use strict';\n\nvar EventEmitter = require('events').EventEmitter\n  , inherits = require('inherits')\n  , utils = require('../../utils/event')\n  , urlUtils = require('../../utils/url')\n  , XHR = global.XMLHttpRequest\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:browser:xhr');\n}\n\nfunction AbstractXHRObject(method, url, payload, opts) {\n  debug(method, url);\n  var self = this;\n  EventEmitter.call(this);\n\n  setTimeout(function () {\n    self._start(method, url, payload, opts);\n  }, 0);\n}\n\ninherits(AbstractXHRObject, EventEmitter);\n\nAbstractXHRObject.prototype._start = function(method, url, payload, opts) {\n  var self = this;\n\n  try {\n    this.xhr = new XHR();\n  } catch (x) {\n    // intentionally empty\n  }\n\n  if (!this.xhr) {\n    debug('no xhr');\n    this.emit('finish', 0, 'no xhr support');\n    this._cleanup();\n    return;\n  }\n\n  // several browsers cache POSTs\n  url = urlUtils.addQuery(url, 't=' + (+new Date()));\n\n  // Explorer tends to keep connection open, even after the\n  // tab gets closed: http://bugs.jquery.com/ticket/5280\n  this.unloadRef = utils.unloadAdd(function() {\n    debug('unload cleanup');\n    self._cleanup(true);\n  });\n  try {\n    this.xhr.open(method, url, true);\n    if (this.timeout && 'timeout' in this.xhr) {\n      this.xhr.timeout = this.timeout;\n      this.xhr.ontimeout = function() {\n        debug('xhr timeout');\n        self.emit('finish', 0, '');\n        self._cleanup(false);\n      };\n    }\n  } catch (e) {\n    debug('exception', e);\n    // IE raises an exception on wrong port.\n    this.emit('finish', 0, '');\n    this._cleanup(false);\n    return;\n  }\n\n  if ((!opts || !opts.noCredentials) && AbstractXHRObject.supportsCORS) {\n    debug('withCredentials');\n    // Mozilla docs says https://developer.mozilla.org/en/XMLHttpRequest :\n    // \"This never affects same-site requests.\"\n\n    this.xhr.withCredentials = true;\n  }\n  if (opts && opts.headers) {\n    for (var key in opts.headers) {\n      this.xhr.setRequestHeader(key, opts.headers[key]);\n    }\n  }\n\n  this.xhr.onreadystatechange = function() {\n    if (self.xhr) {\n      var x = self.xhr;\n      var text, status;\n      debug('readyState', x.readyState);\n      switch (x.readyState) {\n      case 3:\n        // IE doesn't like peeking into responseText or status\n        // on Microsoft.XMLHTTP and readystate=3\n        try {\n          status = x.status;\n          text = x.responseText;\n        } catch (e) {\n          // intentionally empty\n        }\n        debug('status', status);\n        // IE returns 1223 for 204: http://bugs.jquery.com/ticket/1450\n        if (status === 1223) {\n          status = 204;\n        }\n\n        // IE does return readystate == 3 for 404 answers.\n        if (status === 200 && text && text.length > 0) {\n          debug('chunk');\n          self.emit('chunk', status, text);\n        }\n        break;\n      case 4:\n        status = x.status;\n        debug('status', status);\n        // IE returns 1223 for 204: http://bugs.jquery.com/ticket/1450\n        if (status === 1223) {\n          status = 204;\n        }\n        // IE returns this for a bad port\n        // http://msdn.microsoft.com/en-us/library/windows/desktop/aa383770(v=vs.85).aspx\n        if (status === 12005 || status === 12029) {\n          status = 0;\n        }\n\n        debug('finish', status, x.responseText);\n        self.emit('finish', status, x.responseText);\n        self._cleanup(false);\n        break;\n      }\n    }\n  };\n\n  try {\n    self.xhr.send(payload);\n  } catch (e) {\n    self.emit('finish', 0, '');\n    self._cleanup(false);\n  }\n};\n\nAbstractXHRObject.prototype._cleanup = function(abort) {\n  debug('cleanup');\n  if (!this.xhr) {\n    return;\n  }\n  this.removeAllListeners();\n  utils.unloadDel(this.unloadRef);\n\n  // IE needs this field to be a function\n  this.xhr.onreadystatechange = function() {};\n  if (this.xhr.ontimeout) {\n    this.xhr.ontimeout = null;\n  }\n\n  if (abort) {\n    try {\n      this.xhr.abort();\n    } catch (x) {\n      // intentionally empty\n    }\n  }\n  this.unloadRef = this.xhr = null;\n};\n\nAbstractXHRObject.prototype.close = function() {\n  debug('close');\n  this._cleanup(true);\n};\n\nAbstractXHRObject.enabled = !!XHR;\n// override XMLHttpRequest for IE6/7\n// obfuscate to avoid firewalls\nvar axo = ['Active'].concat('Object').join('X');\nif (!AbstractXHRObject.enabled && (axo in global)) {\n  debug('overriding xmlhttprequest');\n  XHR = function() {\n    try {\n      return new global[axo]('Microsoft.XMLHTTP');\n    } catch (e) {\n      return null;\n    }\n  };\n  AbstractXHRObject.enabled = !!new XHR();\n}\n\nvar cors = false;\ntry {\n  cors = 'withCredentials' in new XHR();\n} catch (ignored) {\n  // intentionally empty\n}\n\nAbstractXHRObject.supportsCORS = cors;\n\nmodule.exports = AbstractXHRObject;\n","'use strict';\n\nvar inherits = require('inherits')\n  , XhrDriver = require('../driver/xhr')\n  ;\n\nfunction XHRCorsObject(method, url, payload, opts) {\n  XhrDriver.call(this, method, url, payload, opts);\n}\n\ninherits(XHRCorsObject, XhrDriver);\n\nXHRCorsObject.enabled = XhrDriver.enabled && XhrDriver.supportsCORS;\n\nmodule.exports = XHRCorsObject;\n","'use strict';\n\nvar inherits = require('inherits')\n  , XhrDriver = require('../driver/xhr')\n  ;\n\nfunction XHRLocalObject(method, url, payload /*, opts */) {\n  XhrDriver.call(this, method, url, payload, {\n    noCredentials: true\n  });\n}\n\ninherits(XHRLocalObject, XhrDriver);\n\nXHRLocalObject.enabled = XhrDriver.enabled;\n\nmodule.exports = XHRLocalObject;\n","'use strict';\n\nmodule.exports = {\n  isOpera: function() {\n    return global.navigator &&\n      /opera/i.test(global.navigator.userAgent);\n  }\n\n, isKonqueror: function() {\n    return global.navigator &&\n      /konqueror/i.test(global.navigator.userAgent);\n  }\n\n  // #187 wrap document.domain in try/catch because of WP8 from file:///\n, hasDomain: function () {\n    // non-browser client always has a domain\n    if (!global.document) {\n      return true;\n    }\n\n    try {\n      return !!global.document.domain;\n    } catch (e) {\n      return false;\n    }\n  }\n};\n","'use strict';\n\nvar inherits = require('inherits')\n  , AjaxBasedTransport = require('./lib/ajax-based')\n  , XhrReceiver = require('./receiver/xhr')\n  , XHRCorsObject = require('./sender/xhr-cors')\n  , XHRLocalObject = require('./sender/xhr-local')\n  , browser = require('../utils/browser')\n  ;\n\nfunction XhrStreamingTransport(transUrl) {\n  if (!XHRLocalObject.enabled && !XHRCorsObject.enabled) {\n    throw new Error('Transport created when disabled');\n  }\n  AjaxBasedTransport.call(this, transUrl, '/xhr_streaming', XhrReceiver, XHRCorsObject);\n}\n\ninherits(XhrStreamingTransport, AjaxBasedTransport);\n\nXhrStreamingTransport.enabled = function(info) {\n  if (info.nullOrigin) {\n    return false;\n  }\n  // Opera doesn't support xhr-streaming #60\n  // But it might be able to #92\n  if (browser.isOpera()) {\n    return false;\n  }\n\n  return XHRCorsObject.enabled;\n};\n\nXhrStreamingTransport.transportName = 'xhr-streaming';\nXhrStreamingTransport.roundTrips = 2; // preflight, ajax\n\n// Safari gets confused when a streaming ajax request is started\n// before onload. This causes the load indicator to spin indefinetely.\n// Only require body when used in a browser\nXhrStreamingTransport.needBody = !!global.document;\n\nmodule.exports = XhrStreamingTransport;\n","'use strict';\n\nvar EventEmitter = require('events').EventEmitter\n  , inherits = require('inherits')\n  , eventUtils = require('../../utils/event')\n  , browser = require('../../utils/browser')\n  , urlUtils = require('../../utils/url')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:sender:xdr');\n}\n\n// References:\n//   http://ajaxian.com/archives/100-line-ajax-wrapper\n//   http://msdn.microsoft.com/en-us/library/cc288060(v=VS.85).aspx\n\nfunction XDRObject(method, url, payload) {\n  debug(method, url);\n  var self = this;\n  EventEmitter.call(this);\n\n  setTimeout(function() {\n    self._start(method, url, payload);\n  }, 0);\n}\n\ninherits(XDRObject, EventEmitter);\n\nXDRObject.prototype._start = function(method, url, payload) {\n  debug('_start');\n  var self = this;\n  var xdr = new global.XDomainRequest();\n  // IE caches even POSTs\n  url = urlUtils.addQuery(url, 't=' + (+new Date()));\n\n  xdr.onerror = function() {\n    debug('onerror');\n    self._error();\n  };\n  xdr.ontimeout = function() {\n    debug('ontimeout');\n    self._error();\n  };\n  xdr.onprogress = function() {\n    debug('progress', xdr.responseText);\n    self.emit('chunk', 200, xdr.responseText);\n  };\n  xdr.onload = function() {\n    debug('load');\n    self.emit('finish', 200, xdr.responseText);\n    self._cleanup(false);\n  };\n  this.xdr = xdr;\n  this.unloadRef = eventUtils.unloadAdd(function() {\n    self._cleanup(true);\n  });\n  try {\n    // Fails with AccessDenied if port number is bogus\n    this.xdr.open(method, url);\n    if (this.timeout) {\n      this.xdr.timeout = this.timeout;\n    }\n    this.xdr.send(payload);\n  } catch (x) {\n    this._error();\n  }\n};\n\nXDRObject.prototype._error = function() {\n  this.emit('finish', 0, '');\n  this._cleanup(false);\n};\n\nXDRObject.prototype._cleanup = function(abort) {\n  debug('cleanup', abort);\n  if (!this.xdr) {\n    return;\n  }\n  this.removeAllListeners();\n  eventUtils.unloadDel(this.unloadRef);\n\n  this.xdr.ontimeout = this.xdr.onerror = this.xdr.onprogress = this.xdr.onload = null;\n  if (abort) {\n    try {\n      this.xdr.abort();\n    } catch (x) {\n      // intentionally empty\n    }\n  }\n  this.unloadRef = this.xdr = null;\n};\n\nXDRObject.prototype.close = function() {\n  debug('close');\n  this._cleanup(true);\n};\n\n// IE 8/9 if the request target uses the same scheme - #79\nXDRObject.enabled = !!(global.XDomainRequest && browser.hasDomain());\n\nmodule.exports = XDRObject;\n","'use strict';\n\nvar inherits = require('inherits')\n  , AjaxBasedTransport = require('./lib/ajax-based')\n  , XhrReceiver = require('./receiver/xhr')\n  , XDRObject = require('./sender/xdr')\n  ;\n\n// According to:\n//   http://stackoverflow.com/questions/1641507/detect-browser-support-for-cross-domain-xmlhttprequests\n//   http://hacks.mozilla.org/2009/07/cross-site-xmlhttprequest-with-cors/\n\nfunction XdrStreamingTransport(transUrl) {\n  if (!XDRObject.enabled) {\n    throw new Error('Transport created when disabled');\n  }\n  AjaxBasedTransport.call(this, transUrl, '/xhr_streaming', XhrReceiver, XDRObject);\n}\n\ninherits(XdrStreamingTransport, AjaxBasedTransport);\n\nXdrStreamingTransport.enabled = function(info) {\n  if (info.cookie_needed || info.nullOrigin) {\n    return false;\n  }\n  return XDRObject.enabled && info.sameScheme;\n};\n\nXdrStreamingTransport.transportName = 'xdr-streaming';\nXdrStreamingTransport.roundTrips = 2; // preflight, ajax\n\nmodule.exports = XdrStreamingTransport;\n","module.exports = global.EventSource;\n","'use strict';\n\nvar inherits = require('inherits')\n  , EventEmitter = require('events').EventEmitter\n  , EventSourceDriver = require('eventsource')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:receiver:eventsource');\n}\n\nfunction EventSourceReceiver(url) {\n  debug(url);\n  EventEmitter.call(this);\n\n  var self = this;\n  var es = this.es = new EventSourceDriver(url);\n  es.onmessage = function(e) {\n    debug('message', e.data);\n    self.emit('message', decodeURI(e.data));\n  };\n  es.onerror = function(e) {\n    debug('error', es.readyState, e);\n    // ES on reconnection has readyState = 0 or 1.\n    // on network error it's CLOSED = 2\n    var reason = (es.readyState !== 2 ? 'network' : 'permanent');\n    self._cleanup();\n    self._close(reason);\n  };\n}\n\ninherits(EventSourceReceiver, EventEmitter);\n\nEventSourceReceiver.prototype.abort = function() {\n  debug('abort');\n  this._cleanup();\n  this._close('user');\n};\n\nEventSourceReceiver.prototype._cleanup = function() {\n  debug('cleanup');\n  var es = this.es;\n  if (es) {\n    es.onmessage = es.onerror = null;\n    es.close();\n    this.es = null;\n  }\n};\n\nEventSourceReceiver.prototype._close = function(reason) {\n  debug('close', reason);\n  var self = this;\n  // Safari and chrome < 15 crash if we close window before\n  // waiting for ES cleanup. See:\n  // https://code.google.com/p/chromium/issues/detail?id=89155\n  setTimeout(function() {\n    self.emit('close', null, reason);\n    self.removeAllListeners();\n  }, 200);\n};\n\nmodule.exports = EventSourceReceiver;\n","'use strict';\n\nvar inherits = require('inherits')\n  , AjaxBasedTransport = require('./lib/ajax-based')\n  , EventSourceReceiver = require('./receiver/eventsource')\n  , XHRCorsObject = require('./sender/xhr-cors')\n  , EventSourceDriver = require('eventsource')\n  ;\n\nfunction EventSourceTransport(transUrl) {\n  if (!EventSourceTransport.enabled()) {\n    throw new Error('Transport created when disabled');\n  }\n\n  AjaxBasedTransport.call(this, transUrl, '/eventsource', EventSourceReceiver, XHRCorsObject);\n}\n\ninherits(EventSourceTransport, AjaxBasedTransport);\n\nEventSourceTransport.enabled = function() {\n  return !!EventSourceDriver;\n};\n\nEventSourceTransport.transportName = 'eventsource';\nEventSourceTransport.roundTrips = 2;\n\nmodule.exports = EventSourceTransport;\n","module.exports = '1.6.1';\n","'use strict';\n\nvar eventUtils = require('./event')\n  , browser = require('./browser')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:utils:iframe');\n}\n\nmodule.exports = {\n  WPrefix: '_jp'\n, currentWindowId: null\n\n, polluteGlobalNamespace: function() {\n    if (!(module.exports.WPrefix in global)) {\n      global[module.exports.WPrefix] = {};\n    }\n  }\n\n, postMessage: function(type, data) {\n    if (global.parent !== global) {\n      global.parent.postMessage(JSON.stringify({\n        windowId: module.exports.currentWindowId\n      , type: type\n      , data: data || ''\n      }), '*');\n    } else {\n      debug('Cannot postMessage, no parent window.', type, data);\n    }\n  }\n\n, createIframe: function(iframeUrl, errorCallback) {\n    var iframe = global.document.createElement('iframe');\n    var tref, unloadRef;\n    var unattach = function() {\n      debug('unattach');\n      clearTimeout(tref);\n      // Explorer had problems with that.\n      try {\n        iframe.onload = null;\n      } catch (x) {\n        // intentionally empty\n      }\n      iframe.onerror = null;\n    };\n    var cleanup = function() {\n      debug('cleanup');\n      if (iframe) {\n        unattach();\n        // This timeout makes chrome fire onbeforeunload event\n        // within iframe. Without the timeout it goes straight to\n        // onunload.\n        setTimeout(function() {\n          if (iframe) {\n            iframe.parentNode.removeChild(iframe);\n          }\n          iframe = null;\n        }, 0);\n        eventUtils.unloadDel(unloadRef);\n      }\n    };\n    var onerror = function(err) {\n      debug('onerror', err);\n      if (iframe) {\n        cleanup();\n        errorCallback(err);\n      }\n    };\n    var post = function(msg, origin) {\n      debug('post', msg, origin);\n      setTimeout(function() {\n        try {\n          // When the iframe is not loaded, IE raises an exception\n          // on 'contentWindow'.\n          if (iframe && iframe.contentWindow) {\n            iframe.contentWindow.postMessage(msg, origin);\n          }\n        } catch (x) {\n          // intentionally empty\n        }\n      }, 0);\n    };\n\n    iframe.src = iframeUrl;\n    iframe.style.display = 'none';\n    iframe.style.position = 'absolute';\n    iframe.onerror = function() {\n      onerror('onerror');\n    };\n    iframe.onload = function() {\n      debug('onload');\n      // `onload` is triggered before scripts on the iframe are\n      // executed. Give it few seconds to actually load stuff.\n      clearTimeout(tref);\n      tref = setTimeout(function() {\n        onerror('onload timeout');\n      }, 2000);\n    };\n    global.document.body.appendChild(iframe);\n    tref = setTimeout(function() {\n      onerror('timeout');\n    }, 15000);\n    unloadRef = eventUtils.unloadAdd(cleanup);\n    return {\n      post: post\n    , cleanup: cleanup\n    , loaded: unattach\n    };\n  }\n\n/* eslint no-undef: \"off\", new-cap: \"off\" */\n, createHtmlfile: function(iframeUrl, errorCallback) {\n    var axo = ['Active'].concat('Object').join('X');\n    var doc = new global[axo]('htmlfile');\n    var tref, unloadRef;\n    var iframe;\n    var unattach = function() {\n      clearTimeout(tref);\n      iframe.onerror = null;\n    };\n    var cleanup = function() {\n      if (doc) {\n        unattach();\n        eventUtils.unloadDel(unloadRef);\n        iframe.parentNode.removeChild(iframe);\n        iframe = doc = null;\n        CollectGarbage();\n      }\n    };\n    var onerror = function(r) {\n      debug('onerror', r);\n      if (doc) {\n        cleanup();\n        errorCallback(r);\n      }\n    };\n    var post = function(msg, origin) {\n      try {\n        // When the iframe is not loaded, IE raises an exception\n        // on 'contentWindow'.\n        setTimeout(function() {\n          if (iframe && iframe.contentWindow) {\n              iframe.contentWindow.postMessage(msg, origin);\n          }\n        }, 0);\n      } catch (x) {\n        // intentionally empty\n      }\n    };\n\n    doc.open();\n    doc.write('<html><s' + 'cript>' +\n              'document.domain=\"' + global.document.domain + '\";' +\n              '</s' + 'cript></html>');\n    doc.close();\n    doc.parentWindow[module.exports.WPrefix] = global[module.exports.WPrefix];\n    var c = doc.createElement('div');\n    doc.body.appendChild(c);\n    iframe = doc.createElement('iframe');\n    c.appendChild(iframe);\n    iframe.src = iframeUrl;\n    iframe.onerror = function() {\n      onerror('onerror');\n    };\n    tref = setTimeout(function() {\n      onerror('timeout');\n    }, 15000);\n    unloadRef = eventUtils.unloadAdd(cleanup);\n    return {\n      post: post\n    , cleanup: cleanup\n    , loaded: unattach\n    };\n  }\n};\n\nmodule.exports.iframeEnabled = false;\nif (global.document) {\n  // postMessage misbehaves in konqueror 4.6.5 - the messages are delivered with\n  // huge delay, or not at all.\n  module.exports.iframeEnabled = (typeof global.postMessage === 'function' ||\n    typeof global.postMessage === 'object') && (!browser.isKonqueror());\n}\n","'use strict';\n\n// Few cool transports do work only for same-origin. In order to make\n// them work cross-domain we shall use iframe, served from the\n// remote domain. New browsers have capabilities to communicate with\n// cross domain iframe using postMessage(). In IE it was implemented\n// from IE 8+, but of course, IE got some details wrong:\n//    http://msdn.microsoft.com/en-us/library/cc197015(v=VS.85).aspx\n//    http://stevesouders.com/misc/test-postmessage.php\n\nvar inherits = require('inherits')\n  , EventEmitter = require('events').EventEmitter\n  , version = require('../version')\n  , urlUtils = require('../utils/url')\n  , iframeUtils = require('../utils/iframe')\n  , eventUtils = require('../utils/event')\n  , random = require('../utils/random')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:transport:iframe');\n}\n\nfunction IframeTransport(transport, transUrl, baseUrl) {\n  if (!IframeTransport.enabled()) {\n    throw new Error('Transport created when disabled');\n  }\n  EventEmitter.call(this);\n\n  var self = this;\n  this.origin = urlUtils.getOrigin(baseUrl);\n  this.baseUrl = baseUrl;\n  this.transUrl = transUrl;\n  this.transport = transport;\n  this.windowId = random.string(8);\n\n  var iframeUrl = urlUtils.addPath(baseUrl, '/iframe.html') + '#' + this.windowId;\n  debug(transport, transUrl, iframeUrl);\n\n  this.iframeObj = iframeUtils.createIframe(iframeUrl, function(r) {\n    debug('err callback');\n    self.emit('close', 1006, 'Unable to load an iframe (' + r + ')');\n    self.close();\n  });\n\n  this.onmessageCallback = this._message.bind(this);\n  eventUtils.attachEvent('message', this.onmessageCallback);\n}\n\ninherits(IframeTransport, EventEmitter);\n\nIframeTransport.prototype.close = function() {\n  debug('close');\n  this.removeAllListeners();\n  if (this.iframeObj) {\n    eventUtils.detachEvent('message', this.onmessageCallback);\n    try {\n      // When the iframe is not loaded, IE raises an exception\n      // on 'contentWindow'.\n      this.postMessage('c');\n    } catch (x) {\n      // intentionally empty\n    }\n    this.iframeObj.cleanup();\n    this.iframeObj = null;\n    this.onmessageCallback = this.iframeObj = null;\n  }\n};\n\nIframeTransport.prototype._message = function(e) {\n  debug('message', e.data);\n  if (!urlUtils.isOriginEqual(e.origin, this.origin)) {\n    debug('not same origin', e.origin, this.origin);\n    return;\n  }\n\n  var iframeMessage;\n  try {\n    iframeMessage = JSON.parse(e.data);\n  } catch (ignored) {\n    debug('bad json', e.data);\n    return;\n  }\n\n  if (iframeMessage.windowId !== this.windowId) {\n    debug('mismatched window id', iframeMessage.windowId, this.windowId);\n    return;\n  }\n\n  switch (iframeMessage.type) {\n  case 's':\n    this.iframeObj.loaded();\n    // window global dependency\n    this.postMessage('s', JSON.stringify([\n      version\n    , this.transport\n    , this.transUrl\n    , this.baseUrl\n    ]));\n    break;\n  case 't':\n    this.emit('message', iframeMessage.data);\n    break;\n  case 'c':\n    var cdata;\n    try {\n      cdata = JSON.parse(iframeMessage.data);\n    } catch (ignored) {\n      debug('bad json', iframeMessage.data);\n      return;\n    }\n    this.emit('close', cdata[0], cdata[1]);\n    this.close();\n    break;\n  }\n};\n\nIframeTransport.prototype.postMessage = function(type, data) {\n  debug('postMessage', type, data);\n  this.iframeObj.post(JSON.stringify({\n    windowId: this.windowId\n  , type: type\n  , data: data || ''\n  }), this.origin);\n};\n\nIframeTransport.prototype.send = function(message) {\n  debug('send', message);\n  this.postMessage('m', message);\n};\n\nIframeTransport.enabled = function() {\n  return iframeUtils.iframeEnabled;\n};\n\nIframeTransport.transportName = 'iframe';\nIframeTransport.roundTrips = 2;\n\nmodule.exports = IframeTransport;\n","'use strict';\n\nmodule.exports = {\n  isObject: function(obj) {\n    var type = typeof obj;\n    return type === 'function' || type === 'object' && !!obj;\n  }\n\n, extend: function(obj) {\n    if (!this.isObject(obj)) {\n      return obj;\n    }\n    var source, prop;\n    for (var i = 1, length = arguments.length; i < length; i++) {\n      source = arguments[i];\n      for (prop in source) {\n        if (Object.prototype.hasOwnProperty.call(source, prop)) {\n          obj[prop] = source[prop];\n        }\n      }\n    }\n    return obj;\n  }\n};\n","'use strict';\n\nvar inherits = require('inherits')\n  , IframeTransport = require('../iframe')\n  , objectUtils = require('../../utils/object')\n  ;\n\nmodule.exports = function(transport) {\n\n  function IframeWrapTransport(transUrl, baseUrl) {\n    IframeTransport.call(this, transport.transportName, transUrl, baseUrl);\n  }\n\n  inherits(IframeWrapTransport, IframeTransport);\n\n  IframeWrapTransport.enabled = function(url, info) {\n    if (!global.document) {\n      return false;\n    }\n\n    var iframeInfo = objectUtils.extend({}, info);\n    iframeInfo.sameOrigin = true;\n    return transport.enabled(iframeInfo) && IframeTransport.enabled();\n  };\n\n  IframeWrapTransport.transportName = 'iframe-' + transport.transportName;\n  IframeWrapTransport.needBody = true;\n  IframeWrapTransport.roundTrips = IframeTransport.roundTrips + transport.roundTrips - 1; // html, javascript (2) + transport - no CORS (1)\n\n  IframeWrapTransport.facadeTransport = transport;\n\n  return IframeWrapTransport;\n};\n","'use strict';\n\nvar inherits = require('inherits')\n  , iframeUtils = require('../../utils/iframe')\n  , urlUtils = require('../../utils/url')\n  , EventEmitter = require('events').EventEmitter\n  , random = require('../../utils/random')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:receiver:htmlfile');\n}\n\nfunction HtmlfileReceiver(url) {\n  debug(url);\n  EventEmitter.call(this);\n  var self = this;\n  iframeUtils.polluteGlobalNamespace();\n\n  this.id = 'a' + random.string(6);\n  url = urlUtils.addQuery(url, 'c=' + decodeURIComponent(iframeUtils.WPrefix + '.' + this.id));\n\n  debug('using htmlfile', HtmlfileReceiver.htmlfileEnabled);\n  var constructFunc = HtmlfileReceiver.htmlfileEnabled ?\n      iframeUtils.createHtmlfile : iframeUtils.createIframe;\n\n  global[iframeUtils.WPrefix][this.id] = {\n    start: function() {\n      debug('start');\n      self.iframeObj.loaded();\n    }\n  , message: function(data) {\n      debug('message', data);\n      self.emit('message', data);\n    }\n  , stop: function() {\n      debug('stop');\n      self._cleanup();\n      self._close('network');\n    }\n  };\n  this.iframeObj = constructFunc(url, function() {\n    debug('callback');\n    self._cleanup();\n    self._close('permanent');\n  });\n}\n\ninherits(HtmlfileReceiver, EventEmitter);\n\nHtmlfileReceiver.prototype.abort = function() {\n  debug('abort');\n  this._cleanup();\n  this._close('user');\n};\n\nHtmlfileReceiver.prototype._cleanup = function() {\n  debug('_cleanup');\n  if (this.iframeObj) {\n    this.iframeObj.cleanup();\n    this.iframeObj = null;\n  }\n  delete global[iframeUtils.WPrefix][this.id];\n};\n\nHtmlfileReceiver.prototype._close = function(reason) {\n  debug('_close', reason);\n  this.emit('close', null, reason);\n  this.removeAllListeners();\n};\n\nHtmlfileReceiver.htmlfileEnabled = false;\n\n// obfuscate to avoid firewalls\nvar axo = ['Active'].concat('Object').join('X');\nif (axo in global) {\n  try {\n    HtmlfileReceiver.htmlfileEnabled = !!new global[axo]('htmlfile');\n  } catch (x) {\n    // intentionally empty\n  }\n}\n\nHtmlfileReceiver.enabled = HtmlfileReceiver.htmlfileEnabled || iframeUtils.iframeEnabled;\n\nmodule.exports = HtmlfileReceiver;\n","'use strict';\n\nvar inherits = require('inherits')\n  , HtmlfileReceiver = require('./receiver/htmlfile')\n  , XHRLocalObject = require('./sender/xhr-local')\n  , AjaxBasedTransport = require('./lib/ajax-based')\n  ;\n\nfunction HtmlFileTransport(transUrl) {\n  if (!HtmlfileReceiver.enabled) {\n    throw new Error('Transport created when disabled');\n  }\n  AjaxBasedTransport.call(this, transUrl, '/htmlfile', HtmlfileReceiver, XHRLocalObject);\n}\n\ninherits(HtmlFileTransport, AjaxBasedTransport);\n\nHtmlFileTransport.enabled = function(info) {\n  return HtmlfileReceiver.enabled && info.sameOrigin;\n};\n\nHtmlFileTransport.transportName = 'htmlfile';\nHtmlFileTransport.roundTrips = 2;\n\nmodule.exports = HtmlFileTransport;\n","'use strict';\n\nvar inherits = require('inherits')\n  , AjaxBasedTransport = require('./lib/ajax-based')\n  , XhrReceiver = require('./receiver/xhr')\n  , XHRCorsObject = require('./sender/xhr-cors')\n  , XHRLocalObject = require('./sender/xhr-local')\n  ;\n\nfunction XhrPollingTransport(transUrl) {\n  if (!XHRLocalObject.enabled && !XHRCorsObject.enabled) {\n    throw new Error('Transport created when disabled');\n  }\n  AjaxBasedTransport.call(this, transUrl, '/xhr', XhrReceiver, XHRCorsObject);\n}\n\ninherits(XhrPollingTransport, AjaxBasedTransport);\n\nXhrPollingTransport.enabled = function(info) {\n  if (info.nullOrigin) {\n    return false;\n  }\n\n  if (XHRLocalObject.enabled && info.sameOrigin) {\n    return true;\n  }\n  return XHRCorsObject.enabled;\n};\n\nXhrPollingTransport.transportName = 'xhr-polling';\nXhrPollingTransport.roundTrips = 2; // preflight, ajax\n\nmodule.exports = XhrPollingTransport;\n","'use strict';\n\nvar inherits = require('inherits')\n  , AjaxBasedTransport = require('./lib/ajax-based')\n  , XdrStreamingTransport = require('./xdr-streaming')\n  , XhrReceiver = require('./receiver/xhr')\n  , XDRObject = require('./sender/xdr')\n  ;\n\nfunction XdrPollingTransport(transUrl) {\n  if (!XDRObject.enabled) {\n    throw new Error('Transport created when disabled');\n  }\n  AjaxBasedTransport.call(this, transUrl, '/xhr', XhrReceiver, XDRObject);\n}\n\ninherits(XdrPollingTransport, AjaxBasedTransport);\n\nXdrPollingTransport.enabled = XdrStreamingTransport.enabled;\nXdrPollingTransport.transportName = 'xdr-polling';\nXdrPollingTransport.roundTrips = 2; // preflight, ajax\n\nmodule.exports = XdrPollingTransport;\n","'use strict';\n\nvar utils = require('../../utils/iframe')\n  , random = require('../../utils/random')\n  , browser = require('../../utils/browser')\n  , urlUtils = require('../../utils/url')\n  , inherits = require('inherits')\n  , EventEmitter = require('events').EventEmitter\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:receiver:jsonp');\n}\n\nfunction JsonpReceiver(url) {\n  debug(url);\n  var self = this;\n  EventEmitter.call(this);\n\n  utils.polluteGlobalNamespace();\n\n  this.id = 'a' + random.string(6);\n  var urlWithId = urlUtils.addQuery(url, 'c=' + encodeURIComponent(utils.WPrefix + '.' + this.id));\n\n  global[utils.WPrefix][this.id] = this._callback.bind(this);\n  this._createScript(urlWithId);\n\n  // Fallback mostly for Konqueror - stupid timer, 35 seconds shall be plenty.\n  this.timeoutId = setTimeout(function() {\n    debug('timeout');\n    self._abort(new Error('JSONP script loaded abnormally (timeout)'));\n  }, JsonpReceiver.timeout);\n}\n\ninherits(JsonpReceiver, EventEmitter);\n\nJsonpReceiver.prototype.abort = function() {\n  debug('abort');\n  if (global[utils.WPrefix][this.id]) {\n    var err = new Error('JSONP user aborted read');\n    err.code = 1000;\n    this._abort(err);\n  }\n};\n\nJsonpReceiver.timeout = 35000;\nJsonpReceiver.scriptErrorTimeout = 1000;\n\nJsonpReceiver.prototype._callback = function(data) {\n  debug('_callback', data);\n  this._cleanup();\n\n  if (this.aborting) {\n    return;\n  }\n\n  if (data) {\n    debug('message', data);\n    this.emit('message', data);\n  }\n  this.emit('close', null, 'network');\n  this.removeAllListeners();\n};\n\nJsonpReceiver.prototype._abort = function(err) {\n  debug('_abort', err);\n  this._cleanup();\n  this.aborting = true;\n  this.emit('close', err.code, err.message);\n  this.removeAllListeners();\n};\n\nJsonpReceiver.prototype._cleanup = function() {\n  debug('_cleanup');\n  clearTimeout(this.timeoutId);\n  if (this.script2) {\n    this.script2.parentNode.removeChild(this.script2);\n    this.script2 = null;\n  }\n  if (this.script) {\n    var script = this.script;\n    // Unfortunately, you can't really abort script loading of\n    // the script.\n    script.parentNode.removeChild(script);\n    script.onreadystatechange = script.onerror =\n        script.onload = script.onclick = null;\n    this.script = null;\n  }\n  delete global[utils.WPrefix][this.id];\n};\n\nJsonpReceiver.prototype._scriptError = function() {\n  debug('_scriptError');\n  var self = this;\n  if (this.errorTimer) {\n    return;\n  }\n\n  this.errorTimer = setTimeout(function() {\n    if (!self.loadedOkay) {\n      self._abort(new Error('JSONP script loaded abnormally (onerror)'));\n    }\n  }, JsonpReceiver.scriptErrorTimeout);\n};\n\nJsonpReceiver.prototype._createScript = function(url) {\n  debug('_createScript', url);\n  var self = this;\n  var script = this.script = global.document.createElement('script');\n  var script2;  // Opera synchronous load trick.\n\n  script.id = 'a' + random.string(8);\n  script.src = url;\n  script.type = 'text/javascript';\n  script.charset = 'UTF-8';\n  script.onerror = this._scriptError.bind(this);\n  script.onload = function() {\n    debug('onload');\n    self._abort(new Error('JSONP script loaded abnormally (onload)'));\n  };\n\n  // IE9 fires 'error' event after onreadystatechange or before, in random order.\n  // Use loadedOkay to determine if actually errored\n  script.onreadystatechange = function() {\n    debug('onreadystatechange', script.readyState);\n    if (/loaded|closed/.test(script.readyState)) {\n      if (script && script.htmlFor && script.onclick) {\n        self.loadedOkay = true;\n        try {\n          // In IE, actually execute the script.\n          script.onclick();\n        } catch (x) {\n          // intentionally empty\n        }\n      }\n      if (script) {\n        self._abort(new Error('JSONP script loaded abnormally (onreadystatechange)'));\n      }\n    }\n  };\n  // IE: event/htmlFor/onclick trick.\n  // One can't rely on proper order for onreadystatechange. In order to\n  // make sure, set a 'htmlFor' and 'event' properties, so that\n  // script code will be installed as 'onclick' handler for the\n  // script object. Later, onreadystatechange, manually execute this\n  // code. FF and Chrome doesn't work with 'event' and 'htmlFor'\n  // set. For reference see:\n  //   http://jaubourg.net/2010/07/loading-script-as-onclick-handler-of.html\n  // Also, read on that about script ordering:\n  //   http://wiki.whatwg.org/wiki/Dynamic_Script_Execution_Order\n  if (typeof script.async === 'undefined' && global.document.attachEvent) {\n    // According to mozilla docs, in recent browsers script.async defaults\n    // to 'true', so we may use it to detect a good browser:\n    // https://developer.mozilla.org/en/HTML/Element/script\n    if (!browser.isOpera()) {\n      // Naively assume we're in IE\n      try {\n        script.htmlFor = script.id;\n        script.event = 'onclick';\n      } catch (x) {\n        // intentionally empty\n      }\n      script.async = true;\n    } else {\n      // Opera, second sync script hack\n      script2 = this.script2 = global.document.createElement('script');\n      script2.text = \"try{var a = document.getElementById('\" + script.id + \"'); if(a)a.onerror();}catch(x){};\";\n      script.async = script2.async = false;\n    }\n  }\n  if (typeof script.async !== 'undefined') {\n    script.async = true;\n  }\n\n  var head = global.document.getElementsByTagName('head')[0];\n  head.insertBefore(script, head.firstChild);\n  if (script2) {\n    head.insertBefore(script2, head.firstChild);\n  }\n};\n\nmodule.exports = JsonpReceiver;\n","'use strict';\n\nvar random = require('../../utils/random')\n  , urlUtils = require('../../utils/url')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:sender:jsonp');\n}\n\nvar form, area;\n\nfunction createIframe(id) {\n  debug('createIframe', id);\n  try {\n    // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n    return global.document.createElement('<iframe name=\"' + id + '\">');\n  } catch (x) {\n    var iframe = global.document.createElement('iframe');\n    iframe.name = id;\n    return iframe;\n  }\n}\n\nfunction createForm() {\n  debug('createForm');\n  form = global.document.createElement('form');\n  form.style.display = 'none';\n  form.style.position = 'absolute';\n  form.method = 'POST';\n  form.enctype = 'application/x-www-form-urlencoded';\n  form.acceptCharset = 'UTF-8';\n\n  area = global.document.createElement('textarea');\n  area.name = 'd';\n  form.appendChild(area);\n\n  global.document.body.appendChild(form);\n}\n\nmodule.exports = function(url, payload, callback) {\n  debug(url, payload);\n  if (!form) {\n    createForm();\n  }\n  var id = 'a' + random.string(8);\n  form.target = id;\n  form.action = urlUtils.addQuery(urlUtils.addPath(url, '/jsonp_send'), 'i=' + id);\n\n  var iframe = createIframe(id);\n  iframe.id = id;\n  iframe.style.display = 'none';\n  form.appendChild(iframe);\n\n  try {\n    area.value = payload;\n  } catch (e) {\n    // seriously broken browsers get here\n  }\n  form.submit();\n\n  var completed = function(err) {\n    debug('completed', id, err);\n    if (!iframe.onerror) {\n      return;\n    }\n    iframe.onreadystatechange = iframe.onerror = iframe.onload = null;\n    // Opera mini doesn't like if we GC iframe\n    // immediately, thus this timeout.\n    setTimeout(function() {\n      debug('cleaning up', id);\n      iframe.parentNode.removeChild(iframe);\n      iframe = null;\n    }, 500);\n    area.value = '';\n    // It is not possible to detect if the iframe succeeded or\n    // failed to submit our form.\n    callback(err);\n  };\n  iframe.onerror = function() {\n    debug('onerror', id);\n    completed();\n  };\n  iframe.onload = function() {\n    debug('onload', id);\n    completed();\n  };\n  iframe.onreadystatechange = function(e) {\n    debug('onreadystatechange', id, iframe.readyState, e);\n    if (iframe.readyState === 'complete') {\n      completed();\n    }\n  };\n  return function() {\n    debug('aborted', id);\n    completed(new Error('Aborted'));\n  };\n};\n","'use strict';\n\n// The simplest and most robust transport, using the well-know cross\n// domain hack - JSONP. This transport is quite inefficient - one\n// message could use up to one http request. But at least it works almost\n// everywhere.\n// Known limitations:\n//   o you will get a spinning cursor\n//   o for Konqueror a dumb timer is needed to detect errors\n\nvar inherits = require('inherits')\n  , SenderReceiver = require('./lib/sender-receiver')\n  , JsonpReceiver = require('./receiver/jsonp')\n  , jsonpSender = require('./sender/jsonp')\n  ;\n\nfunction JsonPTransport(transUrl) {\n  if (!JsonPTransport.enabled()) {\n    throw new Error('Transport created when disabled');\n  }\n  SenderReceiver.call(this, transUrl, '/jsonp', jsonpSender, JsonpReceiver);\n}\n\ninherits(JsonPTransport, SenderReceiver);\n\nJsonPTransport.enabled = function() {\n  return !!global.document;\n};\n\nJsonPTransport.transportName = 'jsonp-polling';\nJsonPTransport.roundTrips = 1;\nJsonPTransport.needBody = true;\n\nmodule.exports = JsonPTransport;\n","'use strict';\n\nmodule.exports = [\n  // streaming transports\n  require('./transport/websocket')\n, require('./transport/xhr-streaming')\n, require('./transport/xdr-streaming')\n, require('./transport/eventsource')\n, require('./transport/lib/iframe-wrap')(require('./transport/eventsource'))\n\n  // polling transports\n, require('./transport/htmlfile')\n, require('./transport/lib/iframe-wrap')(require('./transport/htmlfile'))\n, require('./transport/xhr-polling')\n, require('./transport/xdr-polling')\n, require('./transport/lib/iframe-wrap')(require('./transport/xhr-polling'))\n, require('./transport/jsonp-polling')\n];\n","/* eslint-disable */\n/* jscs: disable */\n'use strict';\n\n// pulled specific shims from https://github.com/es-shims/es5-shim\n\nvar ArrayPrototype = Array.prototype;\nvar ObjectPrototype = Object.prototype;\nvar FunctionPrototype = Function.prototype;\nvar StringPrototype = String.prototype;\nvar array_slice = ArrayPrototype.slice;\n\nvar _toString = ObjectPrototype.toString;\nvar isFunction = function (val) {\n    return ObjectPrototype.toString.call(val) === '[object Function]';\n};\nvar isArray = function isArray(obj) {\n    return _toString.call(obj) === '[object Array]';\n};\nvar isString = function isString(obj) {\n    return _toString.call(obj) === '[object String]';\n};\n\nvar supportsDescriptors = Object.defineProperty && (function () {\n    try {\n        Object.defineProperty({}, 'x', {});\n        return true;\n    } catch (e) { /* this is ES3 */\n        return false;\n    }\n}());\n\n// Define configurable, writable and non-enumerable props\n// if they don't exist.\nvar defineProperty;\nif (supportsDescriptors) {\n    defineProperty = function (object, name, method, forceAssign) {\n        if (!forceAssign && (name in object)) { return; }\n        Object.defineProperty(object, name, {\n            configurable: true,\n            enumerable: false,\n            writable: true,\n            value: method\n        });\n    };\n} else {\n    defineProperty = function (object, name, method, forceAssign) {\n        if (!forceAssign && (name in object)) { return; }\n        object[name] = method;\n    };\n}\nvar defineProperties = function (object, map, forceAssign) {\n    for (var name in map) {\n        if (ObjectPrototype.hasOwnProperty.call(map, name)) {\n          defineProperty(object, name, map[name], forceAssign);\n        }\n    }\n};\n\nvar toObject = function (o) {\n    if (o == null) { // this matches both null and undefined\n        throw new TypeError(\"can't convert \" + o + ' to object');\n    }\n    return Object(o);\n};\n\n//\n// Util\n// ======\n//\n\n// ES5 9.4\n// http://es5.github.com/#x9.4\n// http://jsperf.com/to-integer\n\nfunction toInteger(num) {\n    var n = +num;\n    if (n !== n) { // isNaN\n        n = 0;\n    } else if (n !== 0 && n !== (1 / 0) && n !== -(1 / 0)) {\n        n = (n > 0 || -1) * Math.floor(Math.abs(n));\n    }\n    return n;\n}\n\nfunction ToUint32(x) {\n    return x >>> 0;\n}\n\n//\n// Function\n// ========\n//\n\n// ES-5 15.3.4.5\n// http://es5.github.com/#x15.3.4.5\n\nfunction Empty() {}\n\ndefineProperties(FunctionPrototype, {\n    bind: function bind(that) { // .length is 1\n        // 1. Let Target be the this value.\n        var target = this;\n        // 2. If IsCallable(Target) is false, throw a TypeError exception.\n        if (!isFunction(target)) {\n            throw new TypeError('Function.prototype.bind called on incompatible ' + target);\n        }\n        // 3. Let A be a new (possibly empty) internal list of all of the\n        //   argument values provided after thisArg (arg1, arg2 etc), in order.\n        // XXX slicedArgs will stand in for \"A\" if used\n        var args = array_slice.call(arguments, 1); // for normal call\n        // 4. Let F be a new native ECMAScript object.\n        // 11. Set the [[Prototype]] internal property of F to the standard\n        //   built-in Function prototype object as specified in 15.3.3.1.\n        // 12. Set the [[Call]] internal property of F as described in\n        //   15.3.4.5.1.\n        // 13. Set the [[Construct]] internal property of F as described in\n        //   15.3.4.5.2.\n        // 14. Set the [[HasInstance]] internal property of F as described in\n        //   15.3.4.5.3.\n        var binder = function () {\n\n            if (this instanceof bound) {\n                // 15.3.4.5.2 [[Construct]]\n                // When the [[Construct]] internal method of a function object,\n                // F that was created using the bind function is called with a\n                // list of arguments ExtraArgs, the following steps are taken:\n                // 1. Let target be the value of F's [[TargetFunction]]\n                //   internal property.\n                // 2. If target has no [[Construct]] internal method, a\n                //   TypeError exception is thrown.\n                // 3. Let boundArgs be the value of F's [[BoundArgs]] internal\n                //   property.\n                // 4. Let args be a new list containing the same values as the\n                //   list boundArgs in the same order followed by the same\n                //   values as the list ExtraArgs in the same order.\n                // 5. Return the result of calling the [[Construct]] internal\n                //   method of target providing args as the arguments.\n\n                var result = target.apply(\n                    this,\n                    args.concat(array_slice.call(arguments))\n                );\n                if (Object(result) === result) {\n                    return result;\n                }\n                return this;\n\n            } else {\n                // 15.3.4.5.1 [[Call]]\n                // When the [[Call]] internal method of a function object, F,\n                // which was created using the bind function is called with a\n                // this value and a list of arguments ExtraArgs, the following\n                // steps are taken:\n                // 1. Let boundArgs be the value of F's [[BoundArgs]] internal\n                //   property.\n                // 2. Let boundThis be the value of F's [[BoundThis]] internal\n                //   property.\n                // 3. Let target be the value of F's [[TargetFunction]] internal\n                //   property.\n                // 4. Let args be a new list containing the same values as the\n                //   list boundArgs in the same order followed by the same\n                //   values as the list ExtraArgs in the same order.\n                // 5. Return the result of calling the [[Call]] internal method\n                //   of target providing boundThis as the this value and\n                //   providing args as the arguments.\n\n                // equiv: target.call(this, ...boundArgs, ...args)\n                return target.apply(\n                    that,\n                    args.concat(array_slice.call(arguments))\n                );\n\n            }\n\n        };\n\n        // 15. If the [[Class]] internal property of Target is \"Function\", then\n        //     a. Let L be the length property of Target minus the length of A.\n        //     b. Set the length own property of F to either 0 or L, whichever is\n        //       larger.\n        // 16. Else set the length own property of F to 0.\n\n        var boundLength = Math.max(0, target.length - args.length);\n\n        // 17. Set the attributes of the length own property of F to the values\n        //   specified in 15.3.5.1.\n        var boundArgs = [];\n        for (var i = 0; i < boundLength; i++) {\n            boundArgs.push('$' + i);\n        }\n\n        // XXX Build a dynamic function with desired amount of arguments is the only\n        // way to set the length property of a function.\n        // In environments where Content Security Policies enabled (Chrome extensions,\n        // for ex.) all use of eval or Function costructor throws an exception.\n        // However in all of these environments Function.prototype.bind exists\n        // and so this code will never be executed.\n        var bound = Function('binder', 'return function (' + boundArgs.join(',') + '){ return binder.apply(this, arguments); }')(binder);\n\n        if (target.prototype) {\n            Empty.prototype = target.prototype;\n            bound.prototype = new Empty();\n            // Clean up dangling references.\n            Empty.prototype = null;\n        }\n\n        // TODO\n        // 18. Set the [[Extensible]] internal property of F to true.\n\n        // TODO\n        // 19. Let thrower be the [[ThrowTypeError]] function Object (13.2.3).\n        // 20. Call the [[DefineOwnProperty]] internal method of F with\n        //   arguments \"caller\", PropertyDescriptor {[[Get]]: thrower, [[Set]]:\n        //   thrower, [[Enumerable]]: false, [[Configurable]]: false}, and\n        //   false.\n        // 21. Call the [[DefineOwnProperty]] internal method of F with\n        //   arguments \"arguments\", PropertyDescriptor {[[Get]]: thrower,\n        //   [[Set]]: thrower, [[Enumerable]]: false, [[Configurable]]: false},\n        //   and false.\n\n        // TODO\n        // NOTE Function objects created using Function.prototype.bind do not\n        // have a prototype property or the [[Code]], [[FormalParameters]], and\n        // [[Scope]] internal properties.\n        // XXX can't delete prototype in pure-js.\n\n        // 22. Return F.\n        return bound;\n    }\n});\n\n//\n// Array\n// =====\n//\n\n// ES5 15.4.3.2\n// http://es5.github.com/#x15.4.3.2\n// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/isArray\ndefineProperties(Array, { isArray: isArray });\n\n\nvar boxedString = Object('a');\nvar splitString = boxedString[0] !== 'a' || !(0 in boxedString);\n\nvar properlyBoxesContext = function properlyBoxed(method) {\n    // Check node 0.6.21 bug where third parameter is not boxed\n    var properlyBoxesNonStrict = true;\n    var properlyBoxesStrict = true;\n    if (method) {\n        method.call('foo', function (_, __, context) {\n            if (typeof context !== 'object') { properlyBoxesNonStrict = false; }\n        });\n\n        method.call([1], function () {\n            'use strict';\n            properlyBoxesStrict = typeof this === 'string';\n        }, 'x');\n    }\n    return !!method && properlyBoxesNonStrict && properlyBoxesStrict;\n};\n\ndefineProperties(ArrayPrototype, {\n    forEach: function forEach(fun /*, thisp*/) {\n        var object = toObject(this),\n            self = splitString && isString(this) ? this.split('') : object,\n            thisp = arguments[1],\n            i = -1,\n            length = self.length >>> 0;\n\n        // If no callback function or if callback is not a callable function\n        if (!isFunction(fun)) {\n            throw new TypeError(); // TODO message\n        }\n\n        while (++i < length) {\n            if (i in self) {\n                // Invoke the callback function with call, passing arguments:\n                // context, property value, property key, thisArg object\n                // context\n                fun.call(thisp, self[i], i, object);\n            }\n        }\n    }\n}, !properlyBoxesContext(ArrayPrototype.forEach));\n\n// ES5 15.4.4.14\n// http://es5.github.com/#x15.4.4.14\n// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf\nvar hasFirefox2IndexOfBug = Array.prototype.indexOf && [0, 1].indexOf(1, 2) !== -1;\ndefineProperties(ArrayPrototype, {\n    indexOf: function indexOf(sought /*, fromIndex */ ) {\n        var self = splitString && isString(this) ? this.split('') : toObject(this),\n            length = self.length >>> 0;\n\n        if (!length) {\n            return -1;\n        }\n\n        var i = 0;\n        if (arguments.length > 1) {\n            i = toInteger(arguments[1]);\n        }\n\n        // handle negative indices\n        i = i >= 0 ? i : Math.max(0, length + i);\n        for (; i < length; i++) {\n            if (i in self && self[i] === sought) {\n                return i;\n            }\n        }\n        return -1;\n    }\n}, hasFirefox2IndexOfBug);\n\n//\n// String\n// ======\n//\n\n// ES5 15.5.4.14\n// http://es5.github.com/#x15.5.4.14\n\n// [bugfix, IE lt 9, firefox 4, Konqueror, Opera, obscure browsers]\n// Many browsers do not split properly with regular expressions or they\n// do not perform the split correctly under obscure conditions.\n// See http://blog.stevenlevithan.com/archives/cross-browser-split\n// I've tested in many browsers and this seems to cover the deviant ones:\n//    'ab'.split(/(?:ab)*/) should be [\"\", \"\"], not [\"\"]\n//    '.'.split(/(.?)(.?)/) should be [\"\", \".\", \"\", \"\"], not [\"\", \"\"]\n//    'tesst'.split(/(s)*/) should be [\"t\", undefined, \"e\", \"s\", \"t\"], not\n//       [undefined, \"t\", undefined, \"e\", ...]\n//    ''.split(/.?/) should be [], not [\"\"]\n//    '.'.split(/()()/) should be [\".\"], not [\"\", \"\", \".\"]\n\nvar string_split = StringPrototype.split;\nif (\n    'ab'.split(/(?:ab)*/).length !== 2 ||\n    '.'.split(/(.?)(.?)/).length !== 4 ||\n    'tesst'.split(/(s)*/)[1] === 't' ||\n    'test'.split(/(?:)/, -1).length !== 4 ||\n    ''.split(/.?/).length ||\n    '.'.split(/()()/).length > 1\n) {\n    (function () {\n        var compliantExecNpcg = /()??/.exec('')[1] === void 0; // NPCG: nonparticipating capturing group\n\n        StringPrototype.split = function (separator, limit) {\n            var string = this;\n            if (separator === void 0 && limit === 0) {\n                return [];\n            }\n\n            // If `separator` is not a regex, use native split\n            if (_toString.call(separator) !== '[object RegExp]') {\n                return string_split.call(this, separator, limit);\n            }\n\n            var output = [],\n                flags = (separator.ignoreCase ? 'i' : '') +\n                        (separator.multiline  ? 'm' : '') +\n                        (separator.extended   ? 'x' : '') + // Proposed for ES6\n                        (separator.sticky     ? 'y' : ''), // Firefox 3+\n                lastLastIndex = 0,\n                // Make `global` and avoid `lastIndex` issues by working with a copy\n                separator2, match, lastIndex, lastLength;\n            separator = new RegExp(separator.source, flags + 'g');\n            string += ''; // Type-convert\n            if (!compliantExecNpcg) {\n                // Doesn't need flags gy, but they don't hurt\n                separator2 = new RegExp('^' + separator.source + '$(?!\\\\s)', flags);\n            }\n            /* Values for `limit`, per the spec:\n             * If undefined: 4294967295 // Math.pow(2, 32) - 1\n             * If 0, Infinity, or NaN: 0\n             * If positive number: limit = Math.floor(limit); if (limit > 4294967295) limit -= 4294967296;\n             * If negative number: 4294967296 - Math.floor(Math.abs(limit))\n             * If other: Type-convert, then use the above rules\n             */\n            limit = limit === void 0 ?\n                -1 >>> 0 : // Math.pow(2, 32) - 1\n                ToUint32(limit);\n            while (match = separator.exec(string)) {\n                // `separator.lastIndex` is not reliable cross-browser\n                lastIndex = match.index + match[0].length;\n                if (lastIndex > lastLastIndex) {\n                    output.push(string.slice(lastLastIndex, match.index));\n                    // Fix browsers whose `exec` methods don't consistently return `undefined` for\n                    // nonparticipating capturing groups\n                    if (!compliantExecNpcg && match.length > 1) {\n                        match[0].replace(separator2, function () {\n                            for (var i = 1; i < arguments.length - 2; i++) {\n                                if (arguments[i] === void 0) {\n                                    match[i] = void 0;\n                                }\n                            }\n                        });\n                    }\n                    if (match.length > 1 && match.index < string.length) {\n                        ArrayPrototype.push.apply(output, match.slice(1));\n                    }\n                    lastLength = match[0].length;\n                    lastLastIndex = lastIndex;\n                    if (output.length >= limit) {\n                        break;\n                    }\n                }\n                if (separator.lastIndex === match.index) {\n                    separator.lastIndex++; // Avoid an infinite loop\n                }\n            }\n            if (lastLastIndex === string.length) {\n                if (lastLength || !separator.test('')) {\n                    output.push('');\n                }\n            } else {\n                output.push(string.slice(lastLastIndex));\n            }\n            return output.length > limit ? output.slice(0, limit) : output;\n        };\n    }());\n\n// [bugfix, chrome]\n// If separator is undefined, then the result array contains just one String,\n// which is the this value (converted to a String). If limit is not undefined,\n// then the output array is truncated so that it contains no more than limit\n// elements.\n// \"0\".split(undefined, 0) -> []\n} else if ('0'.split(void 0, 0).length) {\n    StringPrototype.split = function split(separator, limit) {\n        if (separator === void 0 && limit === 0) { return []; }\n        return string_split.call(this, separator, limit);\n    };\n}\n\n// ECMA-262, 3rd B.2.3\n// Not an ECMAScript standard, although ECMAScript 3rd Edition has a\n// non-normative section suggesting uniform semantics and it should be\n// normalized across all browsers\n// [bugfix, IE lt 9] IE < 9 substr() with negative value not working in IE\nvar string_substr = StringPrototype.substr;\nvar hasNegativeSubstrBug = ''.substr && '0b'.substr(-1) !== 'b';\ndefineProperties(StringPrototype, {\n    substr: function substr(start, length) {\n        return string_substr.call(\n            this,\n            start < 0 ? ((start = this.length + start) < 0 ? 0 : start) : start,\n            length\n        );\n    }\n}, hasNegativeSubstrBug);\n","'use strict';\n\n// Some extra characters that Chrome gets wrong, and substitutes with\n// something else on the wire.\n// eslint-disable-next-line no-control-regex, no-misleading-character-class\nvar extraEscapable = /[\\x00-\\x1f\\ud800-\\udfff\\ufffe\\uffff\\u0300-\\u0333\\u033d-\\u0346\\u034a-\\u034c\\u0350-\\u0352\\u0357-\\u0358\\u035c-\\u0362\\u0374\\u037e\\u0387\\u0591-\\u05af\\u05c4\\u0610-\\u0617\\u0653-\\u0654\\u0657-\\u065b\\u065d-\\u065e\\u06df-\\u06e2\\u06eb-\\u06ec\\u0730\\u0732-\\u0733\\u0735-\\u0736\\u073a\\u073d\\u073f-\\u0741\\u0743\\u0745\\u0747\\u07eb-\\u07f1\\u0951\\u0958-\\u095f\\u09dc-\\u09dd\\u09df\\u0a33\\u0a36\\u0a59-\\u0a5b\\u0a5e\\u0b5c-\\u0b5d\\u0e38-\\u0e39\\u0f43\\u0f4d\\u0f52\\u0f57\\u0f5c\\u0f69\\u0f72-\\u0f76\\u0f78\\u0f80-\\u0f83\\u0f93\\u0f9d\\u0fa2\\u0fa7\\u0fac\\u0fb9\\u1939-\\u193a\\u1a17\\u1b6b\\u1cda-\\u1cdb\\u1dc0-\\u1dcf\\u1dfc\\u1dfe\\u1f71\\u1f73\\u1f75\\u1f77\\u1f79\\u1f7b\\u1f7d\\u1fbb\\u1fbe\\u1fc9\\u1fcb\\u1fd3\\u1fdb\\u1fe3\\u1feb\\u1fee-\\u1fef\\u1ff9\\u1ffb\\u1ffd\\u2000-\\u2001\\u20d0-\\u20d1\\u20d4-\\u20d7\\u20e7-\\u20e9\\u2126\\u212a-\\u212b\\u2329-\\u232a\\u2adc\\u302b-\\u302c\\uaab2-\\uaab3\\uf900-\\ufa0d\\ufa10\\ufa12\\ufa15-\\ufa1e\\ufa20\\ufa22\\ufa25-\\ufa26\\ufa2a-\\ufa2d\\ufa30-\\ufa6d\\ufa70-\\ufad9\\ufb1d\\ufb1f\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40-\\ufb41\\ufb43-\\ufb44\\ufb46-\\ufb4e\\ufff0-\\uffff]/g\n  , extraLookup;\n\n// This may be quite slow, so let's delay until user actually uses bad\n// characters.\nvar unrollLookup = function(escapable) {\n  var i;\n  var unrolled = {};\n  var c = [];\n  for (i = 0; i < 65536; i++) {\n    c.push( String.fromCharCode(i) );\n  }\n  escapable.lastIndex = 0;\n  c.join('').replace(escapable, function(a) {\n    unrolled[ a ] = '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n    return '';\n  });\n  escapable.lastIndex = 0;\n  return unrolled;\n};\n\n// Quote string, also taking care of unicode characters that browsers\n// often break. Especially, take care of unicode surrogates:\n// http://en.wikipedia.org/wiki/Mapping_of_Unicode_characters#Surrogates\nmodule.exports = {\n  quote: function(string) {\n    var quoted = JSON.stringify(string);\n\n    // In most cases this should be very fast and good enough.\n    extraEscapable.lastIndex = 0;\n    if (!extraEscapable.test(quoted)) {\n      return quoted;\n    }\n\n    if (!extraLookup) {\n      extraLookup = unrollLookup(extraEscapable);\n    }\n\n    return quoted.replace(extraEscapable, function(a) {\n      return extraLookup[a];\n    });\n  }\n};\n","'use strict';\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:utils:transport');\n}\n\nmodule.exports = function(availableTransports) {\n  return {\n    filterToEnabled: function(transportsWhitelist, info) {\n      var transports = {\n        main: []\n      , facade: []\n      };\n      if (!transportsWhitelist) {\n        transportsWhitelist = [];\n      } else if (typeof transportsWhitelist === 'string') {\n        transportsWhitelist = [transportsWhitelist];\n      }\n\n      availableTransports.forEach(function(trans) {\n        if (!trans) {\n          return;\n        }\n\n        if (trans.transportName === 'websocket' && info.websocket === false) {\n          debug('disabled from server', 'websocket');\n          return;\n        }\n\n        if (transportsWhitelist.length &&\n            transportsWhitelist.indexOf(trans.transportName) === -1) {\n          debug('not in whitelist', trans.transportName);\n          return;\n        }\n\n        if (trans.enabled(info)) {\n          debug('enabled', trans.transportName);\n          transports.main.push(trans);\n          if (trans.facadeTransport) {\n            transports.facade.push(trans.facadeTransport);\n          }\n        } else {\n          debug('disabled', trans.transportName);\n        }\n      });\n      return transports;\n    }\n  };\n};\n","'use strict';\n\nvar logObject = {};\n['log', 'debug', 'warn'].forEach(function (level) {\n  var levelExists;\n\n  try {\n    levelExists = global.console && global.console[level] && global.console[level].apply;\n  } catch(e) {\n    // do nothing\n  }\n\n  logObject[level] = levelExists ? function () {\n    return global.console[level].apply(global.console, arguments);\n  } : (level === 'log' ? function () {} : logObject.log);\n});\n\nmodule.exports = logObject;\n","'use strict';\n\nfunction Event(eventType) {\n  this.type = eventType;\n}\n\nEvent.prototype.initEvent = function(eventType, canBubble, cancelable) {\n  this.type = eventType;\n  this.bubbles = canBubble;\n  this.cancelable = cancelable;\n  this.timeStamp = +new Date();\n  return this;\n};\n\nEvent.prototype.stopPropagation = function() {};\nEvent.prototype.preventDefault = function() {};\n\nEvent.CAPTURING_PHASE = 1;\nEvent.AT_TARGET = 2;\nEvent.BUBBLING_PHASE = 3;\n\nmodule.exports = Event;\n","'use strict';\n\nmodule.exports = global.location || {\n  origin: 'http://localhost:80'\n, protocol: 'http:'\n, host: 'localhost'\n, port: 80\n, href: 'http://localhost/'\n, hash: ''\n};\n","'use strict';\n\nvar inherits = require('inherits')\n  , Event = require('./event')\n  ;\n\nfunction CloseEvent() {\n  Event.call(this);\n  this.initEvent('close', false, false);\n  this.wasClean = false;\n  this.code = 0;\n  this.reason = '';\n}\n\ninherits(CloseEvent, Event);\n\nmodule.exports = CloseEvent;\n","'use strict';\n\nvar inherits = require('inherits')\n  , Event = require('./event')\n  ;\n\nfunction TransportMessageEvent(data) {\n  Event.call(this);\n  this.initEvent('message', false, false);\n  this.data = data;\n}\n\ninherits(TransportMessageEvent, Event);\n\nmodule.exports = TransportMessageEvent;\n","'use strict';\n\nvar EventEmitter = require('events').EventEmitter\n  , inherits = require('inherits')\n  ;\n\nfunction XHRFake(/* method, url, payload, opts */) {\n  var self = this;\n  EventEmitter.call(this);\n\n  this.to = setTimeout(function() {\n    self.emit('finish', 200, '{}');\n  }, XHRFake.timeout);\n}\n\ninherits(XHRFake, EventEmitter);\n\nXHRFake.prototype.close = function() {\n  clearTimeout(this.to);\n};\n\nXHRFake.timeout = 2000;\n\nmodule.exports = XHRFake;\n","'use strict';\n\nvar EventEmitter = require('events').EventEmitter\n  , inherits = require('inherits')\n  , objectUtils = require('./utils/object')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:info-ajax');\n}\n\nfunction InfoAjax(url, AjaxObject) {\n  EventEmitter.call(this);\n\n  var self = this;\n  var t0 = +new Date();\n  this.xo = new AjaxObject('GET', url);\n\n  this.xo.once('finish', function(status, text) {\n    var info, rtt;\n    if (status === 200) {\n      rtt = (+new Date()) - t0;\n      if (text) {\n        try {\n          info = JSON.parse(text);\n        } catch (e) {\n          debug('bad json', text);\n        }\n      }\n\n      if (!objectUtils.isObject(info)) {\n        info = {};\n      }\n    }\n    self.emit('finish', info, rtt);\n    self.removeAllListeners();\n  });\n}\n\ninherits(InfoAjax, EventEmitter);\n\nInfoAjax.prototype.close = function() {\n  this.removeAllListeners();\n  this.xo.close();\n};\n\nmodule.exports = InfoAjax;\n","'use strict';\n\nvar inherits = require('inherits')\n  , EventEmitter = require('events').EventEmitter\n  , XHRLocalObject = require('./transport/sender/xhr-local')\n  , InfoAjax = require('./info-ajax')\n  ;\n\nfunction InfoReceiverIframe(transUrl) {\n  var self = this;\n  EventEmitter.call(this);\n\n  this.ir = new InfoAjax(transUrl, XHRLocalObject);\n  this.ir.once('finish', function(info, rtt) {\n    self.ir = null;\n    self.emit('message', JSON.stringify([info, rtt]));\n  });\n}\n\ninherits(InfoReceiverIframe, EventEmitter);\n\nInfoReceiverIframe.transportName = 'iframe-info-receiver';\n\nInfoReceiverIframe.prototype.close = function() {\n  if (this.ir) {\n    this.ir.close();\n    this.ir = null;\n  }\n  this.removeAllListeners();\n};\n\nmodule.exports = InfoReceiverIframe;\n","'use strict';\n\nvar EventEmitter = require('events').EventEmitter\n  , inherits = require('inherits')\n  , utils = require('./utils/event')\n  , IframeTransport = require('./transport/iframe')\n  , InfoReceiverIframe = require('./info-iframe-receiver')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:info-iframe');\n}\n\nfunction InfoIframe(baseUrl, url) {\n  var self = this;\n  EventEmitter.call(this);\n\n  var go = function() {\n    var ifr = self.ifr = new IframeTransport(InfoReceiverIframe.transportName, url, baseUrl);\n\n    ifr.once('message', function(msg) {\n      if (msg) {\n        var d;\n        try {\n          d = JSON.parse(msg);\n        } catch (e) {\n          debug('bad json', msg);\n          self.emit('finish');\n          self.close();\n          return;\n        }\n\n        var info = d[0], rtt = d[1];\n        self.emit('finish', info, rtt);\n      }\n      self.close();\n    });\n\n    ifr.once('close', function() {\n      self.emit('finish');\n      self.close();\n    });\n  };\n\n  // TODO this seems the same as the 'needBody' from transports\n  if (!global.document.body) {\n    utils.attachEvent('load', go);\n  } else {\n    go();\n  }\n}\n\ninherits(InfoIframe, EventEmitter);\n\nInfoIframe.enabled = function() {\n  return IframeTransport.enabled();\n};\n\nInfoIframe.prototype.close = function() {\n  if (this.ifr) {\n    this.ifr.close();\n  }\n  this.removeAllListeners();\n  this.ifr = null;\n};\n\nmodule.exports = InfoIframe;\n","'use strict';\n\nvar EventEmitter = require('events').EventEmitter\n  , inherits = require('inherits')\n  , urlUtils = require('./utils/url')\n  , XDR = require('./transport/sender/xdr')\n  , XHRCors = require('./transport/sender/xhr-cors')\n  , XHRLocal = require('./transport/sender/xhr-local')\n  , XHRFake = require('./transport/sender/xhr-fake')\n  , InfoIframe = require('./info-iframe')\n  , InfoAjax = require('./info-ajax')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:info-receiver');\n}\n\nfunction InfoReceiver(baseUrl, urlInfo) {\n  debug(baseUrl);\n  var self = this;\n  EventEmitter.call(this);\n\n  setTimeout(function() {\n    self.doXhr(baseUrl, urlInfo);\n  }, 0);\n}\n\ninherits(InfoReceiver, EventEmitter);\n\n// TODO this is currently ignoring the list of available transports and the whitelist\n\nInfoReceiver._getReceiver = function(baseUrl, url, urlInfo) {\n  // determine method of CORS support (if needed)\n  if (urlInfo.sameOrigin) {\n    return new InfoAjax(url, XHRLocal);\n  }\n  if (XHRCors.enabled) {\n    return new InfoAjax(url, XHRCors);\n  }\n  if (XDR.enabled && urlInfo.sameScheme) {\n    return new InfoAjax(url, XDR);\n  }\n  if (InfoIframe.enabled()) {\n    return new InfoIframe(baseUrl, url);\n  }\n  return new InfoAjax(url, XHRFake);\n};\n\nInfoReceiver.prototype.doXhr = function(baseUrl, urlInfo) {\n  var self = this\n    , url = urlUtils.addPath(baseUrl, '/info')\n    ;\n  debug('doXhr', url);\n\n  this.xo = InfoReceiver._getReceiver(baseUrl, url, urlInfo);\n\n  this.timeoutRef = setTimeout(function() {\n    debug('timeout');\n    self._cleanup(false);\n    self.emit('finish');\n  }, InfoReceiver.timeout);\n\n  this.xo.once('finish', function(info, rtt) {\n    debug('finish', info, rtt);\n    self._cleanup(true);\n    self.emit('finish', info, rtt);\n  });\n};\n\nInfoReceiver.prototype._cleanup = function(wasClean) {\n  debug('_cleanup');\n  clearTimeout(this.timeoutRef);\n  this.timeoutRef = null;\n  if (!wasClean && this.xo) {\n    this.xo.close();\n  }\n  this.xo = null;\n};\n\nInfoReceiver.prototype.close = function() {\n  debug('close');\n  this.removeAllListeners();\n  this._cleanup(false);\n};\n\nInfoReceiver.timeout = 8000;\n\nmodule.exports = InfoReceiver;\n","'use strict';\n\nvar iframeUtils = require('./utils/iframe')\n  ;\n\nfunction FacadeJS(transport) {\n  this._transport = transport;\n  transport.on('message', this._transportMessage.bind(this));\n  transport.on('close', this._transportClose.bind(this));\n}\n\nFacadeJS.prototype._transportClose = function(code, reason) {\n  iframeUtils.postMessage('c', JSON.stringify([code, reason]));\n};\nFacadeJS.prototype._transportMessage = function(frame) {\n  iframeUtils.postMessage('t', frame);\n};\nFacadeJS.prototype._send = function(data) {\n  this._transport.send(data);\n};\nFacadeJS.prototype._close = function() {\n  this._transport.close();\n  this._transport.removeAllListeners();\n};\n\nmodule.exports = FacadeJS;\n","'use strict';\n\nvar urlUtils = require('./utils/url')\n  , eventUtils = require('./utils/event')\n  , FacadeJS = require('./facade')\n  , InfoIframeReceiver = require('./info-iframe-receiver')\n  , iframeUtils = require('./utils/iframe')\n  , loc = require('./location')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:iframe-bootstrap');\n}\n\nmodule.exports = function(SockJS, availableTransports) {\n  var transportMap = {};\n  availableTransports.forEach(function(at) {\n    if (at.facadeTransport) {\n      transportMap[at.facadeTransport.transportName] = at.facadeTransport;\n    }\n  });\n\n  // hard-coded for the info iframe\n  // TODO see if we can make this more dynamic\n  transportMap[InfoIframeReceiver.transportName] = InfoIframeReceiver;\n  var parentOrigin;\n\n  /* eslint-disable camelcase */\n  SockJS.bootstrap_iframe = function() {\n    /* eslint-enable camelcase */\n    var facade;\n    iframeUtils.currentWindowId = loc.hash.slice(1);\n    var onMessage = function(e) {\n      if (e.source !== parent) {\n        return;\n      }\n      if (typeof parentOrigin === 'undefined') {\n        parentOrigin = e.origin;\n      }\n      if (e.origin !== parentOrigin) {\n        return;\n      }\n\n      var iframeMessage;\n      try {\n        iframeMessage = JSON.parse(e.data);\n      } catch (ignored) {\n        debug('bad json', e.data);\n        return;\n      }\n\n      if (iframeMessage.windowId !== iframeUtils.currentWindowId) {\n        return;\n      }\n      switch (iframeMessage.type) {\n      case 's':\n        var p;\n        try {\n          p = JSON.parse(iframeMessage.data);\n        } catch (ignored) {\n          debug('bad json', iframeMessage.data);\n          break;\n        }\n        var version = p[0];\n        var transport = p[1];\n        var transUrl = p[2];\n        var baseUrl = p[3];\n        debug(version, transport, transUrl, baseUrl);\n        // change this to semver logic\n        if (version !== SockJS.version) {\n          throw new Error('Incompatible SockJS! Main site uses:' +\n                    ' \"' + version + '\", the iframe:' +\n                    ' \"' + SockJS.version + '\".');\n        }\n\n        if (!urlUtils.isOriginEqual(transUrl, loc.href) ||\n            !urlUtils.isOriginEqual(baseUrl, loc.href)) {\n          throw new Error('Can\\'t connect to different domain from within an ' +\n                    'iframe. (' + loc.href + ', ' + transUrl + ', ' + baseUrl + ')');\n        }\n        facade = new FacadeJS(new transportMap[transport](transUrl, baseUrl));\n        break;\n      case 'm':\n        facade._send(iframeMessage.data);\n        break;\n      case 'c':\n        if (facade) {\n          facade._close();\n        }\n        facade = null;\n        break;\n      }\n    };\n\n    eventUtils.attachEvent('message', onMessage);\n\n    // Start\n    iframeUtils.postMessage('s');\n  };\n};\n","'use strict';\n\nrequire('./shims');\n\nvar URL = require('url-parse')\n  , inherits = require('inherits')\n  , random = require('./utils/random')\n  , escape = require('./utils/escape')\n  , urlUtils = require('./utils/url')\n  , eventUtils = require('./utils/event')\n  , transport = require('./utils/transport')\n  , objectUtils = require('./utils/object')\n  , browser = require('./utils/browser')\n  , log = require('./utils/log')\n  , Event = require('./event/event')\n  , EventTarget = require('./event/eventtarget')\n  , loc = require('./location')\n  , CloseEvent = require('./event/close')\n  , TransportMessageEvent = require('./event/trans-message')\n  , InfoReceiver = require('./info-receiver')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:main');\n}\n\nvar transports;\n\n// follow constructor steps defined at http://dev.w3.org/html5/websockets/#the-websocket-interface\nfunction SockJS(url, protocols, options) {\n  if (!(this instanceof SockJS)) {\n    return new SockJS(url, protocols, options);\n  }\n  if (arguments.length < 1) {\n    throw new TypeError(\"Failed to construct 'SockJS: 1 argument required, but only 0 present\");\n  }\n  EventTarget.call(this);\n\n  this.readyState = SockJS.CONNECTING;\n  this.extensions = '';\n  this.protocol = '';\n\n  // non-standard extension\n  options = options || {};\n  if (options.protocols_whitelist) {\n    log.warn(\"'protocols_whitelist' is DEPRECATED. Use 'transports' instead.\");\n  }\n  this._transportsWhitelist = options.transports;\n  this._transportOptions = options.transportOptions || {};\n  this._timeout = options.timeout || 0;\n\n  var sessionId = options.sessionId || 8;\n  if (typeof sessionId === 'function') {\n    this._generateSessionId = sessionId;\n  } else if (typeof sessionId === 'number') {\n    this._generateSessionId = function() {\n      return random.string(sessionId);\n    };\n  } else {\n    throw new TypeError('If sessionId is used in the options, it needs to be a number or a function.');\n  }\n\n  this._server = options.server || random.numberString(1000);\n\n  // Step 1 of WS spec - parse and validate the url. Issue #8\n  var parsedUrl = new URL(url);\n  if (!parsedUrl.host || !parsedUrl.protocol) {\n    throw new SyntaxError(\"The URL '\" + url + \"' is invalid\");\n  } else if (parsedUrl.hash) {\n    throw new SyntaxError('The URL must not contain a fragment');\n  } else if (parsedUrl.protocol !== 'http:' && parsedUrl.protocol !== 'https:') {\n    throw new SyntaxError(\"The URL's scheme must be either 'http:' or 'https:'. '\" + parsedUrl.protocol + \"' is not allowed.\");\n  }\n\n  var secure = parsedUrl.protocol === 'https:';\n  // Step 2 - don't allow secure origin with an insecure protocol\n  if (loc.protocol === 'https:' && !secure) {\n    // exception is 127.0.0.0/8 and ::1 urls\n    if (!urlUtils.isLoopbackAddr(parsedUrl.hostname)) {\n      throw new Error('SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS');\n    }\n  }\n\n  // Step 3 - check port access - no need here\n  // Step 4 - parse protocols argument\n  if (!protocols) {\n    protocols = [];\n  } else if (!Array.isArray(protocols)) {\n    protocols = [protocols];\n  }\n\n  // Step 5 - check protocols argument\n  var sortedProtocols = protocols.sort();\n  sortedProtocols.forEach(function(proto, i) {\n    if (!proto) {\n      throw new SyntaxError(\"The protocols entry '\" + proto + \"' is invalid.\");\n    }\n    if (i < (sortedProtocols.length - 1) && proto === sortedProtocols[i + 1]) {\n      throw new SyntaxError(\"The protocols entry '\" + proto + \"' is duplicated.\");\n    }\n  });\n\n  // Step 6 - convert origin\n  var o = urlUtils.getOrigin(loc.href);\n  this._origin = o ? o.toLowerCase() : null;\n\n  // remove the trailing slash\n  parsedUrl.set('pathname', parsedUrl.pathname.replace(/\\/+$/, ''));\n\n  // store the sanitized url\n  this.url = parsedUrl.href;\n  debug('using url', this.url);\n\n  // Step 7 - start connection in background\n  // obtain server info\n  // http://sockjs.github.io/sockjs-protocol/sockjs-protocol-0.3.3.html#section-26\n  this._urlInfo = {\n    nullOrigin: !browser.hasDomain()\n  , sameOrigin: urlUtils.isOriginEqual(this.url, loc.href)\n  , sameScheme: urlUtils.isSchemeEqual(this.url, loc.href)\n  };\n\n  this._ir = new InfoReceiver(this.url, this._urlInfo);\n  this._ir.once('finish', this._receiveInfo.bind(this));\n}\n\ninherits(SockJS, EventTarget);\n\nfunction userSetCode(code) {\n  return code === 1000 || (code >= 3000 && code <= 4999);\n}\n\nSockJS.prototype.close = function(code, reason) {\n  // Step 1\n  if (code && !userSetCode(code)) {\n    throw new Error('InvalidAccessError: Invalid code');\n  }\n  // Step 2.4 states the max is 123 bytes, but we are just checking length\n  if (reason && reason.length > 123) {\n    throw new SyntaxError('reason argument has an invalid length');\n  }\n\n  // Step 3.1\n  if (this.readyState === SockJS.CLOSING || this.readyState === SockJS.CLOSED) {\n    return;\n  }\n\n  // TODO look at docs to determine how to set this\n  var wasClean = true;\n  this._close(code || 1000, reason || 'Normal closure', wasClean);\n};\n\nSockJS.prototype.send = function(data) {\n  // #13 - convert anything non-string to string\n  // TODO this currently turns objects into [object Object]\n  if (typeof data !== 'string') {\n    data = '' + data;\n  }\n  if (this.readyState === SockJS.CONNECTING) {\n    throw new Error('InvalidStateError: The connection has not been established yet');\n  }\n  if (this.readyState !== SockJS.OPEN) {\n    return;\n  }\n  this._transport.send(escape.quote(data));\n};\n\nSockJS.version = require('./version');\n\nSockJS.CONNECTING = 0;\nSockJS.OPEN = 1;\nSockJS.CLOSING = 2;\nSockJS.CLOSED = 3;\n\nSockJS.prototype._receiveInfo = function(info, rtt) {\n  debug('_receiveInfo', rtt);\n  this._ir = null;\n  if (!info) {\n    this._close(1002, 'Cannot connect to server');\n    return;\n  }\n\n  // establish a round-trip timeout (RTO) based on the\n  // round-trip time (RTT)\n  this._rto = this.countRTO(rtt);\n  // allow server to override url used for the actual transport\n  this._transUrl = info.base_url ? info.base_url : this.url;\n  info = objectUtils.extend(info, this._urlInfo);\n  debug('info', info);\n  // determine list of desired and supported transports\n  var enabledTransports = transports.filterToEnabled(this._transportsWhitelist, info);\n  this._transports = enabledTransports.main;\n  debug(this._transports.length + ' enabled transports');\n\n  this._connect();\n};\n\nSockJS.prototype._connect = function() {\n  for (var Transport = this._transports.shift(); Transport; Transport = this._transports.shift()) {\n    debug('attempt', Transport.transportName);\n    if (Transport.needBody) {\n      if (!global.document.body ||\n          (typeof global.document.readyState !== 'undefined' &&\n            global.document.readyState !== 'complete' &&\n            global.document.readyState !== 'interactive')) {\n        debug('waiting for body');\n        this._transports.unshift(Transport);\n        eventUtils.attachEvent('load', this._connect.bind(this));\n        return;\n      }\n    }\n\n    // calculate timeout based on RTO and round trips. Default to 5s\n    var timeoutMs = Math.max(this._timeout, (this._rto * Transport.roundTrips) || 5000);\n    this._transportTimeoutId = setTimeout(this._transportTimeout.bind(this), timeoutMs);\n    debug('using timeout', timeoutMs);\n\n    var transportUrl = urlUtils.addPath(this._transUrl, '/' + this._server + '/' + this._generateSessionId());\n    var options = this._transportOptions[Transport.transportName];\n    debug('transport url', transportUrl);\n    var transportObj = new Transport(transportUrl, this._transUrl, options);\n    transportObj.on('message', this._transportMessage.bind(this));\n    transportObj.once('close', this._transportClose.bind(this));\n    transportObj.transportName = Transport.transportName;\n    this._transport = transportObj;\n\n    return;\n  }\n  this._close(2000, 'All transports failed', false);\n};\n\nSockJS.prototype._transportTimeout = function() {\n  debug('_transportTimeout');\n  if (this.readyState === SockJS.CONNECTING) {\n    if (this._transport) {\n      this._transport.close();\n    }\n\n    this._transportClose(2007, 'Transport timed out');\n  }\n};\n\nSockJS.prototype._transportMessage = function(msg) {\n  debug('_transportMessage', msg);\n  var self = this\n    , type = msg.slice(0, 1)\n    , content = msg.slice(1)\n    , payload\n    ;\n\n  // first check for messages that don't need a payload\n  switch (type) {\n    case 'o':\n      this._open();\n      return;\n    case 'h':\n      this.dispatchEvent(new Event('heartbeat'));\n      debug('heartbeat', this.transport);\n      return;\n  }\n\n  if (content) {\n    try {\n      payload = JSON.parse(content);\n    } catch (e) {\n      debug('bad json', content);\n    }\n  }\n\n  if (typeof payload === 'undefined') {\n    debug('empty payload', content);\n    return;\n  }\n\n  switch (type) {\n    case 'a':\n      if (Array.isArray(payload)) {\n        payload.forEach(function(p) {\n          debug('message', self.transport, p);\n          self.dispatchEvent(new TransportMessageEvent(p));\n        });\n      }\n      break;\n    case 'm':\n      debug('message', this.transport, payload);\n      this.dispatchEvent(new TransportMessageEvent(payload));\n      break;\n    case 'c':\n      if (Array.isArray(payload) && payload.length === 2) {\n        this._close(payload[0], payload[1], true);\n      }\n      break;\n  }\n};\n\nSockJS.prototype._transportClose = function(code, reason) {\n  debug('_transportClose', this.transport, code, reason);\n  if (this._transport) {\n    this._transport.removeAllListeners();\n    this._transport = null;\n    this.transport = null;\n  }\n\n  if (!userSetCode(code) && code !== 2000 && this.readyState === SockJS.CONNECTING) {\n    this._connect();\n    return;\n  }\n\n  this._close(code, reason);\n};\n\nSockJS.prototype._open = function() {\n  debug('_open', this._transport && this._transport.transportName, this.readyState);\n  if (this.readyState === SockJS.CONNECTING) {\n    if (this._transportTimeoutId) {\n      clearTimeout(this._transportTimeoutId);\n      this._transportTimeoutId = null;\n    }\n    this.readyState = SockJS.OPEN;\n    this.transport = this._transport.transportName;\n    this.dispatchEvent(new Event('open'));\n    debug('connected', this.transport);\n  } else {\n    // The server might have been restarted, and lost track of our\n    // connection.\n    this._close(1006, 'Server lost session');\n  }\n};\n\nSockJS.prototype._close = function(code, reason, wasClean) {\n  debug('_close', this.transport, code, reason, wasClean, this.readyState);\n  var forceFail = false;\n\n  if (this._ir) {\n    forceFail = true;\n    this._ir.close();\n    this._ir = null;\n  }\n  if (this._transport) {\n    this._transport.close();\n    this._transport = null;\n    this.transport = null;\n  }\n\n  if (this.readyState === SockJS.CLOSED) {\n    throw new Error('InvalidStateError: SockJS has already been closed');\n  }\n\n  this.readyState = SockJS.CLOSING;\n  setTimeout(function() {\n    this.readyState = SockJS.CLOSED;\n\n    if (forceFail) {\n      this.dispatchEvent(new Event('error'));\n    }\n\n    var e = new CloseEvent('close');\n    e.wasClean = wasClean || false;\n    e.code = code || 1000;\n    e.reason = reason;\n\n    this.dispatchEvent(e);\n    this.onmessage = this.onclose = this.onerror = null;\n    debug('disconnected');\n  }.bind(this), 0);\n};\n\n// See: http://www.erg.abdn.ac.uk/~gerrit/dccp/notes/ccid2/rto_estimator/\n// and RFC 2988.\nSockJS.prototype.countRTO = function(rtt) {\n  // In a local environment, when using IE8/9 and the `jsonp-polling`\n  // transport the time needed to establish a connection (the time that pass\n  // from the opening of the transport to the call of `_dispatchOpen`) is\n  // around 200msec (the lower bound used in the article above) and this\n  // causes spurious timeouts. For this reason we calculate a value slightly\n  // larger than that used in the article.\n  if (rtt > 100) {\n    return 4 * rtt; // rto > 400msec\n  }\n  return 300 + rtt; // 300msec < rto <= 400msec\n};\n\nmodule.exports = function(availableTransports) {\n  transports = transport(availableTransports);\n  require('./iframe-bootstrap')(SockJS, availableTransports);\n  return SockJS;\n};\n","'use strict';\n\nvar transportList = require('./transport-list');\n\nmodule.exports = require('./main')(transportList);\n\n// TODO can't get rid of this until all servers do\nif ('_sockjs_onload' in global) {\n  setTimeout(global._sockjs_onload, 1);\n}\n","/**\n * Realtime event subscriptions over STOMP/WebSocket.\n *\n * Manages a shared STOMP client with auto-reconnect and provides typed subscription\n * helpers for search progress, search results, and book cover update topics.\n */\nimport { Client, type IFrame } from \"@stomp/stompjs\";\nimport SockJS from \"sockjs-client\";\nimport type { z } from \"zod/v4\";\nimport {\n  BookCoverUpdateEventSchema,\n  SearchProgressEventSchema,\n  SearchResultsEventSchema,\n} from \"$lib/validation/schemas\";\nimport { validateWithSchema } from \"$lib/validation/validate\";\n\nconst STOMP_RECONNECT_DELAY_MS = 5000;\nconst STOMP_HEARTBEAT_INCOMING_MS = 20000;\nconst STOMP_HEARTBEAT_OUTGOING_MS = 10000;\n\n/**\n * Discriminated union representing the STOMP connection lifecycle.\n * Prevents temporal coupling between sharedClient and connectionPromise.\n */\ntype ConnectionState =\n  | { status: \"idle\" }\n  | { status: \"connecting\"; pending: Promise<Client> }\n  | { status: \"connected\"; client: Client };\n\nlet connection: ConnectionState = { status: \"idle\" };\n\nfunction buildClient(): Client {\n  return new Client({\n    webSocketFactory: () => new SockJS(\"/ws\"),\n    reconnectDelay: STOMP_RECONNECT_DELAY_MS,\n    heartbeatIncoming: STOMP_HEARTBEAT_INCOMING_MS,\n    heartbeatOutgoing: STOMP_HEARTBEAT_OUTGOING_MS,\n  });\n}\n\nfunction parseMessagePayload<T>(messageBody: string, recordId: string, schema: z.ZodType<T>): T | null {\n  let payload: unknown;\n  try {\n    payload = JSON.parse(messageBody);\n  } catch (error) {\n    console.warn(`Failed to parse ${recordId} payload`, error);\n    return null;\n  }\n\n  const validation = validateWithSchema(schema, payload, recordId);\n  if (!validation.success) {\n    return null;\n  }\n  return validation.data;\n}\n\nexport async function ensureRealtimeClient(): Promise<Client> {\n  if (connection.status === \"connected\" && connection.client.connected) {\n    return connection.client;\n  }\n\n  if (connection.status === \"connecting\") {\n    return connection.pending;\n  }\n\n  const pending = new Promise<Client>((resolve, reject) => {\n    const client = buildClient();\n    client.onConnect = (_frame: IFrame) => {\n      connection = { status: \"connected\", client };\n      resolve(client);\n    };\n    client.onStompError = (frame) => {\n      connection = { status: \"idle\" };\n      reject(new Error(frame.body || \"STOMP connection failed\"));\n    };\n    client.onWebSocketError = (event) => {\n      console.error(\"WebSocket error\", event);\n    };\n    client.activate();\n  }).catch((error) => {\n    connection = { status: \"idle\" };\n    throw error;\n  });\n\n  connection = { status: \"connecting\", pending };\n  return pending;\n}\n\nexport async function subscribeToSearchTopics(\n  queryHash: string,\n  onProgress: (message: string) => void,\n  onResults: (results: unknown[]) => void,\n): Promise<() => void> {\n  const client = await ensureRealtimeClient();\n\n  const progressSub = client.subscribe(`/topic/search/${queryHash}/progress`, (message) => {\n    const payload = parseMessagePayload(message.body, \"searchProgressEvent\", SearchProgressEventSchema);\n    if (!payload) {\n      // Intentional non-critical graceful degradation: progress messages are informational-only,\n      // so a parse failure falls back to a generic message rather than breaking the search flow.\n      console.warn(\"Failed to parse search progress event, falling back to default message\");\n      onProgress(\"Searching...\");\n      return;\n    }\n    onProgress(payload.message ?? \"Searching...\");\n  });\n\n  const resultsSub = client.subscribe(`/topic/search/${queryHash}/results`, (message) => {\n    const payload = parseMessagePayload(message.body, \"searchResultsEvent\", SearchResultsEventSchema);\n    if (!payload) {\n      // Intentional non-critical graceful degradation: a malformed results frame is dropped rather\n      // than surfaced as an error, because the HTTP search response is the authoritative source.\n      console.warn(\"Failed to parse search results event, falling back to empty results\");\n      onResults([]);\n      return;\n    }\n    onResults(payload.newResults);\n  });\n\n  return () => {\n    progressSub.unsubscribe();\n    resultsSub.unsubscribe();\n  };\n}\n\nexport async function subscribeToBookCoverUpdates(\n  bookId: string,\n  onCoverUpdate: (coverUrl: string) => void,\n): Promise<() => void> {\n  const client = await ensureRealtimeClient();\n  const sub = client.subscribe(`/topic/book/${bookId}/coverUpdate`, (message) => {\n    const payload = parseMessagePayload(message.body, \"bookCoverUpdateEvent\", BookCoverUpdateEventSchema);\n    if (!payload) {\n      console.warn(\"Failed to parse book cover update event, ignoring message\");\n      return;\n    }\n    if (payload.newCoverUrl) {\n      onCoverUpdate(payload.newCoverUrl);\n    }\n  });\n\n  return () => sub.unsubscribe();\n}\n","<script lang=\"ts\">\n  /**\n   * Search page â€” faceted book search with realtime result streaming and prefetch.\n   */\n  import { onMount } from \"svelte\";\n  import BookCard, { type BookCardDisplay } from \"$lib/components/BookCard.svelte\";\n  import { navigate } from \"$lib/router/router\";\n  import {\n    searchBooks,\n    normalizeRealtimeSearchHits,\n    mergeSearchHits,\n    type SearchParams,\n  } from \"$lib/services/books\";\n  import { subscribeToSearchTopics } from \"$lib/services/realtime\";\n  import type { SearchHit, SearchResponse } from \"$lib/validation/schemas\";\n\n  let { currentUrl }: { currentUrl: URL } = $props();\n\n  const PAGE_SIZE = 12;\n  const PREFETCH_WINDOW_SIZE = 5;\n  const MIN_PUBLICATION_YEAR = 1800;\n  const MAX_PUBLICATION_YEAR = 2099;\n  const COVER_OPTIONS = [\"ANY\", \"GOOGLE_BOOKS\", \"OPEN_LIBRARY\", \"LONGITOOD\"] as const;\n  const RESOLUTION_OPTIONS = [\"ANY\", \"HIGH_ONLY\", \"HIGH_FIRST\"] as const;\n  const SORT_OPTIONS = [\"relevance\", \"title\", \"author\", \"newest\", \"rating\"] as const;\n\n  const searchCache = new Map<string, SearchResponse>();\n  let unsubscribeRealtime: (() => void) | null = null;\n\n  let query = $state(\"\");\n  let year = $state<number | null>(null);\n  let page = $state(1);\n  let sort = $state<(typeof SORT_OPTIONS)[number]>(\"newest\");\n  let coverSource = $state<(typeof COVER_OPTIONS)[number]>(\"ANY\");\n  let resolution = $state<(typeof RESOLUTION_OPTIONS)[number]>(\"HIGH_FIRST\");\n  let viewMode = $state<\"grid\" | \"list\">(\"grid\");\n\n  let loading = $state(false);\n  let errorMessage = $state<string | null>(null);\n  let realtimeMessage = $state<string | null>(null);\n  let searchResult = $state<SearchResponse | null>(null);\n\n  function parsePositiveNumber(value: string | null, fallback: number): number {\n    if (!value) {\n      return fallback;\n    }\n    const parsed = Number.parseInt(value, 10);\n    if (!Number.isFinite(parsed) || parsed < 1) {\n      return fallback;\n    }\n    return parsed;\n  }\n\n  function toSearchParams(): SearchParams {\n    return {\n      query,\n      startIndex: (page - 1) * PAGE_SIZE,\n      maxResults: PAGE_SIZE,\n      orderBy: sort,\n      coverSource,\n      resolution,\n      publishedYear: year,\n    };\n  }\n\n  function cacheKey(params: SearchParams): string {\n    return [\n      params.query,\n      params.startIndex,\n      params.maxResults,\n      params.orderBy,\n      params.coverSource,\n      params.resolution,\n      params.publishedYear ?? \"none\",\n    ].join(\"::\");\n  }\n\n  function parseEnumParam<T extends string>(\n    params: URLSearchParams,\n    key: string,\n    options: readonly T[],\n    fallback: T,\n  ): T {\n    const raw = params.get(key) ?? fallback;\n    return options.includes(raw as T) ? (raw as T) : fallback;\n  }\n\n  function syncStateFromUrl(url: URL): void {\n    const params = url.searchParams;\n    query = params.get(\"query\")?.trim() ?? \"\";\n    year = params.get(\"year\") ? parsePositiveNumber(params.get(\"year\"), 0) || null : null;\n    page = parsePositiveNumber(params.get(\"page\"), 1);\n\n    sort = parseEnumParam(params, \"sort\", SORT_OPTIONS, \"newest\");\n    coverSource = parseEnumParam(params, \"coverSource\", COVER_OPTIONS, \"ANY\");\n    resolution = parseEnumParam(params, \"resolution\", RESOLUTION_OPTIONS, \"HIGH_FIRST\");\n\n    const nextView = params.get(\"view\");\n    viewMode = nextView === \"list\" ? \"list\" : \"grid\";\n  }\n\n  function mergeRealtimeHits(incoming: unknown[]): void {\n    if (!searchResult) {\n      return;\n    }\n\n    const candidates = normalizeRealtimeSearchHits(incoming);\n    if (candidates.length === 0) {\n      return;\n    }\n\n    const mergedResults = mergeSearchHits(searchResult.results, candidates);\n    searchResult = {\n      ...searchResult,\n      results: mergedResults,\n      totalResults: Math.max(searchResult.totalResults, mergedResults.length),\n    };\n  }\n\n  async function prefetchWindow(baseParams: SearchParams, response: SearchResponse): Promise<void> {\n    if (!response.hasMore) {\n      return;\n    }\n\n    for (let offset = 1; offset <= PREFETCH_WINDOW_SIZE; offset++) {\n      const nextStartIndex = baseParams.startIndex + offset * PAGE_SIZE;\n      const nextParams: SearchParams = { ...baseParams, startIndex: nextStartIndex };\n      const nextKey = cacheKey(nextParams);\n      if (searchCache.has(nextKey)) {\n        continue;\n      }\n\n      try {\n        const nextResponse = await searchBooks(nextParams);\n        searchCache.set(nextKey, nextResponse);\n        if (!nextResponse.hasMore) {\n          break;\n        }\n      } catch (error) {\n        console.warn(\"Prefetch failed for offset\", offset, error);\n        break;\n      }\n    }\n  }\n\n  async function loadSearch(): Promise<void> {\n    if (!query) {\n      if (unsubscribeRealtime) {\n        unsubscribeRealtime();\n        unsubscribeRealtime = null;\n      }\n      searchResult = null;\n      errorMessage = null;\n      realtimeMessage = null;\n      return;\n    }\n\n    loading = true;\n    errorMessage = null;\n    realtimeMessage = null;\n\n    const params = toSearchParams();\n    const key = cacheKey(params);\n\n    try {\n      const response = searchCache.get(key) ?? (await searchBooks(params));\n      searchCache.set(key, response);\n      searchResult = response;\n\n      if (unsubscribeRealtime) {\n        unsubscribeRealtime();\n        unsubscribeRealtime = null;\n      }\n\n      unsubscribeRealtime = await subscribeToSearchTopics(\n        response.queryHash,\n        (message) => {\n          realtimeMessage = message;\n        },\n        (results) => {\n          mergeRealtimeHits(results);\n        },\n      );\n\n      void prefetchWindow(params, response);\n    } catch (error) {\n      errorMessage = error instanceof Error ? error.message : \"Search request failed\";\n      searchResult = null;\n    } finally {\n      loading = false;\n    }\n  }\n\n  function applyFilters(nextPage = 1): void {\n    const url = new URL(\"/search\", window.location.origin);\n    if (query.trim()) {\n      url.searchParams.set(\"query\", query.trim());\n    }\n    if (year !== null && year > 0) {\n      url.searchParams.set(\"year\", String(year));\n    }\n    url.searchParams.set(\"page\", String(nextPage));\n    url.searchParams.set(\"sort\", sort);\n    url.searchParams.set(\"view\", viewMode);\n    url.searchParams.set(\"coverSource\", coverSource);\n    url.searchParams.set(\"resolution\", resolution);\n\n    navigate(`${url.pathname}${url.search}`);\n  }\n\n  function mapHitToCard(hit: SearchHit): BookCardDisplay {\n    const authors = hit.authors.map((author) => author.name).filter((name) => name && name.length > 0);\n    return {\n      id: hit.id,\n      slug: hit.slug ?? hit.id,\n      title: hit.title ?? \"Untitled\",\n      authors,\n      description: hit.description,\n      coverUrl: hit.cover?.preferredUrl ?? hit.cover?.s3ImagePath ?? hit.cover?.externalImageUrl ?? null,\n      fallbackCoverUrl: hit.cover?.fallbackUrl ?? \"/images/placeholder-book-cover.svg\",\n    };\n  }\n\n  function computeTotalPages(result: SearchResponse | null, currentPage: number, pageSize: number): number {\n    if (!result) {\n      return 1;\n    }\n    const fromTotal = Math.max(1, Math.ceil(result.totalResults / pageSize));\n    return result.hasMore ? Math.max(fromTotal, currentPage + 1) : fromTotal;\n  }\n\n  let totalPages = $derived(computeTotalPages(searchResult, page, PAGE_SIZE));\n\n  $effect(() => {\n    syncStateFromUrl(currentUrl);\n    void loadSearch();\n  });\n\n  onMount(() => {\n    return () => {\n      if (unsubscribeRealtime) {\n        unsubscribeRealtime();\n      }\n    };\n  });\n</script>\n\n<section class=\"mx-auto flex max-w-6xl flex-col gap-6 px-4 py-8 md:px-6\">\n  <form\n    class=\"grid gap-3 rounded-xl border border-linen-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-800 md:grid-cols-[1fr_auto_auto_auto_auto]\"\n    onsubmit={(event) => {\n      event.preventDefault();\n      applyFilters(1);\n    }}\n  >\n    <input bind:value={query} class=\"rounded-lg border border-linen-300 px-3 py-2 text-sm outline-none ring-canvas-300 focus:ring-2 dark:border-slate-600 dark:bg-slate-900\" placeholder=\"Search by title, author, ISBN\" required />\n    <input bind:value={year} type=\"number\" min={MIN_PUBLICATION_YEAR} max={MAX_PUBLICATION_YEAR} class=\"rounded-lg border border-linen-300 px-3 py-2 text-sm outline-none ring-canvas-300 focus:ring-2 dark:border-slate-600 dark:bg-slate-900\" placeholder=\"Year\" />\n    <select bind:value={sort} class=\"rounded-lg border border-linen-300 px-3 py-2 text-sm dark:border-slate-600 dark:bg-slate-900\">\n      {#each SORT_OPTIONS as option}\n        <option value={option}>{option}</option>\n      {/each}\n    </select>\n    <select bind:value={coverSource} class=\"rounded-lg border border-linen-300 px-3 py-2 text-sm dark:border-slate-600 dark:bg-slate-900\">\n      {#each COVER_OPTIONS as option}\n        <option value={option}>{option}</option>\n      {/each}\n    </select>\n    <select bind:value={resolution} class=\"rounded-lg border border-linen-300 px-3 py-2 text-sm dark:border-slate-600 dark:bg-slate-900\">\n      {#each RESOLUTION_OPTIONS as option}\n        <option value={option}>{option}</option>\n      {/each}\n    </select>\n    <div class=\"md:col-span-5 flex items-center justify-between gap-3\">\n      <div class=\"flex items-center gap-2 text-sm\">\n        <button type=\"button\" class={`rounded-md px-3 py-1.5 ${viewMode === \"grid\" ? \"bg-canvas-500 text-white\" : \"bg-linen-100 text-anthracite-700 dark:bg-slate-700 dark:text-slate-200\"}`} onclick={() => { viewMode = \"grid\"; applyFilters(page); }}>Grid</button>\n        <button type=\"button\" class={`rounded-md px-3 py-1.5 ${viewMode === \"list\" ? \"bg-canvas-500 text-white\" : \"bg-linen-100 text-anthracite-700 dark:bg-slate-700 dark:text-slate-200\"}`} onclick={() => { viewMode = \"list\"; applyFilters(page); }}>List</button>\n      </div>\n      <button type=\"submit\" class=\"rounded-lg bg-canvas-500 px-4 py-2 text-sm font-medium text-white transition hover:bg-canvas-600\">Apply</button>\n    </div>\n  </form>\n\n  {#if loading}\n    <p class=\"text-sm text-anthracite-600 dark:text-slate-300\">Searching books...</p>\n  {/if}\n  {#if realtimeMessage}\n    <p class=\"text-xs text-canvas-700 dark:text-canvas-400\">{realtimeMessage}</p>\n  {/if}\n  {#if errorMessage}\n    <p class=\"rounded-lg border border-red-200 bg-red-50 p-3 text-sm text-red-700 dark:border-red-900/40 dark:bg-red-950/40 dark:text-red-200\">{errorMessage}</p>\n  {/if}\n\n  {#if !loading && searchResult && searchResult.results.length === 0}\n    <p class=\"text-sm text-anthracite-600 dark:text-slate-300\">No results found.</p>\n  {/if}\n\n  {#if searchResult && searchResult.results.length > 0}\n    <div class={viewMode === \"grid\" ? \"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4\" : \"grid grid-cols-1 gap-4\"}>\n      {#each searchResult.results as hit (hit.id)}\n        <BookCard\n          layout={viewMode}\n          book={mapHitToCard(hit)}\n          href={`/book/${encodeURIComponent(hit.slug ?? hit.id)}?query=${encodeURIComponent(query)}&page=${page}&sort=${encodeURIComponent(sort)}&view=${viewMode}${year ? `&year=${year}` : \"\"}`}\n        />\n      {/each}\n    </div>\n\n    <nav class=\"mt-4 flex items-center justify-center gap-2\">\n      <button class=\"rounded-md border border-linen-300 px-3 py-1.5 text-sm disabled:opacity-40 dark:border-slate-600\" disabled={page <= 1} onclick={() => applyFilters(page - 1)}>Prev</button>\n      <span class=\"text-sm text-anthracite-700 dark:text-slate-300\">Page {page} of {totalPages}</span>\n      <button class=\"rounded-md border border-linen-300 px-3 py-1.5 text-sm disabled:opacity-40 dark:border-slate-600\" disabled={page >= totalPages} onclick={() => applyFilters(page + 1)}>Next</button>\n    </nav>\n  {/if}\n</section>\n","<script lang=\"ts\">\n  import { onMount } from \"svelte\";\n  import BookCard, { type BookCardDisplay } from \"$lib/components/BookCard.svelte\";\n  import { getAffiliateLinks, getBook, getSimilarBooks } from \"$lib/services/books\";\n  import { subscribeToBookCoverUpdates } from \"$lib/services/realtime\";\n  import type { Book } from \"$lib/validation/schemas\";\n\n  let {\n    currentUrl,\n    identifier,\n  }: {\n    currentUrl: URL;\n    identifier: string;\n  } = $props();\n\n  let loading = $state(true);\n  let errorMessage = $state<string | null>(null);\n  let book = $state<Book | null>(null);\n  let similarBooks = $state<Book[]>([]);\n  let affiliateLinks = $state<Record<string, string>>({});\n  let liveCoverUrl = $state<string | null>(null);\n\n  let unsubscribeRealtime: (() => void) | null = null;\n\n  async function loadPage(): Promise<void> {\n    loading = true;\n    errorMessage = null;\n\n    try {\n      const loadedBook = await getBook(identifier);\n      const [similarResult, linksResult] = await Promise.allSettled([\n        getSimilarBooks(identifier, 6),\n        getAffiliateLinks(identifier),\n      ]);\n\n      book = loadedBook;\n      similarBooks = similarResult.status === \"fulfilled\" ? similarResult.value : [];\n      affiliateLinks = linksResult.status === \"fulfilled\" ? linksResult.value : {};\n      liveCoverUrl = null;\n\n      if (unsubscribeRealtime) {\n        unsubscribeRealtime();\n        unsubscribeRealtime = null;\n      }\n\n      const topicIdentifier = loadedBook.id;\n      unsubscribeRealtime = await subscribeToBookCoverUpdates(topicIdentifier, (coverUrl) => {\n        liveCoverUrl = coverUrl;\n      });\n    } catch (error) {\n      errorMessage = error instanceof Error ? error.message : \"Unable to load this book\";\n      book = null;\n      similarBooks = [];\n      affiliateLinks = {};\n    } finally {\n      loading = false;\n    }\n  }\n\n  function bookCoverUrl(): string {\n    if (liveCoverUrl && liveCoverUrl.trim().length > 0) {\n      return liveCoverUrl;\n    }\n\n    if (book?.cover?.preferredUrl && book.cover.preferredUrl.trim().length > 0) {\n      return book.cover.preferredUrl;\n    }\n\n    if (book?.cover?.fallbackUrl && book.cover.fallbackUrl.trim().length > 0) {\n      return book.cover.fallbackUrl;\n    }\n\n    return \"/images/placeholder-book-cover.svg\";\n  }\n\n  function authorNames(): string {\n    if (!book || book.authors.length === 0) {\n      return \"Unknown author\";\n    }\n    return book.authors.map((author) => author.name).join(\", \");\n  }\n\n  function publishedDateText(): string {\n    if (!book?.publication?.publishedDate) {\n      return \"Unknown\";\n    }\n    const date = new Date(book.publication.publishedDate);\n    if (Number.isNaN(date.getTime())) {\n      return String(book.publication.publishedDate);\n    }\n    return date.toLocaleDateString();\n  }\n\n  function similarCard(item: Book): BookCardDisplay {\n    return {\n      id: item.id,\n      slug: item.slug ?? item.id,\n      title: item.title ?? \"Untitled\",\n      authors: item.authors.map((author) => author.name),\n      description: item.description,\n      coverUrl: item.cover?.preferredUrl ?? item.cover?.s3ImagePath ?? item.cover?.externalImageUrl ?? null,\n      fallbackCoverUrl: item.cover?.fallbackUrl ?? \"/images/placeholder-book-cover.svg\",\n    };\n  }\n\n  function backToSearchHref(): string {\n    const query = currentUrl.searchParams.get(\"query\");\n    if (!query) {\n      return \"/search\";\n    }\n\n    const url = new URL(\"/search\", window.location.origin);\n    url.searchParams.set(\"query\", query);\n\n    const page = currentUrl.searchParams.get(\"page\");\n    const sort = currentUrl.searchParams.get(\"sort\");\n    const view = currentUrl.searchParams.get(\"view\");\n    const year = currentUrl.searchParams.get(\"year\");\n    if (page) {\n      url.searchParams.set(\"page\", page);\n    }\n    if (sort) {\n      url.searchParams.set(\"sort\", sort);\n    }\n    if (view) {\n      url.searchParams.set(\"view\", view);\n    }\n    if (year) {\n      url.searchParams.set(\"year\", year);\n    }\n\n    return `${url.pathname}${url.search}`;\n  }\n\n  function sortedAffiliateEntries(): Array<[string, string]> {\n    return Object.entries(affiliateLinks).sort(([left], [right]) => left.localeCompare(right));\n  }\n\n  $effect(() => {\n    if (identifier) {\n      void loadPage();\n    }\n  });\n\n  onMount(() => {\n    return () => {\n      if (unsubscribeRealtime) {\n        unsubscribeRealtime();\n      }\n    };\n  });\n</script>\n\n<section class=\"mx-auto flex max-w-6xl flex-col gap-6 px-4 py-8 md:px-6\">\n  {#if loading}\n    <p class=\"text-sm text-anthracite-600 dark:text-slate-300\">Loading book details...</p>\n  {:else if errorMessage}\n    <div class=\"rounded-xl border border-red-200 bg-red-50 p-4 text-sm text-red-700 dark:border-red-900/40 dark:bg-red-950/40 dark:text-red-200\">\n      {errorMessage}\n    </div>\n  {:else if book}\n    <a href={backToSearchHref()} class=\"w-fit rounded-lg border border-linen-300 px-3 py-1.5 text-sm text-anthracite-700 transition hover:bg-linen-100 dark:border-slate-600 dark:text-slate-300 dark:hover:bg-slate-800\">\n      Back to search\n    </a>\n\n    <article class=\"grid gap-6 rounded-xl border border-linen-200 bg-white p-5 shadow-sm dark:border-slate-700 dark:bg-slate-800 md:grid-cols-[320px_1fr]\">\n      <img src={bookCoverUrl()} alt={`${book.title ?? \"Book\"} cover`} class=\"h-[440px] w-full rounded-xl object-cover\" loading=\"lazy\" />\n      <div class=\"space-y-4\">\n        <h1 class=\"text-3xl font-semibold text-anthracite-900 dark:text-slate-100\">{book.title ?? \"Book details\"}</h1>\n        <p class=\"text-base text-anthracite-700 dark:text-slate-300\">{authorNames()}</p>\n\n        <dl class=\"grid gap-2 text-sm text-anthracite-700 dark:text-slate-300 sm:grid-cols-2\">\n          <div>\n            <dt class=\"font-medium text-anthracite-800 dark:text-slate-200\">Published</dt>\n            <dd>{publishedDateText()}</dd>\n          </div>\n          <div>\n            <dt class=\"font-medium text-anthracite-800 dark:text-slate-200\">Publisher</dt>\n            <dd>{book.publication?.publisher ?? \"Unknown\"}</dd>\n          </div>\n          <div>\n            <dt class=\"font-medium text-anthracite-800 dark:text-slate-200\">Language</dt>\n            <dd>{book.publication?.language ?? \"Unknown\"}</dd>\n          </div>\n          <div>\n            <dt class=\"font-medium text-anthracite-800 dark:text-slate-200\">Pages</dt>\n            <dd>{book.publication?.pageCount ?? \"Unknown\"}</dd>\n          </div>\n        </dl>\n\n        {#if book.description}\n          <p class=\"whitespace-pre-wrap text-sm leading-6 text-anthracite-700 dark:text-slate-300\">{book.description}</p>\n        {/if}\n\n        {#if book.categories.length > 0}\n          <div class=\"flex flex-wrap gap-2\">\n            {#each book.categories as category}\n              <span class=\"rounded-full bg-linen-100 px-3 py-1 text-xs font-medium text-anthracite-700 dark:bg-slate-700 dark:text-slate-200\">{category}</span>\n            {/each}\n          </div>\n        {/if}\n\n        {#if sortedAffiliateEntries().length > 0}\n          <div class=\"space-y-2\">\n            <p class=\"text-sm font-medium text-anthracite-800 dark:text-slate-200\">Affiliate links</p>\n            <div class=\"flex flex-wrap gap-2\">\n              {#each sortedAffiliateEntries() as [label, url]}\n                <a href={url} data-no-spa=\"true\" target=\"_blank\" rel=\"noreferrer\" class=\"rounded-lg bg-canvas-500 px-3 py-1.5 text-sm text-white transition hover:bg-canvas-600\">{label}</a>\n              {/each}\n            </div>\n          </div>\n        {/if}\n      </div>\n    </article>\n\n    {#if book.editions.length > 0}\n      <section class=\"space-y-3\">\n        <h2 class=\"text-xl font-semibold text-anthracite-900 dark:text-slate-100\">Editions</h2>\n        <div class=\"grid grid-cols-1 gap-3 md:grid-cols-2 lg:grid-cols-3\">\n          {#each book.editions as edition}\n            <article class=\"rounded-xl border border-linen-200 bg-white p-3 dark:border-slate-700 dark:bg-slate-800\">\n              <p class=\"text-sm font-medium text-anthracite-800 dark:text-slate-100\">{edition.identifier ?? edition.googleBooksId ?? \"Edition\"}</p>\n              <p class=\"text-xs text-anthracite-600 dark:text-slate-300\">ISBN-13: {edition.isbn13 ?? \"N/A\"}</p>\n            </article>\n          {/each}\n        </div>\n      </section>\n    {/if}\n\n    {#if similarBooks.length > 0}\n      <section class=\"space-y-3\">\n        <h2 class=\"text-xl font-semibold text-anthracite-900 dark:text-slate-100\">Similar books</h2>\n        <div class=\"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3\">\n          {#each similarBooks as item (item.id)}\n            <BookCard book={similarCard(item)} href={`/book/${encodeURIComponent(item.slug ?? item.id)}`} />\n          {/each}\n        </div>\n      </section>\n    {/if}\n  {:else}\n    <p class=\"text-sm text-anthracite-600 dark:text-slate-300\">Book not found.</p>\n  {/if}\n</section>\n","<script lang=\"ts\">\n  import { getSitemapPayload } from \"$lib/services/pages\";\n  import { navigate } from \"$lib/router/router\";\n  import type { SitemapPayload } from \"$lib/validation/schemas\";\n\n  let {\n    view = \"authors\",\n    letter = \"A\",\n    page = 1,\n  }: {\n    view?: \"authors\" | \"books\";\n    letter?: string;\n    page?: number;\n  } = $props();\n\n  let loading = $state(true);\n  let errorMessage = $state<string | null>(null);\n  let payload = $state<SitemapPayload | null>(null);\n\n  async function loadSitemap(): Promise<void> {\n    loading = true;\n    errorMessage = null;\n\n    try {\n      payload = await getSitemapPayload(view, letter, page);\n    } catch (error) {\n      errorMessage = error instanceof Error ? error.message : \"Unable to load sitemap\";\n      payload = null;\n    } finally {\n      loading = false;\n    }\n  }\n\n  function goTo(targetView: \"authors\" | \"books\", targetLetter: string, targetPage: number): void {\n    navigate(`/sitemap/${targetView}/${encodeURIComponent(targetLetter)}/${Math.max(1, targetPage)}`);\n  }\n\n  $effect(() => {\n    void loadSitemap();\n  });\n</script>\n\n<section class=\"mx-auto flex max-w-6xl flex-col gap-6 px-4 py-8 md:px-6\">\n  <header class=\"flex flex-col gap-4 rounded-xl border border-linen-200 bg-white p-5 shadow-sm dark:border-slate-700 dark:bg-slate-800 md:flex-row md:items-center md:justify-between\">\n    <div>\n      <h1 class=\"text-2xl font-semibold text-anthracite-900 dark:text-slate-100\">Site index</h1>\n      <p class=\"text-sm text-anthracite-600 dark:text-slate-300\">Browse indexed books and author directories.</p>\n    </div>\n    <div class=\"flex items-center gap-2\">\n      <button class={`rounded-lg px-3 py-1.5 text-sm ${view === \"authors\" ? \"bg-canvas-500 text-white\" : \"bg-linen-100 text-anthracite-700 dark:bg-slate-700 dark:text-slate-200\"}`} onclick={() => goTo(\"authors\", letter, 1)}>Authors</button>\n      <button class={`rounded-lg px-3 py-1.5 text-sm ${view === \"books\" ? \"bg-canvas-500 text-white\" : \"bg-linen-100 text-anthracite-700 dark:bg-slate-700 dark:text-slate-200\"}`} onclick={() => goTo(\"books\", letter, 1)}>Books</button>\n    </div>\n  </header>\n\n  {#if loading}\n    <p class=\"text-sm text-anthracite-600 dark:text-slate-300\">Loading sitemap...</p>\n  {:else if errorMessage}\n    <p class=\"rounded-lg border border-red-200 bg-red-50 p-3 text-sm text-red-700 dark:border-red-900/40 dark:bg-red-950/40 dark:text-red-200\">{errorMessage}</p>\n  {:else if payload}\n    {@const data = payload}\n    <div class=\"flex flex-wrap gap-2\">\n      {#each data.letters as bucket}\n        <button\n          class={`rounded-md px-2.5 py-1 text-xs ${bucket === data.activeLetter ? \"bg-canvas-500 text-white\" : \"bg-linen-100 text-anthracite-700 dark:bg-slate-700 dark:text-slate-200\"}`}\n          onclick={() => goTo(data.viewType, bucket, 1)}\n        >\n          {bucket}\n        </button>\n      {/each}\n    </div>\n\n    {#if data.viewType === \"books\"}\n      <div class=\"grid grid-cols-1 gap-3 md:grid-cols-2\">\n        {#each data.books as item}\n          <a href={`/book/${encodeURIComponent(item.slug)}`} class=\"rounded-xl border border-linen-200 bg-white p-4 text-sm shadow-sm transition hover:shadow-md dark:border-slate-700 dark:bg-slate-800\">\n            <p class=\"font-medium text-anthracite-900 dark:text-slate-100\">{item.title}</p>\n            <p class=\"text-xs text-anthracite-600 dark:text-slate-400\">{item.updatedAt ? new Date(item.updatedAt).toLocaleDateString() : \"No update date\"}</p>\n          </a>\n        {/each}\n      </div>\n    {:else}\n      <div class=\"grid grid-cols-1 gap-3\">\n        {#each data.authors as author}\n          <article class=\"rounded-xl border border-linen-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-800\">\n            <p class=\"text-base font-semibold text-anthracite-900 dark:text-slate-100\">{author.authorName}</p>\n            <div class=\"mt-2 flex flex-wrap gap-2\">\n              {#each author.books as item}\n                <a href={`/book/${encodeURIComponent(item.slug)}`} class=\"rounded-md bg-linen-100 px-2.5 py-1 text-xs text-anthracite-700 dark:bg-slate-700 dark:text-slate-200\">{item.title}</a>\n              {/each}\n            </div>\n          </article>\n        {/each}\n      </div>\n    {/if}\n\n    <nav class=\"flex items-center justify-center gap-2\">\n      <button class=\"rounded-md border border-linen-300 px-3 py-1.5 text-sm disabled:opacity-40 dark:border-slate-600\" disabled={data.pageNumber <= 1} onclick={() => goTo(data.viewType, data.activeLetter, data.pageNumber - 1)}>Prev</button>\n      <span class=\"text-sm text-anthracite-700 dark:text-slate-300\">Page {data.pageNumber} of {Math.max(1, data.totalPages)}</span>\n      <button class=\"rounded-md border border-linen-300 px-3 py-1.5 text-sm disabled:opacity-40 dark:border-slate-600\" disabled={data.pageNumber >= data.totalPages} onclick={() => goTo(data.viewType, data.activeLetter, data.pageNumber + 1)}>Next</button>\n    </nav>\n\n    <p class=\"text-xs text-anthracite-600 dark:text-slate-400\">\n      XML sitemap: <a href=\"/sitemap.xml\" data-no-spa=\"true\" class=\"text-canvas-700 hover:text-canvas-800 dark:text-canvas-400\">/sitemap.xml</a>\n    </p>\n  {/if}\n</section>\n","<script lang=\"ts\">\n  import { navigate } from \"$lib/router/router\";\n\n  let query = $state(\"\");\n\n  function submitSearch(event: SubmitEvent): void {\n    event.preventDefault();\n    const trimmed = query.trim();\n    if (!trimmed) {\n      return;\n    }\n    navigate(`/search?query=${encodeURIComponent(trimmed)}`);\n  }\n</script>\n\n<section class=\"mx-auto flex max-w-3xl flex-col items-center gap-6 px-4 py-16 text-center md:px-6\">\n  <p class=\"text-6xl font-semibold text-canvas-500\">404</p>\n  <h1 class=\"text-3xl font-semibold text-anthracite-900 dark:text-slate-100\">Page not found</h1>\n  <p class=\"text-sm text-anthracite-600 dark:text-slate-300\">The page you requested does not exist. Try searching for a book instead.</p>\n\n  <form onsubmit={submitSearch} class=\"flex w-full max-w-xl flex-col gap-3 sm:flex-row\">\n    <input bind:value={query} type=\"search\" class=\"w-full rounded-xl border border-linen-300 px-4 py-3 outline-none ring-canvas-300 focus:ring-2 dark:border-slate-600 dark:bg-slate-800\" placeholder=\"Search books\" />\n    <button type=\"submit\" class=\"rounded-xl bg-canvas-500 px-5 py-3 font-medium text-white transition hover:bg-canvas-600\">Search</button>\n  </form>\n\n  <a href=\"/\" class=\"rounded-lg border border-linen-300 px-4 py-2 text-sm text-anthracite-700 transition hover:bg-linen-100 dark:border-slate-600 dark:text-slate-300 dark:hover:bg-slate-800\">Go home</a>\n</section>\n","<script lang=\"ts\">\n  import { onMount } from \"svelte\";\n  import TopNav from \"$lib/components/TopNav.svelte\";\n  import SiteFooter from \"$lib/components/SiteFooter.svelte\";\n  import HomePage from \"$lib/pages/HomePage.svelte\";\n  import SearchPage from \"$lib/pages/SearchPage.svelte\";\n  import BookPage from \"$lib/pages/BookPage.svelte\";\n  import SitemapPage from \"$lib/pages/SitemapPage.svelte\";\n  import NotFoundPage from \"$lib/pages/NotFoundPage.svelte\";\n  import { currentUrl, initializeSpaRouting, matchRoute } from \"$lib/router/router\";\n  import { initializeTheme } from \"$lib/stores/theme\";\n\n  let url = $state(new URL(window.location.href));\n  let route = $derived(matchRoute(url.pathname));\n\n  onMount(() => {\n    const unsubscribe = currentUrl.subscribe((nextUrl) => {\n      url = nextUrl;\n    });\n\n    const cleanupRouting = initializeSpaRouting();\n    void initializeTheme();\n\n    return () => {\n      unsubscribe();\n      cleanupRouting();\n    };\n  });\n</script>\n\n<div class=\"min-h-screen bg-linen-50 text-anthracite-900 dark:bg-slate-900 dark:text-slate-100\">\n  <TopNav activeRoute={route.name} />\n\n  <main class=\"min-h-[calc(100vh-180px)]\">\n    {#if route.name === \"home\"}\n      <HomePage />\n    {:else if route.name === \"search\"}\n      <SearchPage currentUrl={url} />\n    {:else if route.name === \"book\"}\n      <BookPage currentUrl={url} identifier={route.params.identifier ?? \"\"} />\n    {:else if route.name === \"sitemap\"}\n      <SitemapPage\n        view={route.params.view ?? \"authors\"}\n        letter={route.params.letter ?? \"A\"}\n        page={route.params.page ?? 1}\n      />\n    {:else}\n      <NotFoundPage />\n    {/if}\n  </main>\n\n  <SiteFooter />\n</div>\n","import { mount } from \"svelte\";\nimport App from \"./App.svelte\";\nimport \"$styles/global.css\";\n\nconst app = mount(App, {\n  target: document.getElementById(\"app\")!,\n});\n\nexport default app;\n"],"names":["DEV","is_array","index_of","includes","array_from","define_property","get_descriptor","get_descriptors","object_prototype","array_prototype","get_prototype_of","is_extensible","noop","run_all","arr","i","deferred","resolve","reject","promise","res","rej","to_array","value","n","array","element","DERIVED","EFFECT","RENDER_EFFECT","MANAGED_EFFECT","BLOCK_EFFECT","BRANCH_EFFECT","ROOT_EFFECT","BOUNDARY_EFFECT","CONNECTED","CLEAN","DIRTY","MAYBE_DIRTY","INERT","DESTROYED","EFFECT_RAN","EFFECT_TRANSPARENT","EAGER_EFFECT","HEAD_EFFECT","EFFECT_PRESERVED","USER_EFFECT","EFFECT_OFFSCREEN","WAS_MARKED","REACTION_IS_UPDATING","ASYNC","ERROR_VALUE","STATE_SYMBOL","LOADING_ATTR_SYMBOL","STALE_REACTION","lifecycle_outside_component","name","async_derived_orphan","effect_in_teardown","rune","effect_in_unowned_derived","effect_orphan","effect_update_depth_exceeded","state_descriptors_fixed","state_prototype_fixed","state_unsafe_mutation","svelte_boundary_reset_onerror","EACH_ITEM_REACTIVE","EACH_INDEX_REACTIVE","EACH_ITEM_IMMUTABLE","TEMPLATE_FRAGMENT","TEMPLATE_USE_IMPORT_NODE","UNINITIALIZED","NAMESPACE_HTML","select_multiple_invalid_value","svelte_boundary_reset_noop","equals","safe_not_equal","a","b","safe_equals","tracing_mode_flag","component_context","set_component_context","context","push","props","runes","fn","pop","component","effects","create_user_effect","is_runes","micro_tasks","run_micro_tasks","tasks","queue_micro_task","is_flushing_sync","flush_tasks","handle_error","error","effect","active_effect","active_reaction","invoke_error_boundary","e","STATUS_MASK","set_signal_status","signal","status","update_derived_status","derived","clear_marked","deps","dep","defer_effect","dirty_effects","maybe_dirty_effects","batches","current_batch","previous_batch","batch_values","queued_root_effects","last_scheduled_effect","is_flushing","Batch","#commit_callbacks","#discard_callbacks","#pending","#blocking_pending","#deferred","#dirty_effects","#maybe_dirty_effects","#skipped_branches","#decrement_queued","tracked","schedule_effect","root_effects","render_effects","root","#traverse_effect_tree","#defer_effects","t","reset_branch","#commit","flush_queued_effects","pending_boundary","flags","is_branch","is_skippable_branch","skip","is_dirty","update_effect","child","parent","source","flush_effects","previous_batch_values","is_earlier","batch","sources","others","s","prev_queued_root_effects","marked","checked","mark_effects","blocking","flushSync","was_flushing_sync","result","source_stacks","flush_count","updates","entry","infinite_loop_guard","old_values","e.effect_update_depth_exceeded","eager_block_effects","length","unlink_effect","ordered_effects","ancestor","j","reaction","depends_on","depends","createSubscriber","start","subscribers","version","stop","effect_tracking","get","render_effect","untrack","increment","boundary","node","children","Boundary","#anchor","#hydrate_open","#props","#children","#effect","#main_effect","#pending_effect","#failed_effect","#offscreen_fragment","#pending_anchor","#local_pending_count","#pending_count","#pending_count_update_queued","#is_creating_fallback","#effect_pending","#effect_pending_subscriber","block","anchor","#get_anchor","branch","#show_pending_snippet","#hydrate_resolved_content","#hydrate_pending_content","pending","#run","pause_effect","create_text","previous_effect","previous_reaction","previous_ctx","set_active_effect","set_active_reaction","move_effect","#update_pending_count","d","internal_set","onerror","failed","destroy_effect","did_reset","calling_on_error","reset","w.svelte_boundary_reset_noop","e.svelte_boundary_reset_onerror","flatten","blockers","sync","async","restore","capture","blocker_promise","finish","values","unset_context","run","expression","async_derived","previous_component_context","activate_batch","parent_derived","label","location","e.async_derived_orphan","should_suspend","deferreds","async_effect","handler","teardown","fulfil","next","p","go","user_derived","push_reaction_value","derived_safe_equal","destroy_derived_effects","get_derived_parent_effect","execute_derived","prev_active_effect","update_reaction","update_derived","increment_write_version","is_destroying_effect","eager_effects","eager_effects_deferred","v","stack","state","mutable_source","initial_value","immutable","trackable","set","should_proxy","untracking","current_sources","e.state_unsafe_mutation","new_value","proxy","old_value","mark_reactions","untracked_writes","set_untracked_writes","flush_eager_effects","reactions","not_dirty","prototype","is_proxied_array","parent_version","update_version","with_parent","set_update_version","_","prop","descriptor","e.state_descriptors_fixed","target","receiver","exists","has","other_s","ls","own_keys","key","e.state_prototype_fixed","get_proxied_value","is","$window","is_firefox","first_child_getter","next_sibling_getter","init_operations","element_prototype","node_prototype","text_prototype","get_first_child","get_next_sibling","is_text","first_child","first","sibling","count","next_sibling","clear_text_content","should_defer_append","listening_to_form_reset","add_form_reset_listener","evt","without_reactive_context","listen_to_event_and_reset_event","event","on_reset","prev","validate_effect","e.effect_orphan","e.effect_in_unowned_derived","e.effect_in_teardown","push_effect","parent_effect","parent_last","create_effect","type","user_effect","defer","component_root","options","template_effect","execute_effect_teardown","previously_destroying_effect","set_is_destroying_effect","destroy_effect_children","remove_dom","controller","destroy_block_effect_children","removed","remove_effect_dom","remove_reactions","transitions","transition","end","callback","destroy","pause_children","remaining","check","local","transparent","resume_effect","resume_children","fragment","is_updating_effect","new_deps","skipped_deps","write_version","read_version","dependencies","dependency","schedule_possible_effect_self_invalidation","previous_deps","previous_skipped_deps","previous_untracked_writes","previous_sources","previous_untracking","previous_update_version","is_fork","remove_reaction","index","new_length","start_index","was_updating_effect","tick","is_derived","destroyed","depends_on_old_values","should_connect","is_new","reconnect","PASSIVE_EVENTS","is_passive_event","all_registered_events","root_event_handles","create_event","event_name","dom","target_handler","handle_event_propagation","passive","delegate","events","last_propagated_event","handler_element","owner_document","path","current_target","path_idx","handled_at","at_idx","handler_idx","throw_error","other_errors","parent_element","delegated","create_fragment_from_html","html","elem","assign_nodes","from_html","content","is_fragment","use_import_node","has_start","clone","comment","frag","append","set_text","text","str","mount","_mount","document_listeners","Component","intro","registered_events","event_handle","unmount","anchor_node","ctx","mounted_components","BranchManager","#batches","#onscreen","#offscreen","#outroing","#transition","onscreen","offscreen","k","on_destroy","#discard","keys","if_block","elseif","branches","update_branch","condition","has_branch","flag","pause_effects","to_destroy","controlled_anchor","group","groups","destroy_effects","fast_path","parent_node","offscreen_anchor","each","get_collection","get_key","render_fn","fallback_fn","items","fallback","each_array","collection","first_run","commit","reconcile","move","item","create_item","skip_to_branch","current","seen","matched","stashed","link","destroy_length","dest","next_node","r","f","o","clsx","_clsx","to_class","hash","directives","classname","set_class","is_html","prev_classes","next_classes","next_class_name","select_option","select","mounting","w.select_multiple_invalid_value","option","get_option_value","option_value","init_select","observer","bind_select_value","is_reset","query","selected_option","IS_CUSTOM_ELEMENT","IS_HTML","set_attribute","attribute","skip_warning","attributes","get_attributes","get_setters","setters_cache","cache_key","setters","descriptors","proto","element_proto","bind_value","input","is_numberlike_input","to_number","subscriber_queue","writable","run_queue","subscriber","update","subscribe","invalidate","fallback_value","fallback_dirty","get_fallback","getter","onMount","e.lifecycle_outside_component","cleanup","PUBLIC_VERSION","INITIAL_URL","currentUrl","parsePage","parsed","matchRoute","pathname","bookMatch","sitemapMatch","shouldHandleAsSpaLink","url","passthroughPrefixes","prefix","publishUrl","navigate","pathWithQuery","replace","initializeSpaRouting","onPopState","onDocumentClick","$constructor","initializer","params","init","inst","def","_a","Parent","Definition","$ZodAsyncError","globalConfig","config","newConfig","getEnumValues","entries","numericValues","jsonStringifyReplacer","cached","nullish","cleanRegex","floatSafeRemainder","val","step","valDecCount","stepDecCount","decCount","valInt","stepInt","defineLazy","object","assignProp","esc","captureStackTrace","_args","isObject","data","allowsEval","F","isPlainObject","ctor","prot","propertyKeyTypes","escapeRegex","cl","normalizeParams","_params","optionalKeys","shape","NUMBER_FORMAT_RANGES","pick","schema","mask","newShape","currDef","omit","extend","_shape","merge","partial","Class","oldShape","required","aborted","x","startIndex","prefixIssues","issues","iss","unwrapMessage","message","finalizeIssue","full","getLengthableOrigin","issue","args","util.jsonStringifyReplacer","$ZodError","$ZodRealError","flattenError","mapper","fieldErrors","formErrors","sub","formatError","_mapper","processError","curr","el","_parse","_Err","_ctx","core.$ZodAsyncError","util.finalizeIssue","core.config","util.captureStackTrace","_parseAsync","_safeParse","errors.$ZodError","safeParse","errors.$ZodRealError","_safeParseAsync","safeParseAsync","cuid","cuid2","ulid","xid","ksuid","nanoid","duration","guid","uuid","email","_emoji","emoji","ipv4","ipv6","cidrv4","cidrv6","base64","base64url","hostname","e164","dateSource","date","timeSource","hhmm","time","datetime","opts","timeRegex","string","regex","integer","number","boolean","_null","lowercase","uppercase","$ZodCheck","core.$constructor","numericOriginMap","$ZodCheckLessThan","origin","bag","payload","$ZodCheckGreaterThan","$ZodCheckMultipleOf","util.floatSafeRemainder","$ZodCheckNumberFormat","isInt","minimum","maximum","util.NUMBER_FORMAT_RANGES","regexes.integer","$ZodCheckMaxLength","util.nullish","util.getLengthableOrigin","$ZodCheckMinLength","$ZodCheckLengthEquals","tooBig","$ZodCheckStringFormat","_b","$ZodCheckRegex","$ZodCheckLowerCase","regexes.lowercase","$ZodCheckUpperCase","regexes.uppercase","$ZodCheckIncludes","escapedRegex","util.escapeRegex","pattern","$ZodCheckStartsWith","$ZodCheckEndsWith","$ZodCheckOverwrite","Doc","arg","lines","minIndent","dedented","line","$ZodType","checks","ch","runChecks","isAborted","util.aborted","asyncResult","currLen","$ZodString","regexes.string","$ZodStringFormat","checks.$ZodCheckStringFormat","$ZodGUID","regexes.guid","$ZodUUID","regexes.uuid","$ZodEmail","regexes.email","$ZodURL","orig","href","regexes.hostname","$ZodEmoji","regexes.emoji","$ZodNanoID","regexes.nanoid","$ZodCUID","regexes.cuid","$ZodCUID2","regexes.cuid2","$ZodULID","regexes.ulid","$ZodXID","regexes.xid","$ZodKSUID","regexes.ksuid","$ZodISODateTime","regexes.datetime","$ZodISODate","regexes.date","$ZodISOTime","regexes.time","$ZodISODuration","regexes.duration","$ZodIPv4","regexes.ipv4","$ZodIPv6","regexes.ipv6","$ZodCIDRv4","regexes.cidrv4","$ZodCIDRv6","regexes.cidrv6","address","prefixNum","isValidBase64","$ZodBase64","regexes.base64","isValidBase64URL","regexes.base64url","c","padded","$ZodBase64URL","$ZodE164","regexes.e164","isValidJWT","token","algorithm","tokensParts","header","parsedHeader","$ZodJWT","$ZodNumber","regexes.number","received","$ZodNumberFormat","checks.$ZodCheckNumberFormat","$ZodBoolean","regexes.boolean","$ZodNull","regexes.null","$ZodUnknown","$ZodNever","handleArrayResult","final","util.prefixIssues","$ZodArray","proms","handleObjectResult","handleOptionalObjectResult","$ZodObject","_normalized","util.cached","okeys","util.optionalKeys","util.defineLazy","propValues","field","generateFastpass","doc","normalized","parseStr","util.esc","ids","counter","id","fastpass","util.isObject","jit","core.globalConfig","fastEnabled","util.allowsEval","catchall","isOptional","unrecognized","keySet","_catchall","handleUnionResults","results","$ZodUnion","patterns","util.cleanRegex","$ZodIntersection","left","right","handleIntersectionResults","mergeValues","util.isPlainObject","bKeys","sharedKeys","newObj","sharedValue","newArray","itemA","itemB","merged","$ZodRecord","keyResult","$ZodEnum","util.getEnumValues","util.propertyKeyTypes","$ZodTransform","_out","output","$ZodOptional","$ZodNullable","$ZodDefault","handleDefaultResult","$ZodPrefault","$ZodNonOptional","handleNonOptionalResult","$ZodCatch","$ZodPipe","handlePipeResult","$ZodReadonly","handleReadonlyResult","$ZodCustom","checks.$ZodCheck","handleRefineResult","_iss","util.issue","$ZodRegistry","_meta","meta","pm","registry","globalRegistry","_string","util.normalizeParams","_email","_guid","_uuid","_uuidv4","_uuidv6","_uuidv7","_url","_nanoid","_cuid","_cuid2","_ulid","_xid","_ksuid","_ipv4","_ipv6","_cidrv4","_cidrv6","_base64","_base64url","_e164","_jwt","_isoDateTime","_isoDate","_isoTime","_isoDuration","_number","_int","_boolean","_unknown","_never","_lt","checks.$ZodCheckLessThan","_lte","_gt","checks.$ZodCheckGreaterThan","_gte","_multipleOf","checks.$ZodCheckMultipleOf","_maxLength","checks.$ZodCheckMaxLength","_minLength","checks.$ZodCheckMinLength","_length","checks.$ZodCheckLengthEquals","_regex","checks.$ZodCheckRegex","_lowercase","checks.$ZodCheckLowerCase","_uppercase","checks.$ZodCheckUpperCase","_includes","checks.$ZodCheckIncludes","_startsWith","checks.$ZodCheckStartsWith","_endsWith","suffix","checks.$ZodCheckEndsWith","_overwrite","tx","checks.$ZodCheckOverwrite","_normalize","form","_trim","_toLowerCase","_toUpperCase","_array","_refine","ZodISODateTime","core.$ZodISODateTime","schemas.ZodStringFormat","core._isoDateTime","ZodISODate","core.$ZodISODate","core._isoDate","ZodISOTime","core.$ZodISOTime","core._isoTime","ZodISODuration","core.$ZodISODuration","core._isoDuration","core.formatError","core.flattenError","ZodRealError","parse","core._parse","parseAsync","core._parseAsync","core._safeParse","core._safeParseAsync","ZodType","core.$ZodType","core.clone","reg","parse.parse","parse.safeParse","parse.parseAsync","parse.safeParseAsync","refine","refinement","superRefine","checks.overwrite","optional","nullable","nonoptional","union","intersection","pipe","transform","_default","prefault","_catch","readonly","description","core.globalRegistry","_ZodString","core.$ZodString","checks.regex","checks.includes","checks.startsWith","checks.endsWith","checks.minLength","checks.maxLength","checks.length","checks.lowercase","checks.uppercase","checks.trim","checks.normalize","checks.toLowerCase","checks.toUpperCase","ZodString","core._email","ZodEmail","core._url","ZodURL","core._jwt","ZodJWT","core._emoji","ZodEmoji","core._guid","ZodGUID","core._uuid","ZodUUID","core._uuidv4","core._uuidv6","core._uuidv7","core._nanoid","ZodNanoID","core._cuid","ZodCUID","core._cuid2","ZodCUID2","core._ulid","ZodULID","core._base64","ZodBase64","core._base64url","ZodBase64URL","core._xid","ZodXID","core._ksuid","ZodKSUID","core._ipv4","ZodIPv4","core._ipv6","ZodIPv6","core._cidrv4","ZodCIDRv4","core._cidrv6","ZodCIDRv6","core._e164","ZodE164","iso.datetime","iso.date","iso.time","iso.duration","core._string","ZodStringFormat","core.$ZodStringFormat","core.$ZodEmail","core.$ZodGUID","core.$ZodUUID","core.$ZodURL","core.$ZodEmoji","core.$ZodNanoID","core.$ZodCUID","core.$ZodCUID2","core.$ZodULID","core.$ZodXID","core.$ZodKSUID","core.$ZodIPv4","core.$ZodIPv6","core.$ZodCIDRv4","core.$ZodCIDRv6","core.$ZodBase64","core.$ZodBase64URL","core.$ZodE164","core.$ZodJWT","ZodNumber","core.$ZodNumber","checks.gt","checks.gte","checks.lt","checks.lte","int","checks.multipleOf","core._number","ZodNumberFormat","core.$ZodNumberFormat","core._int","ZodBoolean","core.$ZodBoolean","core._boolean","ZodNull","core.$ZodNull","core._null","ZodUnknown","core.$ZodUnknown","unknown","core._unknown","ZodNever","core.$ZodNever","never","core._never","ZodArray","core.$ZodArray","minLength","maxLength","len","core._array","ZodObject","core.$ZodObject","_enum","incoming","util.extend","other","util.merge","util.pick","util.omit","util.partial","ZodOptional","util.required","ZodNonOptional","util.assignProp","ZodUnion","core.$ZodUnion","ZodIntersection","core.$ZodIntersection","ZodRecord","core.$ZodRecord","record","keyType","valueType","ZodEnum","core.$ZodEnum","newEntries","ZodTransform","core.$ZodTransform","_issue","core.$ZodOptional","innerType","ZodNullable","core.$ZodNullable","ZodDefault","core.$ZodDefault","defaultValue","ZodPrefault","core.$ZodPrefault","core.$ZodNonOptional","ZodCatch","core.$ZodCatch","catchValue","ZodPipe","core.$ZodPipe","in_","out","ZodReadonly","core.$ZodReadonly","ZodCustom","core.$ZodCustom","core.$ZodCheck","core._refine","MAX_REPORTED_ISSUES","validateWithSchema","recordId","issueText","validateFetchJson","response","validation","CSRF_COOKIE","CSRF_HEADER","getCookie","cookieName","part","withCsrf","headers","getJson","postJson","responseSchema","AuthorSchema","z.object","z.string","CollectionSchema","z.number","TagSchema","z.record","z.unknown","CoverSchema","z.boolean","EditionSchema","z.union","z.null","PublicationSchema","BookSchema","z.array","SearchHitSchema","SearchResponseSchema","SimilarBooksSchema","BookCardSchema","HomePayloadSchema","SitemapBookSchema","SitemapAuthorSchema","SitemapPayloadSchema","z.enum","ThemePreferenceSchema","AffiliateLinksSchema","SearchProgressEventSchema","SearchResultsEventSchema","BookCoverUpdateEventSchema","RealtimeSearchHitCandidateSchema","getThemePreference","persistThemePreference","theme","useSystem","themeMode","applyTheme","readLocalTheme","saved","loadServerTheme","preference","initializeTheme","localTheme","serverTheme","updateTheme","nextTheme","quickQuery","$.state","currentTheme","unsubscribe","$.set","$.user_effect","submitQuickSearch","trimmed","$.get","isActive","route","$$props","div","div_1","nav","a_1","a_2","div_2","$.child","$.sibling","option_1","option_2","$.init_select","$0","$1","$2","$.select_option","$.event","$$value","footer","layout","fallbackImage","coverSource","article","root_1","img","p_1","root_2","$$render","consequent","p_2","root_3","$.template_effect","$.set_text","text_3","consequent_1","$.set_attribute","article_1","root_4","img_1","p_3","p_4","root_5","text_6","consequent_3","consequent_2","alternate","getHomePagePayload","getSitemapPayload","viewType","letter","pageNumber","loading","errorMessage","bestsellers","$.proxy","recentBooks","toDisplayCard","loadHome","submitSearch","section","$.first_child","section_1","div_3","book","$$anchor","$.derived","BookCard","alternate_1","div_4","root_7","div_5","root_8","alternate_2","DEFAULT_SIMILAR_BOOKS_LIMIT","buildSearchUrl","searchBooks","getBook","identifier","getSimilarBooks","limit","getAffiliateLinks","normalizeAuthorNames","rawAuthors","buildNormalizedCover","raw","normalizeSearchHit","candidate","publishedDate","normalizeRealtimeSearchHits","mergeSearchHits","existingHits","incomingHits","hit","global","factory","exports","this","augmentWebsocket","webSocket","debug","noOp","ts","origOnClose","closeEvent","delay","BYTE","FrameImpl","command","body","binaryBody","escapeHeaderValues","skipContentLengthHeader","rawFrame","trim","cmdAndHeaders","uint8CmdAndHeaders","nullTerminator","uint8Frame","NULL","LF","CR","COLON","Parser","onFrame","onIncomingPing","segment","appendMissingNULLonIncoming","chunk","chunkWithNull","byte","contentLengthHeader","rawResult","StompSocketState","ActivationState","ReconnectionTimeMode","TickerStrategy","Ticker","_interval","_strategy","_debug","startTime","Versions","versions","StompHandler","_client","_webSocket","frame","subscription","onReceive","client","messageId","parser","rawChunkAsString","errorEvent","onOpen","connectHeaders","serverOutgoing","serverIncoming","ttl","delta","msg","rawChunk","disconnectHeaders","destination","hdrs","receiptId","transactionId","txId","subscriptionId","Client","conf","_activate","force","needToDispose","retPromise","origOnWebSocketClose","StompConfig","StompHeaders","HeartbeatInfo","CompatClient","webSocketFactory","closeEventCallback","connectCallback","errorCallback","disconnectCallback","Stomp","protocols","wsFn","klass","ws","browserCrypto","bytes","crypto","require$$0","_randomStringChars","random","max","ret","onUnload","afterUnload","isChromePackagedApp","module","listener","ref","unloadTriggered","requiresPort","port","protocol","undef","decode","encode","querystring","querystringify","obj","pairs","querystringify_1","qs","require$$1","controlOrWhitespace","CRHTLF","slashes","protocolre","windowsDriveLetter","trimLeft","rules","isSpecial","ignore","lolcation","loc","globalVar","finaldestination","Url","scheme","extractProtocol","match","forwardSlashes","otherSlashes","slashesCount","rest","relative","base","last","unshift","up","extracted","instruction","instructions","char","ins","toString","stringify","host","urlParse","URL","q","addr","inherits_browserModule","superCtor","TempCtor","EventTarget","eventType","idx","listeners","eventtarget","inherits","EventEmitter","self","fired","g","l","ai","emitter","Driver","websocketModule","utils","urlUtils","require$$2","require$$3","WebsocketDriver","require$$4","WebSocketTransport","transUrl","websocket","BufferedSender","sender","tref","err","bufferedSender","Polling","Receiver","receiveUrl","AjaxObject","poll","code","reason","polling","SenderReceiver","urlSuffix","senderFunc","pollUrl","senderReceiver","createAjaxSender","opt","ajaxUrl","xo","AjaxBasedTransport","ajaxBased","XhrReceiver","buf","xhr","XHR","AbstractXHRObject","method","abort","axo","cors","abstractXhr","XhrDriver","XHRCorsObject","xhrCors","XHRLocalObject","xhrLocal","browser","require$$5","XhrStreamingTransport","info","xhrStreaming","eventUtils","XDRObject","xdr","XdrStreamingTransport","xdrStreaming","eventsource","EventSourceDriver","EventSourceReceiver","es","EventSourceTransport","iframeUrl","iframe","unloadRef","unattach","post","iframeUtils","require$$6","IframeTransport","transport","baseUrl","iframeMessage","cdata","objectUtils","iframeWrap","IframeWrapTransport","iframeInfo","HtmlfileReceiver","constructFunc","htmlfile","HtmlFileTransport","XhrPollingTransport","xhrPolling","XdrPollingTransport","xdrPolling","JsonpReceiver","urlWithId","script","script2","head","jsonp","area","createIframe","createForm","completed","jsonpSender","JsonPTransport","jsonpPolling","transportList","require$$7","require$$8","ArrayPrototype","ObjectPrototype","FunctionPrototype","StringPrototype","array_slice","_toString","isFunction","isArray","isString","supportsDescriptors","defineProperty","forceAssign","defineProperties","map","toObject","toInteger","num","ToUint32","Empty","that","binder","bound","boundLength","boundArgs","boxedString","splitString","properlyBoxesContext","properlyBoxesNonStrict","properlyBoxesStrict","__","fun","thisp","hasFirefox2IndexOfBug","sought","string_split","compliantExecNpcg","separator","lastLastIndex","separator2","lastIndex","lastLength","string_substr","hasNegativeSubstrBug","extraEscapable","extraLookup","unrollLookup","escapable","unrolled","_escape","quoted","availableTransports","transportsWhitelist","transports","trans","logObject","level","levelExists","log","Event","canBubble","cancelable","CloseEvent","close","TransportMessageEvent","transMessage","XHRFake","xhrFake","InfoAjax","t0","rtt","infoAjax","InfoReceiverIframe","infoIframeReceiver","InfoIframe","ifr","infoIframe","XDR","XHRCors","XHRLocal","InfoReceiver","urlInfo","wasClean","infoReceiver","FacadeJS","facade","InfoIframeReceiver","iframeBootstrap","SockJS","transportMap","at","parentOrigin","onMessage","escape","require$$9","require$$10","require$$11","require$$12","require$$13","require$$14","require$$15","require$$16","sessionId","parsedUrl","secure","sortedProtocols","userSetCode","require$$17","enabledTransports","Transport","timeoutMs","transportUrl","transportObj","forceFail","main","require$$18","STOMP_RECONNECT_DELAY_MS","STOMP_HEARTBEAT_INCOMING_MS","STOMP_HEARTBEAT_OUTGOING_MS","connection","buildClient","parseMessagePayload","messageBody","ensureRealtimeClient","_frame","subscribeToSearchTopics","queryHash","onProgress","onResults","progressSub","resultsSub","subscribeToBookCoverUpdates","bookId","onCoverUpdate","PAGE_SIZE","PREFETCH_WINDOW_SIZE","MIN_PUBLICATION_YEAR","MAX_PUBLICATION_YEAR","COVER_OPTIONS","RESOLUTION_OPTIONS","SORT_OPTIONS","searchCache","unsubscribeRealtime","year","page","sort","resolution","viewMode","realtimeMessage","searchResult","parsePositiveNumber","toSearchParams","cacheKey","parseEnumParam","syncStateFromUrl","nextView","mergeRealtimeHits","candidates","mergedResults","prefetchWindow","baseParams","offset","nextStartIndex","nextParams","nextKey","nextResponse","loadSearch","applyFilters","nextPage","mapHitToCard","authors","author","computeTotalPages","currentPage","pageSize","fromTotal","totalPages","input_1","$.index","select_1","select_2","option_3","button","button_1","root_6","button_2","span","button_3","$.clsx","text_5","consequent_4","similarBooks","affiliateLinks","liveCoverUrl","loadPage","loadedBook","similarResult","linksResult","topicIdentifier","coverUrl","bookCoverUrl","authorNames","publishedDateText","similarCard","backToSearchHref","view","sortedAffiliateEntries","fragment_2","h1","dl","dd","dd_1","dd_2","dd_3","text_7","div_6","$.each","category","div_7","root_9","div_8","$$item","$$array","root_10","root_11","div_9","edition","root_12","text_10","consequent_5","section_2","root_13","div_10","consequent_6","text_4","p_5","root_15","consequent_7","loadSitemap","goTo","targetView","targetLetter","targetPage","bucket","text_1","$.set_class","$.append","text_2","node_3","button_4","nextUrl","cleanupRouting","TopNav","HomePage","SearchPage","BookPage","SitemapPage","NotFoundPage","alternate_3","SiteFooter","node_5","App"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129]}