(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();const bi=!1;var Ni=Array.isArray,wc=Array.prototype.indexOf,Ht=Array.prototype.includes,Gr=Array.from,kc=Object.defineProperty,lr=Object.getOwnPropertyDescriptor,xc=Object.getOwnPropertyDescriptors,Sc=Object.prototype,Ec=Array.prototype,Bs=Object.getPrototypeOf,to=Object.isExtensible;const dn=()=>{};function Ic(e){for(var t=0;t<e.length;t++)e[t]()}function Ms(){var e,t,r=new Promise((n,i)=>{e=n,t=i});return{promise:r,resolve:e,reject:t}}function Tc(e,t){if(Array.isArray(e))return e;if(!(Symbol.iterator in e))return Array.from(e);const r=[];for(const n of e)if(r.push(n),r.length===t)break;return r}const pe=2,Fr=4,Jr=8,Hs=1<<24,ct=16,Ge=32,$t=64,Ai=128,Ze=512,he=1024,ve=2048,Xe=4096,Ae=8192,gt=16384,Pi=32768,Wt=65536,ro=1<<17,Ws=1<<18,Kt=1<<19,Rc=1<<20,mt=1<<25,Pt=32768,yi=1<<21,zi=1<<22,_t=1<<23,fr=Symbol("$state"),Cc=Symbol(""),Mt=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Oc(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Nc(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Ac(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Pc(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function zc(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Uc(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function $c(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Lc(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Zc(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Dc(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const jc=1,qc=2,Fc=16,Bc=1,Mc=2,de=Symbol(),Hc="http://www.w3.org/1999/xhtml";function Wc(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Vc(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Vs(e){return e===this.v}function Xs(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Gs(e){return!Xs(e,this.v)}let Xc=!1,ze=null;function Vt(e){ze=e}function ut(e,t=!1,r){ze={p:ze,i:!1,c:null,e:null,s:e,x:null,l:null}}function lt(e){var t=ze,r=t.e;if(r!==null){t.e=null;for(var n of r)pa(n)}return t.i=!0,ze=t.p,{}}function Js(){return!0}let Tt=[];function Ks(){var e=Tt;Tt=[],Ic(e)}function Ot(e){if(Tt.length===0&&!hr){var t=Tt;queueMicrotask(()=>{t===Tt&&Ks()})}Tt.push(e)}function Gc(){for(;Tt.length>0;)Ks()}function Ys(e){var t=K;if(t===null)return W.f|=_t,e;if((t.f&Pi)===0){if((t.f&Ai)===0)throw e;t.b.error(e)}else Xt(e,t)}function Xt(e,t){for(;t!==null;){if((t.f&Ai)!==0)try{t.b.error(e);return}catch(r){e=r}t=t.parent}throw e}const Jc=-7169;function se(e,t){e.f=e.f&Jc|t}function Ui(e){(e.f&Ze)!==0||e.deps===null?se(e,he):se(e,Xe)}function Qs(e){if(e!==null)for(const t of e)(t.f&pe)===0||(t.f&Pt)===0||(t.f^=Pt,Qs(t.deps))}function ea(e,t,r){(e.f&ve)!==0?t.add(e):(e.f&Xe)!==0&&r.add(e),Qs(e.deps),se(e,he)}const Cr=new Set;let X=null,Br=null,He=null,Oe=[],Kr=null,wi=!1,hr=!1;class bt{committed=!1;current=new Map;previous=new Map;#t=new Set;#a=new Set;#e=0;#o=0;#s=null;#n=new Set;#r=new Set;#i=new Map;is_fork=!1;#c=!1;is_deferred(){return this.is_fork||this.#o>0}skip_effect(t){this.#i.has(t)||this.#i.set(t,{d:[],m:[]})}unskip_effect(t){var r=this.#i.get(t);if(r){this.#i.delete(t);for(var n of r.d)se(n,ve),We(n);for(n of r.m)se(n,Xe),We(n)}}process(t){Oe=[],this.apply();var r=[],n=[];for(const i of t)this.#u(i,r,n);if(this.is_deferred()){this.#l(n),this.#l(r);for(const[i,o]of this.#i)ia(i,o)}else{for(const i of this.#t)i();this.#t.clear(),this.#e===0&&this.#f(),Br=this,X=null,no(n),no(r),Br=null,this.#s?.resolve()}He=null}#u(t,r,n){t.f^=he;for(var i=t.first,o=null;i!==null;){var s=i.f,a=(s&(Ge|$t))!==0,u=a&&(s&he)!==0,l=u||(s&Ae)!==0||this.#i.has(i);if(!l&&i.fn!==null){a?i.f^=he:o!==null&&(s&(Fr|Jr|Hs))!==0?o.b.defer_effect(i):(s&Fr)!==0?r.push(i):xr(i)&&((s&ct)!==0&&this.#r.add(i),gr(i));var h=i.first;if(h!==null){i=h;continue}}var p=i.parent;for(i=i.next;i===null&&p!==null;)p===o&&(o=null),i=p.next,p=p.parent}}#l(t){for(var r=0;r<t.length;r+=1)ea(t[r],this.#n,this.#r)}capture(t,r){r!==de&&!this.previous.has(t)&&this.previous.set(t,r),(t.f&_t)===0&&(this.current.set(t,t.v),He?.set(t,t.v))}activate(){X=this,this.apply()}deactivate(){X===this&&(X=null,He=null)}flush(){if(this.activate(),Oe.length>0){if(ta(),X!==null&&X!==this)return}else this.#e===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#a)t(this);this.#a.clear()}#f(){if(Cr.size>1){this.previous.clear();var t=He,r=!0;for(const i of Cr){if(i===this){r=!1;continue}const o=[];for(const[a,u]of this.current){if(i.current.has(a))if(r&&u!==i.current.get(a))i.current.set(a,u);else continue;o.push(a)}if(o.length===0)continue;const s=[...i.current.keys()].filter(a=>!this.current.has(a));if(s.length>0){var n=Oe;Oe=[];const a=new Set,u=new Map;for(const l of o)ra(l,s,a,u);if(Oe.length>0){X=i,i.apply();for(const l of Oe)i.#u(l,[],[]);i.deactivate()}Oe=n}}X=null,He=t}this.committed=!0,Cr.delete(this)}increment(t){this.#e+=1,t&&(this.#o+=1)}decrement(t){this.#e-=1,t&&(this.#o-=1),!this.#c&&(this.#c=!0,Ot(()=>{this.#c=!1,this.is_deferred()?Oe.length>0&&this.flush():this.revive()}))}revive(){for(const t of this.#n)this.#r.delete(t),se(t,ve),We(t);for(const t of this.#r)se(t,Xe),We(t);this.flush()}oncommit(t){this.#t.add(t)}ondiscard(t){this.#a.add(t)}settled(){return(this.#s??=Ms()).promise}static ensure(){if(X===null){const t=X=new bt;Cr.add(X),hr||Ot(()=>{X===t&&t.flush()})}return X}apply(){}}function Kc(e){var t=hr;hr=!0;try{for(var r;;){if(Gc(),Oe.length===0&&(X?.flush(),Oe.length===0))return Kr=null,r;ta()}}finally{hr=t}}function ta(){wi=!0;var e=null;try{for(var t=0;Oe.length>0;){var r=bt.ensure();if(t++>1e3){var n,i;Yc()}r.process(Oe),yt.clear()}}finally{wi=!1,Kr=null}}function Yc(){try{Uc()}catch(e){Xt(e,Kr)}}let ot=null;function no(e){var t=e.length;if(t!==0){for(var r=0;r<t;){var n=e[r++];if((n.f&(gt|Ae))===0&&xr(n)&&(ot=new Set,gr(n),n.deps===null&&n.first===null&&n.nodes===null&&(n.teardown===null&&n.ac===null?_a(n):n.fn=null),ot?.size>0)){yt.clear();for(const i of ot){if((i.f&(gt|Ae))!==0)continue;const o=[i];let s=i.parent;for(;s!==null;)ot.has(s)&&(ot.delete(s),o.push(s)),s=s.parent;for(let a=o.length-1;a>=0;a--){const u=o[a];(u.f&(gt|Ae))===0&&gr(u)}}ot.clear()}}ot=null}}function ra(e,t,r,n){if(!r.has(e)&&(r.add(e),e.reactions!==null))for(const i of e.reactions){const o=i.f;(o&pe)!==0?ra(i,t,r,n):(o&(zi|ct))!==0&&(o&ve)===0&&na(i,t,n)&&(se(i,ve),We(i))}}function na(e,t,r){const n=r.get(e);if(n!==void 0)return n;if(e.deps!==null)for(const i of e.deps){if(Ht.call(t,i))return!0;if((i.f&pe)!==0&&na(i,t,r))return r.set(i,!0),!0}return r.set(e,!1),!1}function We(e){for(var t=Kr=e;t.parent!==null;){t=t.parent;var r=t.f;if(wi&&t===K&&(r&ct)!==0&&(r&Ws)===0)return;if((r&($t|Ge))!==0){if((r&he)===0)return;t.f^=he}}Oe.push(t)}function ia(e,t){if(!((e.f&Ge)!==0&&(e.f&he)!==0)){(e.f&ve)!==0?t.d.push(e):(e.f&Xe)!==0&&t.m.push(e),se(e,he);for(var r=e.first;r!==null;)ia(r,t),r=r.next}}function Qc(e){let t=0,r=zt(0),n;return()=>{Zi()&&(_(r),va(()=>(t===0&&(n=Fi(()=>e(()=>dr(r)))),t+=1,()=>{Ot(()=>{t-=1,t===0&&(n?.(),n=void 0,dr(r))})})))}}var eu=Wt|Kt|Ai;function tu(e,t,r){new ru(e,t,r)}class ru{parent;is_pending=!1;#t;#a=null;#e;#o;#s;#n=null;#r=null;#i=null;#c=null;#u=null;#l=0;#f=0;#p=!1;#d=!1;#v=new Set;#m=new Set;#h=null;#w=Qc(()=>(this.#h=zt(this.#l),()=>{this.#h=null}));constructor(t,r,n){this.#t=t,this.#e=r,this.#o=n,this.parent=K.b,this.is_pending=!!this.#e.pending,this.#s=ji(()=>{K.b=this;{var i=this.#b();try{this.#n=Le(()=>n(i))}catch(o){this.error(o)}this.#f>0?this.#_():this.is_pending=!1}return()=>{this.#u?.remove()}},eu)}#k(){try{this.#n=Le(()=>this.#o(this.#t))}catch(t){this.error(t)}}#x(){const t=this.#e.pending;t&&(this.#r=Le(()=>t(this.#t)),Ot(()=>{var r=this.#b();this.#n=this.#g(()=>(bt.ensure(),Le(()=>this.#o(r)))),this.#f>0?this.#_():(Nt(this.#r,()=>{this.#r=null}),this.is_pending=!1)}))}#b(){var t=this.#t;return this.is_pending&&(this.#u=wt(),this.#t.before(this.#u),t=this.#u),t}defer_effect(t){ea(t,this.#v,this.#m)}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!this.#e.pending}#g(t){var r=K,n=W,i=ze;et(this.#s),je(this.#s),Vt(this.#s.ctx);try{return t()}catch(o){return Ys(o),null}finally{et(r),je(n),Vt(i)}}#_(){const t=this.#e.pending;this.#n!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#u),wa(this.#n,this.#c)),this.#r===null&&(this.#r=Le(()=>t(this.#t)))}#y(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#y(t);return}if(this.#f+=t,this.#f===0){this.is_pending=!1;for(const r of this.#v)se(r,ve),We(r);for(const r of this.#m)se(r,Xe),We(r);this.#v.clear(),this.#m.clear(),this.#r&&Nt(this.#r,()=>{this.#r=null}),this.#c&&(this.#t.before(this.#c),this.#c=null)}}update_pending_count(t){this.#y(t),this.#l+=t,!(!this.#h||this.#p)&&(this.#p=!0,Ot(()=>{this.#p=!1,this.#h&&Gt(this.#h,this.#l)}))}get_effect_pending(){return this.#w(),_(this.#h)}error(t){var r=this.#e.onerror;let n=this.#e.failed;if(this.#d||!r&&!n)throw t;this.#n&&(Ee(this.#n),this.#n=null),this.#r&&(Ee(this.#r),this.#r=null),this.#i&&(Ee(this.#i),this.#i=null);var i=!1,o=!1;const s=()=>{if(i){Vc();return}i=!0,o&&Dc(),bt.ensure(),this.#l=0,this.#i!==null&&Nt(this.#i,()=>{this.#i=null}),this.is_pending=this.has_pending_snippet(),this.#n=this.#g(()=>(this.#d=!1,Le(()=>this.#o(this.#t)))),this.#f>0?this.#_():this.is_pending=!1};Ot(()=>{try{o=!0,r?.(t,s),o=!1}catch(a){Xt(a,this.#s&&this.#s.parent)}n&&(this.#i=this.#g(()=>{bt.ensure(),this.#d=!0;try{return Le(()=>{n(this.#t,()=>t,()=>s)})}catch(a){return Xt(a,this.#s.parent),null}finally{this.#d=!1}}))})}}function nu(e,t,r,n){const i=$i;var o=e.filter(m=>!m.settled);if(r.length===0&&o.length===0){n(t.map(i));return}var s=X,a=K,u=iu(),l=o.length===1?o[0].promise:o.length>1?Promise.all(o.map(m=>m.promise)):null;function h(m){u();try{n(m)}catch(w){(a.f&gt)===0&&Xt(w,a)}s?.deactivate(),ki()}if(r.length===0){l.then(()=>h(t.map(i)));return}function p(){u(),Promise.all(r.map(m=>ou(m))).then(m=>h([...t.map(i),...m])).catch(m=>Xt(m,a))}l?l.then(p):p()}function iu(){var e=K,t=W,r=ze,n=X;return function(o=!0){et(e),je(t),Vt(r),o&&n?.activate()}}function ki(){et(null),je(null),Vt(null)}function $i(e){var t=pe|ve,r=W!==null&&(W.f&pe)!==0?W:null;return K!==null&&(K.f|=Kt),{ctx:ze,deps:null,effects:null,equals:Vs,f:t,fn:e,reactions:null,rv:0,v:de,wv:0,parent:r??K,ac:null}}function ou(e,t,r){let n=K;n===null&&Nc();var i=n.b,o=void 0,s=zt(de),a=!W,u=new Map;return _u(()=>{var l=Ms();o=l.promise;try{Promise.resolve(e()).then(l.resolve,l.reject).then(()=>{h===X&&h.committed&&h.deactivate(),ki()})}catch(w){l.reject(w),ki()}var h=X;if(a){var p=i.is_rendered();i.update_pending_count(1),h.increment(p),u.get(h)?.reject(Mt),u.delete(h),u.set(h,l)}const m=(w,y=void 0)=>{if(h.activate(),y)y!==Mt&&(s.f|=_t,Gt(s,y));else{(s.f&_t)!==0&&(s.f^=_t),Gt(s,w);for(const[E,C]of u){if(u.delete(E),E===h)break;C.reject(Mt)}}a&&(i.update_pending_count(-1),h.decrement(p))};l.promise.then(m,w=>m(null,w||"unknown"))}),Di(()=>{for(const l of u.values())l.reject(Mt)}),new Promise(l=>{function h(p){function m(){p===o?l(s):h(o)}p.then(m,m)}h(o)})}function xe(e){const t=$i(e);return ka(t),t}function su(e){const t=$i(e);return t.equals=Gs,t}function oa(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)Ee(t[r])}}function au(e){for(var t=e.parent;t!==null;){if((t.f&pe)===0)return(t.f&gt)===0?t:null;t=t.parent}return null}function Li(e){var t,r=K;et(au(e));try{e.f&=~Pt,oa(e),t=Ia(e)}finally{et(r)}return t}function sa(e){var t=Li(e);if(!e.equals(t)&&(e.wv=Sa(),(!X?.is_fork||e.deps===null)&&(e.v=t,e.deps===null))){se(e,he);return}Ut||(He!==null?(Zi()||X?.is_fork)&&He.set(e,t):Ui(e))}let xi=new Set;const yt=new Map;let aa=!1;function zt(e,t){var r={f:0,v:e,reactions:null,equals:Vs,rv:0,wv:0};return r}function M(e,t){const r=zt(e);return ka(r),r}function cu(e,t=!1,r=!0){const n=zt(e);return t||(n.equals=Gs),n}function L(e,t,r=!1){W!==null&&(!Ve||(W.f&ro)!==0)&&Js()&&(W.f&(pe|ct|zi|ro))!==0&&(De===null||!Ht.call(De,e))&&Zc();let n=r?Ye(t):t;return Gt(e,n)}function Gt(e,t){if(!e.equals(t)){var r=e.v;Ut?yt.set(e,t):yt.set(e,r),e.v=t;var n=bt.ensure();if(n.capture(e,r),(e.f&pe)!==0){const i=e;(e.f&ve)!==0&&Li(i),Ui(i)}e.wv=Sa(),ca(e,ve),K!==null&&(K.f&he)!==0&&(K.f&(Ge|$t))===0&&($e===null?wu([e]):$e.push(e)),!n.is_fork&&xi.size>0&&!aa&&uu()}return t}function uu(){aa=!1;for(const e of xi)(e.f&he)!==0&&se(e,Xe),xr(e)&&gr(e);xi.clear()}function dr(e){L(e,e.v+1)}function ca(e,t){var r=e.reactions;if(r!==null)for(var n=r.length,i=0;i<n;i++){var o=r[i],s=o.f,a=(s&ve)===0;if(a&&se(o,t),(s&pe)!==0){var u=o;He?.delete(u),(s&Pt)===0&&(s&Ze&&(o.f|=Pt),ca(u,Xe))}else a&&((s&ct)!==0&&ot!==null&&ot.add(o),We(o))}}function Ye(e){if(typeof e!="object"||e===null||fr in e)return e;const t=Bs(e);if(t!==Sc&&t!==Ec)return e;var r=new Map,n=Ni(e),i=M(0),o=At,s=a=>{if(At===o)return a();var u=W,l=At;je(null),co(o);var h=a();return je(u),co(l),h};return n&&r.set("length",M(e.length)),new Proxy(e,{defineProperty(a,u,l){(!("value"in l)||l.configurable===!1||l.enumerable===!1||l.writable===!1)&&$c();var h=r.get(u);return h===void 0?h=s(()=>{var p=M(l.value);return r.set(u,p),p}):L(h,l.value,!0),!0},deleteProperty(a,u){var l=r.get(u);if(l===void 0){if(u in a){const h=s(()=>M(de));r.set(u,h),dr(i)}}else L(l,de),dr(i);return!0},get(a,u,l){if(u===fr)return e;var h=r.get(u),p=u in a;if(h===void 0&&(!p||lr(a,u)?.writable)&&(h=s(()=>{var w=Ye(p?a[u]:de),y=M(w);return y}),r.set(u,h)),h!==void 0){var m=_(h);return m===de?void 0:m}return Reflect.get(a,u,l)},getOwnPropertyDescriptor(a,u){var l=Reflect.getOwnPropertyDescriptor(a,u);if(l&&"value"in l){var h=r.get(u);h&&(l.value=_(h))}else if(l===void 0){var p=r.get(u),m=p?.v;if(p!==void 0&&m!==de)return{enumerable:!0,configurable:!0,value:m,writable:!0}}return l},has(a,u){if(u===fr)return!0;var l=r.get(u),h=l!==void 0&&l.v!==de||Reflect.has(a,u);if(l!==void 0||K!==null&&(!h||lr(a,u)?.writable)){l===void 0&&(l=s(()=>{var m=h?Ye(a[u]):de,w=M(m);return w}),r.set(u,l));var p=_(l);if(p===de)return!1}return h},set(a,u,l,h){var p=r.get(u),m=u in a;if(n&&u==="length")for(var w=l;w<p.v;w+=1){var y=r.get(w+"");y!==void 0?L(y,de):w in a&&(y=s(()=>M(de)),r.set(w+"",y))}if(p===void 0)(!m||lr(a,u)?.writable)&&(p=s(()=>M(void 0)),L(p,Ye(l)),r.set(u,p));else{m=p.v!==de;var E=s(()=>Ye(l));L(p,E)}var C=Reflect.getOwnPropertyDescriptor(a,u);if(C?.set&&C.set.call(h,l),!m){if(n&&typeof u=="string"){var $=r.get("length"),b=Number(u);Number.isInteger(b)&&b>=$.v&&L($,b+1)}dr(i)}return!0},ownKeys(a){_(i);var u=Reflect.ownKeys(a).filter(p=>{var m=r.get(p);return m===void 0||m.v!==de});for(var[l,h]of r)h.v!==de&&!(l in a)&&u.push(l);return u},setPrototypeOf(){Lc()}})}function io(e){try{if(e!==null&&typeof e=="object"&&fr in e)return e[fr]}catch{}return e}function lu(e,t){return Object.is(io(e),io(t))}var oo,ua,la,fa;function fu(){if(oo===void 0){oo=window,ua=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,r=Text.prototype;la=lr(t,"firstChild").get,fa=lr(t,"nextSibling").get,to(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),to(r)&&(r.__t=void 0)}}function wt(e=""){return document.createTextNode(e)}function Mr(e){return la.call(e)}function wr(e){return fa.call(e)}function O(e,t){return Mr(e)}function Pe(e,t=!1){{var r=Mr(e);return r instanceof Comment&&r.data===""?wr(r):r}}function U(e,t=1,r=!1){let n=e;for(;t--;)n=wr(n);return n}function hu(e){e.textContent=""}function ha(){return!1}let so=!1;function du(){so||(so=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function Yr(e){var t=W,r=K;je(null),et(null);try{return e()}finally{je(t),et(r)}}function da(e,t,r,n=r){e.addEventListener(t,()=>Yr(r));const i=e.__on_r;i?e.__on_r=()=>{i(),n(!0)}:e.__on_r=()=>n(!0),du()}function pu(e){K===null&&(W===null&&zc(),Pc()),Ut&&Ac()}function vu(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function ft(e,t,r){var n=K;n!==null&&(n.f&Ae)!==0&&(e|=Ae);var i={ctx:ze,deps:null,nodes:null,f:e|ve|Ze,first:null,fn:t,last:null,next:null,parent:n,b:n&&n.b,prev:null,teardown:null,wv:0,ac:null};if(r)try{gr(i),i.f|=Pi}catch(a){throw Ee(i),a}else t!==null&&We(i);var o=i;if(r&&o.deps===null&&o.teardown===null&&o.nodes===null&&o.first===o.last&&(o.f&Kt)===0&&(o=o.first,(e&ct)!==0&&(e&Wt)!==0&&o!==null&&(o.f|=Wt)),o!==null&&(o.parent=n,n!==null&&vu(o,n),W!==null&&(W.f&pe)!==0&&(e&$t)===0)){var s=W;(s.effects??=[]).push(o)}return i}function Zi(){return W!==null&&!Ve}function Di(e){const t=ft(Jr,null,!1);return se(t,he),t.teardown=e,t}function kr(e){pu();var t=K.f,r=!W&&(t&Ge)!==0&&(t&Pi)===0;if(r){var n=ze;(n.e??=[]).push(e)}else return pa(e)}function pa(e){return ft(Fr|Rc,e,!1)}function mu(e){bt.ensure();const t=ft($t|Kt,e,!0);return(r={})=>new Promise(n=>{r.outro?Nt(t,()=>{Ee(t),n(void 0)}):(Ee(t),n(void 0))})}function gu(e){return ft(Fr,e,!1)}function _u(e){return ft(zi|Kt,e,!0)}function va(e,t=0){return ft(Jr|t,e,!0)}function Y(e,t=[],r=[],n=[]){nu(n,t,r,i=>{ft(Jr,()=>e(...i.map(_)),!0)})}function ji(e,t=0){var r=ft(ct|t,e,!0);return r}function Le(e){return ft(Ge|Kt,e,!0)}function ma(e){var t=e.teardown;if(t!==null){const r=Ut,n=W;ao(!0),je(null);try{t.call(null)}finally{ao(r),je(n)}}}function ga(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){const i=r.ac;i!==null&&Yr(()=>{i.abort(Mt)});var n=r.next;(r.f&$t)!==0?r.parent=null:Ee(r,t),r=n}}function bu(e){for(var t=e.first;t!==null;){var r=t.next;(t.f&Ge)===0&&Ee(t),t=r}}function Ee(e,t=!0){var r=!1;(t||(e.f&Ws)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(yu(e.nodes.start,e.nodes.end),r=!0),ga(e,t&&!r),Hr(e,0),se(e,gt);var n=e.nodes&&e.nodes.t;if(n!==null)for(const o of n)o.stop();ma(e);var i=e.parent;i!==null&&i.first!==null&&_a(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function yu(e,t){for(;e!==null;){var r=e===t?null:wr(e);e.remove(),e=r}}function _a(e){var t=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=r))}function Nt(e,t,r=!0){var n=[];ba(e,n,!0);var i=()=>{r&&Ee(e),t&&t()},o=n.length;if(o>0){var s=()=>--o||i();for(var a of n)a.out(s)}else i()}function ba(e,t,r){if((e.f&Ae)===0){e.f^=Ae;var n=e.nodes&&e.nodes.t;if(n!==null)for(const a of n)(a.is_global||r)&&t.push(a);for(var i=e.first;i!==null;){var o=i.next,s=(i.f&Wt)!==0||(i.f&Ge)!==0&&(e.f&ct)!==0;ba(i,t,s?r:!1),i=o}}}function qi(e){ya(e,!0)}function ya(e,t){if((e.f&Ae)!==0){e.f^=Ae,(e.f&he)===0&&(se(e,ve),We(e));for(var r=e.first;r!==null;){var n=r.next,i=(r.f&Wt)!==0||(r.f&Ge)!==0;ya(r,i?t:!1),r=n}var o=e.nodes&&e.nodes.t;if(o!==null)for(const s of o)(s.is_global||t)&&s.in()}}function wa(e,t){if(e.nodes)for(var r=e.nodes.start,n=e.nodes.end;r!==null;){var i=r===n?null:wr(r);t.append(r),r=i}}let Dr=!1,Ut=!1;function ao(e){Ut=e}let W=null,Ve=!1;function je(e){W=e}let K=null;function et(e){K=e}let De=null;function ka(e){W!==null&&(De===null?De=[e]:De.push(e))}let ke=null,Ce=0,$e=null;function wu(e){$e=e}let xa=1,Rt=0,At=Rt;function co(e){At=e}function Sa(){return++xa}function xr(e){var t=e.f;if((t&ve)!==0)return!0;if(t&pe&&(e.f&=~Pt),(t&Xe)!==0){for(var r=e.deps,n=r.length,i=0;i<n;i++){var o=r[i];if(xr(o)&&sa(o),o.wv>e.wv)return!0}(t&Ze)!==0&&He===null&&se(e,he)}return!1}function Ea(e,t,r=!0){var n=e.reactions;if(n!==null&&!(De!==null&&Ht.call(De,e)))for(var i=0;i<n.length;i++){var o=n[i];(o.f&pe)!==0?Ea(o,t,!1):t===o&&(r?se(o,ve):(o.f&he)!==0&&se(o,Xe),We(o))}}function Ia(e){var t=ke,r=Ce,n=$e,i=W,o=De,s=ze,a=Ve,u=At,l=e.f;ke=null,Ce=0,$e=null,W=(l&(Ge|$t))===0?e:null,De=null,Vt(e.ctx),Ve=!1,At=++Rt,e.ac!==null&&(Yr(()=>{e.ac.abort(Mt)}),e.ac=null);try{e.f|=yi;var h=e.fn,p=h(),m=e.deps,w=X?.is_fork;if(ke!==null){var y;if(w||Hr(e,Ce),m!==null&&Ce>0)for(m.length=Ce+ke.length,y=0;y<ke.length;y++)m[Ce+y]=ke[y];else e.deps=m=ke;if(Zi()&&(e.f&Ze)!==0)for(y=Ce;y<m.length;y++)(m[y].reactions??=[]).push(e)}else!w&&m!==null&&Ce<m.length&&(Hr(e,Ce),m.length=Ce);if(Js()&&$e!==null&&!Ve&&m!==null&&(e.f&(pe|Xe|ve))===0)for(y=0;y<$e.length;y++)Ea($e[y],e);if(i!==null&&i!==e){if(Rt++,i.deps!==null)for(let E=0;E<r;E+=1)i.deps[E].rv=Rt;if(t!==null)for(const E of t)E.rv=Rt;$e!==null&&(n===null?n=$e:n.push(...$e))}return(e.f&_t)!==0&&(e.f^=_t),p}catch(E){return Ys(E)}finally{e.f^=yi,ke=t,Ce=r,$e=n,W=i,De=o,Vt(s),Ve=a,At=u}}function ku(e,t){let r=t.reactions;if(r!==null){var n=wc.call(r,e);if(n!==-1){var i=r.length-1;i===0?r=t.reactions=null:(r[n]=r[i],r.pop())}}if(r===null&&(t.f&pe)!==0&&(ke===null||!Ht.call(ke,t))){var o=t;(o.f&Ze)!==0&&(o.f^=Ze,o.f&=~Pt),Ui(o),oa(o),Hr(o,0)}}function Hr(e,t){var r=e.deps;if(r!==null)for(var n=t;n<r.length;n++)ku(e,r[n])}function gr(e){var t=e.f;if((t&gt)===0){se(e,he);var r=K,n=Dr;K=e,Dr=!0;try{(t&(ct|Hs))!==0?bu(e):ga(e),ma(e);var i=Ia(e);e.teardown=typeof i=="function"?i:null,e.wv=xa;var o;bi&&Xc&&(e.f&ve)!==0&&e.deps}finally{Dr=n,K=r}}}async function xu(){await Promise.resolve(),Kc()}function _(e){var t=e.f,r=(t&pe)!==0;if(W!==null&&!Ve){var n=K!==null&&(K.f&gt)!==0;if(!n&&(De===null||!Ht.call(De,e))){var i=W.deps;if((W.f&yi)!==0)e.rv<Rt&&(e.rv=Rt,ke===null&&i!==null&&i[Ce]===e?Ce++:ke===null?ke=[e]:ke.push(e));else{(W.deps??=[]).push(e);var o=e.reactions;o===null?e.reactions=[W]:Ht.call(o,W)||o.push(W)}}}if(Ut&&yt.has(e))return yt.get(e);if(r){var s=e;if(Ut){var a=s.v;return((s.f&he)===0&&s.reactions!==null||Ra(s))&&(a=Li(s)),yt.set(s,a),a}var u=(s.f&Ze)===0&&!Ve&&W!==null&&(Dr||(W.f&Ze)!==0),l=s.deps===null;xr(s)&&(u&&(s.f|=Ze),sa(s)),u&&!l&&Ta(s)}if(He?.has(e))return He.get(e);if((e.f&_t)!==0)throw e.v;return e.v}function Ta(e){if(e.deps!==null){e.f|=Ze;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&pe)!==0&&(t.f&Ze)===0&&Ta(t)}}function Ra(e){if(e.v===de)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(yt.has(t)||(t.f&pe)!==0&&Ra(t))return!0;return!1}function Fi(e){var t=Ve;try{return Ve=!0,e()}finally{Ve=t}}const Su=["touchstart","touchmove"];function Eu(e){return Su.includes(e)}const Ca=new Set,Si=new Set;function Iu(e,t,r,n={}){function i(o){if(n.capture||ar.call(t,o),!o.cancelBubble)return Yr(()=>r?.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Ot(()=>{t.addEventListener(e,i,n)}):t.addEventListener(e,i,n),i}function Qr(e,t,r,n,i){var o={capture:n,passive:i},s=Iu(e,t,r,o);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Di(()=>{t.removeEventListener(e,s,o)})}function Bi(e){for(var t=0;t<e.length;t++)Ca.add(e[t]);for(var r of Si)r(e)}let uo=null;function ar(e){var t=this,r=t.ownerDocument,n=e.type,i=e.composedPath?.()||[],o=i[0]||e.target;uo=e;var s=0,a=uo===e&&e.__root;if(a){var u=i.indexOf(a);if(u!==-1&&(t===document||t===window)){e.__root=t;return}var l=i.indexOf(t);if(l===-1)return;u<=l&&(s=u)}if(o=i[s]||e.target,o!==t){kc(e,"currentTarget",{configurable:!0,get(){return o||r}});var h=W,p=K;je(null),et(null);try{for(var m,w=[];o!==null;){var y=o.assignedSlot||o.parentNode||o.host||null;try{var E=o["__"+n];E!=null&&(!o.disabled||e.target===o)&&E.call(o,e)}catch(C){m?w.push(C):m=C}if(e.cancelBubble||y===t||y===null)break;o=y}if(m){for(let C of w)queueMicrotask(()=>{throw C});throw m}}finally{e.__root=t,delete e.currentTarget,je(h),et(p)}}}function Tu(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Ei(e,t){var r=K;r.nodes===null&&(r.nodes={start:e,end:t,a:null,t:null})}function F(e,t){var r=(t&Bc)!==0,n=(t&Mc)!==0,i,o=!e.startsWith("<!>");return()=>{i===void 0&&(i=Tu(o?e:"<!>"+e),r||(i=Mr(i)));var s=n||ua?document.importNode(i,!0):i.cloneNode(!0);if(r){var a=Mr(s),u=s.lastChild;Ei(a,u)}else Ei(s,s);return s}}function st(){var e=document.createDocumentFragment(),t=document.createComment(""),r=wt();return e.append(t,r),Ei(t,r),e}function D(e,t){e!==null&&e.before(t)}function V(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??=e.nodeValue)&&(e.__t=r,e.nodeValue=r+"")}function Ru(e,t){return Cu(e,t)}const Ft=new Map;function Cu(e,{target:t,anchor:r,props:n={},events:i,context:o,intro:s=!0}){fu();var a=new Set,u=p=>{for(var m=0;m<p.length;m++){var w=p[m];if(!a.has(w)){a.add(w);var y=Eu(w);t.addEventListener(w,ar,{passive:y});var E=Ft.get(w);E===void 0?(document.addEventListener(w,ar,{passive:y}),Ft.set(w,1)):Ft.set(w,E+1)}}};u(Gr(Ca)),Si.add(u);var l=void 0,h=mu(()=>{var p=r??t.appendChild(wt());return tu(p,{pending:()=>{}},m=>{if(o){ut({});var w=ze;w.c=o}i&&(n.$$events=i),l=e(m,n)||{},o&&lt()}),()=>{for(var m of a){t.removeEventListener(m,ar);var w=Ft.get(m);--w===0?(document.removeEventListener(m,ar),Ft.delete(m)):Ft.set(m,w)}Si.delete(u),p!==r&&p.parentNode?.removeChild(p)}});return Ou.set(l,h),l}let Ou=new WeakMap;class Nu{anchor;#t=new Map;#a=new Map;#e=new Map;#o=new Set;#s=!0;constructor(t,r=!0){this.anchor=t,this.#s=r}#n=()=>{var t=X;if(this.#t.has(t)){var r=this.#t.get(t),n=this.#a.get(r);if(n)qi(n),this.#o.delete(r);else{var i=this.#e.get(r);i&&(this.#a.set(r,i.effect),this.#e.delete(r),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),n=i.effect)}for(const[o,s]of this.#t){if(this.#t.delete(o),o===t)break;const a=this.#e.get(s);a&&(Ee(a.effect),this.#e.delete(s))}for(const[o,s]of this.#a){if(o===r||this.#o.has(o))continue;const a=()=>{if(Array.from(this.#t.values()).includes(o)){var l=document.createDocumentFragment();wa(s,l),l.append(wt()),this.#e.set(o,{effect:s,fragment:l})}else Ee(s);this.#o.delete(o),this.#a.delete(o)};this.#s||!n?(this.#o.add(o),Nt(s,a,!1)):a()}}};#r=t=>{this.#t.delete(t);const r=Array.from(this.#t.values());for(const[n,i]of this.#e)r.includes(n)||(Ee(i.effect),this.#e.delete(n))};ensure(t,r){var n=X,i=ha();if(r&&!this.#a.has(t)&&!this.#e.has(t))if(i){var o=document.createDocumentFragment(),s=wt();o.append(s),this.#e.set(t,{effect:Le(()=>r(s)),fragment:o})}else this.#a.set(t,Le(()=>r(this.anchor)));if(this.#t.set(n,t),i){for(const[a,u]of this.#a)a===t?n.unskip_effect(u):n.skip_effect(u);for(const[a,u]of this.#e)a===t?n.unskip_effect(u.effect):n.skip_effect(u.effect);n.oncommit(this.#n),n.ondiscard(this.#r)}else this.#n()}}function J(e,t,r=!1){var n=new Nu(e),i=r?Wt:0;function o(s,a){n.ensure(s,a)}ji(()=>{var s=!1;t((a,u=!0)=>{s=!0,o(u,a)}),s||o(!1,null)},i)}function Qe(e,t){return t}function Au(e,t,r){for(var n=[],i=t.length,o,s=t.length,a=0;a<i;a++){let p=t[a];Nt(p,()=>{if(o){if(o.pending.delete(p),o.done.add(p),o.pending.size===0){var m=e.outrogroups;Ii(Gr(o.done)),m.delete(o),m.size===0&&(e.outrogroups=null)}}else s-=1},!1)}if(s===0){var u=n.length===0&&r!==null;if(u){var l=r,h=l.parentNode;hu(h),h.append(l),e.items.clear()}Ii(t,!u)}else o={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(o)}function Ii(e,t=!0){for(var r=0;r<e.length;r++)Ee(e[r],t)}var lo;function Se(e,t,r,n,i,o=null){var s=e,a=new Map;{var u=e;s=u.appendChild(wt())}var l=null,h=su(()=>{var C=r();return Ni(C)?C:C==null?[]:Gr(C)}),p,m=!0;function w(){E.fallback=l,Pu(E,p,s,t,n),l!==null&&(p.length===0?(l.f&mt)===0?qi(l):(l.f^=mt,cr(l,null,s)):Nt(l,()=>{l=null}))}var y=ji(()=>{p=_(h);for(var C=p.length,$=new Set,b=X,x=ha(),d=0;d<C;d+=1){var c=p[d],v=n(c,d),f=m?null:a.get(v);f?(f.v&&Gt(f.v,c),f.i&&Gt(f.i,d),x&&b.unskip_effect(f.e)):(f=zu(a,m?s:lo??=wt(),c,v,d,i,t,r),m||(f.e.f|=mt),a.set(v,f)),$.add(v)}if(C===0&&o&&!l&&(m?l=Le(()=>o(s)):(l=Le(()=>o(lo??=wt())),l.f|=mt)),!m)if(x){for(const[g,k]of a)$.has(g)||b.skip_effect(k.e);b.oncommit(w),b.ondiscard(()=>{})}else w();_(h)}),E={effect:y,items:a,outrogroups:null,fallback:l};m=!1}function or(e){for(;e!==null&&(e.f&Ge)===0;)e=e.next;return e}function Pu(e,t,r,n,i){var o=t.length,s=e.items,a=or(e.effect.first),u,l=null,h=[],p=[],m,w,y,E;for(E=0;E<o;E+=1){if(m=t[E],w=i(m,E),y=s.get(w).e,e.outrogroups!==null)for(const g of e.outrogroups)g.pending.delete(y),g.done.delete(y);if((y.f&mt)!==0)if(y.f^=mt,y===a)cr(y,null,r);else{var C=l?l.next:a;y===e.effect.last&&(e.effect.last=y.prev),y.prev&&(y.prev.next=y.next),y.next&&(y.next.prev=y.prev),vt(e,l,y),vt(e,y,C),cr(y,C,r),l=y,h=[],p=[],a=or(l.next);continue}if((y.f&Ae)!==0&&qi(y),y!==a){if(u!==void 0&&u.has(y)){if(h.length<p.length){var $=p[0],b;l=$.prev;var x=h[0],d=h[h.length-1];for(b=0;b<h.length;b+=1)cr(h[b],$,r);for(b=0;b<p.length;b+=1)u.delete(p[b]);vt(e,x.prev,d.next),vt(e,l,x),vt(e,d,$),a=$,l=d,E-=1,h=[],p=[]}else u.delete(y),cr(y,a,r),vt(e,y.prev,y.next),vt(e,y,l===null?e.effect.first:l.next),vt(e,l,y),l=y;continue}for(h=[],p=[];a!==null&&a!==y;)(u??=new Set).add(a),p.push(a),a=or(a.next);if(a===null)continue}(y.f&mt)===0&&h.push(y),l=y,a=or(y.next)}if(e.outrogroups!==null){for(const g of e.outrogroups)g.pending.size===0&&(Ii(Gr(g.done)),e.outrogroups?.delete(g));e.outrogroups.size===0&&(e.outrogroups=null)}if(a!==null||u!==void 0){var c=[];if(u!==void 0)for(y of u)(y.f&Ae)===0&&c.push(y);for(;a!==null;)(a.f&Ae)===0&&a!==e.fallback&&c.push(a),a=or(a.next);var v=c.length;if(v>0){var f=o===0?r:null;Au(e,c,f)}}}function zu(e,t,r,n,i,o,s,a){var u=(s&jc)!==0?(s&Fc)===0?cu(r,!1,!1):zt(r):null,l=(s&qc)!==0?zt(i):null;return{v:u,i:l,e:Le(()=>(o(t,u??r,l??i,a),()=>{e.delete(n)}))}}function cr(e,t,r){if(e.nodes)for(var n=e.nodes.start,i=e.nodes.end,o=t&&(t.f&mt)===0?t.nodes.start:r;n!==null;){var s=wr(n);if(o.before(n),n===i)return;n=s}}function vt(e,t,r){t===null?e.effect.first=r:t.next=r,r===null?e.effect.last=t:r.prev=t}function Oa(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=Oa(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Uu(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=Oa(e))&&(n&&(n+=" "),n+=t);return n}function $u(e){return typeof e=="object"?Uu(e):e??""}function Lu(e,t,r){var n=e==null?"":""+e;return n===""?null:n}function at(e,t,r,n,i,o){var s=e.__className;if(s!==r||s===void 0){var a=Lu(r);a==null?e.removeAttribute("class"):e.className=a,e.__className=r}return o}function Mi(e,t,r=!1){if(e.multiple){if(t==null)return;if(!Ni(t))return Wc();for(var n of e.options)n.selected=t.includes(pr(n));return}for(n of e.options){var i=pr(n);if(lu(i,t)){n.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function Na(e){var t=new MutationObserver(()=>{Mi(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Di(()=>{t.disconnect()})}function pn(e,t,r=t){var n=new WeakSet,i=!0;da(e,"change",o=>{var s=o?"[selected]":":checked",a;if(e.multiple)a=[].map.call(e.querySelectorAll(s),pr);else{var u=e.querySelector(s)??e.querySelector("option:not([disabled])");a=u&&pr(u)}r(a),X!==null&&n.add(X)}),gu(()=>{var o=t();if(e===document.activeElement){var s=Br??X;if(n.has(s))return}if(Mi(e,o,i),i&&o===void 0){var a=e.querySelector(":checked");a!==null&&(o=pr(a),r(o))}e.__value=o,i=!1}),Na(e)}function pr(e){return"__value"in e?e.__value:e.value}const Zu=Symbol("is custom element"),Du=Symbol("is html");function Ne(e,t,r,n){var i=ju(e);i[t]!==(i[t]=r)&&(t==="loading"&&(e[Cc]=r),r==null?e.removeAttribute(t):typeof r!="string"&&qu(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function ju(e){return e.__attributes??={[Zu]:e.nodeName.includes("-"),[Du]:e.namespaceURI===Hc}}var fo=new Map;function qu(e){var t=e.getAttribute("is")||e.nodeName,r=fo.get(t);if(r)return r;fo.set(t,r=[]);for(var n,i=e,o=Element.prototype;o!==i;){n=xc(i);for(var s in n)n[s].set&&r.push(s);i=Bs(i)}return r}function _r(e,t,r=t){var n=new WeakSet;da(e,"input",async i=>{var o=i?e.defaultValue:e.value;if(o=vn(e)?mn(o):o,r(o),X!==null&&n.add(X),await xu(),o!==(o=t())){var s=e.selectionStart,a=e.selectionEnd,u=e.value.length;if(e.value=o??"",a!==null){var l=e.value.length;s===a&&a===u&&l>u?(e.selectionStart=l,e.selectionEnd=l):(e.selectionStart=s,e.selectionEnd=Math.min(a,l))}}}),Fi(t)==null&&e.value&&(r(vn(e)?mn(e.value):e.value),X!==null&&n.add(X)),va(()=>{var i=t();if(e===document.activeElement){var o=Br??X;if(n.has(o))return}vn(e)&&i===mn(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function vn(e){var t=e.type;return t==="number"||t==="range"}function mn(e){return e===""?null:+e}const Bt=[];function Aa(e,t=dn){let r=null;const n=new Set;function i(a){if(Xs(e,a)&&(e=a,r)){const u=!Bt.length;for(const l of n)l[1](),Bt.push(l,e);if(u){for(let l=0;l<Bt.length;l+=2)Bt[l][0](Bt[l+1]);Bt.length=0}}}function o(a){i(a(e))}function s(a,u=dn){const l=[a,u];return n.add(l),n.size===1&&(r=t(i,o)||dn),a(e),()=>{n.delete(l),n.size===0&&r&&(r(),r=null)}}return{set:i,update:o,subscribe:s}}function jr(e,t,r,n){var i=n,o=!0,s=()=>(o&&(o=!1,i=n),i),a;a=e[t],a===void 0&&n!==void 0&&(a=s());var u;return u=()=>{var l=e[t];return l===void 0?s():(o=!0,l)},u}function en(e){ze===null&&Oc(),kr(()=>{const t=Fi(e);if(typeof t=="function")return t})}const Fu="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Fu);const Bu=typeof window<"u"?new URL(window.location.href):new URL("http://localhost/"),Pa=Aa(Bu);function Mu(e){const t=Number.parseInt(e,10);return!Number.isFinite(t)||t<1?1:t}function Hu(e){if(e==="/")return{name:"home",params:{}};if(e==="/search")return{name:"search",params:{}};const t=e.match(/^\/book\/([^/]+)$/);if(t)return{name:"book",params:{identifier:decodeURIComponent(t[1])}};if(e==="/sitemap")return{name:"sitemap",params:{view:"authors",letter:"A",page:1}};const r=e.match(/^\/sitemap\/(authors|books)\/([^/]+)\/(\d+)$/);return r?{name:"sitemap",params:{view:r[1]==="books"?"books":"authors",letter:decodeURIComponent(r[2]),page:Mu(r[3])}}:e==="/404"?{name:"notFound",params:{}}:{name:"notFound",params:{}}}function Wu(e){if(e.target&&e.target!=="_self"||e.hasAttribute("download")||e.dataset.noSpa==="true")return!1;const t=new URL(e.href,window.location.origin);if(t.origin!==window.location.origin)return!1;const r=["/api","/admin","/actuator","/ws","/topic","/sitemap.xml","/sitemap-xml","/r"];for(const n of r)if(t.pathname===n||t.pathname.startsWith(`${n}/`))return!1;return!0}function za(){Pa.set(new URL(window.location.href))}function Yt(e,t=!1){const r=new URL(e,window.location.origin);t?window.history.replaceState(null,"",`${r.pathname}${r.search}${r.hash}`):window.history.pushState(null,"",`${r.pathname}${r.search}${r.hash}`),za()}function Vu(){const e=()=>{za()},t=r=>{if(r.defaultPrevented||r.button!==0||r.metaKey||r.ctrlKey||r.shiftKey||r.altKey)return;const n=r.target;if(!(n instanceof Element))return;const i=n.closest("a[href]");if(!(i instanceof HTMLAnchorElement)||!Wu(i))return;const o=new URL(i.href,window.location.origin);r.preventDefault(),Yt(`${o.pathname}${o.search}${o.hash}`)};return window.addEventListener("popstate",e),document.addEventListener("click",t),()=>{window.removeEventListener("popstate",e),document.removeEventListener("click",t)}}function S(e,t,r){function n(a,u){var l;Object.defineProperty(a,"_zod",{value:a._zod??{},enumerable:!1}),(l=a._zod).traits??(l.traits=new Set),a._zod.traits.add(e),t(a,u);for(const h in s.prototype)h in a||Object.defineProperty(a,h,{value:s.prototype[h].bind(a)});a._zod.constr=s,a._zod.def=u}const i=r?.Parent??Object;class o extends i{}Object.defineProperty(o,"name",{value:e});function s(a){var u;const l=r?.Parent?new o:this;n(l,a),(u=l._zod).deferred??(u.deferred=[]);for(const h of l._zod.deferred)h();return l}return Object.defineProperty(s,"init",{value:n}),Object.defineProperty(s,Symbol.hasInstance,{value:a=>r?.Parent&&a instanceof r.Parent?!0:a?._zod?.traits?.has(e)}),Object.defineProperty(s,"name",{value:e}),s}class br extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const Ua={};function kt(e){return Ua}function Xu(e){const t=Object.values(e).filter(n=>typeof n=="number");return Object.entries(e).filter(([n,i])=>t.indexOf(+n)===-1).map(([n,i])=>i)}function Gu(e,t){return typeof t=="bigint"?t.toString():t}function $a(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function Hi(e){return e==null}function Wi(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function Ju(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n,o=Number.parseInt(e.toFixed(i).replace(".","")),s=Number.parseInt(t.toFixed(i).replace(".",""));return o%s/10**i}function Q(e,t,r){Object.defineProperty(e,t,{get(){{const n=r();return e[t]=n,n}},set(n){Object.defineProperty(e,t,{value:n})},configurable:!0})}function Vi(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function sr(e){return JSON.stringify(e)}const La=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function Ti(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const Ku=$a(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function Wr(e){if(Ti(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(Ti(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}const Yu=new Set(["string","number","symbol"]);function tn(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Lt(e,t,r){const n=new e._zod.constr(t??e._zod.def);return(!t||r?.parent)&&(n._zod.parent=e),n}function j(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function Qu(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const el={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function tl(e,t){const r={},n=e._zod.def;for(const i in t){if(!(i in n.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&(r[i]=n.shape[i])}return Lt(e,{...e._zod.def,shape:r,checks:[]})}function rl(e,t){const r={...e._zod.def.shape},n=e._zod.def;for(const i in t){if(!(i in n.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&delete r[i]}return Lt(e,{...e._zod.def,shape:r,checks:[]})}function nl(e,t){if(!Wr(t))throw new Error("Invalid input to extend: expected a plain object");const r={...e._zod.def,get shape(){const n={...e._zod.def.shape,...t};return Vi(this,"shape",n),n},checks:[]};return Lt(e,r)}function il(e,t){return Lt(e,{...e._zod.def,get shape(){const r={...e._zod.def.shape,...t._zod.def.shape};return Vi(this,"shape",r),r},catchall:t._zod.def.catchall,checks:[]})}function ol(e,t,r){const n=t._zod.def.shape,i={...n};if(r)for(const o in r){if(!(o in n))throw new Error(`Unrecognized key: "${o}"`);r[o]&&(i[o]=e?new e({type:"optional",innerType:n[o]}):n[o])}else for(const o in n)i[o]=e?new e({type:"optional",innerType:n[o]}):n[o];return Lt(t,{...t._zod.def,shape:i,checks:[]})}function sl(e,t,r){const n=t._zod.def.shape,i={...n};if(r)for(const o in r){if(!(o in i))throw new Error(`Unrecognized key: "${o}"`);r[o]&&(i[o]=new e({type:"nonoptional",innerType:n[o]}))}else for(const o in n)i[o]=new e({type:"nonoptional",innerType:n[o]});return Lt(t,{...t._zod.def,shape:i,checks:[]})}function vr(e,t=0){for(let r=t;r<e.issues.length;r++)if(e.issues[r]?.continue!==!0)return!0;return!1}function Ct(e,t){return t.map(r=>{var n;return(n=r).path??(n.path=[]),r.path.unshift(e),r})}function Or(e){return typeof e=="string"?e:e?.message}function xt(e,t,r){const n={...e,path:e.path??[]};if(!e.message){const i=Or(e.inst?._zod.def?.error?.(e))??Or(t?.error?.(e))??Or(r.customError?.(e))??Or(r.localeError?.(e))??"Invalid input";n.message=i}return delete n.inst,delete n.continue,t?.reportInput||delete n.input,n}function Xi(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function yr(...e){const[t,r,n]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:n}:{...t}}const Za=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get(){return JSON.stringify(t,Gu,2)},enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Da=S("$ZodError",Za),ja=S("$ZodError",Za,{Parent:Error});function al(e,t=r=>r.message){const r={},n=[];for(const i of e.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(t(i))):n.push(t(i));return{formErrors:n,fieldErrors:r}}function cl(e,t){const r=t||function(o){return o.message},n={_errors:[]},i=o=>{for(const s of o.issues)if(s.code==="invalid_union"&&s.errors.length)s.errors.map(a=>i({issues:a}));else if(s.code==="invalid_key")i({issues:s.issues});else if(s.code==="invalid_element")i({issues:s.issues});else if(s.path.length===0)n._errors.push(r(s));else{let a=n,u=0;for(;u<s.path.length;){const l=s.path[u];u===s.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(r(s))):a[l]=a[l]||{_errors:[]},a=a[l],u++}}};return i(e),n}const ul=e=>(t,r,n,i)=>{const o=n?Object.assign(n,{async:!1}):{async:!1},s=t._zod.run({value:r,issues:[]},o);if(s instanceof Promise)throw new br;if(s.issues.length){const a=new(i?.Err??e)(s.issues.map(u=>xt(u,o,kt())));throw La(a,i?.callee),a}return s.value},ll=e=>async(t,r,n,i)=>{const o=n?Object.assign(n,{async:!0}):{async:!0};let s=t._zod.run({value:r,issues:[]},o);if(s instanceof Promise&&(s=await s),s.issues.length){const a=new(i?.Err??e)(s.issues.map(u=>xt(u,o,kt())));throw La(a,i?.callee),a}return s.value},qa=e=>(t,r,n)=>{const i=n?{...n,async:!1}:{async:!1},o=t._zod.run({value:r,issues:[]},i);if(o instanceof Promise)throw new br;return o.issues.length?{success:!1,error:new(e??Da)(o.issues.map(s=>xt(s,i,kt())))}:{success:!0,data:o.value}},fl=qa(ja),Fa=e=>async(t,r,n)=>{const i=n?Object.assign(n,{async:!0}):{async:!0};let o=t._zod.run({value:r,issues:[]},i);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new e(o.issues.map(s=>xt(s,i,kt())))}:{success:!0,data:o.value}},hl=Fa(ja),dl=/^[cC][^\s-]{8,}$/,pl=/^[0-9a-z]+$/,vl=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,ml=/^[0-9a-vA-V]{20}$/,gl=/^[A-Za-z0-9]{27}$/,_l=/^[a-zA-Z0-9_-]{21}$/,bl=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,yl=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,ho=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,wl=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,kl="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function xl(){return new RegExp(kl,"u")}const Sl=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,El=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,Il=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Tl=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Rl=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Ba=/^[A-Za-z0-9_-]*$/,Cl=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,Ol=/^\+(?:[0-9]){6,14}[0-9]$/,Ma="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Nl=new RegExp(`^${Ma}$`);function Ha(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function Al(e){return new RegExp(`^${Ha(e)}$`)}function Pl(e){const t=Ha({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-]\\d{2}:\\d{2})");const n=`${t}(?:${r.join("|")})`;return new RegExp(`^${Ma}T(?:${n})$`)}const zl=e=>{const t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},Ul=/^\d+$/,$l=/^-?\d+(?:\.\d+)?/i,Ll=/true|false/i,Zl=/null/i,Dl=/^[^A-Z]*$/,jl=/^[^a-z]*$/,Ie=S("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),Wa={number:"number",bigint:"bigint",object:"date"},Va=S("$ZodCheckLessThan",(e,t)=>{Ie.init(e,t);const r=Wa[typeof t.value];e._zod.onattach.push(n=>{const i=n._zod.bag,o=(t.inclusive?i.maximum:i.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<o&&(t.inclusive?i.maximum=t.value:i.exclusiveMaximum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value<=t.value:n.value<t.value)||n.issues.push({origin:r,code:"too_big",maximum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Xa=S("$ZodCheckGreaterThan",(e,t)=>{Ie.init(e,t);const r=Wa[typeof t.value];e._zod.onattach.push(n=>{const i=n._zod.bag,o=(t.inclusive?i.minimum:i.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>o&&(t.inclusive?i.minimum=t.value:i.exclusiveMinimum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value>=t.value:n.value>t.value)||n.issues.push({origin:r,code:"too_small",minimum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),ql=S("$ZodCheckMultipleOf",(e,t)=>{Ie.init(e,t),e._zod.onattach.push(r=>{var n;(n=r._zod.bag).multipleOf??(n.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%t.value===BigInt(0):Ju(r.value,t.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),Fl=S("$ZodCheckNumberFormat",(e,t)=>{Ie.init(e,t),t.format=t.format||"float64";const r=t.format?.includes("int"),n=r?"int":"number",[i,o]=el[t.format];e._zod.onattach.push(s=>{const a=s._zod.bag;a.format=t.format,a.minimum=i,a.maximum=o,r&&(a.pattern=Ul)}),e._zod.check=s=>{const a=s.value;if(r){if(!Number.isInteger(a)){s.issues.push({expected:n,format:t.format,code:"invalid_type",input:a,inst:e});return}if(!Number.isSafeInteger(a)){a>0?s.issues.push({input:a,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort}):s.issues.push({input:a,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort});return}}a<i&&s.issues.push({origin:"number",input:a,code:"too_small",minimum:i,inclusive:!0,inst:e,continue:!t.abort}),a>o&&s.issues.push({origin:"number",input:a,code:"too_big",maximum:o,inst:e})}}),Bl=S("$ZodCheckMaxLength",(e,t)=>{var r;Ie.init(e,t),(r=e._zod.def).when??(r.when=n=>{const i=n.value;return!Hi(i)&&i.length!==void 0}),e._zod.onattach.push(n=>{const i=n._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<i&&(n._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{const i=n.value;if(i.length<=t.maximum)return;const s=Xi(i);n.issues.push({origin:s,code:"too_big",maximum:t.maximum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),Ml=S("$ZodCheckMinLength",(e,t)=>{var r;Ie.init(e,t),(r=e._zod.def).when??(r.when=n=>{const i=n.value;return!Hi(i)&&i.length!==void 0}),e._zod.onattach.push(n=>{const i=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>i&&(n._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{const i=n.value;if(i.length>=t.minimum)return;const s=Xi(i);n.issues.push({origin:s,code:"too_small",minimum:t.minimum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),Hl=S("$ZodCheckLengthEquals",(e,t)=>{var r;Ie.init(e,t),(r=e._zod.def).when??(r.when=n=>{const i=n.value;return!Hi(i)&&i.length!==void 0}),e._zod.onattach.push(n=>{const i=n._zod.bag;i.minimum=t.length,i.maximum=t.length,i.length=t.length}),e._zod.check=n=>{const i=n.value,o=i.length;if(o===t.length)return;const s=Xi(i),a=o>t.length;n.issues.push({origin:s,...a?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),rn=S("$ZodCheckStringFormat",(e,t)=>{var r,n;Ie.init(e,t),e._zod.onattach.push(i=>{const o=i._zod.bag;o.format=t.format,t.pattern&&(o.patterns??(o.patterns=new Set),o.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=i=>{t.pattern.lastIndex=0,!t.pattern.test(i.value)&&i.issues.push({origin:"string",code:"invalid_format",format:t.format,input:i.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(n=e._zod).check??(n.check=()=>{})}),Wl=S("$ZodCheckRegex",(e,t)=>{rn.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),Vl=S("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=Dl),rn.init(e,t)}),Xl=S("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=jl),rn.init(e,t)}),Gl=S("$ZodCheckIncludes",(e,t)=>{Ie.init(e,t);const r=tn(t.includes),n=new RegExp(typeof t.position=="number"?`^.{${t.position}}${r}`:r);t.pattern=n,e._zod.onattach.push(i=>{const o=i._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(n)}),e._zod.check=i=>{i.value.includes(t.includes,t.position)||i.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:i.value,inst:e,continue:!t.abort})}}),Jl=S("$ZodCheckStartsWith",(e,t)=>{Ie.init(e,t);const r=new RegExp(`^${tn(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const i=n._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(r)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),Kl=S("$ZodCheckEndsWith",(e,t)=>{Ie.init(e,t);const r=new RegExp(`.*${tn(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const i=n._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(r)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}}),Yl=S("$ZodCheckOverwrite",(e,t)=>{Ie.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}});class Ql{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const n=t.split(`
`).filter(s=>s),i=Math.min(...n.map(s=>s.length-s.trimStart().length)),o=n.map(s=>s.slice(i)).map(s=>" ".repeat(this.indent*2)+s);for(const s of o)this.content.push(s)}compile(){const t=Function,r=this?.args,i=[...(this?.content??[""]).map(o=>`  ${o}`)];return new t(...r,i.join(`
`))}}const ef={major:4,minor:0,patch:0},ee=S("$ZodType",(e,t)=>{var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=ef;const n=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&n.unshift(e);for(const i of n)for(const o of i._zod.onattach)o(e);if(n.length===0)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const i=(o,s,a)=>{let u=vr(o),l;for(const h of s){if(h._zod.def.when){if(!h._zod.def.when(o))continue}else if(u)continue;const p=o.issues.length,m=h._zod.check(o);if(m instanceof Promise&&a?.async===!1)throw new br;if(l||m instanceof Promise)l=(l??Promise.resolve()).then(async()=>{await m,o.issues.length!==p&&(u||(u=vr(o,p)))});else{if(o.issues.length===p)continue;u||(u=vr(o,p))}}return l?l.then(()=>o):o};e._zod.run=(o,s)=>{const a=e._zod.parse(o,s);if(a instanceof Promise){if(s.async===!1)throw new br;return a.then(u=>i(u,n,s))}return i(a,n,s)}}e["~standard"]={validate:i=>{try{const o=fl(e,i);return o.success?{value:o.data}:{issues:o.error?.issues}}catch{return hl(e,i).then(s=>s.success?{value:s.data}:{issues:s.error?.issues})}},vendor:"zod",version:1}}),Gi=S("$ZodString",(e,t)=>{ee.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??zl(e._zod.bag),e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),te=S("$ZodStringFormat",(e,t)=>{rn.init(e,t),Gi.init(e,t)}),tf=S("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=yl),te.init(e,t)}),rf=S("$ZodUUID",(e,t)=>{if(t.version){const n={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(n===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=ho(n))}else t.pattern??(t.pattern=ho());te.init(e,t)}),nf=S("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=wl),te.init(e,t)}),of=S("$ZodURL",(e,t)=>{te.init(e,t),e._zod.check=r=>{try{const n=r.value,i=new URL(n),o=i.href;t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(i.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:Cl.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(i.protocol.endsWith(":")?i.protocol.slice(0,-1):i.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),!n.endsWith("/")&&o.endsWith("/")?r.value=o.slice(0,-1):r.value=o;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),sf=S("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=xl()),te.init(e,t)}),af=S("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=_l),te.init(e,t)}),cf=S("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=dl),te.init(e,t)}),uf=S("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=pl),te.init(e,t)}),lf=S("$ZodULID",(e,t)=>{t.pattern??(t.pattern=vl),te.init(e,t)}),ff=S("$ZodXID",(e,t)=>{t.pattern??(t.pattern=ml),te.init(e,t)}),hf=S("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=gl),te.init(e,t)}),df=S("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=Pl(t)),te.init(e,t)}),pf=S("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=Nl),te.init(e,t)}),vf=S("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=Al(t)),te.init(e,t)}),mf=S("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=bl),te.init(e,t)}),gf=S("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=Sl),te.init(e,t),e._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv4"})}),_f=S("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=El),te.init(e,t),e._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),bf=S("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=Il),te.init(e,t)}),yf=S("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=Tl),te.init(e,t),e._zod.check=r=>{const[n,i]=r.value.split("/");try{if(!i)throw new Error;const o=Number(i);if(`${o}`!==i)throw new Error;if(o<0||o>128)throw new Error;new URL(`http://[${n}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function Ga(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const wf=S("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=Rl),te.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{Ga(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function kf(e){if(!Ba.test(e))return!1;const t=e.replace(/[-_]/g,n=>n==="-"?"+":"/"),r=t.padEnd(Math.ceil(t.length/4)*4,"=");return Ga(r)}const xf=S("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=Ba),te.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{kf(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),Sf=S("$ZodE164",(e,t)=>{t.pattern??(t.pattern=Ol),te.init(e,t)});function Ef(e,t=null){try{const r=e.split(".");if(r.length!==3)return!1;const[n]=r;if(!n)return!1;const i=JSON.parse(atob(n));return!("typ"in i&&i?.typ!=="JWT"||!i.alg||t&&(!("alg"in i)||i.alg!==t))}catch{return!1}}const If=S("$ZodJWT",(e,t)=>{te.init(e,t),e._zod.check=r=>{Ef(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),Ja=S("$ZodNumber",(e,t)=>{ee.init(e,t),e._zod.pattern=e._zod.bag.pattern??$l,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=Number(r.value)}catch{}const i=r.value;if(typeof i=="number"&&!Number.isNaN(i)&&Number.isFinite(i))return r;const o=typeof i=="number"?Number.isNaN(i)?"NaN":Number.isFinite(i)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:i,inst:e,...o?{received:o}:{}}),r}}),Tf=S("$ZodNumber",(e,t)=>{Fl.init(e,t),Ja.init(e,t)}),Rf=S("$ZodBoolean",(e,t)=>{ee.init(e,t),e._zod.pattern=Ll,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=!!r.value}catch{}const i=r.value;return typeof i=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:i,inst:e}),r}}),Cf=S("$ZodNull",(e,t)=>{ee.init(e,t),e._zod.pattern=Zl,e._zod.values=new Set([null]),e._zod.parse=(r,n)=>{const i=r.value;return i===null||r.issues.push({expected:"null",code:"invalid_type",input:i,inst:e}),r}}),Of=S("$ZodUnknown",(e,t)=>{ee.init(e,t),e._zod.parse=r=>r}),Nf=S("$ZodNever",(e,t)=>{ee.init(e,t),e._zod.parse=(r,n)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)});function po(e,t,r){e.issues.length&&t.issues.push(...Ct(r,e.issues)),t.value[r]=e.value}const Af=S("$ZodArray",(e,t)=>{ee.init(e,t),e._zod.parse=(r,n)=>{const i=r.value;if(!Array.isArray(i))return r.issues.push({expected:"array",code:"invalid_type",input:i,inst:e}),r;r.value=Array(i.length);const o=[];for(let s=0;s<i.length;s++){const a=i[s],u=t.element._zod.run({value:a,issues:[]},n);u instanceof Promise?o.push(u.then(l=>po(l,r,s))):po(u,r,s)}return o.length?Promise.all(o).then(()=>r):r}});function Nr(e,t,r){e.issues.length&&t.issues.push(...Ct(r,e.issues)),t.value[r]=e.value}function vo(e,t,r,n){e.issues.length?n[r]===void 0?r in n?t.value[r]=void 0:t.value[r]=e.value:t.issues.push(...Ct(r,e.issues)):e.value===void 0?r in n&&(t.value[r]=void 0):t.value[r]=e.value}const Pf=S("$ZodObject",(e,t)=>{ee.init(e,t);const r=$a(()=>{const p=Object.keys(t.shape);for(const w of p)if(!(t.shape[w]instanceof ee))throw new Error(`Invalid element at key "${w}": expected a Zod schema`);const m=Qu(t.shape);return{shape:t.shape,keys:p,keySet:new Set(p),numKeys:p.length,optionalKeys:new Set(m)}});Q(e._zod,"propValues",()=>{const p=t.shape,m={};for(const w in p){const y=p[w]._zod;if(y.values){m[w]??(m[w]=new Set);for(const E of y.values)m[w].add(E)}}return m});const n=p=>{const m=new Ql(["shape","payload","ctx"]),w=r.value,y=b=>{const x=sr(b);return`shape[${x}]._zod.run({ value: input[${x}], issues: [] }, ctx)`};m.write("const input = payload.value;");const E=Object.create(null);let C=0;for(const b of w.keys)E[b]=`key_${C++}`;m.write("const newResult = {}");for(const b of w.keys)if(w.optionalKeys.has(b)){const x=E[b];m.write(`const ${x} = ${y(b)};`);const d=sr(b);m.write(`
        if (${x}.issues.length) {
          if (input[${d}] === undefined) {
            if (${d} in input) {
              newResult[${d}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${x}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${d}, ...iss.path] : [${d}],
              }))
            );
          }
        } else if (${x}.value === undefined) {
          if (${d} in input) newResult[${d}] = undefined;
        } else {
          newResult[${d}] = ${x}.value;
        }
        `)}else{const x=E[b];m.write(`const ${x} = ${y(b)};`),m.write(`
          if (${x}.issues.length) payload.issues = payload.issues.concat(${x}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${sr(b)}, ...iss.path] : [${sr(b)}]
          })));`),m.write(`newResult[${sr(b)}] = ${x}.value`)}m.write("payload.value = newResult;"),m.write("return payload;");const $=m.compile();return(b,x)=>$(p,b,x)};let i;const o=Ti,s=!Ua.jitless,u=s&&Ku.value,l=t.catchall;let h;e._zod.parse=(p,m)=>{h??(h=r.value);const w=p.value;if(!o(w))return p.issues.push({expected:"object",code:"invalid_type",input:w,inst:e}),p;const y=[];if(s&&u&&m?.async===!1&&m.jitless!==!0)i||(i=n(t.shape)),p=i(p,m);else{p.value={};const x=h.shape;for(const d of h.keys){const c=x[d],v=c._zod.run({value:w[d],issues:[]},m),f=c._zod.optin==="optional"&&c._zod.optout==="optional";v instanceof Promise?y.push(v.then(g=>f?vo(g,p,d,w):Nr(g,p,d))):f?vo(v,p,d,w):Nr(v,p,d)}}if(!l)return y.length?Promise.all(y).then(()=>p):p;const E=[],C=h.keySet,$=l._zod,b=$.def.type;for(const x of Object.keys(w)){if(C.has(x))continue;if(b==="never"){E.push(x);continue}const d=$.run({value:w[x],issues:[]},m);d instanceof Promise?y.push(d.then(c=>Nr(c,p,x))):Nr(d,p,x)}return E.length&&p.issues.push({code:"unrecognized_keys",keys:E,input:w,inst:e}),y.length?Promise.all(y).then(()=>p):p}});function mo(e,t,r,n){for(const i of e)if(i.issues.length===0)return t.value=i.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(i=>i.issues.map(o=>xt(o,n,kt())))}),t}const zf=S("$ZodUnion",(e,t)=>{ee.init(e,t),Q(e._zod,"optin",()=>t.options.some(r=>r._zod.optin==="optional")?"optional":void 0),Q(e._zod,"optout",()=>t.options.some(r=>r._zod.optout==="optional")?"optional":void 0),Q(e._zod,"values",()=>{if(t.options.every(r=>r._zod.values))return new Set(t.options.flatMap(r=>Array.from(r._zod.values)))}),Q(e._zod,"pattern",()=>{if(t.options.every(r=>r._zod.pattern)){const r=t.options.map(n=>n._zod.pattern);return new RegExp(`^(${r.map(n=>Wi(n.source)).join("|")})$`)}}),e._zod.parse=(r,n)=>{let i=!1;const o=[];for(const s of t.options){const a=s._zod.run({value:r.value,issues:[]},n);if(a instanceof Promise)o.push(a),i=!0;else{if(a.issues.length===0)return a;o.push(a)}}return i?Promise.all(o).then(s=>mo(s,r,e,n)):mo(o,r,e,n)}}),Uf=S("$ZodIntersection",(e,t)=>{ee.init(e,t),e._zod.parse=(r,n)=>{const i=r.value,o=t.left._zod.run({value:i,issues:[]},n),s=t.right._zod.run({value:i,issues:[]},n);return o instanceof Promise||s instanceof Promise?Promise.all([o,s]).then(([u,l])=>go(r,u,l)):go(r,o,s)}});function Ri(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Wr(e)&&Wr(t)){const r=Object.keys(t),n=Object.keys(e).filter(o=>r.indexOf(o)!==-1),i={...e,...t};for(const o of n){const s=Ri(e[o],t[o]);if(!s.valid)return{valid:!1,mergeErrorPath:[o,...s.mergeErrorPath]};i[o]=s.data}return{valid:!0,data:i}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let n=0;n<e.length;n++){const i=e[n],o=t[n],s=Ri(i,o);if(!s.valid)return{valid:!1,mergeErrorPath:[n,...s.mergeErrorPath]};r.push(s.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function go(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),vr(e))return e;const n=Ri(t.value,r.value);if(!n.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return e.value=n.data,e}const $f=S("$ZodRecord",(e,t)=>{ee.init(e,t),e._zod.parse=(r,n)=>{const i=r.value;if(!Wr(i))return r.issues.push({expected:"record",code:"invalid_type",input:i,inst:e}),r;const o=[];if(t.keyType._zod.values){const s=t.keyType._zod.values;r.value={};for(const u of s)if(typeof u=="string"||typeof u=="number"||typeof u=="symbol"){const l=t.valueType._zod.run({value:i[u],issues:[]},n);l instanceof Promise?o.push(l.then(h=>{h.issues.length&&r.issues.push(...Ct(u,h.issues)),r.value[u]=h.value})):(l.issues.length&&r.issues.push(...Ct(u,l.issues)),r.value[u]=l.value)}let a;for(const u in i)s.has(u)||(a=a??[],a.push(u));a&&a.length>0&&r.issues.push({code:"unrecognized_keys",input:i,inst:e,keys:a})}else{r.value={};for(const s of Reflect.ownKeys(i)){if(s==="__proto__")continue;const a=t.keyType._zod.run({value:s,issues:[]},n);if(a instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(a.issues.length){r.issues.push({origin:"record",code:"invalid_key",issues:a.issues.map(l=>xt(l,n,kt())),input:s,path:[s],inst:e}),r.value[a.value]=a.value;continue}const u=t.valueType._zod.run({value:i[s],issues:[]},n);u instanceof Promise?o.push(u.then(l=>{l.issues.length&&r.issues.push(...Ct(s,l.issues)),r.value[a.value]=l.value})):(u.issues.length&&r.issues.push(...Ct(s,u.issues)),r.value[a.value]=u.value)}}return o.length?Promise.all(o).then(()=>r):r}}),Lf=S("$ZodEnum",(e,t)=>{ee.init(e,t);const r=Xu(t.entries);e._zod.values=new Set(r),e._zod.pattern=new RegExp(`^(${r.filter(n=>Yu.has(typeof n)).map(n=>typeof n=="string"?tn(n):n.toString()).join("|")})$`),e._zod.parse=(n,i)=>{const o=n.value;return e._zod.values.has(o)||n.issues.push({code:"invalid_value",values:r,input:o,inst:e}),n}}),Zf=S("$ZodTransform",(e,t)=>{ee.init(e,t),e._zod.parse=(r,n)=>{const i=t.transform(r.value,r);if(n.async)return(i instanceof Promise?i:Promise.resolve(i)).then(s=>(r.value=s,r));if(i instanceof Promise)throw new br;return r.value=i,r}}),Df=S("$ZodOptional",(e,t)=>{ee.init(e,t),e._zod.optin="optional",e._zod.optout="optional",Q(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),Q(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${Wi(r.source)})?$`):void 0}),e._zod.parse=(r,n)=>t.innerType._zod.optin==="optional"?t.innerType._zod.run(r,n):r.value===void 0?r:t.innerType._zod.run(r,n)}),jf=S("$ZodNullable",(e,t)=>{ee.init(e,t),Q(e._zod,"optin",()=>t.innerType._zod.optin),Q(e._zod,"optout",()=>t.innerType._zod.optout),Q(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${Wi(r.source)}|null)$`):void 0}),Q(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,n)=>r.value===null?r:t.innerType._zod.run(r,n)}),qf=S("$ZodDefault",(e,t)=>{ee.init(e,t),e._zod.optin="optional",Q(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(r.value===void 0)return r.value=t.defaultValue,r;const i=t.innerType._zod.run(r,n);return i instanceof Promise?i.then(o=>_o(o,t)):_o(i,t)}});function _o(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const Ff=S("$ZodPrefault",(e,t)=>{ee.init(e,t),e._zod.optin="optional",Q(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>(r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,n))}),Bf=S("$ZodNonOptional",(e,t)=>{ee.init(e,t),Q(e._zod,"values",()=>{const r=t.innerType._zod.values;return r?new Set([...r].filter(n=>n!==void 0)):void 0}),e._zod.parse=(r,n)=>{const i=t.innerType._zod.run(r,n);return i instanceof Promise?i.then(o=>bo(o,e)):bo(i,e)}});function bo(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const Mf=S("$ZodCatch",(e,t)=>{ee.init(e,t),e._zod.optin="optional",Q(e._zod,"optout",()=>t.innerType._zod.optout),Q(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{const i=t.innerType._zod.run(r,n);return i instanceof Promise?i.then(o=>(r.value=o.value,o.issues.length&&(r.value=t.catchValue({...r,error:{issues:o.issues.map(s=>xt(s,n,kt()))},input:r.value}),r.issues=[]),r)):(r.value=i.value,i.issues.length&&(r.value=t.catchValue({...r,error:{issues:i.issues.map(o=>xt(o,n,kt()))},input:r.value}),r.issues=[]),r)}}),Hf=S("$ZodPipe",(e,t)=>{ee.init(e,t),Q(e._zod,"values",()=>t.in._zod.values),Q(e._zod,"optin",()=>t.in._zod.optin),Q(e._zod,"optout",()=>t.out._zod.optout),e._zod.parse=(r,n)=>{const i=t.in._zod.run(r,n);return i instanceof Promise?i.then(o=>yo(o,t,n)):yo(i,t,n)}});function yo(e,t,r){return vr(e)?e:t.out._zod.run({value:e.value,issues:e.issues},r)}const Wf=S("$ZodReadonly",(e,t)=>{ee.init(e,t),Q(e._zod,"propValues",()=>t.innerType._zod.propValues),Q(e._zod,"values",()=>t.innerType._zod.values),Q(e._zod,"optin",()=>t.innerType._zod.optin),Q(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(r,n)=>{const i=t.innerType._zod.run(r,n);return i instanceof Promise?i.then(wo):wo(i)}});function wo(e){return e.value=Object.freeze(e.value),e}const Vf=S("$ZodCustom",(e,t)=>{Ie.init(e,t),ee.init(e,t),e._zod.parse=(r,n)=>r,e._zod.check=r=>{const n=r.value,i=t.fn(n);if(i instanceof Promise)return i.then(o=>ko(o,r,n,e));ko(i,r,n,e)}});function ko(e,t,r,n){if(!e){const i={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(i.params=n._zod.def.params),t.issues.push(yr(i))}}class Xf{constructor(){this._map=new Map,this._idmap=new Map}add(t,...r){const n=r[0];if(this._map.set(t,n),n&&typeof n=="object"&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){const r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){const r=t._zod.parent;if(r){const n={...this.get(r)??{}};return delete n.id,{...n,...this._map.get(t)}}return this._map.get(t)}has(t){return this._map.has(t)}}function Gf(){return new Xf}const Ar=Gf();function Jf(e,t){return new e({type:"string",...j(t)})}function Kf(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...j(t)})}function xo(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...j(t)})}function Yf(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...j(t)})}function Qf(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...j(t)})}function eh(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...j(t)})}function th(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...j(t)})}function rh(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...j(t)})}function nh(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...j(t)})}function ih(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...j(t)})}function oh(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...j(t)})}function sh(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...j(t)})}function ah(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...j(t)})}function ch(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...j(t)})}function uh(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...j(t)})}function lh(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...j(t)})}function fh(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...j(t)})}function hh(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...j(t)})}function dh(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...j(t)})}function ph(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...j(t)})}function vh(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...j(t)})}function mh(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...j(t)})}function gh(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...j(t)})}function _h(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...j(t)})}function bh(e,t){return new e({type:"string",format:"date",check:"string_format",...j(t)})}function yh(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...j(t)})}function wh(e,t){return new e({type:"string",format:"duration",check:"string_format",...j(t)})}function kh(e,t){return new e({type:"number",checks:[],...j(t)})}function xh(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...j(t)})}function Sh(e,t){return new e({type:"boolean",...j(t)})}function Eh(e,t){return new e({type:"null",...j(t)})}function Ih(e){return new e({type:"unknown"})}function Th(e,t){return new e({type:"never",...j(t)})}function So(e,t){return new Va({check:"less_than",...j(t),value:e,inclusive:!1})}function gn(e,t){return new Va({check:"less_than",...j(t),value:e,inclusive:!0})}function Eo(e,t){return new Xa({check:"greater_than",...j(t),value:e,inclusive:!1})}function _n(e,t){return new Xa({check:"greater_than",...j(t),value:e,inclusive:!0})}function Io(e,t){return new ql({check:"multiple_of",...j(t),value:e})}function Ka(e,t){return new Bl({check:"max_length",...j(t),maximum:e})}function Vr(e,t){return new Ml({check:"min_length",...j(t),minimum:e})}function Ya(e,t){return new Hl({check:"length_equals",...j(t),length:e})}function Rh(e,t){return new Wl({check:"string_format",format:"regex",...j(t),pattern:e})}function Ch(e){return new Vl({check:"string_format",format:"lowercase",...j(e)})}function Oh(e){return new Xl({check:"string_format",format:"uppercase",...j(e)})}function Nh(e,t){return new Gl({check:"string_format",format:"includes",...j(t),includes:e})}function Ah(e,t){return new Jl({check:"string_format",format:"starts_with",...j(t),prefix:e})}function Ph(e,t){return new Kl({check:"string_format",format:"ends_with",...j(t),suffix:e})}function Sr(e){return new Yl({check:"overwrite",tx:e})}function zh(e){return Sr(t=>t.normalize(e))}function Uh(){return Sr(e=>e.trim())}function $h(){return Sr(e=>e.toLowerCase())}function Lh(){return Sr(e=>e.toUpperCase())}function Zh(e,t,r){return new e({type:"array",element:t,...j(r)})}function Dh(e,t,r){return new e({type:"custom",check:"custom",fn:t,...j(r)})}const jh=S("ZodISODateTime",(e,t)=>{df.init(e,t),re.init(e,t)});function qh(e){return _h(jh,e)}const Fh=S("ZodISODate",(e,t)=>{pf.init(e,t),re.init(e,t)});function Bh(e){return bh(Fh,e)}const Mh=S("ZodISOTime",(e,t)=>{vf.init(e,t),re.init(e,t)});function Hh(e){return yh(Mh,e)}const Wh=S("ZodISODuration",(e,t)=>{mf.init(e,t),re.init(e,t)});function Vh(e){return wh(Wh,e)}const Xh=(e,t)=>{Da.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>cl(e,r)},flatten:{value:r=>al(e,r)},addIssue:{value:r=>e.issues.push(r)},addIssues:{value:r=>e.issues.push(...r)},isEmpty:{get(){return e.issues.length===0}}})},nn=S("ZodError",Xh,{Parent:Error}),Gh=ul(nn),Jh=ll(nn),Kh=qa(nn),Yh=Fa(nn),ie=S("ZodType",(e,t)=>(ee.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone({...t,checks:[...t.checks??[],...r.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]}),e.clone=(r,n)=>Lt(e,r,n),e.brand=()=>e,e.register=((r,n)=>(r.add(e,n),e)),e.parse=(r,n)=>Gh(e,r,n,{callee:e.parse}),e.safeParse=(r,n)=>Kh(e,r,n),e.parseAsync=async(r,n)=>Jh(e,r,n,{callee:e.parseAsync}),e.safeParseAsync=async(r,n)=>Yh(e,r,n),e.spa=e.safeParseAsync,e.refine=(r,n)=>e.check(Md(r,n)),e.superRefine=r=>e.check(Hd(r)),e.overwrite=r=>e.check(Sr(r)),e.optional=()=>Co(e),e.nullable=()=>Oo(e),e.nullish=()=>Co(Oo(e)),e.nonoptional=r=>$d(e,r),e.array=()=>ue(e),e.or=r=>Qt([e,r]),e.and=r=>Td(e,r),e.transform=r=>No(e,Od(r)),e.default=r=>Pd(e,r),e.prefault=r=>Ud(e,r),e.catch=r=>Zd(e,r),e.pipe=r=>No(e,r),e.readonly=()=>qd(e),e.describe=r=>{const n=e.clone();return Ar.add(n,{description:r}),n},Object.defineProperty(e,"description",{get(){return Ar.get(e)?.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return Ar.get(e);const n=e.clone();return Ar.add(n,r[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),Qa=S("_ZodString",(e,t)=>{Gi.init(e,t),ie.init(e,t);const r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...n)=>e.check(Rh(...n)),e.includes=(...n)=>e.check(Nh(...n)),e.startsWith=(...n)=>e.check(Ah(...n)),e.endsWith=(...n)=>e.check(Ph(...n)),e.min=(...n)=>e.check(Vr(...n)),e.max=(...n)=>e.check(Ka(...n)),e.length=(...n)=>e.check(Ya(...n)),e.nonempty=(...n)=>e.check(Vr(1,...n)),e.lowercase=n=>e.check(Ch(n)),e.uppercase=n=>e.check(Oh(n)),e.trim=()=>e.check(Uh()),e.normalize=(...n)=>e.check(zh(...n)),e.toLowerCase=()=>e.check($h()),e.toUpperCase=()=>e.check(Lh())}),Qh=S("ZodString",(e,t)=>{Gi.init(e,t),Qa.init(e,t),e.email=r=>e.check(Kf(ed,r)),e.url=r=>e.check(rh(td,r)),e.jwt=r=>e.check(gh(md,r)),e.emoji=r=>e.check(nh(rd,r)),e.guid=r=>e.check(xo(To,r)),e.uuid=r=>e.check(Yf(Pr,r)),e.uuidv4=r=>e.check(Qf(Pr,r)),e.uuidv6=r=>e.check(eh(Pr,r)),e.uuidv7=r=>e.check(th(Pr,r)),e.nanoid=r=>e.check(ih(nd,r)),e.guid=r=>e.check(xo(To,r)),e.cuid=r=>e.check(oh(id,r)),e.cuid2=r=>e.check(sh(od,r)),e.ulid=r=>e.check(ah(sd,r)),e.base64=r=>e.check(ph(dd,r)),e.base64url=r=>e.check(vh(pd,r)),e.xid=r=>e.check(ch(ad,r)),e.ksuid=r=>e.check(uh(cd,r)),e.ipv4=r=>e.check(lh(ud,r)),e.ipv6=r=>e.check(fh(ld,r)),e.cidrv4=r=>e.check(hh(fd,r)),e.cidrv6=r=>e.check(dh(hd,r)),e.e164=r=>e.check(mh(vd,r)),e.datetime=r=>e.check(qh(r)),e.date=r=>e.check(Bh(r)),e.time=r=>e.check(Hh(r)),e.duration=r=>e.check(Vh(r))});function P(e){return Jf(Qh,e)}const re=S("ZodStringFormat",(e,t)=>{te.init(e,t),Qa.init(e,t)}),ed=S("ZodEmail",(e,t)=>{nf.init(e,t),re.init(e,t)}),To=S("ZodGUID",(e,t)=>{tf.init(e,t),re.init(e,t)}),Pr=S("ZodUUID",(e,t)=>{rf.init(e,t),re.init(e,t)}),td=S("ZodURL",(e,t)=>{of.init(e,t),re.init(e,t)}),rd=S("ZodEmoji",(e,t)=>{sf.init(e,t),re.init(e,t)}),nd=S("ZodNanoID",(e,t)=>{af.init(e,t),re.init(e,t)}),id=S("ZodCUID",(e,t)=>{cf.init(e,t),re.init(e,t)}),od=S("ZodCUID2",(e,t)=>{uf.init(e,t),re.init(e,t)}),sd=S("ZodULID",(e,t)=>{lf.init(e,t),re.init(e,t)}),ad=S("ZodXID",(e,t)=>{ff.init(e,t),re.init(e,t)}),cd=S("ZodKSUID",(e,t)=>{hf.init(e,t),re.init(e,t)}),ud=S("ZodIPv4",(e,t)=>{gf.init(e,t),re.init(e,t)}),ld=S("ZodIPv6",(e,t)=>{_f.init(e,t),re.init(e,t)}),fd=S("ZodCIDRv4",(e,t)=>{bf.init(e,t),re.init(e,t)}),hd=S("ZodCIDRv6",(e,t)=>{yf.init(e,t),re.init(e,t)}),dd=S("ZodBase64",(e,t)=>{wf.init(e,t),re.init(e,t)}),pd=S("ZodBase64URL",(e,t)=>{xf.init(e,t),re.init(e,t)}),vd=S("ZodE164",(e,t)=>{Sf.init(e,t),re.init(e,t)}),md=S("ZodJWT",(e,t)=>{If.init(e,t),re.init(e,t)}),ec=S("ZodNumber",(e,t)=>{Ja.init(e,t),ie.init(e,t),e.gt=(n,i)=>e.check(Eo(n,i)),e.gte=(n,i)=>e.check(_n(n,i)),e.min=(n,i)=>e.check(_n(n,i)),e.lt=(n,i)=>e.check(So(n,i)),e.lte=(n,i)=>e.check(gn(n,i)),e.max=(n,i)=>e.check(gn(n,i)),e.int=n=>e.check(Ro(n)),e.safe=n=>e.check(Ro(n)),e.positive=n=>e.check(Eo(0,n)),e.nonnegative=n=>e.check(_n(0,n)),e.negative=n=>e.check(So(0,n)),e.nonpositive=n=>e.check(gn(0,n)),e.multipleOf=(n,i)=>e.check(Io(n,i)),e.step=(n,i)=>e.check(Io(n,i)),e.finite=()=>e;const r=e._zod.bag;e.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function ne(e){return kh(ec,e)}const gd=S("ZodNumberFormat",(e,t)=>{Tf.init(e,t),ec.init(e,t)});function Ro(e){return xh(gd,e)}const _d=S("ZodBoolean",(e,t)=>{Rf.init(e,t),ie.init(e,t)});function tc(e){return Sh(_d,e)}const bd=S("ZodNull",(e,t)=>{Cf.init(e,t),ie.init(e,t)});function on(e){return Eh(bd,e)}const yd=S("ZodUnknown",(e,t)=>{Of.init(e,t),ie.init(e,t)});function Jt(){return Ih(yd)}const wd=S("ZodNever",(e,t)=>{Nf.init(e,t),ie.init(e,t)});function kd(e){return Th(wd,e)}const xd=S("ZodArray",(e,t)=>{Af.init(e,t),ie.init(e,t),e.element=t.element,e.min=(r,n)=>e.check(Vr(r,n)),e.nonempty=r=>e.check(Vr(1,r)),e.max=(r,n)=>e.check(Ka(r,n)),e.length=(r,n)=>e.check(Ya(r,n)),e.unwrap=()=>e.element});function ue(e,t){return Zh(xd,e,t)}const Sd=S("ZodObject",(e,t)=>{Pf.init(e,t),ie.init(e,t),Q(e,"shape",()=>t.shape),e.keyof=()=>rc(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:Jt()}),e.loose=()=>e.clone({...e._zod.def,catchall:Jt()}),e.strict=()=>e.clone({...e._zod.def,catchall:kd()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>nl(e,r),e.merge=r=>il(e,r),e.pick=r=>tl(e,r),e.omit=r=>rl(e,r),e.partial=(...r)=>ol(nc,e,r[0]),e.required=(...r)=>sl(ic,e,r[0])});function le(e,t){const r={type:"object",get shape(){return Vi(this,"shape",{...e}),this.shape},...j(t)};return new Sd(r)}const Ed=S("ZodUnion",(e,t)=>{zf.init(e,t),ie.init(e,t),e.options=t.options});function Qt(e,t){return new Ed({type:"union",options:e,...j(t)})}const Id=S("ZodIntersection",(e,t)=>{Uf.init(e,t),ie.init(e,t)});function Td(e,t){return new Id({type:"intersection",left:e,right:t})}const Rd=S("ZodRecord",(e,t)=>{$f.init(e,t),ie.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function sn(e,t,r){return new Rd({type:"record",keyType:e,valueType:t,...j(r)})}const Ci=S("ZodEnum",(e,t)=>{Lf.init(e,t),ie.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const r=new Set(Object.keys(t.entries));e.extract=(n,i)=>{const o={};for(const s of n)if(r.has(s))o[s]=t.entries[s];else throw new Error(`Key ${s} not found in enum`);return new Ci({...t,checks:[],...j(i),entries:o})},e.exclude=(n,i)=>{const o={...t.entries};for(const s of n)if(r.has(s))delete o[s];else throw new Error(`Key ${s} not found in enum`);return new Ci({...t,checks:[],...j(i),entries:o})}});function rc(e,t){const r=Array.isArray(e)?Object.fromEntries(e.map(n=>[n,n])):e;return new Ci({type:"enum",entries:r,...j(t)})}const Cd=S("ZodTransform",(e,t)=>{Zf.init(e,t),ie.init(e,t),e._zod.parse=(r,n)=>{r.addIssue=o=>{if(typeof o=="string")r.issues.push(yr(o,r.value,t));else{const s=o;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=r.value),s.inst??(s.inst=e),s.continue??(s.continue=!0),r.issues.push(yr(s))}};const i=t.transform(r.value,r);return i instanceof Promise?i.then(o=>(r.value=o,r)):(r.value=i,r)}});function Od(e){return new Cd({type:"transform",transform:e})}const nc=S("ZodOptional",(e,t)=>{Df.init(e,t),ie.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Co(e){return new nc({type:"optional",innerType:e})}const Nd=S("ZodNullable",(e,t)=>{jf.init(e,t),ie.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Oo(e){return new Nd({type:"nullable",innerType:e})}const Ad=S("ZodDefault",(e,t)=>{qf.init(e,t),ie.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function Pd(e,t){return new Ad({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const zd=S("ZodPrefault",(e,t)=>{Ff.init(e,t),ie.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Ud(e,t){return new zd({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const ic=S("ZodNonOptional",(e,t)=>{Bf.init(e,t),ie.init(e,t),e.unwrap=()=>e._zod.def.innerType});function $d(e,t){return new ic({type:"nonoptional",innerType:e,...j(t)})}const Ld=S("ZodCatch",(e,t)=>{Mf.init(e,t),ie.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function Zd(e,t){return new Ld({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const Dd=S("ZodPipe",(e,t)=>{Hf.init(e,t),ie.init(e,t),e.in=t.in,e.out=t.out});function No(e,t){return new Dd({type:"pipe",in:e,out:t})}const jd=S("ZodReadonly",(e,t)=>{Wf.init(e,t),ie.init(e,t)});function qd(e){return new jd({type:"readonly",innerType:e})}const Fd=S("ZodCustom",(e,t)=>{Vf.init(e,t),ie.init(e,t)});function Bd(e){const t=new Ie({check:"custom"});return t._zod.check=e,t}function Md(e,t={}){return Dh(Fd,e,t)}function Hd(e){const t=Bd(r=>(r.addIssue=n=>{if(typeof n=="string")r.issues.push(yr(n,r.value,t._zod.def));else{const i=n;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=r.value),i.inst??(i.inst=t),i.continue??(i.continue=!t._zod.def.abort),r.issues.push(yr(i))}},e(r.value,r)));return t}function Ji(e,t,r){const n=e.safeParse(t);if(!n.success){const i=n.error.issues.slice(0,8).map(o=>`${o.path.length>0?o.path.join("."):"(root)"}: ${o.message}`).join("; ");return console.error(`[zod] ${r} validation failed`,i,t),{success:!1,error:n.error}}return{success:!0,data:n.data}}async function oc(e,t,r){if(!e.ok)return{success:!1,error:`HTTP ${e.status}: ${e.statusText}`};let n;try{n=await e.json()}catch(o){return{success:!1,error:`Invalid JSON response: ${o instanceof Error?o.message:String(o)}`}}const i=Ji(t,n,r);return i.success?{success:!0,data:i.data}:{success:!1,error:`Schema validation failed for ${r}`}}const Wd="XSRF-TOKEN",Ao="X-XSRF-TOKEN";function Vd(e){if(typeof document>"u")return null;const t=document.cookie.split(";").map(n=>n.trim()).find(n=>n.startsWith(`${e}=`));if(!t)return null;const r=t.substring(e.length+1);try{return decodeURIComponent(r)}catch{return r}}function Xd(e){const t=new Headers(e.headers??{}),r=Vd(Wd);return r&&!t.has(Ao)&&t.set(Ao,r),{...e,headers:t}}async function Zt(e,t,r){const n=await fetch(e,{method:"GET",cache:"no-store",credentials:"same-origin"}),i=await oc(n,t,r);if(!i.success)throw new Error(i.error);return i.data}async function Gd(e,t,r,n){const i=await fetch(e,Xd({method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(t)})),o=await oc(i,r,n);if(!o.success)throw new Error(o.error);return o.data}const Jd=le({id:P().nullable().optional(),name:P()}),Kd=le({id:P().nullable().optional(),name:P().nullable().optional(),type:P().nullable().optional(),rank:ne().nullable().optional(),source:P().nullable().optional()}),Yd=le({key:P(),attributes:sn(P(),Jt()).optional().default({})}),Qd=le({s3ImagePath:P().nullable().optional(),externalImageUrl:P().nullable().optional(),width:ne().nullable().optional(),height:ne().nullable().optional(),highResolution:tc().nullable().optional(),preferredUrl:P().nullable().optional(),fallbackUrl:P().nullable().optional(),source:P().nullable().optional()}),ep=le({googleBooksId:P().nullable().optional(),type:P().nullable().optional(),identifier:P().nullable().optional(),isbn10:P().nullable().optional(),isbn13:P().nullable().optional(),publishedDate:Qt([P(),ne(),on()]).optional(),coverImageUrl:P().nullable().optional()}),tp=le({publishedDate:Qt([P(),ne(),on()]).optional(),language:P().nullable().optional(),pageCount:ne().nullable().optional(),publisher:P().nullable().optional()}),Ki=le({id:P(),slug:P().nullable().optional(),title:P().nullable().optional(),description:P().nullable().optional(),publication:tp.nullable().optional(),authors:ue(Jd).optional().default([]),categories:ue(P()).optional().default([]),collections:ue(Kd).optional().default([]),tags:ue(Yd).optional().default([]),cover:Qd.nullable().optional(),editions:ue(ep).optional().default([]),recommendationIds:ue(P()).optional().default([]),extras:sn(P(),Jt()).optional().default({})}),rp=Ki.extend({matchType:P().nullable().optional(),relevanceScore:ne().nullable().optional()}),np=le({query:P(),queryHash:P(),startIndex:ne(),maxResults:ne(),totalResults:ne(),hasMore:tc(),nextStartIndex:ne(),prefetchedCount:ne(),orderBy:P(),coverSource:P(),resolution:P(),results:ue(rp)}),ip=ue(Ki),Po=le({id:P(),slug:P().nullable().optional(),title:P(),authors:ue(P()).optional().default([]),cover_url:P().nullable().optional(),cover_s3_key:P().nullable().optional(),fallback_cover_url:P().nullable().optional(),average_rating:ne().nullable().optional(),ratings_count:ne().nullable().optional(),tags:sn(P(),Jt()).optional().default({})}),op=le({currentBestsellers:ue(Po),recentBooks:ue(Po)}),sc=le({id:P().nullable().optional(),slug:P(),title:P(),updatedAt:Qt([P(),ne(),on()]).optional()}),sp=le({authorId:P(),authorName:P(),lastModified:Qt([P(),ne(),on()]).optional(),books:ue(sc)}),ap=le({viewType:rc(["authors","books"]),activeLetter:P(),pageNumber:ne(),totalPages:ne(),totalItems:ne(),letters:ue(P()),baseUrl:P(),books:ue(sc).optional().default([]),authors:ue(sp).optional().default([])}),ac=le({theme:P().nullable(),source:P()}),cp=sn(P(),P()).optional().default({}),up=le({message:P().optional()}),lp=le({newResults:ue(Jt()).optional().default([])}),fp=le({newCoverUrl:P().optional()}),hp=le({id:P(),slug:P().optional(),title:P().optional(),description:P().nullable().optional(),authors:ue(P()).optional().default([]),categories:ue(P()).optional().default([]),publishedDate:Qt([P(),ne()]).optional(),language:P().optional(),pageCount:ne().optional(),publisher:P().optional(),cover:le({s3ImagePath:P().optional(),externalImageUrl:P().optional(),preferredUrl:P().optional(),fallbackUrl:P().optional(),source:P().optional()}).optional(),matchType:P().optional(),relevanceScore:ne().optional()});function dp(){return Zt("/api/theme",ac,"getThemePreference")}function pp(e,t){return Gd("/api/theme",{theme:e,useSystem:t},ac,"persistThemePreference")}const mr=Aa("system");function qr(e){const t=document.documentElement;if(e==="system"){t.setAttribute("data-theme","_auto_");return}t.setAttribute("data-theme",e)}function vp(){const e=window.localStorage.getItem("preferred_theme");return e==="light"||e==="dark"||e==="system"?e:null}async function mp(){const e=await dp();return e.theme==="light"||e.theme==="dark"?e.theme:"system"}async function gp(){if(typeof window>"u")return;const e=vp();if(e){mr.set(e),qr(e);return}try{const t=await mp();mr.set(t),qr(t),window.localStorage.setItem("preferred_theme",t)}catch(t){console.error("Failed to load theme preference",t),mr.set("system"),qr("system")}}async function _p(e){mr.set(e),qr(e),window.localStorage.setItem("preferred_theme",e);try{await pp(e==="system"?null:e,e==="system")}catch(t){console.error("Failed to persist theme preference",t)}}var bp=F('<header class="sticky top-0 z-30 border-b border-linen-200/80 bg-white/90 backdrop-blur dark:border-slate-700 dark:bg-slate-900/90"><div class="mx-auto flex max-w-6xl flex-col gap-3 px-4 py-3 md:px-6 lg:flex-row lg:items-center lg:justify-between"><div class="flex items-center gap-4"><a href="/" class="text-lg font-semibold tracking-tight text-anthracite-900 dark:text-slate-100">FindMyBook</a> <nav class="hidden items-center gap-1 rounded-lg border border-linen-200 bg-linen-50 p-1 dark:border-slate-700 dark:bg-slate-800 md:flex"><a href="/">Home</a> <a href="/search">Search</a> <a href="/sitemap">Sitemap</a></nav></div> <div class="flex flex-col gap-3 sm:flex-row sm:items-center"><form class="flex items-center gap-2"><input type="search" placeholder="Quick search" class="w-full rounded-lg border border-linen-300 bg-white px-3 py-1.5 text-sm text-anthracite-900 outline-none ring-canvas-300 transition focus:ring-2 dark:border-slate-600 dark:bg-slate-800 dark:text-slate-100 sm:w-56"/> <button type="submit" class="rounded-lg bg-canvas-500 px-3 py-1.5 text-sm font-medium text-white transition hover:bg-canvas-600">Go</button></form> <label class="flex items-center gap-2 text-sm text-anthracite-700 dark:text-slate-200">Theme <select class="rounded-md border border-linen-300 bg-white px-2 py-1 text-sm dark:border-slate-600 dark:bg-slate-800"><option>System</option><option>Light</option><option>Dark</option></select></label></div></div></header>');function yp(e,t){ut(t,!0);let r=M(""),n=M("system");const i=mr.subscribe(f=>{L(n,f,!0)});kr(()=>()=>{i()});function o(f){f.preventDefault();const g=_(r).trim();g&&Yt(`/search?query=${encodeURIComponent(g)}`)}function s(f){return t.activeRoute===f?"bg-canvas-200 text-canvas-900 shadow-sm":"text-anthracite-700 hover:bg-linen-100 hover:text-anthracite-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-slate-100"}var a=bp(),u=O(a),l=O(u),h=U(O(l),2),p=O(h),m=U(p,2),w=U(m,2),y=U(l,2),E=O(y),C=O(E),$=U(E,2),b=U(O($));b.__change=f=>{const g=f.currentTarget.value;_p(g)};var x=O(b);x.value=x.__value="system";var d=U(x);d.value=d.__value="light";var c=U(d);c.value=c.__value="dark";var v;Na(b),Y((f,g,k)=>{at(p,1,f),at(m,1,g),at(w,1,k),v!==(v=_(n))&&(b.value=(b.__value=_(n))??"",Mi(b,_(n)))},[()=>`rounded-md px-3 py-1.5 text-sm transition ${s("home")}`,()=>`rounded-md px-3 py-1.5 text-sm transition ${s("search")}`,()=>`rounded-md px-3 py-1.5 text-sm transition ${s("sitemap")}`]),Qr("submit",E,o),_r(C,()=>_(r),f=>L(r,f)),D(e,a),lt()}Bi(["change"]);var wp=F('<footer class="border-t border-linen-200 bg-white dark:border-slate-700 dark:bg-slate-900"><div class="mx-auto flex max-w-6xl flex-col gap-2 px-4 py-6 text-sm text-anthracite-600 dark:text-slate-400 md:flex-row md:items-center md:justify-between md:px-6"><p>FindMyBook</p> <div class="flex items-center gap-4"><a href="/search" class="transition hover:text-canvas-600 dark:hover:text-canvas-400">Search</a> <a href="/sitemap" class="transition hover:text-canvas-600 dark:hover:text-canvas-400">Sitemap</a> <a href="https://findmybook.net" data-no-spa="true" class="transition hover:text-canvas-600 dark:hover:text-canvas-400">Production</a></div></div></footer>');function kp(e){var t=wp();D(e,t)}var xp=F('<p class="line-clamp-3 text-sm text-anthracite-600 dark:text-slate-400"> </p>'),Sp=F('<p class="text-xs font-medium text-canvas-700 dark:text-canvas-400"> </p>'),Ep=F('<article class="flex gap-4 rounded-xl border border-linen-200 bg-white p-4 shadow-sm transition hover:shadow-md dark:border-slate-700 dark:bg-slate-800"><img class="h-40 w-28 shrink-0 rounded-lg object-cover" loading="lazy"/> <div class="flex min-w-0 flex-1 flex-col gap-2"><a class="line-clamp-2 text-lg font-semibold text-anthracite-900 transition hover:text-canvas-700 dark:text-slate-100 dark:hover:text-canvas-400"> </a> <p class="line-clamp-1 text-sm text-anthracite-700 dark:text-slate-300"> </p> <!> <!></div></article>'),Ip=F('<p class="text-xs font-medium text-canvas-700 dark:text-canvas-400"> </p>'),Tp=F('<article class="group overflow-hidden rounded-xl border border-linen-200 bg-white shadow-sm transition hover:-translate-y-0.5 hover:shadow-md dark:border-slate-700 dark:bg-slate-800"><a class="block"><img class="h-64 w-full object-cover" loading="lazy"/></a> <div class="space-y-2 p-4"><a class="line-clamp-2 text-base font-semibold text-anthracite-900 transition group-hover:text-canvas-700 dark:text-slate-100 dark:group-hover:text-canvas-400"> </a> <p class="line-clamp-1 text-sm text-anthracite-700 dark:text-slate-300"> </p> <!></div></article>');function Xr(e,t){ut(t,!0);let r=jr(t,"layout",3,"grid");const n="/images/placeholder-book-cover.svg";function i(){return t.book.coverUrl&&t.book.coverUrl.trim().length>0?t.book.coverUrl:t.book.fallbackCoverUrl&&t.book.fallbackCoverUrl.trim().length>0?t.book.fallbackCoverUrl:n}var o=st(),s=Pe(o);{var a=l=>{var h=Ep(),p=O(h),m=U(p,2),w=O(m),y=O(w),E=U(w,2),C=O(E),$=U(E,2);{var b=c=>{var v=xp(),f=O(v);Y(()=>V(f,t.book.description)),D(c,v)};J($,c=>{t.book.description&&c(b)})}var x=U($,2);{var d=c=>{var v=Sp(),f=O(v);Y(g=>V(f,`${g??""} (${t.book.ratingsCount??0??""} ratings)`),[()=>t.book.averageRating.toFixed(1)]),D(c,v)};J(x,c=>{t.book.averageRating!==null&&t.book.averageRating!==void 0&&c(d)})}Y((c,v)=>{Ne(p,"src",c),Ne(p,"alt",`${t.book.title} cover`),Ne(w,"href",t.href),V(y,t.book.title),V(C,v)},[i,()=>t.book.authors.length>0?t.book.authors.join(", "):"Unknown author"]),D(l,h)},u=l=>{var h=Tp(),p=O(h),m=O(p),w=U(p,2),y=O(w),E=O(y),C=U(y,2),$=O(C),b=U(C,2);{var x=d=>{var c=Ip(),v=O(c);Y(f=>V(v,`${f??""} (${t.book.ratingsCount??0??""})`),[()=>t.book.averageRating.toFixed(1)]),D(d,c)};J(b,d=>{t.book.averageRating!==null&&t.book.averageRating!==void 0&&d(x)})}Y((d,c)=>{Ne(p,"href",t.href),Ne(m,"src",d),Ne(m,"alt",`${t.book.title} cover`),Ne(y,"href",t.href),V(E,t.book.title),V($,c)},[i,()=>t.book.authors.length>0?t.book.authors.join(", "):"Unknown author"]),D(l,h)};J(s,l=>{r()==="list"?l(a):l(u,!1)})}D(e,o),lt()}function Rp(){return Zt("/api/pages/home",op,"getHomePagePayload")}function Cp(e,t,r){const n=new URL("/api/pages/sitemap",window.location.origin);return n.searchParams.set("view",e),n.searchParams.set("letter",t),n.searchParams.set("page",String(r)),Zt(`${n.pathname}${n.search}`,ap,"getSitemapPayload")}var Op=F('<p class="text-sm text-anthracite-600 dark:text-slate-300">Loading homepage sections...</p>'),Np=F('<div class="rounded-xl border border-red-200 bg-red-50 p-4 text-sm text-red-700 dark:border-red-900/40 dark:bg-red-950/40 dark:text-red-200"> </div>'),Ap=F('<p class="text-sm text-anthracite-600 dark:text-slate-400">No current bestsellers available.</p>'),Pp=F('<div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4"></div>'),zp=F('<p class="text-sm text-anthracite-600 dark:text-slate-400">No recent books yet. Start searching to build your list.</p>'),Up=F('<div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4"></div>'),$p=F('<section class="bg-gradient-to-b from-linen-50 to-white px-4 py-10 dark:from-slate-900 dark:to-slate-900 md:px-6 md:py-16"><div class="mx-auto max-w-4xl text-center"><h1 class="text-3xl font-semibold tracking-tight text-anthracite-900 dark:text-slate-100 md:text-5xl">Find your next great read</h1> <p class="mx-auto mt-4 max-w-2xl text-base text-anthracite-700 dark:text-slate-300 md:text-lg">Search by title, author, or ISBN with realtime results, rich book details, and sitemap browsing.</p> <form class="mx-auto mt-8 flex max-w-2xl flex-col gap-3 sm:flex-row"><input type="search" placeholder="Search by title, author, or ISBN" class="w-full rounded-xl border border-linen-300 bg-white px-4 py-3 text-anthracite-900 outline-none ring-canvas-300 transition focus:ring-2 dark:border-slate-600 dark:bg-slate-800 dark:text-slate-100" required/> <button type="submit" class="rounded-xl bg-canvas-500 px-5 py-3 font-medium text-white transition hover:bg-canvas-600">Search</button></form></div></section> <section class="mx-auto grid max-w-6xl gap-10 px-4 py-8 md:px-6 md:py-12"><!> <div class="space-y-4"><div class="flex items-center justify-between"><h2 class="text-2xl font-semibold text-anthracite-900 dark:text-slate-100">NYT Bestsellers</h2> <a href="/search?query=new%20york%20times" class="text-sm font-medium text-canvas-700 transition hover:text-canvas-800 dark:text-canvas-400">View all</a></div> <!></div> <div class="space-y-4"><div class="flex items-center justify-between"><h2 class="text-2xl font-semibold text-anthracite-900 dark:text-slate-100">Recently Viewed</h2> <a href="/search?query=explore" class="text-sm font-medium text-canvas-700 transition hover:text-canvas-800 dark:text-canvas-400">Explore more</a></div> <!></div></section>',1);function Lp(e,t){ut(t,!0);let r=M(!0),n=M(null),i=M(Ye([])),o=M(Ye([])),s=M("");function a(I){return{id:I.id,slug:I.slug??I.id,title:I.title,authors:I.authors??[],coverUrl:I.cover_url??null,fallbackCoverUrl:I.fallback_cover_url??null,averageRating:I.average_rating??null,ratingsCount:I.ratings_count??null}}async function u(){L(r,!0),L(n,null);try{const I=await Rp();L(i,I.currentBestsellers.map(a),!0),L(o,I.recentBooks.map(a),!0)}catch(I){L(n,I instanceof Error?I.message:"Unable to load homepage content",!0),L(i,[],!0),L(o,[],!0)}finally{L(r,!1)}}function l(I){I.preventDefault();const z=_(s).trim();z&&Yt(`/search?query=${encodeURIComponent(z)}`)}en(()=>{u()});var h=$p(),p=Pe(h),m=O(p),w=U(O(m),4),y=O(w),E=U(p,2),C=O(E);{var $=I=>{var z=Op();D(I,z)},b=I=>{var z=st(),T=Pe(z);{var B=H=>{var fe=Np(),Te=O(fe);Y(()=>V(Te,_(n))),D(H,fe)};J(T,H=>{_(n)&&H(B)},!0)}D(I,z)};J(C,I=>{_(r)?I($):I(b,!1)})}var x=U(C,2),d=U(O(x),2);{var c=I=>{var z=Ap();D(I,z)},v=I=>{var z=Pp();Se(z,21,()=>_(i),T=>T.id,(T,B)=>{{let H=xe(()=>`/book/${encodeURIComponent(_(B).slug??_(B).id)}`);Xr(T,{get book(){return _(B)},get href(){return _(H)}})}}),D(I,z)};J(d,I=>{!_(r)&&_(i).length===0?I(c):I(v,!1)})}var f=U(x,2),g=U(O(f),2);{var k=I=>{var z=zp();D(I,z)},R=I=>{var z=Up();Se(z,21,()=>_(o),T=>T.id,(T,B)=>{{let H=xe(()=>`/book/${encodeURIComponent(_(B).slug??_(B).id)}`);Xr(T,{get book(){return _(B)},get href(){return _(H)}})}}),D(I,z)};J(g,I=>{!_(r)&&_(o).length===0?I(k):I(R,!1)})}Qr("submit",w,l),_r(y,()=>_(s),I=>L(s,I)),D(e,h),lt()}function Zp(e){const t=new URL("/api/books/search",window.location.origin);return t.searchParams.set("query",e.query),t.searchParams.set("startIndex",String(e.startIndex)),t.searchParams.set("maxResults",String(e.maxResults)),t.searchParams.set("orderBy",e.orderBy),t.searchParams.set("coverSource",e.coverSource),t.searchParams.set("resolution",e.resolution),e.publishedYear!==null&&t.searchParams.set("publishedYear",String(e.publishedYear)),`${t.pathname}${t.search}`}function zo(e){return Zt(Zp(e),np,"searchBooks")}function Dp(e){return Zt(`/api/books/${encodeURIComponent(e)}`,Ki,`getBook:${e}`)}function jp(e,t=6){return Zt(`/api/books/${encodeURIComponent(e)}/similar?limit=${t}`,ip,`getSimilarBooks:${e}`)}function qp(e){return Zt(`/api/pages/book/${encodeURIComponent(e)}/affiliate-links`,cp,`getAffiliateLinks:${e}`)}function Fp(e){return e.map(t=>({id:null,name:t}))}function Bp(e){const t=Ji(hp,e,"realtimeSearchHit");if(!t.success)return null;const r=t.data,n=r.cover??{},i=r.publishedDate??null;return{id:r.id,slug:r.slug??r.id,title:r.title??"Untitled",description:r.description??null,publication:{publishedDate:i,language:r.language??null,pageCount:r.pageCount??null,publisher:r.publisher??null},authors:Fp(r.authors),categories:r.categories,collections:[],tags:[],cover:{s3ImagePath:n.s3ImagePath??null,externalImageUrl:n.externalImageUrl??null,width:null,height:null,highResolution:null,preferredUrl:n.preferredUrl??null,fallbackUrl:n.fallbackUrl??null,source:n.source??null},editions:[],recommendationIds:[],extras:{},matchType:r.matchType??null,relevanceScore:r.relevanceScore??null}}function Mp(e){return e.map(Bp).filter(t=>t!==null)}function Hp(e,t){const r=new Map(e.map(n=>[n.id,n]));for(const n of t)r.has(n.id)||r.set(n.id,n);return Array.from(r.values())}var N=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ur={exports:{}},Vp=ur.exports,Uo;function Xp(){return Uo||(Uo=1,(function(e,t){(function(r,n){n(t)})(Vp,(function(r){function n(d,c){d.terminate=function(){const v=()=>{};this.onerror=v,this.onmessage=v,this.onopen=v;const f=new Date,g=Math.random().toString().substring(2,8),k=this.onclose;this.onclose=R=>{const I=new Date().getTime()-f.getTime();c(`Discarded socket (#${g})  closed after ${I}ms, with code/reason: ${R.code}/${R.reason}`)},this.close(),k?.call(d,{code:4001,reason:`Quick discarding socket (#${g}) without waiting for the shutdown sequence.`,wasClean:!1})}}const i={LF:`
`,NULL:"\0"};class o{get body(){return!this._body&&this.isBinaryBody&&(this._body=new TextDecoder().decode(this._binaryBody)),this._body||""}get binaryBody(){return!this._binaryBody&&!this.isBinaryBody&&(this._binaryBody=new TextEncoder().encode(this._body)),this._binaryBody}constructor(c){const{command:v,headers:f,body:g,binaryBody:k,escapeHeaderValues:R,skipContentLengthHeader:I}=c;this.command=v,this.headers=Object.assign({},f||{}),k?(this._binaryBody=k,this.isBinaryBody=!0):(this._body=g||"",this.isBinaryBody=!1),this.escapeHeaderValues=R||!1,this.skipContentLengthHeader=I||!1}static fromRawFrame(c,v){const f={},g=k=>k.replace(/^\s+|\s+$/g,"");for(const k of c.headers.reverse()){k.indexOf(":");const R=g(k[0]);let I=g(k[1]);v&&c.command!=="CONNECT"&&c.command!=="CONNECTED"&&(I=o.hdrValueUnEscape(I)),f[R]=I}return new o({command:c.command,headers:f,binaryBody:c.binaryBody,escapeHeaderValues:v})}toString(){return this.serializeCmdAndHeaders()}serialize(){const c=this.serializeCmdAndHeaders();return this.isBinaryBody?o.toUnit8Array(c,this._binaryBody).buffer:c+this._body+i.NULL}serializeCmdAndHeaders(){const c=[this.command];this.skipContentLengthHeader&&delete this.headers["content-length"];for(const v of Object.keys(this.headers||{})){const f=this.headers[v];this.escapeHeaderValues&&this.command!=="CONNECT"&&this.command!=="CONNECTED"?c.push(`${v}:${o.hdrValueEscape(`${f}`)}`):c.push(`${v}:${f}`)}return(this.isBinaryBody||!this.isBodyEmpty()&&!this.skipContentLengthHeader)&&c.push(`content-length:${this.bodyLength()}`),c.join(i.LF)+i.LF+i.LF}isBodyEmpty(){return this.bodyLength()===0}bodyLength(){const c=this.binaryBody;return c?c.length:0}static sizeOfUTF8(c){return c?new TextEncoder().encode(c).length:0}static toUnit8Array(c,v){const f=new TextEncoder().encode(c),g=new Uint8Array([0]),k=new Uint8Array(f.length+v.length+g.length);return k.set(f),k.set(v,f.length),k.set(g,f.length+v.length),k}static marshall(c){return new o(c).serialize()}static hdrValueEscape(c){return c.replace(/\\/g,"\\\\").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/:/g,"\\c")}static hdrValueUnEscape(c){return c.replace(/\\r/g,"\r").replace(/\\n/g,`
`).replace(/\\c/g,":").replace(/\\\\/g,"\\")}}const s=0,a=10,u=13,l=58;class h{constructor(c,v){this.onFrame=c,this.onIncomingPing=v,this._encoder=new TextEncoder,this._decoder=new TextDecoder,this._token=[],this._initState()}parseChunk(c,v=!1){let f;if(typeof c=="string"?f=this._encoder.encode(c):f=new Uint8Array(c),v&&f[f.length-1]!==0){const g=new Uint8Array(f.length+1);g.set(f,0),g[f.length]=0,f=g}for(let g=0;g<f.length;g++){const k=f[g];this._onByte(k)}}_collectFrame(c){if(c!==s&&c!==u){if(c===a){this.onIncomingPing();return}this._onByte=this._collectCommand,this._reinjectByte(c)}}_collectCommand(c){if(c!==u){if(c===a){this._results.command=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaders;return}this._consumeByte(c)}}_collectHeaders(c){if(c!==u){if(c===a){this._setupCollectBody();return}this._onByte=this._collectHeaderKey,this._reinjectByte(c)}}_reinjectByte(c){this._onByte(c)}_collectHeaderKey(c){if(c===l){this._headerKey=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaderValue;return}this._consumeByte(c)}_collectHeaderValue(c){if(c!==u){if(c===a){this._results.headers.push([this._headerKey,this._consumeTokenAsUTF8()]),this._headerKey=void 0,this._onByte=this._collectHeaders;return}this._consumeByte(c)}}_setupCollectBody(){const c=this._results.headers.filter(v=>v[0]==="content-length")[0];c?(this._bodyBytesRemaining=parseInt(c[1],10),this._onByte=this._collectBodyFixedSize):this._onByte=this._collectBodyNullTerminated}_collectBodyNullTerminated(c){if(c===s){this._retrievedBody();return}this._consumeByte(c)}_collectBodyFixedSize(c){if(this._bodyBytesRemaining--===0){this._retrievedBody();return}this._consumeByte(c)}_retrievedBody(){this._results.binaryBody=this._consumeTokenAsRaw();try{this.onFrame(this._results)}catch(c){console.log("Ignoring an exception thrown by a frame handler. Original exception: ",c)}this._initState()}_consumeByte(c){this._token.push(c)}_consumeTokenAsUTF8(){return this._decoder.decode(this._consumeTokenAsRaw())}_consumeTokenAsRaw(){const c=new Uint8Array(this._token);return this._token=[],c}_initState(){this._results={command:void 0,headers:[],binaryBody:void 0},this._token=[],this._headerKey=void 0,this._onByte=this._collectFrame}}r.StompSocketState=void 0,(function(d){d[d.CONNECTING=0]="CONNECTING",d[d.OPEN=1]="OPEN",d[d.CLOSING=2]="CLOSING",d[d.CLOSED=3]="CLOSED"})(r.StompSocketState||(r.StompSocketState={})),r.ActivationState=void 0,(function(d){d[d.ACTIVE=0]="ACTIVE",d[d.DEACTIVATING=1]="DEACTIVATING",d[d.INACTIVE=2]="INACTIVE"})(r.ActivationState||(r.ActivationState={})),r.ReconnectionTimeMode=void 0,(function(d){d[d.LINEAR=0]="LINEAR",d[d.EXPONENTIAL=1]="EXPONENTIAL"})(r.ReconnectionTimeMode||(r.ReconnectionTimeMode={})),r.TickerStrategy=void 0,(function(d){d.Interval="interval",d.Worker="worker"})(r.TickerStrategy||(r.TickerStrategy={}));class p{constructor(c,v=r.TickerStrategy.Interval,f){this._interval=c,this._strategy=v,this._debug=f,this._workerScript=`
    var startTime = Date.now();
    setInterval(function() {
        self.postMessage(Date.now() - startTime);
    }, ${this._interval});
  `}start(c){this.stop(),this.shouldUseWorker()?this.runWorker(c):this.runInterval(c)}stop(){this.disposeWorker(),this.disposeInterval()}shouldUseWorker(){return typeof Worker<"u"&&this._strategy===r.TickerStrategy.Worker}runWorker(c){this._debug("Using runWorker for outgoing pings"),this._worker||(this._worker=new Worker(URL.createObjectURL(new Blob([this._workerScript],{type:"text/javascript"}))),this._worker.onmessage=v=>c(v.data))}runInterval(c){if(this._debug("Using runInterval for outgoing pings"),!this._timer){const v=Date.now();this._timer=setInterval(()=>{c(Date.now()-v)},this._interval)}}disposeWorker(){this._worker&&(this._worker.terminate(),delete this._worker,this._debug("Outgoing ping disposeWorker"))}disposeInterval(){this._timer&&(clearInterval(this._timer),delete this._timer,this._debug("Outgoing ping disposeInterval"))}}class m{constructor(c){this.versions=c}supportedVersions(){return this.versions.join(",")}protocolVersions(){return this.versions.map(c=>`v${c.replace(".","")}.stomp`)}}m.V1_0="1.0",m.V1_1="1.1",m.V1_2="1.2",m.default=new m([m.V1_2,m.V1_1,m.V1_0]);class w{get connectedVersion(){return this._connectedVersion}get connected(){return this._connected}constructor(c,v,f){this._client=c,this._webSocket=v,this._connected=!1,this._serverFrameHandlers={CONNECTED:g=>{this.debug(`connected to server ${g.headers.server}`),this._connected=!0,this._connectedVersion=g.headers.version,this._connectedVersion===m.V1_2&&(this._escapeHeaderValues=!0),this._setupHeartbeat(g.headers),this.onConnect(g)},MESSAGE:g=>{const k=g.headers.subscription,R=this._subscriptions[k]||this.onUnhandledMessage,I=g,z=this,T=this._connectedVersion===m.V1_2?I.headers.ack:I.headers["message-id"];I.ack=(B={})=>z.ack(T,k,B),I.nack=(B={})=>z.nack(T,k,B),R(I)},RECEIPT:g=>{const k=this._receiptWatchers[g.headers["receipt-id"]];k?(k(g),delete this._receiptWatchers[g.headers["receipt-id"]]):this.onUnhandledReceipt(g)},ERROR:g=>{this.onStompError(g)}},this._counter=0,this._subscriptions={},this._receiptWatchers={},this._partialData="",this._escapeHeaderValues=!1,this._lastServerActivityTS=Date.now(),this.debug=f.debug,this.stompVersions=f.stompVersions,this.connectHeaders=f.connectHeaders,this.disconnectHeaders=f.disconnectHeaders,this.heartbeatIncoming=f.heartbeatIncoming,this.heartbeatToleranceMultiplier=f.heartbeatGracePeriods,this.heartbeatOutgoing=f.heartbeatOutgoing,this.splitLargeFrames=f.splitLargeFrames,this.maxWebSocketChunkSize=f.maxWebSocketChunkSize,this.forceBinaryWSFrames=f.forceBinaryWSFrames,this.logRawCommunication=f.logRawCommunication,this.appendMissingNULLonIncoming=f.appendMissingNULLonIncoming,this.discardWebsocketOnCommFailure=f.discardWebsocketOnCommFailure,this.onConnect=f.onConnect,this.onDisconnect=f.onDisconnect,this.onStompError=f.onStompError,this.onWebSocketClose=f.onWebSocketClose,this.onWebSocketError=f.onWebSocketError,this.onUnhandledMessage=f.onUnhandledMessage,this.onUnhandledReceipt=f.onUnhandledReceipt,this.onUnhandledFrame=f.onUnhandledFrame,this.onHeartbeatReceived=f.onHeartbeatReceived,this.onHeartbeatLost=f.onHeartbeatLost}start(){const c=new h(f=>{const g=o.fromRawFrame(f,this._escapeHeaderValues);this.logRawCommunication||this.debug(`<<< ${g}`),(this._serverFrameHandlers[g.command]||this.onUnhandledFrame)(g)},()=>{this.debug("<<< PONG"),this.onHeartbeatReceived()});this._webSocket.onmessage=f=>{if(this.debug("Received data"),this._lastServerActivityTS=Date.now(),this.logRawCommunication){const g=f.data instanceof ArrayBuffer?new TextDecoder().decode(f.data):f.data;this.debug(`<<< ${g}`)}c.parseChunk(f.data,this.appendMissingNULLonIncoming)},this._webSocket.onclose=f=>{this.debug(`Connection closed to ${this._webSocket.url}`),this._cleanUp(),this.onWebSocketClose(f)},this._webSocket.onerror=f=>{this.onWebSocketError(f)};const v=()=>{const f=Object.assign({},this.connectHeaders);this.debug("Web Socket Opened..."),f["accept-version"]=this.stompVersions.supportedVersions(),f["heart-beat"]=[this.heartbeatOutgoing,this.heartbeatIncoming].join(","),this._transmit({command:"CONNECT",headers:f})};this._webSocket.readyState===r.StompSocketState.OPEN?v():this._webSocket.onopen=v}_setupHeartbeat(c){if(c.version!==m.V1_1&&c.version!==m.V1_2||!c["heart-beat"])return;const[v,f]=c["heart-beat"].split(",").map(g=>parseInt(g,10));if(this.heartbeatOutgoing!==0&&f!==0){const g=Math.max(this.heartbeatOutgoing,f);this.debug(`send PING every ${g}ms`),this._pinger=new p(g,this._client.heartbeatStrategy,this.debug),this._pinger.start(()=>{this._webSocket.readyState===r.StompSocketState.OPEN&&(this._webSocket.send(i.LF),this.debug(">>> PING"))})}if(this.heartbeatIncoming!==0&&v!==0){const g=Math.max(this.heartbeatIncoming,v);this.debug(`check PONG every ${g}ms`),this._ponger=setInterval(()=>{const k=Date.now()-this._lastServerActivityTS;k>g*this.heartbeatToleranceMultiplier&&(this.debug(`did not receive server activity for the last ${k}ms`),this.onHeartbeatLost(),this._closeOrDiscardWebsocket())},g)}}_closeOrDiscardWebsocket(){this.discardWebsocketOnCommFailure?(this.debug("Discarding websocket, the underlying socket may linger for a while"),this.discardWebsocket()):(this.debug("Issuing close on the websocket"),this._closeWebsocket())}forceDisconnect(){this._webSocket&&(this._webSocket.readyState===r.StompSocketState.CONNECTING||this._webSocket.readyState===r.StompSocketState.OPEN)&&this._closeOrDiscardWebsocket()}_closeWebsocket(){this._webSocket.onmessage=()=>{},this._webSocket.close()}discardWebsocket(){typeof this._webSocket.terminate!="function"&&n(this._webSocket,c=>this.debug(c)),this._webSocket.terminate()}_transmit(c){const{command:v,headers:f,body:g,binaryBody:k,skipContentLengthHeader:R}=c,I=new o({command:v,headers:f,body:g,binaryBody:k,escapeHeaderValues:this._escapeHeaderValues,skipContentLengthHeader:R});let z=I.serialize();if(this.logRawCommunication?this.debug(`>>> ${z}`):this.debug(`>>> ${I}`),this.forceBinaryWSFrames&&typeof z=="string"&&(z=new TextEncoder().encode(z)),typeof z!="string"||!this.splitLargeFrames)this._webSocket.send(z);else{let T=z;for(;T.length>0;){const B=T.substring(0,this.maxWebSocketChunkSize);T=T.substring(this.maxWebSocketChunkSize),this._webSocket.send(B),this.debug(`chunk sent = ${B.length}, remaining = ${T.length}`)}}}dispose(){if(this.connected)try{const c=Object.assign({},this.disconnectHeaders);c.receipt||(c.receipt=`close-${this._counter++}`),this.watchForReceipt(c.receipt,v=>{this._closeWebsocket(),this._cleanUp(),this.onDisconnect(v)}),this._transmit({command:"DISCONNECT",headers:c})}catch(c){this.debug(`Ignoring error during disconnect ${c}`)}else(this._webSocket.readyState===r.StompSocketState.CONNECTING||this._webSocket.readyState===r.StompSocketState.OPEN)&&this._closeWebsocket()}_cleanUp(){this._connected=!1,this._pinger&&(this._pinger.stop(),this._pinger=void 0),this._ponger&&(clearInterval(this._ponger),this._ponger=void 0)}publish(c){const{destination:v,headers:f,body:g,binaryBody:k,skipContentLengthHeader:R}=c,I=Object.assign({destination:v},f);this._transmit({command:"SEND",headers:I,body:g,binaryBody:k,skipContentLengthHeader:R})}watchForReceipt(c,v){this._receiptWatchers[c]=v}subscribe(c,v,f={}){f=Object.assign({},f),f.id||(f.id=`sub-${this._counter++}`),f.destination=c,this._subscriptions[f.id]=v,this._transmit({command:"SUBSCRIBE",headers:f});const g=this;return{id:f.id,unsubscribe(k){return g.unsubscribe(f.id,k)}}}unsubscribe(c,v={}){v=Object.assign({},v),delete this._subscriptions[c],v.id=c,this._transmit({command:"UNSUBSCRIBE",headers:v})}begin(c){const v=c||`tx-${this._counter++}`;this._transmit({command:"BEGIN",headers:{transaction:v}});const f=this;return{id:v,commit(){f.commit(v)},abort(){f.abort(v)}}}commit(c){this._transmit({command:"COMMIT",headers:{transaction:c}})}abort(c){this._transmit({command:"ABORT",headers:{transaction:c}})}ack(c,v,f={}){f=Object.assign({},f),this._connectedVersion===m.V1_2?f.id=c:f["message-id"]=c,f.subscription=v,this._transmit({command:"ACK",headers:f})}nack(c,v,f={}){return f=Object.assign({},f),this._connectedVersion===m.V1_2?f.id=c:f["message-id"]=c,f.subscription=v,this._transmit({command:"NACK",headers:f})}}class y{get webSocket(){return this._stompHandler?._webSocket}get disconnectHeaders(){return this._disconnectHeaders}set disconnectHeaders(c){this._disconnectHeaders=c,this._stompHandler&&(this._stompHandler.disconnectHeaders=this._disconnectHeaders)}get connected(){return!!this._stompHandler&&this._stompHandler.connected}get connectedVersion(){return this._stompHandler?this._stompHandler.connectedVersion:void 0}get active(){return this.state===r.ActivationState.ACTIVE}_changeState(c){this.state=c,this.onChangeState(c)}constructor(c={}){this.stompVersions=m.default,this.connectionTimeout=0,this.reconnectDelay=5e3,this._nextReconnectDelay=0,this.maxReconnectDelay=900*1e3,this.reconnectTimeMode=r.ReconnectionTimeMode.LINEAR,this.heartbeatIncoming=1e4,this.heartbeatToleranceMultiplier=2,this.heartbeatOutgoing=1e4,this.heartbeatStrategy=r.TickerStrategy.Interval,this.splitLargeFrames=!1,this.maxWebSocketChunkSize=8*1024,this.forceBinaryWSFrames=!1,this.appendMissingNULLonIncoming=!1,this.discardWebsocketOnCommFailure=!1,this.state=r.ActivationState.INACTIVE;const v=()=>{};this.debug=v,this.beforeConnect=v,this.onConnect=v,this.onDisconnect=v,this.onUnhandledMessage=v,this.onUnhandledReceipt=v,this.onUnhandledFrame=v,this.onHeartbeatReceived=v,this.onHeartbeatLost=v,this.onStompError=v,this.onWebSocketClose=v,this.onWebSocketError=v,this.logRawCommunication=!1,this.onChangeState=v,this.connectHeaders={},this._disconnectHeaders={},this.configure(c)}configure(c){Object.assign(this,c),this.maxReconnectDelay>0&&this.maxReconnectDelay<this.reconnectDelay&&(this.debug(`Warning: maxReconnectDelay (${this.maxReconnectDelay}ms) is less than reconnectDelay (${this.reconnectDelay}ms). Using reconnectDelay as the maxReconnectDelay delay.`),this.maxReconnectDelay=this.reconnectDelay)}activate(){const c=()=>{if(this.active){this.debug("Already ACTIVE, ignoring request to activate");return}this._changeState(r.ActivationState.ACTIVE),this._nextReconnectDelay=this.reconnectDelay,this._connect()};this.state===r.ActivationState.DEACTIVATING?(this.debug("Waiting for deactivation to finish before activating"),this.deactivate().then(()=>{c()})):c()}async _connect(){if(await this.beforeConnect(this),this._stompHandler){this.debug("There is already a stompHandler, skipping the call to connect");return}if(!this.active){this.debug("Client has been marked inactive, will not attempt to connect");return}this.connectionTimeout>0&&(this._connectionWatcher&&clearTimeout(this._connectionWatcher),this._connectionWatcher=setTimeout(()=>{this.connected||(this.debug(`Connection not established in ${this.connectionTimeout}ms, closing socket`),this.forceDisconnect())},this.connectionTimeout)),this.debug("Opening Web Socket...");const c=this._createWebSocket();this._stompHandler=new w(this,c,{debug:this.debug,stompVersions:this.stompVersions,connectHeaders:this.connectHeaders,disconnectHeaders:this._disconnectHeaders,heartbeatIncoming:this.heartbeatIncoming,heartbeatGracePeriods:this.heartbeatToleranceMultiplier,heartbeatOutgoing:this.heartbeatOutgoing,heartbeatStrategy:this.heartbeatStrategy,splitLargeFrames:this.splitLargeFrames,maxWebSocketChunkSize:this.maxWebSocketChunkSize,forceBinaryWSFrames:this.forceBinaryWSFrames,logRawCommunication:this.logRawCommunication,appendMissingNULLonIncoming:this.appendMissingNULLonIncoming,discardWebsocketOnCommFailure:this.discardWebsocketOnCommFailure,onConnect:v=>{if(this._connectionWatcher&&(clearTimeout(this._connectionWatcher),this._connectionWatcher=void 0),this._nextReconnectDelay=this.reconnectDelay,!this.active){this.debug("STOMP got connected while deactivate was issued, will disconnect now"),this._disposeStompHandler();return}this.onConnect(v)},onDisconnect:v=>{this.onDisconnect(v)},onStompError:v=>{this.onStompError(v)},onWebSocketClose:v=>{this._stompHandler=void 0,this.state===r.ActivationState.DEACTIVATING&&this._changeState(r.ActivationState.INACTIVE),this.onWebSocketClose(v),this.active&&this._schedule_reconnect()},onWebSocketError:v=>{this.onWebSocketError(v)},onUnhandledMessage:v=>{this.onUnhandledMessage(v)},onUnhandledReceipt:v=>{this.onUnhandledReceipt(v)},onUnhandledFrame:v=>{this.onUnhandledFrame(v)},onHeartbeatReceived:()=>{this.onHeartbeatReceived()},onHeartbeatLost:()=>{this.onHeartbeatLost()}}),this._stompHandler.start()}_createWebSocket(){let c;if(this.webSocketFactory)c=this.webSocketFactory();else if(this.brokerURL)c=new WebSocket(this.brokerURL,this.stompVersions.protocolVersions());else throw new Error("Either brokerURL or webSocketFactory must be provided");return c.binaryType="arraybuffer",c}_schedule_reconnect(){this._nextReconnectDelay>0&&(this.debug(`STOMP: scheduling reconnection in ${this._nextReconnectDelay}ms`),this._reconnector=setTimeout(()=>{this.reconnectTimeMode===r.ReconnectionTimeMode.EXPONENTIAL&&(this._nextReconnectDelay=this._nextReconnectDelay*2,this.maxReconnectDelay!==0&&(this._nextReconnectDelay=Math.min(this._nextReconnectDelay,this.maxReconnectDelay))),this._connect()},this._nextReconnectDelay))}async deactivate(c={}){const v=c.force||!1,f=this.active;let g;if(this.state===r.ActivationState.INACTIVE)return this.debug("Already INACTIVE, nothing more to do"),Promise.resolve();if(this._changeState(r.ActivationState.DEACTIVATING),this._nextReconnectDelay=0,this._reconnector&&(clearTimeout(this._reconnector),this._reconnector=void 0),this._stompHandler&&this.webSocket.readyState!==r.StompSocketState.CLOSED){const k=this._stompHandler.onWebSocketClose;g=new Promise((R,I)=>{this._stompHandler.onWebSocketClose=z=>{k(z),R()}})}else return this._changeState(r.ActivationState.INACTIVE),Promise.resolve();return v?this._stompHandler?.discardWebsocket():f&&this._disposeStompHandler(),g}forceDisconnect(){this._stompHandler&&this._stompHandler.forceDisconnect()}_disposeStompHandler(){this._stompHandler&&this._stompHandler.dispose()}publish(c){this._checkConnection(),this._stompHandler.publish(c)}_checkConnection(){if(!this.connected)throw new TypeError("There is no underlying STOMP connection")}watchForReceipt(c,v){this._checkConnection(),this._stompHandler.watchForReceipt(c,v)}subscribe(c,v,f={}){return this._checkConnection(),this._stompHandler.subscribe(c,v,f)}unsubscribe(c,v={}){this._checkConnection(),this._stompHandler.unsubscribe(c,v)}begin(c){return this._checkConnection(),this._stompHandler.begin(c)}commit(c){this._checkConnection(),this._stompHandler.commit(c)}abort(c){this._checkConnection(),this._stompHandler.abort(c)}ack(c,v,f={}){this._checkConnection(),this._stompHandler.ack(c,v,f)}nack(c,v,f={}){this._checkConnection(),this._stompHandler.nack(c,v,f)}}class E{}class C{}class ${constructor(c){this.client=c}get outgoing(){return this.client.heartbeatOutgoing}set outgoing(c){this.client.heartbeatOutgoing=c}get incoming(){return this.client.heartbeatIncoming}set incoming(c){this.client.heartbeatIncoming=c}}class b extends y{constructor(c){super(),this.maxWebSocketFrameSize=16*1024,this._heartbeatInfo=new $(this),this.reconnect_delay=0,this.webSocketFactory=c,this.debug=(...v)=>{console.log(...v)}}_parseConnect(...c){let v,f,g,k={};if(c.length<2)throw new Error("Connect requires at least 2 arguments");return typeof c[1]=="function"?[k,f,g,v]=c:c.length===6?[k.login,k.passcode,f,g,v,k.host]=c:[k.login,k.passcode,f,g,v]=c,[k,f,g,v]}connect(...c){const v=this._parseConnect(...c);v[0]&&(this.connectHeaders=v[0]),v[1]&&(this.onConnect=v[1]),v[2]&&(this.onStompError=v[2]),v[3]&&(this.onWebSocketClose=v[3]),super.activate()}disconnect(c,v={}){c&&(this.onDisconnect=c),this.disconnectHeaders=v,super.deactivate()}send(c,v={},f=""){v=Object.assign({},v);const g=v["content-length"]===!1;g&&delete v["content-length"],this.publish({destination:c,headers:v,body:f,skipContentLengthHeader:g})}set reconnect_delay(c){this.reconnectDelay=c}get ws(){return this.webSocket}get version(){return this.connectedVersion}get onreceive(){return this.onUnhandledMessage}set onreceive(c){this.onUnhandledMessage=c}get onreceipt(){return this.onUnhandledReceipt}set onreceipt(c){this.onUnhandledReceipt=c}get heartbeat(){return this._heartbeatInfo}set heartbeat(c){this.heartbeatIncoming=c.incoming,this.heartbeatOutgoing=c.outgoing}}class x{static client(c,v){v==null&&(v=m.default.protocolVersions());const f=()=>{const g=x.WebSocketClass||WebSocket;return new g(c,v)};return new b(f)}static over(c){let v;return typeof c=="function"?v=c:(console.warn("Stomp.over did not receive a factory, auto reconnect will not work. Please see https://stomp-js.github.io/api-docs/latest/classes/Stomp.html#over"),v=()=>c),new b(v)}}x.WebSocketClass=null,r.Client=y,r.CompatClient=b,r.FrameImpl=o,r.Parser=h,r.Stomp=x,r.StompConfig=E,r.StompHeaders=C,r.Versions=m}))})(ur,ur.exports)),ur.exports}var Gp=Xp(),bn={exports:{}},zr={},$o;function Jp(){return $o||($o=1,N.crypto&&N.crypto.getRandomValues?zr.randomBytes=function(e){var t=new Uint8Array(e);return N.crypto.getRandomValues(t),t}:zr.randomBytes=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=Math.floor(Math.random()*256);return t}),zr}var yn,Lo;function er(){if(Lo)return yn;Lo=1;var e=Jp(),t="abcdefghijklmnopqrstuvwxyz012345";return yn={string:function(r){for(var n=t.length,i=e.randomBytes(r),o=[],s=0;s<r;s++)o.push(t.substr(i[s]%n,1));return o.join("")},number:function(r){return Math.floor(Math.random()*r)},numberString:function(r){var n=(""+(r-1)).length,i=new Array(n+1).join("0");return(i+this.number(r)).slice(-n)}},yn}var Zo;function St(){return Zo||(Zo=1,(function(e){var t=er(),r={},n=!1,i=N.chrome&&N.chrome.app&&N.chrome.app.runtime;e.exports={attachEvent:function(s,a){typeof N.addEventListener<"u"?N.addEventListener(s,a,!1):N.document&&N.attachEvent&&(N.document.attachEvent("on"+s,a),N.attachEvent("on"+s,a))},detachEvent:function(s,a){typeof N.addEventListener<"u"?N.removeEventListener(s,a,!1):N.document&&N.detachEvent&&(N.document.detachEvent("on"+s,a),N.detachEvent("on"+s,a))},unloadAdd:function(s){if(i)return null;var a=t.string(8);return r[a]=s,n&&setTimeout(this.triggerUnloadCallbacks,0),a},unloadDel:function(s){s in r&&delete r[s]},triggerUnloadCallbacks:function(){for(var s in r)r[s](),delete r[s]}};var o=function(){n||(n=!0,e.exports.triggerUnloadCallbacks())};i||e.exports.attachEvent("unload",o)})(bn)),bn.exports}var wn,Do;function Kp(){return Do||(Do=1,wn=function(t,r){if(r=r.split(":")[0],t=+t,!t)return!1;switch(r){case"http":case"ws":return t!==80;case"https":case"wss":return t!==443;case"ftp":return t!==21;case"gopher":return t!==70;case"file":return!1}return t!==0}),wn}var Ur={},jo;function Yp(){if(jo)return Ur;jo=1;var e=Object.prototype.hasOwnProperty,t;function r(s){try{return decodeURIComponent(s.replace(/\+/g," "))}catch{return null}}function n(s){try{return encodeURIComponent(s)}catch{return null}}function i(s){for(var a=/([^=?#&]+)=?([^&]*)/g,u={},l;l=a.exec(s);){var h=r(l[1]),p=r(l[2]);h===null||p===null||h in u||(u[h]=p)}return u}function o(s,a){a=a||"";var u=[],l,h;typeof a!="string"&&(a="?");for(h in s)if(e.call(s,h)){if(l=s[h],!l&&(l===null||l===t||isNaN(l))&&(l=""),h=n(h),l=n(l),h===null||l===null)continue;u.push(h+"="+l)}return u.length?a+u.join("&"):""}return Ur.stringify=o,Ur.parse=i,Ur}var kn,qo;function cc(){if(qo)return kn;qo=1;var e=Kp(),t=Yp(),r=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,n=/[\n\r\t]/g,i=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,o=/:\d+$/,s=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,a=/^[a-zA-Z]:/;function u(b){return(b||"").toString().replace(r,"")}var l=[["#","hash"],["?","query"],function(x,d){return m(d.protocol)?x.replace(/\\/g,"/"):x},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],h={hash:1,query:1};function p(b){var x;typeof window<"u"?x=window:typeof N<"u"?x=N:typeof self<"u"?x=self:x={};var d=x.location||{};b=b||d;var c={},v=typeof b,f;if(b.protocol==="blob:")c=new E(unescape(b.pathname),{});else if(v==="string"){c=new E(b,{});for(f in h)delete c[f]}else if(v==="object"){for(f in b)f in h||(c[f]=b[f]);c.slashes===void 0&&(c.slashes=i.test(b.href))}return c}function m(b){return b==="file:"||b==="ftp:"||b==="http:"||b==="https:"||b==="ws:"||b==="wss:"}function w(b,x){b=u(b),b=b.replace(n,""),x=x||{};var d=s.exec(b),c=d[1]?d[1].toLowerCase():"",v=!!d[2],f=!!d[3],g=0,k;return v?f?(k=d[2]+d[3]+d[4],g=d[2].length+d[3].length):(k=d[2]+d[4],g=d[2].length):f?(k=d[3]+d[4],g=d[3].length):k=d[4],c==="file:"?g>=2&&(k=k.slice(2)):m(c)?k=d[4]:c?v&&(k=k.slice(2)):g>=2&&m(x.protocol)&&(k=d[4]),{protocol:c,slashes:v||m(c),slashesCount:g,rest:k}}function y(b,x){if(b==="")return x;for(var d=(x||"/").split("/").slice(0,-1).concat(b.split("/")),c=d.length,v=d[c-1],f=!1,g=0;c--;)d[c]==="."?d.splice(c,1):d[c]===".."?(d.splice(c,1),g++):g&&(c===0&&(f=!0),d.splice(c,1),g--);return f&&d.unshift(""),(v==="."||v==="..")&&d.push(""),d.join("/")}function E(b,x,d){if(b=u(b),b=b.replace(n,""),!(this instanceof E))return new E(b,x,d);var c,v,f,g,k,R,I=l.slice(),z=typeof x,T=this,B=0;for(z!=="object"&&z!=="string"&&(d=x,x=null),d&&typeof d!="function"&&(d=t.parse),x=p(x),v=w(b||"",x),c=!v.protocol&&!v.slashes,T.slashes=v.slashes||c&&x.slashes,T.protocol=v.protocol||x.protocol||"",b=v.rest,(v.protocol==="file:"&&(v.slashesCount!==2||a.test(b))||!v.slashes&&(v.protocol||v.slashesCount<2||!m(T.protocol)))&&(I[3]=[/(.*)/,"pathname"]);B<I.length;B++){if(g=I[B],typeof g=="function"){b=g(b,T);continue}f=g[0],R=g[1],f!==f?T[R]=b:typeof f=="string"?(k=f==="@"?b.lastIndexOf(f):b.indexOf(f),~k&&(typeof g[2]=="number"?(T[R]=b.slice(0,k),b=b.slice(k+g[2])):(T[R]=b.slice(k),b=b.slice(0,k)))):(k=f.exec(b))&&(T[R]=k[1],b=b.slice(0,k.index)),T[R]=T[R]||c&&g[3]&&x[R]||"",g[4]&&(T[R]=T[R].toLowerCase())}d&&(T.query=d(T.query)),c&&x.slashes&&T.pathname.charAt(0)!=="/"&&(T.pathname!==""||x.pathname!=="")&&(T.pathname=y(T.pathname,x.pathname)),T.pathname.charAt(0)!=="/"&&m(T.protocol)&&(T.pathname="/"+T.pathname),e(T.port,T.protocol)||(T.host=T.hostname,T.port=""),T.username=T.password="",T.auth&&(k=T.auth.indexOf(":"),~k?(T.username=T.auth.slice(0,k),T.username=encodeURIComponent(decodeURIComponent(T.username)),T.password=T.auth.slice(k+1),T.password=encodeURIComponent(decodeURIComponent(T.password))):T.username=encodeURIComponent(decodeURIComponent(T.auth)),T.auth=T.password?T.username+":"+T.password:T.username),T.origin=T.protocol!=="file:"&&m(T.protocol)&&T.host?T.protocol+"//"+T.host:"null",T.href=T.toString()}function C(b,x,d){var c=this;switch(b){case"query":typeof x=="string"&&x.length&&(x=(d||t.parse)(x)),c[b]=x;break;case"port":c[b]=x,e(x,c.protocol)?x&&(c.host=c.hostname+":"+x):(c.host=c.hostname,c[b]="");break;case"hostname":c[b]=x,c.port&&(x+=":"+c.port),c.host=x;break;case"host":c[b]=x,o.test(x)?(x=x.split(":"),c.port=x.pop(),c.hostname=x.join(":")):(c.hostname=x,c.port="");break;case"protocol":c.protocol=x.toLowerCase(),c.slashes=!d;break;case"pathname":case"hash":if(x){var v=b==="pathname"?"/":"#";c[b]=x.charAt(0)!==v?v+x:x}else c[b]=x;break;case"username":case"password":c[b]=encodeURIComponent(x);break;case"auth":var f=x.indexOf(":");~f?(c.username=x.slice(0,f),c.username=encodeURIComponent(decodeURIComponent(c.username)),c.password=x.slice(f+1),c.password=encodeURIComponent(decodeURIComponent(c.password))):c.username=encodeURIComponent(decodeURIComponent(x))}for(var g=0;g<l.length;g++){var k=l[g];k[4]&&(c[k[1]]=c[k[1]].toLowerCase())}return c.auth=c.password?c.username+":"+c.password:c.username,c.origin=c.protocol!=="file:"&&m(c.protocol)&&c.host?c.protocol+"//"+c.host:"null",c.href=c.toString(),c}function $(b){(!b||typeof b!="function")&&(b=t.stringify);var x,d=this,c=d.host,v=d.protocol;v&&v.charAt(v.length-1)!==":"&&(v+=":");var f=v+(d.protocol&&d.slashes||m(d.protocol)?"//":"");return d.username?(f+=d.username,d.password&&(f+=":"+d.password),f+="@"):d.password?(f+=":"+d.password,f+="@"):d.protocol!=="file:"&&m(d.protocol)&&!c&&d.pathname!=="/"&&(f+="@"),(c[c.length-1]===":"||o.test(d.hostname)&&!d.port)&&(c+=":"),f+=c+d.pathname,x=typeof d.query=="object"?b(d.query):d.query,x&&(f+=x.charAt(0)!=="?"?"?"+x:x),d.hash&&(f+=d.hash),f}return E.prototype={set:C,toString:$},E.extractProtocol=w,E.location=p,E.trimLeft=u,E.qs=t,kn=E,kn}var xn,Fo;function qe(){if(Fo)return xn;Fo=1;var e=cc();return xn={getOrigin:function(t){if(!t)return null;var r=new e(t);if(r.protocol==="file:")return null;var n=r.port;return n||(n=r.protocol==="https:"?"443":"80"),r.protocol+"//"+r.hostname+":"+n},isOriginEqual:function(t,r){var n=this.getOrigin(t)===this.getOrigin(r);return n},isSchemeEqual:function(t,r){return t.split(":")[0]===r.split(":")[0]},addPath:function(t,r){var n=t.split("?");return n[0]+r+(n[1]?"?"+n[1]:"")},addQuery:function(t,r){return t+(t.indexOf("?")===-1?"?"+r:"&"+r)},isLoopbackAddr:function(t){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(t)||/^\[::1\]$/.test(t)}},xn}var $r={exports:{}},Bo;function G(){return Bo||(Bo=1,typeof Object.create=="function"?$r.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:$r.exports=function(t,r){if(r){t.super_=r;var n=function(){};n.prototype=r.prototype,t.prototype=new n,t.prototype.constructor=t}}),$r.exports}var Sn={},En,Mo;function uc(){if(Mo)return En;Mo=1;function e(){this._listeners={}}return e.prototype.addEventListener=function(t,r){t in this._listeners||(this._listeners[t]=[]);var n=this._listeners[t];n.indexOf(r)===-1&&(n=n.concat([r])),this._listeners[t]=n},e.prototype.removeEventListener=function(t,r){var n=this._listeners[t];if(n){var i=n.indexOf(r);if(i!==-1){n.length>1?this._listeners[t]=n.slice(0,i).concat(n.slice(i+1)):delete this._listeners[t];return}}},e.prototype.dispatchEvent=function(){var t=arguments[0],r=t.type,n=arguments.length===1?[t]:Array.apply(null,arguments);if(this["on"+r]&&this["on"+r].apply(this,n),r in this._listeners)for(var i=this._listeners[r],o=0;o<i.length;o++)i[o].apply(this,n)},En=e,En}var Ho;function be(){if(Ho)return Sn;Ho=1;var e=G(),t=uc();function r(){t.call(this)}return e(r,t),r.prototype.removeAllListeners=function(n){n?delete this._listeners[n]:this._listeners={}},r.prototype.once=function(n,i){var o=this,s=!1;function a(){o.removeListener(n,a),s||(s=!0,i.apply(this,arguments))}this.on(n,a)},r.prototype.emit=function(){var n=arguments[0],i=this._listeners[n];if(i){for(var o=arguments.length,s=new Array(o-1),a=1;a<o;a++)s[a-1]=arguments[a];for(var u=0;u<i.length;u++)i[u].apply(this,s)}},r.prototype.on=r.prototype.addListener=t.prototype.addEventListener,r.prototype.removeListener=t.prototype.removeEventListener,Sn.EventEmitter=r,Sn}var Lr={exports:{}},Wo;function Qp(){if(Wo)return Lr.exports;Wo=1;var e=N.WebSocket||N.MozWebSocket;return e?Lr.exports=function(r){return new e(r)}:Lr.exports=void 0,Lr.exports}var In,Vo;function ev(){if(Vo)return In;Vo=1;var e=St(),t=qe(),r=G(),n=be().EventEmitter,i=Qp(),o=function(){};function s(a,u,l){if(!s.enabled())throw new Error("Transport created when disabled");n.call(this);var h=this,p=t.addPath(a,"/websocket");p.slice(0,5)==="https"?p="wss"+p.slice(5):p="ws"+p.slice(4),this.url=p,this.ws=new i(this.url,[],l),this.ws.onmessage=function(m){o("message event",m.data),h.emit("message",m.data)},this.unloadRef=e.unloadAdd(function(){h.ws.close()}),this.ws.onclose=function(m){o("close event",m.code,m.reason),h.emit("close",m.code,m.reason),h._cleanup()},this.ws.onerror=function(m){h.emit("close",1006,"WebSocket connection broken"),h._cleanup()}}return r(s,n),s.prototype.send=function(a){var u="["+a+"]";this.ws.send(u)},s.prototype.close=function(){var a=this.ws;this._cleanup(),a&&a.close()},s.prototype._cleanup=function(){var a=this.ws;a&&(a.onmessage=a.onclose=a.onerror=null),e.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},s.enabled=function(){return!!i},s.transportName="websocket",s.roundTrips=2,In=s,In}var Tn,Xo;function tv(){if(Xo)return Tn;Xo=1;var e=G(),t=be().EventEmitter,r=function(){};function n(i,o){t.call(this),this.sendBuffer=[],this.sender=o,this.url=i}return e(n,t),n.prototype.send=function(i){this.sendBuffer.push(i),this.sendStop||this.sendSchedule()},n.prototype.sendScheduleWait=function(){var i=this,o;this.sendStop=function(){i.sendStop=null,clearTimeout(o)},o=setTimeout(function(){i.sendStop=null,i.sendSchedule()},25)},n.prototype.sendSchedule=function(){r("sendSchedule",this.sendBuffer.length);var i=this;if(this.sendBuffer.length>0){var o="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,o,function(s){i.sendStop=null,s?(i.emit("close",s.code||1006,"Sending error: "+s),i.close()):i.sendScheduleWait()}),this.sendBuffer=[]}},n.prototype._cleanup=function(){this.removeAllListeners()},n.prototype.close=function(){this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},Tn=n,Tn}var Rn,Go;function rv(){if(Go)return Rn;Go=1;var e=G(),t=be().EventEmitter,r=function(){};function n(i,o,s){t.call(this),this.Receiver=i,this.receiveUrl=o,this.AjaxObject=s,this._scheduleReceiver()}return e(n,t),n.prototype._scheduleReceiver=function(){var i=this,o=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);o.on("message",function(s){i.emit("message",s)}),o.once("close",function(s,a){r("close",s,a,i.pollIsClosing),i.poll=o=null,i.pollIsClosing||(a==="network"?i._scheduleReceiver():(i.emit("close",s||1006,a),i.removeAllListeners()))})},n.prototype.abort=function(){this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},Rn=n,Rn}var Cn,Jo;function lc(){if(Jo)return Cn;Jo=1;var e=G(),t=qe(),r=tv(),n=rv();function i(o,s,a,u,l){var h=t.addPath(o,s),p=this;r.call(this,o,a),this.poll=new n(u,h,l),this.poll.on("message",function(m){p.emit("message",m)}),this.poll.once("close",function(m,w){p.poll=null,p.emit("close",m,w),p.close()})}return e(i,r),i.prototype.close=function(){r.prototype.close.call(this),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)},Cn=i,Cn}var On,Ko;function tr(){if(Ko)return On;Ko=1;var e=G(),t=qe(),r=lc();function n(o){return function(s,a,u){var l={};typeof a=="string"&&(l.headers={"Content-type":"text/plain"});var h=t.addPath(s,"/xhr_send"),p=new o("POST",h,a,l);return p.once("finish",function(m){if(p=null,m!==200&&m!==204)return u(new Error("http status "+m));u()}),function(){p.close(),p=null;var m=new Error("Aborted");m.code=1e3,u(m)}}}function i(o,s,a,u){r.call(this,o,s,n(u),a,u)}return e(i,r),On=i,On}var Nn,Yo;function an(){if(Yo)return Nn;Yo=1;var e=G(),t=be().EventEmitter;function r(n,i){t.call(this);var o=this;this.bufferPosition=0,this.xo=new i("POST",n,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(s,a){o._chunkHandler(s,a),o.xo=null;var u=s===200?"network":"permanent";o.emit("close",null,u),o._cleanup()})}return e(r,t),r.prototype._chunkHandler=function(n,i){if(!(n!==200||!i))for(var o=-1;;this.bufferPosition+=o+1){var s=i.slice(this.bufferPosition);if(o=s.indexOf(`
`),o===-1)break;var a=s.slice(0,o);a&&this.emit("message",a)}},r.prototype._cleanup=function(){this.removeAllListeners()},r.prototype.abort=function(){this.xo&&(this.xo.close(),this.emit("close",null,"user"),this.xo=null),this._cleanup()},Nn=r,Nn}var An,Qo;function fc(){if(Qo)return An;Qo=1;var e=be().EventEmitter,t=G(),r=St(),n=qe(),i=N.XMLHttpRequest,o=function(){};function s(l,h,p,m){var w=this;e.call(this),setTimeout(function(){w._start(l,h,p,m)},0)}t(s,e),s.prototype._start=function(l,h,p,m){var w=this;try{this.xhr=new i}catch{}if(!this.xhr){this.emit("finish",0,"no xhr support"),this._cleanup();return}h=n.addQuery(h,"t="+ +new Date),this.unloadRef=r.unloadAdd(function(){w._cleanup(!0)});try{this.xhr.open(l,h,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){o("xhr timeout"),w.emit("finish",0,""),w._cleanup(!1)})}catch{this.emit("finish",0,""),this._cleanup(!1);return}if((!m||!m.noCredentials)&&s.supportsCORS&&(this.xhr.withCredentials=!0),m&&m.headers)for(var y in m.headers)this.xhr.setRequestHeader(y,m.headers[y]);this.xhr.onreadystatechange=function(){if(w.xhr){var E=w.xhr,C,$;switch(o("readyState",E.readyState),E.readyState){case 3:try{$=E.status,C=E.responseText}catch{}$===1223&&($=204),$===200&&C&&C.length>0&&w.emit("chunk",$,C);break;case 4:$=E.status,$===1223&&($=204),($===12005||$===12029)&&($=0),o("finish",$,E.responseText),w.emit("finish",$,E.responseText),w._cleanup(!1);break}}};try{w.xhr.send(p)}catch{w.emit("finish",0,""),w._cleanup(!1)}},s.prototype._cleanup=function(l){if(this.xhr){if(this.removeAllListeners(),r.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),l)try{this.xhr.abort()}catch{}this.unloadRef=this.xhr=null}},s.prototype.close=function(){this._cleanup(!0)},s.enabled=!!i;var a=["Active"].concat("Object").join("X");!s.enabled&&a in N&&(i=function(){try{return new N[a]("Microsoft.XMLHTTP")}catch{return null}},s.enabled=!!new i);var u=!1;try{u="withCredentials"in new i}catch{}return s.supportsCORS=u,An=s,An}var Pn,es;function cn(){if(es)return Pn;es=1;var e=G(),t=fc();function r(n,i,o,s){t.call(this,n,i,o,s)}return e(r,t),r.enabled=t.enabled&&t.supportsCORS,Pn=r,Pn}var zn,ts;function Er(){if(ts)return zn;ts=1;var e=G(),t=fc();function r(n,i,o){t.call(this,n,i,o,{noCredentials:!0})}return e(r,t),r.enabled=t.enabled,zn=r,zn}var Un,rs;function Ir(){return rs||(rs=1,Un={isOpera:function(){return N.navigator&&/opera/i.test(N.navigator.userAgent)},isKonqueror:function(){return N.navigator&&/konqueror/i.test(N.navigator.userAgent)},hasDomain:function(){if(!N.document)return!0;try{return!!N.document.domain}catch{return!1}}}),Un}var $n,ns;function nv(){if(ns)return $n;ns=1;var e=G(),t=tr(),r=an(),n=cn(),i=Er(),o=Ir();function s(a){if(!i.enabled&&!n.enabled)throw new Error("Transport created when disabled");t.call(this,a,"/xhr_streaming",r,n)}return e(s,t),s.enabled=function(a){return a.nullOrigin||o.isOpera()?!1:n.enabled},s.transportName="xhr-streaming",s.roundTrips=2,s.needBody=!!N.document,$n=s,$n}var Ln,is;function Yi(){if(is)return Ln;is=1;var e=be().EventEmitter,t=G(),r=St(),n=Ir(),i=qe(),o=function(){};function s(a,u,l){var h=this;e.call(this),setTimeout(function(){h._start(a,u,l)},0)}return t(s,e),s.prototype._start=function(a,u,l){var h=this,p=new N.XDomainRequest;u=i.addQuery(u,"t="+ +new Date),p.onerror=function(){h._error()},p.ontimeout=function(){h._error()},p.onprogress=function(){o("progress",p.responseText),h.emit("chunk",200,p.responseText)},p.onload=function(){h.emit("finish",200,p.responseText),h._cleanup(!1)},this.xdr=p,this.unloadRef=r.unloadAdd(function(){h._cleanup(!0)});try{this.xdr.open(a,u),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(l)}catch{this._error()}},s.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},s.prototype._cleanup=function(a){if(this.xdr){if(this.removeAllListeners(),r.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,a)try{this.xdr.abort()}catch{}this.unloadRef=this.xdr=null}},s.prototype.close=function(){this._cleanup(!0)},s.enabled=!!(N.XDomainRequest&&n.hasDomain()),Ln=s,Ln}var Zn,os;function hc(){if(os)return Zn;os=1;var e=G(),t=tr(),r=an(),n=Yi();function i(o){if(!n.enabled)throw new Error("Transport created when disabled");t.call(this,o,"/xhr_streaming",r,n)}return e(i,t),i.enabled=function(o){return o.cookie_needed||o.nullOrigin?!1:n.enabled&&o.sameScheme},i.transportName="xdr-streaming",i.roundTrips=2,Zn=i,Zn}var Dn,ss;function dc(){return ss||(ss=1,Dn=N.EventSource),Dn}var jn,as;function iv(){if(as)return jn;as=1;var e=G(),t=be().EventEmitter,r=dc(),n=function(){};function i(o){t.call(this);var s=this,a=this.es=new r(o);a.onmessage=function(u){n("message",u.data),s.emit("message",decodeURI(u.data))},a.onerror=function(u){n("error",a.readyState);var l=a.readyState!==2?"network":"permanent";s._cleanup(),s._close(l)}}return e(i,t),i.prototype.abort=function(){this._cleanup(),this._close("user")},i.prototype._cleanup=function(){var o=this.es;o&&(o.onmessage=o.onerror=null,o.close(),this.es=null)},i.prototype._close=function(o){var s=this;setTimeout(function(){s.emit("close",null,o),s.removeAllListeners()},200)},jn=i,jn}var qn,cs;function us(){if(cs)return qn;cs=1;var e=G(),t=tr(),r=iv(),n=cn(),i=dc();function o(s){if(!o.enabled())throw new Error("Transport created when disabled");t.call(this,s,"/eventsource",r,n)}return e(o,t),o.enabled=function(){return!!i},o.transportName="eventsource",o.roundTrips=2,qn=o,qn}var Fn,ls;function pc(){return ls||(ls=1,Fn="1.6.1"),Fn}var Bn={exports:{}},fs;function Tr(){return fs||(fs=1,(function(e){var t=St(),r=Ir();e.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){e.exports.WPrefix in N||(N[e.exports.WPrefix]={})},postMessage:function(n,i){N.parent!==N&&N.parent.postMessage(JSON.stringify({windowId:e.exports.currentWindowId,type:n,data:i||""}),"*")},createIframe:function(n,i){var o=N.document.createElement("iframe"),s,a,u=function(){clearTimeout(s);try{o.onload=null}catch{}o.onerror=null},l=function(){o&&(u(),setTimeout(function(){o&&o.parentNode.removeChild(o),o=null},0),t.unloadDel(a))},h=function(m){o&&(l(),i(m))},p=function(m,w){setTimeout(function(){try{o&&o.contentWindow&&o.contentWindow.postMessage(m,w)}catch{}},0)};return o.src=n,o.style.display="none",o.style.position="absolute",o.onerror=function(){h("onerror")},o.onload=function(){clearTimeout(s),s=setTimeout(function(){h("onload timeout")},2e3)},N.document.body.appendChild(o),s=setTimeout(function(){h("timeout")},15e3),a=t.unloadAdd(l),{post:p,cleanup:l,loaded:u}},createHtmlfile:function(n,i){var o=["Active"].concat("Object").join("X"),s=new N[o]("htmlfile"),a,u,l,h=function(){clearTimeout(a),l.onerror=null},p=function(){s&&(h(),t.unloadDel(u),l.parentNode.removeChild(l),l=s=null,CollectGarbage())},m=function(E){s&&(p(),i(E))},w=function(E,C){try{setTimeout(function(){l&&l.contentWindow&&l.contentWindow.postMessage(E,C)},0)}catch{}};s.open(),s.write('<html><script>document.domain="'+N.document.domain+'";<\/script></html>'),s.close(),s.parentWindow[e.exports.WPrefix]=N[e.exports.WPrefix];var y=s.createElement("div");return s.body.appendChild(y),l=s.createElement("iframe"),y.appendChild(l),l.src=n,l.onerror=function(){m("onerror")},a=setTimeout(function(){m("timeout")},15e3),u=t.unloadAdd(p),{post:w,cleanup:p,loaded:h}}},e.exports.iframeEnabled=!1,N.document&&(e.exports.iframeEnabled=(typeof N.postMessage=="function"||typeof N.postMessage=="object")&&!r.isKonqueror())})(Bn)),Bn.exports}var Mn,hs;function vc(){if(hs)return Mn;hs=1;var e=G(),t=be().EventEmitter,r=pc(),n=qe(),i=Tr(),o=St(),s=er(),a=function(){};function u(l,h,p){if(!u.enabled())throw new Error("Transport created when disabled");t.call(this);var m=this;this.origin=n.getOrigin(p),this.baseUrl=p,this.transUrl=h,this.transport=l,this.windowId=s.string(8);var w=n.addPath(p,"/iframe.html")+"#"+this.windowId;this.iframeObj=i.createIframe(w,function(y){m.emit("close",1006,"Unable to load an iframe ("+y+")"),m.close()}),this.onmessageCallback=this._message.bind(this),o.attachEvent("message",this.onmessageCallback)}return e(u,t),u.prototype.close=function(){if(this.removeAllListeners(),this.iframeObj){o.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch{}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},u.prototype._message=function(l){if(a("message",l.data),!n.isOriginEqual(l.origin,this.origin)){a("not same origin",l.origin,this.origin);return}var h;try{h=JSON.parse(l.data)}catch{a("bad json",l.data);return}if(h.windowId!==this.windowId){a("mismatched window id",h.windowId,this.windowId);return}switch(h.type){case"s":this.iframeObj.loaded(),this.postMessage("s",JSON.stringify([r,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",h.data);break;case"c":var p;try{p=JSON.parse(h.data)}catch{a("bad json",h.data);return}this.emit("close",p[0],p[1]),this.close();break}},u.prototype.postMessage=function(l,h){this.iframeObj.post(JSON.stringify({windowId:this.windowId,type:l,data:h||""}),this.origin)},u.prototype.send=function(l){this.postMessage("m",l)},u.enabled=function(){return i.iframeEnabled},u.transportName="iframe",u.roundTrips=2,Mn=u,Mn}var Hn,ds;function Qi(){return ds||(ds=1,Hn={isObject:function(e){var t=typeof e;return t==="function"||t==="object"&&!!e},extend:function(e){if(!this.isObject(e))return e;for(var t,r,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}}),Hn}var Wn,ps;function Vn(){if(ps)return Wn;ps=1;var e=G(),t=vc(),r=Qi();return Wn=function(n){function i(o,s){t.call(this,n.transportName,o,s)}return e(i,t),i.enabled=function(o,s){if(!N.document)return!1;var a=r.extend({},s);return a.sameOrigin=!0,n.enabled(a)&&t.enabled()},i.transportName="iframe-"+n.transportName,i.needBody=!0,i.roundTrips=t.roundTrips+n.roundTrips-1,i.facadeTransport=n,i},Wn}var Xn,vs;function ov(){if(vs)return Xn;vs=1;var e=G(),t=Tr(),r=qe(),n=be().EventEmitter,i=er(),o=function(){};function s(u){n.call(this);var l=this;t.polluteGlobalNamespace(),this.id="a"+i.string(6),u=r.addQuery(u,"c="+decodeURIComponent(t.WPrefix+"."+this.id)),o("using htmlfile",s.htmlfileEnabled);var h=s.htmlfileEnabled?t.createHtmlfile:t.createIframe;N[t.WPrefix][this.id]={start:function(){l.iframeObj.loaded()},message:function(p){l.emit("message",p)},stop:function(){l._cleanup(),l._close("network")}},this.iframeObj=h(u,function(){l._cleanup(),l._close("permanent")})}e(s,n),s.prototype.abort=function(){this._cleanup(),this._close("user")},s.prototype._cleanup=function(){this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete N[t.WPrefix][this.id]},s.prototype._close=function(u){this.emit("close",null,u),this.removeAllListeners()},s.htmlfileEnabled=!1;var a=["Active"].concat("Object").join("X");if(a in N)try{s.htmlfileEnabled=!!new N[a]("htmlfile")}catch{}return s.enabled=s.htmlfileEnabled||t.iframeEnabled,Xn=s,Xn}var Gn,ms;function gs(){if(ms)return Gn;ms=1;var e=G(),t=ov(),r=Er(),n=tr();function i(o){if(!t.enabled)throw new Error("Transport created when disabled");n.call(this,o,"/htmlfile",t,r)}return e(i,n),i.enabled=function(o){return t.enabled&&o.sameOrigin},i.transportName="htmlfile",i.roundTrips=2,Gn=i,Gn}var Jn,_s;function bs(){if(_s)return Jn;_s=1;var e=G(),t=tr(),r=an(),n=cn(),i=Er();function o(s){if(!i.enabled&&!n.enabled)throw new Error("Transport created when disabled");t.call(this,s,"/xhr",r,n)}return e(o,t),o.enabled=function(s){return s.nullOrigin?!1:i.enabled&&s.sameOrigin?!0:n.enabled},o.transportName="xhr-polling",o.roundTrips=2,Jn=o,Jn}var Kn,ys;function sv(){if(ys)return Kn;ys=1;var e=G(),t=tr(),r=hc(),n=an(),i=Yi();function o(s){if(!i.enabled)throw new Error("Transport created when disabled");t.call(this,s,"/xhr",n,i)}return e(o,t),o.enabled=r.enabled,o.transportName="xdr-polling",o.roundTrips=2,Kn=o,Kn}var Yn,ws;function av(){if(ws)return Yn;ws=1;var e=Tr(),t=er(),r=Ir(),n=qe(),i=G(),o=be().EventEmitter,s=function(){};function a(u){var l=this;o.call(this),e.polluteGlobalNamespace(),this.id="a"+t.string(6);var h=n.addQuery(u,"c="+encodeURIComponent(e.WPrefix+"."+this.id));N[e.WPrefix][this.id]=this._callback.bind(this),this._createScript(h),this.timeoutId=setTimeout(function(){l._abort(new Error("JSONP script loaded abnormally (timeout)"))},a.timeout)}return i(a,o),a.prototype.abort=function(){if(N[e.WPrefix][this.id]){var u=new Error("JSONP user aborted read");u.code=1e3,this._abort(u)}},a.timeout=35e3,a.scriptErrorTimeout=1e3,a.prototype._callback=function(u){this._cleanup(),!this.aborting&&(u&&this.emit("message",u),this.emit("close",null,"network"),this.removeAllListeners())},a.prototype._abort=function(u){this._cleanup(),this.aborting=!0,this.emit("close",u.code,u.message),this.removeAllListeners()},a.prototype._cleanup=function(){if(clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var u=this.script;u.parentNode.removeChild(u),u.onreadystatechange=u.onerror=u.onload=u.onclick=null,this.script=null}delete N[e.WPrefix][this.id]},a.prototype._scriptError=function(){var u=this;this.errorTimer||(this.errorTimer=setTimeout(function(){u.loadedOkay||u._abort(new Error("JSONP script loaded abnormally (onerror)"))},a.scriptErrorTimeout))},a.prototype._createScript=function(u){var l=this,h=this.script=N.document.createElement("script"),p;if(h.id="a"+t.string(8),h.src=u,h.type="text/javascript",h.charset="UTF-8",h.onerror=this._scriptError.bind(this),h.onload=function(){l._abort(new Error("JSONP script loaded abnormally (onload)"))},h.onreadystatechange=function(){if(s("onreadystatechange",h.readyState),/loaded|closed/.test(h.readyState)){if(h&&h.htmlFor&&h.onclick){l.loadedOkay=!0;try{h.onclick()}catch{}}h&&l._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},typeof h.async>"u"&&N.document.attachEvent)if(r.isOpera())p=this.script2=N.document.createElement("script"),p.text="try{var a = document.getElementById('"+h.id+"'); if(a)a.onerror();}catch(x){};",h.async=p.async=!1;else{try{h.htmlFor=h.id,h.event="onclick"}catch{}h.async=!0}typeof h.async<"u"&&(h.async=!0);var m=N.document.getElementsByTagName("head")[0];m.insertBefore(h,m.firstChild),p&&m.insertBefore(p,m.firstChild)},Yn=a,Yn}var Qn,ks;function cv(){if(ks)return Qn;ks=1;var e=er(),t=qe(),r=function(){},n,i;function o(a){try{return N.document.createElement('<iframe name="'+a+'">')}catch{var u=N.document.createElement("iframe");return u.name=a,u}}function s(){n=N.document.createElement("form"),n.style.display="none",n.style.position="absolute",n.method="POST",n.enctype="application/x-www-form-urlencoded",n.acceptCharset="UTF-8",i=N.document.createElement("textarea"),i.name="d",n.appendChild(i),N.document.body.appendChild(n)}return Qn=function(a,u,l){n||s();var h="a"+e.string(8);n.target=h,n.action=t.addQuery(t.addPath(a,"/jsonp_send"),"i="+h);var p=o(h);p.id=h,p.style.display="none",n.appendChild(p);try{i.value=u}catch{}n.submit();var m=function(w){p.onerror&&(p.onreadystatechange=p.onerror=p.onload=null,setTimeout(function(){p.parentNode.removeChild(p),p=null},500),i.value="",l(w))};return p.onerror=function(){m()},p.onload=function(){m()},p.onreadystatechange=function(w){r("onreadystatechange",h,p.readyState),p.readyState==="complete"&&m()},function(){m(new Error("Aborted"))}},Qn}var ei,xs;function uv(){if(xs)return ei;xs=1;var e=G(),t=lc(),r=av(),n=cv();function i(o){if(!i.enabled())throw new Error("Transport created when disabled");t.call(this,o,"/jsonp",n,r)}return e(i,t),i.enabled=function(){return!!N.document},i.transportName="jsonp-polling",i.roundTrips=1,i.needBody=!0,ei=i,ei}var ti,Ss;function lv(){return Ss||(Ss=1,ti=[ev(),nv(),hc(),us(),Vn()(us()),gs(),Vn()(gs()),bs(),sv(),Vn()(bs()),uv()]),ti}var Es={},Is;function fv(){if(Is)return Es;Is=1;var e=Array.prototype,t=Object.prototype,r=Function.prototype,n=String.prototype,i=e.slice,o=t.toString,s=function(f){return t.toString.call(f)==="[object Function]"},a=function(g){return o.call(g)==="[object Array]"},u=function(g){return o.call(g)==="[object String]"},l=Object.defineProperty&&(function(){try{return Object.defineProperty({},"x",{}),!0}catch{return!1}})(),h;l?h=function(f,g,k,R){!R&&g in f||Object.defineProperty(f,g,{configurable:!0,enumerable:!1,writable:!0,value:k})}:h=function(f,g,k,R){!R&&g in f||(f[g]=k)};var p=function(f,g,k){for(var R in g)t.hasOwnProperty.call(g,R)&&h(f,R,g[R],k)},m=function(f){if(f==null)throw new TypeError("can't convert "+f+" to object");return Object(f)};function w(f){var g=+f;return g!==g?g=0:g!==0&&g!==1/0&&g!==-1/0&&(g=(g>0||-1)*Math.floor(Math.abs(g))),g}function y(f){return f>>>0}function E(){}p(r,{bind:function(g){var k=this;if(!s(k))throw new TypeError("Function.prototype.bind called on incompatible "+k);for(var R=i.call(arguments,1),I=function(){if(this instanceof H){var fe=k.apply(this,R.concat(i.call(arguments)));return Object(fe)===fe?fe:this}else return k.apply(g,R.concat(i.call(arguments)))},z=Math.max(0,k.length-R.length),T=[],B=0;B<z;B++)T.push("$"+B);var H=Function("binder","return function ("+T.join(",")+"){ return binder.apply(this, arguments); }")(I);return k.prototype&&(E.prototype=k.prototype,H.prototype=new E,E.prototype=null),H}}),p(Array,{isArray:a});var C=Object("a"),$=C[0]!=="a"||!(0 in C),b=function(g){var k=!0,R=!0;return g&&(g.call("foo",function(I,z,T){typeof T!="object"&&(k=!1)}),g.call([1],function(){R=typeof this=="string"},"x")),!!g&&k&&R};p(e,{forEach:function(g){var k=m(this),R=$&&u(this)?this.split(""):k,I=arguments[1],z=-1,T=R.length>>>0;if(!s(g))throw new TypeError;for(;++z<T;)z in R&&g.call(I,R[z],z,k)}},!b(e.forEach));var x=Array.prototype.indexOf&&[0,1].indexOf(1,2)!==-1;p(e,{indexOf:function(g){var k=$&&u(this)?this.split(""):m(this),R=k.length>>>0;if(!R)return-1;var I=0;for(arguments.length>1&&(I=w(arguments[1])),I=I>=0?I:Math.max(0,R+I);I<R;I++)if(I in k&&k[I]===g)return I;return-1}},x);var d=n.split;"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1?(function(){var f=/()??/.exec("")[1]===void 0;n.split=function(g,k){var R=this;if(g===void 0&&k===0)return[];if(o.call(g)!=="[object RegExp]")return d.call(this,g,k);var I=[],z=(g.ignoreCase?"i":"")+(g.multiline?"m":"")+(g.extended?"x":"")+(g.sticky?"y":""),T=0,B,H,fe,Te;for(g=new RegExp(g.source,z+"g"),R+="",f||(B=new RegExp("^"+g.source+"$(?!\\s)",z)),k=k===void 0?-1>>>0:y(k);(H=g.exec(R))&&(fe=H.index+H[0].length,!(fe>T&&(I.push(R.slice(T,H.index)),!f&&H.length>1&&H[0].replace(B,function(){for(var ye=1;ye<arguments.length-2;ye++)arguments[ye]===void 0&&(H[ye]=void 0)}),H.length>1&&H.index<R.length&&e.push.apply(I,H.slice(1)),Te=H[0].length,T=fe,I.length>=k)));)g.lastIndex===H.index&&g.lastIndex++;return T===R.length?(Te||!g.test(""))&&I.push(""):I.push(R.slice(T)),I.length>k?I.slice(0,k):I}})():"0".split(void 0,0).length&&(n.split=function(g,k){return g===void 0&&k===0?[]:d.call(this,g,k)});var c=n.substr,v="".substr&&"0b".substr(-1)!=="b";return p(n,{substr:function(g,k){return c.call(this,g<0&&(g=this.length+g)<0?0:g,k)}},v),Es}var ri,Ts;function hv(){if(Ts)return ri;Ts=1;var e=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,t,r=function(n){var i,o={},s=[];for(i=0;i<65536;i++)s.push(String.fromCharCode(i));return n.lastIndex=0,s.join("").replace(n,function(a){return o[a]="\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4),""}),n.lastIndex=0,o};return ri={quote:function(n){var i=JSON.stringify(n);return e.lastIndex=0,e.test(i)?(t||(t=r(e)),i.replace(e,function(o){return t[o]})):i}},ri}var ni,Rs;function dv(){if(Rs)return ni;Rs=1;var e=function(){};return ni=function(t){return{filterToEnabled:function(r,n){var i={main:[],facade:[]};return r?typeof r=="string"&&(r=[r]):r=[],t.forEach(function(o){if(o&&!(o.transportName==="websocket"&&n.websocket===!1)){if(r.length&&r.indexOf(o.transportName)===-1){e("not in whitelist",o.transportName);return}o.enabled(n)?(e("enabled",o.transportName),i.main.push(o),o.facadeTransport&&i.facade.push(o.facadeTransport)):e("disabled",o.transportName)}}),i}}},ni}var ii,Cs;function pv(){if(Cs)return ii;Cs=1;var e={};return["log","debug","warn"].forEach(function(t){var r;try{r=N.console&&N.console[t]&&N.console[t].apply}catch{}e[t]=r?function(){return N.console[t].apply(N.console,arguments)}:t==="log"?function(){}:e.log}),ii=e,ii}var oi,Os;function eo(){if(Os)return oi;Os=1;function e(t){this.type=t}return e.prototype.initEvent=function(t,r,n){return this.type=t,this.bubbles=r,this.cancelable=n,this.timeStamp=+new Date,this},e.prototype.stopPropagation=function(){},e.prototype.preventDefault=function(){},e.CAPTURING_PHASE=1,e.AT_TARGET=2,e.BUBBLING_PHASE=3,oi=e,oi}var si,Ns;function mc(){return Ns||(Ns=1,si=N.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""}),si}var ai,As;function vv(){if(As)return ai;As=1;var e=G(),t=eo();function r(){t.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}return e(r,t),ai=r,ai}var ci,Ps;function mv(){if(Ps)return ci;Ps=1;var e=G(),t=eo();function r(n){t.call(this),this.initEvent("message",!1,!1),this.data=n}return e(r,t),ci=r,ci}var ui,zs;function gv(){if(zs)return ui;zs=1;var e=be().EventEmitter,t=G();function r(){var n=this;e.call(this),this.to=setTimeout(function(){n.emit("finish",200,"{}")},r.timeout)}return t(r,e),r.prototype.close=function(){clearTimeout(this.to)},r.timeout=2e3,ui=r,ui}var li,Us;function gc(){if(Us)return li;Us=1;var e=be().EventEmitter,t=G(),r=Qi();function n(i,o){e.call(this);var s=this,a=+new Date;this.xo=new o("GET",i),this.xo.once("finish",function(u,l){var h,p;if(u===200){if(p=+new Date-a,l)try{h=JSON.parse(l)}catch{}r.isObject(h)||(h={})}s.emit("finish",h,p),s.removeAllListeners()})}return t(n,e),n.prototype.close=function(){this.removeAllListeners(),this.xo.close()},li=n,li}var fi,$s;function _c(){if($s)return fi;$s=1;var e=G(),t=be().EventEmitter,r=Er(),n=gc();function i(o){var s=this;t.call(this),this.ir=new n(o,r),this.ir.once("finish",function(a,u){s.ir=null,s.emit("message",JSON.stringify([a,u]))})}return e(i,t),i.transportName="iframe-info-receiver",i.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},fi=i,fi}var hi,Ls;function _v(){if(Ls)return hi;Ls=1;var e=be().EventEmitter,t=G(),r=St(),n=vc(),i=_c();function o(s,a){var u=this;e.call(this);var l=function(){var h=u.ifr=new n(i.transportName,a,s);h.once("message",function(p){if(p){var m;try{m=JSON.parse(p)}catch{u.emit("finish"),u.close();return}var w=m[0],y=m[1];u.emit("finish",w,y)}u.close()}),h.once("close",function(){u.emit("finish"),u.close()})};N.document.body?l():r.attachEvent("load",l)}return t(o,e),o.enabled=function(){return n.enabled()},o.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},hi=o,hi}var di,Zs;function bv(){if(Zs)return di;Zs=1;var e=be().EventEmitter,t=G(),r=qe(),n=Yi(),i=cn(),o=Er(),s=gv(),a=_v(),u=gc();function l(h,p){var m=this;e.call(this),setTimeout(function(){m.doXhr(h,p)},0)}return t(l,e),l._getReceiver=function(h,p,m){return m.sameOrigin?new u(p,o):i.enabled?new u(p,i):n.enabled&&m.sameScheme?new u(p,n):a.enabled()?new a(h,p):new u(p,s)},l.prototype.doXhr=function(h,p){var m=this,w=r.addPath(h,"/info");this.xo=l._getReceiver(h,w,p),this.timeoutRef=setTimeout(function(){m._cleanup(!1),m.emit("finish")},l.timeout),this.xo.once("finish",function(y,E){m._cleanup(!0),m.emit("finish",y,E)})},l.prototype._cleanup=function(h){clearTimeout(this.timeoutRef),this.timeoutRef=null,!h&&this.xo&&this.xo.close(),this.xo=null},l.prototype.close=function(){this.removeAllListeners(),this._cleanup(!1)},l.timeout=8e3,di=l,di}var pi,Ds;function yv(){if(Ds)return pi;Ds=1;var e=Tr();function t(r){this._transport=r,r.on("message",this._transportMessage.bind(this)),r.on("close",this._transportClose.bind(this))}return t.prototype._transportClose=function(r,n){e.postMessage("c",JSON.stringify([r,n]))},t.prototype._transportMessage=function(r){e.postMessage("t",r)},t.prototype._send=function(r){this._transport.send(r)},t.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},pi=t,pi}var vi,js;function wv(){if(js)return vi;js=1;var e=qe(),t=St(),r=yv(),n=_c(),i=Tr(),o=mc(),s=function(){};return vi=function(a,u){var l={};u.forEach(function(p){p.facadeTransport&&(l[p.facadeTransport.transportName]=p.facadeTransport)}),l[n.transportName]=n;var h;a.bootstrap_iframe=function(){var p;i.currentWindowId=o.hash.slice(1);var m=function(w){if(w.source===parent&&(typeof h>"u"&&(h=w.origin),w.origin===h)){var y;try{y=JSON.parse(w.data)}catch{s("bad json",w.data);return}if(y.windowId===i.currentWindowId)switch(y.type){case"s":var E;try{E=JSON.parse(y.data)}catch{s("bad json",y.data);break}var C=E[0],$=E[1],b=E[2],x=E[3];if(C!==a.version)throw new Error('Incompatible SockJS! Main site uses: "'+C+'", the iframe: "'+a.version+'".');if(!e.isOriginEqual(b,o.href)||!e.isOriginEqual(x,o.href))throw new Error("Can't connect to different domain from within an iframe. ("+o.href+", "+b+", "+x+")");p=new r(new l[$](b,x));break;case"m":p._send(y.data);break;case"c":p&&p._close(),p=null;break}}};t.attachEvent("message",m),i.postMessage("s")}},vi}var mi,qs;function kv(){if(qs)return mi;qs=1,fv();var e=cc(),t=G(),r=er(),n=hv(),i=qe(),o=St(),s=dv(),a=Qi(),u=Ir(),l=pv(),h=eo(),p=uc(),m=mc(),w=vv(),y=mv(),E=bv(),C=function(){},$;function b(d,c,v){if(!(this instanceof b))return new b(d,c,v);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");p.call(this),this.readyState=b.CONNECTING,this.extensions="",this.protocol="",v=v||{},v.protocols_whitelist&&l.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=v.transports,this._transportOptions=v.transportOptions||{},this._timeout=v.timeout||0;var f=v.sessionId||8;if(typeof f=="function")this._generateSessionId=f;else if(typeof f=="number")this._generateSessionId=function(){return r.string(f)};else throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._server=v.server||r.numberString(1e3);var g=new e(d);if(!g.host||!g.protocol)throw new SyntaxError("The URL '"+d+"' is invalid");if(g.hash)throw new SyntaxError("The URL must not contain a fragment");if(g.protocol!=="http:"&&g.protocol!=="https:")throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+g.protocol+"' is not allowed.");var k=g.protocol==="https:";if(m.protocol==="https:"&&!k&&!i.isLoopbackAddr(g.hostname))throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");c?Array.isArray(c)||(c=[c]):c=[];var R=c.sort();R.forEach(function(z,T){if(!z)throw new SyntaxError("The protocols entry '"+z+"' is invalid.");if(T<R.length-1&&z===R[T+1])throw new SyntaxError("The protocols entry '"+z+"' is duplicated.")});var I=i.getOrigin(m.href);this._origin=I?I.toLowerCase():null,g.set("pathname",g.pathname.replace(/\/+$/,"")),this.url=g.href,C("using url",this.url),this._urlInfo={nullOrigin:!u.hasDomain(),sameOrigin:i.isOriginEqual(this.url,m.href),sameScheme:i.isSchemeEqual(this.url,m.href)},this._ir=new E(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}t(b,p);function x(d){return d===1e3||d>=3e3&&d<=4999}return b.prototype.close=function(d,c){if(d&&!x(d))throw new Error("InvalidAccessError: Invalid code");if(c&&c.length>123)throw new SyntaxError("reason argument has an invalid length");if(!(this.readyState===b.CLOSING||this.readyState===b.CLOSED)){var v=!0;this._close(d||1e3,c||"Normal closure",v)}},b.prototype.send=function(d){if(typeof d!="string"&&(d=""+d),this.readyState===b.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===b.OPEN&&this._transport.send(n.quote(d))},b.version=pc(),b.CONNECTING=0,b.OPEN=1,b.CLOSING=2,b.CLOSED=3,b.prototype._receiveInfo=function(d,c){if(this._ir=null,!d){this._close(1002,"Cannot connect to server");return}this._rto=this.countRTO(c),this._transUrl=d.base_url?d.base_url:this.url,d=a.extend(d,this._urlInfo);var v=$.filterToEnabled(this._transportsWhitelist,d);this._transports=v.main,C(this._transports.length+" enabled transports"),this._connect()},b.prototype._connect=function(){for(var d=this._transports.shift();d;d=this._transports.shift()){if(C("attempt",d.transportName),d.needBody&&(!N.document.body||typeof N.document.readyState<"u"&&N.document.readyState!=="complete"&&N.document.readyState!=="interactive")){this._transports.unshift(d),o.attachEvent("load",this._connect.bind(this));return}var c=Math.max(this._timeout,this._rto*d.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),c);var v=i.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),f=this._transportOptions[d.transportName],g=new d(v,this._transUrl,f);g.on("message",this._transportMessage.bind(this)),g.once("close",this._transportClose.bind(this)),g.transportName=d.transportName,this._transport=g;return}this._close(2e3,"All transports failed",!1)},b.prototype._transportTimeout=function(){this.readyState===b.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))},b.prototype._transportMessage=function(d){var c=this,v=d.slice(0,1),f=d.slice(1),g;switch(v){case"o":this._open();return;case"h":this.dispatchEvent(new h("heartbeat")),C("heartbeat",this.transport);return}if(f)try{g=JSON.parse(f)}catch{}if(!(typeof g>"u"))switch(v){case"a":Array.isArray(g)&&g.forEach(function(k){C("message",c.transport),c.dispatchEvent(new y(k))});break;case"m":C("message",this.transport),this.dispatchEvent(new y(g));break;case"c":Array.isArray(g)&&g.length===2&&this._close(g[0],g[1],!0);break}},b.prototype._transportClose=function(d,c){if(C("_transportClose",this.transport),this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),!x(d)&&d!==2e3&&this.readyState===b.CONNECTING){this._connect();return}this._close(d,c)},b.prototype._open=function(){C("_open",this._transport&&this._transport.transportName,this.readyState),this.readyState===b.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=b.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new h("open")),C("connected",this.transport)):this._close(1006,"Server lost session")},b.prototype._close=function(d,c,v){C("_close",this.transport,d,c,v,this.readyState);var f=!1;if(this._ir&&(f=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===b.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=b.CLOSING,setTimeout((function(){this.readyState=b.CLOSED,f&&this.dispatchEvent(new h("error"));var g=new w("close");g.wasClean=v||!1,g.code=d||1e3,g.reason=c,this.dispatchEvent(g),this.onmessage=this.onclose=this.onerror=null}).bind(this),0)},b.prototype.countRTO=function(d){return d>100?4*d:300+d},mi=function(d){return $=s(d),wv()(b,d),b},mi}var gi,Fs;function xv(){if(Fs)return gi;Fs=1;var e=lv();return gi=kv()(e),"_sockjs_onload"in N&&setTimeout(N._sockjs_onload,1),gi}var Sv=xv();const Ev=Wp(Sv);let _i=null,Zr=null;function Iv(){return new Gp.Client({webSocketFactory:()=>new Ev("/ws"),reconnectDelay:5e3,heartbeatIncoming:2e4,heartbeatOutgoing:1e4})}function Oi(e,t,r){let n;try{n=JSON.parse(e)}catch(o){return console.warn(`Failed to parse ${t} payload`,o),null}const i=Ji(r,n,t);return i.success?i.data:null}async function bc(){if(_i?.connected)return _i;Zr||(Zr=new Promise((t,r)=>{const n=Iv();n.onConnect=i=>{_i=n,t(n)},n.onStompError=i=>{r(new Error(i.body||"STOMP connection failed"))},n.onWebSocketError=i=>{console.error("WebSocket error",i)},n.activate()}).finally(()=>{Zr=null}));const e=Zr;if(!e)throw new Error("Realtime connection was not initialized");return e}async function Tv(e,t,r){const n=await bc(),i=n.subscribe(`/topic/search/${e}/progress`,s=>{const a=Oi(s.body,"searchProgressEvent",up);if(!a){t("Searching...");return}t(a.message??"Searching...")}),o=n.subscribe(`/topic/search/${e}/results`,s=>{const a=Oi(s.body,"searchResultsEvent",lp);if(!a){r([]);return}r(a.newResults)});return()=>{i.unsubscribe(),o.unsubscribe()}}async function Rv(e,t){const n=(await bc()).subscribe(`/topic/book/${e}/coverUpdate`,i=>{const o=Oi(i.body,"bookCoverUpdateEvent",fp);o&&o.newCoverUrl&&t(o.newCoverUrl)});return()=>n.unsubscribe()}var Cv=F("<option> </option>"),Ov=F("<option> </option>"),Nv=F("<option> </option>"),Av=F('<p class="text-sm text-anthracite-600 dark:text-slate-300">Searching books...</p>'),Pv=F('<p class="text-xs text-canvas-700 dark:text-canvas-400"> </p>'),zv=F('<p class="rounded-lg border border-red-200 bg-red-50 p-3 text-sm text-red-700 dark:border-red-900/40 dark:bg-red-950/40 dark:text-red-200"> </p>'),Uv=F('<p class="text-sm text-anthracite-600 dark:text-slate-300">No results found.</p>'),$v=F('<div></div> <nav class="mt-4 flex items-center justify-center gap-2"><button class="rounded-md border border-linen-300 px-3 py-1.5 text-sm disabled:opacity-40 dark:border-slate-600">Prev</button> <span class="text-sm text-anthracite-700 dark:text-slate-300"> </span> <button class="rounded-md border border-linen-300 px-3 py-1.5 text-sm disabled:opacity-40 dark:border-slate-600">Next</button></nav>',1),Lv=F('<section class="mx-auto flex max-w-6xl flex-col gap-6 px-4 py-8 md:px-6"><form class="grid gap-3 rounded-xl border border-linen-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-800 md:grid-cols-[1fr_auto_auto_auto_auto]"><input class="rounded-lg border border-linen-300 px-3 py-2 text-sm outline-none ring-canvas-300 focus:ring-2 dark:border-slate-600 dark:bg-slate-900" placeholder="Search by title, author, ISBN" required/> <input type="number" min="1800" max="2099" class="rounded-lg border border-linen-300 px-3 py-2 text-sm outline-none ring-canvas-300 focus:ring-2 dark:border-slate-600 dark:bg-slate-900" placeholder="Year"/> <select class="rounded-lg border border-linen-300 px-3 py-2 text-sm dark:border-slate-600 dark:bg-slate-900"></select> <select class="rounded-lg border border-linen-300 px-3 py-2 text-sm dark:border-slate-600 dark:bg-slate-900"></select> <select class="rounded-lg border border-linen-300 px-3 py-2 text-sm dark:border-slate-600 dark:bg-slate-900"></select> <div class="md:col-span-5 flex items-center justify-between gap-3"><div class="flex items-center gap-2 text-sm"><button type="button">Grid</button> <button type="button">List</button></div> <button type="submit" class="rounded-lg bg-canvas-500 px-4 py-2 text-sm font-medium text-white transition hover:bg-canvas-600">Apply</button></div></form> <!> <!> <!> <!> <!></section>');function Zv(e,t){ut(t,!0);const r=12,n=["ANY","GOOGLE_BOOKS","OPEN_LIBRARY","LONGITOOD"],i=["ANY","HIGH_ONLY","HIGH_FIRST"],o=["relevance","title","author","newest","rating"],s=new Map;let a=null,u=M(""),l=M(null),h=M(1),p=M("newest"),m=M("ANY"),w=M("HIGH_FIRST"),y=M("grid"),E=M(!1),C=M(null),$=M(null),b=M(null);function x(A,Z){if(!A)return Z;const q=Number.parseInt(A,10);return!Number.isFinite(q)||q<1?Z:q}function d(){return{query:_(u),startIndex:(_(h)-1)*r,maxResults:r,orderBy:_(p),coverSource:_(m),resolution:_(w),publishedYear:_(l)}}function c(A){return[A.query,A.startIndex,A.maxResults,A.orderBy,A.coverSource,A.resolution,A.publishedYear??"none"].join("::")}function v(A){const Z=A.searchParams;L(u,Z.get("query")?.trim()??"",!0),L(l,Z.get("year")&&x(Z.get("year"),0)||null,!0),L(h,x(Z.get("page"),1),!0);const q=Z.get("sort")??"newest";L(p,o.includes(q)?q:"newest",!0);const ce=Z.get("coverSource")??"ANY";L(m,n.includes(ce)?ce:"ANY",!0);const ae=Z.get("resolution")??"HIGH_FIRST";L(w,i.includes(ae)?ae:"HIGH_FIRST",!0);const Ke=Z.get("view");L(y,Ke==="list"?"list":"grid",!0)}function f(A){if(!_(b))return;const Z=Mp(A);if(Z.length===0)return;const q=Hp(_(b).results,Z);L(b,{..._(b),results:q,totalResults:Math.max(_(b).totalResults,q.length)},!0)}async function g(A,Z){if(Z.hasMore)for(let q=1;q<=5;q++){const ce=A.startIndex+q*r,ae={...A,startIndex:ce},Ke=c(ae);if(!s.has(Ke))try{const Dt=await zo(ae);if(s.set(Ke,Dt),!Dt.hasMore)break}catch{break}}}async function k(){if(!_(u)){a&&(a(),a=null),L(b,null),L(C,null),L($,null);return}L(E,!0),L(C,null),L($,null);const A=d(),Z=c(A);try{const q=s.get(Z)??await zo(A);s.set(Z,q),L(b,q,!0),a&&(a(),a=null),a=await Tv(q.queryHash,ce=>{L($,ce,!0)},ce=>{f(ce)}),g(A,q)}catch(q){L(C,q instanceof Error?q.message:"Search request failed",!0),L(b,null)}finally{L(E,!1)}}function R(A=1){const Z=new URL("/search",window.location.origin);_(u).trim()&&Z.searchParams.set("query",_(u).trim()),_(l)!==null&&_(l)>0&&Z.searchParams.set("year",String(_(l))),Z.searchParams.set("page",String(A)),Z.searchParams.set("sort",_(p)),Z.searchParams.set("view",_(y)),Z.searchParams.set("coverSource",_(m)),Z.searchParams.set("resolution",_(w)),Yt(`${Z.pathname}${Z.search}`)}function I(A){const Z=A.authors.map(q=>q.name).filter(q=>q&&q.length>0);return{id:A.id,slug:A.slug??A.id,title:A.title??"Untitled",authors:Z,description:A.description,coverUrl:A.cover?.preferredUrl??A.cover?.s3ImagePath??A.cover?.externalImageUrl??null,fallbackCoverUrl:A.cover?.fallbackUrl??"/images/placeholder-book-cover.svg"}}let z=xe(()=>_(b)?_(b).hasMore?Math.max(Math.max(1,Math.ceil(_(b).totalResults/r)),_(h)+1):Math.max(1,Math.ceil(_(b).totalResults/r)):1);kr(()=>{v(t.currentUrl),k()}),en(()=>()=>{a&&a()});var T=Lv(),B=O(T),H=O(B),fe=U(H,2),Te=U(fe,2);Se(Te,21,()=>o,Qe,(A,Z)=>{var q=Cv(),ce=O(q),ae={};Y(()=>{V(ce,_(Z)),ae!==(ae=_(Z))&&(q.value=(q.__value=_(Z))??"")}),D(A,q)});var ye=U(Te,2);Se(ye,21,()=>n,Qe,(A,Z)=>{var q=Ov(),ce=O(q),ae={};Y(()=>{V(ce,_(Z)),ae!==(ae=_(Z))&&(q.value=(q.__value=_(Z))??"")}),D(A,q)});var tt=U(ye,2);Se(tt,21,()=>i,Qe,(A,Z)=>{var q=Nv(),ce=O(q),ae={};Y(()=>{V(ce,_(Z)),ae!==(ae=_(Z))&&(q.value=(q.__value=_(Z))??"")}),D(A,q)});var Et=U(tt,2),rr=O(Et),rt=O(rr);rt.__click=()=>{L(y,"grid"),R(_(h))};var ge=U(rt,2);ge.__click=()=>{L(y,"list"),R(_(h))};var _e=U(B,2);{var Re=A=>{var Z=Av();D(A,Z)};J(_e,A=>{_(E)&&A(Re)})}var we=U(_e,2);{var Je=A=>{var Z=Pv(),q=O(Z);Y(()=>V(q,_($))),D(A,Z)};J(we,A=>{_($)&&A(Je)})}var Fe=U(we,2);{var It=A=>{var Z=zv(),q=O(Z);Y(()=>V(q,_(C))),D(A,Z)};J(Fe,A=>{_(C)&&A(It)})}var ht=U(Fe,2);{var dt=A=>{var Z=Uv();D(A,Z)};J(ht,A=>{!_(E)&&_(b)&&_(b).results.length===0&&A(dt)})}var pt=U(ht,2);{var nt=A=>{var Z=$v(),q=Pe(Z);Se(q,21,()=>_(b).results,nr=>nr.id,(nr,jt)=>{{let un=xe(()=>I(_(jt))),ln=xe(()=>`/book/${encodeURIComponent(_(jt).slug??_(jt).id)}?query=${encodeURIComponent(_(u))}&page=${_(h)}&sort=${encodeURIComponent(_(p))}&view=${_(y)}${_(l)?`&year=${_(l)}`:""}`);Xr(nr,{get layout(){return _(y)},get book(){return _(un)},get href(){return _(ln)}})}});var ce=U(q,2),ae=O(ce);ae.__click=()=>R(_(h)-1);var Ke=U(ae,2),Dt=O(Ke),Rr=U(Ke,2);Rr.__click=()=>R(_(h)+1),Y(()=>{at(q,1,$u(_(y)==="grid"?"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4":"grid grid-cols-1 gap-4")),ae.disabled=_(h)<=1,V(Dt,`Page ${_(h)??""} of ${_(z)??""}`),Rr.disabled=_(h)>=_(z)}),D(A,Z)};J(pt,A=>{_(b)&&_(b).results.length>0&&A(nt)})}Y(()=>{at(rt,1,`rounded-md px-3 py-1.5 ${_(y)==="grid"?"bg-canvas-500 text-white":"bg-linen-100 text-anthracite-700 dark:bg-slate-700 dark:text-slate-200"}`),at(ge,1,`rounded-md px-3 py-1.5 ${_(y)==="list"?"bg-canvas-500 text-white":"bg-linen-100 text-anthracite-700 dark:bg-slate-700 dark:text-slate-200"}`)}),Qr("submit",B,A=>{A.preventDefault(),R(1)}),_r(H,()=>_(u),A=>L(u,A)),_r(fe,()=>_(l),A=>L(l,A)),pn(Te,()=>_(p),A=>L(p,A)),pn(ye,()=>_(m),A=>L(m,A)),pn(tt,()=>_(w),A=>L(w,A)),D(e,T),lt()}Bi(["click"]);var Dv=F('<p class="text-sm text-anthracite-600 dark:text-slate-300">Loading book details...</p>'),jv=F('<div class="rounded-xl border border-red-200 bg-red-50 p-4 text-sm text-red-700 dark:border-red-900/40 dark:bg-red-950/40 dark:text-red-200"> </div>'),qv=F('<p class="whitespace-pre-wrap text-sm leading-6 text-anthracite-700 dark:text-slate-300"> </p>'),Fv=F('<span class="rounded-full bg-linen-100 px-3 py-1 text-xs font-medium text-anthracite-700 dark:bg-slate-700 dark:text-slate-200"> </span>'),Bv=F('<div class="flex flex-wrap gap-2"></div>'),Mv=F('<a data-no-spa="true" target="_blank" rel="noreferrer" class="rounded-lg bg-canvas-500 px-3 py-1.5 text-sm text-white transition hover:bg-canvas-600"> </a>'),Hv=F('<div class="space-y-2"><p class="text-sm font-medium text-anthracite-800 dark:text-slate-200">Affiliate links</p> <div class="flex flex-wrap gap-2"></div></div>'),Wv=F('<article class="rounded-xl border border-linen-200 bg-white p-3 dark:border-slate-700 dark:bg-slate-800"><p class="text-sm font-medium text-anthracite-800 dark:text-slate-100"> </p> <p class="text-xs text-anthracite-600 dark:text-slate-300"> </p></article>'),Vv=F('<section class="space-y-3"><h2 class="text-xl font-semibold text-anthracite-900 dark:text-slate-100">Editions</h2> <div class="grid grid-cols-1 gap-3 md:grid-cols-2 lg:grid-cols-3"></div></section>'),Xv=F('<section class="space-y-3"><h2 class="text-xl font-semibold text-anthracite-900 dark:text-slate-100">Similar books</h2> <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3"></div></section>'),Gv=F('<a class="w-fit rounded-lg border border-linen-300 px-3 py-1.5 text-sm text-anthracite-700 transition hover:bg-linen-100 dark:border-slate-600 dark:text-slate-300 dark:hover:bg-slate-800">Back to search</a> <article class="grid gap-6 rounded-xl border border-linen-200 bg-white p-5 shadow-sm dark:border-slate-700 dark:bg-slate-800 md:grid-cols-[320px_1fr]"><img class="h-[440px] w-full rounded-xl object-cover" loading="lazy"/> <div class="space-y-4"><h1 class="text-3xl font-semibold text-anthracite-900 dark:text-slate-100"> </h1> <p class="text-base text-anthracite-700 dark:text-slate-300"> </p> <dl class="grid gap-2 text-sm text-anthracite-700 dark:text-slate-300 sm:grid-cols-2"><div><dt class="font-medium text-anthracite-800 dark:text-slate-200">Published</dt> <dd> </dd></div> <div><dt class="font-medium text-anthracite-800 dark:text-slate-200">Publisher</dt> <dd> </dd></div> <div><dt class="font-medium text-anthracite-800 dark:text-slate-200">Language</dt> <dd> </dd></div> <div><dt class="font-medium text-anthracite-800 dark:text-slate-200">Pages</dt> <dd> </dd></div></dl> <!> <!> <!></div></article> <!> <!>',1),Jv=F('<p class="text-sm text-anthracite-600 dark:text-slate-300">Book not found.</p>'),Kv=F('<section class="mx-auto flex max-w-6xl flex-col gap-6 px-4 py-8 md:px-6"><!></section>');function Yv(e,t){ut(t,!0);let r=M(!0),n=M(null),i=M(null),o=M(Ye([])),s=M(Ye({})),a=M(null),u=null;async function l(){L(r,!0),L(n,null);try{const d=await Dp(t.identifier),[c,v]=await Promise.allSettled([jp(t.identifier,6),qp(t.identifier)]);L(i,d,!0),L(o,c.status==="fulfilled"?c.value:[],!0),L(s,v.status==="fulfilled"?v.value:{},!0),L(a,null),u&&(u(),u=null);const f=d.id;u=await Rv(f,g=>{L(a,g,!0)})}catch(d){L(n,d instanceof Error?d.message:"Unable to load this book",!0),L(i,null),L(o,[],!0),L(s,{},!0)}finally{L(r,!1)}}function h(){return _(a)&&_(a).trim().length>0?_(a):_(i)?.cover?.preferredUrl&&_(i).cover.preferredUrl.trim().length>0?_(i).cover.preferredUrl:_(i)?.cover?.fallbackUrl&&_(i).cover.fallbackUrl.trim().length>0?_(i).cover.fallbackUrl:"/images/placeholder-book-cover.svg"}function p(){return!_(i)||_(i).authors.length===0?"Unknown author":_(i).authors.map(d=>d.name).join(", ")}function m(){if(!_(i)?.publication?.publishedDate)return"Unknown";const d=new Date(_(i).publication.publishedDate);return Number.isNaN(d.getTime())?String(_(i).publication.publishedDate):d.toLocaleDateString()}function w(d){return{id:d.id,slug:d.slug??d.id,title:d.title??"Untitled",authors:d.authors.map(c=>c.name),description:d.description,coverUrl:d.cover?.preferredUrl??d.cover?.s3ImagePath??d.cover?.externalImageUrl??null,fallbackCoverUrl:d.cover?.fallbackUrl??"/images/placeholder-book-cover.svg"}}function y(){const d=t.currentUrl.searchParams.get("query");if(!d)return"/search";const c=new URL("/search",window.location.origin);c.searchParams.set("query",d);const v=t.currentUrl.searchParams.get("page"),f=t.currentUrl.searchParams.get("sort"),g=t.currentUrl.searchParams.get("view"),k=t.currentUrl.searchParams.get("year");return v&&c.searchParams.set("page",v),f&&c.searchParams.set("sort",f),g&&c.searchParams.set("view",g),k&&c.searchParams.set("year",k),`${c.pathname}${c.search}`}function E(){return Object.entries(_(s)).sort(([d],[c])=>d.localeCompare(c))}kr(()=>{t.identifier&&l()}),en(()=>()=>{u&&u()});var C=Kv(),$=O(C);{var b=d=>{var c=Dv();D(d,c)},x=d=>{var c=st(),v=Pe(c);{var f=k=>{var R=jv(),I=O(R);Y(()=>V(I,_(n))),D(k,R)},g=k=>{var R=st(),I=Pe(R);{var z=B=>{var H=Gv(),fe=Pe(H),Te=U(fe,2),ye=O(Te),tt=U(ye,2),Et=O(tt),rr=O(Et),rt=U(Et,2),ge=O(rt),_e=U(rt,2),Re=O(_e),we=U(O(Re),2),Je=O(we),Fe=U(Re,2),It=U(O(Fe),2),ht=O(It),dt=U(Fe,2),pt=U(O(dt),2),nt=O(pt),A=U(dt,2),Z=U(O(A),2),q=O(Z),ce=U(_e,2);{var ae=oe=>{var me=qv(),Be=O(me);Y(()=>V(Be,_(i).description)),D(oe,me)};J(ce,oe=>{_(i).description&&oe(ae)})}var Ke=U(ce,2);{var Dt=oe=>{var me=Bv();Se(me,21,()=>_(i).categories,Qe,(Be,Me)=>{var Ue=Fv(),it=O(Ue);Y(()=>V(it,_(Me))),D(Be,Ue)}),D(oe,me)};J(Ke,oe=>{_(i).categories.length>0&&oe(Dt)})}var Rr=U(Ke,2);{var nr=oe=>{var me=Hv(),Be=U(O(me),2);Se(Be,21,E,Qe,(Me,Ue)=>{var it=xe(()=>Tc(_(Ue),2));let qt=()=>_(it)[0],fn=()=>_(it)[1];var ir=Mv(),hn=O(ir);Y(()=>{Ne(ir,"href",fn()),V(hn,qt())}),D(Me,ir)}),D(oe,me)};J(Rr,oe=>{E().length>0&&oe(nr)})}var jt=U(Te,2);{var un=oe=>{var me=Vv(),Be=U(O(me),2);Se(Be,21,()=>_(i).editions,Qe,(Me,Ue)=>{var it=Wv(),qt=O(it),fn=O(qt),ir=U(qt,2),hn=O(ir);Y(()=>{V(fn,_(Ue).identifier??_(Ue).googleBooksId??"Edition"),V(hn,`ISBN-13: ${_(Ue).isbn13??"N/A"??""}`)}),D(Me,it)}),D(oe,me)};J(jt,oe=>{_(i).editions.length>0&&oe(un)})}var ln=U(jt,2);{var yc=oe=>{var me=Xv(),Be=U(O(me),2);Se(Be,21,()=>_(o),Me=>Me.id,(Me,Ue)=>{{let it=xe(()=>w(_(Ue))),qt=xe(()=>`/book/${encodeURIComponent(_(Ue).slug??_(Ue).id)}`);Xr(Me,{get book(){return _(it)},get href(){return _(qt)}})}}),D(oe,me)};J(ln,oe=>{_(o).length>0&&oe(yc)})}Y((oe,me,Be,Me)=>{Ne(fe,"href",oe),Ne(ye,"src",me),Ne(ye,"alt",`${_(i).title??"Book"} cover`),V(rr,_(i).title??"Book details"),V(ge,Be),V(Je,Me),V(ht,_(i).publication?.publisher??"Unknown"),V(nt,_(i).publication?.language??"Unknown"),V(q,_(i).publication?.pageCount??"Unknown")},[y,h,p,m]),D(B,H)},T=B=>{var H=Jv();D(B,H)};J(I,B=>{_(i)?B(z):B(T,!1)},!0)}D(k,R)};J(v,k=>{_(n)?k(f):k(g,!1)},!0)}D(d,c)};J($,d=>{_(r)?d(b):d(x,!1)})}D(e,C),lt()}var Qv=F('<p class="text-sm text-anthracite-600 dark:text-slate-300">Loading sitemap...</p>'),em=F('<p class="rounded-lg border border-red-200 bg-red-50 p-3 text-sm text-red-700 dark:border-red-900/40 dark:bg-red-950/40 dark:text-red-200"> </p>'),tm=F("<button> </button>"),rm=F('<a class="rounded-xl border border-linen-200 bg-white p-4 text-sm shadow-sm transition hover:shadow-md dark:border-slate-700 dark:bg-slate-800"><p class="font-medium text-anthracite-900 dark:text-slate-100"> </p> <p class="text-xs text-anthracite-600 dark:text-slate-400"> </p></a>'),nm=F('<div class="grid grid-cols-1 gap-3 md:grid-cols-2"></div>'),im=F('<a class="rounded-md bg-linen-100 px-2.5 py-1 text-xs text-anthracite-700 dark:bg-slate-700 dark:text-slate-200"> </a>'),om=F('<article class="rounded-xl border border-linen-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-800"><p class="text-base font-semibold text-anthracite-900 dark:text-slate-100"> </p> <div class="mt-2 flex flex-wrap gap-2"></div></article>'),sm=F('<div class="grid grid-cols-1 gap-3"></div>'),am=F('<div class="flex flex-wrap gap-2"></div> <!> <nav class="flex items-center justify-center gap-2"><button class="rounded-md border border-linen-300 px-3 py-1.5 text-sm disabled:opacity-40 dark:border-slate-600">Prev</button> <span class="text-sm text-anthracite-700 dark:text-slate-300"> </span> <button class="rounded-md border border-linen-300 px-3 py-1.5 text-sm disabled:opacity-40 dark:border-slate-600">Next</button></nav> <p class="text-xs text-anthracite-600 dark:text-slate-400">XML sitemap: <a href="/sitemap.xml" data-no-spa="true" class="text-canvas-700 hover:text-canvas-800 dark:text-canvas-400">/sitemap.xml</a></p>',1),cm=F('<section class="mx-auto flex max-w-6xl flex-col gap-6 px-4 py-8 md:px-6"><header class="flex flex-col gap-4 rounded-xl border border-linen-200 bg-white p-5 shadow-sm dark:border-slate-700 dark:bg-slate-800 md:flex-row md:items-center md:justify-between"><div><h1 class="text-2xl font-semibold text-anthracite-900 dark:text-slate-100">Site index</h1> <p class="text-sm text-anthracite-600 dark:text-slate-300">Browse indexed books and author directories.</p></div> <div class="flex items-center gap-2"><button>Authors</button> <button>Books</button></div></header> <!></section>');function um(e,t){ut(t,!0);let r=jr(t,"view",3,"authors"),n=jr(t,"letter",3,"A"),i=jr(t,"page",3,1),o=M(!0),s=M(null),a=M(null);async function u(){L(o,!0),L(s,null);try{L(a,await Cp(r(),n(),i()),!0)}catch(b){L(s,b instanceof Error?b.message:"Unable to load sitemap",!0),L(a,null)}finally{L(o,!1)}}function l(b,x,d){Yt(`/sitemap/${b}/${encodeURIComponent(x)}/${Math.max(1,d)}`)}kr(()=>{u()});var h=cm(),p=O(h),m=U(O(p),2),w=O(m);w.__click=()=>l("authors",n(),1);var y=U(w,2);y.__click=()=>l("books",n(),1);var E=U(p,2);{var C=b=>{var x=Qv();D(b,x)},$=b=>{var x=st(),d=Pe(x);{var c=f=>{var g=em(),k=O(g);Y(()=>V(k,_(s))),D(f,g)},v=f=>{var g=st(),k=Pe(g);{var R=I=>{const z=xe(()=>_(a));var T=am(),B=Pe(T);Se(B,21,()=>_(z).letters,Qe,(ge,_e)=>{var Re=tm();Re.__click=()=>l(_(z).viewType,_(_e),1);var we=O(Re);Y(()=>{at(Re,1,`rounded-md px-2.5 py-1 text-xs ${_(_e)===_(z).activeLetter?"bg-canvas-500 text-white":"bg-linen-100 text-anthracite-700 dark:bg-slate-700 dark:text-slate-200"}`),V(we,_(_e))}),D(ge,Re)});var H=U(B,2);{var fe=ge=>{var _e=nm();Se(_e,21,()=>_(z).books,Qe,(Re,we)=>{var Je=rm(),Fe=O(Je),It=O(Fe),ht=U(Fe,2),dt=O(ht);Y((pt,nt)=>{Ne(Je,"href",pt),V(It,_(we).title),V(dt,nt)},[()=>`/book/${encodeURIComponent(_(we).slug)}`,()=>_(we).updatedAt?new Date(_(we).updatedAt).toLocaleDateString():"No update date"]),D(Re,Je)}),D(ge,_e)},Te=ge=>{var _e=sm();Se(_e,21,()=>_(z).authors,Qe,(Re,we)=>{var Je=om(),Fe=O(Je),It=O(Fe),ht=U(Fe,2);Se(ht,21,()=>_(we).books,Qe,(dt,pt)=>{var nt=im(),A=O(nt);Y(Z=>{Ne(nt,"href",Z),V(A,_(pt).title)},[()=>`/book/${encodeURIComponent(_(pt).slug)}`]),D(dt,nt)}),Y(()=>V(It,_(we).authorName)),D(Re,Je)}),D(ge,_e)};J(H,ge=>{_(z).viewType==="books"?ge(fe):ge(Te,!1)})}var ye=U(H,2),tt=O(ye);tt.__click=()=>l(_(z).viewType,_(z).activeLetter,_(z).pageNumber-1);var Et=U(tt,2),rr=O(Et),rt=U(Et,2);rt.__click=()=>l(_(z).viewType,_(z).activeLetter,_(z).pageNumber+1),Y(ge=>{tt.disabled=_(z).pageNumber<=1,V(rr,`Page ${_(z).pageNumber??""} of ${ge??""}`),rt.disabled=_(z).pageNumber>=_(z).totalPages},[()=>Math.max(1,_(z).totalPages)]),D(I,T)};J(k,I=>{_(a)&&I(R)},!0)}D(f,g)};J(d,f=>{_(s)?f(c):f(v,!1)},!0)}D(b,x)};J(E,b=>{_(o)?b(C):b($,!1)})}Y(()=>{at(w,1,`rounded-lg px-3 py-1.5 text-sm ${r()==="authors"?"bg-canvas-500 text-white":"bg-linen-100 text-anthracite-700 dark:bg-slate-700 dark:text-slate-200"}`),at(y,1,`rounded-lg px-3 py-1.5 text-sm ${r()==="books"?"bg-canvas-500 text-white":"bg-linen-100 text-anthracite-700 dark:bg-slate-700 dark:text-slate-200"}`)}),D(e,h),lt()}Bi(["click"]);var lm=F('<section class="mx-auto flex max-w-3xl flex-col items-center gap-6 px-4 py-16 text-center md:px-6"><p class="text-6xl font-semibold text-canvas-500">404</p> <h1 class="text-3xl font-semibold text-anthracite-900 dark:text-slate-100">Page not found</h1> <p class="text-sm text-anthracite-600 dark:text-slate-300">The page you requested does not exist. Try searching for a book instead.</p> <form class="flex w-full max-w-xl flex-col gap-3 sm:flex-row"><input type="search" class="w-full rounded-xl border border-linen-300 px-4 py-3 outline-none ring-canvas-300 focus:ring-2 dark:border-slate-600 dark:bg-slate-800" placeholder="Search books"/> <button type="submit" class="rounded-xl bg-canvas-500 px-5 py-3 font-medium text-white transition hover:bg-canvas-600">Search</button></form> <a href="/" class="rounded-lg border border-linen-300 px-4 py-2 text-sm text-anthracite-700 transition hover:bg-linen-100 dark:border-slate-600 dark:text-slate-300 dark:hover:bg-slate-800">Go home</a></section>');function fm(e,t){ut(t,!0);let r=M("");function n(a){a.preventDefault();const u=_(r).trim();u&&Yt(`/search?query=${encodeURIComponent(u)}`)}var i=lm(),o=U(O(i),6),s=O(o);Qr("submit",o,n),_r(s,()=>_(r),a=>L(r,a)),D(e,i),lt()}var hm=F('<div class="min-h-screen bg-linen-50 text-anthracite-900 dark:bg-slate-900 dark:text-slate-100"><!> <main class="min-h-[calc(100vh-180px)]"><!></main> <!></div>');function dm(e,t){ut(t,!0);let r=M(Ye(new URL(window.location.href))),n=xe(()=>Hu(_(r).pathname));en(()=>{const p=Pa.subscribe(w=>{L(r,w,!0)}),m=Vu();return gp(),()=>{p(),m()}});var i=hm(),o=O(i);yp(o,{get activeRoute(){return _(n).name}});var s=U(o,2),a=O(s);{var u=p=>{Lp(p,{})},l=p=>{var m=st(),w=Pe(m);{var y=C=>{Zv(C,{get currentUrl(){return _(r)}})},E=C=>{var $=st(),b=Pe($);{var x=c=>{{let v=xe(()=>_(n).params.identifier??"");Yv(c,{get currentUrl(){return _(r)},get identifier(){return _(v)}})}},d=c=>{var v=st(),f=Pe(v);{var g=R=>{{let I=xe(()=>_(n).params.view??"authors"),z=xe(()=>_(n).params.letter??"A"),T=xe(()=>_(n).params.page??1);um(R,{get view(){return _(I)},get letter(){return _(z)},get page(){return _(T)}})}},k=R=>{fm(R,{})};J(f,R=>{_(n).name==="sitemap"?R(g):R(k,!1)},!0)}D(c,v)};J(b,c=>{_(n).name==="book"?c(x):c(d,!1)},!0)}D(C,$)};J(w,C=>{_(n).name==="search"?C(y):C(E,!1)},!0)}D(p,m)};J(a,p=>{_(n).name==="home"?p(u):p(l,!1)})}var h=U(s,2);kp(h),D(e,i),lt()}Ru(dm,{target:document.getElementById("app")});
//# sourceMappingURL=app.js.map
