(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();const bi=!1;var Ni=Array.isArray,yc=Array.prototype.indexOf,Vt=Array.prototype.includes,Jr=Array.from,wc=Object.defineProperty,fr=Object.getOwnPropertyDescriptor,kc=Object.getOwnPropertyDescriptors,xc=Object.prototype,Sc=Array.prototype,Bs=Object.getPrototypeOf,to=Object.isExtensible;const pn=()=>{};function Ec(e){for(var t=0;t<e.length;t++)e[t]()}function Ms(){var e,t,r=new Promise((n,i)=>{e=n,t=i});return{promise:r,resolve:e,reject:t}}function Ic(e,t){if(Array.isArray(e))return e;if(!(Symbol.iterator in e))return Array.from(e);const r=[];for(const n of e)if(r.push(n),r.length===t)break;return r}const ve=2,Br=4,Kr=8,Hs=1<<24,ut=16,Je=32,Dt=64,Ai=128,qe=512,he=1024,me=2048,Ge=4096,Pe=8192,yt=16384,Pi=32768,Xt=65536,ro=1<<17,Ws=1<<18,Qt=1<<19,Tc=1<<20,bt=1<<25,$t=32768,yi=1<<21,zi=1<<22,wt=1<<23,hr=Symbol("$state"),Rc=Symbol(""),Wt=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Cc(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Oc(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Nc(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ac(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Pc(e){throw new Error("https://svelte.dev/e/effect_orphan")}function zc(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Uc(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function $c(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Lc(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Zc(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Dc=1,jc=2,qc=16,Fc=1,Bc=2,pe=Symbol(),Mc="http://www.w3.org/1999/xhtml";function Hc(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Wc(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Vs(e){return e===this.v}function Xs(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Gs(e){return!Xs(e,this.v)}let Vc=!1,Ue=null;function Gt(e){Ue=e}function lt(e,t=!1,r){Ue={p:Ue,i:!1,c:null,e:null,s:e,x:null,l:null}}function ft(e){var t=Ue,r=t.e;if(r!==null){t.e=null;for(var n of r)pa(n)}return t.i=!0,Ue=t.p,{}}function Js(){return!0}let Ot=[];function Ks(){var e=Ot;Ot=[],Ec(e)}function Pt(e){if(Ot.length===0&&!dr){var t=Ot;queueMicrotask(()=>{t===Ot&&Ks()})}Ot.push(e)}function Xc(){for(;Ot.length>0;)Ks()}function Ys(e){var t=K;if(t===null)return W.f|=wt,e;if((t.f&Pi)===0){if((t.f&Ai)===0)throw e;t.b.error(e)}else Jt(e,t)}function Jt(e,t){for(;t!==null;){if((t.f&Ai)!==0)try{t.b.error(e);return}catch(r){e=r}t=t.parent}throw e}const Gc=-7169;function ce(e,t){e.f=e.f&Gc|t}function Ui(e){(e.f&qe)!==0||e.deps===null?ce(e,he):ce(e,Ge)}function Qs(e){if(e!==null)for(const t of e)(t.f&ve)===0||(t.f&$t)===0||(t.f^=$t,Qs(t.deps))}function ea(e,t,r){(e.f&me)!==0?t.add(e):(e.f&Ge)!==0&&r.add(e),Qs(e.deps),ce(e,he)}const Nr=new Set;let X=null,Mr=null,We=null,Ae=[],Yr=null,wi=!1,dr=!1;class kt{committed=!1;current=new Map;previous=new Map;#t=new Set;#a=new Set;#e=0;#o=0;#s=null;#n=new Set;#r=new Set;#i=new Map;is_fork=!1;#c=!1;is_deferred(){return this.is_fork||this.#o>0}skip_effect(t){this.#i.has(t)||this.#i.set(t,{d:[],m:[]})}unskip_effect(t){var r=this.#i.get(t);if(r){this.#i.delete(t);for(var n of r.d)ce(n,me),Ve(n);for(n of r.m)ce(n,Ge),Ve(n)}}process(t){Ae=[],this.apply();var r=[],n=[];for(const i of t)this.#u(i,r,n);if(this.is_deferred()){this.#l(n),this.#l(r);for(const[i,o]of this.#i)ia(i,o)}else{for(const i of this.#t)i();this.#t.clear(),this.#e===0&&this.#f(),Mr=this,X=null,no(n),no(r),Mr=null,this.#s?.resolve()}We=null}#u(t,r,n){t.f^=he;for(var i=t.first,o=null;i!==null;){var s=i.f,a=(s&(Je|Dt))!==0,u=a&&(s&he)!==0,l=u||(s&Pe)!==0||this.#i.has(i);if(!l&&i.fn!==null){a?i.f^=he:o!==null&&(s&(Br|Kr|Hs))!==0?o.b.defer_effect(i):(s&Br)!==0?r.push(i):Sr(i)&&((s&ut)!==0&&this.#r.add(i),_r(i));var p=i.first;if(p!==null){i=p;continue}}var d=i.parent;for(i=i.next;i===null&&d!==null;)d===o&&(o=null),i=d.next,d=d.parent}}#l(t){for(var r=0;r<t.length;r+=1)ea(t[r],this.#n,this.#r)}capture(t,r){r!==pe&&!this.previous.has(t)&&this.previous.set(t,r),(t.f&wt)===0&&(this.current.set(t,t.v),We?.set(t,t.v))}activate(){X=this,this.apply()}deactivate(){X===this&&(X=null,We=null)}flush(){if(this.activate(),Ae.length>0){if(ta(),X!==null&&X!==this)return}else this.#e===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#a)t(this);this.#a.clear()}#f(){if(Nr.size>1){this.previous.clear();var t=We,r=!0;for(const i of Nr){if(i===this){r=!1;continue}const o=[];for(const[a,u]of this.current){if(i.current.has(a))if(r&&u!==i.current.get(a))i.current.set(a,u);else continue;o.push(a)}if(o.length===0)continue;const s=[...i.current.keys()].filter(a=>!this.current.has(a));if(s.length>0){var n=Ae;Ae=[];const a=new Set,u=new Map;for(const l of o)ra(l,s,a,u);if(Ae.length>0){X=i,i.apply();for(const l of Ae)i.#u(l,[],[]);i.deactivate()}Ae=n}}X=null,We=t}this.committed=!0,Nr.delete(this)}increment(t){this.#e+=1,t&&(this.#o+=1)}decrement(t){this.#e-=1,t&&(this.#o-=1),!this.#c&&(this.#c=!0,Pt(()=>{this.#c=!1,this.is_deferred()?Ae.length>0&&this.flush():this.revive()}))}revive(){for(const t of this.#n)this.#r.delete(t),ce(t,me),Ve(t);for(const t of this.#r)ce(t,Ge),Ve(t);this.flush()}oncommit(t){this.#t.add(t)}ondiscard(t){this.#a.add(t)}settled(){return(this.#s??=Ms()).promise}static ensure(){if(X===null){const t=X=new kt;Nr.add(X),dr||Pt(()=>{X===t&&t.flush()})}return X}apply(){}}function Jc(e){var t=dr;dr=!0;try{for(var r;;){if(Xc(),Ae.length===0&&(X?.flush(),Ae.length===0))return Yr=null,r;ta()}}finally{dr=t}}function ta(){wi=!0;var e=null;try{for(var t=0;Ae.length>0;){var r=kt.ensure();if(t++>1e3){var n,i;Kc()}r.process(Ae),xt.clear()}}finally{wi=!1,Yr=null}}function Kc(){try{zc()}catch(e){Jt(e,Yr)}}let st=null;function no(e){var t=e.length;if(t!==0){for(var r=0;r<t;){var n=e[r++];if((n.f&(yt|Pe))===0&&Sr(n)&&(st=new Set,_r(n),n.deps===null&&n.first===null&&n.nodes===null&&(n.teardown===null&&n.ac===null?_a(n):n.fn=null),st?.size>0)){xt.clear();for(const i of st){if((i.f&(yt|Pe))!==0)continue;const o=[i];let s=i.parent;for(;s!==null;)st.has(s)&&(st.delete(s),o.push(s)),s=s.parent;for(let a=o.length-1;a>=0;a--){const u=o[a];(u.f&(yt|Pe))===0&&_r(u)}}st.clear()}}st=null}}function ra(e,t,r,n){if(!r.has(e)&&(r.add(e),e.reactions!==null))for(const i of e.reactions){const o=i.f;(o&ve)!==0?ra(i,t,r,n):(o&(zi|ut))!==0&&(o&me)===0&&na(i,t,n)&&(ce(i,me),Ve(i))}}function na(e,t,r){const n=r.get(e);if(n!==void 0)return n;if(e.deps!==null)for(const i of e.deps){if(Vt.call(t,i))return!0;if((i.f&ve)!==0&&na(i,t,r))return r.set(i,!0),!0}return r.set(e,!1),!1}function Ve(e){for(var t=Yr=e;t.parent!==null;){t=t.parent;var r=t.f;if(wi&&t===K&&(r&ut)!==0&&(r&Ws)===0)return;if((r&(Dt|Je))!==0){if((r&he)===0)return;t.f^=he}}Ae.push(t)}function ia(e,t){if(!((e.f&Je)!==0&&(e.f&he)!==0)){(e.f&me)!==0?t.d.push(e):(e.f&Ge)!==0&&t.m.push(e),ce(e,he);for(var r=e.first;r!==null;)ia(r,t),r=r.next}}function Yc(e){let t=0,r=Lt(0),n;return()=>{Zi()&&(_(r),va(()=>(t===0&&(n=Fi(()=>e(()=>pr(r)))),t+=1,()=>{Pt(()=>{t-=1,t===0&&(n?.(),n=void 0,pr(r))})})))}}var Qc=Xt|Qt|Ai;function eu(e,t,r){new tu(e,t,r)}class tu{parent;is_pending=!1;#t;#a=null;#e;#o;#s;#n=null;#r=null;#i=null;#c=null;#u=null;#l=0;#f=0;#p=!1;#d=!1;#v=new Set;#m=new Set;#h=null;#w=Yc(()=>(this.#h=Lt(this.#l),()=>{this.#h=null}));constructor(t,r,n){this.#t=t,this.#e=r,this.#o=n,this.parent=K.b,this.is_pending=!!this.#e.pending,this.#s=ji(()=>{K.b=this;{var i=this.#b();try{this.#n=je(()=>n(i))}catch(o){this.error(o)}this.#f>0?this.#_():this.is_pending=!1}return()=>{this.#u?.remove()}},Qc)}#k(){try{this.#n=je(()=>this.#o(this.#t))}catch(t){this.error(t)}}#x(){const t=this.#e.pending;t&&(this.#r=je(()=>t(this.#t)),Pt(()=>{var r=this.#b();this.#n=this.#g(()=>(kt.ensure(),je(()=>this.#o(r)))),this.#f>0?this.#_():(zt(this.#r,()=>{this.#r=null}),this.is_pending=!1)}))}#b(){var t=this.#t;return this.is_pending&&(this.#u=St(),this.#t.before(this.#u),t=this.#u),t}defer_effect(t){ea(t,this.#v,this.#m)}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!this.#e.pending}#g(t){var r=K,n=W,i=Ue;et(this.#s),Be(this.#s),Gt(this.#s.ctx);try{return t()}catch(o){return Ys(o),null}finally{et(r),Be(n),Gt(i)}}#_(){const t=this.#e.pending;this.#n!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#u),wa(this.#n,this.#c)),this.#r===null&&(this.#r=je(()=>t(this.#t)))}#y(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#y(t);return}if(this.#f+=t,this.#f===0){this.is_pending=!1;for(const r of this.#v)ce(r,me),Ve(r);for(const r of this.#m)ce(r,Ge),Ve(r);this.#v.clear(),this.#m.clear(),this.#r&&zt(this.#r,()=>{this.#r=null}),this.#c&&(this.#t.before(this.#c),this.#c=null)}}update_pending_count(t){this.#y(t),this.#l+=t,!(!this.#h||this.#p)&&(this.#p=!0,Pt(()=>{this.#p=!1,this.#h&&Kt(this.#h,this.#l)}))}get_effect_pending(){return this.#w(),_(this.#h)}error(t){var r=this.#e.onerror;let n=this.#e.failed;if(this.#d||!r&&!n)throw t;this.#n&&(Se(this.#n),this.#n=null),this.#r&&(Se(this.#r),this.#r=null),this.#i&&(Se(this.#i),this.#i=null);var i=!1,o=!1;const s=()=>{if(i){Wc();return}i=!0,o&&Zc(),kt.ensure(),this.#l=0,this.#i!==null&&zt(this.#i,()=>{this.#i=null}),this.is_pending=this.has_pending_snippet(),this.#n=this.#g(()=>(this.#d=!1,je(()=>this.#o(this.#t)))),this.#f>0?this.#_():this.is_pending=!1};Pt(()=>{try{o=!0,r?.(t,s),o=!1}catch(a){Jt(a,this.#s&&this.#s.parent)}n&&(this.#i=this.#g(()=>{kt.ensure(),this.#d=!0;try{return je(()=>{n(this.#t,()=>t,()=>s)})}catch(a){return Jt(a,this.#s.parent),null}finally{this.#d=!1}}))})}}function ru(e,t,r,n){const i=$i;var o=e.filter(v=>!v.settled);if(r.length===0&&o.length===0){n(t.map(i));return}var s=X,a=K,u=nu(),l=o.length===1?o[0].promise:o.length>1?Promise.all(o.map(v=>v.promise)):null;function p(v){u();try{n(v)}catch(y){(a.f&yt)===0&&Jt(y,a)}s?.deactivate(),ki()}if(r.length===0){l.then(()=>p(t.map(i)));return}function d(){u(),Promise.all(r.map(v=>iu(v))).then(v=>p([...t.map(i),...v])).catch(v=>Jt(v,a))}l?l.then(d):d()}function nu(){var e=K,t=W,r=Ue,n=X;return function(o=!0){et(e),Be(t),Gt(r),o&&n?.activate()}}function ki(){et(null),Be(null),Gt(null)}function $i(e){var t=ve|me,r=W!==null&&(W.f&ve)!==0?W:null;return K!==null&&(K.f|=Qt),{ctx:Ue,deps:null,effects:null,equals:Vs,f:t,fn:e,reactions:null,rv:0,v:pe,wv:0,parent:r??K,ac:null}}function iu(e,t,r){let n=K;n===null&&Oc();var i=n.b,o=void 0,s=Lt(pe),a=!W,u=new Map;return gu(()=>{var l=Ms();o=l.promise;try{Promise.resolve(e()).then(l.resolve,l.reject).then(()=>{p===X&&p.committed&&p.deactivate(),ki()})}catch(y){l.reject(y),ki()}var p=X;if(a){var d=i.is_rendered();i.update_pending_count(1),p.increment(d),u.get(p)?.reject(Wt),u.delete(p),u.set(p,l)}const v=(y,k=void 0)=>{if(p.activate(),k)k!==Wt&&(s.f|=wt,Kt(s,k));else{(s.f&wt)!==0&&(s.f^=wt),Kt(s,y);for(const[E,C]of u){if(u.delete(E),E===p)break;C.reject(Wt)}}a&&(i.update_pending_count(-1),p.decrement(d))};l.promise.then(v,y=>v(null,y||"unknown"))}),Di(()=>{for(const l of u.values())l.reject(Wt)}),new Promise(l=>{function p(d){function v(){d===o?l(s):p(o)}d.then(v,v)}p(o)})}function ke(e){const t=$i(e);return ka(t),t}function ou(e){const t=$i(e);return t.equals=Gs,t}function oa(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)Se(t[r])}}function su(e){for(var t=e.parent;t!==null;){if((t.f&ve)===0)return(t.f&yt)===0?t:null;t=t.parent}return null}function Li(e){var t,r=K;et(su(e));try{e.f&=~$t,oa(e),t=Ia(e)}finally{et(r)}return t}function sa(e){var t=Li(e);if(!e.equals(t)&&(e.wv=Sa(),(!X?.is_fork||e.deps===null)&&(e.v=t,e.deps===null))){ce(e,he);return}Zt||(We!==null?(Zi()||X?.is_fork)&&We.set(e,t):Ui(e))}let xi=new Set;const xt=new Map;let aa=!1;function Lt(e,t){var r={f:0,v:e,reactions:null,equals:Vs,rv:0,wv:0};return r}function M(e,t){const r=Lt(e);return ka(r),r}function au(e,t=!1,r=!0){const n=Lt(e);return t||(n.equals=Gs),n}function L(e,t,r=!1){W!==null&&(!Xe||(W.f&ro)!==0)&&Js()&&(W.f&(ve|ut|zi|ro))!==0&&(Fe===null||!Vt.call(Fe,e))&&Lc();let n=r?Ye(t):t;return Kt(e,n)}function Kt(e,t){if(!e.equals(t)){var r=e.v;Zt?xt.set(e,t):xt.set(e,r),e.v=t;var n=kt.ensure();if(n.capture(e,r),(e.f&ve)!==0){const i=e;(e.f&me)!==0&&Li(i),Ui(i)}e.wv=Sa(),ca(e,me),K!==null&&(K.f&he)!==0&&(K.f&(Je|Dt))===0&&(De===null?yu([e]):De.push(e)),!n.is_fork&&xi.size>0&&!aa&&cu()}return t}function cu(){aa=!1;for(const e of xi)(e.f&he)!==0&&ce(e,Ge),Sr(e)&&_r(e);xi.clear()}function pr(e){L(e,e.v+1)}function ca(e,t){var r=e.reactions;if(r!==null)for(var n=r.length,i=0;i<n;i++){var o=r[i],s=o.f,a=(s&me)===0;if(a&&ce(o,t),(s&ve)!==0){var u=o;We?.delete(u),(s&$t)===0&&(s&qe&&(o.f|=$t),ca(u,Ge))}else a&&((s&ut)!==0&&st!==null&&st.add(o),Ve(o))}}function Ye(e){if(typeof e!="object"||e===null||hr in e)return e;const t=Bs(e);if(t!==xc&&t!==Sc)return e;var r=new Map,n=Ni(e),i=M(0),o=Ut,s=a=>{if(Ut===o)return a();var u=W,l=Ut;Be(null),co(o);var p=a();return Be(u),co(l),p};return n&&r.set("length",M(e.length)),new Proxy(e,{defineProperty(a,u,l){(!("value"in l)||l.configurable===!1||l.enumerable===!1||l.writable===!1)&&Uc();var p=r.get(u);return p===void 0?p=s(()=>{var d=M(l.value);return r.set(u,d),d}):L(p,l.value,!0),!0},deleteProperty(a,u){var l=r.get(u);if(l===void 0){if(u in a){const p=s(()=>M(pe));r.set(u,p),pr(i)}}else L(l,pe),pr(i);return!0},get(a,u,l){if(u===hr)return e;var p=r.get(u),d=u in a;if(p===void 0&&(!d||fr(a,u)?.writable)&&(p=s(()=>{var y=Ye(d?a[u]:pe),k=M(y);return k}),r.set(u,p)),p!==void 0){var v=_(p);return v===pe?void 0:v}return Reflect.get(a,u,l)},getOwnPropertyDescriptor(a,u){var l=Reflect.getOwnPropertyDescriptor(a,u);if(l&&"value"in l){var p=r.get(u);p&&(l.value=_(p))}else if(l===void 0){var d=r.get(u),v=d?.v;if(d!==void 0&&v!==pe)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return l},has(a,u){if(u===hr)return!0;var l=r.get(u),p=l!==void 0&&l.v!==pe||Reflect.has(a,u);if(l!==void 0||K!==null&&(!p||fr(a,u)?.writable)){l===void 0&&(l=s(()=>{var v=p?Ye(a[u]):pe,y=M(v);return y}),r.set(u,l));var d=_(l);if(d===pe)return!1}return p},set(a,u,l,p){var d=r.get(u),v=u in a;if(n&&u==="length")for(var y=l;y<d.v;y+=1){var k=r.get(y+"");k!==void 0?L(k,pe):y in a&&(k=s(()=>M(pe)),r.set(y+"",k))}if(d===void 0)(!v||fr(a,u)?.writable)&&(d=s(()=>M(void 0)),L(d,Ye(l)),r.set(u,d));else{v=d.v!==pe;var E=s(()=>Ye(l));L(d,E)}var C=Reflect.getOwnPropertyDescriptor(a,u);if(C?.set&&C.set.call(p,l),!v){if(n&&typeof u=="string"){var U=r.get("length"),b=Number(u);Number.isInteger(b)&&b>=U.v&&L(U,b+1)}pr(i)}return!0},ownKeys(a){_(i);var u=Reflect.ownKeys(a).filter(d=>{var v=r.get(d);return v===void 0||v.v!==pe});for(var[l,p]of r)p.v!==pe&&!(l in a)&&u.push(l);return u},setPrototypeOf(){$c()}})}function io(e){try{if(e!==null&&typeof e=="object"&&hr in e)return e[hr]}catch{}return e}function uu(e,t){return Object.is(io(e),io(t))}var oo,ua,la,fa;function lu(){if(oo===void 0){oo=window,ua=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,r=Text.prototype;la=fr(t,"firstChild").get,fa=fr(t,"nextSibling").get,to(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),to(r)&&(r.__t=void 0)}}function St(e=""){return document.createTextNode(e)}function Hr(e){return la.call(e)}function kr(e){return fa.call(e)}function O(e,t){return Hr(e)}function ze(e,t=!1){{var r=Hr(e);return r instanceof Comment&&r.data===""?kr(r):r}}function $(e,t=1,r=!1){let n=e;for(;t--;)n=kr(n);return n}function fu(e){e.textContent=""}function ha(){return!1}let so=!1;function hu(){so||(so=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function Qr(e){var t=W,r=K;Be(null),et(null);try{return e()}finally{Be(t),et(r)}}function da(e,t,r,n=r){e.addEventListener(t,()=>Qr(r));const i=e.__on_r;i?e.__on_r=()=>{i(),n(!0)}:e.__on_r=()=>n(!0),hu()}function du(e){K===null&&(W===null&&Pc(),Ac()),Zt&&Nc()}function pu(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function ht(e,t,r){var n=K;n!==null&&(n.f&Pe)!==0&&(e|=Pe);var i={ctx:Ue,deps:null,nodes:null,f:e|me|qe,first:null,fn:t,last:null,next:null,parent:n,b:n&&n.b,prev:null,teardown:null,wv:0,ac:null};if(r)try{_r(i),i.f|=Pi}catch(a){throw Se(i),a}else t!==null&&Ve(i);var o=i;if(r&&o.deps===null&&o.teardown===null&&o.nodes===null&&o.first===o.last&&(o.f&Qt)===0&&(o=o.first,(e&ut)!==0&&(e&Xt)!==0&&o!==null&&(o.f|=Xt)),o!==null&&(o.parent=n,n!==null&&pu(o,n),W!==null&&(W.f&ve)!==0&&(e&Dt)===0)){var s=W;(s.effects??=[]).push(o)}return i}function Zi(){return W!==null&&!Xe}function Di(e){const t=ht(Kr,null,!1);return ce(t,he),t.teardown=e,t}function xr(e){du();var t=K.f,r=!W&&(t&Je)!==0&&(t&Pi)===0;if(r){var n=Ue;(n.e??=[]).push(e)}else return pa(e)}function pa(e){return ht(Br|Tc,e,!1)}function vu(e){kt.ensure();const t=ht(Dt|Qt,e,!0);return(r={})=>new Promise(n=>{r.outro?zt(t,()=>{Se(t),n(void 0)}):(Se(t),n(void 0))})}function mu(e){return ht(Br,e,!1)}function gu(e){return ht(zi|Qt,e,!0)}function va(e,t=0){return ht(Kr|t,e,!0)}function Y(e,t=[],r=[],n=[]){ru(n,t,r,i=>{ht(Kr,()=>e(...i.map(_)),!0)})}function ji(e,t=0){var r=ht(ut|t,e,!0);return r}function je(e){return ht(Je|Qt,e,!0)}function ma(e){var t=e.teardown;if(t!==null){const r=Zt,n=W;ao(!0),Be(null);try{t.call(null)}finally{ao(r),Be(n)}}}function ga(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){const i=r.ac;i!==null&&Qr(()=>{i.abort(Wt)});var n=r.next;(r.f&Dt)!==0?r.parent=null:Se(r,t),r=n}}function _u(e){for(var t=e.first;t!==null;){var r=t.next;(t.f&Je)===0&&Se(t),t=r}}function Se(e,t=!0){var r=!1;(t||(e.f&Ws)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(bu(e.nodes.start,e.nodes.end),r=!0),ga(e,t&&!r),Wr(e,0),ce(e,yt);var n=e.nodes&&e.nodes.t;if(n!==null)for(const o of n)o.stop();ma(e);var i=e.parent;i!==null&&i.first!==null&&_a(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function bu(e,t){for(;e!==null;){var r=e===t?null:kr(e);e.remove(),e=r}}function _a(e){var t=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=r))}function zt(e,t,r=!0){var n=[];ba(e,n,!0);var i=()=>{r&&Se(e),t&&t()},o=n.length;if(o>0){var s=()=>--o||i();for(var a of n)a.out(s)}else i()}function ba(e,t,r){if((e.f&Pe)===0){e.f^=Pe;var n=e.nodes&&e.nodes.t;if(n!==null)for(const a of n)(a.is_global||r)&&t.push(a);for(var i=e.first;i!==null;){var o=i.next,s=(i.f&Xt)!==0||(i.f&Je)!==0&&(e.f&ut)!==0;ba(i,t,s?r:!1),i=o}}}function qi(e){ya(e,!0)}function ya(e,t){if((e.f&Pe)!==0){e.f^=Pe,(e.f&he)===0&&(ce(e,me),Ve(e));for(var r=e.first;r!==null;){var n=r.next,i=(r.f&Xt)!==0||(r.f&Je)!==0;ya(r,i?t:!1),r=n}var o=e.nodes&&e.nodes.t;if(o!==null)for(const s of o)(s.is_global||t)&&s.in()}}function wa(e,t){if(e.nodes)for(var r=e.nodes.start,n=e.nodes.end;r!==null;){var i=r===n?null:kr(r);t.append(r),r=i}}let jr=!1,Zt=!1;function ao(e){Zt=e}let W=null,Xe=!1;function Be(e){W=e}let K=null;function et(e){K=e}let Fe=null;function ka(e){W!==null&&(Fe===null?Fe=[e]:Fe.push(e))}let we=null,Ne=0,De=null;function yu(e){De=e}let xa=1,Nt=0,Ut=Nt;function co(e){Ut=e}function Sa(){return++xa}function Sr(e){var t=e.f;if((t&me)!==0)return!0;if(t&ve&&(e.f&=~$t),(t&Ge)!==0){for(var r=e.deps,n=r.length,i=0;i<n;i++){var o=r[i];if(Sr(o)&&sa(o),o.wv>e.wv)return!0}(t&qe)!==0&&We===null&&ce(e,he)}return!1}function Ea(e,t,r=!0){var n=e.reactions;if(n!==null&&!(Fe!==null&&Vt.call(Fe,e)))for(var i=0;i<n.length;i++){var o=n[i];(o.f&ve)!==0?Ea(o,t,!1):t===o&&(r?ce(o,me):(o.f&he)!==0&&ce(o,Ge),Ve(o))}}function Ia(e){var t=we,r=Ne,n=De,i=W,o=Fe,s=Ue,a=Xe,u=Ut,l=e.f;we=null,Ne=0,De=null,W=(l&(Je|Dt))===0?e:null,Fe=null,Gt(e.ctx),Xe=!1,Ut=++Nt,e.ac!==null&&(Qr(()=>{e.ac.abort(Wt)}),e.ac=null);try{e.f|=yi;var p=e.fn,d=p(),v=e.deps,y=X?.is_fork;if(we!==null){var k;if(y||Wr(e,Ne),v!==null&&Ne>0)for(v.length=Ne+we.length,k=0;k<we.length;k++)v[Ne+k]=we[k];else e.deps=v=we;if(Zi()&&(e.f&qe)!==0)for(k=Ne;k<v.length;k++)(v[k].reactions??=[]).push(e)}else!y&&v!==null&&Ne<v.length&&(Wr(e,Ne),v.length=Ne);if(Js()&&De!==null&&!Xe&&v!==null&&(e.f&(ve|Ge|me))===0)for(k=0;k<De.length;k++)Ea(De[k],e);if(i!==null&&i!==e){if(Nt++,i.deps!==null)for(let E=0;E<r;E+=1)i.deps[E].rv=Nt;if(t!==null)for(const E of t)E.rv=Nt;De!==null&&(n===null?n=De:n.push(...De))}return(e.f&wt)!==0&&(e.f^=wt),d}catch(E){return Ys(E)}finally{e.f^=yi,we=t,Ne=r,De=n,W=i,Fe=o,Gt(s),Xe=a,Ut=u}}function wu(e,t){let r=t.reactions;if(r!==null){var n=yc.call(r,e);if(n!==-1){var i=r.length-1;i===0?r=t.reactions=null:(r[n]=r[i],r.pop())}}if(r===null&&(t.f&ve)!==0&&(we===null||!Vt.call(we,t))){var o=t;(o.f&qe)!==0&&(o.f^=qe,o.f&=~$t),Ui(o),oa(o),Wr(o,0)}}function Wr(e,t){var r=e.deps;if(r!==null)for(var n=t;n<r.length;n++)wu(e,r[n])}function _r(e){var t=e.f;if((t&yt)===0){ce(e,he);var r=K,n=jr;K=e,jr=!0;try{(t&(ut|Hs))!==0?_u(e):ga(e),ma(e);var i=Ia(e);e.teardown=typeof i=="function"?i:null,e.wv=xa;var o;bi&&Vc&&(e.f&me)!==0&&e.deps}finally{jr=n,K=r}}}async function ku(){await Promise.resolve(),Jc()}function _(e){var t=e.f,r=(t&ve)!==0;if(W!==null&&!Xe){var n=K!==null&&(K.f&yt)!==0;if(!n&&(Fe===null||!Vt.call(Fe,e))){var i=W.deps;if((W.f&yi)!==0)e.rv<Nt&&(e.rv=Nt,we===null&&i!==null&&i[Ne]===e?Ne++:we===null?we=[e]:we.push(e));else{(W.deps??=[]).push(e);var o=e.reactions;o===null?e.reactions=[W]:Vt.call(o,W)||o.push(W)}}}if(Zt&&xt.has(e))return xt.get(e);if(r){var s=e;if(Zt){var a=s.v;return((s.f&he)===0&&s.reactions!==null||Ra(s))&&(a=Li(s)),xt.set(s,a),a}var u=(s.f&qe)===0&&!Xe&&W!==null&&(jr||(W.f&qe)!==0),l=s.deps===null;Sr(s)&&(u&&(s.f|=qe),sa(s)),u&&!l&&Ta(s)}if(We?.has(e))return We.get(e);if((e.f&wt)!==0)throw e.v;return e.v}function Ta(e){if(e.deps!==null){e.f|=qe;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&ve)!==0&&(t.f&qe)===0&&Ta(t)}}function Ra(e){if(e.v===pe)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(xt.has(t)||(t.f&ve)!==0&&Ra(t))return!0;return!1}function Fi(e){var t=Xe;try{return Xe=!0,e()}finally{Xe=t}}const xu=["touchstart","touchmove"];function Su(e){return xu.includes(e)}const Ca=new Set,Si=new Set;function Eu(e,t,r,n={}){function i(o){if(n.capture||cr.call(t,o),!o.cancelBubble)return Qr(()=>r?.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Pt(()=>{t.addEventListener(e,i,n)}):t.addEventListener(e,i,n),i}function en(e,t,r,n,i){var o={capture:n,passive:i},s=Eu(e,t,r,o);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Di(()=>{t.removeEventListener(e,s,o)})}function Bi(e){for(var t=0;t<e.length;t++)Ca.add(e[t]);for(var r of Si)r(e)}let uo=null;function cr(e){var t=this,r=t.ownerDocument,n=e.type,i=e.composedPath?.()||[],o=i[0]||e.target;uo=e;var s=0,a=uo===e&&e.__root;if(a){var u=i.indexOf(a);if(u!==-1&&(t===document||t===window)){e.__root=t;return}var l=i.indexOf(t);if(l===-1)return;u<=l&&(s=u)}if(o=i[s]||e.target,o!==t){wc(e,"currentTarget",{configurable:!0,get(){return o||r}});var p=W,d=K;Be(null),et(null);try{for(var v,y=[];o!==null;){var k=o.assignedSlot||o.parentNode||o.host||null;try{var E=o["__"+n];E!=null&&(!o.disabled||e.target===o)&&E.call(o,e)}catch(C){v?y.push(C):v=C}if(e.cancelBubble||k===t||k===null)break;o=k}if(v){for(let C of y)queueMicrotask(()=>{throw C});throw v}}finally{e.__root=t,delete e.currentTarget,Be(p),et(d)}}}function Iu(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Ei(e,t){var r=K;r.nodes===null&&(r.nodes={start:e,end:t,a:null,t:null})}function F(e,t){var r=(t&Fc)!==0,n=(t&Bc)!==0,i,o=!e.startsWith("<!>");return()=>{i===void 0&&(i=Iu(o?e:"<!>"+e),r||(i=Hr(i)));var s=n||ua?document.importNode(i,!0):i.cloneNode(!0);if(r){var a=Hr(s),u=s.lastChild;Ei(a,u)}else Ei(s,s);return s}}function at(){var e=document.createDocumentFragment(),t=document.createComment(""),r=St();return e.append(t,r),Ei(t,r),e}function D(e,t){e!==null&&e.before(t)}function V(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??=e.nodeValue)&&(e.__t=r,e.nodeValue=r+"")}function Tu(e,t){return Ru(e,t)}const Mt=new Map;function Ru(e,{target:t,anchor:r,props:n={},events:i,context:o,intro:s=!0}){lu();var a=new Set,u=d=>{for(var v=0;v<d.length;v++){var y=d[v];if(!a.has(y)){a.add(y);var k=Su(y);t.addEventListener(y,cr,{passive:k});var E=Mt.get(y);E===void 0?(document.addEventListener(y,cr,{passive:k}),Mt.set(y,1)):Mt.set(y,E+1)}}};u(Jr(Ca)),Si.add(u);var l=void 0,p=vu(()=>{var d=r??t.appendChild(St());return eu(d,{pending:()=>{}},v=>{if(o){lt({});var y=Ue;y.c=o}i&&(n.$$events=i),l=e(v,n)||{},o&&ft()}),()=>{for(var v of a){t.removeEventListener(v,cr);var y=Mt.get(v);--y===0?(document.removeEventListener(v,cr),Mt.delete(v)):Mt.set(v,y)}Si.delete(u),d!==r&&d.parentNode?.removeChild(d)}});return Cu.set(l,p),l}let Cu=new WeakMap;class Ou{anchor;#t=new Map;#a=new Map;#e=new Map;#o=new Set;#s=!0;constructor(t,r=!0){this.anchor=t,this.#s=r}#n=()=>{var t=X;if(this.#t.has(t)){var r=this.#t.get(t),n=this.#a.get(r);if(n)qi(n),this.#o.delete(r);else{var i=this.#e.get(r);i&&(this.#a.set(r,i.effect),this.#e.delete(r),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),n=i.effect)}for(const[o,s]of this.#t){if(this.#t.delete(o),o===t)break;const a=this.#e.get(s);a&&(Se(a.effect),this.#e.delete(s))}for(const[o,s]of this.#a){if(o===r||this.#o.has(o))continue;const a=()=>{if(Array.from(this.#t.values()).includes(o)){var l=document.createDocumentFragment();wa(s,l),l.append(St()),this.#e.set(o,{effect:s,fragment:l})}else Se(s);this.#o.delete(o),this.#a.delete(o)};this.#s||!n?(this.#o.add(o),zt(s,a,!1)):a()}}};#r=t=>{this.#t.delete(t);const r=Array.from(this.#t.values());for(const[n,i]of this.#e)r.includes(n)||(Se(i.effect),this.#e.delete(n))};ensure(t,r){var n=X,i=ha();if(r&&!this.#a.has(t)&&!this.#e.has(t))if(i){var o=document.createDocumentFragment(),s=St();o.append(s),this.#e.set(t,{effect:je(()=>r(s)),fragment:o})}else this.#a.set(t,je(()=>r(this.anchor)));if(this.#t.set(n,t),i){for(const[a,u]of this.#a)a===t?n.unskip_effect(u):n.skip_effect(u);for(const[a,u]of this.#e)a===t?n.unskip_effect(u.effect):n.skip_effect(u.effect);n.oncommit(this.#n),n.ondiscard(this.#r)}else this.#n()}}function J(e,t,r=!1){var n=new Ou(e),i=r?Xt:0;function o(s,a){n.ensure(s,a)}ji(()=>{var s=!1;t((a,u=!0)=>{s=!0,o(u,a)}),s||o(!1,null)},i)}function Qe(e,t){return t}function Nu(e,t,r){for(var n=[],i=t.length,o,s=t.length,a=0;a<i;a++){let d=t[a];zt(d,()=>{if(o){if(o.pending.delete(d),o.done.add(d),o.pending.size===0){var v=e.outrogroups;Ii(Jr(o.done)),v.delete(o),v.size===0&&(e.outrogroups=null)}}else s-=1},!1)}if(s===0){var u=n.length===0&&r!==null;if(u){var l=r,p=l.parentNode;fu(p),p.append(l),e.items.clear()}Ii(t,!u)}else o={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(o)}function Ii(e,t=!0){for(var r=0;r<e.length;r++)Se(e[r],t)}var lo;function xe(e,t,r,n,i,o=null){var s=e,a=new Map;{var u=e;s=u.appendChild(St())}var l=null,p=ou(()=>{var C=r();return Ni(C)?C:C==null?[]:Jr(C)}),d,v=!0;function y(){E.fallback=l,Au(E,d,s,t,n),l!==null&&(d.length===0?(l.f&bt)===0?qi(l):(l.f^=bt,ur(l,null,s)):zt(l,()=>{l=null}))}var k=ji(()=>{d=_(p);for(var C=d.length,U=new Set,b=X,x=ha(),f=0;f<C;f+=1){var c=d[f],m=n(c,f),h=v?null:a.get(m);h?(h.v&&Kt(h.v,c),h.i&&Kt(h.i,f),x&&b.unskip_effect(h.e)):(h=Pu(a,v?s:lo??=St(),c,m,f,i,t,r),v||(h.e.f|=bt),a.set(m,h)),U.add(m)}if(C===0&&o&&!l&&(v?l=je(()=>o(s)):(l=je(()=>o(lo??=St())),l.f|=bt)),!v)if(x){for(const[g,w]of a)U.has(g)||b.skip_effect(w.e);b.oncommit(y),b.ondiscard(()=>{})}else y();_(p)}),E={effect:k,items:a,outrogroups:null,fallback:l};v=!1}function sr(e){for(;e!==null&&(e.f&Je)===0;)e=e.next;return e}function Au(e,t,r,n,i){var o=t.length,s=e.items,a=sr(e.effect.first),u,l=null,p=[],d=[],v,y,k,E;for(E=0;E<o;E+=1){if(v=t[E],y=i(v,E),k=s.get(y).e,e.outrogroups!==null)for(const g of e.outrogroups)g.pending.delete(k),g.done.delete(k);if((k.f&bt)!==0)if(k.f^=bt,k===a)ur(k,null,r);else{var C=l?l.next:a;k===e.effect.last&&(e.effect.last=k.prev),k.prev&&(k.prev.next=k.next),k.next&&(k.next.prev=k.prev),_t(e,l,k),_t(e,k,C),ur(k,C,r),l=k,p=[],d=[],a=sr(l.next);continue}if((k.f&Pe)!==0&&qi(k),k!==a){if(u!==void 0&&u.has(k)){if(p.length<d.length){var U=d[0],b;l=U.prev;var x=p[0],f=p[p.length-1];for(b=0;b<p.length;b+=1)ur(p[b],U,r);for(b=0;b<d.length;b+=1)u.delete(d[b]);_t(e,x.prev,f.next),_t(e,l,x),_t(e,f,U),a=U,l=f,E-=1,p=[],d=[]}else u.delete(k),ur(k,a,r),_t(e,k.prev,k.next),_t(e,k,l===null?e.effect.first:l.next),_t(e,l,k),l=k;continue}for(p=[],d=[];a!==null&&a!==k;)(u??=new Set).add(a),d.push(a),a=sr(a.next);if(a===null)continue}(k.f&bt)===0&&p.push(k),l=k,a=sr(k.next)}if(e.outrogroups!==null){for(const g of e.outrogroups)g.pending.size===0&&(Ii(Jr(g.done)),e.outrogroups?.delete(g));e.outrogroups.size===0&&(e.outrogroups=null)}if(a!==null||u!==void 0){var c=[];if(u!==void 0)for(k of u)(k.f&Pe)===0&&c.push(k);for(;a!==null;)(a.f&Pe)===0&&a!==e.fallback&&c.push(a),a=sr(a.next);var m=c.length;if(m>0){var h=o===0?r:null;Nu(e,c,h)}}}function Pu(e,t,r,n,i,o,s,a){var u=(s&Dc)!==0?(s&qc)===0?au(r,!1,!1):Lt(r):null,l=(s&jc)!==0?Lt(i):null;return{v:u,i:l,e:je(()=>(o(t,u??r,l??i,a),()=>{e.delete(n)}))}}function ur(e,t,r){if(e.nodes)for(var n=e.nodes.start,i=e.nodes.end,o=t&&(t.f&bt)===0?t.nodes.start:r;n!==null;){var s=kr(n);if(o.before(n),n===i)return;n=s}}function _t(e,t,r){t===null?e.effect.first=r:t.next=r,r===null?e.effect.last=t:r.prev=t}function Oa(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=Oa(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function zu(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=Oa(e))&&(n&&(n+=" "),n+=t);return n}function Uu(e){return typeof e=="object"?zu(e):e??""}function $u(e,t,r){var n=e==null?"":""+e;return n===""?null:n}function ct(e,t,r,n,i,o){var s=e.__className;if(s!==r||s===void 0){var a=$u(r);a==null?e.removeAttribute("class"):e.className=a,e.__className=r}return o}function Mi(e,t,r=!1){if(e.multiple){if(t==null)return;if(!Ni(t))return Hc();for(var n of e.options)n.selected=t.includes(vr(n));return}for(n of e.options){var i=vr(n);if(uu(i,t)){n.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function Na(e){var t=new MutationObserver(()=>{Mi(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Di(()=>{t.disconnect()})}function vn(e,t,r=t){var n=new WeakSet,i=!0;da(e,"change",o=>{var s=o?"[selected]":":checked",a;if(e.multiple)a=[].map.call(e.querySelectorAll(s),vr);else{var u=e.querySelector(s)??e.querySelector("option:not([disabled])");a=u&&vr(u)}r(a),X!==null&&n.add(X)}),mu(()=>{var o=t();if(e===document.activeElement){var s=Mr??X;if(n.has(s))return}if(Mi(e,o,i),i&&o===void 0){var a=e.querySelector(":checked");a!==null&&(o=vr(a),r(o))}e.__value=o,i=!1}),Na(e)}function vr(e){return"__value"in e?e.__value:e.value}const Lu=Symbol("is custom element"),Zu=Symbol("is html");function be(e,t,r,n){var i=Du(e);i[t]!==(i[t]=r)&&(t==="loading"&&(e[Rc]=r),r==null?e.removeAttribute(t):typeof r!="string"&&ju(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function Du(e){return e.__attributes??={[Lu]:e.nodeName.includes("-"),[Zu]:e.namespaceURI===Mc}}var fo=new Map;function ju(e){var t=e.getAttribute("is")||e.nodeName,r=fo.get(t);if(r)return r;fo.set(t,r=[]);for(var n,i=e,o=Element.prototype;o!==i;){n=kc(i);for(var s in n)n[s].set&&r.push(s);i=Bs(i)}return r}function br(e,t,r=t){var n=new WeakSet;da(e,"input",async i=>{var o=i?e.defaultValue:e.value;if(o=mn(e)?gn(o):o,r(o),X!==null&&n.add(X),await ku(),o!==(o=t())){var s=e.selectionStart,a=e.selectionEnd,u=e.value.length;if(e.value=o??"",a!==null){var l=e.value.length;s===a&&a===u&&l>u?(e.selectionStart=l,e.selectionEnd=l):(e.selectionStart=s,e.selectionEnd=Math.min(a,l))}}}),Fi(t)==null&&e.value&&(r(mn(e)?gn(e.value):e.value),X!==null&&n.add(X)),va(()=>{var i=t();if(e===document.activeElement){var o=Mr??X;if(n.has(o))return}mn(e)&&i===gn(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function mn(e){var t=e.type;return t==="number"||t==="range"}function gn(e){return e===""?null:+e}const Ht=[];function Aa(e,t=pn){let r=null;const n=new Set;function i(a){if(Xs(e,a)&&(e=a,r)){const u=!Ht.length;for(const l of n)l[1](),Ht.push(l,e);if(u){for(let l=0;l<Ht.length;l+=2)Ht[l][0](Ht[l+1]);Ht.length=0}}}function o(a){i(a(e))}function s(a,u=pn){const l=[a,u];return n.add(l),n.size===1&&(r=t(i,o)||pn),a(e),()=>{n.delete(l),n.size===0&&r&&(r(),r=null)}}return{set:i,update:o,subscribe:s}}function qr(e,t,r,n){var i=n,o=!0,s=()=>(o&&(o=!1,i=n),i),a;a=e[t],a===void 0&&n!==void 0&&(a=s());var u;return u=()=>{var l=e[t];return l===void 0?s():(o=!0,l)},u}function tn(e){Ue===null&&Cc(),xr(()=>{const t=Fi(e);if(typeof t=="function")return t})}const qu="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(qu);const Fu=typeof window<"u"?new URL(window.location.href):new URL("http://localhost/"),Pa=Aa(Fu);function Bu(e){const t=Number.parseInt(e,10);return!Number.isFinite(t)||t<1?1:t}function Mu(e){if(e==="/")return{name:"home",params:{}};if(e==="/search")return{name:"search",params:{}};const t=e.match(/^\/book\/([^/]+)$/);if(t)return{name:"book",params:{identifier:decodeURIComponent(t[1])}};if(e==="/sitemap")return{name:"sitemap",params:{view:"authors",letter:"A",page:1}};const r=e.match(/^\/sitemap\/(authors|books)\/([^/]+)\/(\d+)$/);return r?{name:"sitemap",params:{view:r[1]==="books"?"books":"authors",letter:decodeURIComponent(r[2]),page:Bu(r[3])}}:e==="/404"?{name:"notFound",params:{}}:{name:"notFound",params:{}}}function Hu(e){if(e.target&&e.target!=="_self"||e.hasAttribute("download")||e.dataset.noSpa==="true")return!1;const t=new URL(e.href,window.location.origin);if(t.origin!==window.location.origin)return!1;const r=["/api","/admin","/actuator","/ws","/topic","/sitemap.xml","/sitemap-xml","/r"];for(const n of r)if(t.pathname===n||t.pathname.startsWith(`${n}/`))return!1;return!0}function za(){Pa.set(new URL(window.location.href))}function er(e,t=!1){const r=new URL(e,window.location.origin);t?window.history.replaceState(null,"",`${r.pathname}${r.search}${r.hash}`):window.history.pushState(null,"",`${r.pathname}${r.search}${r.hash}`),za()}function Wu(){const e=()=>{za()},t=r=>{if(r.defaultPrevented||r.button!==0||r.metaKey||r.ctrlKey||r.shiftKey||r.altKey)return;const n=r.target;if(!(n instanceof Element))return;const i=n.closest("a[href]");if(!(i instanceof HTMLAnchorElement)||!Hu(i))return;const o=new URL(i.href,window.location.origin);r.preventDefault(),er(`${o.pathname}${o.search}${o.hash}`)};return window.addEventListener("popstate",e),document.addEventListener("click",t),()=>{window.removeEventListener("popstate",e),document.removeEventListener("click",t)}}function S(e,t,r){function n(a,u){var l;Object.defineProperty(a,"_zod",{value:a._zod??{},enumerable:!1}),(l=a._zod).traits??(l.traits=new Set),a._zod.traits.add(e),t(a,u);for(const p in s.prototype)p in a||Object.defineProperty(a,p,{value:s.prototype[p].bind(a)});a._zod.constr=s,a._zod.def=u}const i=r?.Parent??Object;class o extends i{}Object.defineProperty(o,"name",{value:e});function s(a){var u;const l=r?.Parent?new o:this;n(l,a),(u=l._zod).deferred??(u.deferred=[]);for(const p of l._zod.deferred)p();return l}return Object.defineProperty(s,"init",{value:n}),Object.defineProperty(s,Symbol.hasInstance,{value:a=>r?.Parent&&a instanceof r.Parent?!0:a?._zod?.traits?.has(e)}),Object.defineProperty(s,"name",{value:e}),s}class yr extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const Ua={};function Et(e){return Ua}function Vu(e){const t=Object.values(e).filter(n=>typeof n=="number");return Object.entries(e).filter(([n,i])=>t.indexOf(+n)===-1).map(([n,i])=>i)}function Xu(e,t){return typeof t=="bigint"?t.toString():t}function $a(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function Hi(e){return e==null}function Wi(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function Gu(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n,o=Number.parseInt(e.toFixed(i).replace(".","")),s=Number.parseInt(t.toFixed(i).replace(".",""));return o%s/10**i}function ee(e,t,r){Object.defineProperty(e,t,{get(){{const n=r();return e[t]=n,n}},set(n){Object.defineProperty(e,t,{value:n})},configurable:!0})}function Vi(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function ar(e){return JSON.stringify(e)}const La=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function Ti(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const Ju=$a(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function Vr(e){if(Ti(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(Ti(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}const Ku=new Set(["string","number","symbol"]);function rn(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function jt(e,t,r){const n=new e._zod.constr(t??e._zod.def);return(!t||r?.parent)&&(n._zod.parent=e),n}function q(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function Yu(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const Qu={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function el(e,t){const r={},n=e._zod.def;for(const i in t){if(!(i in n.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&(r[i]=n.shape[i])}return jt(e,{...e._zod.def,shape:r,checks:[]})}function tl(e,t){const r={...e._zod.def.shape},n=e._zod.def;for(const i in t){if(!(i in n.shape))throw new Error(`Unrecognized key: "${i}"`);t[i]&&delete r[i]}return jt(e,{...e._zod.def,shape:r,checks:[]})}function rl(e,t){if(!Vr(t))throw new Error("Invalid input to extend: expected a plain object");const r={...e._zod.def,get shape(){const n={...e._zod.def.shape,...t};return Vi(this,"shape",n),n},checks:[]};return jt(e,r)}function nl(e,t){return jt(e,{...e._zod.def,get shape(){const r={...e._zod.def.shape,...t._zod.def.shape};return Vi(this,"shape",r),r},catchall:t._zod.def.catchall,checks:[]})}function il(e,t,r){const n=t._zod.def.shape,i={...n};if(r)for(const o in r){if(!(o in n))throw new Error(`Unrecognized key: "${o}"`);r[o]&&(i[o]=e?new e({type:"optional",innerType:n[o]}):n[o])}else for(const o in n)i[o]=e?new e({type:"optional",innerType:n[o]}):n[o];return jt(t,{...t._zod.def,shape:i,checks:[]})}function ol(e,t,r){const n=t._zod.def.shape,i={...n};if(r)for(const o in r){if(!(o in i))throw new Error(`Unrecognized key: "${o}"`);r[o]&&(i[o]=new e({type:"nonoptional",innerType:n[o]}))}else for(const o in n)i[o]=new e({type:"nonoptional",innerType:n[o]});return jt(t,{...t._zod.def,shape:i,checks:[]})}function mr(e,t=0){for(let r=t;r<e.issues.length;r++)if(e.issues[r]?.continue!==!0)return!0;return!1}function At(e,t){return t.map(r=>{var n;return(n=r).path??(n.path=[]),r.path.unshift(e),r})}function Ar(e){return typeof e=="string"?e:e?.message}function It(e,t,r){const n={...e,path:e.path??[]};if(!e.message){const i=Ar(e.inst?._zod.def?.error?.(e))??Ar(t?.error?.(e))??Ar(r.customError?.(e))??Ar(r.localeError?.(e))??"Invalid input";n.message=i}return delete n.inst,delete n.continue,t?.reportInput||delete n.input,n}function Xi(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function wr(...e){const[t,r,n]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:n}:{...t}}const Za=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get(){return JSON.stringify(t,Xu,2)},enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Da=S("$ZodError",Za),ja=S("$ZodError",Za,{Parent:Error});function sl(e,t=r=>r.message){const r={},n=[];for(const i of e.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(t(i))):n.push(t(i));return{formErrors:n,fieldErrors:r}}function al(e,t){const r=t||function(o){return o.message},n={_errors:[]},i=o=>{for(const s of o.issues)if(s.code==="invalid_union"&&s.errors.length)s.errors.map(a=>i({issues:a}));else if(s.code==="invalid_key")i({issues:s.issues});else if(s.code==="invalid_element")i({issues:s.issues});else if(s.path.length===0)n._errors.push(r(s));else{let a=n,u=0;for(;u<s.path.length;){const l=s.path[u];u===s.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(r(s))):a[l]=a[l]||{_errors:[]},a=a[l],u++}}};return i(e),n}const cl=e=>(t,r,n,i)=>{const o=n?Object.assign(n,{async:!1}):{async:!1},s=t._zod.run({value:r,issues:[]},o);if(s instanceof Promise)throw new yr;if(s.issues.length){const a=new(i?.Err??e)(s.issues.map(u=>It(u,o,Et())));throw La(a,i?.callee),a}return s.value},ul=e=>async(t,r,n,i)=>{const o=n?Object.assign(n,{async:!0}):{async:!0};let s=t._zod.run({value:r,issues:[]},o);if(s instanceof Promise&&(s=await s),s.issues.length){const a=new(i?.Err??e)(s.issues.map(u=>It(u,o,Et())));throw La(a,i?.callee),a}return s.value},qa=e=>(t,r,n)=>{const i=n?{...n,async:!1}:{async:!1},o=t._zod.run({value:r,issues:[]},i);if(o instanceof Promise)throw new yr;return o.issues.length?{success:!1,error:new(e??Da)(o.issues.map(s=>It(s,i,Et())))}:{success:!0,data:o.value}},ll=qa(ja),Fa=e=>async(t,r,n)=>{const i=n?Object.assign(n,{async:!0}):{async:!0};let o=t._zod.run({value:r,issues:[]},i);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new e(o.issues.map(s=>It(s,i,Et())))}:{success:!0,data:o.value}},fl=Fa(ja),hl=/^[cC][^\s-]{8,}$/,dl=/^[0-9a-z]+$/,pl=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,vl=/^[0-9a-vA-V]{20}$/,ml=/^[A-Za-z0-9]{27}$/,gl=/^[a-zA-Z0-9_-]{21}$/,_l=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,bl=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,ho=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,yl=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,wl="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function kl(){return new RegExp(wl,"u")}const xl=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Sl=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,El=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Il=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Tl=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Ba=/^[A-Za-z0-9_-]*$/,Rl=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,Cl=/^\+(?:[0-9]){6,14}[0-9]$/,Ma="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Ol=new RegExp(`^${Ma}$`);function Ha(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function Nl(e){return new RegExp(`^${Ha(e)}$`)}function Al(e){const t=Ha({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-]\\d{2}:\\d{2})");const n=`${t}(?:${r.join("|")})`;return new RegExp(`^${Ma}T(?:${n})$`)}const Pl=e=>{const t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},zl=/^\d+$/,Ul=/^-?\d+(?:\.\d+)?/i,$l=/true|false/i,Ll=/null/i,Zl=/^[^A-Z]*$/,Dl=/^[^a-z]*$/,Ee=S("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),Wa={number:"number",bigint:"bigint",object:"date"},Va=S("$ZodCheckLessThan",(e,t)=>{Ee.init(e,t);const r=Wa[typeof t.value];e._zod.onattach.push(n=>{const i=n._zod.bag,o=(t.inclusive?i.maximum:i.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<o&&(t.inclusive?i.maximum=t.value:i.exclusiveMaximum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value<=t.value:n.value<t.value)||n.issues.push({origin:r,code:"too_big",maximum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Xa=S("$ZodCheckGreaterThan",(e,t)=>{Ee.init(e,t);const r=Wa[typeof t.value];e._zod.onattach.push(n=>{const i=n._zod.bag,o=(t.inclusive?i.minimum:i.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>o&&(t.inclusive?i.minimum=t.value:i.exclusiveMinimum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value>=t.value:n.value>t.value)||n.issues.push({origin:r,code:"too_small",minimum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),jl=S("$ZodCheckMultipleOf",(e,t)=>{Ee.init(e,t),e._zod.onattach.push(r=>{var n;(n=r._zod.bag).multipleOf??(n.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%t.value===BigInt(0):Gu(r.value,t.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),ql=S("$ZodCheckNumberFormat",(e,t)=>{Ee.init(e,t),t.format=t.format||"float64";const r=t.format?.includes("int"),n=r?"int":"number",[i,o]=Qu[t.format];e._zod.onattach.push(s=>{const a=s._zod.bag;a.format=t.format,a.minimum=i,a.maximum=o,r&&(a.pattern=zl)}),e._zod.check=s=>{const a=s.value;if(r){if(!Number.isInteger(a)){s.issues.push({expected:n,format:t.format,code:"invalid_type",input:a,inst:e});return}if(!Number.isSafeInteger(a)){a>0?s.issues.push({input:a,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort}):s.issues.push({input:a,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort});return}}a<i&&s.issues.push({origin:"number",input:a,code:"too_small",minimum:i,inclusive:!0,inst:e,continue:!t.abort}),a>o&&s.issues.push({origin:"number",input:a,code:"too_big",maximum:o,inst:e})}}),Fl=S("$ZodCheckMaxLength",(e,t)=>{var r;Ee.init(e,t),(r=e._zod.def).when??(r.when=n=>{const i=n.value;return!Hi(i)&&i.length!==void 0}),e._zod.onattach.push(n=>{const i=n._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<i&&(n._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{const i=n.value;if(i.length<=t.maximum)return;const s=Xi(i);n.issues.push({origin:s,code:"too_big",maximum:t.maximum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),Bl=S("$ZodCheckMinLength",(e,t)=>{var r;Ee.init(e,t),(r=e._zod.def).when??(r.when=n=>{const i=n.value;return!Hi(i)&&i.length!==void 0}),e._zod.onattach.push(n=>{const i=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>i&&(n._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{const i=n.value;if(i.length>=t.minimum)return;const s=Xi(i);n.issues.push({origin:s,code:"too_small",minimum:t.minimum,inclusive:!0,input:i,inst:e,continue:!t.abort})}}),Ml=S("$ZodCheckLengthEquals",(e,t)=>{var r;Ee.init(e,t),(r=e._zod.def).when??(r.when=n=>{const i=n.value;return!Hi(i)&&i.length!==void 0}),e._zod.onattach.push(n=>{const i=n._zod.bag;i.minimum=t.length,i.maximum=t.length,i.length=t.length}),e._zod.check=n=>{const i=n.value,o=i.length;if(o===t.length)return;const s=Xi(i),a=o>t.length;n.issues.push({origin:s,...a?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),nn=S("$ZodCheckStringFormat",(e,t)=>{var r,n;Ee.init(e,t),e._zod.onattach.push(i=>{const o=i._zod.bag;o.format=t.format,t.pattern&&(o.patterns??(o.patterns=new Set),o.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=i=>{t.pattern.lastIndex=0,!t.pattern.test(i.value)&&i.issues.push({origin:"string",code:"invalid_format",format:t.format,input:i.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(n=e._zod).check??(n.check=()=>{})}),Hl=S("$ZodCheckRegex",(e,t)=>{nn.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),Wl=S("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=Zl),nn.init(e,t)}),Vl=S("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=Dl),nn.init(e,t)}),Xl=S("$ZodCheckIncludes",(e,t)=>{Ee.init(e,t);const r=rn(t.includes),n=new RegExp(typeof t.position=="number"?`^.{${t.position}}${r}`:r);t.pattern=n,e._zod.onattach.push(i=>{const o=i._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(n)}),e._zod.check=i=>{i.value.includes(t.includes,t.position)||i.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:i.value,inst:e,continue:!t.abort})}}),Gl=S("$ZodCheckStartsWith",(e,t)=>{Ee.init(e,t);const r=new RegExp(`^${rn(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const i=n._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(r)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),Jl=S("$ZodCheckEndsWith",(e,t)=>{Ee.init(e,t);const r=new RegExp(`.*${rn(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const i=n._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(r)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}}),Kl=S("$ZodCheckOverwrite",(e,t)=>{Ee.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}});class Yl{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const n=t.split(`
`).filter(s=>s),i=Math.min(...n.map(s=>s.length-s.trimStart().length)),o=n.map(s=>s.slice(i)).map(s=>" ".repeat(this.indent*2)+s);for(const s of o)this.content.push(s)}compile(){const t=Function,r=this?.args,i=[...(this?.content??[""]).map(o=>`  ${o}`)];return new t(...r,i.join(`
`))}}const Ql={major:4,minor:0,patch:0},te=S("$ZodType",(e,t)=>{var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=Ql;const n=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&n.unshift(e);for(const i of n)for(const o of i._zod.onattach)o(e);if(n.length===0)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const i=(o,s,a)=>{let u=mr(o),l;for(const p of s){if(p._zod.def.when){if(!p._zod.def.when(o))continue}else if(u)continue;const d=o.issues.length,v=p._zod.check(o);if(v instanceof Promise&&a?.async===!1)throw new yr;if(l||v instanceof Promise)l=(l??Promise.resolve()).then(async()=>{await v,o.issues.length!==d&&(u||(u=mr(o,d)))});else{if(o.issues.length===d)continue;u||(u=mr(o,d))}}return l?l.then(()=>o):o};e._zod.run=(o,s)=>{const a=e._zod.parse(o,s);if(a instanceof Promise){if(s.async===!1)throw new yr;return a.then(u=>i(u,n,s))}return i(a,n,s)}}e["~standard"]={validate:i=>{try{const o=ll(e,i);return o.success?{value:o.data}:{issues:o.error?.issues}}catch{return fl(e,i).then(s=>s.success?{value:s.data}:{issues:s.error?.issues})}},vendor:"zod",version:1}}),Gi=S("$ZodString",(e,t)=>{te.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??Pl(e._zod.bag),e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),re=S("$ZodStringFormat",(e,t)=>{nn.init(e,t),Gi.init(e,t)}),ef=S("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=bl),re.init(e,t)}),tf=S("$ZodUUID",(e,t)=>{if(t.version){const n={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(n===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=ho(n))}else t.pattern??(t.pattern=ho());re.init(e,t)}),rf=S("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=yl),re.init(e,t)}),nf=S("$ZodURL",(e,t)=>{re.init(e,t),e._zod.check=r=>{try{const n=r.value,i=new URL(n),o=i.href;t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(i.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:Rl.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(i.protocol.endsWith(":")?i.protocol.slice(0,-1):i.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),!n.endsWith("/")&&o.endsWith("/")?r.value=o.slice(0,-1):r.value=o;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),of=S("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=kl()),re.init(e,t)}),sf=S("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=gl),re.init(e,t)}),af=S("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=hl),re.init(e,t)}),cf=S("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=dl),re.init(e,t)}),uf=S("$ZodULID",(e,t)=>{t.pattern??(t.pattern=pl),re.init(e,t)}),lf=S("$ZodXID",(e,t)=>{t.pattern??(t.pattern=vl),re.init(e,t)}),ff=S("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=ml),re.init(e,t)}),hf=S("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=Al(t)),re.init(e,t)}),df=S("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=Ol),re.init(e,t)}),pf=S("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=Nl(t)),re.init(e,t)}),vf=S("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=_l),re.init(e,t)}),mf=S("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=xl),re.init(e,t),e._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv4"})}),gf=S("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=Sl),re.init(e,t),e._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),_f=S("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=El),re.init(e,t)}),bf=S("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=Il),re.init(e,t),e._zod.check=r=>{const[n,i]=r.value.split("/");try{if(!i)throw new Error;const o=Number(i);if(`${o}`!==i)throw new Error;if(o<0||o>128)throw new Error;new URL(`http://[${n}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function Ga(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const yf=S("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=Tl),re.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{Ga(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function wf(e){if(!Ba.test(e))return!1;const t=e.replace(/[-_]/g,n=>n==="-"?"+":"/"),r=t.padEnd(Math.ceil(t.length/4)*4,"=");return Ga(r)}const kf=S("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=Ba),re.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{wf(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),xf=S("$ZodE164",(e,t)=>{t.pattern??(t.pattern=Cl),re.init(e,t)});function Sf(e,t=null){try{const r=e.split(".");if(r.length!==3)return!1;const[n]=r;if(!n)return!1;const i=JSON.parse(atob(n));return!("typ"in i&&i?.typ!=="JWT"||!i.alg||t&&(!("alg"in i)||i.alg!==t))}catch{return!1}}const Ef=S("$ZodJWT",(e,t)=>{re.init(e,t),e._zod.check=r=>{Sf(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),Ja=S("$ZodNumber",(e,t)=>{te.init(e,t),e._zod.pattern=e._zod.bag.pattern??Ul,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=Number(r.value)}catch{}const i=r.value;if(typeof i=="number"&&!Number.isNaN(i)&&Number.isFinite(i))return r;const o=typeof i=="number"?Number.isNaN(i)?"NaN":Number.isFinite(i)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:i,inst:e,...o?{received:o}:{}}),r}}),If=S("$ZodNumber",(e,t)=>{ql.init(e,t),Ja.init(e,t)}),Tf=S("$ZodBoolean",(e,t)=>{te.init(e,t),e._zod.pattern=$l,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=!!r.value}catch{}const i=r.value;return typeof i=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:i,inst:e}),r}}),Rf=S("$ZodNull",(e,t)=>{te.init(e,t),e._zod.pattern=Ll,e._zod.values=new Set([null]),e._zod.parse=(r,n)=>{const i=r.value;return i===null||r.issues.push({expected:"null",code:"invalid_type",input:i,inst:e}),r}}),Cf=S("$ZodUnknown",(e,t)=>{te.init(e,t),e._zod.parse=r=>r}),Of=S("$ZodNever",(e,t)=>{te.init(e,t),e._zod.parse=(r,n)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)});function po(e,t,r){e.issues.length&&t.issues.push(...At(r,e.issues)),t.value[r]=e.value}const Nf=S("$ZodArray",(e,t)=>{te.init(e,t),e._zod.parse=(r,n)=>{const i=r.value;if(!Array.isArray(i))return r.issues.push({expected:"array",code:"invalid_type",input:i,inst:e}),r;r.value=Array(i.length);const o=[];for(let s=0;s<i.length;s++){const a=i[s],u=t.element._zod.run({value:a,issues:[]},n);u instanceof Promise?o.push(u.then(l=>po(l,r,s))):po(u,r,s)}return o.length?Promise.all(o).then(()=>r):r}});function Pr(e,t,r){e.issues.length&&t.issues.push(...At(r,e.issues)),t.value[r]=e.value}function vo(e,t,r,n){e.issues.length?n[r]===void 0?r in n?t.value[r]=void 0:t.value[r]=e.value:t.issues.push(...At(r,e.issues)):e.value===void 0?r in n&&(t.value[r]=void 0):t.value[r]=e.value}const Af=S("$ZodObject",(e,t)=>{te.init(e,t);const r=$a(()=>{const d=Object.keys(t.shape);for(const y of d)if(!(t.shape[y]instanceof te))throw new Error(`Invalid element at key "${y}": expected a Zod schema`);const v=Yu(t.shape);return{shape:t.shape,keys:d,keySet:new Set(d),numKeys:d.length,optionalKeys:new Set(v)}});ee(e._zod,"propValues",()=>{const d=t.shape,v={};for(const y in d){const k=d[y]._zod;if(k.values){v[y]??(v[y]=new Set);for(const E of k.values)v[y].add(E)}}return v});const n=d=>{const v=new Yl(["shape","payload","ctx"]),y=r.value,k=b=>{const x=ar(b);return`shape[${x}]._zod.run({ value: input[${x}], issues: [] }, ctx)`};v.write("const input = payload.value;");const E=Object.create(null);let C=0;for(const b of y.keys)E[b]=`key_${C++}`;v.write("const newResult = {}");for(const b of y.keys)if(y.optionalKeys.has(b)){const x=E[b];v.write(`const ${x} = ${k(b)};`);const f=ar(b);v.write(`
        if (${x}.issues.length) {
          if (input[${f}] === undefined) {
            if (${f} in input) {
              newResult[${f}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${x}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${f}, ...iss.path] : [${f}],
              }))
            );
          }
        } else if (${x}.value === undefined) {
          if (${f} in input) newResult[${f}] = undefined;
        } else {
          newResult[${f}] = ${x}.value;
        }
        `)}else{const x=E[b];v.write(`const ${x} = ${k(b)};`),v.write(`
          if (${x}.issues.length) payload.issues = payload.issues.concat(${x}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${ar(b)}, ...iss.path] : [${ar(b)}]
          })));`),v.write(`newResult[${ar(b)}] = ${x}.value`)}v.write("payload.value = newResult;"),v.write("return payload;");const U=v.compile();return(b,x)=>U(d,b,x)};let i;const o=Ti,s=!Ua.jitless,u=s&&Ju.value,l=t.catchall;let p;e._zod.parse=(d,v)=>{p??(p=r.value);const y=d.value;if(!o(y))return d.issues.push({expected:"object",code:"invalid_type",input:y,inst:e}),d;const k=[];if(s&&u&&v?.async===!1&&v.jitless!==!0)i||(i=n(t.shape)),d=i(d,v);else{d.value={};const x=p.shape;for(const f of p.keys){const c=x[f],m=c._zod.run({value:y[f],issues:[]},v),h=c._zod.optin==="optional"&&c._zod.optout==="optional";m instanceof Promise?k.push(m.then(g=>h?vo(g,d,f,y):Pr(g,d,f))):h?vo(m,d,f,y):Pr(m,d,f)}}if(!l)return k.length?Promise.all(k).then(()=>d):d;const E=[],C=p.keySet,U=l._zod,b=U.def.type;for(const x of Object.keys(y)){if(C.has(x))continue;if(b==="never"){E.push(x);continue}const f=U.run({value:y[x],issues:[]},v);f instanceof Promise?k.push(f.then(c=>Pr(c,d,x))):Pr(f,d,x)}return E.length&&d.issues.push({code:"unrecognized_keys",keys:E,input:y,inst:e}),k.length?Promise.all(k).then(()=>d):d}});function mo(e,t,r,n){for(const i of e)if(i.issues.length===0)return t.value=i.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(i=>i.issues.map(o=>It(o,n,Et())))}),t}const Pf=S("$ZodUnion",(e,t)=>{te.init(e,t),ee(e._zod,"optin",()=>t.options.some(r=>r._zod.optin==="optional")?"optional":void 0),ee(e._zod,"optout",()=>t.options.some(r=>r._zod.optout==="optional")?"optional":void 0),ee(e._zod,"values",()=>{if(t.options.every(r=>r._zod.values))return new Set(t.options.flatMap(r=>Array.from(r._zod.values)))}),ee(e._zod,"pattern",()=>{if(t.options.every(r=>r._zod.pattern)){const r=t.options.map(n=>n._zod.pattern);return new RegExp(`^(${r.map(n=>Wi(n.source)).join("|")})$`)}}),e._zod.parse=(r,n)=>{let i=!1;const o=[];for(const s of t.options){const a=s._zod.run({value:r.value,issues:[]},n);if(a instanceof Promise)o.push(a),i=!0;else{if(a.issues.length===0)return a;o.push(a)}}return i?Promise.all(o).then(s=>mo(s,r,e,n)):mo(o,r,e,n)}}),zf=S("$ZodIntersection",(e,t)=>{te.init(e,t),e._zod.parse=(r,n)=>{const i=r.value,o=t.left._zod.run({value:i,issues:[]},n),s=t.right._zod.run({value:i,issues:[]},n);return o instanceof Promise||s instanceof Promise?Promise.all([o,s]).then(([u,l])=>go(r,u,l)):go(r,o,s)}});function Ri(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Vr(e)&&Vr(t)){const r=Object.keys(t),n=Object.keys(e).filter(o=>r.indexOf(o)!==-1),i={...e,...t};for(const o of n){const s=Ri(e[o],t[o]);if(!s.valid)return{valid:!1,mergeErrorPath:[o,...s.mergeErrorPath]};i[o]=s.data}return{valid:!0,data:i}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let n=0;n<e.length;n++){const i=e[n],o=t[n],s=Ri(i,o);if(!s.valid)return{valid:!1,mergeErrorPath:[n,...s.mergeErrorPath]};r.push(s.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function go(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),mr(e))return e;const n=Ri(t.value,r.value);if(!n.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return e.value=n.data,e}const Uf=S("$ZodRecord",(e,t)=>{te.init(e,t),e._zod.parse=(r,n)=>{const i=r.value;if(!Vr(i))return r.issues.push({expected:"record",code:"invalid_type",input:i,inst:e}),r;const o=[];if(t.keyType._zod.values){const s=t.keyType._zod.values;r.value={};for(const u of s)if(typeof u=="string"||typeof u=="number"||typeof u=="symbol"){const l=t.valueType._zod.run({value:i[u],issues:[]},n);l instanceof Promise?o.push(l.then(p=>{p.issues.length&&r.issues.push(...At(u,p.issues)),r.value[u]=p.value})):(l.issues.length&&r.issues.push(...At(u,l.issues)),r.value[u]=l.value)}let a;for(const u in i)s.has(u)||(a=a??[],a.push(u));a&&a.length>0&&r.issues.push({code:"unrecognized_keys",input:i,inst:e,keys:a})}else{r.value={};for(const s of Reflect.ownKeys(i)){if(s==="__proto__")continue;const a=t.keyType._zod.run({value:s,issues:[]},n);if(a instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(a.issues.length){r.issues.push({origin:"record",code:"invalid_key",issues:a.issues.map(l=>It(l,n,Et())),input:s,path:[s],inst:e}),r.value[a.value]=a.value;continue}const u=t.valueType._zod.run({value:i[s],issues:[]},n);u instanceof Promise?o.push(u.then(l=>{l.issues.length&&r.issues.push(...At(s,l.issues)),r.value[a.value]=l.value})):(u.issues.length&&r.issues.push(...At(s,u.issues)),r.value[a.value]=u.value)}}return o.length?Promise.all(o).then(()=>r):r}}),$f=S("$ZodEnum",(e,t)=>{te.init(e,t);const r=Vu(t.entries);e._zod.values=new Set(r),e._zod.pattern=new RegExp(`^(${r.filter(n=>Ku.has(typeof n)).map(n=>typeof n=="string"?rn(n):n.toString()).join("|")})$`),e._zod.parse=(n,i)=>{const o=n.value;return e._zod.values.has(o)||n.issues.push({code:"invalid_value",values:r,input:o,inst:e}),n}}),Lf=S("$ZodTransform",(e,t)=>{te.init(e,t),e._zod.parse=(r,n)=>{const i=t.transform(r.value,r);if(n.async)return(i instanceof Promise?i:Promise.resolve(i)).then(s=>(r.value=s,r));if(i instanceof Promise)throw new yr;return r.value=i,r}}),Zf=S("$ZodOptional",(e,t)=>{te.init(e,t),e._zod.optin="optional",e._zod.optout="optional",ee(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),ee(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${Wi(r.source)})?$`):void 0}),e._zod.parse=(r,n)=>t.innerType._zod.optin==="optional"?t.innerType._zod.run(r,n):r.value===void 0?r:t.innerType._zod.run(r,n)}),Df=S("$ZodNullable",(e,t)=>{te.init(e,t),ee(e._zod,"optin",()=>t.innerType._zod.optin),ee(e._zod,"optout",()=>t.innerType._zod.optout),ee(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${Wi(r.source)}|null)$`):void 0}),ee(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,n)=>r.value===null?r:t.innerType._zod.run(r,n)}),jf=S("$ZodDefault",(e,t)=>{te.init(e,t),e._zod.optin="optional",ee(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(r.value===void 0)return r.value=t.defaultValue,r;const i=t.innerType._zod.run(r,n);return i instanceof Promise?i.then(o=>_o(o,t)):_o(i,t)}});function _o(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const qf=S("$ZodPrefault",(e,t)=>{te.init(e,t),e._zod.optin="optional",ee(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>(r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,n))}),Ff=S("$ZodNonOptional",(e,t)=>{te.init(e,t),ee(e._zod,"values",()=>{const r=t.innerType._zod.values;return r?new Set([...r].filter(n=>n!==void 0)):void 0}),e._zod.parse=(r,n)=>{const i=t.innerType._zod.run(r,n);return i instanceof Promise?i.then(o=>bo(o,e)):bo(i,e)}});function bo(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const Bf=S("$ZodCatch",(e,t)=>{te.init(e,t),e._zod.optin="optional",ee(e._zod,"optout",()=>t.innerType._zod.optout),ee(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{const i=t.innerType._zod.run(r,n);return i instanceof Promise?i.then(o=>(r.value=o.value,o.issues.length&&(r.value=t.catchValue({...r,error:{issues:o.issues.map(s=>It(s,n,Et()))},input:r.value}),r.issues=[]),r)):(r.value=i.value,i.issues.length&&(r.value=t.catchValue({...r,error:{issues:i.issues.map(o=>It(o,n,Et()))},input:r.value}),r.issues=[]),r)}}),Mf=S("$ZodPipe",(e,t)=>{te.init(e,t),ee(e._zod,"values",()=>t.in._zod.values),ee(e._zod,"optin",()=>t.in._zod.optin),ee(e._zod,"optout",()=>t.out._zod.optout),e._zod.parse=(r,n)=>{const i=t.in._zod.run(r,n);return i instanceof Promise?i.then(o=>yo(o,t,n)):yo(i,t,n)}});function yo(e,t,r){return mr(e)?e:t.out._zod.run({value:e.value,issues:e.issues},r)}const Hf=S("$ZodReadonly",(e,t)=>{te.init(e,t),ee(e._zod,"propValues",()=>t.innerType._zod.propValues),ee(e._zod,"values",()=>t.innerType._zod.values),ee(e._zod,"optin",()=>t.innerType._zod.optin),ee(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(r,n)=>{const i=t.innerType._zod.run(r,n);return i instanceof Promise?i.then(wo):wo(i)}});function wo(e){return e.value=Object.freeze(e.value),e}const Wf=S("$ZodCustom",(e,t)=>{Ee.init(e,t),te.init(e,t),e._zod.parse=(r,n)=>r,e._zod.check=r=>{const n=r.value,i=t.fn(n);if(i instanceof Promise)return i.then(o=>ko(o,r,n,e));ko(i,r,n,e)}});function ko(e,t,r,n){if(!e){const i={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(i.params=n._zod.def.params),t.issues.push(wr(i))}}class Vf{constructor(){this._map=new Map,this._idmap=new Map}add(t,...r){const n=r[0];if(this._map.set(t,n),n&&typeof n=="object"&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){const r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){const r=t._zod.parent;if(r){const n={...this.get(r)??{}};return delete n.id,{...n,...this._map.get(t)}}return this._map.get(t)}has(t){return this._map.has(t)}}function Xf(){return new Vf}const zr=Xf();function Gf(e,t){return new e({type:"string",...q(t)})}function Jf(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...q(t)})}function xo(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...q(t)})}function Kf(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...q(t)})}function Yf(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...q(t)})}function Qf(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...q(t)})}function eh(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...q(t)})}function th(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...q(t)})}function rh(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...q(t)})}function nh(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...q(t)})}function ih(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...q(t)})}function oh(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...q(t)})}function sh(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...q(t)})}function ah(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...q(t)})}function ch(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...q(t)})}function uh(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...q(t)})}function lh(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...q(t)})}function fh(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...q(t)})}function hh(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...q(t)})}function dh(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...q(t)})}function ph(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...q(t)})}function vh(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...q(t)})}function mh(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...q(t)})}function gh(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...q(t)})}function _h(e,t){return new e({type:"string",format:"date",check:"string_format",...q(t)})}function bh(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...q(t)})}function yh(e,t){return new e({type:"string",format:"duration",check:"string_format",...q(t)})}function wh(e,t){return new e({type:"number",checks:[],...q(t)})}function kh(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...q(t)})}function xh(e,t){return new e({type:"boolean",...q(t)})}function Sh(e,t){return new e({type:"null",...q(t)})}function Eh(e){return new e({type:"unknown"})}function Ih(e,t){return new e({type:"never",...q(t)})}function So(e,t){return new Va({check:"less_than",...q(t),value:e,inclusive:!1})}function _n(e,t){return new Va({check:"less_than",...q(t),value:e,inclusive:!0})}function Eo(e,t){return new Xa({check:"greater_than",...q(t),value:e,inclusive:!1})}function bn(e,t){return new Xa({check:"greater_than",...q(t),value:e,inclusive:!0})}function Io(e,t){return new jl({check:"multiple_of",...q(t),value:e})}function Ka(e,t){return new Fl({check:"max_length",...q(t),maximum:e})}function Xr(e,t){return new Bl({check:"min_length",...q(t),minimum:e})}function Ya(e,t){return new Ml({check:"length_equals",...q(t),length:e})}function Th(e,t){return new Hl({check:"string_format",format:"regex",...q(t),pattern:e})}function Rh(e){return new Wl({check:"string_format",format:"lowercase",...q(e)})}function Ch(e){return new Vl({check:"string_format",format:"uppercase",...q(e)})}function Oh(e,t){return new Xl({check:"string_format",format:"includes",...q(t),includes:e})}function Nh(e,t){return new Gl({check:"string_format",format:"starts_with",...q(t),prefix:e})}function Ah(e,t){return new Jl({check:"string_format",format:"ends_with",...q(t),suffix:e})}function Er(e){return new Kl({check:"overwrite",tx:e})}function Ph(e){return Er(t=>t.normalize(e))}function zh(){return Er(e=>e.trim())}function Uh(){return Er(e=>e.toLowerCase())}function $h(){return Er(e=>e.toUpperCase())}function Lh(e,t,r){return new e({type:"array",element:t,...q(r)})}function Zh(e,t,r){return new e({type:"custom",check:"custom",fn:t,...q(r)})}const Dh=S("ZodISODateTime",(e,t)=>{hf.init(e,t),ne.init(e,t)});function jh(e){return gh(Dh,e)}const qh=S("ZodISODate",(e,t)=>{df.init(e,t),ne.init(e,t)});function Fh(e){return _h(qh,e)}const Bh=S("ZodISOTime",(e,t)=>{pf.init(e,t),ne.init(e,t)});function Mh(e){return bh(Bh,e)}const Hh=S("ZodISODuration",(e,t)=>{vf.init(e,t),ne.init(e,t)});function Wh(e){return yh(Hh,e)}const Vh=(e,t)=>{Da.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>al(e,r)},flatten:{value:r=>sl(e,r)},addIssue:{value:r=>e.issues.push(r)},addIssues:{value:r=>e.issues.push(...r)},isEmpty:{get(){return e.issues.length===0}}})},on=S("ZodError",Vh,{Parent:Error}),Xh=cl(on),Gh=ul(on),Jh=qa(on),Kh=Fa(on),oe=S("ZodType",(e,t)=>(te.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone({...t,checks:[...t.checks??[],...r.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]}),e.clone=(r,n)=>jt(e,r,n),e.brand=()=>e,e.register=((r,n)=>(r.add(e,n),e)),e.parse=(r,n)=>Xh(e,r,n,{callee:e.parse}),e.safeParse=(r,n)=>Jh(e,r,n),e.parseAsync=async(r,n)=>Gh(e,r,n,{callee:e.parseAsync}),e.safeParseAsync=async(r,n)=>Kh(e,r,n),e.spa=e.safeParseAsync,e.refine=(r,n)=>e.check(Bd(r,n)),e.superRefine=r=>e.check(Md(r)),e.overwrite=r=>e.check(Er(r)),e.optional=()=>Co(e),e.nullable=()=>Oo(e),e.nullish=()=>Co(Oo(e)),e.nonoptional=r=>Ud(e,r),e.array=()=>le(e),e.or=r=>tr([e,r]),e.and=r=>Id(e,r),e.transform=r=>No(e,Cd(r)),e.default=r=>Ad(e,r),e.prefault=r=>zd(e,r),e.catch=r=>Ld(e,r),e.pipe=r=>No(e,r),e.readonly=()=>jd(e),e.describe=r=>{const n=e.clone();return zr.add(n,{description:r}),n},Object.defineProperty(e,"description",{get(){return zr.get(e)?.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return zr.get(e);const n=e.clone();return zr.add(n,r[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),Qa=S("_ZodString",(e,t)=>{Gi.init(e,t),oe.init(e,t);const r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...n)=>e.check(Th(...n)),e.includes=(...n)=>e.check(Oh(...n)),e.startsWith=(...n)=>e.check(Nh(...n)),e.endsWith=(...n)=>e.check(Ah(...n)),e.min=(...n)=>e.check(Xr(...n)),e.max=(...n)=>e.check(Ka(...n)),e.length=(...n)=>e.check(Ya(...n)),e.nonempty=(...n)=>e.check(Xr(1,...n)),e.lowercase=n=>e.check(Rh(n)),e.uppercase=n=>e.check(Ch(n)),e.trim=()=>e.check(zh()),e.normalize=(...n)=>e.check(Ph(...n)),e.toLowerCase=()=>e.check(Uh()),e.toUpperCase=()=>e.check($h())}),Yh=S("ZodString",(e,t)=>{Gi.init(e,t),Qa.init(e,t),e.email=r=>e.check(Jf(Qh,r)),e.url=r=>e.check(th(ed,r)),e.jwt=r=>e.check(mh(vd,r)),e.emoji=r=>e.check(rh(td,r)),e.guid=r=>e.check(xo(To,r)),e.uuid=r=>e.check(Kf(Ur,r)),e.uuidv4=r=>e.check(Yf(Ur,r)),e.uuidv6=r=>e.check(Qf(Ur,r)),e.uuidv7=r=>e.check(eh(Ur,r)),e.nanoid=r=>e.check(nh(rd,r)),e.guid=r=>e.check(xo(To,r)),e.cuid=r=>e.check(ih(nd,r)),e.cuid2=r=>e.check(oh(id,r)),e.ulid=r=>e.check(sh(od,r)),e.base64=r=>e.check(dh(hd,r)),e.base64url=r=>e.check(ph(dd,r)),e.xid=r=>e.check(ah(sd,r)),e.ksuid=r=>e.check(ch(ad,r)),e.ipv4=r=>e.check(uh(cd,r)),e.ipv6=r=>e.check(lh(ud,r)),e.cidrv4=r=>e.check(fh(ld,r)),e.cidrv6=r=>e.check(hh(fd,r)),e.e164=r=>e.check(vh(pd,r)),e.datetime=r=>e.check(jh(r)),e.date=r=>e.check(Fh(r)),e.time=r=>e.check(Mh(r)),e.duration=r=>e.check(Wh(r))});function P(e){return Gf(Yh,e)}const ne=S("ZodStringFormat",(e,t)=>{re.init(e,t),Qa.init(e,t)}),Qh=S("ZodEmail",(e,t)=>{rf.init(e,t),ne.init(e,t)}),To=S("ZodGUID",(e,t)=>{ef.init(e,t),ne.init(e,t)}),Ur=S("ZodUUID",(e,t)=>{tf.init(e,t),ne.init(e,t)}),ed=S("ZodURL",(e,t)=>{nf.init(e,t),ne.init(e,t)}),td=S("ZodEmoji",(e,t)=>{of.init(e,t),ne.init(e,t)}),rd=S("ZodNanoID",(e,t)=>{sf.init(e,t),ne.init(e,t)}),nd=S("ZodCUID",(e,t)=>{af.init(e,t),ne.init(e,t)}),id=S("ZodCUID2",(e,t)=>{cf.init(e,t),ne.init(e,t)}),od=S("ZodULID",(e,t)=>{uf.init(e,t),ne.init(e,t)}),sd=S("ZodXID",(e,t)=>{lf.init(e,t),ne.init(e,t)}),ad=S("ZodKSUID",(e,t)=>{ff.init(e,t),ne.init(e,t)}),cd=S("ZodIPv4",(e,t)=>{mf.init(e,t),ne.init(e,t)}),ud=S("ZodIPv6",(e,t)=>{gf.init(e,t),ne.init(e,t)}),ld=S("ZodCIDRv4",(e,t)=>{_f.init(e,t),ne.init(e,t)}),fd=S("ZodCIDRv6",(e,t)=>{bf.init(e,t),ne.init(e,t)}),hd=S("ZodBase64",(e,t)=>{yf.init(e,t),ne.init(e,t)}),dd=S("ZodBase64URL",(e,t)=>{kf.init(e,t),ne.init(e,t)}),pd=S("ZodE164",(e,t)=>{xf.init(e,t),ne.init(e,t)}),vd=S("ZodJWT",(e,t)=>{Ef.init(e,t),ne.init(e,t)}),ec=S("ZodNumber",(e,t)=>{Ja.init(e,t),oe.init(e,t),e.gt=(n,i)=>e.check(Eo(n,i)),e.gte=(n,i)=>e.check(bn(n,i)),e.min=(n,i)=>e.check(bn(n,i)),e.lt=(n,i)=>e.check(So(n,i)),e.lte=(n,i)=>e.check(_n(n,i)),e.max=(n,i)=>e.check(_n(n,i)),e.int=n=>e.check(Ro(n)),e.safe=n=>e.check(Ro(n)),e.positive=n=>e.check(Eo(0,n)),e.nonnegative=n=>e.check(bn(0,n)),e.negative=n=>e.check(So(0,n)),e.nonpositive=n=>e.check(_n(0,n)),e.multipleOf=(n,i)=>e.check(Io(n,i)),e.step=(n,i)=>e.check(Io(n,i)),e.finite=()=>e;const r=e._zod.bag;e.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function ie(e){return wh(ec,e)}const md=S("ZodNumberFormat",(e,t)=>{If.init(e,t),ec.init(e,t)});function Ro(e){return kh(md,e)}const gd=S("ZodBoolean",(e,t)=>{Tf.init(e,t),oe.init(e,t)});function tc(e){return xh(gd,e)}const _d=S("ZodNull",(e,t)=>{Rf.init(e,t),oe.init(e,t)});function sn(e){return Sh(_d,e)}const bd=S("ZodUnknown",(e,t)=>{Cf.init(e,t),oe.init(e,t)});function Yt(){return Eh(bd)}const yd=S("ZodNever",(e,t)=>{Of.init(e,t),oe.init(e,t)});function wd(e){return Ih(yd,e)}const kd=S("ZodArray",(e,t)=>{Nf.init(e,t),oe.init(e,t),e.element=t.element,e.min=(r,n)=>e.check(Xr(r,n)),e.nonempty=r=>e.check(Xr(1,r)),e.max=(r,n)=>e.check(Ka(r,n)),e.length=(r,n)=>e.check(Ya(r,n)),e.unwrap=()=>e.element});function le(e,t){return Lh(kd,e,t)}const xd=S("ZodObject",(e,t)=>{Af.init(e,t),oe.init(e,t),ee(e,"shape",()=>t.shape),e.keyof=()=>rc(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:Yt()}),e.loose=()=>e.clone({...e._zod.def,catchall:Yt()}),e.strict=()=>e.clone({...e._zod.def,catchall:wd()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>rl(e,r),e.merge=r=>nl(e,r),e.pick=r=>el(e,r),e.omit=r=>tl(e,r),e.partial=(...r)=>il(nc,e,r[0]),e.required=(...r)=>ol(ic,e,r[0])});function fe(e,t){const r={type:"object",get shape(){return Vi(this,"shape",{...e}),this.shape},...q(t)};return new xd(r)}const Sd=S("ZodUnion",(e,t)=>{Pf.init(e,t),oe.init(e,t),e.options=t.options});function tr(e,t){return new Sd({type:"union",options:e,...q(t)})}const Ed=S("ZodIntersection",(e,t)=>{zf.init(e,t),oe.init(e,t)});function Id(e,t){return new Ed({type:"intersection",left:e,right:t})}const Td=S("ZodRecord",(e,t)=>{Uf.init(e,t),oe.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function an(e,t,r){return new Td({type:"record",keyType:e,valueType:t,...q(r)})}const Ci=S("ZodEnum",(e,t)=>{$f.init(e,t),oe.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const r=new Set(Object.keys(t.entries));e.extract=(n,i)=>{const o={};for(const s of n)if(r.has(s))o[s]=t.entries[s];else throw new Error(`Key ${s} not found in enum`);return new Ci({...t,checks:[],...q(i),entries:o})},e.exclude=(n,i)=>{const o={...t.entries};for(const s of n)if(r.has(s))delete o[s];else throw new Error(`Key ${s} not found in enum`);return new Ci({...t,checks:[],...q(i),entries:o})}});function rc(e,t){const r=Array.isArray(e)?Object.fromEntries(e.map(n=>[n,n])):e;return new Ci({type:"enum",entries:r,...q(t)})}const Rd=S("ZodTransform",(e,t)=>{Lf.init(e,t),oe.init(e,t),e._zod.parse=(r,n)=>{r.addIssue=o=>{if(typeof o=="string")r.issues.push(wr(o,r.value,t));else{const s=o;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=r.value),s.inst??(s.inst=e),s.continue??(s.continue=!0),r.issues.push(wr(s))}};const i=t.transform(r.value,r);return i instanceof Promise?i.then(o=>(r.value=o,r)):(r.value=i,r)}});function Cd(e){return new Rd({type:"transform",transform:e})}const nc=S("ZodOptional",(e,t)=>{Zf.init(e,t),oe.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Co(e){return new nc({type:"optional",innerType:e})}const Od=S("ZodNullable",(e,t)=>{Df.init(e,t),oe.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Oo(e){return new Od({type:"nullable",innerType:e})}const Nd=S("ZodDefault",(e,t)=>{jf.init(e,t),oe.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function Ad(e,t){return new Nd({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const Pd=S("ZodPrefault",(e,t)=>{qf.init(e,t),oe.init(e,t),e.unwrap=()=>e._zod.def.innerType});function zd(e,t){return new Pd({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const ic=S("ZodNonOptional",(e,t)=>{Ff.init(e,t),oe.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Ud(e,t){return new ic({type:"nonoptional",innerType:e,...q(t)})}const $d=S("ZodCatch",(e,t)=>{Bf.init(e,t),oe.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function Ld(e,t){return new $d({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const Zd=S("ZodPipe",(e,t)=>{Mf.init(e,t),oe.init(e,t),e.in=t.in,e.out=t.out});function No(e,t){return new Zd({type:"pipe",in:e,out:t})}const Dd=S("ZodReadonly",(e,t)=>{Hf.init(e,t),oe.init(e,t)});function jd(e){return new Dd({type:"readonly",innerType:e})}const qd=S("ZodCustom",(e,t)=>{Wf.init(e,t),oe.init(e,t)});function Fd(e){const t=new Ee({check:"custom"});return t._zod.check=e,t}function Bd(e,t={}){return Zh(qd,e,t)}function Md(e){const t=Fd(r=>(r.addIssue=n=>{if(typeof n=="string")r.issues.push(wr(n,r.value,t._zod.def));else{const i=n;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=r.value),i.inst??(i.inst=t),i.continue??(i.continue=!t._zod.def.abort),r.issues.push(wr(i))}},e(r.value,r)));return t}const Hd=8;function Ji(e,t,r){const n=e.safeParse(t);if(!n.success){const i=n.error.issues.slice(0,Hd).map(o=>`${o.path.length>0?o.path.join("."):"(root)"}: ${o.message}`).join("; ");return console.error(`[zod] ${r} validation failed`,i,t),{success:!1,error:n.error}}return{success:!0,data:n.data}}async function oc(e,t,r){if(!e.ok)return{success:!1,error:`HTTP ${e.status}: ${e.statusText}`};let n;try{n=await e.json()}catch(o){return{success:!1,error:`Invalid JSON response: ${o instanceof Error?o.message:String(o)}`}}const i=Ji(t,n,r);return i.success?{success:!0,data:i.data}:{success:!1,error:`Schema validation failed for ${r}`}}const Wd="XSRF-TOKEN",Ao="X-XSRF-TOKEN";function Vd(e){if(typeof document>"u")return null;const t=document.cookie.split(";").map(n=>n.trim()).find(n=>n.startsWith(`${e}=`));if(!t)return null;const r=t.substring(e.length+1);try{return decodeURIComponent(r)}catch{return r}}function Xd(e){const t=new Headers(e.headers??{}),r=Vd(Wd);return r&&!t.has(Ao)&&t.set(Ao,r),{...e,headers:t}}async function qt(e,t,r){const n=await fetch(e,{method:"GET",cache:"no-store",credentials:"same-origin"}),i=await oc(n,t,r);if(!i.success)throw new Error(i.error);return i.data}async function Gd(e,t,r,n){const i=await fetch(e,Xd({method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(t)})),o=await oc(i,r,n);if(!o.success)throw new Error(o.error);return o.data}const Jd=fe({id:P().nullable().optional(),name:P()}),Kd=fe({id:P().nullable().optional(),name:P().nullable().optional(),type:P().nullable().optional(),rank:ie().nullable().optional(),source:P().nullable().optional()}),Yd=fe({key:P(),attributes:an(P(),Yt()).optional().default({})}),Qd=fe({s3ImagePath:P().nullable().optional(),externalImageUrl:P().nullable().optional(),width:ie().nullable().optional(),height:ie().nullable().optional(),highResolution:tc().nullable().optional(),preferredUrl:P().nullable().optional(),fallbackUrl:P().nullable().optional(),source:P().nullable().optional()}),ep=fe({googleBooksId:P().nullable().optional(),type:P().nullable().optional(),identifier:P().nullable().optional(),isbn10:P().nullable().optional(),isbn13:P().nullable().optional(),publishedDate:tr([P(),ie(),sn()]).optional(),coverImageUrl:P().nullable().optional()}),tp=fe({publishedDate:tr([P(),ie(),sn()]).optional(),language:P().nullable().optional(),pageCount:ie().nullable().optional(),publisher:P().nullable().optional()}),Ki=fe({id:P(),slug:P().nullable().optional(),title:P().nullable().optional(),description:P().nullable().optional(),publication:tp.nullable().optional(),authors:le(Jd).optional().default([]),categories:le(P()).optional().default([]),collections:le(Kd).optional().default([]),tags:le(Yd).optional().default([]),cover:Qd.nullable().optional(),editions:le(ep).optional().default([]),recommendationIds:le(P()).optional().default([]),extras:an(P(),Yt()).optional().default({})}),rp=Ki.extend({matchType:P().nullable().optional(),relevanceScore:ie().nullable().optional()}),np=fe({query:P(),queryHash:P(),startIndex:ie(),maxResults:ie(),totalResults:ie(),hasMore:tc(),nextStartIndex:ie(),prefetchedCount:ie(),orderBy:P(),coverSource:P(),resolution:P(),results:le(rp)}),ip=le(Ki),Po=fe({id:P(),slug:P().nullable().optional(),title:P(),authors:le(P()).optional().default([]),cover_url:P().nullable().optional(),cover_s3_key:P().nullable().optional(),fallback_cover_url:P().nullable().optional(),average_rating:ie().nullable().optional(),ratings_count:ie().nullable().optional(),tags:an(P(),Yt()).optional().default({})}),op=fe({currentBestsellers:le(Po),recentBooks:le(Po)}),sc=fe({id:P().nullable().optional(),slug:P(),title:P(),updatedAt:tr([P(),ie(),sn()]).optional()}),sp=fe({authorId:P(),authorName:P(),lastModified:tr([P(),ie(),sn()]).optional(),books:le(sc)}),ap=fe({viewType:rc(["authors","books"]),activeLetter:P(),pageNumber:ie(),totalPages:ie(),totalItems:ie(),letters:le(P()),baseUrl:P(),books:le(sc).optional().default([]),authors:le(sp).optional().default([])}),ac=fe({theme:P().nullable(),source:P()}),cp=an(P(),P()).optional().default({}),up=fe({message:P().optional()}),lp=fe({newResults:le(Yt()).optional().default([])}),fp=fe({newCoverUrl:P().optional()}),hp=fe({id:P(),slug:P().optional(),title:P().optional(),description:P().nullable().optional(),authors:le(P()).optional().default([]),categories:le(P()).optional().default([]),publishedDate:tr([P(),ie()]).optional(),language:P().optional(),pageCount:ie().optional(),publisher:P().optional(),cover:fe({s3ImagePath:P().optional(),externalImageUrl:P().optional(),preferredUrl:P().optional(),fallbackUrl:P().optional(),source:P().optional()}).optional(),matchType:P().optional(),relevanceScore:ie().optional()});function dp(){return qt("/api/theme",ac,"getThemePreference")}function pp(e,t){return Gd("/api/theme",{theme:e,useSystem:t},ac,"persistThemePreference")}const gr=Aa("system");function Fr(e){const t=document.documentElement;if(e==="system"){t.setAttribute("data-theme","_auto_");return}t.setAttribute("data-theme",e)}function vp(){const e=window.localStorage.getItem("preferred_theme");return e==="light"||e==="dark"||e==="system"?e:null}async function mp(){const e=await dp();return e.theme==="light"||e.theme==="dark"?e.theme:"system"}async function gp(){if(typeof window>"u")return;const e=vp();if(e){gr.set(e),Fr(e);return}try{const t=await mp();gr.set(t),Fr(t),window.localStorage.setItem("preferred_theme",t)}catch(t){console.error("Failed to load theme preference",t),gr.set("system"),Fr("system")}}async function _p(e){gr.set(e),Fr(e),window.localStorage.setItem("preferred_theme",e);try{await pp(e==="system"?null:e,e==="system")}catch(t){console.error("Failed to persist theme preference",t)}}var bp=F('<header class="sticky top-0 z-30 border-b border-linen-200/80 bg-white/90 backdrop-blur dark:border-slate-700 dark:bg-slate-900/90"><div class="mx-auto flex max-w-6xl flex-col gap-3 px-4 py-3 md:px-6 lg:flex-row lg:items-center lg:justify-between"><div class="flex items-center gap-4"><a href="/" class="text-lg font-semibold tracking-tight text-anthracite-900 dark:text-slate-100">FindMyBook</a> <nav class="hidden items-center gap-1 rounded-lg border border-linen-200 bg-linen-50 p-1 dark:border-slate-700 dark:bg-slate-800 md:flex"><a href="/">Home</a> <a href="/search">Search</a> <a href="/sitemap">Sitemap</a></nav></div> <div class="flex flex-col gap-3 sm:flex-row sm:items-center"><form class="flex items-center gap-2"><input type="search" placeholder="Quick search" class="w-full rounded-lg border border-linen-300 bg-white px-3 py-1.5 text-sm text-anthracite-900 outline-none ring-canvas-300 transition focus:ring-2 dark:border-slate-600 dark:bg-slate-800 dark:text-slate-100 sm:w-56"/> <button type="submit" class="rounded-lg bg-canvas-500 px-3 py-1.5 text-sm font-medium text-white transition hover:bg-canvas-600">Go</button></form> <label class="flex items-center gap-2 text-sm text-anthracite-700 dark:text-slate-200">Theme <select class="rounded-md border border-linen-300 bg-white px-2 py-1 text-sm dark:border-slate-600 dark:bg-slate-800"><option>System</option><option>Light</option><option>Dark</option></select></label></div></div></header>');function yp(e,t){lt(t,!0);let r=M(""),n=M("system");const i=gr.subscribe(h=>{L(n,h,!0)});xr(()=>()=>{i()});function o(h){h.preventDefault();const g=_(r).trim();g&&er(`/search?query=${encodeURIComponent(g)}`)}function s(h){return t.activeRoute===h?"bg-canvas-200 text-canvas-900 shadow-sm":"text-anthracite-700 hover:bg-linen-100 hover:text-anthracite-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-slate-100"}var a=bp(),u=O(a),l=O(u),p=$(O(l),2),d=O(p),v=$(d,2),y=$(v,2),k=$(l,2),E=O(k),C=O(E),U=$(E,2),b=$(O(U));b.__change=h=>{const g=h.currentTarget.value;_p(g)};var x=O(b);x.value=x.__value="system";var f=$(x);f.value=f.__value="light";var c=$(f);c.value=c.__value="dark";var m;Na(b),Y((h,g,w)=>{ct(d,1,h),ct(v,1,g),ct(y,1,w),m!==(m=_(n))&&(b.value=(b.__value=_(n))??"",Mi(b,_(n)))},[()=>`rounded-md px-3 py-1.5 text-sm transition ${s("home")}`,()=>`rounded-md px-3 py-1.5 text-sm transition ${s("search")}`,()=>`rounded-md px-3 py-1.5 text-sm transition ${s("sitemap")}`]),en("submit",E,o),br(C,()=>_(r),h=>L(r,h)),D(e,a),ft()}Bi(["change"]);var wp=F('<footer class="border-t border-linen-200 bg-white dark:border-slate-700 dark:bg-slate-900"><div class="mx-auto flex max-w-6xl flex-col gap-2 px-4 py-6 text-sm text-anthracite-600 dark:text-slate-400 md:flex-row md:items-center md:justify-between md:px-6"><p>FindMyBook</p> <div class="flex items-center gap-4"><a href="/search" class="transition hover:text-canvas-600 dark:hover:text-canvas-400">Search</a> <a href="/sitemap" class="transition hover:text-canvas-600 dark:hover:text-canvas-400">Sitemap</a> <a href="https://findmybook.net" data-no-spa="true" class="transition hover:text-canvas-600 dark:hover:text-canvas-400">Production</a></div></div></footer>');function kp(e){var t=wp();D(e,t)}var xp=F('<p class="line-clamp-3 text-sm text-anthracite-600 dark:text-slate-400"> </p>'),Sp=F('<p class="text-xs font-medium text-canvas-700 dark:text-canvas-400"> </p>'),Ep=F('<article class="flex gap-4 rounded-xl border border-linen-200 bg-white p-4 shadow-sm transition hover:shadow-md dark:border-slate-700 dark:bg-slate-800"><img class="h-40 w-28 shrink-0 rounded-lg object-cover" loading="lazy"/> <div class="flex min-w-0 flex-1 flex-col gap-2"><a class="line-clamp-2 text-lg font-semibold text-anthracite-900 transition hover:text-canvas-700 dark:text-slate-100 dark:hover:text-canvas-400"> </a> <p class="line-clamp-1 text-sm text-anthracite-700 dark:text-slate-300"> </p> <!> <!></div></article>'),Ip=F('<p class="text-xs font-medium text-canvas-700 dark:text-canvas-400"> </p>'),Tp=F('<article class="group overflow-hidden rounded-xl border border-linen-200 bg-white shadow-sm transition hover:-translate-y-0.5 hover:shadow-md dark:border-slate-700 dark:bg-slate-800"><a class="block"><img class="h-64 w-full object-cover" loading="lazy"/></a> <div class="space-y-2 p-4"><a class="line-clamp-2 text-base font-semibold text-anthracite-900 transition group-hover:text-canvas-700 dark:text-slate-100 dark:group-hover:text-canvas-400"> </a> <p class="line-clamp-1 text-sm text-anthracite-700 dark:text-slate-300"> </p> <!></div></article>');function Gr(e,t){lt(t,!0);let r=qr(t,"layout",3,"grid");const n="/images/placeholder-book-cover.svg";function i(){return t.book.coverUrl&&t.book.coverUrl.trim().length>0?t.book.coverUrl:t.book.fallbackCoverUrl&&t.book.fallbackCoverUrl.trim().length>0?t.book.fallbackCoverUrl:n}var o=at(),s=ze(o);{var a=l=>{var p=Ep(),d=O(p),v=$(d,2),y=O(v),k=O(y),E=$(y,2),C=O(E),U=$(E,2);{var b=c=>{var m=xp(),h=O(m);Y(()=>V(h,t.book.description)),D(c,m)};J(U,c=>{t.book.description&&c(b)})}var x=$(U,2);{var f=c=>{var m=Sp(),h=O(m);Y(g=>V(h,`${g??""} (${t.book.ratingsCount??0??""} ratings)`),[()=>t.book.averageRating.toFixed(1)]),D(c,m)};J(x,c=>{t.book.averageRating!==null&&t.book.averageRating!==void 0&&c(f)})}Y((c,m)=>{be(d,"src",c),be(d,"alt",`${t.book.title} cover`),be(y,"href",t.href),V(k,t.book.title),V(C,m)},[i,()=>t.book.authors.length>0?t.book.authors.join(", "):"Unknown author"]),D(l,p)},u=l=>{var p=Tp(),d=O(p),v=O(d),y=$(d,2),k=O(y),E=O(k),C=$(k,2),U=O(C),b=$(C,2);{var x=f=>{var c=Ip(),m=O(c);Y(h=>V(m,`${h??""} (${t.book.ratingsCount??0??""})`),[()=>t.book.averageRating.toFixed(1)]),D(f,c)};J(b,f=>{t.book.averageRating!==null&&t.book.averageRating!==void 0&&f(x)})}Y((f,c)=>{be(d,"href",t.href),be(v,"src",f),be(v,"alt",`${t.book.title} cover`),be(k,"href",t.href),V(E,t.book.title),V(U,c)},[i,()=>t.book.authors.length>0?t.book.authors.join(", "):"Unknown author"]),D(l,p)};J(s,l=>{r()==="list"?l(a):l(u,!1)})}D(e,o),ft()}function Rp(){return qt("/api/pages/home",op,"getHomePagePayload")}function Cp(e,t,r){const n=new URL("/api/pages/sitemap",window.location.origin);return n.searchParams.set("view",e),n.searchParams.set("letter",t),n.searchParams.set("page",String(r)),qt(`${n.pathname}${n.search}`,ap,"getSitemapPayload")}var Op=F('<p class="text-sm text-anthracite-600 dark:text-slate-300">Loading homepage sections...</p>'),Np=F('<div class="rounded-xl border border-red-200 bg-red-50 p-4 text-sm text-red-700 dark:border-red-900/40 dark:bg-red-950/40 dark:text-red-200"> </div>'),Ap=F('<p class="text-sm text-anthracite-600 dark:text-slate-400">No current bestsellers available.</p>'),Pp=F('<div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4"></div>'),zp=F('<p class="text-sm text-anthracite-600 dark:text-slate-400">No recent books yet. Start searching to build your list.</p>'),Up=F('<div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4"></div>'),$p=F('<section class="bg-gradient-to-b from-linen-50 to-white px-4 py-10 dark:from-slate-900 dark:to-slate-900 md:px-6 md:py-16"><div class="mx-auto max-w-4xl text-center"><h1 class="text-3xl font-semibold tracking-tight text-anthracite-900 dark:text-slate-100 md:text-5xl">Find your next great read</h1> <p class="mx-auto mt-4 max-w-2xl text-base text-anthracite-700 dark:text-slate-300 md:text-lg">Search by title, author, or ISBN with realtime results, rich book details, and sitemap browsing.</p> <form class="mx-auto mt-8 flex max-w-2xl flex-col gap-3 sm:flex-row"><input type="search" placeholder="Search by title, author, or ISBN" class="w-full rounded-xl border border-linen-300 bg-white px-4 py-3 text-anthracite-900 outline-none ring-canvas-300 transition focus:ring-2 dark:border-slate-600 dark:bg-slate-800 dark:text-slate-100" required/> <button type="submit" class="rounded-xl bg-canvas-500 px-5 py-3 font-medium text-white transition hover:bg-canvas-600">Search</button></form></div></section> <section class="mx-auto grid max-w-6xl gap-10 px-4 py-8 md:px-6 md:py-12"><!> <div class="space-y-4"><div class="flex items-center justify-between"><h2 class="text-2xl font-semibold text-anthracite-900 dark:text-slate-100">NYT Bestsellers</h2> <a href="/search?query=new%20york%20times" class="text-sm font-medium text-canvas-700 transition hover:text-canvas-800 dark:text-canvas-400">View all</a></div> <!></div> <div class="space-y-4"><div class="flex items-center justify-between"><h2 class="text-2xl font-semibold text-anthracite-900 dark:text-slate-100">Recently Viewed</h2> <a href="/search?query=explore" class="text-sm font-medium text-canvas-700 transition hover:text-canvas-800 dark:text-canvas-400">Explore more</a></div> <!></div></section>',1);function Lp(e,t){lt(t,!0);let r=M(!0),n=M(null),i=M(Ye([])),o=M(Ye([])),s=M("");function a(I){return{id:I.id,slug:I.slug??I.id,title:I.title,authors:I.authors??[],coverUrl:I.cover_url??null,fallbackCoverUrl:I.fallback_cover_url??null,averageRating:I.average_rating??null,ratingsCount:I.ratings_count??null}}async function u(){L(r,!0),L(n,null);try{const I=await Rp();L(i,I.currentBestsellers.map(a),!0),L(o,I.recentBooks.map(a),!0)}catch(I){L(n,I instanceof Error?I.message:"Unable to load homepage content",!0),L(i,[],!0),L(o,[],!0)}finally{L(r,!1)}}function l(I){I.preventDefault();const z=_(s).trim();z&&er(`/search?query=${encodeURIComponent(z)}`)}tn(()=>{u()});var p=$p(),d=ze(p),v=O(d),y=$(O(v),4),k=O(y),E=$(d,2),C=O(E);{var U=I=>{var z=Op();D(I,z)},b=I=>{var z=at(),T=ze(z);{var B=H=>{var de=Np(),$e=O(de);Y(()=>V($e,_(n))),D(H,de)};J(T,H=>{_(n)&&H(B)},!0)}D(I,z)};J(C,I=>{_(r)?I(U):I(b,!1)})}var x=$(C,2),f=$(O(x),2);{var c=I=>{var z=Ap();D(I,z)},m=I=>{var z=Pp();xe(z,21,()=>_(i),T=>T.id,(T,B)=>{{let H=ke(()=>`/book/${encodeURIComponent(_(B).slug??_(B).id)}`);Gr(T,{get book(){return _(B)},get href(){return _(H)}})}}),D(I,z)};J(f,I=>{!_(r)&&_(i).length===0?I(c):I(m,!1)})}var h=$(x,2),g=$(O(h),2);{var w=I=>{var z=zp();D(I,z)},A=I=>{var z=Up();xe(z,21,()=>_(o),T=>T.id,(T,B)=>{{let H=ke(()=>`/book/${encodeURIComponent(_(B).slug??_(B).id)}`);Gr(T,{get book(){return _(B)},get href(){return _(H)}})}}),D(I,z)};J(g,I=>{!_(r)&&_(o).length===0?I(w):I(A,!1)})}en("submit",y,l),br(k,()=>_(s),I=>L(s,I)),D(e,p),ft()}const Zp=6;function Dp(e){const t=new URL("/api/books/search",window.location.origin);return t.searchParams.set("query",e.query),t.searchParams.set("startIndex",String(e.startIndex)),t.searchParams.set("maxResults",String(e.maxResults)),t.searchParams.set("orderBy",e.orderBy),t.searchParams.set("coverSource",e.coverSource),t.searchParams.set("resolution",e.resolution),e.publishedYear!==null&&t.searchParams.set("publishedYear",String(e.publishedYear)),`${t.pathname}${t.search}`}function zo(e){return qt(Dp(e),np,"searchBooks")}function jp(e){return qt(`/api/books/${encodeURIComponent(e)}`,Ki,`getBook:${e}`)}function qp(e,t=Zp){return qt(`/api/books/${encodeURIComponent(e)}/similar?limit=${t}`,ip,`getSimilarBooks:${e}`)}function Fp(e){return qt(`/api/pages/book/${encodeURIComponent(e)}/affiliate-links`,cp,`getAffiliateLinks:${e}`)}function Bp(e){return e.map(t=>({id:null,name:t}))}function Mp(e){return{s3ImagePath:e.s3ImagePath??null,externalImageUrl:e.externalImageUrl??null,width:null,height:null,highResolution:null,preferredUrl:e.preferredUrl??null,fallbackUrl:e.fallbackUrl??null,source:e.source??null}}function Hp(e){const t=Ji(hp,e,"realtimeSearchHit");if(!t.success)return console.warn("Dropped unparseable realtime search hit",e),null;const r=t.data,n=r.publishedDate??null;return{id:r.id,slug:r.slug??r.id,title:r.title??"Untitled",description:r.description??null,publication:{publishedDate:n,language:r.language??null,pageCount:r.pageCount??null,publisher:r.publisher??null},authors:Bp(r.authors),categories:r.categories,collections:[],tags:[],cover:Mp(r.cover??{}),editions:[],recommendationIds:[],extras:{},matchType:r.matchType??null,relevanceScore:r.relevanceScore??null}}function Wp(e){return e.map(Hp).filter(t=>t!==null)}function Vp(e,t){const r=new Map(e.map(n=>[n.id,n]));for(const n of t)r.has(n.id)||r.set(n.id,n);return Array.from(r.values())}var N=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var lr={exports:{}},Gp=lr.exports,Uo;function Jp(){return Uo||(Uo=1,(function(e,t){(function(r,n){n(t)})(Gp,(function(r){function n(f,c){f.terminate=function(){const m=()=>{};this.onerror=m,this.onmessage=m,this.onopen=m;const h=new Date,g=Math.random().toString().substring(2,8),w=this.onclose;this.onclose=A=>{const I=new Date().getTime()-h.getTime();c(`Discarded socket (#${g})  closed after ${I}ms, with code/reason: ${A.code}/${A.reason}`)},this.close(),w?.call(f,{code:4001,reason:`Quick discarding socket (#${g}) without waiting for the shutdown sequence.`,wasClean:!1})}}const i={LF:`
`,NULL:"\0"};class o{get body(){return!this._body&&this.isBinaryBody&&(this._body=new TextDecoder().decode(this._binaryBody)),this._body||""}get binaryBody(){return!this._binaryBody&&!this.isBinaryBody&&(this._binaryBody=new TextEncoder().encode(this._body)),this._binaryBody}constructor(c){const{command:m,headers:h,body:g,binaryBody:w,escapeHeaderValues:A,skipContentLengthHeader:I}=c;this.command=m,this.headers=Object.assign({},h||{}),w?(this._binaryBody=w,this.isBinaryBody=!0):(this._body=g||"",this.isBinaryBody=!1),this.escapeHeaderValues=A||!1,this.skipContentLengthHeader=I||!1}static fromRawFrame(c,m){const h={},g=w=>w.replace(/^\s+|\s+$/g,"");for(const w of c.headers.reverse()){w.indexOf(":");const A=g(w[0]);let I=g(w[1]);m&&c.command!=="CONNECT"&&c.command!=="CONNECTED"&&(I=o.hdrValueUnEscape(I)),h[A]=I}return new o({command:c.command,headers:h,binaryBody:c.binaryBody,escapeHeaderValues:m})}toString(){return this.serializeCmdAndHeaders()}serialize(){const c=this.serializeCmdAndHeaders();return this.isBinaryBody?o.toUnit8Array(c,this._binaryBody).buffer:c+this._body+i.NULL}serializeCmdAndHeaders(){const c=[this.command];this.skipContentLengthHeader&&delete this.headers["content-length"];for(const m of Object.keys(this.headers||{})){const h=this.headers[m];this.escapeHeaderValues&&this.command!=="CONNECT"&&this.command!=="CONNECTED"?c.push(`${m}:${o.hdrValueEscape(`${h}`)}`):c.push(`${m}:${h}`)}return(this.isBinaryBody||!this.isBodyEmpty()&&!this.skipContentLengthHeader)&&c.push(`content-length:${this.bodyLength()}`),c.join(i.LF)+i.LF+i.LF}isBodyEmpty(){return this.bodyLength()===0}bodyLength(){const c=this.binaryBody;return c?c.length:0}static sizeOfUTF8(c){return c?new TextEncoder().encode(c).length:0}static toUnit8Array(c,m){const h=new TextEncoder().encode(c),g=new Uint8Array([0]),w=new Uint8Array(h.length+m.length+g.length);return w.set(h),w.set(m,h.length),w.set(g,h.length+m.length),w}static marshall(c){return new o(c).serialize()}static hdrValueEscape(c){return c.replace(/\\/g,"\\\\").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/:/g,"\\c")}static hdrValueUnEscape(c){return c.replace(/\\r/g,"\r").replace(/\\n/g,`
`).replace(/\\c/g,":").replace(/\\\\/g,"\\")}}const s=0,a=10,u=13,l=58;class p{constructor(c,m){this.onFrame=c,this.onIncomingPing=m,this._encoder=new TextEncoder,this._decoder=new TextDecoder,this._token=[],this._initState()}parseChunk(c,m=!1){let h;if(typeof c=="string"?h=this._encoder.encode(c):h=new Uint8Array(c),m&&h[h.length-1]!==0){const g=new Uint8Array(h.length+1);g.set(h,0),g[h.length]=0,h=g}for(let g=0;g<h.length;g++){const w=h[g];this._onByte(w)}}_collectFrame(c){if(c!==s&&c!==u){if(c===a){this.onIncomingPing();return}this._onByte=this._collectCommand,this._reinjectByte(c)}}_collectCommand(c){if(c!==u){if(c===a){this._results.command=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaders;return}this._consumeByte(c)}}_collectHeaders(c){if(c!==u){if(c===a){this._setupCollectBody();return}this._onByte=this._collectHeaderKey,this._reinjectByte(c)}}_reinjectByte(c){this._onByte(c)}_collectHeaderKey(c){if(c===l){this._headerKey=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaderValue;return}this._consumeByte(c)}_collectHeaderValue(c){if(c!==u){if(c===a){this._results.headers.push([this._headerKey,this._consumeTokenAsUTF8()]),this._headerKey=void 0,this._onByte=this._collectHeaders;return}this._consumeByte(c)}}_setupCollectBody(){const c=this._results.headers.filter(m=>m[0]==="content-length")[0];c?(this._bodyBytesRemaining=parseInt(c[1],10),this._onByte=this._collectBodyFixedSize):this._onByte=this._collectBodyNullTerminated}_collectBodyNullTerminated(c){if(c===s){this._retrievedBody();return}this._consumeByte(c)}_collectBodyFixedSize(c){if(this._bodyBytesRemaining--===0){this._retrievedBody();return}this._consumeByte(c)}_retrievedBody(){this._results.binaryBody=this._consumeTokenAsRaw();try{this.onFrame(this._results)}catch(c){console.log("Ignoring an exception thrown by a frame handler. Original exception: ",c)}this._initState()}_consumeByte(c){this._token.push(c)}_consumeTokenAsUTF8(){return this._decoder.decode(this._consumeTokenAsRaw())}_consumeTokenAsRaw(){const c=new Uint8Array(this._token);return this._token=[],c}_initState(){this._results={command:void 0,headers:[],binaryBody:void 0},this._token=[],this._headerKey=void 0,this._onByte=this._collectFrame}}r.StompSocketState=void 0,(function(f){f[f.CONNECTING=0]="CONNECTING",f[f.OPEN=1]="OPEN",f[f.CLOSING=2]="CLOSING",f[f.CLOSED=3]="CLOSED"})(r.StompSocketState||(r.StompSocketState={})),r.ActivationState=void 0,(function(f){f[f.ACTIVE=0]="ACTIVE",f[f.DEACTIVATING=1]="DEACTIVATING",f[f.INACTIVE=2]="INACTIVE"})(r.ActivationState||(r.ActivationState={})),r.ReconnectionTimeMode=void 0,(function(f){f[f.LINEAR=0]="LINEAR",f[f.EXPONENTIAL=1]="EXPONENTIAL"})(r.ReconnectionTimeMode||(r.ReconnectionTimeMode={})),r.TickerStrategy=void 0,(function(f){f.Interval="interval",f.Worker="worker"})(r.TickerStrategy||(r.TickerStrategy={}));class d{constructor(c,m=r.TickerStrategy.Interval,h){this._interval=c,this._strategy=m,this._debug=h,this._workerScript=`
    var startTime = Date.now();
    setInterval(function() {
        self.postMessage(Date.now() - startTime);
    }, ${this._interval});
  `}start(c){this.stop(),this.shouldUseWorker()?this.runWorker(c):this.runInterval(c)}stop(){this.disposeWorker(),this.disposeInterval()}shouldUseWorker(){return typeof Worker<"u"&&this._strategy===r.TickerStrategy.Worker}runWorker(c){this._debug("Using runWorker for outgoing pings"),this._worker||(this._worker=new Worker(URL.createObjectURL(new Blob([this._workerScript],{type:"text/javascript"}))),this._worker.onmessage=m=>c(m.data))}runInterval(c){if(this._debug("Using runInterval for outgoing pings"),!this._timer){const m=Date.now();this._timer=setInterval(()=>{c(Date.now()-m)},this._interval)}}disposeWorker(){this._worker&&(this._worker.terminate(),delete this._worker,this._debug("Outgoing ping disposeWorker"))}disposeInterval(){this._timer&&(clearInterval(this._timer),delete this._timer,this._debug("Outgoing ping disposeInterval"))}}class v{constructor(c){this.versions=c}supportedVersions(){return this.versions.join(",")}protocolVersions(){return this.versions.map(c=>`v${c.replace(".","")}.stomp`)}}v.V1_0="1.0",v.V1_1="1.1",v.V1_2="1.2",v.default=new v([v.V1_2,v.V1_1,v.V1_0]);class y{get connectedVersion(){return this._connectedVersion}get connected(){return this._connected}constructor(c,m,h){this._client=c,this._webSocket=m,this._connected=!1,this._serverFrameHandlers={CONNECTED:g=>{this.debug(`connected to server ${g.headers.server}`),this._connected=!0,this._connectedVersion=g.headers.version,this._connectedVersion===v.V1_2&&(this._escapeHeaderValues=!0),this._setupHeartbeat(g.headers),this.onConnect(g)},MESSAGE:g=>{const w=g.headers.subscription,A=this._subscriptions[w]||this.onUnhandledMessage,I=g,z=this,T=this._connectedVersion===v.V1_2?I.headers.ack:I.headers["message-id"];I.ack=(B={})=>z.ack(T,w,B),I.nack=(B={})=>z.nack(T,w,B),A(I)},RECEIPT:g=>{const w=this._receiptWatchers[g.headers["receipt-id"]];w?(w(g),delete this._receiptWatchers[g.headers["receipt-id"]]):this.onUnhandledReceipt(g)},ERROR:g=>{this.onStompError(g)}},this._counter=0,this._subscriptions={},this._receiptWatchers={},this._partialData="",this._escapeHeaderValues=!1,this._lastServerActivityTS=Date.now(),this.debug=h.debug,this.stompVersions=h.stompVersions,this.connectHeaders=h.connectHeaders,this.disconnectHeaders=h.disconnectHeaders,this.heartbeatIncoming=h.heartbeatIncoming,this.heartbeatToleranceMultiplier=h.heartbeatGracePeriods,this.heartbeatOutgoing=h.heartbeatOutgoing,this.splitLargeFrames=h.splitLargeFrames,this.maxWebSocketChunkSize=h.maxWebSocketChunkSize,this.forceBinaryWSFrames=h.forceBinaryWSFrames,this.logRawCommunication=h.logRawCommunication,this.appendMissingNULLonIncoming=h.appendMissingNULLonIncoming,this.discardWebsocketOnCommFailure=h.discardWebsocketOnCommFailure,this.onConnect=h.onConnect,this.onDisconnect=h.onDisconnect,this.onStompError=h.onStompError,this.onWebSocketClose=h.onWebSocketClose,this.onWebSocketError=h.onWebSocketError,this.onUnhandledMessage=h.onUnhandledMessage,this.onUnhandledReceipt=h.onUnhandledReceipt,this.onUnhandledFrame=h.onUnhandledFrame,this.onHeartbeatReceived=h.onHeartbeatReceived,this.onHeartbeatLost=h.onHeartbeatLost}start(){const c=new p(h=>{const g=o.fromRawFrame(h,this._escapeHeaderValues);this.logRawCommunication||this.debug(`<<< ${g}`),(this._serverFrameHandlers[g.command]||this.onUnhandledFrame)(g)},()=>{this.debug("<<< PONG"),this.onHeartbeatReceived()});this._webSocket.onmessage=h=>{if(this.debug("Received data"),this._lastServerActivityTS=Date.now(),this.logRawCommunication){const g=h.data instanceof ArrayBuffer?new TextDecoder().decode(h.data):h.data;this.debug(`<<< ${g}`)}c.parseChunk(h.data,this.appendMissingNULLonIncoming)},this._webSocket.onclose=h=>{this.debug(`Connection closed to ${this._webSocket.url}`),this._cleanUp(),this.onWebSocketClose(h)},this._webSocket.onerror=h=>{this.onWebSocketError(h)};const m=()=>{const h=Object.assign({},this.connectHeaders);this.debug("Web Socket Opened..."),h["accept-version"]=this.stompVersions.supportedVersions(),h["heart-beat"]=[this.heartbeatOutgoing,this.heartbeatIncoming].join(","),this._transmit({command:"CONNECT",headers:h})};this._webSocket.readyState===r.StompSocketState.OPEN?m():this._webSocket.onopen=m}_setupHeartbeat(c){if(c.version!==v.V1_1&&c.version!==v.V1_2||!c["heart-beat"])return;const[m,h]=c["heart-beat"].split(",").map(g=>parseInt(g,10));if(this.heartbeatOutgoing!==0&&h!==0){const g=Math.max(this.heartbeatOutgoing,h);this.debug(`send PING every ${g}ms`),this._pinger=new d(g,this._client.heartbeatStrategy,this.debug),this._pinger.start(()=>{this._webSocket.readyState===r.StompSocketState.OPEN&&(this._webSocket.send(i.LF),this.debug(">>> PING"))})}if(this.heartbeatIncoming!==0&&m!==0){const g=Math.max(this.heartbeatIncoming,m);this.debug(`check PONG every ${g}ms`),this._ponger=setInterval(()=>{const w=Date.now()-this._lastServerActivityTS;w>g*this.heartbeatToleranceMultiplier&&(this.debug(`did not receive server activity for the last ${w}ms`),this.onHeartbeatLost(),this._closeOrDiscardWebsocket())},g)}}_closeOrDiscardWebsocket(){this.discardWebsocketOnCommFailure?(this.debug("Discarding websocket, the underlying socket may linger for a while"),this.discardWebsocket()):(this.debug("Issuing close on the websocket"),this._closeWebsocket())}forceDisconnect(){this._webSocket&&(this._webSocket.readyState===r.StompSocketState.CONNECTING||this._webSocket.readyState===r.StompSocketState.OPEN)&&this._closeOrDiscardWebsocket()}_closeWebsocket(){this._webSocket.onmessage=()=>{},this._webSocket.close()}discardWebsocket(){typeof this._webSocket.terminate!="function"&&n(this._webSocket,c=>this.debug(c)),this._webSocket.terminate()}_transmit(c){const{command:m,headers:h,body:g,binaryBody:w,skipContentLengthHeader:A}=c,I=new o({command:m,headers:h,body:g,binaryBody:w,escapeHeaderValues:this._escapeHeaderValues,skipContentLengthHeader:A});let z=I.serialize();if(this.logRawCommunication?this.debug(`>>> ${z}`):this.debug(`>>> ${I}`),this.forceBinaryWSFrames&&typeof z=="string"&&(z=new TextEncoder().encode(z)),typeof z!="string"||!this.splitLargeFrames)this._webSocket.send(z);else{let T=z;for(;T.length>0;){const B=T.substring(0,this.maxWebSocketChunkSize);T=T.substring(this.maxWebSocketChunkSize),this._webSocket.send(B),this.debug(`chunk sent = ${B.length}, remaining = ${T.length}`)}}}dispose(){if(this.connected)try{const c=Object.assign({},this.disconnectHeaders);c.receipt||(c.receipt=`close-${this._counter++}`),this.watchForReceipt(c.receipt,m=>{this._closeWebsocket(),this._cleanUp(),this.onDisconnect(m)}),this._transmit({command:"DISCONNECT",headers:c})}catch(c){this.debug(`Ignoring error during disconnect ${c}`)}else(this._webSocket.readyState===r.StompSocketState.CONNECTING||this._webSocket.readyState===r.StompSocketState.OPEN)&&this._closeWebsocket()}_cleanUp(){this._connected=!1,this._pinger&&(this._pinger.stop(),this._pinger=void 0),this._ponger&&(clearInterval(this._ponger),this._ponger=void 0)}publish(c){const{destination:m,headers:h,body:g,binaryBody:w,skipContentLengthHeader:A}=c,I=Object.assign({destination:m},h);this._transmit({command:"SEND",headers:I,body:g,binaryBody:w,skipContentLengthHeader:A})}watchForReceipt(c,m){this._receiptWatchers[c]=m}subscribe(c,m,h={}){h=Object.assign({},h),h.id||(h.id=`sub-${this._counter++}`),h.destination=c,this._subscriptions[h.id]=m,this._transmit({command:"SUBSCRIBE",headers:h});const g=this;return{id:h.id,unsubscribe(w){return g.unsubscribe(h.id,w)}}}unsubscribe(c,m={}){m=Object.assign({},m),delete this._subscriptions[c],m.id=c,this._transmit({command:"UNSUBSCRIBE",headers:m})}begin(c){const m=c||`tx-${this._counter++}`;this._transmit({command:"BEGIN",headers:{transaction:m}});const h=this;return{id:m,commit(){h.commit(m)},abort(){h.abort(m)}}}commit(c){this._transmit({command:"COMMIT",headers:{transaction:c}})}abort(c){this._transmit({command:"ABORT",headers:{transaction:c}})}ack(c,m,h={}){h=Object.assign({},h),this._connectedVersion===v.V1_2?h.id=c:h["message-id"]=c,h.subscription=m,this._transmit({command:"ACK",headers:h})}nack(c,m,h={}){return h=Object.assign({},h),this._connectedVersion===v.V1_2?h.id=c:h["message-id"]=c,h.subscription=m,this._transmit({command:"NACK",headers:h})}}class k{get webSocket(){return this._stompHandler?._webSocket}get disconnectHeaders(){return this._disconnectHeaders}set disconnectHeaders(c){this._disconnectHeaders=c,this._stompHandler&&(this._stompHandler.disconnectHeaders=this._disconnectHeaders)}get connected(){return!!this._stompHandler&&this._stompHandler.connected}get connectedVersion(){return this._stompHandler?this._stompHandler.connectedVersion:void 0}get active(){return this.state===r.ActivationState.ACTIVE}_changeState(c){this.state=c,this.onChangeState(c)}constructor(c={}){this.stompVersions=v.default,this.connectionTimeout=0,this.reconnectDelay=5e3,this._nextReconnectDelay=0,this.maxReconnectDelay=900*1e3,this.reconnectTimeMode=r.ReconnectionTimeMode.LINEAR,this.heartbeatIncoming=1e4,this.heartbeatToleranceMultiplier=2,this.heartbeatOutgoing=1e4,this.heartbeatStrategy=r.TickerStrategy.Interval,this.splitLargeFrames=!1,this.maxWebSocketChunkSize=8*1024,this.forceBinaryWSFrames=!1,this.appendMissingNULLonIncoming=!1,this.discardWebsocketOnCommFailure=!1,this.state=r.ActivationState.INACTIVE;const m=()=>{};this.debug=m,this.beforeConnect=m,this.onConnect=m,this.onDisconnect=m,this.onUnhandledMessage=m,this.onUnhandledReceipt=m,this.onUnhandledFrame=m,this.onHeartbeatReceived=m,this.onHeartbeatLost=m,this.onStompError=m,this.onWebSocketClose=m,this.onWebSocketError=m,this.logRawCommunication=!1,this.onChangeState=m,this.connectHeaders={},this._disconnectHeaders={},this.configure(c)}configure(c){Object.assign(this,c),this.maxReconnectDelay>0&&this.maxReconnectDelay<this.reconnectDelay&&(this.debug(`Warning: maxReconnectDelay (${this.maxReconnectDelay}ms) is less than reconnectDelay (${this.reconnectDelay}ms). Using reconnectDelay as the maxReconnectDelay delay.`),this.maxReconnectDelay=this.reconnectDelay)}activate(){const c=()=>{if(this.active){this.debug("Already ACTIVE, ignoring request to activate");return}this._changeState(r.ActivationState.ACTIVE),this._nextReconnectDelay=this.reconnectDelay,this._connect()};this.state===r.ActivationState.DEACTIVATING?(this.debug("Waiting for deactivation to finish before activating"),this.deactivate().then(()=>{c()})):c()}async _connect(){if(await this.beforeConnect(this),this._stompHandler){this.debug("There is already a stompHandler, skipping the call to connect");return}if(!this.active){this.debug("Client has been marked inactive, will not attempt to connect");return}this.connectionTimeout>0&&(this._connectionWatcher&&clearTimeout(this._connectionWatcher),this._connectionWatcher=setTimeout(()=>{this.connected||(this.debug(`Connection not established in ${this.connectionTimeout}ms, closing socket`),this.forceDisconnect())},this.connectionTimeout)),this.debug("Opening Web Socket...");const c=this._createWebSocket();this._stompHandler=new y(this,c,{debug:this.debug,stompVersions:this.stompVersions,connectHeaders:this.connectHeaders,disconnectHeaders:this._disconnectHeaders,heartbeatIncoming:this.heartbeatIncoming,heartbeatGracePeriods:this.heartbeatToleranceMultiplier,heartbeatOutgoing:this.heartbeatOutgoing,heartbeatStrategy:this.heartbeatStrategy,splitLargeFrames:this.splitLargeFrames,maxWebSocketChunkSize:this.maxWebSocketChunkSize,forceBinaryWSFrames:this.forceBinaryWSFrames,logRawCommunication:this.logRawCommunication,appendMissingNULLonIncoming:this.appendMissingNULLonIncoming,discardWebsocketOnCommFailure:this.discardWebsocketOnCommFailure,onConnect:m=>{if(this._connectionWatcher&&(clearTimeout(this._connectionWatcher),this._connectionWatcher=void 0),this._nextReconnectDelay=this.reconnectDelay,!this.active){this.debug("STOMP got connected while deactivate was issued, will disconnect now"),this._disposeStompHandler();return}this.onConnect(m)},onDisconnect:m=>{this.onDisconnect(m)},onStompError:m=>{this.onStompError(m)},onWebSocketClose:m=>{this._stompHandler=void 0,this.state===r.ActivationState.DEACTIVATING&&this._changeState(r.ActivationState.INACTIVE),this.onWebSocketClose(m),this.active&&this._schedule_reconnect()},onWebSocketError:m=>{this.onWebSocketError(m)},onUnhandledMessage:m=>{this.onUnhandledMessage(m)},onUnhandledReceipt:m=>{this.onUnhandledReceipt(m)},onUnhandledFrame:m=>{this.onUnhandledFrame(m)},onHeartbeatReceived:()=>{this.onHeartbeatReceived()},onHeartbeatLost:()=>{this.onHeartbeatLost()}}),this._stompHandler.start()}_createWebSocket(){let c;if(this.webSocketFactory)c=this.webSocketFactory();else if(this.brokerURL)c=new WebSocket(this.brokerURL,this.stompVersions.protocolVersions());else throw new Error("Either brokerURL or webSocketFactory must be provided");return c.binaryType="arraybuffer",c}_schedule_reconnect(){this._nextReconnectDelay>0&&(this.debug(`STOMP: scheduling reconnection in ${this._nextReconnectDelay}ms`),this._reconnector=setTimeout(()=>{this.reconnectTimeMode===r.ReconnectionTimeMode.EXPONENTIAL&&(this._nextReconnectDelay=this._nextReconnectDelay*2,this.maxReconnectDelay!==0&&(this._nextReconnectDelay=Math.min(this._nextReconnectDelay,this.maxReconnectDelay))),this._connect()},this._nextReconnectDelay))}async deactivate(c={}){const m=c.force||!1,h=this.active;let g;if(this.state===r.ActivationState.INACTIVE)return this.debug("Already INACTIVE, nothing more to do"),Promise.resolve();if(this._changeState(r.ActivationState.DEACTIVATING),this._nextReconnectDelay=0,this._reconnector&&(clearTimeout(this._reconnector),this._reconnector=void 0),this._stompHandler&&this.webSocket.readyState!==r.StompSocketState.CLOSED){const w=this._stompHandler.onWebSocketClose;g=new Promise((A,I)=>{this._stompHandler.onWebSocketClose=z=>{w(z),A()}})}else return this._changeState(r.ActivationState.INACTIVE),Promise.resolve();return m?this._stompHandler?.discardWebsocket():h&&this._disposeStompHandler(),g}forceDisconnect(){this._stompHandler&&this._stompHandler.forceDisconnect()}_disposeStompHandler(){this._stompHandler&&this._stompHandler.dispose()}publish(c){this._checkConnection(),this._stompHandler.publish(c)}_checkConnection(){if(!this.connected)throw new TypeError("There is no underlying STOMP connection")}watchForReceipt(c,m){this._checkConnection(),this._stompHandler.watchForReceipt(c,m)}subscribe(c,m,h={}){return this._checkConnection(),this._stompHandler.subscribe(c,m,h)}unsubscribe(c,m={}){this._checkConnection(),this._stompHandler.unsubscribe(c,m)}begin(c){return this._checkConnection(),this._stompHandler.begin(c)}commit(c){this._checkConnection(),this._stompHandler.commit(c)}abort(c){this._checkConnection(),this._stompHandler.abort(c)}ack(c,m,h={}){this._checkConnection(),this._stompHandler.ack(c,m,h)}nack(c,m,h={}){this._checkConnection(),this._stompHandler.nack(c,m,h)}}class E{}class C{}class U{constructor(c){this.client=c}get outgoing(){return this.client.heartbeatOutgoing}set outgoing(c){this.client.heartbeatOutgoing=c}get incoming(){return this.client.heartbeatIncoming}set incoming(c){this.client.heartbeatIncoming=c}}class b extends k{constructor(c){super(),this.maxWebSocketFrameSize=16*1024,this._heartbeatInfo=new U(this),this.reconnect_delay=0,this.webSocketFactory=c,this.debug=(...m)=>{console.log(...m)}}_parseConnect(...c){let m,h,g,w={};if(c.length<2)throw new Error("Connect requires at least 2 arguments");return typeof c[1]=="function"?[w,h,g,m]=c:c.length===6?[w.login,w.passcode,h,g,m,w.host]=c:[w.login,w.passcode,h,g,m]=c,[w,h,g,m]}connect(...c){const m=this._parseConnect(...c);m[0]&&(this.connectHeaders=m[0]),m[1]&&(this.onConnect=m[1]),m[2]&&(this.onStompError=m[2]),m[3]&&(this.onWebSocketClose=m[3]),super.activate()}disconnect(c,m={}){c&&(this.onDisconnect=c),this.disconnectHeaders=m,super.deactivate()}send(c,m={},h=""){m=Object.assign({},m);const g=m["content-length"]===!1;g&&delete m["content-length"],this.publish({destination:c,headers:m,body:h,skipContentLengthHeader:g})}set reconnect_delay(c){this.reconnectDelay=c}get ws(){return this.webSocket}get version(){return this.connectedVersion}get onreceive(){return this.onUnhandledMessage}set onreceive(c){this.onUnhandledMessage=c}get onreceipt(){return this.onUnhandledReceipt}set onreceipt(c){this.onUnhandledReceipt=c}get heartbeat(){return this._heartbeatInfo}set heartbeat(c){this.heartbeatIncoming=c.incoming,this.heartbeatOutgoing=c.outgoing}}class x{static client(c,m){m==null&&(m=v.default.protocolVersions());const h=()=>{const g=x.WebSocketClass||WebSocket;return new g(c,m)};return new b(h)}static over(c){let m;return typeof c=="function"?m=c:(console.warn("Stomp.over did not receive a factory, auto reconnect will not work. Please see https://stomp-js.github.io/api-docs/latest/classes/Stomp.html#over"),m=()=>c),new b(m)}}x.WebSocketClass=null,r.Client=k,r.CompatClient=b,r.FrameImpl=o,r.Parser=p,r.Stomp=x,r.StompConfig=E,r.StompHeaders=C,r.Versions=v}))})(lr,lr.exports)),lr.exports}var Kp=Jp(),yn={exports:{}},$r={},$o;function Yp(){return $o||($o=1,N.crypto&&N.crypto.getRandomValues?$r.randomBytes=function(e){var t=new Uint8Array(e);return N.crypto.getRandomValues(t),t}:$r.randomBytes=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=Math.floor(Math.random()*256);return t}),$r}var wn,Lo;function rr(){if(Lo)return wn;Lo=1;var e=Yp(),t="abcdefghijklmnopqrstuvwxyz012345";return wn={string:function(r){for(var n=t.length,i=e.randomBytes(r),o=[],s=0;s<r;s++)o.push(t.substr(i[s]%n,1));return o.join("")},number:function(r){return Math.floor(Math.random()*r)},numberString:function(r){var n=(""+(r-1)).length,i=new Array(n+1).join("0");return(i+this.number(r)).slice(-n)}},wn}var Zo;function Tt(){return Zo||(Zo=1,(function(e){var t=rr(),r={},n=!1,i=N.chrome&&N.chrome.app&&N.chrome.app.runtime;e.exports={attachEvent:function(s,a){typeof N.addEventListener<"u"?N.addEventListener(s,a,!1):N.document&&N.attachEvent&&(N.document.attachEvent("on"+s,a),N.attachEvent("on"+s,a))},detachEvent:function(s,a){typeof N.addEventListener<"u"?N.removeEventListener(s,a,!1):N.document&&N.detachEvent&&(N.document.detachEvent("on"+s,a),N.detachEvent("on"+s,a))},unloadAdd:function(s){if(i)return null;var a=t.string(8);return r[a]=s,n&&setTimeout(this.triggerUnloadCallbacks,0),a},unloadDel:function(s){s in r&&delete r[s]},triggerUnloadCallbacks:function(){for(var s in r)r[s](),delete r[s]}};var o=function(){n||(n=!0,e.exports.triggerUnloadCallbacks())};i||e.exports.attachEvent("unload",o)})(yn)),yn.exports}var kn,Do;function Qp(){return Do||(Do=1,kn=function(t,r){if(r=r.split(":")[0],t=+t,!t)return!1;switch(r){case"http":case"ws":return t!==80;case"https":case"wss":return t!==443;case"ftp":return t!==21;case"gopher":return t!==70;case"file":return!1}return t!==0}),kn}var Lr={},jo;function ev(){if(jo)return Lr;jo=1;var e=Object.prototype.hasOwnProperty,t;function r(s){try{return decodeURIComponent(s.replace(/\+/g," "))}catch{return null}}function n(s){try{return encodeURIComponent(s)}catch{return null}}function i(s){for(var a=/([^=?#&]+)=?([^&]*)/g,u={},l;l=a.exec(s);){var p=r(l[1]),d=r(l[2]);p===null||d===null||p in u||(u[p]=d)}return u}function o(s,a){a=a||"";var u=[],l,p;typeof a!="string"&&(a="?");for(p in s)if(e.call(s,p)){if(l=s[p],!l&&(l===null||l===t||isNaN(l))&&(l=""),p=n(p),l=n(l),p===null||l===null)continue;u.push(p+"="+l)}return u.length?a+u.join("&"):""}return Lr.stringify=o,Lr.parse=i,Lr}var xn,qo;function cc(){if(qo)return xn;qo=1;var e=Qp(),t=ev(),r=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,n=/[\n\r\t]/g,i=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,o=/:\d+$/,s=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,a=/^[a-zA-Z]:/;function u(b){return(b||"").toString().replace(r,"")}var l=[["#","hash"],["?","query"],function(x,f){return v(f.protocol)?x.replace(/\\/g,"/"):x},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],p={hash:1,query:1};function d(b){var x;typeof window<"u"?x=window:typeof N<"u"?x=N:typeof self<"u"?x=self:x={};var f=x.location||{};b=b||f;var c={},m=typeof b,h;if(b.protocol==="blob:")c=new E(unescape(b.pathname),{});else if(m==="string"){c=new E(b,{});for(h in p)delete c[h]}else if(m==="object"){for(h in b)h in p||(c[h]=b[h]);c.slashes===void 0&&(c.slashes=i.test(b.href))}return c}function v(b){return b==="file:"||b==="ftp:"||b==="http:"||b==="https:"||b==="ws:"||b==="wss:"}function y(b,x){b=u(b),b=b.replace(n,""),x=x||{};var f=s.exec(b),c=f[1]?f[1].toLowerCase():"",m=!!f[2],h=!!f[3],g=0,w;return m?h?(w=f[2]+f[3]+f[4],g=f[2].length+f[3].length):(w=f[2]+f[4],g=f[2].length):h?(w=f[3]+f[4],g=f[3].length):w=f[4],c==="file:"?g>=2&&(w=w.slice(2)):v(c)?w=f[4]:c?m&&(w=w.slice(2)):g>=2&&v(x.protocol)&&(w=f[4]),{protocol:c,slashes:m||v(c),slashesCount:g,rest:w}}function k(b,x){if(b==="")return x;for(var f=(x||"/").split("/").slice(0,-1).concat(b.split("/")),c=f.length,m=f[c-1],h=!1,g=0;c--;)f[c]==="."?f.splice(c,1):f[c]===".."?(f.splice(c,1),g++):g&&(c===0&&(h=!0),f.splice(c,1),g--);return h&&f.unshift(""),(m==="."||m==="..")&&f.push(""),f.join("/")}function E(b,x,f){if(b=u(b),b=b.replace(n,""),!(this instanceof E))return new E(b,x,f);var c,m,h,g,w,A,I=l.slice(),z=typeof x,T=this,B=0;for(z!=="object"&&z!=="string"&&(f=x,x=null),f&&typeof f!="function"&&(f=t.parse),x=d(x),m=y(b||"",x),c=!m.protocol&&!m.slashes,T.slashes=m.slashes||c&&x.slashes,T.protocol=m.protocol||x.protocol||"",b=m.rest,(m.protocol==="file:"&&(m.slashesCount!==2||a.test(b))||!m.slashes&&(m.protocol||m.slashesCount<2||!v(T.protocol)))&&(I[3]=[/(.*)/,"pathname"]);B<I.length;B++){if(g=I[B],typeof g=="function"){b=g(b,T);continue}h=g[0],A=g[1],h!==h?T[A]=b:typeof h=="string"?(w=h==="@"?b.lastIndexOf(h):b.indexOf(h),~w&&(typeof g[2]=="number"?(T[A]=b.slice(0,w),b=b.slice(w+g[2])):(T[A]=b.slice(w),b=b.slice(0,w)))):(w=h.exec(b))&&(T[A]=w[1],b=b.slice(0,w.index)),T[A]=T[A]||c&&g[3]&&x[A]||"",g[4]&&(T[A]=T[A].toLowerCase())}f&&(T.query=f(T.query)),c&&x.slashes&&T.pathname.charAt(0)!=="/"&&(T.pathname!==""||x.pathname!=="")&&(T.pathname=k(T.pathname,x.pathname)),T.pathname.charAt(0)!=="/"&&v(T.protocol)&&(T.pathname="/"+T.pathname),e(T.port,T.protocol)||(T.host=T.hostname,T.port=""),T.username=T.password="",T.auth&&(w=T.auth.indexOf(":"),~w?(T.username=T.auth.slice(0,w),T.username=encodeURIComponent(decodeURIComponent(T.username)),T.password=T.auth.slice(w+1),T.password=encodeURIComponent(decodeURIComponent(T.password))):T.username=encodeURIComponent(decodeURIComponent(T.auth)),T.auth=T.password?T.username+":"+T.password:T.username),T.origin=T.protocol!=="file:"&&v(T.protocol)&&T.host?T.protocol+"//"+T.host:"null",T.href=T.toString()}function C(b,x,f){var c=this;switch(b){case"query":typeof x=="string"&&x.length&&(x=(f||t.parse)(x)),c[b]=x;break;case"port":c[b]=x,e(x,c.protocol)?x&&(c.host=c.hostname+":"+x):(c.host=c.hostname,c[b]="");break;case"hostname":c[b]=x,c.port&&(x+=":"+c.port),c.host=x;break;case"host":c[b]=x,o.test(x)?(x=x.split(":"),c.port=x.pop(),c.hostname=x.join(":")):(c.hostname=x,c.port="");break;case"protocol":c.protocol=x.toLowerCase(),c.slashes=!f;break;case"pathname":case"hash":if(x){var m=b==="pathname"?"/":"#";c[b]=x.charAt(0)!==m?m+x:x}else c[b]=x;break;case"username":case"password":c[b]=encodeURIComponent(x);break;case"auth":var h=x.indexOf(":");~h?(c.username=x.slice(0,h),c.username=encodeURIComponent(decodeURIComponent(c.username)),c.password=x.slice(h+1),c.password=encodeURIComponent(decodeURIComponent(c.password))):c.username=encodeURIComponent(decodeURIComponent(x))}for(var g=0;g<l.length;g++){var w=l[g];w[4]&&(c[w[1]]=c[w[1]].toLowerCase())}return c.auth=c.password?c.username+":"+c.password:c.username,c.origin=c.protocol!=="file:"&&v(c.protocol)&&c.host?c.protocol+"//"+c.host:"null",c.href=c.toString(),c}function U(b){(!b||typeof b!="function")&&(b=t.stringify);var x,f=this,c=f.host,m=f.protocol;m&&m.charAt(m.length-1)!==":"&&(m+=":");var h=m+(f.protocol&&f.slashes||v(f.protocol)?"//":"");return f.username?(h+=f.username,f.password&&(h+=":"+f.password),h+="@"):f.password?(h+=":"+f.password,h+="@"):f.protocol!=="file:"&&v(f.protocol)&&!c&&f.pathname!=="/"&&(h+="@"),(c[c.length-1]===":"||o.test(f.hostname)&&!f.port)&&(c+=":"),h+=c+f.pathname,x=typeof f.query=="object"?b(f.query):f.query,x&&(h+=x.charAt(0)!=="?"?"?"+x:x),f.hash&&(h+=f.hash),h}return E.prototype={set:C,toString:U},E.extractProtocol=y,E.location=d,E.trimLeft=u,E.qs=t,xn=E,xn}var Sn,Fo;function Me(){if(Fo)return Sn;Fo=1;var e=cc();return Sn={getOrigin:function(t){if(!t)return null;var r=new e(t);if(r.protocol==="file:")return null;var n=r.port;return n||(n=r.protocol==="https:"?"443":"80"),r.protocol+"//"+r.hostname+":"+n},isOriginEqual:function(t,r){var n=this.getOrigin(t)===this.getOrigin(r);return n},isSchemeEqual:function(t,r){return t.split(":")[0]===r.split(":")[0]},addPath:function(t,r){var n=t.split("?");return n[0]+r+(n[1]?"?"+n[1]:"")},addQuery:function(t,r){return t+(t.indexOf("?")===-1?"?"+r:"&"+r)},isLoopbackAddr:function(t){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(t)||/^\[::1\]$/.test(t)}},Sn}var Zr={exports:{}},Bo;function G(){return Bo||(Bo=1,typeof Object.create=="function"?Zr.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:Zr.exports=function(t,r){if(r){t.super_=r;var n=function(){};n.prototype=r.prototype,t.prototype=new n,t.prototype.constructor=t}}),Zr.exports}var En={},In,Mo;function uc(){if(Mo)return In;Mo=1;function e(){this._listeners={}}return e.prototype.addEventListener=function(t,r){t in this._listeners||(this._listeners[t]=[]);var n=this._listeners[t];n.indexOf(r)===-1&&(n=n.concat([r])),this._listeners[t]=n},e.prototype.removeEventListener=function(t,r){var n=this._listeners[t];if(n){var i=n.indexOf(r);if(i!==-1){n.length>1?this._listeners[t]=n.slice(0,i).concat(n.slice(i+1)):delete this._listeners[t];return}}},e.prototype.dispatchEvent=function(){var t=arguments[0],r=t.type,n=arguments.length===1?[t]:Array.apply(null,arguments);if(this["on"+r]&&this["on"+r].apply(this,n),r in this._listeners)for(var i=this._listeners[r],o=0;o<i.length;o++)i[o].apply(this,n)},In=e,In}var Ho;function ye(){if(Ho)return En;Ho=1;var e=G(),t=uc();function r(){t.call(this)}return e(r,t),r.prototype.removeAllListeners=function(n){n?delete this._listeners[n]:this._listeners={}},r.prototype.once=function(n,i){var o=this,s=!1;function a(){o.removeListener(n,a),s||(s=!0,i.apply(this,arguments))}this.on(n,a)},r.prototype.emit=function(){var n=arguments[0],i=this._listeners[n];if(i){for(var o=arguments.length,s=new Array(o-1),a=1;a<o;a++)s[a-1]=arguments[a];for(var u=0;u<i.length;u++)i[u].apply(this,s)}},r.prototype.on=r.prototype.addListener=t.prototype.addEventListener,r.prototype.removeListener=t.prototype.removeEventListener,En.EventEmitter=r,En}var Dr={exports:{}},Wo;function tv(){if(Wo)return Dr.exports;Wo=1;var e=N.WebSocket||N.MozWebSocket;return e?Dr.exports=function(r){return new e(r)}:Dr.exports=void 0,Dr.exports}var Tn,Vo;function rv(){if(Vo)return Tn;Vo=1;var e=Tt(),t=Me(),r=G(),n=ye().EventEmitter,i=tv(),o=function(){};function s(a,u,l){if(!s.enabled())throw new Error("Transport created when disabled");n.call(this);var p=this,d=t.addPath(a,"/websocket");d.slice(0,5)==="https"?d="wss"+d.slice(5):d="ws"+d.slice(4),this.url=d,this.ws=new i(this.url,[],l),this.ws.onmessage=function(v){o("message event",v.data),p.emit("message",v.data)},this.unloadRef=e.unloadAdd(function(){p.ws.close()}),this.ws.onclose=function(v){o("close event",v.code,v.reason),p.emit("close",v.code,v.reason),p._cleanup()},this.ws.onerror=function(v){p.emit("close",1006,"WebSocket connection broken"),p._cleanup()}}return r(s,n),s.prototype.send=function(a){var u="["+a+"]";this.ws.send(u)},s.prototype.close=function(){var a=this.ws;this._cleanup(),a&&a.close()},s.prototype._cleanup=function(){var a=this.ws;a&&(a.onmessage=a.onclose=a.onerror=null),e.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},s.enabled=function(){return!!i},s.transportName="websocket",s.roundTrips=2,Tn=s,Tn}var Rn,Xo;function nv(){if(Xo)return Rn;Xo=1;var e=G(),t=ye().EventEmitter,r=function(){};function n(i,o){t.call(this),this.sendBuffer=[],this.sender=o,this.url=i}return e(n,t),n.prototype.send=function(i){this.sendBuffer.push(i),this.sendStop||this.sendSchedule()},n.prototype.sendScheduleWait=function(){var i=this,o;this.sendStop=function(){i.sendStop=null,clearTimeout(o)},o=setTimeout(function(){i.sendStop=null,i.sendSchedule()},25)},n.prototype.sendSchedule=function(){r("sendSchedule",this.sendBuffer.length);var i=this;if(this.sendBuffer.length>0){var o="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,o,function(s){i.sendStop=null,s?(i.emit("close",s.code||1006,"Sending error: "+s),i.close()):i.sendScheduleWait()}),this.sendBuffer=[]}},n.prototype._cleanup=function(){this.removeAllListeners()},n.prototype.close=function(){this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},Rn=n,Rn}var Cn,Go;function iv(){if(Go)return Cn;Go=1;var e=G(),t=ye().EventEmitter,r=function(){};function n(i,o,s){t.call(this),this.Receiver=i,this.receiveUrl=o,this.AjaxObject=s,this._scheduleReceiver()}return e(n,t),n.prototype._scheduleReceiver=function(){var i=this,o=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);o.on("message",function(s){i.emit("message",s)}),o.once("close",function(s,a){r("close",s,a,i.pollIsClosing),i.poll=o=null,i.pollIsClosing||(a==="network"?i._scheduleReceiver():(i.emit("close",s||1006,a),i.removeAllListeners()))})},n.prototype.abort=function(){this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},Cn=n,Cn}var On,Jo;function lc(){if(Jo)return On;Jo=1;var e=G(),t=Me(),r=nv(),n=iv();function i(o,s,a,u,l){var p=t.addPath(o,s),d=this;r.call(this,o,a),this.poll=new n(u,p,l),this.poll.on("message",function(v){d.emit("message",v)}),this.poll.once("close",function(v,y){d.poll=null,d.emit("close",v,y),d.close()})}return e(i,r),i.prototype.close=function(){r.prototype.close.call(this),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)},On=i,On}var Nn,Ko;function nr(){if(Ko)return Nn;Ko=1;var e=G(),t=Me(),r=lc();function n(o){return function(s,a,u){var l={};typeof a=="string"&&(l.headers={"Content-type":"text/plain"});var p=t.addPath(s,"/xhr_send"),d=new o("POST",p,a,l);return d.once("finish",function(v){if(d=null,v!==200&&v!==204)return u(new Error("http status "+v));u()}),function(){d.close(),d=null;var v=new Error("Aborted");v.code=1e3,u(v)}}}function i(o,s,a,u){r.call(this,o,s,n(u),a,u)}return e(i,r),Nn=i,Nn}var An,Yo;function cn(){if(Yo)return An;Yo=1;var e=G(),t=ye().EventEmitter;function r(n,i){t.call(this);var o=this;this.bufferPosition=0,this.xo=new i("POST",n,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(s,a){o._chunkHandler(s,a),o.xo=null;var u=s===200?"network":"permanent";o.emit("close",null,u),o._cleanup()})}return e(r,t),r.prototype._chunkHandler=function(n,i){if(!(n!==200||!i))for(var o=-1;;this.bufferPosition+=o+1){var s=i.slice(this.bufferPosition);if(o=s.indexOf(`
`),o===-1)break;var a=s.slice(0,o);a&&this.emit("message",a)}},r.prototype._cleanup=function(){this.removeAllListeners()},r.prototype.abort=function(){this.xo&&(this.xo.close(),this.emit("close",null,"user"),this.xo=null),this._cleanup()},An=r,An}var Pn,Qo;function fc(){if(Qo)return Pn;Qo=1;var e=ye().EventEmitter,t=G(),r=Tt(),n=Me(),i=N.XMLHttpRequest,o=function(){};function s(l,p,d,v){var y=this;e.call(this),setTimeout(function(){y._start(l,p,d,v)},0)}t(s,e),s.prototype._start=function(l,p,d,v){var y=this;try{this.xhr=new i}catch{}if(!this.xhr){this.emit("finish",0,"no xhr support"),this._cleanup();return}p=n.addQuery(p,"t="+ +new Date),this.unloadRef=r.unloadAdd(function(){y._cleanup(!0)});try{this.xhr.open(l,p,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){o("xhr timeout"),y.emit("finish",0,""),y._cleanup(!1)})}catch{this.emit("finish",0,""),this._cleanup(!1);return}if((!v||!v.noCredentials)&&s.supportsCORS&&(this.xhr.withCredentials=!0),v&&v.headers)for(var k in v.headers)this.xhr.setRequestHeader(k,v.headers[k]);this.xhr.onreadystatechange=function(){if(y.xhr){var E=y.xhr,C,U;switch(o("readyState",E.readyState),E.readyState){case 3:try{U=E.status,C=E.responseText}catch{}U===1223&&(U=204),U===200&&C&&C.length>0&&y.emit("chunk",U,C);break;case 4:U=E.status,U===1223&&(U=204),(U===12005||U===12029)&&(U=0),o("finish",U,E.responseText),y.emit("finish",U,E.responseText),y._cleanup(!1);break}}};try{y.xhr.send(d)}catch{y.emit("finish",0,""),y._cleanup(!1)}},s.prototype._cleanup=function(l){if(this.xhr){if(this.removeAllListeners(),r.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),l)try{this.xhr.abort()}catch{}this.unloadRef=this.xhr=null}},s.prototype.close=function(){this._cleanup(!0)},s.enabled=!!i;var a=["Active"].concat("Object").join("X");!s.enabled&&a in N&&(i=function(){try{return new N[a]("Microsoft.XMLHTTP")}catch{return null}},s.enabled=!!new i);var u=!1;try{u="withCredentials"in new i}catch{}return s.supportsCORS=u,Pn=s,Pn}var zn,es;function un(){if(es)return zn;es=1;var e=G(),t=fc();function r(n,i,o,s){t.call(this,n,i,o,s)}return e(r,t),r.enabled=t.enabled&&t.supportsCORS,zn=r,zn}var Un,ts;function Ir(){if(ts)return Un;ts=1;var e=G(),t=fc();function r(n,i,o){t.call(this,n,i,o,{noCredentials:!0})}return e(r,t),r.enabled=t.enabled,Un=r,Un}var $n,rs;function Tr(){return rs||(rs=1,$n={isOpera:function(){return N.navigator&&/opera/i.test(N.navigator.userAgent)},isKonqueror:function(){return N.navigator&&/konqueror/i.test(N.navigator.userAgent)},hasDomain:function(){if(!N.document)return!0;try{return!!N.document.domain}catch{return!1}}}),$n}var Ln,ns;function ov(){if(ns)return Ln;ns=1;var e=G(),t=nr(),r=cn(),n=un(),i=Ir(),o=Tr();function s(a){if(!i.enabled&&!n.enabled)throw new Error("Transport created when disabled");t.call(this,a,"/xhr_streaming",r,n)}return e(s,t),s.enabled=function(a){return a.nullOrigin||o.isOpera()?!1:n.enabled},s.transportName="xhr-streaming",s.roundTrips=2,s.needBody=!!N.document,Ln=s,Ln}var Zn,is;function Yi(){if(is)return Zn;is=1;var e=ye().EventEmitter,t=G(),r=Tt(),n=Tr(),i=Me(),o=function(){};function s(a,u,l){var p=this;e.call(this),setTimeout(function(){p._start(a,u,l)},0)}return t(s,e),s.prototype._start=function(a,u,l){var p=this,d=new N.XDomainRequest;u=i.addQuery(u,"t="+ +new Date),d.onerror=function(){p._error()},d.ontimeout=function(){p._error()},d.onprogress=function(){o("progress",d.responseText),p.emit("chunk",200,d.responseText)},d.onload=function(){p.emit("finish",200,d.responseText),p._cleanup(!1)},this.xdr=d,this.unloadRef=r.unloadAdd(function(){p._cleanup(!0)});try{this.xdr.open(a,u),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(l)}catch{this._error()}},s.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},s.prototype._cleanup=function(a){if(this.xdr){if(this.removeAllListeners(),r.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,a)try{this.xdr.abort()}catch{}this.unloadRef=this.xdr=null}},s.prototype.close=function(){this._cleanup(!0)},s.enabled=!!(N.XDomainRequest&&n.hasDomain()),Zn=s,Zn}var Dn,os;function hc(){if(os)return Dn;os=1;var e=G(),t=nr(),r=cn(),n=Yi();function i(o){if(!n.enabled)throw new Error("Transport created when disabled");t.call(this,o,"/xhr_streaming",r,n)}return e(i,t),i.enabled=function(o){return o.cookie_needed||o.nullOrigin?!1:n.enabled&&o.sameScheme},i.transportName="xdr-streaming",i.roundTrips=2,Dn=i,Dn}var jn,ss;function dc(){return ss||(ss=1,jn=N.EventSource),jn}var qn,as;function sv(){if(as)return qn;as=1;var e=G(),t=ye().EventEmitter,r=dc(),n=function(){};function i(o){t.call(this);var s=this,a=this.es=new r(o);a.onmessage=function(u){n("message",u.data),s.emit("message",decodeURI(u.data))},a.onerror=function(u){n("error",a.readyState);var l=a.readyState!==2?"network":"permanent";s._cleanup(),s._close(l)}}return e(i,t),i.prototype.abort=function(){this._cleanup(),this._close("user")},i.prototype._cleanup=function(){var o=this.es;o&&(o.onmessage=o.onerror=null,o.close(),this.es=null)},i.prototype._close=function(o){var s=this;setTimeout(function(){s.emit("close",null,o),s.removeAllListeners()},200)},qn=i,qn}var Fn,cs;function us(){if(cs)return Fn;cs=1;var e=G(),t=nr(),r=sv(),n=un(),i=dc();function o(s){if(!o.enabled())throw new Error("Transport created when disabled");t.call(this,s,"/eventsource",r,n)}return e(o,t),o.enabled=function(){return!!i},o.transportName="eventsource",o.roundTrips=2,Fn=o,Fn}var Bn,ls;function pc(){return ls||(ls=1,Bn="1.6.1"),Bn}var Mn={exports:{}},fs;function Rr(){return fs||(fs=1,(function(e){var t=Tt(),r=Tr();e.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){e.exports.WPrefix in N||(N[e.exports.WPrefix]={})},postMessage:function(n,i){N.parent!==N&&N.parent.postMessage(JSON.stringify({windowId:e.exports.currentWindowId,type:n,data:i||""}),"*")},createIframe:function(n,i){var o=N.document.createElement("iframe"),s,a,u=function(){clearTimeout(s);try{o.onload=null}catch{}o.onerror=null},l=function(){o&&(u(),setTimeout(function(){o&&o.parentNode.removeChild(o),o=null},0),t.unloadDel(a))},p=function(v){o&&(l(),i(v))},d=function(v,y){setTimeout(function(){try{o&&o.contentWindow&&o.contentWindow.postMessage(v,y)}catch{}},0)};return o.src=n,o.style.display="none",o.style.position="absolute",o.onerror=function(){p("onerror")},o.onload=function(){clearTimeout(s),s=setTimeout(function(){p("onload timeout")},2e3)},N.document.body.appendChild(o),s=setTimeout(function(){p("timeout")},15e3),a=t.unloadAdd(l),{post:d,cleanup:l,loaded:u}},createHtmlfile:function(n,i){var o=["Active"].concat("Object").join("X"),s=new N[o]("htmlfile"),a,u,l,p=function(){clearTimeout(a),l.onerror=null},d=function(){s&&(p(),t.unloadDel(u),l.parentNode.removeChild(l),l=s=null,CollectGarbage())},v=function(E){s&&(d(),i(E))},y=function(E,C){try{setTimeout(function(){l&&l.contentWindow&&l.contentWindow.postMessage(E,C)},0)}catch{}};s.open(),s.write('<html><script>document.domain="'+N.document.domain+'";<\/script></html>'),s.close(),s.parentWindow[e.exports.WPrefix]=N[e.exports.WPrefix];var k=s.createElement("div");return s.body.appendChild(k),l=s.createElement("iframe"),k.appendChild(l),l.src=n,l.onerror=function(){v("onerror")},a=setTimeout(function(){v("timeout")},15e3),u=t.unloadAdd(d),{post:y,cleanup:d,loaded:p}}},e.exports.iframeEnabled=!1,N.document&&(e.exports.iframeEnabled=(typeof N.postMessage=="function"||typeof N.postMessage=="object")&&!r.isKonqueror())})(Mn)),Mn.exports}var Hn,hs;function vc(){if(hs)return Hn;hs=1;var e=G(),t=ye().EventEmitter,r=pc(),n=Me(),i=Rr(),o=Tt(),s=rr(),a=function(){};function u(l,p,d){if(!u.enabled())throw new Error("Transport created when disabled");t.call(this);var v=this;this.origin=n.getOrigin(d),this.baseUrl=d,this.transUrl=p,this.transport=l,this.windowId=s.string(8);var y=n.addPath(d,"/iframe.html")+"#"+this.windowId;this.iframeObj=i.createIframe(y,function(k){v.emit("close",1006,"Unable to load an iframe ("+k+")"),v.close()}),this.onmessageCallback=this._message.bind(this),o.attachEvent("message",this.onmessageCallback)}return e(u,t),u.prototype.close=function(){if(this.removeAllListeners(),this.iframeObj){o.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch{}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},u.prototype._message=function(l){if(a("message",l.data),!n.isOriginEqual(l.origin,this.origin)){a("not same origin",l.origin,this.origin);return}var p;try{p=JSON.parse(l.data)}catch{a("bad json",l.data);return}if(p.windowId!==this.windowId){a("mismatched window id",p.windowId,this.windowId);return}switch(p.type){case"s":this.iframeObj.loaded(),this.postMessage("s",JSON.stringify([r,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",p.data);break;case"c":var d;try{d=JSON.parse(p.data)}catch{a("bad json",p.data);return}this.emit("close",d[0],d[1]),this.close();break}},u.prototype.postMessage=function(l,p){this.iframeObj.post(JSON.stringify({windowId:this.windowId,type:l,data:p||""}),this.origin)},u.prototype.send=function(l){this.postMessage("m",l)},u.enabled=function(){return i.iframeEnabled},u.transportName="iframe",u.roundTrips=2,Hn=u,Hn}var Wn,ds;function Qi(){return ds||(ds=1,Wn={isObject:function(e){var t=typeof e;return t==="function"||t==="object"&&!!e},extend:function(e){if(!this.isObject(e))return e;for(var t,r,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}}),Wn}var Vn,ps;function Xn(){if(ps)return Vn;ps=1;var e=G(),t=vc(),r=Qi();return Vn=function(n){function i(o,s){t.call(this,n.transportName,o,s)}return e(i,t),i.enabled=function(o,s){if(!N.document)return!1;var a=r.extend({},s);return a.sameOrigin=!0,n.enabled(a)&&t.enabled()},i.transportName="iframe-"+n.transportName,i.needBody=!0,i.roundTrips=t.roundTrips+n.roundTrips-1,i.facadeTransport=n,i},Vn}var Gn,vs;function av(){if(vs)return Gn;vs=1;var e=G(),t=Rr(),r=Me(),n=ye().EventEmitter,i=rr(),o=function(){};function s(u){n.call(this);var l=this;t.polluteGlobalNamespace(),this.id="a"+i.string(6),u=r.addQuery(u,"c="+decodeURIComponent(t.WPrefix+"."+this.id)),o("using htmlfile",s.htmlfileEnabled);var p=s.htmlfileEnabled?t.createHtmlfile:t.createIframe;N[t.WPrefix][this.id]={start:function(){l.iframeObj.loaded()},message:function(d){l.emit("message",d)},stop:function(){l._cleanup(),l._close("network")}},this.iframeObj=p(u,function(){l._cleanup(),l._close("permanent")})}e(s,n),s.prototype.abort=function(){this._cleanup(),this._close("user")},s.prototype._cleanup=function(){this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete N[t.WPrefix][this.id]},s.prototype._close=function(u){this.emit("close",null,u),this.removeAllListeners()},s.htmlfileEnabled=!1;var a=["Active"].concat("Object").join("X");if(a in N)try{s.htmlfileEnabled=!!new N[a]("htmlfile")}catch{}return s.enabled=s.htmlfileEnabled||t.iframeEnabled,Gn=s,Gn}var Jn,ms;function gs(){if(ms)return Jn;ms=1;var e=G(),t=av(),r=Ir(),n=nr();function i(o){if(!t.enabled)throw new Error("Transport created when disabled");n.call(this,o,"/htmlfile",t,r)}return e(i,n),i.enabled=function(o){return t.enabled&&o.sameOrigin},i.transportName="htmlfile",i.roundTrips=2,Jn=i,Jn}var Kn,_s;function bs(){if(_s)return Kn;_s=1;var e=G(),t=nr(),r=cn(),n=un(),i=Ir();function o(s){if(!i.enabled&&!n.enabled)throw new Error("Transport created when disabled");t.call(this,s,"/xhr",r,n)}return e(o,t),o.enabled=function(s){return s.nullOrigin?!1:i.enabled&&s.sameOrigin?!0:n.enabled},o.transportName="xhr-polling",o.roundTrips=2,Kn=o,Kn}var Yn,ys;function cv(){if(ys)return Yn;ys=1;var e=G(),t=nr(),r=hc(),n=cn(),i=Yi();function o(s){if(!i.enabled)throw new Error("Transport created when disabled");t.call(this,s,"/xhr",n,i)}return e(o,t),o.enabled=r.enabled,o.transportName="xdr-polling",o.roundTrips=2,Yn=o,Yn}var Qn,ws;function uv(){if(ws)return Qn;ws=1;var e=Rr(),t=rr(),r=Tr(),n=Me(),i=G(),o=ye().EventEmitter,s=function(){};function a(u){var l=this;o.call(this),e.polluteGlobalNamespace(),this.id="a"+t.string(6);var p=n.addQuery(u,"c="+encodeURIComponent(e.WPrefix+"."+this.id));N[e.WPrefix][this.id]=this._callback.bind(this),this._createScript(p),this.timeoutId=setTimeout(function(){l._abort(new Error("JSONP script loaded abnormally (timeout)"))},a.timeout)}return i(a,o),a.prototype.abort=function(){if(N[e.WPrefix][this.id]){var u=new Error("JSONP user aborted read");u.code=1e3,this._abort(u)}},a.timeout=35e3,a.scriptErrorTimeout=1e3,a.prototype._callback=function(u){this._cleanup(),!this.aborting&&(u&&this.emit("message",u),this.emit("close",null,"network"),this.removeAllListeners())},a.prototype._abort=function(u){this._cleanup(),this.aborting=!0,this.emit("close",u.code,u.message),this.removeAllListeners()},a.prototype._cleanup=function(){if(clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var u=this.script;u.parentNode.removeChild(u),u.onreadystatechange=u.onerror=u.onload=u.onclick=null,this.script=null}delete N[e.WPrefix][this.id]},a.prototype._scriptError=function(){var u=this;this.errorTimer||(this.errorTimer=setTimeout(function(){u.loadedOkay||u._abort(new Error("JSONP script loaded abnormally (onerror)"))},a.scriptErrorTimeout))},a.prototype._createScript=function(u){var l=this,p=this.script=N.document.createElement("script"),d;if(p.id="a"+t.string(8),p.src=u,p.type="text/javascript",p.charset="UTF-8",p.onerror=this._scriptError.bind(this),p.onload=function(){l._abort(new Error("JSONP script loaded abnormally (onload)"))},p.onreadystatechange=function(){if(s("onreadystatechange",p.readyState),/loaded|closed/.test(p.readyState)){if(p&&p.htmlFor&&p.onclick){l.loadedOkay=!0;try{p.onclick()}catch{}}p&&l._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},typeof p.async>"u"&&N.document.attachEvent)if(r.isOpera())d=this.script2=N.document.createElement("script"),d.text="try{var a = document.getElementById('"+p.id+"'); if(a)a.onerror();}catch(x){};",p.async=d.async=!1;else{try{p.htmlFor=p.id,p.event="onclick"}catch{}p.async=!0}typeof p.async<"u"&&(p.async=!0);var v=N.document.getElementsByTagName("head")[0];v.insertBefore(p,v.firstChild),d&&v.insertBefore(d,v.firstChild)},Qn=a,Qn}var ei,ks;function lv(){if(ks)return ei;ks=1;var e=rr(),t=Me(),r=function(){},n,i;function o(a){try{return N.document.createElement('<iframe name="'+a+'">')}catch{var u=N.document.createElement("iframe");return u.name=a,u}}function s(){n=N.document.createElement("form"),n.style.display="none",n.style.position="absolute",n.method="POST",n.enctype="application/x-www-form-urlencoded",n.acceptCharset="UTF-8",i=N.document.createElement("textarea"),i.name="d",n.appendChild(i),N.document.body.appendChild(n)}return ei=function(a,u,l){n||s();var p="a"+e.string(8);n.target=p,n.action=t.addQuery(t.addPath(a,"/jsonp_send"),"i="+p);var d=o(p);d.id=p,d.style.display="none",n.appendChild(d);try{i.value=u}catch{}n.submit();var v=function(y){d.onerror&&(d.onreadystatechange=d.onerror=d.onload=null,setTimeout(function(){d.parentNode.removeChild(d),d=null},500),i.value="",l(y))};return d.onerror=function(){v()},d.onload=function(){v()},d.onreadystatechange=function(y){r("onreadystatechange",p,d.readyState),d.readyState==="complete"&&v()},function(){v(new Error("Aborted"))}},ei}var ti,xs;function fv(){if(xs)return ti;xs=1;var e=G(),t=lc(),r=uv(),n=lv();function i(o){if(!i.enabled())throw new Error("Transport created when disabled");t.call(this,o,"/jsonp",n,r)}return e(i,t),i.enabled=function(){return!!N.document},i.transportName="jsonp-polling",i.roundTrips=1,i.needBody=!0,ti=i,ti}var ri,Ss;function hv(){return Ss||(Ss=1,ri=[rv(),ov(),hc(),us(),Xn()(us()),gs(),Xn()(gs()),bs(),cv(),Xn()(bs()),fv()]),ri}var Es={},Is;function dv(){if(Is)return Es;Is=1;var e=Array.prototype,t=Object.prototype,r=Function.prototype,n=String.prototype,i=e.slice,o=t.toString,s=function(h){return t.toString.call(h)==="[object Function]"},a=function(g){return o.call(g)==="[object Array]"},u=function(g){return o.call(g)==="[object String]"},l=Object.defineProperty&&(function(){try{return Object.defineProperty({},"x",{}),!0}catch{return!1}})(),p;l?p=function(h,g,w,A){!A&&g in h||Object.defineProperty(h,g,{configurable:!0,enumerable:!1,writable:!0,value:w})}:p=function(h,g,w,A){!A&&g in h||(h[g]=w)};var d=function(h,g,w){for(var A in g)t.hasOwnProperty.call(g,A)&&p(h,A,g[A],w)},v=function(h){if(h==null)throw new TypeError("can't convert "+h+" to object");return Object(h)};function y(h){var g=+h;return g!==g?g=0:g!==0&&g!==1/0&&g!==-1/0&&(g=(g>0||-1)*Math.floor(Math.abs(g))),g}function k(h){return h>>>0}function E(){}d(r,{bind:function(g){var w=this;if(!s(w))throw new TypeError("Function.prototype.bind called on incompatible "+w);for(var A=i.call(arguments,1),I=function(){if(this instanceof H){var de=w.apply(this,A.concat(i.call(arguments)));return Object(de)===de?de:this}else return w.apply(g,A.concat(i.call(arguments)))},z=Math.max(0,w.length-A.length),T=[],B=0;B<z;B++)T.push("$"+B);var H=Function("binder","return function ("+T.join(",")+"){ return binder.apply(this, arguments); }")(I);return w.prototype&&(E.prototype=w.prototype,H.prototype=new E,E.prototype=null),H}}),d(Array,{isArray:a});var C=Object("a"),U=C[0]!=="a"||!(0 in C),b=function(g){var w=!0,A=!0;return g&&(g.call("foo",function(I,z,T){typeof T!="object"&&(w=!1)}),g.call([1],function(){A=typeof this=="string"},"x")),!!g&&w&&A};d(e,{forEach:function(g){var w=v(this),A=U&&u(this)?this.split(""):w,I=arguments[1],z=-1,T=A.length>>>0;if(!s(g))throw new TypeError;for(;++z<T;)z in A&&g.call(I,A[z],z,w)}},!b(e.forEach));var x=Array.prototype.indexOf&&[0,1].indexOf(1,2)!==-1;d(e,{indexOf:function(g){var w=U&&u(this)?this.split(""):v(this),A=w.length>>>0;if(!A)return-1;var I=0;for(arguments.length>1&&(I=y(arguments[1])),I=I>=0?I:Math.max(0,A+I);I<A;I++)if(I in w&&w[I]===g)return I;return-1}},x);var f=n.split;"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1?(function(){var h=/()??/.exec("")[1]===void 0;n.split=function(g,w){var A=this;if(g===void 0&&w===0)return[];if(o.call(g)!=="[object RegExp]")return f.call(this,g,w);var I=[],z=(g.ignoreCase?"i":"")+(g.multiline?"m":"")+(g.extended?"x":"")+(g.sticky?"y":""),T=0,B,H,de,$e;for(g=new RegExp(g.source,z+"g"),A+="",h||(B=new RegExp("^"+g.source+"$(?!\\s)",z)),w=w===void 0?-1>>>0:k(w);(H=g.exec(A))&&(de=H.index+H[0].length,!(de>T&&(I.push(A.slice(T,H.index)),!h&&H.length>1&&H[0].replace(B,function(){for(var Ie=1;Ie<arguments.length-2;Ie++)arguments[Ie]===void 0&&(H[Ie]=void 0)}),H.length>1&&H.index<A.length&&e.push.apply(I,H.slice(1)),$e=H[0].length,T=de,I.length>=w)));)g.lastIndex===H.index&&g.lastIndex++;return T===A.length?($e||!g.test(""))&&I.push(""):I.push(A.slice(T)),I.length>w?I.slice(0,w):I}})():"0".split(void 0,0).length&&(n.split=function(g,w){return g===void 0&&w===0?[]:f.call(this,g,w)});var c=n.substr,m="".substr&&"0b".substr(-1)!=="b";return d(n,{substr:function(g,w){return c.call(this,g<0&&(g=this.length+g)<0?0:g,w)}},m),Es}var ni,Ts;function pv(){if(Ts)return ni;Ts=1;var e=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,t,r=function(n){var i,o={},s=[];for(i=0;i<65536;i++)s.push(String.fromCharCode(i));return n.lastIndex=0,s.join("").replace(n,function(a){return o[a]="\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4),""}),n.lastIndex=0,o};return ni={quote:function(n){var i=JSON.stringify(n);return e.lastIndex=0,e.test(i)?(t||(t=r(e)),i.replace(e,function(o){return t[o]})):i}},ni}var ii,Rs;function vv(){if(Rs)return ii;Rs=1;var e=function(){};return ii=function(t){return{filterToEnabled:function(r,n){var i={main:[],facade:[]};return r?typeof r=="string"&&(r=[r]):r=[],t.forEach(function(o){if(o&&!(o.transportName==="websocket"&&n.websocket===!1)){if(r.length&&r.indexOf(o.transportName)===-1){e("not in whitelist",o.transportName);return}o.enabled(n)?(e("enabled",o.transportName),i.main.push(o),o.facadeTransport&&i.facade.push(o.facadeTransport)):e("disabled",o.transportName)}}),i}}},ii}var oi,Cs;function mv(){if(Cs)return oi;Cs=1;var e={};return["log","debug","warn"].forEach(function(t){var r;try{r=N.console&&N.console[t]&&N.console[t].apply}catch{}e[t]=r?function(){return N.console[t].apply(N.console,arguments)}:t==="log"?function(){}:e.log}),oi=e,oi}var si,Os;function eo(){if(Os)return si;Os=1;function e(t){this.type=t}return e.prototype.initEvent=function(t,r,n){return this.type=t,this.bubbles=r,this.cancelable=n,this.timeStamp=+new Date,this},e.prototype.stopPropagation=function(){},e.prototype.preventDefault=function(){},e.CAPTURING_PHASE=1,e.AT_TARGET=2,e.BUBBLING_PHASE=3,si=e,si}var ai,Ns;function mc(){return Ns||(Ns=1,ai=N.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""}),ai}var ci,As;function gv(){if(As)return ci;As=1;var e=G(),t=eo();function r(){t.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}return e(r,t),ci=r,ci}var ui,Ps;function _v(){if(Ps)return ui;Ps=1;var e=G(),t=eo();function r(n){t.call(this),this.initEvent("message",!1,!1),this.data=n}return e(r,t),ui=r,ui}var li,zs;function bv(){if(zs)return li;zs=1;var e=ye().EventEmitter,t=G();function r(){var n=this;e.call(this),this.to=setTimeout(function(){n.emit("finish",200,"{}")},r.timeout)}return t(r,e),r.prototype.close=function(){clearTimeout(this.to)},r.timeout=2e3,li=r,li}var fi,Us;function gc(){if(Us)return fi;Us=1;var e=ye().EventEmitter,t=G(),r=Qi();function n(i,o){e.call(this);var s=this,a=+new Date;this.xo=new o("GET",i),this.xo.once("finish",function(u,l){var p,d;if(u===200){if(d=+new Date-a,l)try{p=JSON.parse(l)}catch{}r.isObject(p)||(p={})}s.emit("finish",p,d),s.removeAllListeners()})}return t(n,e),n.prototype.close=function(){this.removeAllListeners(),this.xo.close()},fi=n,fi}var hi,$s;function _c(){if($s)return hi;$s=1;var e=G(),t=ye().EventEmitter,r=Ir(),n=gc();function i(o){var s=this;t.call(this),this.ir=new n(o,r),this.ir.once("finish",function(a,u){s.ir=null,s.emit("message",JSON.stringify([a,u]))})}return e(i,t),i.transportName="iframe-info-receiver",i.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},hi=i,hi}var di,Ls;function yv(){if(Ls)return di;Ls=1;var e=ye().EventEmitter,t=G(),r=Tt(),n=vc(),i=_c();function o(s,a){var u=this;e.call(this);var l=function(){var p=u.ifr=new n(i.transportName,a,s);p.once("message",function(d){if(d){var v;try{v=JSON.parse(d)}catch{u.emit("finish"),u.close();return}var y=v[0],k=v[1];u.emit("finish",y,k)}u.close()}),p.once("close",function(){u.emit("finish"),u.close()})};N.document.body?l():r.attachEvent("load",l)}return t(o,e),o.enabled=function(){return n.enabled()},o.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},di=o,di}var pi,Zs;function wv(){if(Zs)return pi;Zs=1;var e=ye().EventEmitter,t=G(),r=Me(),n=Yi(),i=un(),o=Ir(),s=bv(),a=yv(),u=gc();function l(p,d){var v=this;e.call(this),setTimeout(function(){v.doXhr(p,d)},0)}return t(l,e),l._getReceiver=function(p,d,v){return v.sameOrigin?new u(d,o):i.enabled?new u(d,i):n.enabled&&v.sameScheme?new u(d,n):a.enabled()?new a(p,d):new u(d,s)},l.prototype.doXhr=function(p,d){var v=this,y=r.addPath(p,"/info");this.xo=l._getReceiver(p,y,d),this.timeoutRef=setTimeout(function(){v._cleanup(!1),v.emit("finish")},l.timeout),this.xo.once("finish",function(k,E){v._cleanup(!0),v.emit("finish",k,E)})},l.prototype._cleanup=function(p){clearTimeout(this.timeoutRef),this.timeoutRef=null,!p&&this.xo&&this.xo.close(),this.xo=null},l.prototype.close=function(){this.removeAllListeners(),this._cleanup(!1)},l.timeout=8e3,pi=l,pi}var vi,Ds;function kv(){if(Ds)return vi;Ds=1;var e=Rr();function t(r){this._transport=r,r.on("message",this._transportMessage.bind(this)),r.on("close",this._transportClose.bind(this))}return t.prototype._transportClose=function(r,n){e.postMessage("c",JSON.stringify([r,n]))},t.prototype._transportMessage=function(r){e.postMessage("t",r)},t.prototype._send=function(r){this._transport.send(r)},t.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},vi=t,vi}var mi,js;function xv(){if(js)return mi;js=1;var e=Me(),t=Tt(),r=kv(),n=_c(),i=Rr(),o=mc(),s=function(){};return mi=function(a,u){var l={};u.forEach(function(d){d.facadeTransport&&(l[d.facadeTransport.transportName]=d.facadeTransport)}),l[n.transportName]=n;var p;a.bootstrap_iframe=function(){var d;i.currentWindowId=o.hash.slice(1);var v=function(y){if(y.source===parent&&(typeof p>"u"&&(p=y.origin),y.origin===p)){var k;try{k=JSON.parse(y.data)}catch{s("bad json",y.data);return}if(k.windowId===i.currentWindowId)switch(k.type){case"s":var E;try{E=JSON.parse(k.data)}catch{s("bad json",k.data);break}var C=E[0],U=E[1],b=E[2],x=E[3];if(C!==a.version)throw new Error('Incompatible SockJS! Main site uses: "'+C+'", the iframe: "'+a.version+'".');if(!e.isOriginEqual(b,o.href)||!e.isOriginEqual(x,o.href))throw new Error("Can't connect to different domain from within an iframe. ("+o.href+", "+b+", "+x+")");d=new r(new l[U](b,x));break;case"m":d._send(k.data);break;case"c":d&&d._close(),d=null;break}}};t.attachEvent("message",v),i.postMessage("s")}},mi}var gi,qs;function Sv(){if(qs)return gi;qs=1,dv();var e=cc(),t=G(),r=rr(),n=pv(),i=Me(),o=Tt(),s=vv(),a=Qi(),u=Tr(),l=mv(),p=eo(),d=uc(),v=mc(),y=gv(),k=_v(),E=wv(),C=function(){},U;function b(f,c,m){if(!(this instanceof b))return new b(f,c,m);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");d.call(this),this.readyState=b.CONNECTING,this.extensions="",this.protocol="",m=m||{},m.protocols_whitelist&&l.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=m.transports,this._transportOptions=m.transportOptions||{},this._timeout=m.timeout||0;var h=m.sessionId||8;if(typeof h=="function")this._generateSessionId=h;else if(typeof h=="number")this._generateSessionId=function(){return r.string(h)};else throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._server=m.server||r.numberString(1e3);var g=new e(f);if(!g.host||!g.protocol)throw new SyntaxError("The URL '"+f+"' is invalid");if(g.hash)throw new SyntaxError("The URL must not contain a fragment");if(g.protocol!=="http:"&&g.protocol!=="https:")throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+g.protocol+"' is not allowed.");var w=g.protocol==="https:";if(v.protocol==="https:"&&!w&&!i.isLoopbackAddr(g.hostname))throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");c?Array.isArray(c)||(c=[c]):c=[];var A=c.sort();A.forEach(function(z,T){if(!z)throw new SyntaxError("The protocols entry '"+z+"' is invalid.");if(T<A.length-1&&z===A[T+1])throw new SyntaxError("The protocols entry '"+z+"' is duplicated.")});var I=i.getOrigin(v.href);this._origin=I?I.toLowerCase():null,g.set("pathname",g.pathname.replace(/\/+$/,"")),this.url=g.href,C("using url",this.url),this._urlInfo={nullOrigin:!u.hasDomain(),sameOrigin:i.isOriginEqual(this.url,v.href),sameScheme:i.isSchemeEqual(this.url,v.href)},this._ir=new E(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}t(b,d);function x(f){return f===1e3||f>=3e3&&f<=4999}return b.prototype.close=function(f,c){if(f&&!x(f))throw new Error("InvalidAccessError: Invalid code");if(c&&c.length>123)throw new SyntaxError("reason argument has an invalid length");if(!(this.readyState===b.CLOSING||this.readyState===b.CLOSED)){var m=!0;this._close(f||1e3,c||"Normal closure",m)}},b.prototype.send=function(f){if(typeof f!="string"&&(f=""+f),this.readyState===b.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===b.OPEN&&this._transport.send(n.quote(f))},b.version=pc(),b.CONNECTING=0,b.OPEN=1,b.CLOSING=2,b.CLOSED=3,b.prototype._receiveInfo=function(f,c){if(this._ir=null,!f){this._close(1002,"Cannot connect to server");return}this._rto=this.countRTO(c),this._transUrl=f.base_url?f.base_url:this.url,f=a.extend(f,this._urlInfo);var m=U.filterToEnabled(this._transportsWhitelist,f);this._transports=m.main,C(this._transports.length+" enabled transports"),this._connect()},b.prototype._connect=function(){for(var f=this._transports.shift();f;f=this._transports.shift()){if(C("attempt",f.transportName),f.needBody&&(!N.document.body||typeof N.document.readyState<"u"&&N.document.readyState!=="complete"&&N.document.readyState!=="interactive")){this._transports.unshift(f),o.attachEvent("load",this._connect.bind(this));return}var c=Math.max(this._timeout,this._rto*f.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),c);var m=i.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),h=this._transportOptions[f.transportName],g=new f(m,this._transUrl,h);g.on("message",this._transportMessage.bind(this)),g.once("close",this._transportClose.bind(this)),g.transportName=f.transportName,this._transport=g;return}this._close(2e3,"All transports failed",!1)},b.prototype._transportTimeout=function(){this.readyState===b.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))},b.prototype._transportMessage=function(f){var c=this,m=f.slice(0,1),h=f.slice(1),g;switch(m){case"o":this._open();return;case"h":this.dispatchEvent(new p("heartbeat")),C("heartbeat",this.transport);return}if(h)try{g=JSON.parse(h)}catch{}if(!(typeof g>"u"))switch(m){case"a":Array.isArray(g)&&g.forEach(function(w){C("message",c.transport),c.dispatchEvent(new k(w))});break;case"m":C("message",this.transport),this.dispatchEvent(new k(g));break;case"c":Array.isArray(g)&&g.length===2&&this._close(g[0],g[1],!0);break}},b.prototype._transportClose=function(f,c){if(C("_transportClose",this.transport),this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),!x(f)&&f!==2e3&&this.readyState===b.CONNECTING){this._connect();return}this._close(f,c)},b.prototype._open=function(){C("_open",this._transport&&this._transport.transportName,this.readyState),this.readyState===b.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=b.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new p("open")),C("connected",this.transport)):this._close(1006,"Server lost session")},b.prototype._close=function(f,c,m){C("_close",this.transport,f,c,m,this.readyState);var h=!1;if(this._ir&&(h=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===b.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=b.CLOSING,setTimeout((function(){this.readyState=b.CLOSED,h&&this.dispatchEvent(new p("error"));var g=new y("close");g.wasClean=m||!1,g.code=f||1e3,g.reason=c,this.dispatchEvent(g),this.onmessage=this.onclose=this.onerror=null}).bind(this),0)},b.prototype.countRTO=function(f){return f>100?4*f:300+f},gi=function(f){return U=s(f),xv()(b,f),b},gi}var _i,Fs;function Ev(){if(Fs)return _i;Fs=1;var e=hv();return _i=Sv()(e),"_sockjs_onload"in N&&setTimeout(N._sockjs_onload,1),_i}var Iv=Ev();const Tv=Xp(Iv),Rv=5e3,Cv=2e4,Ov=1e4;let ot={status:"idle"};function Nv(){return new Kp.Client({webSocketFactory:()=>new Tv("/ws"),reconnectDelay:Rv,heartbeatIncoming:Cv,heartbeatOutgoing:Ov})}function Oi(e,t,r){let n;try{n=JSON.parse(e)}catch(o){return console.warn(`Failed to parse ${t} payload`,o),null}const i=Ji(r,n,t);return i.success?i.data:null}async function bc(){if(ot.status==="connected"&&ot.client.connected)return ot.client;if(ot.status==="connecting")return ot.pending;const e=new Promise((t,r)=>{const n=Nv();n.onConnect=i=>{ot={status:"connected",client:n},t(n)},n.onStompError=i=>{ot={status:"idle"},r(new Error(i.body||"STOMP connection failed"))},n.onWebSocketError=i=>{console.error("WebSocket error",i)},n.activate()}).catch(t=>{throw ot={status:"idle"},t});return ot={status:"connecting",pending:e},e}async function Av(e,t,r){const n=await bc(),i=n.subscribe(`/topic/search/${e}/progress`,s=>{const a=Oi(s.body,"searchProgressEvent",up);if(!a){console.warn("Failed to parse search progress event, falling back to default message"),t("Searching...");return}t(a.message??"Searching...")}),o=n.subscribe(`/topic/search/${e}/results`,s=>{const a=Oi(s.body,"searchResultsEvent",lp);if(!a){console.warn("Failed to parse search results event, falling back to empty results"),r([]);return}r(a.newResults)});return()=>{i.unsubscribe(),o.unsubscribe()}}async function Pv(e,t){const n=(await bc()).subscribe(`/topic/book/${e}/coverUpdate`,i=>{const o=Oi(i.body,"bookCoverUpdateEvent",fp);if(!o){console.warn("Failed to parse book cover update event, ignoring message");return}o.newCoverUrl&&t(o.newCoverUrl)});return()=>n.unsubscribe()}var zv=F("<option> </option>"),Uv=F("<option> </option>"),$v=F("<option> </option>"),Lv=F('<p class="text-sm text-anthracite-600 dark:text-slate-300">Searching books...</p>'),Zv=F('<p class="text-xs text-canvas-700 dark:text-canvas-400"> </p>'),Dv=F('<p class="rounded-lg border border-red-200 bg-red-50 p-3 text-sm text-red-700 dark:border-red-900/40 dark:bg-red-950/40 dark:text-red-200"> </p>'),jv=F('<p class="text-sm text-anthracite-600 dark:text-slate-300">No results found.</p>'),qv=F('<div></div> <nav class="mt-4 flex items-center justify-center gap-2"><button class="rounded-md border border-linen-300 px-3 py-1.5 text-sm disabled:opacity-40 dark:border-slate-600">Prev</button> <span class="text-sm text-anthracite-700 dark:text-slate-300"> </span> <button class="rounded-md border border-linen-300 px-3 py-1.5 text-sm disabled:opacity-40 dark:border-slate-600">Next</button></nav>',1),Fv=F('<section class="mx-auto flex max-w-6xl flex-col gap-6 px-4 py-8 md:px-6"><form class="grid gap-3 rounded-xl border border-linen-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-800 md:grid-cols-[1fr_auto_auto_auto_auto]"><input class="rounded-lg border border-linen-300 px-3 py-2 text-sm outline-none ring-canvas-300 focus:ring-2 dark:border-slate-600 dark:bg-slate-900" placeholder="Search by title, author, ISBN" required/> <input type="number" class="rounded-lg border border-linen-300 px-3 py-2 text-sm outline-none ring-canvas-300 focus:ring-2 dark:border-slate-600 dark:bg-slate-900" placeholder="Year"/> <select class="rounded-lg border border-linen-300 px-3 py-2 text-sm dark:border-slate-600 dark:bg-slate-900"></select> <select class="rounded-lg border border-linen-300 px-3 py-2 text-sm dark:border-slate-600 dark:bg-slate-900"></select> <select class="rounded-lg border border-linen-300 px-3 py-2 text-sm dark:border-slate-600 dark:bg-slate-900"></select> <div class="md:col-span-5 flex items-center justify-between gap-3"><div class="flex items-center gap-2 text-sm"><button type="button">Grid</button> <button type="button">List</button></div> <button type="submit" class="rounded-lg bg-canvas-500 px-4 py-2 text-sm font-medium text-white transition hover:bg-canvas-600">Apply</button></div></form> <!> <!> <!> <!> <!></section>');function Bv(e,t){lt(t,!0);const r=12,n=5,i=1800,o=2099,s=["ANY","GOOGLE_BOOKS","OPEN_LIBRARY","LONGITOOD"],a=["ANY","HIGH_ONLY","HIGH_FIRST"],u=["relevance","title","author","newest","rating"],l=new Map;let p=null,d=M(""),v=M(null),y=M(1),k=M("newest"),E=M("ANY"),C=M("HIGH_FIRST"),U=M("grid"),b=M(!1),x=M(null),f=M(null),c=M(null);function m(R,Z){if(!R)return Z;const j=Number.parseInt(R,10);return!Number.isFinite(j)||j<1?Z:j}function h(){return{query:_(d),startIndex:(_(y)-1)*r,maxResults:r,orderBy:_(k),coverSource:_(E),resolution:_(C),publishedYear:_(v)}}function g(R){return[R.query,R.startIndex,R.maxResults,R.orderBy,R.coverSource,R.resolution,R.publishedYear??"none"].join("::")}function w(R,Z,j,se){const ae=R.get(Z)??se;return j.includes(ae)?ae:se}function A(R){const Z=R.searchParams;L(d,Z.get("query")?.trim()??"",!0),L(v,Z.get("year")&&m(Z.get("year"),0)||null,!0),L(y,m(Z.get("page"),1),!0),L(k,w(Z,"sort",u,"newest"),!0),L(E,w(Z,"coverSource",s,"ANY"),!0),L(C,w(Z,"resolution",a,"HIGH_FIRST"),!0);const j=Z.get("view");L(U,j==="list"?"list":"grid",!0)}function I(R){if(!_(c))return;const Z=Wp(R);if(Z.length===0)return;const j=Vp(_(c).results,Z);L(c,{..._(c),results:j,totalResults:Math.max(_(c).totalResults,j.length)},!0)}async function z(R,Z){if(Z.hasMore)for(let j=1;j<=n;j++){const se=R.startIndex+j*r,ae={...R,startIndex:se},Ct=g(ae);if(!l.has(Ct))try{const gt=await zo(ae);if(l.set(Ct,gt),!gt.hasMore)break}catch(gt){console.warn("Prefetch failed for offset",j,gt);break}}}async function T(){if(!_(d)){p&&(p(),p=null),L(c,null),L(x,null),L(f,null);return}L(b,!0),L(x,null),L(f,null);const R=h(),Z=g(R);try{const j=l.get(Z)??await zo(R);l.set(Z,j),L(c,j,!0),p&&(p(),p=null),p=await Av(j.queryHash,se=>{L(f,se,!0)},se=>{I(se)}),z(R,j)}catch(j){L(x,j instanceof Error?j.message:"Search request failed",!0),L(c,null)}finally{L(b,!1)}}function B(R=1){const Z=new URL("/search",window.location.origin);_(d).trim()&&Z.searchParams.set("query",_(d).trim()),_(v)!==null&&_(v)>0&&Z.searchParams.set("year",String(_(v))),Z.searchParams.set("page",String(R)),Z.searchParams.set("sort",_(k)),Z.searchParams.set("view",_(U)),Z.searchParams.set("coverSource",_(E)),Z.searchParams.set("resolution",_(C)),er(`${Z.pathname}${Z.search}`)}function H(R){const Z=R.authors.map(j=>j.name).filter(j=>j&&j.length>0);return{id:R.id,slug:R.slug??R.id,title:R.title??"Untitled",authors:Z,description:R.description,coverUrl:R.cover?.preferredUrl??R.cover?.s3ImagePath??R.cover?.externalImageUrl??null,fallbackCoverUrl:R.cover?.fallbackUrl??"/images/placeholder-book-cover.svg"}}function de(R,Z,j){if(!R)return 1;const se=Math.max(1,Math.ceil(R.totalResults/j));return R.hasMore?Math.max(se,Z+1):se}let $e=ke(()=>de(_(c),_(y),r));xr(()=>{A(t.currentUrl),T()}),tn(()=>()=>{p&&p()});var Ie=Fv(),tt=O(Ie),dt=O(tt),pt=$(dt,2);be(pt,"min",i),be(pt,"max",o);var rt=$(pt,2);xe(rt,21,()=>u,Qe,(R,Z)=>{var j=zv(),se=O(j),ae={};Y(()=>{V(se,_(Z)),ae!==(ae=_(Z))&&(j.value=(j.__value=_(Z))??"")}),D(R,j)});var ge=$(rt,2);xe(ge,21,()=>s,Qe,(R,Z)=>{var j=Uv(),se=O(j),ae={};Y(()=>{V(se,_(Z)),ae!==(ae=_(Z))&&(j.value=(j.__value=_(Z))??"")}),D(R,j)});var _e=$(ge,2);xe(_e,21,()=>a,Qe,(R,Z)=>{var j=$v(),se=O(j),ae={};Y(()=>{V(se,_(Z)),ae!==(ae=_(Z))&&(j.value=(j.__value=_(Z))??"")}),D(R,j)});var Te=$(_e,2),Re=O(Te),Le=O(Re);Le.__click=()=>{L(U,"grid"),B(_(y))};var He=$(Le,2);He.__click=()=>{L(U,"list"),B(_(y))};var vt=$(tt,2);{var Rt=R=>{var Z=Lv();D(R,Z)};J(vt,R=>{_(b)&&R(Rt)})}var nt=$(vt,2);{var mt=R=>{var Z=Zv(),j=O(Z);Y(()=>V(j,_(f))),D(R,Z)};J(nt,R=>{_(f)&&R(mt)})}var Ke=$(nt,2);{var ir=R=>{var Z=Dv(),j=O(Z);Y(()=>V(j,_(x))),D(R,Z)};J(Ke,R=>{_(x)&&R(ir)})}var Ft=$(Ke,2);{var ln=R=>{var Z=jv();D(R,Z)};J(Ft,R=>{!_(b)&&_(c)&&_(c).results.length===0&&R(ln)})}var Cr=$(Ft,2);{var fn=R=>{var Z=qv(),j=ze(Z);xe(j,21,()=>_(c).results,Q=>Q.id,(Q,ue)=>{{let Ce=ke(()=>H(_(ue))),Oe=ke(()=>`/book/${encodeURIComponent(_(ue).slug??_(ue).id)}?query=${encodeURIComponent(_(d))}&page=${_(y)}&sort=${encodeURIComponent(_(k))}&view=${_(U)}${_(v)?`&year=${_(v)}`:""}`);Gr(Q,{get layout(){return _(U)},get book(){return _(Ce)},get href(){return _(Oe)}})}});var se=$(j,2),ae=O(se);ae.__click=()=>B(_(y)-1);var Ct=$(ae,2),gt=O(Ct),Or=$(Ct,2);Or.__click=()=>B(_(y)+1),Y(()=>{ct(j,1,Uu(_(U)==="grid"?"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4":"grid grid-cols-1 gap-4")),ae.disabled=_(y)<=1,V(gt,`Page ${_(y)??""} of ${_($e)??""}`),Or.disabled=_(y)>=_($e)}),D(R,Z)};J(Cr,R=>{_(c)&&_(c).results.length>0&&R(fn)})}Y(()=>{ct(Le,1,`rounded-md px-3 py-1.5 ${_(U)==="grid"?"bg-canvas-500 text-white":"bg-linen-100 text-anthracite-700 dark:bg-slate-700 dark:text-slate-200"}`),ct(He,1,`rounded-md px-3 py-1.5 ${_(U)==="list"?"bg-canvas-500 text-white":"bg-linen-100 text-anthracite-700 dark:bg-slate-700 dark:text-slate-200"}`)}),en("submit",tt,R=>{R.preventDefault(),B(1)}),br(dt,()=>_(d),R=>L(d,R)),br(pt,()=>_(v),R=>L(v,R)),vn(rt,()=>_(k),R=>L(k,R)),vn(ge,()=>_(E),R=>L(E,R)),vn(_e,()=>_(C),R=>L(C,R)),D(e,Ie),ft()}Bi(["click"]);var Mv=F('<p class="text-sm text-anthracite-600 dark:text-slate-300">Loading book details...</p>'),Hv=F('<div class="rounded-xl border border-red-200 bg-red-50 p-4 text-sm text-red-700 dark:border-red-900/40 dark:bg-red-950/40 dark:text-red-200"> </div>'),Wv=F('<p class="whitespace-pre-wrap text-sm leading-6 text-anthracite-700 dark:text-slate-300"> </p>'),Vv=F('<span class="rounded-full bg-linen-100 px-3 py-1 text-xs font-medium text-anthracite-700 dark:bg-slate-700 dark:text-slate-200"> </span>'),Xv=F('<div class="flex flex-wrap gap-2"></div>'),Gv=F('<a data-no-spa="true" target="_blank" rel="noreferrer" class="rounded-lg bg-canvas-500 px-3 py-1.5 text-sm text-white transition hover:bg-canvas-600"> </a>'),Jv=F('<div class="space-y-2"><p class="text-sm font-medium text-anthracite-800 dark:text-slate-200">Affiliate links</p> <div class="flex flex-wrap gap-2"></div></div>'),Kv=F('<article class="rounded-xl border border-linen-200 bg-white p-3 dark:border-slate-700 dark:bg-slate-800"><p class="text-sm font-medium text-anthracite-800 dark:text-slate-100"> </p> <p class="text-xs text-anthracite-600 dark:text-slate-300"> </p></article>'),Yv=F('<section class="space-y-3"><h2 class="text-xl font-semibold text-anthracite-900 dark:text-slate-100">Editions</h2> <div class="grid grid-cols-1 gap-3 md:grid-cols-2 lg:grid-cols-3"></div></section>'),Qv=F('<section class="space-y-3"><h2 class="text-xl font-semibold text-anthracite-900 dark:text-slate-100">Similar books</h2> <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3"></div></section>'),em=F('<a class="w-fit rounded-lg border border-linen-300 px-3 py-1.5 text-sm text-anthracite-700 transition hover:bg-linen-100 dark:border-slate-600 dark:text-slate-300 dark:hover:bg-slate-800">Back to search</a> <article class="grid gap-6 rounded-xl border border-linen-200 bg-white p-5 shadow-sm dark:border-slate-700 dark:bg-slate-800 md:grid-cols-[320px_1fr]"><img class="h-[440px] w-full rounded-xl object-cover" loading="lazy"/> <div class="space-y-4"><h1 class="text-3xl font-semibold text-anthracite-900 dark:text-slate-100"> </h1> <p class="text-base text-anthracite-700 dark:text-slate-300"> </p> <dl class="grid gap-2 text-sm text-anthracite-700 dark:text-slate-300 sm:grid-cols-2"><div><dt class="font-medium text-anthracite-800 dark:text-slate-200">Published</dt> <dd> </dd></div> <div><dt class="font-medium text-anthracite-800 dark:text-slate-200">Publisher</dt> <dd> </dd></div> <div><dt class="font-medium text-anthracite-800 dark:text-slate-200">Language</dt> <dd> </dd></div> <div><dt class="font-medium text-anthracite-800 dark:text-slate-200">Pages</dt> <dd> </dd></div></dl> <!> <!> <!></div></article> <!> <!>',1),tm=F('<p class="text-sm text-anthracite-600 dark:text-slate-300">Book not found.</p>'),rm=F('<section class="mx-auto flex max-w-6xl flex-col gap-6 px-4 py-8 md:px-6"><!></section>');function nm(e,t){lt(t,!0);let r=M(!0),n=M(null),i=M(null),o=M(Ye([])),s=M(Ye({})),a=M(null),u=null;async function l(){L(r,!0),L(n,null);try{const f=await jp(t.identifier),[c,m]=await Promise.allSettled([qp(t.identifier,6),Fp(t.identifier)]);L(i,f,!0),L(o,c.status==="fulfilled"?c.value:[],!0),L(s,m.status==="fulfilled"?m.value:{},!0),L(a,null),u&&(u(),u=null);const h=f.id;u=await Pv(h,g=>{L(a,g,!0)})}catch(f){L(n,f instanceof Error?f.message:"Unable to load this book",!0),L(i,null),L(o,[],!0),L(s,{},!0)}finally{L(r,!1)}}function p(){return _(a)&&_(a).trim().length>0?_(a):_(i)?.cover?.preferredUrl&&_(i).cover.preferredUrl.trim().length>0?_(i).cover.preferredUrl:_(i)?.cover?.fallbackUrl&&_(i).cover.fallbackUrl.trim().length>0?_(i).cover.fallbackUrl:"/images/placeholder-book-cover.svg"}function d(){return!_(i)||_(i).authors.length===0?"Unknown author":_(i).authors.map(f=>f.name).join(", ")}function v(){if(!_(i)?.publication?.publishedDate)return"Unknown";const f=new Date(_(i).publication.publishedDate);return Number.isNaN(f.getTime())?String(_(i).publication.publishedDate):f.toLocaleDateString()}function y(f){return{id:f.id,slug:f.slug??f.id,title:f.title??"Untitled",authors:f.authors.map(c=>c.name),description:f.description,coverUrl:f.cover?.preferredUrl??f.cover?.s3ImagePath??f.cover?.externalImageUrl??null,fallbackCoverUrl:f.cover?.fallbackUrl??"/images/placeholder-book-cover.svg"}}function k(){const f=t.currentUrl.searchParams.get("query");if(!f)return"/search";const c=new URL("/search",window.location.origin);c.searchParams.set("query",f);const m=t.currentUrl.searchParams.get("page"),h=t.currentUrl.searchParams.get("sort"),g=t.currentUrl.searchParams.get("view"),w=t.currentUrl.searchParams.get("year");return m&&c.searchParams.set("page",m),h&&c.searchParams.set("sort",h),g&&c.searchParams.set("view",g),w&&c.searchParams.set("year",w),`${c.pathname}${c.search}`}function E(){return Object.entries(_(s)).sort(([f],[c])=>f.localeCompare(c))}xr(()=>{t.identifier&&l()}),tn(()=>()=>{u&&u()});var C=rm(),U=O(C);{var b=f=>{var c=Mv();D(f,c)},x=f=>{var c=at(),m=ze(c);{var h=w=>{var A=Hv(),I=O(A);Y(()=>V(I,_(n))),D(w,A)},g=w=>{var A=at(),I=ze(A);{var z=B=>{var H=em(),de=ze(H),$e=$(de,2),Ie=O($e),tt=$(Ie,2),dt=O(tt),pt=O(dt),rt=$(dt,2),ge=O(rt),_e=$(rt,2),Te=O(_e),Re=$(O(Te),2),Le=O(Re),He=$(Te,2),vt=$(O(He),2),Rt=O(vt),nt=$(He,2),mt=$(O(nt),2),Ke=O(mt),ir=$(nt,2),Ft=$(O(ir),2),ln=O(Ft),Cr=$(_e,2);{var fn=Q=>{var ue=Wv(),Ce=O(ue);Y(()=>V(Ce,_(i).description)),D(Q,ue)};J(Cr,Q=>{_(i).description&&Q(fn)})}var R=$(Cr,2);{var Z=Q=>{var ue=Xv();xe(ue,21,()=>_(i).categories,Qe,(Ce,Oe)=>{var Ze=Vv(),it=O(Ze);Y(()=>V(it,_(Oe))),D(Ce,Ze)}),D(Q,ue)};J(R,Q=>{_(i).categories.length>0&&Q(Z)})}var j=$(R,2);{var se=Q=>{var ue=Jv(),Ce=$(O(ue),2);xe(Ce,21,E,Qe,(Oe,Ze)=>{var it=ke(()=>Ic(_(Ze),2));let Bt=()=>_(it)[0],hn=()=>_(it)[1];var or=Gv(),dn=O(or);Y(()=>{be(or,"href",hn()),V(dn,Bt())}),D(Oe,or)}),D(Q,ue)};J(j,Q=>{E().length>0&&Q(se)})}var ae=$($e,2);{var Ct=Q=>{var ue=Yv(),Ce=$(O(ue),2);xe(Ce,21,()=>_(i).editions,Qe,(Oe,Ze)=>{var it=Kv(),Bt=O(it),hn=O(Bt),or=$(Bt,2),dn=O(or);Y(()=>{V(hn,_(Ze).identifier??_(Ze).googleBooksId??"Edition"),V(dn,`ISBN-13: ${_(Ze).isbn13??"N/A"??""}`)}),D(Oe,it)}),D(Q,ue)};J(ae,Q=>{_(i).editions.length>0&&Q(Ct)})}var gt=$(ae,2);{var Or=Q=>{var ue=Qv(),Ce=$(O(ue),2);xe(Ce,21,()=>_(o),Oe=>Oe.id,(Oe,Ze)=>{{let it=ke(()=>y(_(Ze))),Bt=ke(()=>`/book/${encodeURIComponent(_(Ze).slug??_(Ze).id)}`);Gr(Oe,{get book(){return _(it)},get href(){return _(Bt)}})}}),D(Q,ue)};J(gt,Q=>{_(o).length>0&&Q(Or)})}Y((Q,ue,Ce,Oe)=>{be(de,"href",Q),be(Ie,"src",ue),be(Ie,"alt",`${_(i).title??"Book"} cover`),V(pt,_(i).title??"Book details"),V(ge,Ce),V(Le,Oe),V(Rt,_(i).publication?.publisher??"Unknown"),V(Ke,_(i).publication?.language??"Unknown"),V(ln,_(i).publication?.pageCount??"Unknown")},[k,p,d,v]),D(B,H)},T=B=>{var H=tm();D(B,H)};J(I,B=>{_(i)?B(z):B(T,!1)},!0)}D(w,A)};J(m,w=>{_(n)?w(h):w(g,!1)},!0)}D(f,c)};J(U,f=>{_(r)?f(b):f(x,!1)})}D(e,C),ft()}var im=F('<p class="text-sm text-anthracite-600 dark:text-slate-300">Loading sitemap...</p>'),om=F('<p class="rounded-lg border border-red-200 bg-red-50 p-3 text-sm text-red-700 dark:border-red-900/40 dark:bg-red-950/40 dark:text-red-200"> </p>'),sm=F("<button> </button>"),am=F('<a class="rounded-xl border border-linen-200 bg-white p-4 text-sm shadow-sm transition hover:shadow-md dark:border-slate-700 dark:bg-slate-800"><p class="font-medium text-anthracite-900 dark:text-slate-100"> </p> <p class="text-xs text-anthracite-600 dark:text-slate-400"> </p></a>'),cm=F('<div class="grid grid-cols-1 gap-3 md:grid-cols-2"></div>'),um=F('<a class="rounded-md bg-linen-100 px-2.5 py-1 text-xs text-anthracite-700 dark:bg-slate-700 dark:text-slate-200"> </a>'),lm=F('<article class="rounded-xl border border-linen-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-800"><p class="text-base font-semibold text-anthracite-900 dark:text-slate-100"> </p> <div class="mt-2 flex flex-wrap gap-2"></div></article>'),fm=F('<div class="grid grid-cols-1 gap-3"></div>'),hm=F('<div class="flex flex-wrap gap-2"></div> <!> <nav class="flex items-center justify-center gap-2"><button class="rounded-md border border-linen-300 px-3 py-1.5 text-sm disabled:opacity-40 dark:border-slate-600">Prev</button> <span class="text-sm text-anthracite-700 dark:text-slate-300"> </span> <button class="rounded-md border border-linen-300 px-3 py-1.5 text-sm disabled:opacity-40 dark:border-slate-600">Next</button></nav> <p class="text-xs text-anthracite-600 dark:text-slate-400">XML sitemap: <a href="/sitemap.xml" data-no-spa="true" class="text-canvas-700 hover:text-canvas-800 dark:text-canvas-400">/sitemap.xml</a></p>',1),dm=F('<section class="mx-auto flex max-w-6xl flex-col gap-6 px-4 py-8 md:px-6"><header class="flex flex-col gap-4 rounded-xl border border-linen-200 bg-white p-5 shadow-sm dark:border-slate-700 dark:bg-slate-800 md:flex-row md:items-center md:justify-between"><div><h1 class="text-2xl font-semibold text-anthracite-900 dark:text-slate-100">Site index</h1> <p class="text-sm text-anthracite-600 dark:text-slate-300">Browse indexed books and author directories.</p></div> <div class="flex items-center gap-2"><button>Authors</button> <button>Books</button></div></header> <!></section>');function pm(e,t){lt(t,!0);let r=qr(t,"view",3,"authors"),n=qr(t,"letter",3,"A"),i=qr(t,"page",3,1),o=M(!0),s=M(null),a=M(null);async function u(){L(o,!0),L(s,null);try{L(a,await Cp(r(),n(),i()),!0)}catch(b){L(s,b instanceof Error?b.message:"Unable to load sitemap",!0),L(a,null)}finally{L(o,!1)}}function l(b,x,f){er(`/sitemap/${b}/${encodeURIComponent(x)}/${Math.max(1,f)}`)}xr(()=>{u()});var p=dm(),d=O(p),v=$(O(d),2),y=O(v);y.__click=()=>l("authors",n(),1);var k=$(y,2);k.__click=()=>l("books",n(),1);var E=$(d,2);{var C=b=>{var x=im();D(b,x)},U=b=>{var x=at(),f=ze(x);{var c=h=>{var g=om(),w=O(g);Y(()=>V(w,_(s))),D(h,g)},m=h=>{var g=at(),w=ze(g);{var A=I=>{const z=ke(()=>_(a));var T=hm(),B=ze(T);xe(B,21,()=>_(z).letters,Qe,(ge,_e)=>{var Te=sm();Te.__click=()=>l(_(z).viewType,_(_e),1);var Re=O(Te);Y(()=>{ct(Te,1,`rounded-md px-2.5 py-1 text-xs ${_(_e)===_(z).activeLetter?"bg-canvas-500 text-white":"bg-linen-100 text-anthracite-700 dark:bg-slate-700 dark:text-slate-200"}`),V(Re,_(_e))}),D(ge,Te)});var H=$(B,2);{var de=ge=>{var _e=cm();xe(_e,21,()=>_(z).books,Qe,(Te,Re)=>{var Le=am(),He=O(Le),vt=O(He),Rt=$(He,2),nt=O(Rt);Y((mt,Ke)=>{be(Le,"href",mt),V(vt,_(Re).title),V(nt,Ke)},[()=>`/book/${encodeURIComponent(_(Re).slug)}`,()=>_(Re).updatedAt?new Date(_(Re).updatedAt).toLocaleDateString():"No update date"]),D(Te,Le)}),D(ge,_e)},$e=ge=>{var _e=fm();xe(_e,21,()=>_(z).authors,Qe,(Te,Re)=>{var Le=lm(),He=O(Le),vt=O(He),Rt=$(He,2);xe(Rt,21,()=>_(Re).books,Qe,(nt,mt)=>{var Ke=um(),ir=O(Ke);Y(Ft=>{be(Ke,"href",Ft),V(ir,_(mt).title)},[()=>`/book/${encodeURIComponent(_(mt).slug)}`]),D(nt,Ke)}),Y(()=>V(vt,_(Re).authorName)),D(Te,Le)}),D(ge,_e)};J(H,ge=>{_(z).viewType==="books"?ge(de):ge($e,!1)})}var Ie=$(H,2),tt=O(Ie);tt.__click=()=>l(_(z).viewType,_(z).activeLetter,_(z).pageNumber-1);var dt=$(tt,2),pt=O(dt),rt=$(dt,2);rt.__click=()=>l(_(z).viewType,_(z).activeLetter,_(z).pageNumber+1),Y(ge=>{tt.disabled=_(z).pageNumber<=1,V(pt,`Page ${_(z).pageNumber??""} of ${ge??""}`),rt.disabled=_(z).pageNumber>=_(z).totalPages},[()=>Math.max(1,_(z).totalPages)]),D(I,T)};J(w,I=>{_(a)&&I(A)},!0)}D(h,g)};J(f,h=>{_(s)?h(c):h(m,!1)},!0)}D(b,x)};J(E,b=>{_(o)?b(C):b(U,!1)})}Y(()=>{ct(y,1,`rounded-lg px-3 py-1.5 text-sm ${r()==="authors"?"bg-canvas-500 text-white":"bg-linen-100 text-anthracite-700 dark:bg-slate-700 dark:text-slate-200"}`),ct(k,1,`rounded-lg px-3 py-1.5 text-sm ${r()==="books"?"bg-canvas-500 text-white":"bg-linen-100 text-anthracite-700 dark:bg-slate-700 dark:text-slate-200"}`)}),D(e,p),ft()}Bi(["click"]);var vm=F('<section class="mx-auto flex max-w-3xl flex-col items-center gap-6 px-4 py-16 text-center md:px-6"><p class="text-6xl font-semibold text-canvas-500">404</p> <h1 class="text-3xl font-semibold text-anthracite-900 dark:text-slate-100">Page not found</h1> <p class="text-sm text-anthracite-600 dark:text-slate-300">The page you requested does not exist. Try searching for a book instead.</p> <form class="flex w-full max-w-xl flex-col gap-3 sm:flex-row"><input type="search" class="w-full rounded-xl border border-linen-300 px-4 py-3 outline-none ring-canvas-300 focus:ring-2 dark:border-slate-600 dark:bg-slate-800" placeholder="Search books"/> <button type="submit" class="rounded-xl bg-canvas-500 px-5 py-3 font-medium text-white transition hover:bg-canvas-600">Search</button></form> <a href="/" class="rounded-lg border border-linen-300 px-4 py-2 text-sm text-anthracite-700 transition hover:bg-linen-100 dark:border-slate-600 dark:text-slate-300 dark:hover:bg-slate-800">Go home</a></section>');function mm(e,t){lt(t,!0);let r=M("");function n(a){a.preventDefault();const u=_(r).trim();u&&er(`/search?query=${encodeURIComponent(u)}`)}var i=vm(),o=$(O(i),6),s=O(o);en("submit",o,n),br(s,()=>_(r),a=>L(r,a)),D(e,i),ft()}var gm=F('<div class="min-h-screen bg-linen-50 text-anthracite-900 dark:bg-slate-900 dark:text-slate-100"><!> <main class="min-h-[calc(100vh-180px)]"><!></main> <!></div>');function _m(e,t){lt(t,!0);let r=M(Ye(new URL(window.location.href))),n=ke(()=>Mu(_(r).pathname));tn(()=>{const d=Pa.subscribe(y=>{L(r,y,!0)}),v=Wu();return gp(),()=>{d(),v()}});var i=gm(),o=O(i);yp(o,{get activeRoute(){return _(n).name}});var s=$(o,2),a=O(s);{var u=d=>{Lp(d,{})},l=d=>{var v=at(),y=ze(v);{var k=C=>{Bv(C,{get currentUrl(){return _(r)}})},E=C=>{var U=at(),b=ze(U);{var x=c=>{{let m=ke(()=>_(n).params.identifier??"");nm(c,{get currentUrl(){return _(r)},get identifier(){return _(m)}})}},f=c=>{var m=at(),h=ze(m);{var g=A=>{{let I=ke(()=>_(n).params.view??"authors"),z=ke(()=>_(n).params.letter??"A"),T=ke(()=>_(n).params.page??1);pm(A,{get view(){return _(I)},get letter(){return _(z)},get page(){return _(T)}})}},w=A=>{mm(A,{})};J(h,A=>{_(n).name==="sitemap"?A(g):A(w,!1)},!0)}D(c,m)};J(b,c=>{_(n).name==="book"?c(x):c(f,!1)},!0)}D(C,U)};J(y,C=>{_(n).name==="search"?C(k):C(E,!1)},!0)}D(d,v)};J(a,d=>{_(n).name==="home"?d(u):d(l,!1)})}var p=$(s,2);kp(p),D(e,i),ft()}Tu(_m,{target:document.getElementById("app")});
//# sourceMappingURL=app.js.map
