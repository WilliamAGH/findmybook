(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}})();const pi=!1;var Ri=Array.isArray,Lc=Array.prototype.indexOf,Cr=Array.prototype.includes,Mn=Array.from,Dc=Object.defineProperty,Qt=Object.getOwnPropertyDescriptor,Zc=Object.getOwnPropertyDescriptors,jc=Object.prototype,Mc=Array.prototype,Vs=Object.getPrototypeOf,Yi=Object.isExtensible;function Hr(e){return typeof e=="function"}const he=()=>{};function qc(e){for(var t=0;t<e.length;t++)e[t]()}function Gs(){var e,t,r=new Promise((n,o)=>{e=n,t=o});return{promise:r,resolve:e,reject:t}}function Xs(e,t){if(Array.isArray(e))return e;if(!(Symbol.iterator in e))return Array.from(e);const r=[];for(const n of e)if(r.push(n),r.length===t)break;return r}const We=2,Pn=4,qn=8,Ci=1<<24,Gt=16,Ot=32,br=64,Ni=128,wt=512,Me=1024,Ve=2048,Nt=4096,ht=8192,Ft=16384,Oi=32768,Vt=65536,Qi=1<<17,Ks=1<<18,zr=1<<19,Bc=1<<20,Bt=1<<25,gr=32768,mi=1<<21,$i=1<<22,er=1<<23,vr=Symbol("$state"),Js=Symbol("legacy props"),Fc=Symbol(""),Tr=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Hc(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Wc(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Vc(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Gc(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Xc(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Kc(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Jc(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Yc(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Qc(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function eu(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function tu(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const ru=1,nu=2,Ys=4,ou=8,iu=16,au=1,su=4,lu=8,cu=16,uu=1,du=2,Ze=Symbol(),fu="http://www.w3.org/1999/xhtml",hu="http://www.w3.org/2000/svg",vu="@attach";function pu(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function mu(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Qs(e){return e===this.v}function el(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function tl(e){return!el(e,this.v)}let gu=!1,vt=null;function Nr(e){vt=e}function ie(e,t=!1,r){vt={p:vt,i:!1,c:null,e:null,s:e,x:null,l:null}}function ae(e){var t=vt,r=t.e;if(r!==null){t.e=null;for(var n of r)xl(n)}return t.i=!0,vt=t.p,{}}function rl(){return!0}let dr=[];function nl(){var e=dr;dr=[],qc(e)}function Ht(e){if(dr.length===0&&!Qr){var t=dr;queueMicrotask(()=>{t===dr&&nl()})}dr.push(e)}function _u(){for(;dr.length>0;)nl()}function ol(e){var t=ce;if(t===null)return oe.f|=er,e;if((t.f&Oi)===0){if((t.f&Ni)===0)throw e;t.b.error(e)}else Or(e,t)}function Or(e,t){for(;t!==null;){if((t.f&Ni)!==0)try{t.b.error(e);return}catch(r){e=r}t=t.parent}throw e}const bu=-7169;function Oe(e,t){e.f=e.f&bu|t}function Ai(e){(e.f&wt)!==0||e.deps===null?Oe(e,Me):Oe(e,Nt)}function il(e){if(e!==null)for(const t of e)(t.f&We)===0||(t.f&gr)===0||(t.f^=gr,il(t.deps))}function al(e,t,r){(e.f&Ve)!==0?t.add(e):(e.f&Nt)!==0&&r.add(e),il(e.deps),Oe(e,Me)}const bn=new Set;let le=null,zn=null,It=null,dt=[],Bn=null,gi=!1,Qr=!1;class tr{committed=!1;current=new Map;previous=new Map;#t=new Set;#s=new Set;#e=0;#i=0;#a=null;#n=new Set;#r=new Set;#o=new Map;is_fork=!1;#l=!1;is_deferred(){return this.is_fork||this.#i>0}skip_effect(t){this.#o.has(t)||this.#o.set(t,{d:[],m:[]})}unskip_effect(t){var r=this.#o.get(t);if(r){this.#o.delete(t);for(var n of r.d)Oe(n,Ve),Tt(n);for(n of r.m)Oe(n,Nt),Tt(n)}}process(t){dt=[],this.apply();var r=[],n=[];for(const o of t)this.#c(o,r,n);if(this.is_deferred()){this.#u(n),this.#u(r);for(const[o,i]of this.#o)ul(o,i)}else{for(const o of this.#t)o();this.#t.clear(),this.#e===0&&this.#d(),zn=this,le=null,ea(n),ea(r),zn=null,this.#a?.resolve()}It=null}#c(t,r,n){t.f^=Me;for(var o=t.first,i=null;o!==null;){var a=o.f,s=(a&(Ot|br))!==0,c=s&&(a&Me)!==0,u=c||(a&ht)!==0||this.#o.has(o);if(!u&&o.fn!==null){s?o.f^=Me:i!==null&&(a&(Pn|qn|Ci))!==0?i.b.defer_effect(o):(a&Pn)!==0?r.push(o):un(o)&&((a&Gt)!==0&&this.#r.add(o),nn(o));var f=o.first;if(f!==null){o=f;continue}}var v=o.parent;for(o=o.next;o===null&&v!==null;)v===i&&(i=null),o=v.next,v=v.parent}}#u(t){for(var r=0;r<t.length;r+=1)al(t[r],this.#n,this.#r)}capture(t,r){r!==Ze&&!this.previous.has(t)&&this.previous.set(t,r),(t.f&er)===0&&(this.current.set(t,t.v),It?.set(t,t.v))}activate(){le=this,this.apply()}deactivate(){le===this&&(le=null,It=null)}flush(){if(this.activate(),dt.length>0){if(sl(),le!==null&&le!==this)return}else this.#e===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#s)t(this);this.#s.clear()}#d(){if(bn.size>1){this.previous.clear();var t=It,r=!0;for(const o of bn){if(o===this){r=!1;continue}const i=[];for(const[s,c]of this.current){if(o.current.has(s))if(r&&c!==o.current.get(s))o.current.set(s,c);else continue;i.push(s)}if(i.length===0)continue;const a=[...o.current.keys()].filter(s=>!this.current.has(s));if(a.length>0){var n=dt;dt=[];const s=new Set,c=new Map;for(const u of i)ll(u,a,s,c);if(dt.length>0){le=o,o.apply();for(const u of dt)o.#c(u,[],[]);o.deactivate()}dt=n}}le=null,It=t}this.committed=!0,bn.delete(this)}increment(t){this.#e+=1,t&&(this.#i+=1)}decrement(t){this.#e-=1,t&&(this.#i-=1),!this.#l&&(this.#l=!0,Ht(()=>{this.#l=!1,this.is_deferred()?dt.length>0&&this.flush():this.revive()}))}revive(){for(const t of this.#n)this.#r.delete(t),Oe(t,Ve),Tt(t);for(const t of this.#r)Oe(t,Nt),Tt(t);this.flush()}oncommit(t){this.#t.add(t)}ondiscard(t){this.#s.add(t)}settled(){return(this.#a??=Gs()).promise}static ensure(){if(le===null){const t=le=new tr;bn.add(le),Qr||Ht(()=>{le===t&&t.flush()})}return le}apply(){}}function yu(e){var t=Qr;Qr=!0;try{for(var r;;){if(_u(),dt.length===0&&(le?.flush(),dt.length===0))return Bn=null,r;sl()}}finally{Qr=t}}function sl(){gi=!0;var e=null;try{for(var t=0;dt.length>0;){var r=tr.ensure();if(t++>1e3){var n,o;wu()}r.process(dt),rr.clear()}}finally{gi=!1,Bn=null}}function wu(){try{Kc()}catch(e){Or(e,Bn)}}let qt=null;function ea(e){var t=e.length;if(t!==0){for(var r=0;r<t;){var n=e[r++];if((n.f&(Ft|ht))===0&&un(n)&&(qt=new Set,nn(n),n.deps===null&&n.first===null&&n.nodes===null&&(n.teardown===null&&n.ac===null?Rl(n):n.fn=null),qt?.size>0)){rr.clear();for(const o of qt){if((o.f&(Ft|ht))!==0)continue;const i=[o];let a=o.parent;for(;a!==null;)qt.has(a)&&(qt.delete(a),i.push(a)),a=a.parent;for(let s=i.length-1;s>=0;s--){const c=i[s];(c.f&(Ft|ht))===0&&nn(c)}}qt.clear()}}qt=null}}function ll(e,t,r,n){if(!r.has(e)&&(r.add(e),e.reactions!==null))for(const o of e.reactions){const i=o.f;(i&We)!==0?ll(o,t,r,n):(i&($i|Gt))!==0&&(i&Ve)===0&&cl(o,t,n)&&(Oe(o,Ve),Tt(o))}}function cl(e,t,r){const n=r.get(e);if(n!==void 0)return n;if(e.deps!==null)for(const o of e.deps){if(Cr.call(t,o))return!0;if((o.f&We)!==0&&cl(o,t,r))return r.set(o,!0),!0}return r.set(e,!1),!1}function Tt(e){for(var t=Bn=e;t.parent!==null;){t=t.parent;var r=t.f;if(gi&&t===ce&&(r&Gt)!==0&&(r&Ks)===0)return;if((r&(br|Ot))!==0){if((r&Me)===0)return;t.f^=Me}}dt.push(t)}function ul(e,t){if(!((e.f&Ot)!==0&&(e.f&Me)!==0)){(e.f&Ve)!==0?t.d.push(e):(e.f&Nt)!==0&&t.m.push(e),Oe(e,Me);for(var r=e.first;r!==null;)ul(r,t),r=r.next}}function xu(e){let t=0,r=_r(0),n;return()=>{zi()&&(d(r),kl(()=>(t===0&&(n=Lr(()=>e(()=>en(r)))),t+=1,()=>{Ht(()=>{t-=1,t===0&&(n?.(),n=void 0,en(r))})})))}}var ku=Vt|zr|Ni;function Su(e,t,r){new Eu(e,t,r)}class Eu{parent;is_pending=!1;#t;#s=null;#e;#i;#a;#n=null;#r=null;#o=null;#l=null;#c=null;#u=0;#d=0;#v=!1;#h=!1;#p=new Set;#m=new Set;#f=null;#w=xu(()=>(this.#f=_r(this.#u),()=>{this.#f=null}));constructor(t,r,n){this.#t=t,this.#e=r,this.#i=n,this.parent=ce.b,this.is_pending=!!this.#e.pending,this.#a=Ur(()=>{ce.b=this;{var o=this.#b();try{this.#n=ot(()=>n(o))}catch(i){this.error(i)}this.#d>0?this.#_():this.is_pending=!1}return()=>{this.#c?.remove()}},ku)}#x(){try{this.#n=ot(()=>this.#i(this.#t))}catch(t){this.error(t)}}#k(){const t=this.#e.pending;t&&(this.#r=ot(()=>t(this.#t)),Ht(()=>{var r=this.#b();this.#n=this.#g(()=>(tr.ensure(),ot(()=>this.#i(r)))),this.#d>0?this.#_():(pr(this.#r,()=>{this.#r=null}),this.is_pending=!1)}))}#b(){var t=this.#t;return this.is_pending&&(this.#c=Wt(),this.#t.before(this.#c),t=this.#c),t}defer_effect(t){al(t,this.#p,this.#m)}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!this.#e.pending}#g(t){var r=ce,n=oe,o=vt;Dt(this.#a),kt(this.#a),Nr(this.#a.ctx);try{return t()}catch(i){return ol(i),null}finally{Dt(r),kt(n),Nr(o)}}#_(){const t=this.#e.pending;this.#n!==null&&(this.#l=document.createDocumentFragment(),this.#l.append(this.#c),Ol(this.#n,this.#l)),this.#r===null&&(this.#r=ot(()=>t(this.#t)))}#y(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#y(t);return}if(this.#d+=t,this.#d===0){this.is_pending=!1;for(const r of this.#p)Oe(r,Ve),Tt(r);for(const r of this.#m)Oe(r,Nt),Tt(r);this.#p.clear(),this.#m.clear(),this.#r&&pr(this.#r,()=>{this.#r=null}),this.#l&&(this.#t.before(this.#l),this.#l=null)}}update_pending_count(t){this.#y(t),this.#u+=t,!(!this.#f||this.#v)&&(this.#v=!0,Ht(()=>{this.#v=!1,this.#f&&$r(this.#f,this.#u)}))}get_effect_pending(){return this.#w(),d(this.#f)}error(t){var r=this.#e.onerror;let n=this.#e.failed;if(this.#h||!r&&!n)throw t;this.#n&&(He(this.#n),this.#n=null),this.#r&&(He(this.#r),this.#r=null),this.#o&&(He(this.#o),this.#o=null);var o=!1,i=!1;const a=()=>{if(o){mu();return}o=!0,i&&tu(),tr.ensure(),this.#u=0,this.#o!==null&&pr(this.#o,()=>{this.#o=null}),this.is_pending=this.has_pending_snippet(),this.#n=this.#g(()=>(this.#h=!1,ot(()=>this.#i(this.#t)))),this.#d>0?this.#_():this.is_pending=!1};Ht(()=>{try{i=!0,r?.(t,a),i=!1}catch(s){Or(s,this.#a&&this.#a.parent)}n&&(this.#o=this.#g(()=>{tr.ensure(),this.#h=!0;try{return ot(()=>{n(this.#t,()=>t,()=>a)})}catch(s){return Or(s,this.#a.parent),null}finally{this.#h=!1}}))})}}function dl(e,t,r,n){const o=Fn;var i=e.filter(p=>!p.settled);if(r.length===0&&i.length===0){n(t.map(o));return}var a=le,s=ce,c=Iu(),u=i.length===1?i[0].promise:i.length>1?Promise.all(i.map(p=>p.promise)):null;function f(p){c();try{n(p)}catch(y){(s.f&Ft)===0&&Or(y,s)}a?.deactivate(),_i()}if(r.length===0){u.then(()=>f(t.map(o)));return}function v(){c(),Promise.all(r.map(p=>Tu(p))).then(p=>f([...t.map(o),...p])).catch(p=>Or(p,s))}u?u.then(v):v()}function Iu(){var e=ce,t=oe,r=vt,n=le;return function(i=!0){Dt(e),kt(t),Nr(r),i&&n?.activate()}}function _i(){Dt(null),kt(null),Nr(null)}function Fn(e){var t=We|Ve,r=oe!==null&&(oe.f&We)!==0?oe:null;return ce!==null&&(ce.f|=zr),{ctx:vt,deps:null,effects:null,equals:Qs,f:t,fn:e,reactions:null,rv:0,v:Ze,wv:0,parent:r??ce,ac:null}}function Tu(e,t,r){let n=ce;n===null&&Wc();var o=n.b,i=void 0,a=_r(Ze),s=!oe,c=new Map;return Zu(()=>{var u=Gs();i=u.promise;try{Promise.resolve(e()).then(u.resolve,u.reject).then(()=>{f===le&&f.committed&&f.deactivate(),_i()})}catch(y){u.reject(y),_i()}var f=le;if(s){var v=o.is_rendered();o.update_pending_count(1),f.increment(v),c.get(f)?.reject(Tr),c.delete(f),c.set(f,u)}const p=(y,E=void 0)=>{if(f.activate(),E)E!==Tr&&(a.f|=er,$r(a,E));else{(a.f&er)!==0&&(a.f^=er),$r(a,y);for(const[I,k]of c){if(c.delete(I),I===f)break;k.reject(Tr)}}s&&(o.update_pending_count(-1),f.decrement(v))};u.promise.then(p,y=>p(null,y||"unknown"))}),Wn(()=>{for(const u of c.values())u.reject(Tr)}),new Promise(u=>{function f(v){function p(){v===i?u(a):f(i)}v.then(p,p)}f(i)})}function Re(e){const t=Fn(e);return $l(t),t}function fl(e){const t=Fn(e);return t.equals=tl,t}function hl(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)He(t[r])}}function Ru(e){for(var t=e.parent;t!==null;){if((t.f&We)===0)return(t.f&Ft)===0?t:null;t=t.parent}return null}function Pi(e){var t,r=ce;Dt(Ru(e));try{e.f&=~gr,hl(e),t=Ul(e)}finally{Dt(r)}return t}function vl(e){var t=Pi(e);if(!e.equals(t)&&(e.wv=Pl(),(!le?.is_fork||e.deps===null)&&(e.v=t,e.deps===null))){Oe(e,Me);return}nr||(It!==null?(zi()||le?.is_fork)&&It.set(e,t):Ai(e))}let bi=new Set;const rr=new Map;let pl=!1;function _r(e,t){var r={f:0,v:e,reactions:null,equals:Qs,rv:0,wv:0};return r}function te(e,t){const r=_r(e);return $l(r),r}function Cu(e,t=!1,r=!0){const n=_r(e);return t||(n.equals=tl),n}function M(e,t,r=!1){oe!==null&&(!Ct||(oe.f&Qi)!==0)&&rl()&&(oe.f&(We|Gt|$i|Qi))!==0&&(xt===null||!Cr.call(xt,e))&&eu();let n=r?Rt(t):t;return $r(e,n)}function $r(e,t){if(!e.equals(t)){var r=e.v;nr?rr.set(e,t):rr.set(e,r),e.v=t;var n=tr.ensure();if(n.capture(e,r),(e.f&We)!==0){const o=e;(e.f&Ve)!==0&&Pi(o),Ai(o)}e.wv=Pl(),ml(e,Ve),ce!==null&&(ce.f&Me)!==0&&(ce.f&(Ot|br))===0&&(yt===null?Mu([e]):yt.push(e)),!n.is_fork&&bi.size>0&&!pl&&Nu()}return t}function Nu(){pl=!1;for(const e of bi)(e.f&Me)!==0&&Oe(e,Nt),un(e)&&nn(e);bi.clear()}function en(e){M(e,e.v+1)}function ml(e,t){var r=e.reactions;if(r!==null)for(var n=r.length,o=0;o<n;o++){var i=r[o],a=i.f,s=(a&Ve)===0;if(s&&Oe(i,t),(a&We)!==0){var c=i;It?.delete(c),(a&gr)===0&&(a&wt&&(i.f|=gr),ml(c,Nt))}else s&&((a&Gt)!==0&&qt!==null&&qt.add(i),Tt(i))}}function Rt(e){if(typeof e!="object"||e===null||vr in e)return e;const t=Vs(e);if(t!==jc&&t!==Mc)return e;var r=new Map,n=Ri(e),o=te(0),i=mr,a=s=>{if(mr===i)return s();var c=oe,u=mr;kt(null),ia(i);var f=s();return kt(c),ia(u),f};return n&&r.set("length",te(e.length)),new Proxy(e,{defineProperty(s,c,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&Yc();var f=r.get(c);return f===void 0?f=a(()=>{var v=te(u.value);return r.set(c,v),v}):M(f,u.value,!0),!0},deleteProperty(s,c){var u=r.get(c);if(u===void 0){if(c in s){const f=a(()=>te(Ze));r.set(c,f),en(o)}}else M(u,Ze),en(o);return!0},get(s,c,u){if(c===vr)return e;var f=r.get(c),v=c in s;if(f===void 0&&(!v||Qt(s,c)?.writable)&&(f=a(()=>{var y=Rt(v?s[c]:Ze),E=te(y);return E}),r.set(c,f)),f!==void 0){var p=d(f);return p===Ze?void 0:p}return Reflect.get(s,c,u)},getOwnPropertyDescriptor(s,c){var u=Reflect.getOwnPropertyDescriptor(s,c);if(u&&"value"in u){var f=r.get(c);f&&(u.value=d(f))}else if(u===void 0){var v=r.get(c),p=v?.v;if(v!==void 0&&p!==Ze)return{enumerable:!0,configurable:!0,value:p,writable:!0}}return u},has(s,c){if(c===vr)return!0;var u=r.get(c),f=u!==void 0&&u.v!==Ze||Reflect.has(s,c);if(u!==void 0||ce!==null&&(!f||Qt(s,c)?.writable)){u===void 0&&(u=a(()=>{var p=f?Rt(s[c]):Ze,y=te(p);return y}),r.set(c,u));var v=d(u);if(v===Ze)return!1}return f},set(s,c,u,f){var v=r.get(c),p=c in s;if(n&&c==="length")for(var y=u;y<v.v;y+=1){var E=r.get(y+"");E!==void 0?M(E,Ze):y in s&&(E=a(()=>te(Ze)),r.set(y+"",E))}if(v===void 0)(!p||Qt(s,c)?.writable)&&(v=a(()=>te(void 0)),M(v,Rt(u)),r.set(c,v));else{p=v.v!==Ze;var I=a(()=>Rt(u));M(v,I)}var k=Reflect.getOwnPropertyDescriptor(s,c);if(k?.set&&k.set.call(f,u),!p){if(n&&typeof c=="string"){var N=r.get("length"),b=Number(c);Number.isInteger(b)&&b>=N.v&&M(N,b+1)}en(o)}return!0},ownKeys(s){d(o);var c=Reflect.ownKeys(s).filter(v=>{var p=r.get(v);return p===void 0||p.v!==Ze});for(var[u,f]of r)f.v!==Ze&&!(u in s)&&c.push(u);return c},setPrototypeOf(){Qc()}})}function ta(e){try{if(e!==null&&typeof e=="object"&&vr in e)return e[vr]}catch{}return e}function Ou(e,t){return Object.is(ta(e),ta(t))}var ra,gl,_l,bl;function $u(){if(ra===void 0){ra=window,gl=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,r=Text.prototype;_l=Qt(t,"firstChild").get,bl=Qt(t,"nextSibling").get,Yi(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Yi(r)&&(r.__t=void 0)}}function Wt(e=""){return document.createTextNode(e)}function Ut(e){return _l.call(e)}function ln(e){return bl.call(e)}function S(e,t){return Ut(e)}function V(e,t=!1){{var r=Ut(e);return r instanceof Comment&&r.data===""?ln(r):r}}function O(e,t=1,r=!1){let n=e;for(;t--;)n=ln(n);return n}function Au(e){e.textContent=""}function yl(){return!1}function Pu(e,t){if(t){const r=document.body;e.autofocus=!0,Ht(()=>{document.activeElement===r&&e.focus()})}}let na=!1;function zu(){na||(na=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function Hn(e){var t=oe,r=ce;kt(null),Dt(null);try{return e()}finally{kt(t),Dt(r)}}function wl(e,t,r,n=r){e.addEventListener(t,()=>Hn(r));const o=e.__on_r;o?e.__on_r=()=>{o(),n(!0)}:e.__on_r=()=>n(!0),zu()}function Uu(e){ce===null&&(oe===null&&Xc(),Gc()),nr&&Vc()}function Lu(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function Zt(e,t,r){var n=ce;n!==null&&(n.f&ht)!==0&&(e|=ht);var o={ctx:vt,deps:null,nodes:null,f:e|Ve|wt,first:null,fn:t,last:null,next:null,parent:n,b:n&&n.b,prev:null,teardown:null,wv:0,ac:null};if(r)try{nn(o),o.f|=Oi}catch(s){throw He(o),s}else t!==null&&Tt(o);var i=o;if(r&&i.deps===null&&i.teardown===null&&i.nodes===null&&i.first===i.last&&(i.f&zr)===0&&(i=i.first,(e&Gt)!==0&&(e&Vt)!==0&&i!==null&&(i.f|=Vt)),i!==null&&(i.parent=n,n!==null&&Lu(i,n),oe!==null&&(oe.f&We)!==0&&(e&br)===0)){var a=oe;(a.effects??=[]).push(i)}return o}function zi(){return oe!==null&&!Ct}function Wn(e){const t=Zt(qn,null,!1);return Oe(t,Me),t.teardown=e,t}function cn(e){Uu();var t=ce.f,r=!oe&&(t&Ot)!==0&&(t&Oi)===0;if(r){var n=vt;(n.e??=[]).push(e)}else return xl(e)}function xl(e){return Zt(Pn|Bc,e,!1)}function Du(e){tr.ensure();const t=Zt(br|zr,e,!0);return(r={})=>new Promise(n=>{r.outro?pr(t,()=>{He(t),n(void 0)}):(He(t),n(void 0))})}function Ui(e){return Zt(Pn,e,!1)}function Zu(e){return Zt($i|zr,e,!0)}function kl(e,t=0){return Zt(qn|t,e,!0)}function J(e,t=[],r=[],n=[]){dl(n,t,r,o=>{Zt(qn,()=>e(...o.map(d)),!0)})}function Ur(e,t=0){var r=Zt(Gt|t,e,!0);return r}function Sl(e,t=0){var r=Zt(Ci|t,e,!0);return r}function ot(e){return Zt(Ot|zr,e,!0)}function El(e){var t=e.teardown;if(t!==null){const r=nr,n=oe;oa(!0),kt(null);try{t.call(null)}finally{oa(r),kt(n)}}}function Il(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){const o=r.ac;o!==null&&Hn(()=>{o.abort(Tr)});var n=r.next;(r.f&br)!==0?r.parent=null:He(r,t),r=n}}function ju(e){for(var t=e.first;t!==null;){var r=t.next;(t.f&Ot)===0&&He(t),t=r}}function He(e,t=!0){var r=!1;(t||(e.f&Ks)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(Tl(e.nodes.start,e.nodes.end),r=!0),Il(e,t&&!r),Un(e,0),Oe(e,Ft);var n=e.nodes&&e.nodes.t;if(n!==null)for(const i of n)i.stop();El(e);var o=e.parent;o!==null&&o.first!==null&&Rl(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function Tl(e,t){for(;e!==null;){var r=e===t?null:ln(e);e.remove(),e=r}}function Rl(e){var t=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=r))}function pr(e,t,r=!0){var n=[];Cl(e,n,!0);var o=()=>{r&&He(e),t&&t()},i=n.length;if(i>0){var a=()=>--i||o();for(var s of n)s.out(a)}else o()}function Cl(e,t,r){if((e.f&ht)===0){e.f^=ht;var n=e.nodes&&e.nodes.t;if(n!==null)for(const s of n)(s.is_global||r)&&t.push(s);for(var o=e.first;o!==null;){var i=o.next,a=(o.f&Vt)!==0||(o.f&Ot)!==0&&(e.f&Gt)!==0;Cl(o,t,a?r:!1),o=i}}}function Li(e){Nl(e,!0)}function Nl(e,t){if((e.f&ht)!==0){e.f^=ht,(e.f&Me)===0&&(Oe(e,Ve),Tt(e));for(var r=e.first;r!==null;){var n=r.next,o=(r.f&Vt)!==0||(r.f&Ot)!==0;Nl(r,o?t:!1),r=n}var i=e.nodes&&e.nodes.t;if(i!==null)for(const a of i)(a.is_global||t)&&a.in()}}function Ol(e,t){if(e.nodes)for(var r=e.nodes.start,n=e.nodes.end;r!==null;){var o=r===n?null:ln(r);t.append(r),r=o}}let On=!1,nr=!1;function oa(e){nr=e}let oe=null,Ct=!1;function kt(e){oe=e}let ce=null;function Dt(e){ce=e}let xt=null;function $l(e){oe!==null&&(xt===null?xt=[e]:xt.push(e))}let nt=null,ut=0,yt=null;function Mu(e){yt=e}let Al=1,fr=0,mr=fr;function ia(e){mr=e}function Pl(){return++Al}function un(e){var t=e.f;if((t&Ve)!==0)return!0;if(t&We&&(e.f&=~gr),(t&Nt)!==0){for(var r=e.deps,n=r.length,o=0;o<n;o++){var i=r[o];if(un(i)&&vl(i),i.wv>e.wv)return!0}(t&wt)!==0&&It===null&&Oe(e,Me)}return!1}function zl(e,t,r=!0){var n=e.reactions;if(n!==null&&!(xt!==null&&Cr.call(xt,e)))for(var o=0;o<n.length;o++){var i=n[o];(i.f&We)!==0?zl(i,t,!1):t===i&&(r?Oe(i,Ve):(i.f&Me)!==0&&Oe(i,Nt),Tt(i))}}function Ul(e){var t=nt,r=ut,n=yt,o=oe,i=xt,a=vt,s=Ct,c=mr,u=e.f;nt=null,ut=0,yt=null,oe=(u&(Ot|br))===0?e:null,xt=null,Nr(e.ctx),Ct=!1,mr=++fr,e.ac!==null&&(Hn(()=>{e.ac.abort(Tr)}),e.ac=null);try{e.f|=mi;var f=e.fn,v=f(),p=e.deps,y=le?.is_fork;if(nt!==null){var E;if(y||Un(e,ut),p!==null&&ut>0)for(p.length=ut+nt.length,E=0;E<nt.length;E++)p[ut+E]=nt[E];else e.deps=p=nt;if(zi()&&(e.f&wt)!==0)for(E=ut;E<p.length;E++)(p[E].reactions??=[]).push(e)}else!y&&p!==null&&ut<p.length&&(Un(e,ut),p.length=ut);if(rl()&&yt!==null&&!Ct&&p!==null&&(e.f&(We|Nt|Ve))===0)for(E=0;E<yt.length;E++)zl(yt[E],e);if(o!==null&&o!==e){if(fr++,o.deps!==null)for(let I=0;I<r;I+=1)o.deps[I].rv=fr;if(t!==null)for(const I of t)I.rv=fr;yt!==null&&(n===null?n=yt:n.push(...yt))}return(e.f&er)!==0&&(e.f^=er),v}catch(I){return ol(I)}finally{e.f^=mi,nt=t,ut=r,yt=n,oe=o,xt=i,Nr(a),Ct=s,mr=c}}function qu(e,t){let r=t.reactions;if(r!==null){var n=Lc.call(r,e);if(n!==-1){var o=r.length-1;o===0?r=t.reactions=null:(r[n]=r[o],r.pop())}}if(r===null&&(t.f&We)!==0&&(nt===null||!Cr.call(nt,t))){var i=t;(i.f&wt)!==0&&(i.f^=wt,i.f&=~gr),Ai(i),hl(i),Un(i,0)}}function Un(e,t){var r=e.deps;if(r!==null)for(var n=t;n<r.length;n++)qu(e,r[n])}function nn(e){var t=e.f;if((t&Ft)===0){Oe(e,Me);var r=ce,n=On;ce=e,On=!0;try{(t&(Gt|Ci))!==0?ju(e):Il(e),El(e);var o=Ul(e);e.teardown=typeof o=="function"?o:null,e.wv=Al;var i;pi&&gu&&(e.f&Ve)!==0&&e.deps}finally{On=n,ce=r}}}async function Bu(){await Promise.resolve(),yu()}function d(e){var t=e.f,r=(t&We)!==0;if(oe!==null&&!Ct){var n=ce!==null&&(ce.f&Ft)!==0;if(!n&&(xt===null||!Cr.call(xt,e))){var o=oe.deps;if((oe.f&mi)!==0)e.rv<fr&&(e.rv=fr,nt===null&&o!==null&&o[ut]===e?ut++:nt===null?nt=[e]:nt.push(e));else{(oe.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[oe]:Cr.call(i,oe)||i.push(oe)}}}if(nr&&rr.has(e))return rr.get(e);if(r){var a=e;if(nr){var s=a.v;return((a.f&Me)===0&&a.reactions!==null||Dl(a))&&(s=Pi(a)),rr.set(a,s),s}var c=(a.f&wt)===0&&!Ct&&oe!==null&&(On||(oe.f&wt)!==0),u=a.deps===null;un(a)&&(c&&(a.f|=wt),vl(a)),c&&!u&&Ll(a)}if(It?.has(e))return It.get(e);if((e.f&er)!==0)throw e.v;return e.v}function Ll(e){if(e.deps!==null){e.f|=wt;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&We)!==0&&(t.f&wt)===0&&Ll(t)}}function Dl(e){if(e.v===Ze)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(rr.has(t)||(t.f&We)!==0&&Dl(t))return!0;return!1}function Lr(e){var t=Ct;try{return Ct=!0,e()}finally{Ct=t}}function Fu(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const Hu=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function Wu(e){return Hu.includes(e)}const Vu={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function Gu(e){return e=e.toLowerCase(),Vu[e]??e}const Xu=["touchstart","touchmove"];function Ku(e){return Xu.includes(e)}const Zl=new Set,yi=new Set;function jl(e,t,r,n={}){function o(i){if(n.capture||Kr.call(t,i),!i.cancelBubble)return Hn(()=>r?.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Ht(()=>{t.addEventListener(e,o,n)}):t.addEventListener(e,o,n),o}function Vn(e,t,r,n,o){var i={capture:n,passive:o},a=jl(e,t,r,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Wn(()=>{t.removeEventListener(e,a,i)})}function dn(e){for(var t=0;t<e.length;t++)Zl.add(e[t]);for(var r of yi)r(e)}let aa=null;function Kr(e){var t=this,r=t.ownerDocument,n=e.type,o=e.composedPath?.()||[],i=o[0]||e.target;aa=e;var a=0,s=aa===e&&e.__root;if(s){var c=o.indexOf(s);if(c!==-1&&(t===document||t===window)){e.__root=t;return}var u=o.indexOf(t);if(u===-1)return;c<=u&&(a=c)}if(i=o[a]||e.target,i!==t){Dc(e,"currentTarget",{configurable:!0,get(){return i||r}});var f=oe,v=ce;kt(null),Dt(null);try{for(var p,y=[];i!==null;){var E=i.assignedSlot||i.parentNode||i.host||null;try{var I=i["__"+n];I!=null&&(!i.disabled||e.target===i)&&I.call(i,e)}catch(k){p?y.push(k):p=k}if(e.cancelBubble||E===t||E===null)break;i=E}if(p){for(let k of y)queueMicrotask(()=>{throw k});throw p}}finally{e.__root=t,delete e.currentTarget,kt(f),Dt(v)}}}function Di(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Ar(e,t){var r=ce;r.nodes===null&&(r.nodes={start:e,end:t,a:null,t:null})}function D(e,t){var r=(t&uu)!==0,n=(t&du)!==0,o,i=!e.startsWith("<!>");return()=>{o===void 0&&(o=Di(i?e:"<!>"+e),r||(o=Ut(o)));var a=n||gl?document.importNode(o,!0):o.cloneNode(!0);if(r){var s=Ut(a),c=a.lastChild;Ar(s,c)}else Ar(a,a);return a}}function Ju(e,t,r="svg"){var n=!e.startsWith("<!>"),o=`<${r}>${n?e:"<!>"+e}</${r}>`,i;return()=>{if(!i){var a=Di(o),s=Ut(a);i=Ut(s)}var c=i.cloneNode(!0);return Ar(c,c),c}}function Yu(e,t){return Ju(e,t,"svg")}function Q(){var e=document.createDocumentFragment(),t=document.createComment(""),r=Wt();return e.append(t,r),Ar(t,r),e}function T(e,t){e!==null&&e.before(t)}function X(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??=e.nodeValue)&&(e.__t=r,e.nodeValue=r+"")}function Qu(e,t){return ed(e,t)}const Er=new Map;function ed(e,{target:t,anchor:r,props:n={},events:o,context:i,intro:a=!0}){$u();var s=new Set,c=v=>{for(var p=0;p<v.length;p++){var y=v[p];if(!s.has(y)){s.add(y);var E=Ku(y);t.addEventListener(y,Kr,{passive:E});var I=Er.get(y);I===void 0?(document.addEventListener(y,Kr,{passive:E}),Er.set(y,1)):Er.set(y,I+1)}}};c(Mn(Zl)),yi.add(c);var u=void 0,f=Du(()=>{var v=r??t.appendChild(Wt());return Su(v,{pending:()=>{}},p=>{if(i){ie({});var y=vt;y.c=i}o&&(n.$$events=o),u=e(p,n)||{},i&&ae()}),()=>{for(var p of s){t.removeEventListener(p,Kr);var y=Er.get(p);--y===0?(document.removeEventListener(p,Kr),Er.delete(p)):Er.set(p,y)}yi.delete(c),v!==r&&v.parentNode?.removeChild(v)}});return td.set(u,f),u}let td=new WeakMap;class Gn{anchor;#t=new Map;#s=new Map;#e=new Map;#i=new Set;#a=!0;constructor(t,r=!0){this.anchor=t,this.#a=r}#n=()=>{var t=le;if(this.#t.has(t)){var r=this.#t.get(t),n=this.#s.get(r);if(n)Li(n),this.#i.delete(r);else{var o=this.#e.get(r);o&&(this.#s.set(r,o.effect),this.#e.delete(r),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),n=o.effect)}for(const[i,a]of this.#t){if(this.#t.delete(i),i===t)break;const s=this.#e.get(a);s&&(He(s.effect),this.#e.delete(a))}for(const[i,a]of this.#s){if(i===r||this.#i.has(i))continue;const s=()=>{if(Array.from(this.#t.values()).includes(i)){var u=document.createDocumentFragment();Ol(a,u),u.append(Wt()),this.#e.set(i,{effect:a,fragment:u})}else He(a);this.#i.delete(i),this.#s.delete(i)};this.#a||!n?(this.#i.add(i),pr(a,s,!1)):s()}}};#r=t=>{this.#t.delete(t);const r=Array.from(this.#t.values());for(const[n,o]of this.#e)r.includes(n)||(He(o.effect),this.#e.delete(n))};ensure(t,r){var n=le,o=yl();if(r&&!this.#s.has(t)&&!this.#e.has(t))if(o){var i=document.createDocumentFragment(),a=Wt();i.append(a),this.#e.set(t,{effect:ot(()=>r(a)),fragment:i})}else this.#s.set(t,ot(()=>r(this.anchor)));if(this.#t.set(n,t),o){for(const[s,c]of this.#s)s===t?n.unskip_effect(c):n.skip_effect(c);for(const[s,c]of this.#e)s===t?n.unskip_effect(c.effect):n.skip_effect(c.effect);n.oncommit(this.#n),n.ondiscard(this.#r)}else this.#n()}}function H(e,t,r=!1){var n=new Gn(e),o=r?Vt:0;function i(a,s){n.ensure(a,s)}Ur(()=>{var a=!1;t((s,c=!0)=>{a=!0,i(c,s)}),a||i(!1,null)},o)}function Lt(e,t){return t}function rd(e,t,r){for(var n=[],o=t.length,i,a=t.length,s=0;s<o;s++){let v=t[s];pr(v,()=>{if(i){if(i.pending.delete(v),i.done.add(v),i.pending.size===0){var p=e.outrogroups;wi(Mn(i.done)),p.delete(i),p.size===0&&(e.outrogroups=null)}}else a-=1},!1)}if(a===0){var c=n.length===0&&r!==null;if(c){var u=r,f=u.parentNode;Au(f),f.append(u),e.items.clear()}wi(t,!c)}else i={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(i)}function wi(e,t=!0){for(var r=0;r<e.length;r++)He(e[r],t)}var sa;function je(e,t,r,n,o,i=null){var a=e,s=new Map,c=(t&Ys)!==0;if(c){var u=e;a=u.appendChild(Wt())}var f=null,v=fl(()=>{var N=r();return Ri(N)?N:N==null?[]:Mn(N)}),p,y=!0;function E(){k.fallback=f,nd(k,p,a,t,n),f!==null&&(p.length===0?(f.f&Bt)===0?Li(f):(f.f^=Bt,Jr(f,null,a)):pr(f,()=>{f=null}))}var I=Ur(()=>{p=d(v);for(var N=p.length,b=new Set,x=le,_=yl(),l=0;l<N;l+=1){var m=p[l],g=n(m,l),h=y?null:s.get(g);h?(h.v&&$r(h.v,m),h.i&&$r(h.i,l),_&&x.unskip_effect(h.e)):(h=od(s,y?a:sa??=Wt(),m,g,l,o,t,r),y||(h.e.f|=Bt),s.set(g,h)),b.add(g)}if(N===0&&i&&!f&&(y?f=ot(()=>i(a)):(f=ot(()=>i(sa??=Wt())),f.f|=Bt)),!y)if(_){for(const[w,R]of s)b.has(w)||x.skip_effect(R.e);x.oncommit(E),x.ondiscard(()=>{})}else E();d(v)}),k={effect:I,items:s,outrogroups:null,fallback:f};y=!1}function Wr(e){for(;e!==null&&(e.f&Ot)===0;)e=e.next;return e}function nd(e,t,r,n,o){var i=(n&ou)!==0,a=t.length,s=e.items,c=Wr(e.effect.first),u,f=null,v,p=[],y=[],E,I,k,N;if(i)for(N=0;N<a;N+=1)E=t[N],I=o(E,N),k=s.get(I).e,(k.f&Bt)===0&&(k.nodes?.a?.measure(),(v??=new Set).add(k));for(N=0;N<a;N+=1){if(E=t[N],I=o(E,N),k=s.get(I).e,e.outrogroups!==null)for(const R of e.outrogroups)R.pending.delete(k),R.done.delete(k);if((k.f&Bt)!==0)if(k.f^=Bt,k===c)Jr(k,null,r);else{var b=f?f.next:c;k===e.effect.last&&(e.effect.last=k.prev),k.prev&&(k.prev.next=k.next),k.next&&(k.next.prev=k.prev),Yt(e,f,k),Yt(e,k,b),Jr(k,b,r),f=k,p=[],y=[],c=Wr(f.next);continue}if((k.f&ht)!==0&&(Li(k),i&&(k.nodes?.a?.unfix(),(v??=new Set).delete(k))),k!==c){if(u!==void 0&&u.has(k)){if(p.length<y.length){var x=y[0],_;f=x.prev;var l=p[0],m=p[p.length-1];for(_=0;_<p.length;_+=1)Jr(p[_],x,r);for(_=0;_<y.length;_+=1)u.delete(y[_]);Yt(e,l.prev,m.next),Yt(e,f,l),Yt(e,m,x),c=x,f=m,N-=1,p=[],y=[]}else u.delete(k),Jr(k,c,r),Yt(e,k.prev,k.next),Yt(e,k,f===null?e.effect.first:f.next),Yt(e,f,k),f=k;continue}for(p=[],y=[];c!==null&&c!==k;)(u??=new Set).add(c),y.push(c),c=Wr(c.next);if(c===null)continue}(k.f&Bt)===0&&p.push(k),f=k,c=Wr(k.next)}if(e.outrogroups!==null){for(const R of e.outrogroups)R.pending.size===0&&(wi(Mn(R.done)),e.outrogroups?.delete(R));e.outrogroups.size===0&&(e.outrogroups=null)}if(c!==null||u!==void 0){var g=[];if(u!==void 0)for(k of u)(k.f&ht)===0&&g.push(k);for(;c!==null;)(c.f&ht)===0&&c!==e.fallback&&g.push(c),c=Wr(c.next);var h=g.length;if(h>0){var w=(n&Ys)!==0&&a===0?r:null;if(i){for(N=0;N<h;N+=1)g[N].nodes?.a?.measure();for(N=0;N<h;N+=1)g[N].nodes?.a?.fix()}rd(e,g,w)}}i&&Ht(()=>{if(v!==void 0)for(k of v)k.nodes?.a?.apply()})}function od(e,t,r,n,o,i,a,s){var c=(a&ru)!==0?(a&iu)===0?Cu(r,!1,!1):_r(r):null,u=(a&nu)!==0?_r(o):null;return{v:c,i:u,e:ot(()=>(i(t,c??r,u??o,s),()=>{e.delete(n)}))}}function Jr(e,t,r){if(e.nodes)for(var n=e.nodes.start,o=e.nodes.end,i=t&&(t.f&Bt)===0?t.nodes.start:r;n!==null;){var a=ln(n);if(i.before(n),n===o)return;n=a}}function Yt(e,t,r){t===null?e.effect.first=r:t.next=r,r===null?e.effect.last=t:r.prev=t}function id(e,t,r=!1,n=!1,o=!1){var i=e,a="";J(()=>{var s=ce;if(a!==(a=t()??"")&&(s.nodes!==null&&(Tl(s.nodes.start,s.nodes.end),s.nodes=null),a!=="")){var c=a+"";r?c=`<svg>${c}</svg>`:n&&(c=`<math>${c}</math>`);var u=Di(c);if((r||n)&&(u=Ut(u)),Ar(Ut(u),u.lastChild),r||n)for(;Ut(u);)i.before(Ut(u));else i.before(u)}})}function ye(e,t,...r){var n=new Gn(e);Ur(()=>{const o=t()??null;n.ensure(o,o&&(i=>o(i,...r)))},Vt)}function xi(e,t,r){var n=new Gn(e);Ur(()=>{var o=t()??null;n.ensure(o,o&&(i=>r(i,o)))},Vt)}function ad(e,t,r,n,o,i){var a=null,s=e,c=new Gn(s,!1);Ur(()=>{const u=t()||null;var f=hu;if(u===null){c.ensure(null,null);return}return c.ensure(u,v=>{if(u){if(a=document.createElementNS(f,u),Ar(a,a),n){var p=a.appendChild(Wt());n(a,p)}ce.nodes.end=a,v.before(a)}}),()=>{}},Vt),Wn(()=>{})}function sd(e,t){var r=void 0,n;Sl(()=>{r!==(r=t())&&(n&&(He(n),n=null),r&&(n=ot(()=>{Ui(()=>r(e))})))})}function Ml(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(r=Ml(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function ld(){for(var e,t,r=0,n="",o=arguments.length;r<o;r++)(e=arguments[r])&&(t=Ml(e))&&(n&&(n+=" "),n+=t);return n}function Zi(e){return typeof e=="object"?ld(e):e??""}const la=[...` 	
\r\fÂ \v\uFEFF`];function cd(e,t,r){var n=e==null?"":""+e;if(t&&(n=n?n+" "+t:t),r){for(var o in r)if(r[o])n=n?n+" "+o:o;else if(n.length)for(var i=o.length,a=0;(a=n.indexOf(o,a))>=0;){var s=a+i;(a===0||la.includes(n[a-1]))&&(s===n.length||la.includes(n[s]))?n=(a===0?"":n.substring(0,a))+n.substring(s+1):a=s}}return n===""?null:n}function ca(e,t=!1){var r=t?" !important;":";",n="";for(var o in e){var i=e[o];i!=null&&i!==""&&(n+=" "+o+": "+i+r)}return n}function so(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function ud(e,t){if(t){var r="",n,o;if(Array.isArray(t)?(n=t[0],o=t[1]):n=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,a=0,s=!1,c=[];n&&c.push(...Object.keys(n).map(so)),o&&c.push(...Object.keys(o).map(so));var u=0,f=-1;const I=e.length;for(var v=0;v<I;v++){var p=e[v];if(s?p==="/"&&e[v-1]==="*"&&(s=!1):i?i===p&&(i=!1):p==="/"&&e[v+1]==="*"?s=!0:p==='"'||p==="'"?i=p:p==="("?a++:p===")"&&a--,!s&&i===!1&&a===0){if(p===":"&&f===-1)f=v;else if(p===";"||v===I-1){if(f!==-1){var y=so(e.substring(u,f).trim());if(!c.includes(y)){p!==";"&&v++;var E=e.substring(u,v).trim();r+=" "+E+";"}}u=v+1,f=-1}}}}return n&&(r+=ca(n)),o&&(r+=ca(o,!0)),r=r.trim(),r===""?null:r}return e==null?null:String(e)}function ft(e,t,r,n,o,i){var a=e.__className;if(a!==r||a===void 0){var s=cd(r,n,i);s==null?e.removeAttribute("class"):t?e.className=s:e.setAttribute("class",s),e.__className=r}else if(i&&o!==i)for(var c in i){var u=!!i[c];(o==null||u!==!!o[c])&&e.classList.toggle(c,u)}return i}function lo(e,t={},r,n){for(var o in r){var i=r[o];t[o]!==i&&(r[o]==null?e.style.removeProperty(o):e.style.setProperty(o,i,n))}}function dd(e,t,r,n){var o=e.__style;if(o!==t){var i=ud(t,n);i==null?e.removeAttribute("style"):e.style.cssText=i,e.__style=t}else n&&(Array.isArray(n)?(lo(e,r?.[0],n[0]),lo(e,r?.[1],n[1],"important")):lo(e,r,n));return n}function Ln(e,t,r=!1){if(e.multiple){if(t==null)return;if(!Ri(t))return pu();for(var n of e.options)n.selected=t.includes(tn(n));return}for(n of e.options){var o=tn(n);if(Ou(o,t)){n.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function ql(e){var t=new MutationObserver(()=>{Ln(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Wn(()=>{t.disconnect()})}function fd(e,t,r=t){var n=new WeakSet,o=!0;wl(e,"change",i=>{var a=i?"[selected]":":checked",s;if(e.multiple)s=[].map.call(e.querySelectorAll(a),tn);else{var c=e.querySelector(a)??e.querySelector("option:not([disabled])");s=c&&tn(c)}r(s),le!==null&&n.add(le)}),Ui(()=>{var i=t();if(e===document.activeElement){var a=zn??le;if(n.has(a))return}if(Ln(e,i,o),o&&i===void 0){var s=e.querySelector(":checked");s!==null&&(i=tn(s),r(i))}e.__value=i,o=!1}),ql(e)}function tn(e){return"__value"in e?e.__value:e.value}const Vr=Symbol("class"),Gr=Symbol("style"),Bl=Symbol("is custom element"),Fl=Symbol("is html");function hd(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function fe(e,t,r,n){var o=Hl(e);o[t]!==(o[t]=r)&&(t==="loading"&&(e[Fc]=r),r==null?e.removeAttribute(t):typeof r!="string"&&Wl(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function vd(e,t,r,n,o=!1,i=!1){var a=Hl(e),s=a[Bl],c=!a[Fl],u=t||{},f=e.tagName==="OPTION";for(var v in t)v in r||(r[v]=null);r.class?r.class=Zi(r.class):r[Vr]&&(r.class=null),r[Gr]&&(r.style??=null);var p=Wl(e);for(const _ in r){let l=r[_];if(f&&_==="value"&&l==null){e.value=e.__value="",u[_]=l;continue}if(_==="class"){var y=e.namespaceURI==="http://www.w3.org/1999/xhtml";ft(e,y,l,n,t?.[Vr],r[Vr]),u[_]=l,u[Vr]=r[Vr];continue}if(_==="style"){dd(e,l,t?.[Gr],r[Gr]),u[_]=l,u[Gr]=r[Gr];continue}var E=u[_];if(!(l===E&&!(l===void 0&&e.hasAttribute(_)))){u[_]=l;var I=_[0]+_[1];if(I!=="$$")if(I==="on"){const m={},g="$$"+_;let h=_.slice(2);var k=Wu(h);if(Fu(h)&&(h=h.slice(0,-7),m.capture=!0),!k&&E){if(l!=null)continue;e.removeEventListener(h,u[g],m),u[g]=null}if(l!=null)if(k)e[`__${h}`]=l,dn([h]);else{let w=function(R){u[_].call(this,R)};var x=w;u[g]=jl(h,e,w,m)}else k&&(e[`__${h}`]=void 0)}else if(_==="style")fe(e,_,l);else if(_==="autofocus")Pu(e,!!l);else if(!s&&(_==="__value"||_==="value"&&l!=null))e.value=e.__value=l;else if(_==="selected"&&f)hd(e,l);else{var N=_;c||(N=Gu(N));var b=N==="defaultValue"||N==="defaultChecked";if(l==null&&!s&&!b)if(a[_]=null,N==="value"||N==="checked"){let m=e;const g=t===void 0;if(N==="value"){let h=m.defaultValue;m.removeAttribute(N),m.defaultValue=h,m.value=m.__value=g?h:null}else{let h=m.defaultChecked;m.removeAttribute(N),m.defaultChecked=h,m.checked=g?h:!1}}else e.removeAttribute(_);else b||p.includes(N)&&(s||typeof l!="string")?(e[N]=l,N in a&&(a[N]=Ze)):typeof l!="function"&&fe(e,N,l)}}}return u}function ua(e,t,r=[],n=[],o=[],i,a=!1,s=!1){dl(o,r,n,c=>{var u=void 0,f={},v=e.nodeName==="SELECT",p=!1;if(Sl(()=>{var E=t(...c.map(d)),I=vd(e,u,E,i,a,s);p&&v&&"value"in E&&Ln(e,E.value);for(let N of Object.getOwnPropertySymbols(f))E[N]||He(f[N]);for(let N of Object.getOwnPropertySymbols(E)){var k=E[N];N.description===vu&&(!u||k!==u[N])&&(f[N]&&He(f[N]),f[N]=ot(()=>sd(e,()=>k))),I[N]=k}u=I}),v){var y=e;Ui(()=>{Ln(y,u.value,!0),ql(y)})}p=!0})}function Hl(e){return e.__attributes??={[Bl]:e.nodeName.includes("-"),[Fl]:e.namespaceURI===fu}}var da=new Map;function Wl(e){var t=e.getAttribute("is")||e.nodeName,r=da.get(t);if(r)return r;da.set(t,r=[]);for(var n,o=e,i=Element.prototype;i!==o;){n=Zc(o);for(var a in n)n[a].set&&r.push(a);o=Vs(o)}return r}function Xn(e,t,r=t){var n=new WeakSet;wl(e,"input",async o=>{var i=o?e.defaultValue:e.value;if(i=co(e)?uo(i):i,r(i),le!==null&&n.add(le),await Bu(),i!==(i=t())){var a=e.selectionStart,s=e.selectionEnd,c=e.value.length;if(e.value=i??"",s!==null){var u=e.value.length;a===s&&s===c&&u>c?(e.selectionStart=u,e.selectionEnd=u):(e.selectionStart=a,e.selectionEnd=Math.min(s,u))}}}),Lr(t)==null&&e.value&&(r(co(e)?uo(e.value):e.value),le!==null&&n.add(le)),kl(()=>{var o=t();if(e===document.activeElement){var i=zn??le;if(n.has(i))return}co(e)&&o===uo(e.value)||e.type==="date"&&!o&&!e.value||o!==e.value&&(e.value=o??"")})}function co(e){var t=e.type;return t==="number"||t==="range"}function uo(e){return e===""?null:+e}function pd(e,t,r){if(e==null)return t(void 0),he;const n=Lr(()=>e.subscribe(t,r));return n.unsubscribe?()=>n.unsubscribe():n}const Ir=[];function Vl(e,t=he){let r=null;const n=new Set;function o(s){if(el(e,s)&&(e=s,r)){const c=!Ir.length;for(const u of n)u[1](),Ir.push(u,e);if(c){for(let u=0;u<Ir.length;u+=2)Ir[u][0](Ir[u+1]);Ir.length=0}}}function i(s){o(s(e))}function a(s,c=he){const u=[s,c];return n.add(u),n.size===1&&(r=t(o,i)||he),s(e),()=>{n.delete(u),n.size===0&&r&&(r(),r=null)}}return{set:o,update:i,subscribe:a}}function md(e){let t;return pd(e,r=>t=r)(),t}let yn=!1;function gd(e){var t=yn;try{return yn=!1,[e(),yn]}finally{yn=t}}const _d={get(e,t){if(!e.exclude.includes(t))return e.props[t]},set(e,t){return!1},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function we(e,t,r){return new Proxy({props:e,exclude:t},_d)}const bd={get(e,t){let r=e.props.length;for(;r--;){let n=e.props[r];if(Hr(n)&&(n=n()),typeof n=="object"&&n!==null&&t in n)return n[t]}},set(e,t,r){let n=e.props.length;for(;n--;){let o=e.props[n];Hr(o)&&(o=o());const i=Qt(o,t);if(i&&i.set)return i.set(r),!0}return!1},getOwnPropertyDescriptor(e,t){let r=e.props.length;for(;r--;){let n=e.props[r];if(Hr(n)&&(n=n()),typeof n=="object"&&n!==null&&t in n){const o=Qt(n,t);return o&&!o.configurable&&(o.configurable=!0),o}}},has(e,t){if(t===vr||t===Js)return!1;for(let r of e.props)if(Hr(r)&&(r=r()),r!=null&&t in r)return!0;return!1},ownKeys(e){const t=[];for(let r of e.props)if(Hr(r)&&(r=r()),!!r){for(const n in r)t.includes(n)||t.push(n);for(const n of Object.getOwnPropertySymbols(r))t.includes(n)||t.push(n)}return t}};function Ee(...e){return new Proxy({props:e},bd)}function zt(e,t,r,n){var o=(r&lu)!==0,i=(r&cu)!==0,a=n,s=!0,c=()=>(s&&(s=!1,a=i?Lr(n):n),a),u;if(o){var f=vr in e||Js in e;u=Qt(e,t)?.set??(f&&t in e?b=>e[t]=b:void 0)}var v,p=!1;o?[v,p]=gd(()=>e[t]):v=e[t],v===void 0&&n!==void 0&&(v=c(),u&&(Jc(),u(v)));var y;if(y=()=>{var b=e[t];return b===void 0?c():(s=!0,b)},(r&su)===0)return y;if(u){var E=e.$$legacy;return(function(b,x){return arguments.length>0?((!x||E||p)&&u(x?y():b),b):y()})}var I=!1,k=((r&au)!==0?Fn:fl)(()=>(I=!1,y()));o&&d(k);var N=ce;return(function(b,x){if(arguments.length>0){const _=x?d(k):o?Rt(b):b;return M(k,_),I=!0,a!==void 0&&(a=_),b}return nr&&I||(N.f&Ft)!==0?k.v:d(k)})}function Kn(e){vt===null&&Hc(),cn(()=>{const t=Lr(e);if(typeof t=="function")return t})}const yd="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(yd);const wd=typeof window<"u"?new URL(window.location.href):new URL("http://localhost/"),Gl=Vl(wd);function xd(e){const t=Number.parseInt(e,10);return!Number.isFinite(t)||t<1?1:t}function kd(e){if(e==="/")return{name:"home",params:{}};if(e==="/search")return{name:"search",params:{}};if(e==="/explore")return{name:"explore",params:{}};if(e==="/categories")return{name:"categories",params:{}};const t=e.match(/^\/book\/([^/]+)$/);if(t)return{name:"book",params:{identifier:decodeURIComponent(t[1])}};if(e==="/sitemap")return{name:"sitemap",params:{view:"authors",letter:"A",page:1}};const r=e.match(/^\/sitemap\/(authors|books)\/([^/]+)\/(\d+)$/);return r?{name:"sitemap",params:{view:r[1]==="books"?"books":"authors",letter:decodeURIComponent(r[2]),page:xd(r[3])}}:e==="/404"?{name:"notFound",params:{}}:{name:"notFound",params:{}}}function Sd(e){if(e.target&&e.target!=="_self"||e.hasAttribute("download")||e.dataset.noSpa==="true")return!1;const t=new URL(e.href,window.location.origin);if(t.origin!==window.location.origin)return!1;const r=["/api","/admin","/actuator","/ws","/topic","/sitemap.xml","/sitemap-xml","/r"];for(const n of r)if(t.pathname===n||t.pathname.startsWith(`${n}/`))return!1;return!0}function Xl(){Gl.set(new URL(window.location.href))}function Dr(e,t=!1){const r=new URL(e,window.location.origin);t?window.history.replaceState(null,"",`${r.pathname}${r.search}${r.hash}`):window.history.pushState(null,"",`${r.pathname}${r.search}${r.hash}`),Xl()}function Ed(){const e=()=>{Xl()},t=r=>{if(r.defaultPrevented||r.button!==0||r.metaKey||r.ctrlKey||r.shiftKey||r.altKey)return;const n=r.target;if(!(n instanceof Element))return;const o=n.closest("a[href]");if(!(o instanceof HTMLAnchorElement)||!Sd(o))return;const i=new URL(o.href,window.location.origin);r.preventDefault(),Dr(`${i.pathname}${i.search}${i.hash}`)};return window.addEventListener("popstate",e),document.addEventListener("click",t),()=>{window.removeEventListener("popstate",e),document.removeEventListener("click",t)}}function C(e,t,r){function n(s,c){var u;Object.defineProperty(s,"_zod",{value:s._zod??{},enumerable:!1}),(u=s._zod).traits??(u.traits=new Set),s._zod.traits.add(e),t(s,c);for(const f in a.prototype)f in s||Object.defineProperty(s,f,{value:a.prototype[f].bind(s)});s._zod.constr=a,s._zod.def=c}const o=r?.Parent??Object;class i extends o{}Object.defineProperty(i,"name",{value:e});function a(s){var c;const u=r?.Parent?new i:this;n(u,s),(c=u._zod).deferred??(c.deferred=[]);for(const f of u._zod.deferred)f();return u}return Object.defineProperty(a,"init",{value:n}),Object.defineProperty(a,Symbol.hasInstance,{value:s=>r?.Parent&&s instanceof r.Parent?!0:s?._zod?.traits?.has(e)}),Object.defineProperty(a,"name",{value:e}),a}class on extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const Kl={};function or(e){return Kl}function Id(e){const t=Object.values(e).filter(n=>typeof n=="number");return Object.entries(e).filter(([n,o])=>t.indexOf(+n)===-1).map(([n,o])=>o)}function Td(e,t){return typeof t=="bigint"?t.toString():t}function Jl(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function ji(e){return e==null}function Mi(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function Rd(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,o=r>n?r:n,i=Number.parseInt(e.toFixed(o).replace(".","")),a=Number.parseInt(t.toFixed(o).replace(".",""));return i%a/10**o}function _e(e,t,r){Object.defineProperty(e,t,{get(){{const n=r();return e[t]=n,n}},set(n){Object.defineProperty(e,t,{value:n})},configurable:!0})}function qi(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function Xr(e){return JSON.stringify(e)}const Yl=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function ki(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const Cd=Jl(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function Dn(e){if(ki(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(ki(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}const Nd=new Set(["string","number","symbol"]);function Jn(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function yr(e,t,r){const n=new e._zod.constr(t??e._zod.def);return(!t||r?.parent)&&(n._zod.parent=e),n}function W(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function Od(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const $d={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function Ad(e,t){const r={},n=e._zod.def;for(const o in t){if(!(o in n.shape))throw new Error(`Unrecognized key: "${o}"`);t[o]&&(r[o]=n.shape[o])}return yr(e,{...e._zod.def,shape:r,checks:[]})}function Pd(e,t){const r={...e._zod.def.shape},n=e._zod.def;for(const o in t){if(!(o in n.shape))throw new Error(`Unrecognized key: "${o}"`);t[o]&&delete r[o]}return yr(e,{...e._zod.def,shape:r,checks:[]})}function zd(e,t){if(!Dn(t))throw new Error("Invalid input to extend: expected a plain object");const r={...e._zod.def,get shape(){const n={...e._zod.def.shape,...t};return qi(this,"shape",n),n},checks:[]};return yr(e,r)}function Ud(e,t){return yr(e,{...e._zod.def,get shape(){const r={...e._zod.def.shape,...t._zod.def.shape};return qi(this,"shape",r),r},catchall:t._zod.def.catchall,checks:[]})}function Ld(e,t,r){const n=t._zod.def.shape,o={...n};if(r)for(const i in r){if(!(i in n))throw new Error(`Unrecognized key: "${i}"`);r[i]&&(o[i]=e?new e({type:"optional",innerType:n[i]}):n[i])}else for(const i in n)o[i]=e?new e({type:"optional",innerType:n[i]}):n[i];return yr(t,{...t._zod.def,shape:o,checks:[]})}function Dd(e,t,r){const n=t._zod.def.shape,o={...n};if(r)for(const i in r){if(!(i in o))throw new Error(`Unrecognized key: "${i}"`);r[i]&&(o[i]=new e({type:"nonoptional",innerType:n[i]}))}else for(const i in n)o[i]=new e({type:"nonoptional",innerType:n[i]});return yr(t,{...t._zod.def,shape:o,checks:[]})}function rn(e,t=0){for(let r=t;r<e.issues.length;r++)if(e.issues[r]?.continue!==!0)return!0;return!1}function hr(e,t){return t.map(r=>{var n;return(n=r).path??(n.path=[]),r.path.unshift(e),r})}function wn(e){return typeof e=="string"?e:e?.message}function ir(e,t,r){const n={...e,path:e.path??[]};if(!e.message){const o=wn(e.inst?._zod.def?.error?.(e))??wn(t?.error?.(e))??wn(r.customError?.(e))??wn(r.localeError?.(e))??"Invalid input";n.message=o}return delete n.inst,delete n.continue,t?.reportInput||delete n.input,n}function Bi(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function an(...e){const[t,r,n]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:n}:{...t}}const Ql=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get(){return JSON.stringify(t,Td,2)},enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},ec=C("$ZodError",Ql),tc=C("$ZodError",Ql,{Parent:Error});function Zd(e,t=r=>r.message){const r={},n=[];for(const o of e.issues)o.path.length>0?(r[o.path[0]]=r[o.path[0]]||[],r[o.path[0]].push(t(o))):n.push(t(o));return{formErrors:n,fieldErrors:r}}function jd(e,t){const r=t||function(i){return i.message},n={_errors:[]},o=i=>{for(const a of i.issues)if(a.code==="invalid_union"&&a.errors.length)a.errors.map(s=>o({issues:s}));else if(a.code==="invalid_key")o({issues:a.issues});else if(a.code==="invalid_element")o({issues:a.issues});else if(a.path.length===0)n._errors.push(r(a));else{let s=n,c=0;for(;c<a.path.length;){const u=a.path[c];c===a.path.length-1?(s[u]=s[u]||{_errors:[]},s[u]._errors.push(r(a))):s[u]=s[u]||{_errors:[]},s=s[u],c++}}};return o(e),n}const Md=e=>(t,r,n,o)=>{const i=n?Object.assign(n,{async:!1}):{async:!1},a=t._zod.run({value:r,issues:[]},i);if(a instanceof Promise)throw new on;if(a.issues.length){const s=new(o?.Err??e)(a.issues.map(c=>ir(c,i,or())));throw Yl(s,o?.callee),s}return a.value},qd=e=>async(t,r,n,o)=>{const i=n?Object.assign(n,{async:!0}):{async:!0};let a=t._zod.run({value:r,issues:[]},i);if(a instanceof Promise&&(a=await a),a.issues.length){const s=new(o?.Err??e)(a.issues.map(c=>ir(c,i,or())));throw Yl(s,o?.callee),s}return a.value},rc=e=>(t,r,n)=>{const o=n?{...n,async:!1}:{async:!1},i=t._zod.run({value:r,issues:[]},o);if(i instanceof Promise)throw new on;return i.issues.length?{success:!1,error:new(e??ec)(i.issues.map(a=>ir(a,o,or())))}:{success:!0,data:i.value}},Bd=rc(tc),nc=e=>async(t,r,n)=>{const o=n?Object.assign(n,{async:!0}):{async:!0};let i=t._zod.run({value:r,issues:[]},o);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(a=>ir(a,o,or())))}:{success:!0,data:i.value}},Fd=nc(tc),Hd=/^[cC][^\s-]{8,}$/,Wd=/^[0-9a-z]+$/,Vd=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Gd=/^[0-9a-vA-V]{20}$/,Xd=/^[A-Za-z0-9]{27}$/,Kd=/^[a-zA-Z0-9_-]{21}$/,Jd=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Yd=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,fa=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,Qd=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,ef="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function tf(){return new RegExp(ef,"u")}const rf=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,nf=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,of=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,af=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,sf=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,oc=/^[A-Za-z0-9_-]*$/,lf=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,cf=/^\+(?:[0-9]){6,14}[0-9]$/,ic="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",uf=new RegExp(`^${ic}$`);function ac(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function df(e){return new RegExp(`^${ac(e)}$`)}function ff(e){const t=ac({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-]\\d{2}:\\d{2})");const n=`${t}(?:${r.join("|")})`;return new RegExp(`^${ic}T(?:${n})$`)}const hf=e=>{const t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},vf=/^\d+$/,pf=/^-?\d+(?:\.\d+)?/i,mf=/true|false/i,gf=/null/i,_f=/^[^A-Z]*$/,bf=/^[^a-z]*$/,it=C("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),sc={number:"number",bigint:"bigint",object:"date"},lc=C("$ZodCheckLessThan",(e,t)=>{it.init(e,t);const r=sc[typeof t.value];e._zod.onattach.push(n=>{const o=n._zod.bag,i=(t.inclusive?o.maximum:o.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<i&&(t.inclusive?o.maximum=t.value:o.exclusiveMaximum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value<=t.value:n.value<t.value)||n.issues.push({origin:r,code:"too_big",maximum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),cc=C("$ZodCheckGreaterThan",(e,t)=>{it.init(e,t);const r=sc[typeof t.value];e._zod.onattach.push(n=>{const o=n._zod.bag,i=(t.inclusive?o.minimum:o.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>i&&(t.inclusive?o.minimum=t.value:o.exclusiveMinimum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value>=t.value:n.value>t.value)||n.issues.push({origin:r,code:"too_small",minimum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),yf=C("$ZodCheckMultipleOf",(e,t)=>{it.init(e,t),e._zod.onattach.push(r=>{var n;(n=r._zod.bag).multipleOf??(n.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%t.value===BigInt(0):Rd(r.value,t.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),wf=C("$ZodCheckNumberFormat",(e,t)=>{it.init(e,t),t.format=t.format||"float64";const r=t.format?.includes("int"),n=r?"int":"number",[o,i]=$d[t.format];e._zod.onattach.push(a=>{const s=a._zod.bag;s.format=t.format,s.minimum=o,s.maximum=i,r&&(s.pattern=vf)}),e._zod.check=a=>{const s=a.value;if(r){if(!Number.isInteger(s)){a.issues.push({expected:n,format:t.format,code:"invalid_type",input:s,inst:e});return}if(!Number.isSafeInteger(s)){s>0?a.issues.push({input:s,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort}):a.issues.push({input:s,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort});return}}s<o&&a.issues.push({origin:"number",input:s,code:"too_small",minimum:o,inclusive:!0,inst:e,continue:!t.abort}),s>i&&a.issues.push({origin:"number",input:s,code:"too_big",maximum:i,inst:e})}}),xf=C("$ZodCheckMaxLength",(e,t)=>{var r;it.init(e,t),(r=e._zod.def).when??(r.when=n=>{const o=n.value;return!ji(o)&&o.length!==void 0}),e._zod.onattach.push(n=>{const o=n._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<o&&(n._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{const o=n.value;if(o.length<=t.maximum)return;const a=Bi(o);n.issues.push({origin:a,code:"too_big",maximum:t.maximum,inclusive:!0,input:o,inst:e,continue:!t.abort})}}),kf=C("$ZodCheckMinLength",(e,t)=>{var r;it.init(e,t),(r=e._zod.def).when??(r.when=n=>{const o=n.value;return!ji(o)&&o.length!==void 0}),e._zod.onattach.push(n=>{const o=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>o&&(n._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{const o=n.value;if(o.length>=t.minimum)return;const a=Bi(o);n.issues.push({origin:a,code:"too_small",minimum:t.minimum,inclusive:!0,input:o,inst:e,continue:!t.abort})}}),Sf=C("$ZodCheckLengthEquals",(e,t)=>{var r;it.init(e,t),(r=e._zod.def).when??(r.when=n=>{const o=n.value;return!ji(o)&&o.length!==void 0}),e._zod.onattach.push(n=>{const o=n._zod.bag;o.minimum=t.length,o.maximum=t.length,o.length=t.length}),e._zod.check=n=>{const o=n.value,i=o.length;if(i===t.length)return;const a=Bi(o),s=i>t.length;n.issues.push({origin:a,...s?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),Yn=C("$ZodCheckStringFormat",(e,t)=>{var r,n;it.init(e,t),e._zod.onattach.push(o=>{const i=o._zod.bag;i.format=t.format,t.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=o=>{t.pattern.lastIndex=0,!t.pattern.test(o.value)&&o.issues.push({origin:"string",code:"invalid_format",format:t.format,input:o.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(n=e._zod).check??(n.check=()=>{})}),Ef=C("$ZodCheckRegex",(e,t)=>{Yn.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),If=C("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=_f),Yn.init(e,t)}),Tf=C("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=bf),Yn.init(e,t)}),Rf=C("$ZodCheckIncludes",(e,t)=>{it.init(e,t);const r=Jn(t.includes),n=new RegExp(typeof t.position=="number"?`^.{${t.position}}${r}`:r);t.pattern=n,e._zod.onattach.push(o=>{const i=o._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),e._zod.check=o=>{o.value.includes(t.includes,t.position)||o.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:o.value,inst:e,continue:!t.abort})}}),Cf=C("$ZodCheckStartsWith",(e,t)=>{it.init(e,t);const r=new RegExp(`^${Jn(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const o=n._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(r)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),Nf=C("$ZodCheckEndsWith",(e,t)=>{it.init(e,t);const r=new RegExp(`.*${Jn(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const o=n._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(r)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}}),Of=C("$ZodCheckOverwrite",(e,t)=>{it.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}});class $f{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const n=t.split(`
`).filter(a=>a),o=Math.min(...n.map(a=>a.length-a.trimStart().length)),i=n.map(a=>a.slice(o)).map(a=>" ".repeat(this.indent*2)+a);for(const a of i)this.content.push(a)}compile(){const t=Function,r=this?.args,o=[...(this?.content??[""]).map(i=>`  ${i}`)];return new t(...r,o.join(`
`))}}const Af={major:4,minor:0,patch:0},be=C("$ZodType",(e,t)=>{var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=Af;const n=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&n.unshift(e);for(const o of n)for(const i of o._zod.onattach)i(e);if(n.length===0)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const o=(i,a,s)=>{let c=rn(i),u;for(const f of a){if(f._zod.def.when){if(!f._zod.def.when(i))continue}else if(c)continue;const v=i.issues.length,p=f._zod.check(i);if(p instanceof Promise&&s?.async===!1)throw new on;if(u||p instanceof Promise)u=(u??Promise.resolve()).then(async()=>{await p,i.issues.length!==v&&(c||(c=rn(i,v)))});else{if(i.issues.length===v)continue;c||(c=rn(i,v))}}return u?u.then(()=>i):i};e._zod.run=(i,a)=>{const s=e._zod.parse(i,a);if(s instanceof Promise){if(a.async===!1)throw new on;return s.then(c=>o(c,n,a))}return o(s,n,a)}}e["~standard"]={validate:o=>{try{const i=Bd(e,o);return i.success?{value:i.data}:{issues:i.error?.issues}}catch{return Fd(e,o).then(a=>a.success?{value:a.data}:{issues:a.error?.issues})}},vendor:"zod",version:1}}),Fi=C("$ZodString",(e,t)=>{be.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??hf(e._zod.bag),e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),xe=C("$ZodStringFormat",(e,t)=>{Yn.init(e,t),Fi.init(e,t)}),Pf=C("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=Yd),xe.init(e,t)}),zf=C("$ZodUUID",(e,t)=>{if(t.version){const n={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(n===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=fa(n))}else t.pattern??(t.pattern=fa());xe.init(e,t)}),Uf=C("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=Qd),xe.init(e,t)}),Lf=C("$ZodURL",(e,t)=>{xe.init(e,t),e._zod.check=r=>{try{const n=r.value,o=new URL(n),i=o.href;t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(o.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:lf.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(o.protocol.endsWith(":")?o.protocol.slice(0,-1):o.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),!n.endsWith("/")&&i.endsWith("/")?r.value=i.slice(0,-1):r.value=i;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),Df=C("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=tf()),xe.init(e,t)}),Zf=C("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=Kd),xe.init(e,t)}),jf=C("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=Hd),xe.init(e,t)}),Mf=C("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=Wd),xe.init(e,t)}),qf=C("$ZodULID",(e,t)=>{t.pattern??(t.pattern=Vd),xe.init(e,t)}),Bf=C("$ZodXID",(e,t)=>{t.pattern??(t.pattern=Gd),xe.init(e,t)}),Ff=C("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=Xd),xe.init(e,t)}),Hf=C("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=ff(t)),xe.init(e,t)}),Wf=C("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=uf),xe.init(e,t)}),Vf=C("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=df(t)),xe.init(e,t)}),Gf=C("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=Jd),xe.init(e,t)}),Xf=C("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=rf),xe.init(e,t),e._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv4"})}),Kf=C("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=nf),xe.init(e,t),e._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),Jf=C("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=of),xe.init(e,t)}),Yf=C("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=af),xe.init(e,t),e._zod.check=r=>{const[n,o]=r.value.split("/");try{if(!o)throw new Error;const i=Number(o);if(`${i}`!==o)throw new Error;if(i<0||i>128)throw new Error;new URL(`http://[${n}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function uc(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const Qf=C("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=sf),xe.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{uc(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function eh(e){if(!oc.test(e))return!1;const t=e.replace(/[-_]/g,n=>n==="-"?"+":"/"),r=t.padEnd(Math.ceil(t.length/4)*4,"=");return uc(r)}const th=C("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=oc),xe.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{eh(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),rh=C("$ZodE164",(e,t)=>{t.pattern??(t.pattern=cf),xe.init(e,t)});function nh(e,t=null){try{const r=e.split(".");if(r.length!==3)return!1;const[n]=r;if(!n)return!1;const o=JSON.parse(atob(n));return!("typ"in o&&o?.typ!=="JWT"||!o.alg||t&&(!("alg"in o)||o.alg!==t))}catch{return!1}}const oh=C("$ZodJWT",(e,t)=>{xe.init(e,t),e._zod.check=r=>{nh(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),dc=C("$ZodNumber",(e,t)=>{be.init(e,t),e._zod.pattern=e._zod.bag.pattern??pf,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=Number(r.value)}catch{}const o=r.value;if(typeof o=="number"&&!Number.isNaN(o)&&Number.isFinite(o))return r;const i=typeof o=="number"?Number.isNaN(o)?"NaN":Number.isFinite(o)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:o,inst:e,...i?{received:i}:{}}),r}}),ih=C("$ZodNumber",(e,t)=>{wf.init(e,t),dc.init(e,t)}),ah=C("$ZodBoolean",(e,t)=>{be.init(e,t),e._zod.pattern=mf,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=!!r.value}catch{}const o=r.value;return typeof o=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:o,inst:e}),r}}),sh=C("$ZodNull",(e,t)=>{be.init(e,t),e._zod.pattern=gf,e._zod.values=new Set([null]),e._zod.parse=(r,n)=>{const o=r.value;return o===null||r.issues.push({expected:"null",code:"invalid_type",input:o,inst:e}),r}}),lh=C("$ZodUnknown",(e,t)=>{be.init(e,t),e._zod.parse=r=>r}),ch=C("$ZodNever",(e,t)=>{be.init(e,t),e._zod.parse=(r,n)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)});function ha(e,t,r){e.issues.length&&t.issues.push(...hr(r,e.issues)),t.value[r]=e.value}const uh=C("$ZodArray",(e,t)=>{be.init(e,t),e._zod.parse=(r,n)=>{const o=r.value;if(!Array.isArray(o))return r.issues.push({expected:"array",code:"invalid_type",input:o,inst:e}),r;r.value=Array(o.length);const i=[];for(let a=0;a<o.length;a++){const s=o[a],c=t.element._zod.run({value:s,issues:[]},n);c instanceof Promise?i.push(c.then(u=>ha(u,r,a))):ha(c,r,a)}return i.length?Promise.all(i).then(()=>r):r}});function xn(e,t,r){e.issues.length&&t.issues.push(...hr(r,e.issues)),t.value[r]=e.value}function va(e,t,r,n){e.issues.length?n[r]===void 0?r in n?t.value[r]=void 0:t.value[r]=e.value:t.issues.push(...hr(r,e.issues)):e.value===void 0?r in n&&(t.value[r]=void 0):t.value[r]=e.value}const dh=C("$ZodObject",(e,t)=>{be.init(e,t);const r=Jl(()=>{const v=Object.keys(t.shape);for(const y of v)if(!(t.shape[y]instanceof be))throw new Error(`Invalid element at key "${y}": expected a Zod schema`);const p=Od(t.shape);return{shape:t.shape,keys:v,keySet:new Set(v),numKeys:v.length,optionalKeys:new Set(p)}});_e(e._zod,"propValues",()=>{const v=t.shape,p={};for(const y in v){const E=v[y]._zod;if(E.values){p[y]??(p[y]=new Set);for(const I of E.values)p[y].add(I)}}return p});const n=v=>{const p=new $f(["shape","payload","ctx"]),y=r.value,E=b=>{const x=Xr(b);return`shape[${x}]._zod.run({ value: input[${x}], issues: [] }, ctx)`};p.write("const input = payload.value;");const I=Object.create(null);let k=0;for(const b of y.keys)I[b]=`key_${k++}`;p.write("const newResult = {}");for(const b of y.keys)if(y.optionalKeys.has(b)){const x=I[b];p.write(`const ${x} = ${E(b)};`);const _=Xr(b);p.write(`
        if (${x}.issues.length) {
          if (input[${_}] === undefined) {
            if (${_} in input) {
              newResult[${_}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${x}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${_}, ...iss.path] : [${_}],
              }))
            );
          }
        } else if (${x}.value === undefined) {
          if (${_} in input) newResult[${_}] = undefined;
        } else {
          newResult[${_}] = ${x}.value;
        }
        `)}else{const x=I[b];p.write(`const ${x} = ${E(b)};`),p.write(`
          if (${x}.issues.length) payload.issues = payload.issues.concat(${x}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${Xr(b)}, ...iss.path] : [${Xr(b)}]
          })));`),p.write(`newResult[${Xr(b)}] = ${x}.value`)}p.write("payload.value = newResult;"),p.write("return payload;");const N=p.compile();return(b,x)=>N(v,b,x)};let o;const i=ki,a=!Kl.jitless,c=a&&Cd.value,u=t.catchall;let f;e._zod.parse=(v,p)=>{f??(f=r.value);const y=v.value;if(!i(y))return v.issues.push({expected:"object",code:"invalid_type",input:y,inst:e}),v;const E=[];if(a&&c&&p?.async===!1&&p.jitless!==!0)o||(o=n(t.shape)),v=o(v,p);else{v.value={};const x=f.shape;for(const _ of f.keys){const l=x[_],m=l._zod.run({value:y[_],issues:[]},p),g=l._zod.optin==="optional"&&l._zod.optout==="optional";m instanceof Promise?E.push(m.then(h=>g?va(h,v,_,y):xn(h,v,_))):g?va(m,v,_,y):xn(m,v,_)}}if(!u)return E.length?Promise.all(E).then(()=>v):v;const I=[],k=f.keySet,N=u._zod,b=N.def.type;for(const x of Object.keys(y)){if(k.has(x))continue;if(b==="never"){I.push(x);continue}const _=N.run({value:y[x],issues:[]},p);_ instanceof Promise?E.push(_.then(l=>xn(l,v,x))):xn(_,v,x)}return I.length&&v.issues.push({code:"unrecognized_keys",keys:I,input:y,inst:e}),E.length?Promise.all(E).then(()=>v):v}});function pa(e,t,r,n){for(const o of e)if(o.issues.length===0)return t.value=o.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(o=>o.issues.map(i=>ir(i,n,or())))}),t}const fh=C("$ZodUnion",(e,t)=>{be.init(e,t),_e(e._zod,"optin",()=>t.options.some(r=>r._zod.optin==="optional")?"optional":void 0),_e(e._zod,"optout",()=>t.options.some(r=>r._zod.optout==="optional")?"optional":void 0),_e(e._zod,"values",()=>{if(t.options.every(r=>r._zod.values))return new Set(t.options.flatMap(r=>Array.from(r._zod.values)))}),_e(e._zod,"pattern",()=>{if(t.options.every(r=>r._zod.pattern)){const r=t.options.map(n=>n._zod.pattern);return new RegExp(`^(${r.map(n=>Mi(n.source)).join("|")})$`)}}),e._zod.parse=(r,n)=>{let o=!1;const i=[];for(const a of t.options){const s=a._zod.run({value:r.value,issues:[]},n);if(s instanceof Promise)i.push(s),o=!0;else{if(s.issues.length===0)return s;i.push(s)}}return o?Promise.all(i).then(a=>pa(a,r,e,n)):pa(i,r,e,n)}}),hh=C("$ZodIntersection",(e,t)=>{be.init(e,t),e._zod.parse=(r,n)=>{const o=r.value,i=t.left._zod.run({value:o,issues:[]},n),a=t.right._zod.run({value:o,issues:[]},n);return i instanceof Promise||a instanceof Promise?Promise.all([i,a]).then(([c,u])=>ma(r,c,u)):ma(r,i,a)}});function Si(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Dn(e)&&Dn(t)){const r=Object.keys(t),n=Object.keys(e).filter(i=>r.indexOf(i)!==-1),o={...e,...t};for(const i of n){const a=Si(e[i],t[i]);if(!a.valid)return{valid:!1,mergeErrorPath:[i,...a.mergeErrorPath]};o[i]=a.data}return{valid:!0,data:o}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let n=0;n<e.length;n++){const o=e[n],i=t[n],a=Si(o,i);if(!a.valid)return{valid:!1,mergeErrorPath:[n,...a.mergeErrorPath]};r.push(a.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function ma(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),rn(e))return e;const n=Si(t.value,r.value);if(!n.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return e.value=n.data,e}const vh=C("$ZodRecord",(e,t)=>{be.init(e,t),e._zod.parse=(r,n)=>{const o=r.value;if(!Dn(o))return r.issues.push({expected:"record",code:"invalid_type",input:o,inst:e}),r;const i=[];if(t.keyType._zod.values){const a=t.keyType._zod.values;r.value={};for(const c of a)if(typeof c=="string"||typeof c=="number"||typeof c=="symbol"){const u=t.valueType._zod.run({value:o[c],issues:[]},n);u instanceof Promise?i.push(u.then(f=>{f.issues.length&&r.issues.push(...hr(c,f.issues)),r.value[c]=f.value})):(u.issues.length&&r.issues.push(...hr(c,u.issues)),r.value[c]=u.value)}let s;for(const c in o)a.has(c)||(s=s??[],s.push(c));s&&s.length>0&&r.issues.push({code:"unrecognized_keys",input:o,inst:e,keys:s})}else{r.value={};for(const a of Reflect.ownKeys(o)){if(a==="__proto__")continue;const s=t.keyType._zod.run({value:a,issues:[]},n);if(s instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(s.issues.length){r.issues.push({origin:"record",code:"invalid_key",issues:s.issues.map(u=>ir(u,n,or())),input:a,path:[a],inst:e}),r.value[s.value]=s.value;continue}const c=t.valueType._zod.run({value:o[a],issues:[]},n);c instanceof Promise?i.push(c.then(u=>{u.issues.length&&r.issues.push(...hr(a,u.issues)),r.value[s.value]=u.value})):(c.issues.length&&r.issues.push(...hr(a,c.issues)),r.value[s.value]=c.value)}}return i.length?Promise.all(i).then(()=>r):r}}),ph=C("$ZodEnum",(e,t)=>{be.init(e,t);const r=Id(t.entries);e._zod.values=new Set(r),e._zod.pattern=new RegExp(`^(${r.filter(n=>Nd.has(typeof n)).map(n=>typeof n=="string"?Jn(n):n.toString()).join("|")})$`),e._zod.parse=(n,o)=>{const i=n.value;return e._zod.values.has(i)||n.issues.push({code:"invalid_value",values:r,input:i,inst:e}),n}}),mh=C("$ZodTransform",(e,t)=>{be.init(e,t),e._zod.parse=(r,n)=>{const o=t.transform(r.value,r);if(n.async)return(o instanceof Promise?o:Promise.resolve(o)).then(a=>(r.value=a,r));if(o instanceof Promise)throw new on;return r.value=o,r}}),gh=C("$ZodOptional",(e,t)=>{be.init(e,t),e._zod.optin="optional",e._zod.optout="optional",_e(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),_e(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${Mi(r.source)})?$`):void 0}),e._zod.parse=(r,n)=>t.innerType._zod.optin==="optional"?t.innerType._zod.run(r,n):r.value===void 0?r:t.innerType._zod.run(r,n)}),_h=C("$ZodNullable",(e,t)=>{be.init(e,t),_e(e._zod,"optin",()=>t.innerType._zod.optin),_e(e._zod,"optout",()=>t.innerType._zod.optout),_e(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${Mi(r.source)}|null)$`):void 0}),_e(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,n)=>r.value===null?r:t.innerType._zod.run(r,n)}),bh=C("$ZodDefault",(e,t)=>{be.init(e,t),e._zod.optin="optional",_e(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(r.value===void 0)return r.value=t.defaultValue,r;const o=t.innerType._zod.run(r,n);return o instanceof Promise?o.then(i=>ga(i,t)):ga(o,t)}});function ga(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const yh=C("$ZodPrefault",(e,t)=>{be.init(e,t),e._zod.optin="optional",_e(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>(r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,n))}),wh=C("$ZodNonOptional",(e,t)=>{be.init(e,t),_e(e._zod,"values",()=>{const r=t.innerType._zod.values;return r?new Set([...r].filter(n=>n!==void 0)):void 0}),e._zod.parse=(r,n)=>{const o=t.innerType._zod.run(r,n);return o instanceof Promise?o.then(i=>_a(i,e)):_a(o,e)}});function _a(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const xh=C("$ZodCatch",(e,t)=>{be.init(e,t),e._zod.optin="optional",_e(e._zod,"optout",()=>t.innerType._zod.optout),_e(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{const o=t.innerType._zod.run(r,n);return o instanceof Promise?o.then(i=>(r.value=i.value,i.issues.length&&(r.value=t.catchValue({...r,error:{issues:i.issues.map(a=>ir(a,n,or()))},input:r.value}),r.issues=[]),r)):(r.value=o.value,o.issues.length&&(r.value=t.catchValue({...r,error:{issues:o.issues.map(i=>ir(i,n,or()))},input:r.value}),r.issues=[]),r)}}),kh=C("$ZodPipe",(e,t)=>{be.init(e,t),_e(e._zod,"values",()=>t.in._zod.values),_e(e._zod,"optin",()=>t.in._zod.optin),_e(e._zod,"optout",()=>t.out._zod.optout),e._zod.parse=(r,n)=>{const o=t.in._zod.run(r,n);return o instanceof Promise?o.then(i=>ba(i,t,n)):ba(o,t,n)}});function ba(e,t,r){return rn(e)?e:t.out._zod.run({value:e.value,issues:e.issues},r)}const Sh=C("$ZodReadonly",(e,t)=>{be.init(e,t),_e(e._zod,"propValues",()=>t.innerType._zod.propValues),_e(e._zod,"values",()=>t.innerType._zod.values),_e(e._zod,"optin",()=>t.innerType._zod.optin),_e(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(r,n)=>{const o=t.innerType._zod.run(r,n);return o instanceof Promise?o.then(ya):ya(o)}});function ya(e){return e.value=Object.freeze(e.value),e}const Eh=C("$ZodCustom",(e,t)=>{it.init(e,t),be.init(e,t),e._zod.parse=(r,n)=>r,e._zod.check=r=>{const n=r.value,o=t.fn(n);if(o instanceof Promise)return o.then(i=>wa(i,r,n,e));wa(o,r,n,e)}});function wa(e,t,r,n){if(!e){const o={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(o.params=n._zod.def.params),t.issues.push(an(o))}}class Ih{constructor(){this._map=new Map,this._idmap=new Map}add(t,...r){const n=r[0];if(this._map.set(t,n),n&&typeof n=="object"&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){const r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){const r=t._zod.parent;if(r){const n={...this.get(r)??{}};return delete n.id,{...n,...this._map.get(t)}}return this._map.get(t)}has(t){return this._map.has(t)}}function Th(){return new Ih}const kn=Th();function Rh(e,t){return new e({type:"string",...W(t)})}function Ch(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...W(t)})}function xa(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...W(t)})}function Nh(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...W(t)})}function Oh(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...W(t)})}function $h(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...W(t)})}function Ah(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...W(t)})}function Ph(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...W(t)})}function zh(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...W(t)})}function Uh(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...W(t)})}function Lh(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...W(t)})}function Dh(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...W(t)})}function Zh(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...W(t)})}function jh(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...W(t)})}function Mh(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...W(t)})}function qh(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...W(t)})}function Bh(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...W(t)})}function Fh(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...W(t)})}function Hh(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...W(t)})}function Wh(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...W(t)})}function Vh(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...W(t)})}function Gh(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...W(t)})}function Xh(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...W(t)})}function Kh(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...W(t)})}function Jh(e,t){return new e({type:"string",format:"date",check:"string_format",...W(t)})}function Yh(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...W(t)})}function Qh(e,t){return new e({type:"string",format:"duration",check:"string_format",...W(t)})}function ev(e,t){return new e({type:"number",checks:[],...W(t)})}function tv(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...W(t)})}function rv(e,t){return new e({type:"boolean",...W(t)})}function nv(e,t){return new e({type:"null",...W(t)})}function ov(e){return new e({type:"unknown"})}function iv(e,t){return new e({type:"never",...W(t)})}function ka(e,t){return new lc({check:"less_than",...W(t),value:e,inclusive:!1})}function fo(e,t){return new lc({check:"less_than",...W(t),value:e,inclusive:!0})}function Sa(e,t){return new cc({check:"greater_than",...W(t),value:e,inclusive:!1})}function ho(e,t){return new cc({check:"greater_than",...W(t),value:e,inclusive:!0})}function Ea(e,t){return new yf({check:"multiple_of",...W(t),value:e})}function fc(e,t){return new xf({check:"max_length",...W(t),maximum:e})}function Zn(e,t){return new kf({check:"min_length",...W(t),minimum:e})}function hc(e,t){return new Sf({check:"length_equals",...W(t),length:e})}function av(e,t){return new Ef({check:"string_format",format:"regex",...W(t),pattern:e})}function sv(e){return new If({check:"string_format",format:"lowercase",...W(e)})}function lv(e){return new Tf({check:"string_format",format:"uppercase",...W(e)})}function cv(e,t){return new Rf({check:"string_format",format:"includes",...W(t),includes:e})}function uv(e,t){return new Cf({check:"string_format",format:"starts_with",...W(t),prefix:e})}function dv(e,t){return new Nf({check:"string_format",format:"ends_with",...W(t),suffix:e})}function fn(e){return new Of({check:"overwrite",tx:e})}function fv(e){return fn(t=>t.normalize(e))}function hv(){return fn(e=>e.trim())}function vv(){return fn(e=>e.toLowerCase())}function pv(){return fn(e=>e.toUpperCase())}function mv(e,t,r){return new e({type:"array",element:t,...W(r)})}function gv(e,t,r){return new e({type:"custom",check:"custom",fn:t,...W(r)})}const _v=C("ZodISODateTime",(e,t)=>{Hf.init(e,t),Ie.init(e,t)});function bv(e){return Kh(_v,e)}const yv=C("ZodISODate",(e,t)=>{Wf.init(e,t),Ie.init(e,t)});function wv(e){return Jh(yv,e)}const xv=C("ZodISOTime",(e,t)=>{Vf.init(e,t),Ie.init(e,t)});function kv(e){return Yh(xv,e)}const Sv=C("ZodISODuration",(e,t)=>{Gf.init(e,t),Ie.init(e,t)});function Ev(e){return Qh(Sv,e)}const Iv=(e,t)=>{ec.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>jd(e,r)},flatten:{value:r=>Zd(e,r)},addIssue:{value:r=>e.issues.push(r)},addIssues:{value:r=>e.issues.push(...r)},isEmpty:{get(){return e.issues.length===0}}})},Qn=C("ZodError",Iv,{Parent:Error}),Tv=Md(Qn),Rv=qd(Qn),Cv=rc(Qn),Nv=nc(Qn),Ne=C("ZodType",(e,t)=>(be.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone({...t,checks:[...t.checks??[],...r.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]}),e.clone=(r,n)=>yr(e,r,n),e.brand=()=>e,e.register=((r,n)=>(r.add(e,n),e)),e.parse=(r,n)=>Tv(e,r,n,{callee:e.parse}),e.safeParse=(r,n)=>Cv(e,r,n),e.parseAsync=async(r,n)=>Rv(e,r,n,{callee:e.parseAsync}),e.safeParseAsync=async(r,n)=>Nv(e,r,n),e.spa=e.safeParseAsync,e.refine=(r,n)=>e.check(xp(r,n)),e.superRefine=r=>e.check(kp(r)),e.overwrite=r=>e.check(fn(r)),e.optional=()=>Ra(e),e.nullable=()=>Ca(e),e.nullish=()=>Ra(Ca(e)),e.nonoptional=r=>vp(e,r),e.array=()=>Ue(e),e.or=r=>Zr([e,r]),e.and=r=>ip(e,r),e.transform=r=>Na(e,lp(r)),e.default=r=>dp(e,r),e.prefault=r=>hp(e,r),e.catch=r=>mp(e,r),e.pipe=r=>Na(e,r),e.readonly=()=>bp(e),e.describe=r=>{const n=e.clone();return kn.add(n,{description:r}),n},Object.defineProperty(e,"description",{get(){return kn.get(e)?.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return kn.get(e);const n=e.clone();return kn.add(n,r[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),vc=C("_ZodString",(e,t)=>{Fi.init(e,t),Ne.init(e,t);const r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...n)=>e.check(av(...n)),e.includes=(...n)=>e.check(cv(...n)),e.startsWith=(...n)=>e.check(uv(...n)),e.endsWith=(...n)=>e.check(dv(...n)),e.min=(...n)=>e.check(Zn(...n)),e.max=(...n)=>e.check(fc(...n)),e.length=(...n)=>e.check(hc(...n)),e.nonempty=(...n)=>e.check(Zn(1,...n)),e.lowercase=n=>e.check(sv(n)),e.uppercase=n=>e.check(lv(n)),e.trim=()=>e.check(hv()),e.normalize=(...n)=>e.check(fv(...n)),e.toLowerCase=()=>e.check(vv()),e.toUpperCase=()=>e.check(pv())}),Ov=C("ZodString",(e,t)=>{Fi.init(e,t),vc.init(e,t),e.email=r=>e.check(Ch($v,r)),e.url=r=>e.check(Ph(Av,r)),e.jwt=r=>e.check(Xh(Gv,r)),e.emoji=r=>e.check(zh(Pv,r)),e.guid=r=>e.check(xa(Ia,r)),e.uuid=r=>e.check(Nh(Sn,r)),e.uuidv4=r=>e.check(Oh(Sn,r)),e.uuidv6=r=>e.check($h(Sn,r)),e.uuidv7=r=>e.check(Ah(Sn,r)),e.nanoid=r=>e.check(Uh(zv,r)),e.guid=r=>e.check(xa(Ia,r)),e.cuid=r=>e.check(Lh(Uv,r)),e.cuid2=r=>e.check(Dh(Lv,r)),e.ulid=r=>e.check(Zh(Dv,r)),e.base64=r=>e.check(Wh(Hv,r)),e.base64url=r=>e.check(Vh(Wv,r)),e.xid=r=>e.check(jh(Zv,r)),e.ksuid=r=>e.check(Mh(jv,r)),e.ipv4=r=>e.check(qh(Mv,r)),e.ipv6=r=>e.check(Bh(qv,r)),e.cidrv4=r=>e.check(Fh(Bv,r)),e.cidrv6=r=>e.check(Hh(Fv,r)),e.e164=r=>e.check(Gh(Vv,r)),e.datetime=r=>e.check(bv(r)),e.date=r=>e.check(wv(r)),e.time=r=>e.check(kv(r)),e.duration=r=>e.check(Ev(r))});function U(e){return Rh(Ov,e)}const Ie=C("ZodStringFormat",(e,t)=>{xe.init(e,t),vc.init(e,t)}),$v=C("ZodEmail",(e,t)=>{Uf.init(e,t),Ie.init(e,t)}),Ia=C("ZodGUID",(e,t)=>{Pf.init(e,t),Ie.init(e,t)}),Sn=C("ZodUUID",(e,t)=>{zf.init(e,t),Ie.init(e,t)}),Av=C("ZodURL",(e,t)=>{Lf.init(e,t),Ie.init(e,t)}),Pv=C("ZodEmoji",(e,t)=>{Df.init(e,t),Ie.init(e,t)}),zv=C("ZodNanoID",(e,t)=>{Zf.init(e,t),Ie.init(e,t)}),Uv=C("ZodCUID",(e,t)=>{jf.init(e,t),Ie.init(e,t)}),Lv=C("ZodCUID2",(e,t)=>{Mf.init(e,t),Ie.init(e,t)}),Dv=C("ZodULID",(e,t)=>{qf.init(e,t),Ie.init(e,t)}),Zv=C("ZodXID",(e,t)=>{Bf.init(e,t),Ie.init(e,t)}),jv=C("ZodKSUID",(e,t)=>{Ff.init(e,t),Ie.init(e,t)}),Mv=C("ZodIPv4",(e,t)=>{Xf.init(e,t),Ie.init(e,t)}),qv=C("ZodIPv6",(e,t)=>{Kf.init(e,t),Ie.init(e,t)}),Bv=C("ZodCIDRv4",(e,t)=>{Jf.init(e,t),Ie.init(e,t)}),Fv=C("ZodCIDRv6",(e,t)=>{Yf.init(e,t),Ie.init(e,t)}),Hv=C("ZodBase64",(e,t)=>{Qf.init(e,t),Ie.init(e,t)}),Wv=C("ZodBase64URL",(e,t)=>{th.init(e,t),Ie.init(e,t)}),Vv=C("ZodE164",(e,t)=>{rh.init(e,t),Ie.init(e,t)}),Gv=C("ZodJWT",(e,t)=>{oh.init(e,t),Ie.init(e,t)}),pc=C("ZodNumber",(e,t)=>{dc.init(e,t),Ne.init(e,t),e.gt=(n,o)=>e.check(Sa(n,o)),e.gte=(n,o)=>e.check(ho(n,o)),e.min=(n,o)=>e.check(ho(n,o)),e.lt=(n,o)=>e.check(ka(n,o)),e.lte=(n,o)=>e.check(fo(n,o)),e.max=(n,o)=>e.check(fo(n,o)),e.int=n=>e.check(Ta(n)),e.safe=n=>e.check(Ta(n)),e.positive=n=>e.check(Sa(0,n)),e.nonnegative=n=>e.check(ho(0,n)),e.negative=n=>e.check(ka(0,n)),e.nonpositive=n=>e.check(fo(0,n)),e.multipleOf=(n,o)=>e.check(Ea(n,o)),e.step=(n,o)=>e.check(Ea(n,o)),e.finite=()=>e;const r=e._zod.bag;e.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function Ce(e){return ev(pc,e)}const Xv=C("ZodNumberFormat",(e,t)=>{ih.init(e,t),pc.init(e,t)});function Ta(e){return tv(Xv,e)}const Kv=C("ZodBoolean",(e,t)=>{ah.init(e,t),Ne.init(e,t)});function mc(e){return rv(Kv,e)}const Jv=C("ZodNull",(e,t)=>{sh.init(e,t),Ne.init(e,t)});function eo(e){return nv(Jv,e)}const Yv=C("ZodUnknown",(e,t)=>{lh.init(e,t),Ne.init(e,t)});function Pr(){return ov(Yv)}const Qv=C("ZodNever",(e,t)=>{ch.init(e,t),Ne.init(e,t)});function ep(e){return iv(Qv,e)}const tp=C("ZodArray",(e,t)=>{uh.init(e,t),Ne.init(e,t),e.element=t.element,e.min=(r,n)=>e.check(Zn(r,n)),e.nonempty=r=>e.check(Zn(1,r)),e.max=(r,n)=>e.check(fc(r,n)),e.length=(r,n)=>e.check(hc(r,n)),e.unwrap=()=>e.element});function Ue(e,t){return mv(tp,e,t)}const rp=C("ZodObject",(e,t)=>{dh.init(e,t),Ne.init(e,t),_e(e,"shape",()=>t.shape),e.keyof=()=>Hi(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:Pr()}),e.loose=()=>e.clone({...e._zod.def,catchall:Pr()}),e.strict=()=>e.clone({...e._zod.def,catchall:ep()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>zd(e,r),e.merge=r=>Ud(e,r),e.pick=r=>Ad(e,r),e.omit=r=>Pd(e,r),e.partial=(...r)=>Ld(gc,e,r[0]),e.required=(...r)=>Dd(_c,e,r[0])});function Pe(e,t){const r={type:"object",get shape(){return qi(this,"shape",{...e}),this.shape},...W(t)};return new rp(r)}const np=C("ZodUnion",(e,t)=>{fh.init(e,t),Ne.init(e,t),e.options=t.options});function Zr(e,t){return new np({type:"union",options:e,...W(t)})}const op=C("ZodIntersection",(e,t)=>{hh.init(e,t),Ne.init(e,t)});function ip(e,t){return new op({type:"intersection",left:e,right:t})}const ap=C("ZodRecord",(e,t)=>{vh.init(e,t),Ne.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function to(e,t,r){return new ap({type:"record",keyType:e,valueType:t,...W(r)})}const Ei=C("ZodEnum",(e,t)=>{ph.init(e,t),Ne.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const r=new Set(Object.keys(t.entries));e.extract=(n,o)=>{const i={};for(const a of n)if(r.has(a))i[a]=t.entries[a];else throw new Error(`Key ${a} not found in enum`);return new Ei({...t,checks:[],...W(o),entries:i})},e.exclude=(n,o)=>{const i={...t.entries};for(const a of n)if(r.has(a))delete i[a];else throw new Error(`Key ${a} not found in enum`);return new Ei({...t,checks:[],...W(o),entries:i})}});function Hi(e,t){const r=Array.isArray(e)?Object.fromEntries(e.map(n=>[n,n])):e;return new Ei({type:"enum",entries:r,...W(t)})}const sp=C("ZodTransform",(e,t)=>{mh.init(e,t),Ne.init(e,t),e._zod.parse=(r,n)=>{r.addIssue=i=>{if(typeof i=="string")r.issues.push(an(i,r.value,t));else{const a=i;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=r.value),a.inst??(a.inst=e),a.continue??(a.continue=!0),r.issues.push(an(a))}};const o=t.transform(r.value,r);return o instanceof Promise?o.then(i=>(r.value=i,r)):(r.value=o,r)}});function lp(e){return new sp({type:"transform",transform:e})}const gc=C("ZodOptional",(e,t)=>{gh.init(e,t),Ne.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Ra(e){return new gc({type:"optional",innerType:e})}const cp=C("ZodNullable",(e,t)=>{_h.init(e,t),Ne.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Ca(e){return new cp({type:"nullable",innerType:e})}const up=C("ZodDefault",(e,t)=>{bh.init(e,t),Ne.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function dp(e,t){return new up({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const fp=C("ZodPrefault",(e,t)=>{yh.init(e,t),Ne.init(e,t),e.unwrap=()=>e._zod.def.innerType});function hp(e,t){return new fp({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const _c=C("ZodNonOptional",(e,t)=>{wh.init(e,t),Ne.init(e,t),e.unwrap=()=>e._zod.def.innerType});function vp(e,t){return new _c({type:"nonoptional",innerType:e,...W(t)})}const pp=C("ZodCatch",(e,t)=>{xh.init(e,t),Ne.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function mp(e,t){return new pp({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const gp=C("ZodPipe",(e,t)=>{kh.init(e,t),Ne.init(e,t),e.in=t.in,e.out=t.out});function Na(e,t){return new gp({type:"pipe",in:e,out:t})}const _p=C("ZodReadonly",(e,t)=>{Sh.init(e,t),Ne.init(e,t)});function bp(e){return new _p({type:"readonly",innerType:e})}const yp=C("ZodCustom",(e,t)=>{Eh.init(e,t),Ne.init(e,t)});function wp(e){const t=new it({check:"custom"});return t._zod.check=e,t}function xp(e,t={}){return gv(yp,e,t)}function kp(e){const t=wp(r=>(r.addIssue=n=>{if(typeof n=="string")r.issues.push(an(n,r.value,t._zod.def));else{const o=n;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=r.value),o.inst??(o.inst=t),o.continue??(o.continue=!t._zod.def.abort),r.issues.push(an(o))}},e(r.value,r)));return t}const Sp=8;function Ep(e){return e===null?"null":Array.isArray(e)?`array(length=${e.length})`:typeof e=="object"?`object(keys=${Object.keys(e).slice(0,6).join(",")})`:typeof e}function Wi(e,t,r){const n=e.safeParse(t);if(!n.success){const o=n.error.issues.slice(0,Sp).map(i=>`${i.path.length>0?i.path.join("."):"(root)"}: ${i.message}`).join("; ");return console.error(`[zod] ${r} validation failed`,o,Ep(t)),{success:!1,error:n.error}}return{success:!0,data:n.data}}async function bc(e,t,r){if(!e.ok)return{success:!1,error:`HTTP ${e.status}: ${e.statusText}`};let n;try{n=await e.json()}catch(i){return{success:!1,error:`Invalid JSON response: ${i instanceof Error?i.message:String(i)}`}}const o=Wi(t,n,r);return o.success?{success:!0,data:o.data}:{success:!1,error:`Schema validation failed for ${r}`}}const Ip="XSRF-TOKEN",Oa="X-XSRF-TOKEN";function Tp(e){if(typeof document>"u")return null;const t=document.cookie.split(";").map(n=>n.trim()).find(n=>n.startsWith(`${e}=`));if(!t)return null;const r=t.substring(e.length+1);try{return decodeURIComponent(r)}catch{return r}}function Rp(e){const t=new Headers(e.headers??{}),r=Tp(Ip);return r&&!t.has(Oa)&&t.set(Oa,r),{...e,headers:t}}async function wr(e,t,r){const n=await fetch(e,{method:"GET",cache:"no-store",credentials:"same-origin"}),o=await bc(n,t,r);if(!o.success)throw new Error(o.error);return o.data}async function Cp(e,t,r,n){const o=await fetch(e,Rp({method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(t)})),i=await bc(o,r,n);if(!i.success)throw new Error(i.error);return i.data}const Np=Pe({id:U().nullable().optional(),name:U()}),Op=Pe({id:U().nullable().optional(),name:U().nullable().optional(),type:U().nullable().optional(),rank:Ce().nullable().optional(),source:U().nullable().optional()}),$p=Pe({key:U(),attributes:to(U(),Pr()).optional().default({})}),Ap=Pe({s3ImagePath:U().nullable().optional(),externalImageUrl:U().nullable().optional(),width:Ce().nullable().optional(),height:Ce().nullable().optional(),highResolution:mc().nullable().optional(),preferredUrl:U().nullable().optional(),fallbackUrl:U().nullable().optional(),source:U().nullable().optional()}),Pp=Pe({googleBooksId:U().nullable().optional(),type:U().nullable().optional(),identifier:U().nullable().optional(),isbn10:U().nullable().optional(),isbn13:U().nullable().optional(),publishedDate:Zr([U(),Ce(),eo()]).optional(),coverImageUrl:U().nullable().optional()}),zp=Pe({publishedDate:Zr([U(),Ce(),eo()]).optional(),language:U().nullable().optional(),pageCount:Ce().nullable().optional(),publisher:U().nullable().optional()}),Up=Pe({raw:U().nullable().optional(),format:Hi(["HTML","MARKDOWN","PLAIN_TEXT","UNKNOWN"]).optional().default("UNKNOWN"),html:U().optional().default(""),text:U().optional().default("")}),Vi=Pe({id:U(),slug:U().nullable().optional(),title:U().nullable().optional(),source:U().nullable().optional(),description:U().nullable().optional(),descriptionContent:Up.nullable().optional(),publication:zp.nullable().optional(),authors:Ue(Np).optional().default([]),categories:Ue(U()).optional().default([]),collections:Ue(Op).optional().default([]),tags:Ue($p).optional().default([]),cover:Ap.nullable().optional(),editions:Ue(Pp).optional().default([]),recommendationIds:Ue(U()).optional().default([]),extras:to(U(),Pr()).optional().default({})}),Lp=Vi.extend({matchType:U().nullable().optional(),relevanceScore:Ce().nullable().optional()}),Dp=Pe({query:U(),queryHash:U(),startIndex:Ce(),maxResults:Ce(),totalResults:Ce(),hasMore:mc(),nextStartIndex:Ce(),prefetchedCount:Ce(),orderBy:U(),coverSource:U(),resolution:U(),results:Ue(Lp)}),Zp=Ue(Vi),$a=Pe({id:U(),slug:U().nullable().optional(),title:U(),authors:Ue(U()).optional().default([]),cover_url:U().nullable().optional(),cover_s3_key:U().nullable().optional(),fallback_cover_url:U().nullable().optional(),average_rating:Ce().nullable().optional(),ratings_count:Ce().nullable().optional(),tags:to(U(),Pr()).optional().default({})}),jp=Pe({currentBestsellers:Ue($a),recentBooks:Ue($a)}),yc=Pe({id:U().nullable().optional(),slug:U(),title:U(),updatedAt:Zr([U(),Ce(),eo()]).optional()}),Mp=Pe({authorId:U(),authorName:U(),lastModified:Zr([U(),Ce(),eo()]).optional(),books:Ue(yc)}),qp=Pe({viewType:Hi(["authors","books"]),activeLetter:U(),pageNumber:Ce(),totalPages:Ce(),totalItems:Ce(),letters:Ue(U()),baseUrl:U(),books:Ue(yc).optional().default([]),authors:Ue(Mp).optional().default([])}),wc=Pe({theme:U().nullable(),source:U()}),Bp=to(U(),U()).optional().default({}),Fp=Pe({message:U().optional()}),Hp=Pe({newResults:Ue(Pr()).optional().default([])}),Wp=Pe({newCoverUrl:U().optional()}),Vp=Pe({id:U(),slug:U().optional(),title:U().optional(),source:U().optional(),description:U().nullable().optional(),authors:Ue(U()).optional().default([]),categories:Ue(U()).optional().default([]),publishedDate:Zr([U(),Ce()]).optional(),language:U().optional(),pageCount:Ce().optional(),publisher:U().optional(),cover:Pe({s3ImagePath:U().optional(),externalImageUrl:U().optional(),preferredUrl:U().optional(),fallbackUrl:U().optional(),source:U().optional()}).optional(),matchType:U().optional(),relevanceScore:Ce().optional()});function Gp(){return wr("/api/theme",wc,"getThemePreference")}function Xp(e,t){return Cp("/api/theme",{theme:e,useSystem:t},wc,"persistThemePreference")}const Rr=Vl("light");function Gi(){return typeof window>"u"?"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function $n(e){document.documentElement.setAttribute("data-theme",e)}function Kp(){const e=window.localStorage.getItem("preferred_theme");return e==="light"||e==="dark"?e:e==="system"?Gi():null}async function Jp(){const e=await Gp();return e.theme==="light"||e.theme==="dark"?e.theme:Gi()}async function Yp(){if(typeof window>"u")return;const e=Kp();if(e){Rr.set(e),$n(e);return}try{const t=await Jp();Rr.set(t),$n(t),window.localStorage.setItem("preferred_theme",t)}catch(t){console.error("Failed to load theme preference",t);const r=Gi();Rr.set(r),$n(r)}}async function Qp(){const t=md(Rr)==="light"?"dark":"light";Rr.set(t),$n(t),window.localStorage.setItem("preferred_theme",t);try{await Xp(t,!1)}catch(r){console.error("Failed to persist theme preference",r)}}const em={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};const tm=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};var rm=Yu("<svg><!><!></svg>");function Te(e,t){ie(t,!0);const r=zt(t,"color",3,"currentColor"),n=zt(t,"size",3,24),o=zt(t,"strokeWidth",3,2),i=zt(t,"absoluteStrokeWidth",3,!1),a=zt(t,"iconNode",19,()=>[]),s=we(t,["$$slots","$$events","$$legacy","name","color","size","strokeWidth","absoluteStrokeWidth","iconNode","children"]);var c=rm();ua(c,(v,p)=>({...em,...v,...s,width:n(),height:n(),stroke:r(),"stroke-width":p,class:["lucide-icon lucide",t.name&&`lucide-${t.name}`,t.class]}),[()=>!t.children&&!tm(s)&&{"aria-hidden":"true"},()=>i()?Number(o())*24/Number(n()):o()]);var u=S(c);je(u,17,a,Lt,(v,p)=>{var y=Re(()=>Xs(d(p),2));let E=()=>d(y)[0],I=()=>d(y)[1];var k=Q(),N=V(k);ad(N,E,!0,(b,x)=>{ua(b,()=>({...I()}))}),T(v,k)});var f=O(u);ye(f,()=>t.children??he),T(e,c),ae()}function xc(e,t){ie(t,!0);let r=we(t,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M12 7v14"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"}]];Te(e,Ee({name:"book-open"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ye(s,()=>t.children??he),T(o,a)},$$slots:{default:!0}})),ae()}function nm(e,t){ie(t,!0);let r=we(t,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M8 2v4"}],["path",{d:"M16 2v4"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2"}],["path",{d:"M3 10h18"}]];Te(e,Ee({name:"calendar"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ye(s,()=>t.children??he),T(o,a)},$$slots:{default:!0}})),ae()}function om(e,t){ie(t,!0);let r=we(t,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"m6 9 6 6 6-6"}]];Te(e,Ee({name:"chevron-down"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ye(s,()=>t.children??he),T(o,a)},$$slots:{default:!0}})),ae()}function im(e,t){ie(t,!0);let r=we(t,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"m15 18-6-6 6-6"}]];Te(e,Ee({name:"chevron-left"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ye(s,()=>t.children??he),T(o,a)},$$slots:{default:!0}})),ae()}function am(e,t){ie(t,!0);let r=we(t,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"m9 18 6-6-6-6"}]];Te(e,Ee({name:"chevron-right"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ye(s,()=>t.children??he),T(o,a)},$$slots:{default:!0}})),ae()}function sm(e,t){ie(t,!0);let r=we(t,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M15 3h6v6"}],["path",{d:"M10 14 21 3"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}]];Te(e,Ee({name:"external-link"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ye(s,()=>t.children??he),T(o,a)},$$slots:{default:!0}})),ae()}function lm(e,t){ie(t,!0);let r=we(t,["$$slots","$$events","$$legacy"]);const n=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"}],["path",{d:"M2 12h20"}]];Te(e,Ee({name:"globe"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ye(s,()=>t.children??he),T(o,a)},$$slots:{default:!0}})),ae()}function cm(e,t){ie(t,!0);let r=we(t,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3"}]];Te(e,Ee({name:"headphones"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ye(s,()=>t.children??he),T(o,a)},$$slots:{default:!0}})),ae()}function Aa(e,t){ie(t,!0);let r=we(t,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}]];Te(e,Ee({name:"house"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ye(s,()=>t.children??he),T(o,a)},$$slots:{default:!0}})),ae()}function An(e,t){ie(t,!0);let r=we(t,["$$slots","$$events","$$legacy"]);const n=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M12 16v-4"}],["path",{d:"M12 8h.01"}]];Te(e,Ee({name:"info"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ye(s,()=>t.children??he),T(o,a)},$$slots:{default:!0}})),ae()}function um(e,t){ie(t,!0);let r=we(t,["$$slots","$$events","$$legacy"]);const n=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"}]];Te(e,Ee({name:"layout-grid"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ye(s,()=>t.children??he),T(o,a)},$$slots:{default:!0}})),ae()}function kc(e,t){ie(t,!0);let r=we(t,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M3 5h.01"}],["path",{d:"M3 12h.01"}],["path",{d:"M3 19h.01"}],["path",{d:"M8 5h13"}],["path",{d:"M8 12h13"}],["path",{d:"M8 19h13"}]];Te(e,Ee({name:"list"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ye(s,()=>t.children??he),T(o,a)},$$slots:{default:!0}})),ae()}function Pa(e,t){ie(t,!0);let r=we(t,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56"}]];Te(e,Ee({name:"loader-circle"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ye(s,()=>t.children??he),T(o,a)},$$slots:{default:!0}})),ae()}function dm(e,t){ie(t,!0);let r=we(t,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M4 5h16"}],["path",{d:"M4 12h16"}],["path",{d:"M4 19h16"}]];Te(e,Ee({name:"menu"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ye(s,()=>t.children??he),T(o,a)},$$slots:{default:!0}})),ae()}function En(e,t){ie(t,!0);let r=we(t,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401"}]];Te(e,Ee({name:"moon"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ye(s,()=>t.children??he),T(o,a)},$$slots:{default:!0}})),ae()}function sn(e,t){ie(t,!0);let r=we(t,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"m21 21-4.34-4.34"}],["circle",{cx:"11",cy:"11",r:"8"}]];Te(e,Ee({name:"search"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ye(s,()=>t.children??he),T(o,a)},$$slots:{default:!0}})),ae()}function fm(e,t){ie(t,!0);let r=we(t,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M16 10a4 4 0 0 1-8 0"}],["path",{d:"M3.103 6.034h17.794"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z"}]];Te(e,Ee({name:"shopping-bag"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ye(s,()=>t.children??he),T(o,a)},$$slots:{default:!0}})),ae()}function hm(e,t){ie(t,!0);let r=we(t,["$$slots","$$events","$$legacy"]);const n=[["circle",{cx:"8",cy:"21",r:"1"}],["circle",{cx:"19",cy:"21",r:"1"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"}]];Te(e,Ee({name:"shopping-cart"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ye(s,()=>t.children??he),T(o,a)},$$slots:{default:!0}})),ae()}function Ii(e,t){ie(t,!0);let r=we(t,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z"}]];Te(e,Ee({name:"star"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ye(s,()=>t.children??he),T(o,a)},$$slots:{default:!0}})),ae()}function vm(e,t){ie(t,!0);let r=we(t,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05"}]];Te(e,Ee({name:"store"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ye(s,()=>t.children??he),T(o,a)},$$slots:{default:!0}})),ae()}function In(e,t){ie(t,!0);let r=we(t,["$$slots","$$events","$$legacy"]);const n=[["circle",{cx:"12",cy:"12",r:"4"}],["path",{d:"M12 2v2"}],["path",{d:"M12 20v2"}],["path",{d:"m4.93 4.93 1.41 1.41"}],["path",{d:"m17.66 17.66 1.41 1.41"}],["path",{d:"M2 12h2"}],["path",{d:"M20 12h2"}],["path",{d:"m6.34 17.66-1.41 1.41"}],["path",{d:"m19.07 4.93-1.41 1.41"}]];Te(e,Ee({name:"sun"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ye(s,()=>t.children??he),T(o,a)},$$slots:{default:!0}})),ae()}function pm(e,t){ie(t,!0);let r=we(t,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor"}]];Te(e,Ee({name:"tag"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ye(s,()=>t.children??he),T(o,a)},$$slots:{default:!0}})),ae()}function mm(e,t){ie(t,!0);let r=we(t,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];Te(e,Ee({name:"x"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ye(s,()=>t.children??he),T(o,a)},$$slots:{default:!0}})),ae()}var gm=D('<a><!> <span class="tracking-wide"> </span></a>'),_m=D("<!> <!>",1),bm=D("<!> <!>",1),ym=D("<!> <!>",1),wm=D("<!> <!>",1),xm=D('<a><!> <span class="tracking-wide"> </span></a>'),km=D('<div class="border-t border-anthracite-200/60 dark:border-slate-700 px-4 py-3 lg:hidden"><nav class="space-y-1"></nav> <form class="mt-3 flex items-center gap-2"><input type="search" placeholder="Quick search..." class="w-full rounded-lg border border-linen-300 bg-white px-3 py-2 text-sm text-anthracite-900 outline-none ring-canvas-300 transition focus:ring-2 dark:border-slate-600 dark:bg-slate-800 dark:text-slate-100"/> <button type="submit" class="rounded-lg bg-canvas-400 px-3 py-2 text-sm font-medium text-white transition hover:bg-canvas-500 hover:shadow-canvas"><!></button></form></div>'),Sm=D('<header class="sticky top-0 z-30 border-b border-linen-200/80 dark:border-slate-700 transition-all duration-300 bg-[rgba(253,252,250,0.80)] dark:bg-[rgba(30,41,59,0.95)] backdrop-blur-[12px]"><div class="mx-auto flex h-14 max-w-6xl items-center px-4 md:px-6"><div class="w-[200px] shrink-0"><a href="/" class="group flex items-center"><img src="/images/findmybook-logo-white-bg.png" alt="FindMyBook Logo" class="h-[140px] w-auto -ml-4 transition-transform duration-200 group-hover:scale-105 block dark:hidden"/> <img src="/images/findmybook-logo.png" alt="FindMyBook Logo" class="h-12 w-auto transition-transform duration-200 group-hover:scale-105 hidden dark:block"/></a></div> <div class="hidden min-w-4 grow lg:flex"></div> <nav class="hidden shrink-0 items-center gap-1 lg:flex"></nav> <div class="hidden min-w-4 grow lg:flex"></div> <div class="hidden w-[200px] shrink-0 justify-end lg:flex"><button type="button" class="group inline-flex items-center justify-center rounded-md p-2 text-anthracite-700 dark:text-slate-400 transition-all duration-200 hover:text-anthracite-800 dark:hover:text-slate-50 hover:bg-canvas-400/8 dark:hover:bg-slate-700/50 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-canvas-400"><!></button></div> <div class="ml-auto flex items-center gap-1.5 lg:hidden"><button type="button" class="group inline-flex items-center justify-center rounded-md p-2 text-anthracite-700 dark:text-slate-400 transition hover:bg-canvas-400/8 dark:hover:bg-slate-700/50"><!></button> <button type="button" class="inline-flex items-center justify-center rounded-md p-2 text-anthracite-700 dark:text-slate-400 transition hover:bg-canvas-400/8 dark:hover:bg-slate-700/50" aria-label="Toggle navigation"><!></button></div></div> <!></header>');function Em(e,t){ie(t,!0);let r=te(""),n=te(!1),o=te("light");const i=Rr.subscribe(A=>{M(o,A,!0)});cn(()=>()=>{i()});function a(A){A.preventDefault();const F=d(r).trim();F&&(M(n,!1),Dr(`/search?query=${encodeURIComponent(F)}`))}function s(){Qp()}const c=[{href:"/",route:"home",label:"Home"},{href:"/search",route:"search",label:"Search"},{href:"/explore",route:"explore",label:"Explore"},{href:"/categories",route:"categories",label:"Categories"}];function u(A){switch(A){case"home":return Aa;case"search":return sn;case"explore":return xc;case"categories":return kc;default:return Aa}}function f(A){return t.activeRoute===A}function v(A){return f(A)?"inline-flex items-center gap-2 rounded-md px-3.5 py-2 text-sm font-semibold text-canvas-800 dark:text-canvas-500 transition-all duration-200 bg-canvas-200/85 dark:bg-canvas-600/15 shadow-[0_1px_3px_rgba(212,165,116,0.4),0_1px_2px_rgba(212,165,116,0.3)] dark:shadow-[0_1px_3px_rgba(168,151,120,0.2)]":"inline-flex items-center gap-2 rounded-md px-3.5 py-2 text-sm font-medium text-anthracite-700 dark:text-slate-400 transition-all duration-200 hover:text-anthracite-800 dark:hover:text-slate-50 hover:bg-canvas-400/8 dark:hover:bg-slate-700/50"}var p=Sm(),y=S(p),E=O(S(y),4);je(E,21,()=>c,A=>A.route,(A,F)=>{const Y=Re(()=>u(d(F).route));var K=gm(),j=S(K);xi(j,()=>d(Y),(ne,pe)=>{pe(ne,{size:16})});var G=O(j,2),re=S(G);J(ne=>{fe(K,"href",d(F).href),ft(K,1,ne),X(re,d(F).label)},[()=>Zi(v(d(F).route))]),T(A,K)});var I=O(E,4),k=S(I);k.__click=s;var N=S(k);{var b=A=>{var F=_m(),Y=V(F);In(Y,{size:18,class:"block group-hover:hidden"});var K=O(Y,2);En(K,{size:18,class:"hidden group-hover:block"}),T(A,F)},x=A=>{var F=bm(),Y=V(F);En(Y,{size:18,class:"block group-hover:hidden"});var K=O(Y,2);In(K,{size:18,class:"hidden group-hover:block"}),T(A,F)};H(N,A=>{d(o)==="light"?A(b):A(x,!1)})}var _=O(I,2),l=S(_);l.__click=s;var m=S(l);{var g=A=>{var F=ym(),Y=V(F);In(Y,{size:18,class:"block group-hover:hidden"});var K=O(Y,2);En(K,{size:18,class:"hidden group-hover:block"}),T(A,F)},h=A=>{var F=wm(),Y=V(F);En(Y,{size:18,class:"block group-hover:hidden"});var K=O(Y,2);In(K,{size:18,class:"hidden group-hover:block"}),T(A,F)};H(m,A=>{d(o)==="light"?A(g):A(h,!1)})}var w=O(l,2);w.__click=()=>M(n,!d(n));var R=S(w);{var z=A=>{mm(A,{size:18})},B=A=>{dm(A,{size:18})};H(R,A=>{d(n)?A(z):A(B,!1)})}var $=O(y,2);{var ee=A=>{var F=km(),Y=S(F);je(Y,21,()=>c,ne=>ne.route,(ne,pe)=>{const ke=Re(()=>u(d(pe).route));var me=xm();me.__click=()=>M(n,!1);var qe=S(me);xi(qe,()=>d(ke),(at,Xt)=>{Xt(at,{size:16})});var Ye=O(qe,2),sr=S(Ye);J(at=>{fe(me,"href",d(pe).href),ft(me,1,at),X(sr,d(pe).label)},[()=>`${v(d(pe).route)} w-full justify-start`]),T(ne,me)});var K=O(Y,2),j=S(K),G=O(j,2),re=S(G);sn(re,{size:16}),Vn("submit",K,a),Xn(j,()=>d(r),ne=>M(r,ne)),T(A,F)};H($,A=>{d(n)&&A(ee)})}J(()=>{fe(k,"title",d(o)==="light"?"Light â Dark":"Dark â Light"),fe(k,"aria-label",d(o)==="light"?"Switch to dark mode":"Switch to light mode"),fe(l,"title",d(o)==="light"?"Light â Dark":"Dark â Light"),fe(l,"aria-label",d(o)==="light"?"Switch to dark mode":"Switch to light mode"),fe(w,"aria-expanded",d(n))}),T(e,p),ae()}dn(["click"]);var Im=D('<footer class="mt-auto border-t border-linen-200 py-8 transition-colors duration-300 dark:border-slate-700"><div class="mx-auto flex max-w-6xl flex-col items-center gap-4 px-4 text-sm md:flex-row md:justify-between md:px-6"><p class="text-anthracite-600 dark:text-slate-400">By <a href="https://williamcallahan.com" target="_blank" rel="noopener" class="font-medium text-canvas-600 transition-colors duration-200 hover:text-canvas-700 dark:text-canvas-400 dark:hover:text-canvas-300">William Callahan</a></p> <p class="flex items-center gap-2 text-anthracite-600 dark:text-slate-400"><a href="https://github.com/WilliamAGH/book-finder" target="_blank" rel="noopener" class="font-medium text-canvas-600 transition-colors duration-200 hover:text-canvas-700 dark:text-canvas-400 dark:hover:text-canvas-300">Open Source</a> <span class="mx-1">&bull;</span> Made with <span class="text-red-500 dark:text-red-400">&#10084;&#65039;</span> in California <span class="mx-1">&bull;</span> <a href="/sitemap" class="font-medium text-canvas-600 transition-colors duration-200 hover:text-canvas-700 dark:text-canvas-400 dark:hover:text-canvas-300">Sitemap</a></p></div></footer>');function Tm(e){var t=Im();T(e,t)}var Rm=D('<p class="line-clamp-3 text-sm text-anthracite-600 dark:text-slate-400"> </p>'),Cm=D('<div class="flex items-center gap-1 text-sm font-medium text-canvas-700 dark:text-canvas-400"><!> <span> </span> <span class="text-anthracite-500 dark:text-slate-500"> </span></div>'),Nm=D('<article class="flex gap-4 rounded-xl border border-linen-300 bg-white p-4 shadow-soft transition-all duration-300 hover:shadow-book hover:-translate-y-0.5 dark:border-slate-700 dark:bg-slate-800"><a class="flex h-40 w-28 shrink-0 items-center justify-center overflow-hidden rounded-lg bg-linen-50 dark:bg-slate-900"><img class="max-h-full w-auto object-contain" loading="lazy"/></a> <div class="flex min-w-0 flex-1 flex-col gap-2"><a class="line-clamp-2 text-lg font-semibold text-anthracite-900 transition hover:text-canvas-600 dark:text-slate-100 dark:hover:text-canvas-400"> </a> <p class="truncate text-sm font-light text-anthracite-600 dark:text-slate-400"> </p> <!> <!></div></article>'),Om=D('<div class="absolute right-3 top-3 flex items-center gap-1 rounded-lg bg-canvas-400 px-2.5 py-1 text-sm font-medium text-white shadow-sm"><!> <span> </span></div>'),$m=D('<span class="rounded-full bg-linen-100 px-2 py-0.5 text-xs text-anthracite-700 dark:bg-slate-700 dark:text-slate-200"> </span>'),Am=D('<span class="rounded-full bg-linen-100 px-2 py-0.5 text-xs text-anthracite-700 dark:bg-slate-700 dark:text-slate-200"> </span>'),Pm=D('<span class="rounded-full bg-linen-100 px-2 py-0.5 text-xs text-anthracite-700 dark:bg-slate-700 dark:text-slate-200"> </span>'),zm=D('<div class="mb-2 mt-auto flex flex-wrap gap-1.5"><!> <!> <!></div>'),Um=D('<p class="mb-3 text-xs text-slate-500"> </p>'),Lm=D('<article class="group flex h-full flex-col overflow-hidden rounded-xl border border-linen-300 shadow-soft transition-all duration-300 hover:-translate-y-1 hover:shadow-book dark:border-slate-700"><div class="relative flex h-80 items-center justify-center overflow-hidden bg-linen-50 p-4 dark:bg-slate-900"><a class="flex h-full w-full items-center justify-center"><img class="max-h-full w-auto object-contain transition-transform duration-300 group-hover:scale-105" loading="lazy"/></a> <!></div> <div class="flex grow flex-col bg-white p-4 dark:bg-slate-800"><h5 class="mb-1.5 line-clamp-2 text-base font-semibold leading-snug text-anthracite-900 dark:text-slate-50"><a class="transition-colors duration-200 hover:text-canvas-600 dark:hover:text-canvas-400"> </a></h5> <p class="mb-3 truncate text-sm font-light text-anthracite-600 dark:text-slate-400"> </p> <!> <!></div> <div class="mt-auto bg-white px-4 pb-4 dark:bg-slate-800"><a class="block w-full rounded-lg bg-canvas-400 px-4 py-2.5 text-center text-sm font-medium text-white transition-all duration-200 hover:bg-canvas-500 hover:shadow-canvas focus:outline-none focus:ring-2 focus:ring-canvas-500 focus:ring-offset-2">View Details</a></div></article>');function jn(e,t){ie(t,!0);let r=zt(t,"layout",3,"grid"),n=zt(t,"showStats",3,!1);const o="/images/placeholder-book-cover.svg";function i(){return t.book.coverUrl&&t.book.coverUrl.trim().length>0?t.book.coverUrl:t.book.fallbackCoverUrl&&t.book.fallbackCoverUrl.trim().length>0?t.book.fallbackCoverUrl:o}function a(y){if(!n()||!t.book.tags)return null;const E=t.book.tags[y];return typeof E=="number"&&E>0?E:null}function s(){return a("recent.views.24h")!==null||a("recent.views.7d")!==null||a("recent.views.30d")!==null}function c(){if(!n()||!t.book.tags)return null;const y=t.book.tags["recent.views.lastViewedAt"];if(!y)return null;try{const E=new Date(y);return Number.isNaN(E.getTime())?null:`Last viewed ${E.toLocaleDateString("en-US",{month:"short",day:"numeric"})} ${E.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})}`}catch{return null}}var u=Q(),f=V(u);{var v=y=>{var E=Nm(),I=S(E),k=S(I),N=O(I,2),b=S(N),x=S(b),_=O(b,2),l=S(_),m=O(_,2);{var g=R=>{var z=Rm(),B=S(z);J(()=>X(B,t.book.description)),T(R,z)};H(m,R=>{t.book.description&&R(g)})}var h=O(m,2);{var w=R=>{var z=Cm(),B=S(z);Ii(B,{size:14,class:"fill-current"});var $=O(B,2),ee=S($),A=O($,2),F=S(A);J(Y=>{X(ee,Y),X(F,`(${t.book.ratingsCount??0??""})`)},[()=>t.book.averageRating.toFixed(1)]),T(R,z)};H(h,R=>{t.book.averageRating!==null&&t.book.averageRating!==void 0&&R(w)})}J((R,z)=>{fe(I,"href",t.href),fe(k,"src",R),fe(k,"alt",`${t.book.title} cover`),fe(b,"href",t.href),X(x,t.book.title),X(l,z)},[i,()=>t.book.authors.length>0?t.book.authors.join(", "):"Unknown Author"]),T(y,E)},p=y=>{var E=Lm(),I=S(E),k=S(I),N=S(k),b=O(k,2);{var x=F=>{var Y=Om(),K=S(Y);Ii(K,{size:12,class:"fill-current"});var j=O(K,2),G=S(j);J(re=>X(G,re),[()=>t.book.averageRating.toFixed(1)]),T(F,Y)};H(b,F=>{t.book.averageRating!==null&&t.book.averageRating!==void 0&&F(x)})}var _=O(I,2),l=S(_),m=S(l),g=S(m),h=O(l,2),w=S(h),R=O(h,2);{var z=F=>{var Y=zm(),K=S(Y);{var j=ke=>{var me=$m(),qe=S(me);J(Ye=>X(qe,`${Ye??""} in 24h`),[()=>a("recent.views.24h")]),T(ke,me)};H(K,ke=>{a("recent.views.24h")&&ke(j)})}var G=O(K,2);{var re=ke=>{var me=Am(),qe=S(me);J(Ye=>X(qe,`${Ye??""} in 7d`),[()=>a("recent.views.7d")]),T(ke,me)};H(G,ke=>{a("recent.views.7d")&&ke(re)})}var ne=O(G,2);{var pe=ke=>{var me=Pm(),qe=S(me);J(Ye=>X(qe,`${Ye??""} in 30d`),[()=>a("recent.views.30d")]),T(ke,me)};H(ne,ke=>{a("recent.views.30d")&&ke(pe)})}T(F,Y)};H(R,F=>{s()&&F(z)})}var B=O(R,2);{var $=F=>{var Y=Um(),K=S(Y);J(j=>X(K,j),[c]),T(F,Y)};H(B,F=>{c()&&F($)})}var ee=O(_,2),A=S(ee);J(F=>{fe(k,"href",t.href),fe(N,"src",F),fe(N,"alt",`${t.book.title} cover`),fe(m,"href",t.href),X(g,t.book.title),X(w,t.book.authors.length>0?t.book.authors[0]:"Unknown Author"),fe(A,"href",t.href)},[i]),T(y,E)};H(f,y=>{r()==="list"?y(v):y(p,!1)})}T(e,u),ae()}function Dm(){return wr("/api/pages/home",jp,"getHomePagePayload")}function Zm(e,t,r){const n=new URL("/api/pages/sitemap",window.location.origin);return n.searchParams.set("view",e),n.searchParams.set("letter",t),n.searchParams.set("page",String(r)),wr(`${n.pathname}${n.search}`,qp,"getSitemapPayload")}var jm=D('<a class="rounded-full border border-gray-300 px-4 py-2 text-sm font-medium shadow-sm transition-all duration-200 hover:shadow-md text-anthracite-700 hover:text-anthracite-900 dark:border-slate-600 dark:text-slate-300 dark:hover:text-slate-100 dark:hover:border-slate-500"> </a>'),Mm=D('<p class="text-sm text-anthracite-600 dark:text-slate-300">Loading homepage sections...</p>'),qm=D('<div class="flex items-center gap-2 rounded-xl border border-red-200 bg-red-50 p-4 text-sm text-red-700 dark:border-red-900/40 dark:bg-red-950/40 dark:text-red-200"><!> </div>'),Bm=D('<div class="flex items-center gap-2 rounded-xl border border-blue-200 bg-blue-50 p-4 text-sm text-blue-700 dark:border-blue-900/40 dark:bg-blue-950/40 dark:text-blue-200"><!> No current bestsellers to display. Check back soon!</div>'),Fm=D('<div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4"></div>'),Hm=D('<div class="flex items-center gap-2 rounded-xl border border-blue-200 bg-blue-50 p-4 text-sm text-blue-700 dark:border-blue-900/40 dark:bg-blue-950/40 dark:text-blue-200"><!> No recent books to display. Start exploring to see recommendations!</div>'),Wm=D('<div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4"></div>'),Vm=D('<section class="bg-gradient-to-b from-linen-50 to-white py-16 transition-colors duration-300 dark:from-slate-900 dark:to-slate-900 md:py-24"><div class="mx-auto max-w-4xl px-4"><div class="mb-10 text-center"><h1 class="mb-4 font-heading text-4xl font-bold tracking-tight text-anthracite-900 dark:text-slate-50 md:text-5xl lg:text-6xl">Discover Your Next Great Read</h1> <p class="mx-auto max-w-2xl text-lg font-light leading-relaxed text-anthracite-600 dark:text-slate-400 md:text-xl">Curated book recommendations with a touch of elegance. Search millions of titles and find your perfect match.</p></div> <form class="mb-8"><div class="relative mx-auto max-w-2xl"><input type="text" placeholder="Search by title, author, or ISBN..." class="w-full rounded-xl border border-gray-300 bg-white px-6 py-4 pr-14 text-base shadow-soft outline-none transition-all duration-200 focus:border-transparent focus:ring-2 focus:ring-canvas-400 focus:shadow-soft-lg dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100 md:text-lg" required/> <button type="submit" class="absolute right-2 top-1/2 -translate-y-1/2 rounded-lg bg-canvas-400 px-3 py-2.5 text-white transition-all duration-200 hover:bg-canvas-500 hover:shadow-canvas focus:outline-none focus:ring-2 focus:ring-canvas-500 focus:ring-offset-2 md:px-5" aria-label="Search"><!></button></div></form> <div class="text-center"><p class="mb-3 text-sm font-medium uppercase tracking-wider text-anthracite-600 dark:text-slate-400">Popular Genres</p> <div class="flex flex-wrap justify-center gap-2"></div></div></div></section> <section class="mx-auto max-w-6xl px-4 py-12 md:px-6 md:py-16"><!> <div class="mb-12 space-y-6"><div class="flex items-center justify-between"><h2 class="font-heading text-2xl font-bold text-anthracite-900 dark:text-slate-50 md:text-3xl">NYT Bestsellers</h2> <a class="rounded-lg border border-canvas-400 px-6 py-2.5 text-sm font-medium text-canvas-600 transition-all duration-200 hover:bg-canvas-50 hover:text-canvas-700 dark:border-canvas-600 dark:text-canvas-400 dark:hover:bg-slate-700 dark:hover:text-canvas-300">View All</a></div> <!></div> <div class="space-y-6"><div class="flex items-center justify-between"><h2 class="font-heading text-2xl font-bold text-anthracite-900 dark:text-slate-50 md:text-3xl">Recent Views</h2> <a href="/search?query=explore" class="rounded-lg border border-canvas-400 px-6 py-2.5 text-sm font-medium text-canvas-600 transition-all duration-200 hover:bg-canvas-50 hover:text-canvas-700 dark:border-canvas-600 dark:text-canvas-400 dark:hover:bg-slate-700 dark:hover:text-canvas-300">Explore More</a></div> <!></div></section>',1);function Gm(e,t){ie(t,!0);let r=te(!0),n=te(null),o=te(Rt([])),i=te(Rt([])),a=te("");function s(j){return{id:j.id,slug:j.slug??j.id,title:j.title,authors:j.authors??[],coverUrl:j.cover_url??null,fallbackCoverUrl:j.fallback_cover_url??null,averageRating:j.average_rating??null,ratingsCount:j.ratings_count??null,tags:j.tags??{}}}async function c(){M(r,!0),M(n,null);try{const j=await Dm();M(o,j.currentBestsellers.map(s),!0),M(i,j.recentBooks.map(s),!0)}catch(j){M(n,j instanceof Error?j.message:"Unable to load homepage content",!0),M(o,[],!0),M(i,[],!0)}finally{M(r,!1)}}function u(j){j.preventDefault();const G=d(a).trim();G&&Dr(`/search?query=${encodeURIComponent(G)}`)}const f=[{label:"Fiction",query:"fiction"},{label:"Mystery",query:"mystery"},{label:"Science Fiction",query:"sci-fi"},{label:"Fantasy",query:"fantasy"},{label:"Biography",query:"biography"}];Kn(()=>{c()});var v=Vm(),p=V(v),y=S(p),E=O(S(y),2),I=S(E),k=S(I),N=O(k,2),b=S(N);sn(b,{size:18});var x=O(E,2),_=O(S(x),2);je(_,21,()=>f,j=>j.query,(j,G)=>{var re=jm(),ne=S(re);J(pe=>{fe(re,"href",pe),X(ne,d(G).label)},[()=>`/search?query=${encodeURIComponent(d(G).query)}`]),T(j,re)});var l=O(p,2),m=S(l);{var g=j=>{var G=Mm();T(j,G)},h=j=>{var G=Q(),re=V(G);{var ne=pe=>{var ke=qm(),me=S(ke);An(me,{size:16});var qe=O(me);J(()=>X(qe,` ${d(n)??""}`)),T(pe,ke)};H(re,pe=>{d(n)&&pe(ne)},!0)}T(j,G)};H(m,j=>{d(r)?j(g):j(h,!1)})}var w=O(m,2),R=S(w),z=O(S(R),2);fe(z,"href",`/search?query=${encodeURIComponent("new york times")}`);var B=O(R,2);{var $=j=>{var G=Bm(),re=S(G);An(re,{size:16}),T(j,G)},ee=j=>{var G=Fm();je(G,21,()=>d(o),re=>re.id,(re,ne)=>{{let pe=Re(()=>`/book/${encodeURIComponent(d(ne).slug??d(ne).id)}`);jn(re,{get book(){return d(ne)},get href(){return d(pe)}})}}),T(j,G)};H(B,j=>{!d(r)&&d(o).length===0?j($):j(ee,!1)})}var A=O(w,2),F=O(S(A),2);{var Y=j=>{var G=Hm(),re=S(G);An(re,{size:16}),T(j,G)},K=j=>{var G=Wm();je(G,21,()=>d(i),re=>re.id,(re,ne)=>{{let pe=Re(()=>`/book/${encodeURIComponent(d(ne).slug??d(ne).id)}`);jn(re,{get book(){return d(ne)},get href(){return d(pe)},showStats:!0})}}),T(j,G)};H(F,j=>{!d(r)&&d(i).length===0?j(Y):j(K,!1)})}Vn("submit",E,u),Xn(k,()=>d(a),j=>M(a,j)),T(e,v),ae()}const Xm=6,vo=new Map;function Km(e){const t=new URL("/api/books/search",window.location.origin);return t.searchParams.set("query",e.query),t.searchParams.set("startIndex",String(e.startIndex)),t.searchParams.set("maxResults",String(e.maxResults)),t.searchParams.set("orderBy",e.orderBy),t.searchParams.set("coverSource",e.coverSource),t.searchParams.set("resolution",e.resolution),e.publishedYear!=null&&t.searchParams.set("publishedYear",String(e.publishedYear)),`${t.pathname}${t.search}`}function za(e){const t=Km(e),r=vo.get(t);if(r)return r;const n=wr(t,Dp,"searchBooks").finally(()=>{vo.delete(t)});return vo.set(t,n),n}function Jm(e){return wr(`/api/books/${encodeURIComponent(e)}`,Vi,`getBook:${e}`)}function Ym(e,t=Xm){return wr(`/api/books/${encodeURIComponent(e)}/similar?limit=${t}`,Zp,`getSimilarBooks:${e}`)}function Qm(e){return wr(`/api/pages/book/${encodeURIComponent(e)}/affiliate-links`,Bp,`getAffiliateLinks:${e}`)}function eg(e){return e.map(t=>({id:null,name:t}))}function Ua(e){return!!(e.cover?.preferredUrl||e.cover?.externalImageUrl||e.cover?.s3ImagePath||e.cover?.fallbackUrl)}function La(e){return e?e.trim().toUpperCase():null}function tg(e){const t=La(e.source);if(t)return t;const r=La(e.cover?.source);if(r)return r;const o=(e.cover?.preferredUrl??e.cover?.externalImageUrl??e.cover?.fallbackUrl??null)?.toLowerCase()??"";return o.includes("covers.openlibrary.org")?"OPEN_LIBRARY":o.includes("googleusercontent.com")||o.includes("books.google")?"GOOGLE_BOOKS":(e.cover?.s3ImagePath,"POSTGRES")}function Da(e){const t=tg(e);return t==="POSTGRES"?0:t==="OPEN_LIBRARY"||t==="OPEN_LIBRARY_API"?1:t==="GOOGLE_BOOKS"||t==="GOOGLE_BOOKS_API"||t==="GOOGLE_API"?2:3}function rg(e){return e.map((t,r)=>({hit:t,index:r})).sort((t,r)=>{const n=Number(Ua(r.hit))-Number(Ua(t.hit));if(n!==0)return n;const o=Da(t.hit)-Da(r.hit);return o!==0?o:t.index-r.index}).map(t=>t.hit)}function ng(e){return{s3ImagePath:e.s3ImagePath??null,externalImageUrl:e.externalImageUrl??null,width:null,height:null,highResolution:null,preferredUrl:e.preferredUrl??null,fallbackUrl:e.fallbackUrl??null,source:e.source??null}}function og(e){const t=Wi(Vp,e,"realtimeSearchHit");if(!t.success)return console.warn("Dropped unparseable realtime search hit",e),null;const r=t.data,n=r.publishedDate??null;return{id:r.id,slug:r.slug??r.id,title:r.title??"Untitled",source:r.source??null,description:r.description??null,publication:{publishedDate:n,language:r.language??null,pageCount:r.pageCount??null,publisher:r.publisher??null},authors:eg(r.authors),categories:r.categories,collections:[],tags:[],cover:ng(r.cover??{}),editions:[],recommendationIds:[],extras:{},matchType:r.matchType??null,relevanceScore:r.relevanceScore??null}}function ig(e){return e.map(og).filter(t=>t!==null)}function ag(e,t){const r=new Map(e.map(n=>[n.id,n]));for(const n of t)r.has(n.id)||r.set(n.id,n);return rg(Array.from(r.values()))}var L=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Yr={exports:{}},lg=Yr.exports,Za;function cg(){return Za||(Za=1,(function(e,t){(function(r,n){n(t)})(lg,(function(r){function n(_,l){_.terminate=function(){const m=()=>{};this.onerror=m,this.onmessage=m,this.onopen=m;const g=new Date,h=Math.random().toString().substring(2,8),w=this.onclose;this.onclose=R=>{const z=new Date().getTime()-g.getTime();l(`Discarded socket (#${h})  closed after ${z}ms, with code/reason: ${R.code}/${R.reason}`)},this.close(),w?.call(_,{code:4001,reason:`Quick discarding socket (#${h}) without waiting for the shutdown sequence.`,wasClean:!1})}}const o={LF:`
`,NULL:"\0"};class i{get body(){return!this._body&&this.isBinaryBody&&(this._body=new TextDecoder().decode(this._binaryBody)),this._body||""}get binaryBody(){return!this._binaryBody&&!this.isBinaryBody&&(this._binaryBody=new TextEncoder().encode(this._body)),this._binaryBody}constructor(l){const{command:m,headers:g,body:h,binaryBody:w,escapeHeaderValues:R,skipContentLengthHeader:z}=l;this.command=m,this.headers=Object.assign({},g||{}),w?(this._binaryBody=w,this.isBinaryBody=!0):(this._body=h||"",this.isBinaryBody=!1),this.escapeHeaderValues=R||!1,this.skipContentLengthHeader=z||!1}static fromRawFrame(l,m){const g={},h=w=>w.replace(/^\s+|\s+$/g,"");for(const w of l.headers.reverse()){w.indexOf(":");const R=h(w[0]);let z=h(w[1]);m&&l.command!=="CONNECT"&&l.command!=="CONNECTED"&&(z=i.hdrValueUnEscape(z)),g[R]=z}return new i({command:l.command,headers:g,binaryBody:l.binaryBody,escapeHeaderValues:m})}toString(){return this.serializeCmdAndHeaders()}serialize(){const l=this.serializeCmdAndHeaders();return this.isBinaryBody?i.toUnit8Array(l,this._binaryBody).buffer:l+this._body+o.NULL}serializeCmdAndHeaders(){const l=[this.command];this.skipContentLengthHeader&&delete this.headers["content-length"];for(const m of Object.keys(this.headers||{})){const g=this.headers[m];this.escapeHeaderValues&&this.command!=="CONNECT"&&this.command!=="CONNECTED"?l.push(`${m}:${i.hdrValueEscape(`${g}`)}`):l.push(`${m}:${g}`)}return(this.isBinaryBody||!this.isBodyEmpty()&&!this.skipContentLengthHeader)&&l.push(`content-length:${this.bodyLength()}`),l.join(o.LF)+o.LF+o.LF}isBodyEmpty(){return this.bodyLength()===0}bodyLength(){const l=this.binaryBody;return l?l.length:0}static sizeOfUTF8(l){return l?new TextEncoder().encode(l).length:0}static toUnit8Array(l,m){const g=new TextEncoder().encode(l),h=new Uint8Array([0]),w=new Uint8Array(g.length+m.length+h.length);return w.set(g),w.set(m,g.length),w.set(h,g.length+m.length),w}static marshall(l){return new i(l).serialize()}static hdrValueEscape(l){return l.replace(/\\/g,"\\\\").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/:/g,"\\c")}static hdrValueUnEscape(l){return l.replace(/\\r/g,"\r").replace(/\\n/g,`
`).replace(/\\c/g,":").replace(/\\\\/g,"\\")}}const a=0,s=10,c=13,u=58;class f{constructor(l,m){this.onFrame=l,this.onIncomingPing=m,this._encoder=new TextEncoder,this._decoder=new TextDecoder,this._token=[],this._initState()}parseChunk(l,m=!1){let g;if(typeof l=="string"?g=this._encoder.encode(l):g=new Uint8Array(l),m&&g[g.length-1]!==0){const h=new Uint8Array(g.length+1);h.set(g,0),h[g.length]=0,g=h}for(let h=0;h<g.length;h++){const w=g[h];this._onByte(w)}}_collectFrame(l){if(l!==a&&l!==c){if(l===s){this.onIncomingPing();return}this._onByte=this._collectCommand,this._reinjectByte(l)}}_collectCommand(l){if(l!==c){if(l===s){this._results.command=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaders;return}this._consumeByte(l)}}_collectHeaders(l){if(l!==c){if(l===s){this._setupCollectBody();return}this._onByte=this._collectHeaderKey,this._reinjectByte(l)}}_reinjectByte(l){this._onByte(l)}_collectHeaderKey(l){if(l===u){this._headerKey=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaderValue;return}this._consumeByte(l)}_collectHeaderValue(l){if(l!==c){if(l===s){this._results.headers.push([this._headerKey,this._consumeTokenAsUTF8()]),this._headerKey=void 0,this._onByte=this._collectHeaders;return}this._consumeByte(l)}}_setupCollectBody(){const l=this._results.headers.filter(m=>m[0]==="content-length")[0];l?(this._bodyBytesRemaining=parseInt(l[1],10),this._onByte=this._collectBodyFixedSize):this._onByte=this._collectBodyNullTerminated}_collectBodyNullTerminated(l){if(l===a){this._retrievedBody();return}this._consumeByte(l)}_collectBodyFixedSize(l){if(this._bodyBytesRemaining--===0){this._retrievedBody();return}this._consumeByte(l)}_retrievedBody(){this._results.binaryBody=this._consumeTokenAsRaw();try{this.onFrame(this._results)}catch(l){console.log("Ignoring an exception thrown by a frame handler. Original exception: ",l)}this._initState()}_consumeByte(l){this._token.push(l)}_consumeTokenAsUTF8(){return this._decoder.decode(this._consumeTokenAsRaw())}_consumeTokenAsRaw(){const l=new Uint8Array(this._token);return this._token=[],l}_initState(){this._results={command:void 0,headers:[],binaryBody:void 0},this._token=[],this._headerKey=void 0,this._onByte=this._collectFrame}}r.StompSocketState=void 0,(function(_){_[_.CONNECTING=0]="CONNECTING",_[_.OPEN=1]="OPEN",_[_.CLOSING=2]="CLOSING",_[_.CLOSED=3]="CLOSED"})(r.StompSocketState||(r.StompSocketState={})),r.ActivationState=void 0,(function(_){_[_.ACTIVE=0]="ACTIVE",_[_.DEACTIVATING=1]="DEACTIVATING",_[_.INACTIVE=2]="INACTIVE"})(r.ActivationState||(r.ActivationState={})),r.ReconnectionTimeMode=void 0,(function(_){_[_.LINEAR=0]="LINEAR",_[_.EXPONENTIAL=1]="EXPONENTIAL"})(r.ReconnectionTimeMode||(r.ReconnectionTimeMode={})),r.TickerStrategy=void 0,(function(_){_.Interval="interval",_.Worker="worker"})(r.TickerStrategy||(r.TickerStrategy={}));class v{constructor(l,m=r.TickerStrategy.Interval,g){this._interval=l,this._strategy=m,this._debug=g,this._workerScript=`
    var startTime = Date.now();
    setInterval(function() {
        self.postMessage(Date.now() - startTime);
    }, ${this._interval});
  `}start(l){this.stop(),this.shouldUseWorker()?this.runWorker(l):this.runInterval(l)}stop(){this.disposeWorker(),this.disposeInterval()}shouldUseWorker(){return typeof Worker<"u"&&this._strategy===r.TickerStrategy.Worker}runWorker(l){this._debug("Using runWorker for outgoing pings"),this._worker||(this._worker=new Worker(URL.createObjectURL(new Blob([this._workerScript],{type:"text/javascript"}))),this._worker.onmessage=m=>l(m.data))}runInterval(l){if(this._debug("Using runInterval for outgoing pings"),!this._timer){const m=Date.now();this._timer=setInterval(()=>{l(Date.now()-m)},this._interval)}}disposeWorker(){this._worker&&(this._worker.terminate(),delete this._worker,this._debug("Outgoing ping disposeWorker"))}disposeInterval(){this._timer&&(clearInterval(this._timer),delete this._timer,this._debug("Outgoing ping disposeInterval"))}}class p{constructor(l){this.versions=l}supportedVersions(){return this.versions.join(",")}protocolVersions(){return this.versions.map(l=>`v${l.replace(".","")}.stomp`)}}p.V1_0="1.0",p.V1_1="1.1",p.V1_2="1.2",p.default=new p([p.V1_2,p.V1_1,p.V1_0]);class y{get connectedVersion(){return this._connectedVersion}get connected(){return this._connected}constructor(l,m,g){this._client=l,this._webSocket=m,this._connected=!1,this._serverFrameHandlers={CONNECTED:h=>{this.debug(`connected to server ${h.headers.server}`),this._connected=!0,this._connectedVersion=h.headers.version,this._connectedVersion===p.V1_2&&(this._escapeHeaderValues=!0),this._setupHeartbeat(h.headers),this.onConnect(h)},MESSAGE:h=>{const w=h.headers.subscription,R=this._subscriptions[w]||this.onUnhandledMessage,z=h,B=this,$=this._connectedVersion===p.V1_2?z.headers.ack:z.headers["message-id"];z.ack=(ee={})=>B.ack($,w,ee),z.nack=(ee={})=>B.nack($,w,ee),R(z)},RECEIPT:h=>{const w=this._receiptWatchers[h.headers["receipt-id"]];w?(w(h),delete this._receiptWatchers[h.headers["receipt-id"]]):this.onUnhandledReceipt(h)},ERROR:h=>{this.onStompError(h)}},this._counter=0,this._subscriptions={},this._receiptWatchers={},this._partialData="",this._escapeHeaderValues=!1,this._lastServerActivityTS=Date.now(),this.debug=g.debug,this.stompVersions=g.stompVersions,this.connectHeaders=g.connectHeaders,this.disconnectHeaders=g.disconnectHeaders,this.heartbeatIncoming=g.heartbeatIncoming,this.heartbeatToleranceMultiplier=g.heartbeatGracePeriods,this.heartbeatOutgoing=g.heartbeatOutgoing,this.splitLargeFrames=g.splitLargeFrames,this.maxWebSocketChunkSize=g.maxWebSocketChunkSize,this.forceBinaryWSFrames=g.forceBinaryWSFrames,this.logRawCommunication=g.logRawCommunication,this.appendMissingNULLonIncoming=g.appendMissingNULLonIncoming,this.discardWebsocketOnCommFailure=g.discardWebsocketOnCommFailure,this.onConnect=g.onConnect,this.onDisconnect=g.onDisconnect,this.onStompError=g.onStompError,this.onWebSocketClose=g.onWebSocketClose,this.onWebSocketError=g.onWebSocketError,this.onUnhandledMessage=g.onUnhandledMessage,this.onUnhandledReceipt=g.onUnhandledReceipt,this.onUnhandledFrame=g.onUnhandledFrame,this.onHeartbeatReceived=g.onHeartbeatReceived,this.onHeartbeatLost=g.onHeartbeatLost}start(){const l=new f(g=>{const h=i.fromRawFrame(g,this._escapeHeaderValues);this.logRawCommunication||this.debug(`<<< ${h}`),(this._serverFrameHandlers[h.command]||this.onUnhandledFrame)(h)},()=>{this.debug("<<< PONG"),this.onHeartbeatReceived()});this._webSocket.onmessage=g=>{if(this.debug("Received data"),this._lastServerActivityTS=Date.now(),this.logRawCommunication){const h=g.data instanceof ArrayBuffer?new TextDecoder().decode(g.data):g.data;this.debug(`<<< ${h}`)}l.parseChunk(g.data,this.appendMissingNULLonIncoming)},this._webSocket.onclose=g=>{this.debug(`Connection closed to ${this._webSocket.url}`),this._cleanUp(),this.onWebSocketClose(g)},this._webSocket.onerror=g=>{this.onWebSocketError(g)};const m=()=>{const g=Object.assign({},this.connectHeaders);this.debug("Web Socket Opened..."),g["accept-version"]=this.stompVersions.supportedVersions(),g["heart-beat"]=[this.heartbeatOutgoing,this.heartbeatIncoming].join(","),this._transmit({command:"CONNECT",headers:g})};this._webSocket.readyState===r.StompSocketState.OPEN?m():this._webSocket.onopen=m}_setupHeartbeat(l){if(l.version!==p.V1_1&&l.version!==p.V1_2||!l["heart-beat"])return;const[m,g]=l["heart-beat"].split(",").map(h=>parseInt(h,10));if(this.heartbeatOutgoing!==0&&g!==0){const h=Math.max(this.heartbeatOutgoing,g);this.debug(`send PING every ${h}ms`),this._pinger=new v(h,this._client.heartbeatStrategy,this.debug),this._pinger.start(()=>{this._webSocket.readyState===r.StompSocketState.OPEN&&(this._webSocket.send(o.LF),this.debug(">>> PING"))})}if(this.heartbeatIncoming!==0&&m!==0){const h=Math.max(this.heartbeatIncoming,m);this.debug(`check PONG every ${h}ms`),this._ponger=setInterval(()=>{const w=Date.now()-this._lastServerActivityTS;w>h*this.heartbeatToleranceMultiplier&&(this.debug(`did not receive server activity for the last ${w}ms`),this.onHeartbeatLost(),this._closeOrDiscardWebsocket())},h)}}_closeOrDiscardWebsocket(){this.discardWebsocketOnCommFailure?(this.debug("Discarding websocket, the underlying socket may linger for a while"),this.discardWebsocket()):(this.debug("Issuing close on the websocket"),this._closeWebsocket())}forceDisconnect(){this._webSocket&&(this._webSocket.readyState===r.StompSocketState.CONNECTING||this._webSocket.readyState===r.StompSocketState.OPEN)&&this._closeOrDiscardWebsocket()}_closeWebsocket(){this._webSocket.onmessage=()=>{},this._webSocket.close()}discardWebsocket(){typeof this._webSocket.terminate!="function"&&n(this._webSocket,l=>this.debug(l)),this._webSocket.terminate()}_transmit(l){const{command:m,headers:g,body:h,binaryBody:w,skipContentLengthHeader:R}=l,z=new i({command:m,headers:g,body:h,binaryBody:w,escapeHeaderValues:this._escapeHeaderValues,skipContentLengthHeader:R});let B=z.serialize();if(this.logRawCommunication?this.debug(`>>> ${B}`):this.debug(`>>> ${z}`),this.forceBinaryWSFrames&&typeof B=="string"&&(B=new TextEncoder().encode(B)),typeof B!="string"||!this.splitLargeFrames)this._webSocket.send(B);else{let $=B;for(;$.length>0;){const ee=$.substring(0,this.maxWebSocketChunkSize);$=$.substring(this.maxWebSocketChunkSize),this._webSocket.send(ee),this.debug(`chunk sent = ${ee.length}, remaining = ${$.length}`)}}}dispose(){if(this.connected)try{const l=Object.assign({},this.disconnectHeaders);l.receipt||(l.receipt=`close-${this._counter++}`),this.watchForReceipt(l.receipt,m=>{this._closeWebsocket(),this._cleanUp(),this.onDisconnect(m)}),this._transmit({command:"DISCONNECT",headers:l})}catch(l){this.debug(`Ignoring error during disconnect ${l}`)}else(this._webSocket.readyState===r.StompSocketState.CONNECTING||this._webSocket.readyState===r.StompSocketState.OPEN)&&this._closeWebsocket()}_cleanUp(){this._connected=!1,this._pinger&&(this._pinger.stop(),this._pinger=void 0),this._ponger&&(clearInterval(this._ponger),this._ponger=void 0)}publish(l){const{destination:m,headers:g,body:h,binaryBody:w,skipContentLengthHeader:R}=l,z=Object.assign({destination:m},g);this._transmit({command:"SEND",headers:z,body:h,binaryBody:w,skipContentLengthHeader:R})}watchForReceipt(l,m){this._receiptWatchers[l]=m}subscribe(l,m,g={}){g=Object.assign({},g),g.id||(g.id=`sub-${this._counter++}`),g.destination=l,this._subscriptions[g.id]=m,this._transmit({command:"SUBSCRIBE",headers:g});const h=this;return{id:g.id,unsubscribe(w){return h.unsubscribe(g.id,w)}}}unsubscribe(l,m={}){m=Object.assign({},m),delete this._subscriptions[l],m.id=l,this._transmit({command:"UNSUBSCRIBE",headers:m})}begin(l){const m=l||`tx-${this._counter++}`;this._transmit({command:"BEGIN",headers:{transaction:m}});const g=this;return{id:m,commit(){g.commit(m)},abort(){g.abort(m)}}}commit(l){this._transmit({command:"COMMIT",headers:{transaction:l}})}abort(l){this._transmit({command:"ABORT",headers:{transaction:l}})}ack(l,m,g={}){g=Object.assign({},g),this._connectedVersion===p.V1_2?g.id=l:g["message-id"]=l,g.subscription=m,this._transmit({command:"ACK",headers:g})}nack(l,m,g={}){return g=Object.assign({},g),this._connectedVersion===p.V1_2?g.id=l:g["message-id"]=l,g.subscription=m,this._transmit({command:"NACK",headers:g})}}class E{get webSocket(){return this._stompHandler?._webSocket}get disconnectHeaders(){return this._disconnectHeaders}set disconnectHeaders(l){this._disconnectHeaders=l,this._stompHandler&&(this._stompHandler.disconnectHeaders=this._disconnectHeaders)}get connected(){return!!this._stompHandler&&this._stompHandler.connected}get connectedVersion(){return this._stompHandler?this._stompHandler.connectedVersion:void 0}get active(){return this.state===r.ActivationState.ACTIVE}_changeState(l){this.state=l,this.onChangeState(l)}constructor(l={}){this.stompVersions=p.default,this.connectionTimeout=0,this.reconnectDelay=5e3,this._nextReconnectDelay=0,this.maxReconnectDelay=900*1e3,this.reconnectTimeMode=r.ReconnectionTimeMode.LINEAR,this.heartbeatIncoming=1e4,this.heartbeatToleranceMultiplier=2,this.heartbeatOutgoing=1e4,this.heartbeatStrategy=r.TickerStrategy.Interval,this.splitLargeFrames=!1,this.maxWebSocketChunkSize=8*1024,this.forceBinaryWSFrames=!1,this.appendMissingNULLonIncoming=!1,this.discardWebsocketOnCommFailure=!1,this.state=r.ActivationState.INACTIVE;const m=()=>{};this.debug=m,this.beforeConnect=m,this.onConnect=m,this.onDisconnect=m,this.onUnhandledMessage=m,this.onUnhandledReceipt=m,this.onUnhandledFrame=m,this.onHeartbeatReceived=m,this.onHeartbeatLost=m,this.onStompError=m,this.onWebSocketClose=m,this.onWebSocketError=m,this.logRawCommunication=!1,this.onChangeState=m,this.connectHeaders={},this._disconnectHeaders={},this.configure(l)}configure(l){Object.assign(this,l),this.maxReconnectDelay>0&&this.maxReconnectDelay<this.reconnectDelay&&(this.debug(`Warning: maxReconnectDelay (${this.maxReconnectDelay}ms) is less than reconnectDelay (${this.reconnectDelay}ms). Using reconnectDelay as the maxReconnectDelay delay.`),this.maxReconnectDelay=this.reconnectDelay)}activate(){const l=()=>{if(this.active){this.debug("Already ACTIVE, ignoring request to activate");return}this._changeState(r.ActivationState.ACTIVE),this._nextReconnectDelay=this.reconnectDelay,this._connect()};this.state===r.ActivationState.DEACTIVATING?(this.debug("Waiting for deactivation to finish before activating"),this.deactivate().then(()=>{l()})):l()}async _connect(){if(await this.beforeConnect(this),this._stompHandler){this.debug("There is already a stompHandler, skipping the call to connect");return}if(!this.active){this.debug("Client has been marked inactive, will not attempt to connect");return}this.connectionTimeout>0&&(this._connectionWatcher&&clearTimeout(this._connectionWatcher),this._connectionWatcher=setTimeout(()=>{this.connected||(this.debug(`Connection not established in ${this.connectionTimeout}ms, closing socket`),this.forceDisconnect())},this.connectionTimeout)),this.debug("Opening Web Socket...");const l=this._createWebSocket();this._stompHandler=new y(this,l,{debug:this.debug,stompVersions:this.stompVersions,connectHeaders:this.connectHeaders,disconnectHeaders:this._disconnectHeaders,heartbeatIncoming:this.heartbeatIncoming,heartbeatGracePeriods:this.heartbeatToleranceMultiplier,heartbeatOutgoing:this.heartbeatOutgoing,heartbeatStrategy:this.heartbeatStrategy,splitLargeFrames:this.splitLargeFrames,maxWebSocketChunkSize:this.maxWebSocketChunkSize,forceBinaryWSFrames:this.forceBinaryWSFrames,logRawCommunication:this.logRawCommunication,appendMissingNULLonIncoming:this.appendMissingNULLonIncoming,discardWebsocketOnCommFailure:this.discardWebsocketOnCommFailure,onConnect:m=>{if(this._connectionWatcher&&(clearTimeout(this._connectionWatcher),this._connectionWatcher=void 0),this._nextReconnectDelay=this.reconnectDelay,!this.active){this.debug("STOMP got connected while deactivate was issued, will disconnect now"),this._disposeStompHandler();return}this.onConnect(m)},onDisconnect:m=>{this.onDisconnect(m)},onStompError:m=>{this.onStompError(m)},onWebSocketClose:m=>{this._stompHandler=void 0,this.state===r.ActivationState.DEACTIVATING&&this._changeState(r.ActivationState.INACTIVE),this.onWebSocketClose(m),this.active&&this._schedule_reconnect()},onWebSocketError:m=>{this.onWebSocketError(m)},onUnhandledMessage:m=>{this.onUnhandledMessage(m)},onUnhandledReceipt:m=>{this.onUnhandledReceipt(m)},onUnhandledFrame:m=>{this.onUnhandledFrame(m)},onHeartbeatReceived:()=>{this.onHeartbeatReceived()},onHeartbeatLost:()=>{this.onHeartbeatLost()}}),this._stompHandler.start()}_createWebSocket(){let l;if(this.webSocketFactory)l=this.webSocketFactory();else if(this.brokerURL)l=new WebSocket(this.brokerURL,this.stompVersions.protocolVersions());else throw new Error("Either brokerURL or webSocketFactory must be provided");return l.binaryType="arraybuffer",l}_schedule_reconnect(){this._nextReconnectDelay>0&&(this.debug(`STOMP: scheduling reconnection in ${this._nextReconnectDelay}ms`),this._reconnector=setTimeout(()=>{this.reconnectTimeMode===r.ReconnectionTimeMode.EXPONENTIAL&&(this._nextReconnectDelay=this._nextReconnectDelay*2,this.maxReconnectDelay!==0&&(this._nextReconnectDelay=Math.min(this._nextReconnectDelay,this.maxReconnectDelay))),this._connect()},this._nextReconnectDelay))}async deactivate(l={}){const m=l.force||!1,g=this.active;let h;if(this.state===r.ActivationState.INACTIVE)return this.debug("Already INACTIVE, nothing more to do"),Promise.resolve();if(this._changeState(r.ActivationState.DEACTIVATING),this._nextReconnectDelay=0,this._reconnector&&(clearTimeout(this._reconnector),this._reconnector=void 0),this._stompHandler&&this.webSocket.readyState!==r.StompSocketState.CLOSED){const w=this._stompHandler.onWebSocketClose;h=new Promise((R,z)=>{this._stompHandler.onWebSocketClose=B=>{w(B),R()}})}else return this._changeState(r.ActivationState.INACTIVE),Promise.resolve();return m?this._stompHandler?.discardWebsocket():g&&this._disposeStompHandler(),h}forceDisconnect(){this._stompHandler&&this._stompHandler.forceDisconnect()}_disposeStompHandler(){this._stompHandler&&this._stompHandler.dispose()}publish(l){this._checkConnection(),this._stompHandler.publish(l)}_checkConnection(){if(!this.connected)throw new TypeError("There is no underlying STOMP connection")}watchForReceipt(l,m){this._checkConnection(),this._stompHandler.watchForReceipt(l,m)}subscribe(l,m,g={}){return this._checkConnection(),this._stompHandler.subscribe(l,m,g)}unsubscribe(l,m={}){this._checkConnection(),this._stompHandler.unsubscribe(l,m)}begin(l){return this._checkConnection(),this._stompHandler.begin(l)}commit(l){this._checkConnection(),this._stompHandler.commit(l)}abort(l){this._checkConnection(),this._stompHandler.abort(l)}ack(l,m,g={}){this._checkConnection(),this._stompHandler.ack(l,m,g)}nack(l,m,g={}){this._checkConnection(),this._stompHandler.nack(l,m,g)}}class I{}class k{}class N{constructor(l){this.client=l}get outgoing(){return this.client.heartbeatOutgoing}set outgoing(l){this.client.heartbeatOutgoing=l}get incoming(){return this.client.heartbeatIncoming}set incoming(l){this.client.heartbeatIncoming=l}}class b extends E{constructor(l){super(),this.maxWebSocketFrameSize=16*1024,this._heartbeatInfo=new N(this),this.reconnect_delay=0,this.webSocketFactory=l,this.debug=(...m)=>{console.log(...m)}}_parseConnect(...l){let m,g,h,w={};if(l.length<2)throw new Error("Connect requires at least 2 arguments");return typeof l[1]=="function"?[w,g,h,m]=l:l.length===6?[w.login,w.passcode,g,h,m,w.host]=l:[w.login,w.passcode,g,h,m]=l,[w,g,h,m]}connect(...l){const m=this._parseConnect(...l);m[0]&&(this.connectHeaders=m[0]),m[1]&&(this.onConnect=m[1]),m[2]&&(this.onStompError=m[2]),m[3]&&(this.onWebSocketClose=m[3]),super.activate()}disconnect(l,m={}){l&&(this.onDisconnect=l),this.disconnectHeaders=m,super.deactivate()}send(l,m={},g=""){m=Object.assign({},m);const h=m["content-length"]===!1;h&&delete m["content-length"],this.publish({destination:l,headers:m,body:g,skipContentLengthHeader:h})}set reconnect_delay(l){this.reconnectDelay=l}get ws(){return this.webSocket}get version(){return this.connectedVersion}get onreceive(){return this.onUnhandledMessage}set onreceive(l){this.onUnhandledMessage=l}get onreceipt(){return this.onUnhandledReceipt}set onreceipt(l){this.onUnhandledReceipt=l}get heartbeat(){return this._heartbeatInfo}set heartbeat(l){this.heartbeatIncoming=l.incoming,this.heartbeatOutgoing=l.outgoing}}class x{static client(l,m){m==null&&(m=p.default.protocolVersions());const g=()=>{const h=x.WebSocketClass||WebSocket;return new h(l,m)};return new b(g)}static over(l){let m;return typeof l=="function"?m=l:(console.warn("Stomp.over did not receive a factory, auto reconnect will not work. Please see https://stomp-js.github.io/api-docs/latest/classes/Stomp.html#over"),m=()=>l),new b(m)}}x.WebSocketClass=null,r.Client=E,r.CompatClient=b,r.FrameImpl=i,r.Parser=f,r.Stomp=x,r.StompConfig=I,r.StompHeaders=k,r.Versions=p}))})(Yr,Yr.exports)),Yr.exports}var ug=cg(),po={exports:{}},Tn={},ja;function dg(){return ja||(ja=1,L.crypto&&L.crypto.getRandomValues?Tn.randomBytes=function(e){var t=new Uint8Array(e);return L.crypto.getRandomValues(t),t}:Tn.randomBytes=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=Math.floor(Math.random()*256);return t}),Tn}var mo,Ma;function jr(){if(Ma)return mo;Ma=1;var e=dg(),t="abcdefghijklmnopqrstuvwxyz012345";return mo={string:function(r){for(var n=t.length,o=e.randomBytes(r),i=[],a=0;a<r;a++)i.push(t.substr(o[a]%n,1));return i.join("")},number:function(r){return Math.floor(Math.random()*r)},numberString:function(r){var n=(""+(r-1)).length,o=new Array(n+1).join("0");return(o+this.number(r)).slice(-n)}},mo}var qa;function ar(){return qa||(qa=1,(function(e){var t=jr(),r={},n=!1,o=L.chrome&&L.chrome.app&&L.chrome.app.runtime;e.exports={attachEvent:function(a,s){typeof L.addEventListener<"u"?L.addEventListener(a,s,!1):L.document&&L.attachEvent&&(L.document.attachEvent("on"+a,s),L.attachEvent("on"+a,s))},detachEvent:function(a,s){typeof L.addEventListener<"u"?L.removeEventListener(a,s,!1):L.document&&L.detachEvent&&(L.document.detachEvent("on"+a,s),L.detachEvent("on"+a,s))},unloadAdd:function(a){if(o)return null;var s=t.string(8);return r[s]=a,n&&setTimeout(this.triggerUnloadCallbacks,0),s},unloadDel:function(a){a in r&&delete r[a]},triggerUnloadCallbacks:function(){for(var a in r)r[a](),delete r[a]}};var i=function(){n||(n=!0,e.exports.triggerUnloadCallbacks())};o||e.exports.attachEvent("unload",i)})(po)),po.exports}var go,Ba;function fg(){return Ba||(Ba=1,go=function(t,r){if(r=r.split(":")[0],t=+t,!t)return!1;switch(r){case"http":case"ws":return t!==80;case"https":case"wss":return t!==443;case"ftp":return t!==21;case"gopher":return t!==70;case"file":return!1}return t!==0}),go}var Rn={},Fa;function hg(){if(Fa)return Rn;Fa=1;var e=Object.prototype.hasOwnProperty,t;function r(a){try{return decodeURIComponent(a.replace(/\+/g," "))}catch{return null}}function n(a){try{return encodeURIComponent(a)}catch{return null}}function o(a){for(var s=/([^=?#&]+)=?([^&]*)/g,c={},u;u=s.exec(a);){var f=r(u[1]),v=r(u[2]);f===null||v===null||f in c||(c[f]=v)}return c}function i(a,s){s=s||"";var c=[],u,f;typeof s!="string"&&(s="?");for(f in a)if(e.call(a,f)){if(u=a[f],!u&&(u===null||u===t||isNaN(u))&&(u=""),f=n(f),u=n(u),f===null||u===null)continue;c.push(f+"="+u)}return c.length?s+c.join("&"):""}return Rn.stringify=i,Rn.parse=o,Rn}var _o,Ha;function Sc(){if(Ha)return _o;Ha=1;var e=fg(),t=hg(),r=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,n=/[\n\r\t]/g,o=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,i=/:\d+$/,a=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,s=/^[a-zA-Z]:/;function c(b){return(b||"").toString().replace(r,"")}var u=[["#","hash"],["?","query"],function(x,_){return p(_.protocol)?x.replace(/\\/g,"/"):x},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],f={hash:1,query:1};function v(b){var x;typeof window<"u"?x=window:typeof L<"u"?x=L:typeof self<"u"?x=self:x={};var _=x.location||{};b=b||_;var l={},m=typeof b,g;if(b.protocol==="blob:")l=new I(unescape(b.pathname),{});else if(m==="string"){l=new I(b,{});for(g in f)delete l[g]}else if(m==="object"){for(g in b)g in f||(l[g]=b[g]);l.slashes===void 0&&(l.slashes=o.test(b.href))}return l}function p(b){return b==="file:"||b==="ftp:"||b==="http:"||b==="https:"||b==="ws:"||b==="wss:"}function y(b,x){b=c(b),b=b.replace(n,""),x=x||{};var _=a.exec(b),l=_[1]?_[1].toLowerCase():"",m=!!_[2],g=!!_[3],h=0,w;return m?g?(w=_[2]+_[3]+_[4],h=_[2].length+_[3].length):(w=_[2]+_[4],h=_[2].length):g?(w=_[3]+_[4],h=_[3].length):w=_[4],l==="file:"?h>=2&&(w=w.slice(2)):p(l)?w=_[4]:l?m&&(w=w.slice(2)):h>=2&&p(x.protocol)&&(w=_[4]),{protocol:l,slashes:m||p(l),slashesCount:h,rest:w}}function E(b,x){if(b==="")return x;for(var _=(x||"/").split("/").slice(0,-1).concat(b.split("/")),l=_.length,m=_[l-1],g=!1,h=0;l--;)_[l]==="."?_.splice(l,1):_[l]===".."?(_.splice(l,1),h++):h&&(l===0&&(g=!0),_.splice(l,1),h--);return g&&_.unshift(""),(m==="."||m==="..")&&_.push(""),_.join("/")}function I(b,x,_){if(b=c(b),b=b.replace(n,""),!(this instanceof I))return new I(b,x,_);var l,m,g,h,w,R,z=u.slice(),B=typeof x,$=this,ee=0;for(B!=="object"&&B!=="string"&&(_=x,x=null),_&&typeof _!="function"&&(_=t.parse),x=v(x),m=y(b||"",x),l=!m.protocol&&!m.slashes,$.slashes=m.slashes||l&&x.slashes,$.protocol=m.protocol||x.protocol||"",b=m.rest,(m.protocol==="file:"&&(m.slashesCount!==2||s.test(b))||!m.slashes&&(m.protocol||m.slashesCount<2||!p($.protocol)))&&(z[3]=[/(.*)/,"pathname"]);ee<z.length;ee++){if(h=z[ee],typeof h=="function"){b=h(b,$);continue}g=h[0],R=h[1],g!==g?$[R]=b:typeof g=="string"?(w=g==="@"?b.lastIndexOf(g):b.indexOf(g),~w&&(typeof h[2]=="number"?($[R]=b.slice(0,w),b=b.slice(w+h[2])):($[R]=b.slice(w),b=b.slice(0,w)))):(w=g.exec(b))&&($[R]=w[1],b=b.slice(0,w.index)),$[R]=$[R]||l&&h[3]&&x[R]||"",h[4]&&($[R]=$[R].toLowerCase())}_&&($.query=_($.query)),l&&x.slashes&&$.pathname.charAt(0)!=="/"&&($.pathname!==""||x.pathname!=="")&&($.pathname=E($.pathname,x.pathname)),$.pathname.charAt(0)!=="/"&&p($.protocol)&&($.pathname="/"+$.pathname),e($.port,$.protocol)||($.host=$.hostname,$.port=""),$.username=$.password="",$.auth&&(w=$.auth.indexOf(":"),~w?($.username=$.auth.slice(0,w),$.username=encodeURIComponent(decodeURIComponent($.username)),$.password=$.auth.slice(w+1),$.password=encodeURIComponent(decodeURIComponent($.password))):$.username=encodeURIComponent(decodeURIComponent($.auth)),$.auth=$.password?$.username+":"+$.password:$.username),$.origin=$.protocol!=="file:"&&p($.protocol)&&$.host?$.protocol+"//"+$.host:"null",$.href=$.toString()}function k(b,x,_){var l=this;switch(b){case"query":typeof x=="string"&&x.length&&(x=(_||t.parse)(x)),l[b]=x;break;case"port":l[b]=x,e(x,l.protocol)?x&&(l.host=l.hostname+":"+x):(l.host=l.hostname,l[b]="");break;case"hostname":l[b]=x,l.port&&(x+=":"+l.port),l.host=x;break;case"host":l[b]=x,i.test(x)?(x=x.split(":"),l.port=x.pop(),l.hostname=x.join(":")):(l.hostname=x,l.port="");break;case"protocol":l.protocol=x.toLowerCase(),l.slashes=!_;break;case"pathname":case"hash":if(x){var m=b==="pathname"?"/":"#";l[b]=x.charAt(0)!==m?m+x:x}else l[b]=x;break;case"username":case"password":l[b]=encodeURIComponent(x);break;case"auth":var g=x.indexOf(":");~g?(l.username=x.slice(0,g),l.username=encodeURIComponent(decodeURIComponent(l.username)),l.password=x.slice(g+1),l.password=encodeURIComponent(decodeURIComponent(l.password))):l.username=encodeURIComponent(decodeURIComponent(x))}for(var h=0;h<u.length;h++){var w=u[h];w[4]&&(l[w[1]]=l[w[1]].toLowerCase())}return l.auth=l.password?l.username+":"+l.password:l.username,l.origin=l.protocol!=="file:"&&p(l.protocol)&&l.host?l.protocol+"//"+l.host:"null",l.href=l.toString(),l}function N(b){(!b||typeof b!="function")&&(b=t.stringify);var x,_=this,l=_.host,m=_.protocol;m&&m.charAt(m.length-1)!==":"&&(m+=":");var g=m+(_.protocol&&_.slashes||p(_.protocol)?"//":"");return _.username?(g+=_.username,_.password&&(g+=":"+_.password),g+="@"):_.password?(g+=":"+_.password,g+="@"):_.protocol!=="file:"&&p(_.protocol)&&!l&&_.pathname!=="/"&&(g+="@"),(l[l.length-1]===":"||i.test(_.hostname)&&!_.port)&&(l+=":"),g+=l+_.pathname,x=typeof _.query=="object"?b(_.query):_.query,x&&(g+=x.charAt(0)!=="?"?"?"+x:x),_.hash&&(g+=_.hash),g}return I.prototype={set:k,toString:N},I.extractProtocol=y,I.location=v,I.trimLeft=c,I.qs=t,_o=I,_o}var bo,Wa;function St(){if(Wa)return bo;Wa=1;var e=Sc();return bo={getOrigin:function(t){if(!t)return null;var r=new e(t);if(r.protocol==="file:")return null;var n=r.port;return n||(n=r.protocol==="https:"?"443":"80"),r.protocol+"//"+r.hostname+":"+n},isOriginEqual:function(t,r){var n=this.getOrigin(t)===this.getOrigin(r);return n},isSchemeEqual:function(t,r){return t.split(":")[0]===r.split(":")[0]},addPath:function(t,r){var n=t.split("?");return n[0]+r+(n[1]?"?"+n[1]:"")},addQuery:function(t,r){return t+(t.indexOf("?")===-1?"?"+r:"&"+r)},isLoopbackAddr:function(t){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(t)||/^\[::1\]$/.test(t)}},bo}var Cn={exports:{}},Va;function ue(){return Va||(Va=1,typeof Object.create=="function"?Cn.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:Cn.exports=function(t,r){if(r){t.super_=r;var n=function(){};n.prototype=r.prototype,t.prototype=new n,t.prototype.constructor=t}}),Cn.exports}var yo={},wo,Ga;function Ec(){if(Ga)return wo;Ga=1;function e(){this._listeners={}}return e.prototype.addEventListener=function(t,r){t in this._listeners||(this._listeners[t]=[]);var n=this._listeners[t];n.indexOf(r)===-1&&(n=n.concat([r])),this._listeners[t]=n},e.prototype.removeEventListener=function(t,r){var n=this._listeners[t];if(n){var o=n.indexOf(r);if(o!==-1){n.length>1?this._listeners[t]=n.slice(0,o).concat(n.slice(o+1)):delete this._listeners[t];return}}},e.prototype.dispatchEvent=function(){var t=arguments[0],r=t.type,n=arguments.length===1?[t]:Array.apply(null,arguments);if(this["on"+r]&&this["on"+r].apply(this,n),r in this._listeners)for(var o=this._listeners[r],i=0;i<o.length;i++)o[i].apply(this,n)},wo=e,wo}var Xa;function et(){if(Xa)return yo;Xa=1;var e=ue(),t=Ec();function r(){t.call(this)}return e(r,t),r.prototype.removeAllListeners=function(n){n?delete this._listeners[n]:this._listeners={}},r.prototype.once=function(n,o){var i=this,a=!1;function s(){i.removeListener(n,s),a||(a=!0,o.apply(this,arguments))}this.on(n,s)},r.prototype.emit=function(){var n=arguments[0],o=this._listeners[n];if(o){for(var i=arguments.length,a=new Array(i-1),s=1;s<i;s++)a[s-1]=arguments[s];for(var c=0;c<o.length;c++)o[c].apply(this,a)}},r.prototype.on=r.prototype.addListener=t.prototype.addEventListener,r.prototype.removeListener=t.prototype.removeEventListener,yo.EventEmitter=r,yo}var Nn={exports:{}},Ka;function vg(){if(Ka)return Nn.exports;Ka=1;var e=L.WebSocket||L.MozWebSocket;return e?Nn.exports=function(r){return new e(r)}:Nn.exports=void 0,Nn.exports}var xo,Ja;function pg(){if(Ja)return xo;Ja=1;var e=ar(),t=St(),r=ue(),n=et().EventEmitter,o=vg(),i=function(){};function a(s,c,u){if(!a.enabled())throw new Error("Transport created when disabled");n.call(this);var f=this,v=t.addPath(s,"/websocket");v.slice(0,5)==="https"?v="wss"+v.slice(5):v="ws"+v.slice(4),this.url=v,this.ws=new o(this.url,[],u),this.ws.onmessage=function(p){i("message event",p.data),f.emit("message",p.data)},this.unloadRef=e.unloadAdd(function(){f.ws.close()}),this.ws.onclose=function(p){i("close event",p.code,p.reason),f.emit("close",p.code,p.reason),f._cleanup()},this.ws.onerror=function(p){f.emit("close",1006,"WebSocket connection broken"),f._cleanup()}}return r(a,n),a.prototype.send=function(s){var c="["+s+"]";this.ws.send(c)},a.prototype.close=function(){var s=this.ws;this._cleanup(),s&&s.close()},a.prototype._cleanup=function(){var s=this.ws;s&&(s.onmessage=s.onclose=s.onerror=null),e.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},a.enabled=function(){return!!o},a.transportName="websocket",a.roundTrips=2,xo=a,xo}var ko,Ya;function mg(){if(Ya)return ko;Ya=1;var e=ue(),t=et().EventEmitter,r=function(){};function n(o,i){t.call(this),this.sendBuffer=[],this.sender=i,this.url=o}return e(n,t),n.prototype.send=function(o){this.sendBuffer.push(o),this.sendStop||this.sendSchedule()},n.prototype.sendScheduleWait=function(){var o=this,i;this.sendStop=function(){o.sendStop=null,clearTimeout(i)},i=setTimeout(function(){o.sendStop=null,o.sendSchedule()},25)},n.prototype.sendSchedule=function(){r("sendSchedule",this.sendBuffer.length);var o=this;if(this.sendBuffer.length>0){var i="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,i,function(a){o.sendStop=null,a?(o.emit("close",a.code||1006,"Sending error: "+a),o.close()):o.sendScheduleWait()}),this.sendBuffer=[]}},n.prototype._cleanup=function(){this.removeAllListeners()},n.prototype.close=function(){this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},ko=n,ko}var So,Qa;function gg(){if(Qa)return So;Qa=1;var e=ue(),t=et().EventEmitter,r=function(){};function n(o,i,a){t.call(this),this.Receiver=o,this.receiveUrl=i,this.AjaxObject=a,this._scheduleReceiver()}return e(n,t),n.prototype._scheduleReceiver=function(){var o=this,i=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);i.on("message",function(a){o.emit("message",a)}),i.once("close",function(a,s){r("close",a,s,o.pollIsClosing),o.poll=i=null,o.pollIsClosing||(s==="network"?o._scheduleReceiver():(o.emit("close",a||1006,s),o.removeAllListeners()))})},n.prototype.abort=function(){this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},So=n,So}var Eo,es;function Ic(){if(es)return Eo;es=1;var e=ue(),t=St(),r=mg(),n=gg();function o(i,a,s,c,u){var f=t.addPath(i,a),v=this;r.call(this,i,s),this.poll=new n(c,f,u),this.poll.on("message",function(p){v.emit("message",p)}),this.poll.once("close",function(p,y){v.poll=null,v.emit("close",p,y),v.close()})}return e(o,r),o.prototype.close=function(){r.prototype.close.call(this),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)},Eo=o,Eo}var Io,ts;function Mr(){if(ts)return Io;ts=1;var e=ue(),t=St(),r=Ic();function n(i){return function(a,s,c){var u={};typeof s=="string"&&(u.headers={"Content-type":"text/plain"});var f=t.addPath(a,"/xhr_send"),v=new i("POST",f,s,u);return v.once("finish",function(p){if(v=null,p!==200&&p!==204)return c(new Error("http status "+p));c()}),function(){v.close(),v=null;var p=new Error("Aborted");p.code=1e3,c(p)}}}function o(i,a,s,c){r.call(this,i,a,n(c),s,c)}return e(o,r),Io=o,Io}var To,rs;function ro(){if(rs)return To;rs=1;var e=ue(),t=et().EventEmitter;function r(n,o){t.call(this);var i=this;this.bufferPosition=0,this.xo=new o("POST",n,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(a,s){i._chunkHandler(a,s),i.xo=null;var c=a===200?"network":"permanent";i.emit("close",null,c),i._cleanup()})}return e(r,t),r.prototype._chunkHandler=function(n,o){if(!(n!==200||!o))for(var i=-1;;this.bufferPosition+=i+1){var a=o.slice(this.bufferPosition);if(i=a.indexOf(`
`),i===-1)break;var s=a.slice(0,i);s&&this.emit("message",s)}},r.prototype._cleanup=function(){this.removeAllListeners()},r.prototype.abort=function(){this.xo&&(this.xo.close(),this.emit("close",null,"user"),this.xo=null),this._cleanup()},To=r,To}var Ro,ns;function Tc(){if(ns)return Ro;ns=1;var e=et().EventEmitter,t=ue(),r=ar(),n=St(),o=L.XMLHttpRequest,i=function(){};function a(u,f,v,p){var y=this;e.call(this),setTimeout(function(){y._start(u,f,v,p)},0)}t(a,e),a.prototype._start=function(u,f,v,p){var y=this;try{this.xhr=new o}catch{}if(!this.xhr){this.emit("finish",0,"no xhr support"),this._cleanup();return}f=n.addQuery(f,"t="+ +new Date),this.unloadRef=r.unloadAdd(function(){y._cleanup(!0)});try{this.xhr.open(u,f,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){i("xhr timeout"),y.emit("finish",0,""),y._cleanup(!1)})}catch{this.emit("finish",0,""),this._cleanup(!1);return}if((!p||!p.noCredentials)&&a.supportsCORS&&(this.xhr.withCredentials=!0),p&&p.headers)for(var E in p.headers)this.xhr.setRequestHeader(E,p.headers[E]);this.xhr.onreadystatechange=function(){if(y.xhr){var I=y.xhr,k,N;switch(i("readyState",I.readyState),I.readyState){case 3:try{N=I.status,k=I.responseText}catch{}N===1223&&(N=204),N===200&&k&&k.length>0&&y.emit("chunk",N,k);break;case 4:N=I.status,N===1223&&(N=204),(N===12005||N===12029)&&(N=0),i("finish",N,I.responseText),y.emit("finish",N,I.responseText),y._cleanup(!1);break}}};try{y.xhr.send(v)}catch{y.emit("finish",0,""),y._cleanup(!1)}},a.prototype._cleanup=function(u){if(this.xhr){if(this.removeAllListeners(),r.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),u)try{this.xhr.abort()}catch{}this.unloadRef=this.xhr=null}},a.prototype.close=function(){this._cleanup(!0)},a.enabled=!!o;var s=["Active"].concat("Object").join("X");!a.enabled&&s in L&&(o=function(){try{return new L[s]("Microsoft.XMLHTTP")}catch{return null}},a.enabled=!!new o);var c=!1;try{c="withCredentials"in new o}catch{}return a.supportsCORS=c,Ro=a,Ro}var Co,os;function no(){if(os)return Co;os=1;var e=ue(),t=Tc();function r(n,o,i,a){t.call(this,n,o,i,a)}return e(r,t),r.enabled=t.enabled&&t.supportsCORS,Co=r,Co}var No,is;function hn(){if(is)return No;is=1;var e=ue(),t=Tc();function r(n,o,i){t.call(this,n,o,i,{noCredentials:!0})}return e(r,t),r.enabled=t.enabled,No=r,No}var Oo,as;function vn(){return as||(as=1,Oo={isOpera:function(){return L.navigator&&/opera/i.test(L.navigator.userAgent)},isKonqueror:function(){return L.navigator&&/konqueror/i.test(L.navigator.userAgent)},hasDomain:function(){if(!L.document)return!0;try{return!!L.document.domain}catch{return!1}}}),Oo}var $o,ss;function _g(){if(ss)return $o;ss=1;var e=ue(),t=Mr(),r=ro(),n=no(),o=hn(),i=vn();function a(s){if(!o.enabled&&!n.enabled)throw new Error("Transport created when disabled");t.call(this,s,"/xhr_streaming",r,n)}return e(a,t),a.enabled=function(s){return s.nullOrigin||i.isOpera()?!1:n.enabled},a.transportName="xhr-streaming",a.roundTrips=2,a.needBody=!!L.document,$o=a,$o}var Ao,ls;function Xi(){if(ls)return Ao;ls=1;var e=et().EventEmitter,t=ue(),r=ar(),n=vn(),o=St(),i=function(){};function a(s,c,u){var f=this;e.call(this),setTimeout(function(){f._start(s,c,u)},0)}return t(a,e),a.prototype._start=function(s,c,u){var f=this,v=new L.XDomainRequest;c=o.addQuery(c,"t="+ +new Date),v.onerror=function(){f._error()},v.ontimeout=function(){f._error()},v.onprogress=function(){i("progress",v.responseText),f.emit("chunk",200,v.responseText)},v.onload=function(){f.emit("finish",200,v.responseText),f._cleanup(!1)},this.xdr=v,this.unloadRef=r.unloadAdd(function(){f._cleanup(!0)});try{this.xdr.open(s,c),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(u)}catch{this._error()}},a.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},a.prototype._cleanup=function(s){if(this.xdr){if(this.removeAllListeners(),r.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,s)try{this.xdr.abort()}catch{}this.unloadRef=this.xdr=null}},a.prototype.close=function(){this._cleanup(!0)},a.enabled=!!(L.XDomainRequest&&n.hasDomain()),Ao=a,Ao}var Po,cs;function Rc(){if(cs)return Po;cs=1;var e=ue(),t=Mr(),r=ro(),n=Xi();function o(i){if(!n.enabled)throw new Error("Transport created when disabled");t.call(this,i,"/xhr_streaming",r,n)}return e(o,t),o.enabled=function(i){return i.cookie_needed||i.nullOrigin?!1:n.enabled&&i.sameScheme},o.transportName="xdr-streaming",o.roundTrips=2,Po=o,Po}var zo,us;function Cc(){return us||(us=1,zo=L.EventSource),zo}var Uo,ds;function bg(){if(ds)return Uo;ds=1;var e=ue(),t=et().EventEmitter,r=Cc(),n=function(){};function o(i){t.call(this);var a=this,s=this.es=new r(i);s.onmessage=function(c){n("message",c.data),a.emit("message",decodeURI(c.data))},s.onerror=function(c){n("error",s.readyState);var u=s.readyState!==2?"network":"permanent";a._cleanup(),a._close(u)}}return e(o,t),o.prototype.abort=function(){this._cleanup(),this._close("user")},o.prototype._cleanup=function(){var i=this.es;i&&(i.onmessage=i.onerror=null,i.close(),this.es=null)},o.prototype._close=function(i){var a=this;setTimeout(function(){a.emit("close",null,i),a.removeAllListeners()},200)},Uo=o,Uo}var Lo,fs;function hs(){if(fs)return Lo;fs=1;var e=ue(),t=Mr(),r=bg(),n=no(),o=Cc();function i(a){if(!i.enabled())throw new Error("Transport created when disabled");t.call(this,a,"/eventsource",r,n)}return e(i,t),i.enabled=function(){return!!o},i.transportName="eventsource",i.roundTrips=2,Lo=i,Lo}var Do,vs;function Nc(){return vs||(vs=1,Do="1.6.1"),Do}var Zo={exports:{}},ps;function pn(){return ps||(ps=1,(function(e){var t=ar(),r=vn();e.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){e.exports.WPrefix in L||(L[e.exports.WPrefix]={})},postMessage:function(n,o){L.parent!==L&&L.parent.postMessage(JSON.stringify({windowId:e.exports.currentWindowId,type:n,data:o||""}),"*")},createIframe:function(n,o){var i=L.document.createElement("iframe"),a,s,c=function(){clearTimeout(a);try{i.onload=null}catch{}i.onerror=null},u=function(){i&&(c(),setTimeout(function(){i&&i.parentNode.removeChild(i),i=null},0),t.unloadDel(s))},f=function(p){i&&(u(),o(p))},v=function(p,y){setTimeout(function(){try{i&&i.contentWindow&&i.contentWindow.postMessage(p,y)}catch{}},0)};return i.src=n,i.style.display="none",i.style.position="absolute",i.onerror=function(){f("onerror")},i.onload=function(){clearTimeout(a),a=setTimeout(function(){f("onload timeout")},2e3)},L.document.body.appendChild(i),a=setTimeout(function(){f("timeout")},15e3),s=t.unloadAdd(u),{post:v,cleanup:u,loaded:c}},createHtmlfile:function(n,o){var i=["Active"].concat("Object").join("X"),a=new L[i]("htmlfile"),s,c,u,f=function(){clearTimeout(s),u.onerror=null},v=function(){a&&(f(),t.unloadDel(c),u.parentNode.removeChild(u),u=a=null,CollectGarbage())},p=function(I){a&&(v(),o(I))},y=function(I,k){try{setTimeout(function(){u&&u.contentWindow&&u.contentWindow.postMessage(I,k)},0)}catch{}};a.open(),a.write('<html><script>document.domain="'+L.document.domain+'";<\/script></html>'),a.close(),a.parentWindow[e.exports.WPrefix]=L[e.exports.WPrefix];var E=a.createElement("div");return a.body.appendChild(E),u=a.createElement("iframe"),E.appendChild(u),u.src=n,u.onerror=function(){p("onerror")},s=setTimeout(function(){p("timeout")},15e3),c=t.unloadAdd(v),{post:y,cleanup:v,loaded:f}}},e.exports.iframeEnabled=!1,L.document&&(e.exports.iframeEnabled=(typeof L.postMessage=="function"||typeof L.postMessage=="object")&&!r.isKonqueror())})(Zo)),Zo.exports}var jo,ms;function Oc(){if(ms)return jo;ms=1;var e=ue(),t=et().EventEmitter,r=Nc(),n=St(),o=pn(),i=ar(),a=jr(),s=function(){};function c(u,f,v){if(!c.enabled())throw new Error("Transport created when disabled");t.call(this);var p=this;this.origin=n.getOrigin(v),this.baseUrl=v,this.transUrl=f,this.transport=u,this.windowId=a.string(8);var y=n.addPath(v,"/iframe.html")+"#"+this.windowId;this.iframeObj=o.createIframe(y,function(E){p.emit("close",1006,"Unable to load an iframe ("+E+")"),p.close()}),this.onmessageCallback=this._message.bind(this),i.attachEvent("message",this.onmessageCallback)}return e(c,t),c.prototype.close=function(){if(this.removeAllListeners(),this.iframeObj){i.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch{}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},c.prototype._message=function(u){if(s("message",u.data),!n.isOriginEqual(u.origin,this.origin)){s("not same origin",u.origin,this.origin);return}var f;try{f=JSON.parse(u.data)}catch{s("bad json",u.data);return}if(f.windowId!==this.windowId){s("mismatched window id",f.windowId,this.windowId);return}switch(f.type){case"s":this.iframeObj.loaded(),this.postMessage("s",JSON.stringify([r,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",f.data);break;case"c":var v;try{v=JSON.parse(f.data)}catch{s("bad json",f.data);return}this.emit("close",v[0],v[1]),this.close();break}},c.prototype.postMessage=function(u,f){this.iframeObj.post(JSON.stringify({windowId:this.windowId,type:u,data:f||""}),this.origin)},c.prototype.send=function(u){this.postMessage("m",u)},c.enabled=function(){return o.iframeEnabled},c.transportName="iframe",c.roundTrips=2,jo=c,jo}var Mo,gs;function Ki(){return gs||(gs=1,Mo={isObject:function(e){var t=typeof e;return t==="function"||t==="object"&&!!e},extend:function(e){if(!this.isObject(e))return e;for(var t,r,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}}),Mo}var qo,_s;function Bo(){if(_s)return qo;_s=1;var e=ue(),t=Oc(),r=Ki();return qo=function(n){function o(i,a){t.call(this,n.transportName,i,a)}return e(o,t),o.enabled=function(i,a){if(!L.document)return!1;var s=r.extend({},a);return s.sameOrigin=!0,n.enabled(s)&&t.enabled()},o.transportName="iframe-"+n.transportName,o.needBody=!0,o.roundTrips=t.roundTrips+n.roundTrips-1,o.facadeTransport=n,o},qo}var Fo,bs;function yg(){if(bs)return Fo;bs=1;var e=ue(),t=pn(),r=St(),n=et().EventEmitter,o=jr(),i=function(){};function a(c){n.call(this);var u=this;t.polluteGlobalNamespace(),this.id="a"+o.string(6),c=r.addQuery(c,"c="+decodeURIComponent(t.WPrefix+"."+this.id)),i("using htmlfile",a.htmlfileEnabled);var f=a.htmlfileEnabled?t.createHtmlfile:t.createIframe;L[t.WPrefix][this.id]={start:function(){u.iframeObj.loaded()},message:function(v){u.emit("message",v)},stop:function(){u._cleanup(),u._close("network")}},this.iframeObj=f(c,function(){u._cleanup(),u._close("permanent")})}e(a,n),a.prototype.abort=function(){this._cleanup(),this._close("user")},a.prototype._cleanup=function(){this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete L[t.WPrefix][this.id]},a.prototype._close=function(c){this.emit("close",null,c),this.removeAllListeners()},a.htmlfileEnabled=!1;var s=["Active"].concat("Object").join("X");if(s in L)try{a.htmlfileEnabled=!!new L[s]("htmlfile")}catch{}return a.enabled=a.htmlfileEnabled||t.iframeEnabled,Fo=a,Fo}var Ho,ys;function ws(){if(ys)return Ho;ys=1;var e=ue(),t=yg(),r=hn(),n=Mr();function o(i){if(!t.enabled)throw new Error("Transport created when disabled");n.call(this,i,"/htmlfile",t,r)}return e(o,n),o.enabled=function(i){return t.enabled&&i.sameOrigin},o.transportName="htmlfile",o.roundTrips=2,Ho=o,Ho}var Wo,xs;function ks(){if(xs)return Wo;xs=1;var e=ue(),t=Mr(),r=ro(),n=no(),o=hn();function i(a){if(!o.enabled&&!n.enabled)throw new Error("Transport created when disabled");t.call(this,a,"/xhr",r,n)}return e(i,t),i.enabled=function(a){return a.nullOrigin?!1:o.enabled&&a.sameOrigin?!0:n.enabled},i.transportName="xhr-polling",i.roundTrips=2,Wo=i,Wo}var Vo,Ss;function wg(){if(Ss)return Vo;Ss=1;var e=ue(),t=Mr(),r=Rc(),n=ro(),o=Xi();function i(a){if(!o.enabled)throw new Error("Transport created when disabled");t.call(this,a,"/xhr",n,o)}return e(i,t),i.enabled=r.enabled,i.transportName="xdr-polling",i.roundTrips=2,Vo=i,Vo}var Go,Es;function xg(){if(Es)return Go;Es=1;var e=pn(),t=jr(),r=vn(),n=St(),o=ue(),i=et().EventEmitter,a=function(){};function s(c){var u=this;i.call(this),e.polluteGlobalNamespace(),this.id="a"+t.string(6);var f=n.addQuery(c,"c="+encodeURIComponent(e.WPrefix+"."+this.id));L[e.WPrefix][this.id]=this._callback.bind(this),this._createScript(f),this.timeoutId=setTimeout(function(){u._abort(new Error("JSONP script loaded abnormally (timeout)"))},s.timeout)}return o(s,i),s.prototype.abort=function(){if(L[e.WPrefix][this.id]){var c=new Error("JSONP user aborted read");c.code=1e3,this._abort(c)}},s.timeout=35e3,s.scriptErrorTimeout=1e3,s.prototype._callback=function(c){this._cleanup(),!this.aborting&&(c&&this.emit("message",c),this.emit("close",null,"network"),this.removeAllListeners())},s.prototype._abort=function(c){this._cleanup(),this.aborting=!0,this.emit("close",c.code,c.message),this.removeAllListeners()},s.prototype._cleanup=function(){if(clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var c=this.script;c.parentNode.removeChild(c),c.onreadystatechange=c.onerror=c.onload=c.onclick=null,this.script=null}delete L[e.WPrefix][this.id]},s.prototype._scriptError=function(){var c=this;this.errorTimer||(this.errorTimer=setTimeout(function(){c.loadedOkay||c._abort(new Error("JSONP script loaded abnormally (onerror)"))},s.scriptErrorTimeout))},s.prototype._createScript=function(c){var u=this,f=this.script=L.document.createElement("script"),v;if(f.id="a"+t.string(8),f.src=c,f.type="text/javascript",f.charset="UTF-8",f.onerror=this._scriptError.bind(this),f.onload=function(){u._abort(new Error("JSONP script loaded abnormally (onload)"))},f.onreadystatechange=function(){if(a("onreadystatechange",f.readyState),/loaded|closed/.test(f.readyState)){if(f&&f.htmlFor&&f.onclick){u.loadedOkay=!0;try{f.onclick()}catch{}}f&&u._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},typeof f.async>"u"&&L.document.attachEvent)if(r.isOpera())v=this.script2=L.document.createElement("script"),v.text="try{var a = document.getElementById('"+f.id+"'); if(a)a.onerror();}catch(x){};",f.async=v.async=!1;else{try{f.htmlFor=f.id,f.event="onclick"}catch{}f.async=!0}typeof f.async<"u"&&(f.async=!0);var p=L.document.getElementsByTagName("head")[0];p.insertBefore(f,p.firstChild),v&&p.insertBefore(v,p.firstChild)},Go=s,Go}var Xo,Is;function kg(){if(Is)return Xo;Is=1;var e=jr(),t=St(),r=function(){},n,o;function i(s){try{return L.document.createElement('<iframe name="'+s+'">')}catch{var c=L.document.createElement("iframe");return c.name=s,c}}function a(){n=L.document.createElement("form"),n.style.display="none",n.style.position="absolute",n.method="POST",n.enctype="application/x-www-form-urlencoded",n.acceptCharset="UTF-8",o=L.document.createElement("textarea"),o.name="d",n.appendChild(o),L.document.body.appendChild(n)}return Xo=function(s,c,u){n||a();var f="a"+e.string(8);n.target=f,n.action=t.addQuery(t.addPath(s,"/jsonp_send"),"i="+f);var v=i(f);v.id=f,v.style.display="none",n.appendChild(v);try{o.value=c}catch{}n.submit();var p=function(y){v.onerror&&(v.onreadystatechange=v.onerror=v.onload=null,setTimeout(function(){v.parentNode.removeChild(v),v=null},500),o.value="",u(y))};return v.onerror=function(){p()},v.onload=function(){p()},v.onreadystatechange=function(y){r("onreadystatechange",f,v.readyState),v.readyState==="complete"&&p()},function(){p(new Error("Aborted"))}},Xo}var Ko,Ts;function Sg(){if(Ts)return Ko;Ts=1;var e=ue(),t=Ic(),r=xg(),n=kg();function o(i){if(!o.enabled())throw new Error("Transport created when disabled");t.call(this,i,"/jsonp",n,r)}return e(o,t),o.enabled=function(){return!!L.document},o.transportName="jsonp-polling",o.roundTrips=1,o.needBody=!0,Ko=o,Ko}var Jo,Rs;function Eg(){return Rs||(Rs=1,Jo=[pg(),_g(),Rc(),hs(),Bo()(hs()),ws(),Bo()(ws()),ks(),wg(),Bo()(ks()),Sg()]),Jo}var Cs={},Ns;function Ig(){if(Ns)return Cs;Ns=1;var e=Array.prototype,t=Object.prototype,r=Function.prototype,n=String.prototype,o=e.slice,i=t.toString,a=function(g){return t.toString.call(g)==="[object Function]"},s=function(h){return i.call(h)==="[object Array]"},c=function(h){return i.call(h)==="[object String]"},u=Object.defineProperty&&(function(){try{return Object.defineProperty({},"x",{}),!0}catch{return!1}})(),f;u?f=function(g,h,w,R){!R&&h in g||Object.defineProperty(g,h,{configurable:!0,enumerable:!1,writable:!0,value:w})}:f=function(g,h,w,R){!R&&h in g||(g[h]=w)};var v=function(g,h,w){for(var R in h)t.hasOwnProperty.call(h,R)&&f(g,R,h[R],w)},p=function(g){if(g==null)throw new TypeError("can't convert "+g+" to object");return Object(g)};function y(g){var h=+g;return h!==h?h=0:h!==0&&h!==1/0&&h!==-1/0&&(h=(h>0||-1)*Math.floor(Math.abs(h))),h}function E(g){return g>>>0}function I(){}v(r,{bind:function(h){var w=this;if(!a(w))throw new TypeError("Function.prototype.bind called on incompatible "+w);for(var R=o.call(arguments,1),z=function(){if(this instanceof A){var F=w.apply(this,R.concat(o.call(arguments)));return Object(F)===F?F:this}else return w.apply(h,R.concat(o.call(arguments)))},B=Math.max(0,w.length-R.length),$=[],ee=0;ee<B;ee++)$.push("$"+ee);var A=Function("binder","return function ("+$.join(",")+"){ return binder.apply(this, arguments); }")(z);return w.prototype&&(I.prototype=w.prototype,A.prototype=new I,I.prototype=null),A}}),v(Array,{isArray:s});var k=Object("a"),N=k[0]!=="a"||!(0 in k),b=function(h){var w=!0,R=!0;return h&&(h.call("foo",function(z,B,$){typeof $!="object"&&(w=!1)}),h.call([1],function(){R=typeof this=="string"},"x")),!!h&&w&&R};v(e,{forEach:function(h){var w=p(this),R=N&&c(this)?this.split(""):w,z=arguments[1],B=-1,$=R.length>>>0;if(!a(h))throw new TypeError;for(;++B<$;)B in R&&h.call(z,R[B],B,w)}},!b(e.forEach));var x=Array.prototype.indexOf&&[0,1].indexOf(1,2)!==-1;v(e,{indexOf:function(h){var w=N&&c(this)?this.split(""):p(this),R=w.length>>>0;if(!R)return-1;var z=0;for(arguments.length>1&&(z=y(arguments[1])),z=z>=0?z:Math.max(0,R+z);z<R;z++)if(z in w&&w[z]===h)return z;return-1}},x);var _=n.split;"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1?(function(){var g=/()??/.exec("")[1]===void 0;n.split=function(h,w){var R=this;if(h===void 0&&w===0)return[];if(i.call(h)!=="[object RegExp]")return _.call(this,h,w);var z=[],B=(h.ignoreCase?"i":"")+(h.multiline?"m":"")+(h.extended?"x":"")+(h.sticky?"y":""),$=0,ee,A,F,Y;for(h=new RegExp(h.source,B+"g"),R+="",g||(ee=new RegExp("^"+h.source+"$(?!\\s)",B)),w=w===void 0?-1>>>0:E(w);(A=h.exec(R))&&(F=A.index+A[0].length,!(F>$&&(z.push(R.slice($,A.index)),!g&&A.length>1&&A[0].replace(ee,function(){for(var K=1;K<arguments.length-2;K++)arguments[K]===void 0&&(A[K]=void 0)}),A.length>1&&A.index<R.length&&e.push.apply(z,A.slice(1)),Y=A[0].length,$=F,z.length>=w)));)h.lastIndex===A.index&&h.lastIndex++;return $===R.length?(Y||!h.test(""))&&z.push(""):z.push(R.slice($)),z.length>w?z.slice(0,w):z}})():"0".split(void 0,0).length&&(n.split=function(h,w){return h===void 0&&w===0?[]:_.call(this,h,w)});var l=n.substr,m="".substr&&"0b".substr(-1)!=="b";return v(n,{substr:function(h,w){return l.call(this,h<0&&(h=this.length+h)<0?0:h,w)}},m),Cs}var Yo,Os;function Tg(){if(Os)return Yo;Os=1;var e=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,t,r=function(n){var o,i={},a=[];for(o=0;o<65536;o++)a.push(String.fromCharCode(o));return n.lastIndex=0,a.join("").replace(n,function(s){return i[s]="\\u"+("0000"+s.charCodeAt(0).toString(16)).slice(-4),""}),n.lastIndex=0,i};return Yo={quote:function(n){var o=JSON.stringify(n);return e.lastIndex=0,e.test(o)?(t||(t=r(e)),o.replace(e,function(i){return t[i]})):o}},Yo}var Qo,$s;function Rg(){if($s)return Qo;$s=1;var e=function(){};return Qo=function(t){return{filterToEnabled:function(r,n){var o={main:[],facade:[]};return r?typeof r=="string"&&(r=[r]):r=[],t.forEach(function(i){if(i&&!(i.transportName==="websocket"&&n.websocket===!1)){if(r.length&&r.indexOf(i.transportName)===-1){e("not in whitelist",i.transportName);return}i.enabled(n)?(e("enabled",i.transportName),o.main.push(i),i.facadeTransport&&o.facade.push(i.facadeTransport)):e("disabled",i.transportName)}}),o}}},Qo}var ei,As;function Cg(){if(As)return ei;As=1;var e={};return["log","debug","warn"].forEach(function(t){var r;try{r=L.console&&L.console[t]&&L.console[t].apply}catch{}e[t]=r?function(){return L.console[t].apply(L.console,arguments)}:t==="log"?function(){}:e.log}),ei=e,ei}var ti,Ps;function Ji(){if(Ps)return ti;Ps=1;function e(t){this.type=t}return e.prototype.initEvent=function(t,r,n){return this.type=t,this.bubbles=r,this.cancelable=n,this.timeStamp=+new Date,this},e.prototype.stopPropagation=function(){},e.prototype.preventDefault=function(){},e.CAPTURING_PHASE=1,e.AT_TARGET=2,e.BUBBLING_PHASE=3,ti=e,ti}var ri,zs;function $c(){return zs||(zs=1,ri=L.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""}),ri}var ni,Us;function Ng(){if(Us)return ni;Us=1;var e=ue(),t=Ji();function r(){t.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}return e(r,t),ni=r,ni}var oi,Ls;function Og(){if(Ls)return oi;Ls=1;var e=ue(),t=Ji();function r(n){t.call(this),this.initEvent("message",!1,!1),this.data=n}return e(r,t),oi=r,oi}var ii,Ds;function $g(){if(Ds)return ii;Ds=1;var e=et().EventEmitter,t=ue();function r(){var n=this;e.call(this),this.to=setTimeout(function(){n.emit("finish",200,"{}")},r.timeout)}return t(r,e),r.prototype.close=function(){clearTimeout(this.to)},r.timeout=2e3,ii=r,ii}var ai,Zs;function Ac(){if(Zs)return ai;Zs=1;var e=et().EventEmitter,t=ue(),r=Ki();function n(o,i){e.call(this);var a=this,s=+new Date;this.xo=new i("GET",o),this.xo.once("finish",function(c,u){var f,v;if(c===200){if(v=+new Date-s,u)try{f=JSON.parse(u)}catch{}r.isObject(f)||(f={})}a.emit("finish",f,v),a.removeAllListeners()})}return t(n,e),n.prototype.close=function(){this.removeAllListeners(),this.xo.close()},ai=n,ai}var si,js;function Pc(){if(js)return si;js=1;var e=ue(),t=et().EventEmitter,r=hn(),n=Ac();function o(i){var a=this;t.call(this),this.ir=new n(i,r),this.ir.once("finish",function(s,c){a.ir=null,a.emit("message",JSON.stringify([s,c]))})}return e(o,t),o.transportName="iframe-info-receiver",o.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},si=o,si}var li,Ms;function Ag(){if(Ms)return li;Ms=1;var e=et().EventEmitter,t=ue(),r=ar(),n=Oc(),o=Pc();function i(a,s){var c=this;e.call(this);var u=function(){var f=c.ifr=new n(o.transportName,s,a);f.once("message",function(v){if(v){var p;try{p=JSON.parse(v)}catch{c.emit("finish"),c.close();return}var y=p[0],E=p[1];c.emit("finish",y,E)}c.close()}),f.once("close",function(){c.emit("finish"),c.close()})};L.document.body?u():r.attachEvent("load",u)}return t(i,e),i.enabled=function(){return n.enabled()},i.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},li=i,li}var ci,qs;function Pg(){if(qs)return ci;qs=1;var e=et().EventEmitter,t=ue(),r=St(),n=Xi(),o=no(),i=hn(),a=$g(),s=Ag(),c=Ac();function u(f,v){var p=this;e.call(this),setTimeout(function(){p.doXhr(f,v)},0)}return t(u,e),u._getReceiver=function(f,v,p){return p.sameOrigin?new c(v,i):o.enabled?new c(v,o):n.enabled&&p.sameScheme?new c(v,n):s.enabled()?new s(f,v):new c(v,a)},u.prototype.doXhr=function(f,v){var p=this,y=r.addPath(f,"/info");this.xo=u._getReceiver(f,y,v),this.timeoutRef=setTimeout(function(){p._cleanup(!1),p.emit("finish")},u.timeout),this.xo.once("finish",function(E,I){p._cleanup(!0),p.emit("finish",E,I)})},u.prototype._cleanup=function(f){clearTimeout(this.timeoutRef),this.timeoutRef=null,!f&&this.xo&&this.xo.close(),this.xo=null},u.prototype.close=function(){this.removeAllListeners(),this._cleanup(!1)},u.timeout=8e3,ci=u,ci}var ui,Bs;function zg(){if(Bs)return ui;Bs=1;var e=pn();function t(r){this._transport=r,r.on("message",this._transportMessage.bind(this)),r.on("close",this._transportClose.bind(this))}return t.prototype._transportClose=function(r,n){e.postMessage("c",JSON.stringify([r,n]))},t.prototype._transportMessage=function(r){e.postMessage("t",r)},t.prototype._send=function(r){this._transport.send(r)},t.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},ui=t,ui}var di,Fs;function Ug(){if(Fs)return di;Fs=1;var e=St(),t=ar(),r=zg(),n=Pc(),o=pn(),i=$c(),a=function(){};return di=function(s,c){var u={};c.forEach(function(v){v.facadeTransport&&(u[v.facadeTransport.transportName]=v.facadeTransport)}),u[n.transportName]=n;var f;s.bootstrap_iframe=function(){var v;o.currentWindowId=i.hash.slice(1);var p=function(y){if(y.source===parent&&(typeof f>"u"&&(f=y.origin),y.origin===f)){var E;try{E=JSON.parse(y.data)}catch{a("bad json",y.data);return}if(E.windowId===o.currentWindowId)switch(E.type){case"s":var I;try{I=JSON.parse(E.data)}catch{a("bad json",E.data);break}var k=I[0],N=I[1],b=I[2],x=I[3];if(k!==s.version)throw new Error('Incompatible SockJS! Main site uses: "'+k+'", the iframe: "'+s.version+'".');if(!e.isOriginEqual(b,i.href)||!e.isOriginEqual(x,i.href))throw new Error("Can't connect to different domain from within an iframe. ("+i.href+", "+b+", "+x+")");v=new r(new u[N](b,x));break;case"m":v._send(E.data);break;case"c":v&&v._close(),v=null;break}}};t.attachEvent("message",p),o.postMessage("s")}},di}var fi,Hs;function Lg(){if(Hs)return fi;Hs=1,Ig();var e=Sc(),t=ue(),r=jr(),n=Tg(),o=St(),i=ar(),a=Rg(),s=Ki(),c=vn(),u=Cg(),f=Ji(),v=Ec(),p=$c(),y=Ng(),E=Og(),I=Pg(),k=function(){},N;function b(_,l,m){if(!(this instanceof b))return new b(_,l,m);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");v.call(this),this.readyState=b.CONNECTING,this.extensions="",this.protocol="",m=m||{},m.protocols_whitelist&&u.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=m.transports,this._transportOptions=m.transportOptions||{},this._timeout=m.timeout||0;var g=m.sessionId||8;if(typeof g=="function")this._generateSessionId=g;else if(typeof g=="number")this._generateSessionId=function(){return r.string(g)};else throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._server=m.server||r.numberString(1e3);var h=new e(_);if(!h.host||!h.protocol)throw new SyntaxError("The URL '"+_+"' is invalid");if(h.hash)throw new SyntaxError("The URL must not contain a fragment");if(h.protocol!=="http:"&&h.protocol!=="https:")throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+h.protocol+"' is not allowed.");var w=h.protocol==="https:";if(p.protocol==="https:"&&!w&&!o.isLoopbackAddr(h.hostname))throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");l?Array.isArray(l)||(l=[l]):l=[];var R=l.sort();R.forEach(function(B,$){if(!B)throw new SyntaxError("The protocols entry '"+B+"' is invalid.");if($<R.length-1&&B===R[$+1])throw new SyntaxError("The protocols entry '"+B+"' is duplicated.")});var z=o.getOrigin(p.href);this._origin=z?z.toLowerCase():null,h.set("pathname",h.pathname.replace(/\/+$/,"")),this.url=h.href,k("using url",this.url),this._urlInfo={nullOrigin:!c.hasDomain(),sameOrigin:o.isOriginEqual(this.url,p.href),sameScheme:o.isSchemeEqual(this.url,p.href)},this._ir=new I(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}t(b,v);function x(_){return _===1e3||_>=3e3&&_<=4999}return b.prototype.close=function(_,l){if(_&&!x(_))throw new Error("InvalidAccessError: Invalid code");if(l&&l.length>123)throw new SyntaxError("reason argument has an invalid length");if(!(this.readyState===b.CLOSING||this.readyState===b.CLOSED)){var m=!0;this._close(_||1e3,l||"Normal closure",m)}},b.prototype.send=function(_){if(typeof _!="string"&&(_=""+_),this.readyState===b.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===b.OPEN&&this._transport.send(n.quote(_))},b.version=Nc(),b.CONNECTING=0,b.OPEN=1,b.CLOSING=2,b.CLOSED=3,b.prototype._receiveInfo=function(_,l){if(this._ir=null,!_){this._close(1002,"Cannot connect to server");return}this._rto=this.countRTO(l),this._transUrl=_.base_url?_.base_url:this.url,_=s.extend(_,this._urlInfo);var m=N.filterToEnabled(this._transportsWhitelist,_);this._transports=m.main,k(this._transports.length+" enabled transports"),this._connect()},b.prototype._connect=function(){for(var _=this._transports.shift();_;_=this._transports.shift()){if(k("attempt",_.transportName),_.needBody&&(!L.document.body||typeof L.document.readyState<"u"&&L.document.readyState!=="complete"&&L.document.readyState!=="interactive")){this._transports.unshift(_),i.attachEvent("load",this._connect.bind(this));return}var l=Math.max(this._timeout,this._rto*_.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),l);var m=o.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),g=this._transportOptions[_.transportName],h=new _(m,this._transUrl,g);h.on("message",this._transportMessage.bind(this)),h.once("close",this._transportClose.bind(this)),h.transportName=_.transportName,this._transport=h;return}this._close(2e3,"All transports failed",!1)},b.prototype._transportTimeout=function(){this.readyState===b.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))},b.prototype._transportMessage=function(_){var l=this,m=_.slice(0,1),g=_.slice(1),h;switch(m){case"o":this._open();return;case"h":this.dispatchEvent(new f("heartbeat")),k("heartbeat",this.transport);return}if(g)try{h=JSON.parse(g)}catch{}if(!(typeof h>"u"))switch(m){case"a":Array.isArray(h)&&h.forEach(function(w){k("message",l.transport),l.dispatchEvent(new E(w))});break;case"m":k("message",this.transport),this.dispatchEvent(new E(h));break;case"c":Array.isArray(h)&&h.length===2&&this._close(h[0],h[1],!0);break}},b.prototype._transportClose=function(_,l){if(k("_transportClose",this.transport),this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),!x(_)&&_!==2e3&&this.readyState===b.CONNECTING){this._connect();return}this._close(_,l)},b.prototype._open=function(){k("_open",this._transport&&this._transport.transportName,this.readyState),this.readyState===b.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=b.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new f("open")),k("connected",this.transport)):this._close(1006,"Server lost session")},b.prototype._close=function(_,l,m){k("_close",this.transport,_,l,m,this.readyState);var g=!1;if(this._ir&&(g=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===b.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=b.CLOSING,setTimeout((function(){this.readyState=b.CLOSED,g&&this.dispatchEvent(new f("error"));var h=new y("close");h.wasClean=m||!1,h.code=_||1e3,h.reason=l,this.dispatchEvent(h),this.onmessage=this.onclose=this.onerror=null}).bind(this),0)},b.prototype.countRTO=function(_){return _>100?4*_:300+_},fi=function(_){return N=a(_),Ug()(b,_),b},fi}var hi,Ws;function Dg(){if(Ws)return hi;Ws=1;var e=Eg();return hi=Lg()(e),"_sockjs_onload"in L&&setTimeout(L._sockjs_onload,1),hi}var Zg=Dg();const jg=sg(Zg),Mg=5e3,qg=2e4,Bg=1e4;let Pt={status:"idle"};function Fg(){return new ug.Client({webSocketFactory:()=>new jg("/ws"),reconnectDelay:Mg,heartbeatIncoming:qg,heartbeatOutgoing:Bg})}function Ti(e,t,r){let n;try{n=JSON.parse(e)}catch(i){return console.warn(`Failed to parse ${t} payload`,i),null}const o=Wi(r,n,t);return o.success?o.data:null}async function zc(){if(Pt.status==="connected"&&Pt.client.connected)return Pt.client;if(Pt.status==="connecting")return Pt.pending;const e=new Promise((t,r)=>{const n=Fg();n.onConnect=o=>{Pt={status:"connected",client:n},t(n)},n.onStompError=o=>{Pt={status:"idle"},r(new Error(o.body||"STOMP connection failed"))},n.onWebSocketError=o=>{Pt={status:"idle"},r(new Error("WebSocket connection failed"))},n.activate()}).catch(t=>{throw Pt={status:"idle"},t});return Pt={status:"connecting",pending:e},e}async function Hg(e,t,r,n){const o=await zc(),i=o.subscribe(`/topic/search/${e}/progress`,s=>{const c=Ti(s.body,"searchProgressEvent",Fp);if(!c){n(new Error("Failed to parse search progress event"));return}t(c.message??"Searching...")}),a=o.subscribe(`/topic/search/${e}/results`,s=>{const c=Ti(s.body,"searchResultsEvent",Hp);if(!c){n(new Error("Failed to parse search results event"));return}r(c.newResults)});return()=>{i.unsubscribe(),a.unsubscribe()}}async function Wg(e,t,r){const o=(await zc()).subscribe(`/topic/book/${e}/coverUpdate`,i=>{const a=Ti(i.body,"bookCoverUpdateEvent",Wp);if(!a){r(new Error("Failed to parse book cover update event"));return}a.newCoverUrl&&t(a.newCoverUrl)});return()=>o.unsubscribe()}var Vg=D("<option> </option>"),Gg=D('<div class="flex items-center gap-2 text-sm text-anthracite-600 dark:text-slate-300"><!> Searching books...</div>'),Xg=D('<div class="flex items-center gap-2 text-xs text-canvas-700 dark:text-canvas-400"><!> </div>'),Kg=D('<p class="rounded-lg border border-red-200 bg-red-50 p-3 text-sm text-red-700 dark:border-red-900/40 dark:bg-red-950/40 dark:text-red-200"> </p>'),Jg=D('<p class="text-sm text-anthracite-600 dark:text-slate-400"> <span class="font-medium text-anthracite-900 dark:text-slate-100"> </span></p>'),Yg=D('<div class="text-center py-12"><!> <p class="text-lg font-medium text-anthracite-700 dark:text-slate-300">Search for books</p> <p class="text-sm text-anthracite-500 dark:text-slate-400">Enter a title, author, or ISBN above to find books.</p></div>'),Qg=D('<p class="text-sm text-anthracite-600 dark:text-slate-300">No results found.</p>'),e0=D('<span class="px-2 text-sm text-anthracite-400 dark:text-slate-500">&hellip;</span>'),t0=D("<button> </button>"),r0=D('<div></div> <nav class="mt-4 flex items-center justify-center gap-1"><button class="rounded-md border border-linen-300 px-3 py-1.5 text-sm transition disabled:opacity-40 dark:border-slate-600 dark:text-slate-300 hover:bg-linen-100 dark:hover:bg-slate-800" aria-label="Previous page">&laquo;</button> <!> <button class="rounded-md border border-linen-300 px-3 py-1.5 text-sm transition disabled:opacity-40 dark:border-slate-600 dark:text-slate-300 hover:bg-linen-100 dark:hover:bg-slate-800" aria-label="Next page">&raquo;</button></nav>',1),n0=D('<section class="mx-auto flex max-w-6xl flex-col gap-6 px-4 py-8 md:px-6"><form class="rounded-xl border border-linen-200 bg-white p-4 shadow-soft dark:border-slate-700 dark:bg-slate-800"><div class="flex flex-col gap-3 sm:flex-row"><div class="relative flex-1"><input class="w-full rounded-lg border border-linen-300 px-4 py-2.5 pr-12 text-sm outline-none ring-canvas-300 transition focus:ring-2 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100" placeholder="Search by title, author, ISBN" required/> <button type="submit" class="absolute right-2 top-1/2 -translate-y-1/2 rounded-md bg-canvas-400 p-1.5 text-white transition hover:bg-canvas-500" aria-label="Search"><!></button></div></div> <div class="mt-3 flex flex-wrap items-center justify-between gap-3"><div class="flex items-center gap-2"><label for="sort-select" class="text-xs font-medium text-anthracite-600 dark:text-slate-400">Sort:</label> <select id="sort-select" class="rounded-lg border border-linen-300 px-3 py-1.5 text-sm dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100"></select></div> <div class="flex items-center gap-1"><button type="button" aria-label="Grid view"><!></button> <button type="button" aria-label="List view"><!></button></div></div></form> <!> <!> <!> <!> <!> <!></section>');function vi(e,t){ie(t,!0);const r=12,n=5,o=["ANY","GOOGLE_BOOKS","OPEN_LIBRARY","LONGITOOD"],i=["ANY","HIGH_ONLY","HIGH_FIRST"],a=["relevance","title","author","newest","rating"],s={relevance:"Most Relevant",title:"Title AâZ",author:"By Author",newest:"Newest First",rating:"Highest Rated"},c=new Map;let u=null,f=te(""),v=te(1),p=te("newest"),y=te("ANY"),E=te("HIGH_FIRST"),I=te("grid"),k=te(!1),N=te(null),b=te(null),x=te(null);function _(P,Z){if(!P)return Z;const q=Number.parseInt(P,10);return!Number.isFinite(q)||q<1?Z:q}function l(){return{query:d(f),startIndex:(d(v)-1)*r,maxResults:r,orderBy:d(p),coverSource:d(y),resolution:d(E)}}function m(P){return[P.query,P.startIndex,P.maxResults,P.orderBy,P.coverSource,P.resolution].join("::")}function g(P,Z,q,se){const ve=P.get(Z)??se;return q.includes(ve)?ve:se}function h(P){const Z=P.searchParams;M(f,Z.get("query")?.trim()??"",!0),M(v,_(Z.get("page"),1),!0),M(p,g(Z,"sort",a,"newest"),!0),M(y,g(Z,"coverSource",o,"ANY"),!0),M(E,g(Z,"resolution",i,"HIGH_FIRST"),!0);const q=Z.get("view");M(I,q==="list"?"list":"grid",!0)}function w(P){if(!d(x))return;const Z=ig(P);if(Z.length===0)return;const q=ag(d(x).results,Z);M(x,{...d(x),results:q,totalResults:Math.max(d(x).totalResults,q.length)},!0)}async function R(P,Z){if(Z.hasMore)for(let q=1;q<=n;q++){const se=P.startIndex+q*r,ve={...P,startIndex:se},Xe=m(ve);if(!c.has(Xe))try{const lt=await za(ve);if(c.set(Xe,lt),!lt.hasMore)break}catch(lt){console.warn("Prefetch failed for offset",q,lt);break}}}async function z(){if(!d(f)){u&&(u(),u=null),M(x,null),M(N,null),M(b,null);return}M(k,!0),M(N,null),M(b,null);const P=l(),Z=m(P);try{const q=c.get(Z)??await za(P);c.set(Z,q),M(x,q,!0),u&&(u(),u=null),u=await Hg(q.queryHash,se=>{M(b,se,!0)},se=>{w(se)},se=>{console.error("Realtime search subscription error:",se.message),M(b,null)}),R(P,q)}catch(q){M(N,q instanceof Error?q.message:"Search request failed",!0),M(x,null)}finally{M(k,!1)}}function B(P=1){const Z=new URL("/search",window.location.origin);d(f).trim()&&Z.searchParams.set("query",d(f).trim()),Z.searchParams.set("page",String(P)),Z.searchParams.set("sort",d(p)),Z.searchParams.set("view",d(I)),Z.searchParams.set("coverSource",d(y)),Z.searchParams.set("resolution",d(E)),Dr(`${Z.pathname}${Z.search}`)}function $(P){const Z=P.authors.map(q=>q.name).filter(q=>q&&q.length>0);return{id:P.id,slug:P.slug??P.id,title:P.title??"Untitled",authors:Z,description:P.descriptionContent?.text??P.description,coverUrl:P.cover?.preferredUrl??P.cover?.s3ImagePath??P.cover?.externalImageUrl??null,fallbackCoverUrl:P.cover?.fallbackUrl??"/images/placeholder-book-cover.svg"}}function ee(P,Z,q){if(!P)return 1;const se=Math.max(1,Math.ceil(P.totalResults/q));return P.hasMore?Math.max(se,Z+1):se}function A(P,Z){if(Z<=7)return Array.from({length:Z},(Xe,lt)=>lt+1);const q=[1];P>3&&q.push("ellipsis");const se=Math.max(2,P-1),ve=Math.min(Z-1,P+1);for(let Xe=se;Xe<=ve;Xe++)q.push(Xe);return P<Z-2&&q.push("ellipsis"),q.push(Z),q}let F=Re(()=>ee(d(x),d(v),r)),Y=Re(()=>A(d(v),d(F)));cn(()=>{h(t.currentUrl),Lr(()=>{z()})}),Kn(()=>()=>{u&&u()});var K=n0(),j=S(K),G=S(j),re=S(G),ne=S(re),pe=O(ne,2),ke=S(pe);sn(ke,{size:16});var me=O(G,2),qe=S(me),Ye=O(S(qe),2);Ye.__change=()=>B(1),je(Ye,21,()=>a,Lt,(P,Z)=>{var q=Vg(),se=S(q),ve={};J(()=>{X(se,s[d(Z)]),ve!==(ve=d(Z))&&(q.value=(q.__value=d(Z))??"")}),T(P,q)});var sr=O(qe,2),at=S(sr);at.__click=()=>{M(I,"grid"),B(d(v))};var Xt=S(at);um(Xt,{size:16});var Kt=O(at,2);Kt.__click=()=>{M(I,"list"),B(d(v))};var qr=S(Kt);kc(qr,{size:16});var lr=O(j,2);{var xr=P=>{var Z=Gg(),q=S(Z);Pa(q,{size:16,class:"animate-spin"}),T(P,Z)};H(lr,P=>{d(k)&&P(xr)})}var Le=O(lr,2);{var Ge=P=>{var Z=Xg(),q=S(Z);Pa(q,{size:14,class:"animate-spin"});var se=O(q);J(()=>X(se,` ${d(b)??""}`)),T(P,Z)};H(Le,P=>{d(b)&&P(Ge)})}var Be=O(Le,2);{var pt=P=>{var Z=Kg(),q=S(Z);J(()=>X(q,d(N))),T(P,Z)};H(Be,P=>{d(N)&&P(pt)})}var mt=O(Be,2);{var $e=P=>{var Z=Jg(),q=S(Z),se=O(q),ve=S(se);J(()=>{X(q,`Showing ${d(x).results.length??""} of ${d(x).totalResults??""} results for `),X(ve,`'${d(f)??""}'`)}),T(P,Z)};H(mt,P=>{!d(k)&&d(x)&&d(f)&&P($e)})}var ze=O(mt,2);{var gt=P=>{var Z=Yg(),q=S(Z);sn(q,{size:48,class:"mx-auto mb-4 text-linen-400 dark:text-slate-600"}),T(P,Z)},Ae=P=>{var Z=Q(),q=V(Z);{var se=ve=>{var Xe=Qg();T(ve,Xe)};H(q,ve=>{!d(k)&&d(x)&&d(x).results.length===0&&ve(se)},!0)}T(P,Z)};H(ze,P=>{!d(k)&&!d(f)?P(gt):P(Ae,!1)})}var st=O(ze,2);{var tt=P=>{var Z=r0(),q=V(Z);je(q,21,()=>d(x).results,jt=>jt.id,(jt,Fe)=>{{let Mt=Re(()=>$(d(Fe))),cr=Re(()=>`/book/${encodeURIComponent(d(Fe).slug??d(Fe).id)}?query=${encodeURIComponent(d(f))}&page=${d(v)}&sort=${encodeURIComponent(d(p))}&view=${d(I)}`);jn(jt,{get layout(){return d(I)},get book(){return d(Mt)},get href(){return d(cr)}})}});var se=O(q,2),ve=S(se);ve.__click=()=>B(d(v)-1);var Xe=O(ve,2);je(Xe,17,()=>d(Y),Lt,(jt,Fe)=>{var Mt=Q(),cr=V(Mt);{var kr=Qe=>{var ct=e0();T(Qe,ct)},Br=Qe=>{var ct=t0();ct.__click=()=>B(d(Fe));var Sr=S(ct);J(()=>{ft(ct,1,`min-w-[2.25rem] rounded-md border px-2 py-1.5 text-sm transition ${d(Fe)===d(v)?"border-canvas-500 bg-canvas-500 text-white":"border-linen-300 text-anthracite-700 hover:bg-linen-100 dark:border-slate-600 dark:text-slate-300 dark:hover:bg-slate-800"}`),X(Sr,d(Fe))}),T(Qe,ct)};H(cr,Qe=>{d(Fe)==="ellipsis"?Qe(kr):Qe(Br,!1)})}T(jt,Mt)});var lt=O(Xe,2);lt.__click=()=>B(d(v)+1),J(()=>{ft(q,1,Zi(d(I)==="grid"?"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4":"grid grid-cols-1 gap-4")),ve.disabled=d(v)<=1,lt.disabled=d(v)>=d(F)}),T(P,Z)};H(st,P=>{d(x)&&d(x).results.length>0&&P(tt)})}J(()=>{ft(at,1,`rounded-md p-2 transition ${d(I)==="grid"?"bg-canvas-500 text-white":"bg-linen-100 text-anthracite-700 dark:bg-slate-700 dark:text-slate-200"}`),ft(Kt,1,`rounded-md p-2 transition ${d(I)==="list"?"bg-canvas-500 text-white":"bg-linen-100 text-anthracite-700 dark:bg-slate-700 dark:text-slate-200"}`)}),Vn("submit",j,P=>{P.preventDefault(),B(1)}),Xn(ne,()=>d(f),P=>M(f,P)),fd(Ye,()=>d(p),P=>M(p,P)),T(e,K),ae()}dn(["change","click"]);var o0=D('<p class="text-sm text-anthracite-600 dark:text-slate-300">Loading book details...</p>'),i0=D('<div class="rounded-xl border border-red-200 bg-red-50 p-4 text-sm text-red-700 dark:border-red-900/40 dark:bg-red-950/40 dark:text-red-200"> </div>'),a0=D('<div class="absolute right-3 top-3 flex items-center gap-1 rounded-lg bg-canvas-400 px-2.5 py-1 text-sm font-medium text-white shadow-sm"><!> <span> </span></div>'),s0=D('<div class="book-description-content text-sm leading-relaxed text-anthracite-700 dark:text-slate-300 svelte-1viyzig"><!></div>'),l0=D('<p class="whitespace-pre-wrap text-sm leading-relaxed text-anthracite-700 dark:text-slate-300"> </p>'),c0=D('<span class="inline-flex items-center gap-1 rounded-full bg-linen-100 px-3 py-1 text-xs font-medium text-anthracite-700 dark:bg-slate-700 dark:text-slate-200"><!> </span>'),u0=D('<div class="pointer-events-none absolute bottom-0 left-0 right-0 h-6 bg-linear-to-t from-canvas-50 to-transparent dark:from-slate-900"></div>'),d0=D('<button type="button" class="mt-2 inline-flex items-center gap-1 text-xs font-medium text-canvas-500 transition hover:text-canvas-600 dark:text-canvas-400 dark:hover:text-canvas-300"><!> </button>'),f0=D('<div class="relative"><div></div> <!> <!></div>'),h0=D('<a data-no-spa="true" target="_blank" rel="noopener sponsored"><!> </a>'),v0=D('<div class="space-y-3"><p class="text-sm font-medium text-anthracite-800 dark:text-slate-200">Buy or Preview</p> <div class="flex flex-wrap gap-2"></div></div>'),p0=D('<img alt="Edition cover" class="h-24 w-auto shrink-0 rounded-md object-contain" loading="lazy"/>'),m0=D('<p class="text-xs text-anthracite-600 dark:text-slate-300"> </p>'),g0=D('<p class="text-xs text-anthracite-500 dark:text-slate-400"> </p>'),_0=D('<article class="flex gap-3 rounded-xl border border-linen-200 bg-white p-3 dark:border-slate-700 dark:bg-slate-800"><!> <div class="flex min-w-0 flex-col gap-0.5"><p class="text-sm font-medium text-anthracite-800 dark:text-slate-100"> </p> <!> <!></div></article>'),b0=D('<section class="space-y-3"><h2 class="text-xl font-semibold text-anthracite-900 dark:text-slate-100">Editions</h2> <div class="grid grid-cols-1 gap-3 md:grid-cols-2 lg:grid-cols-3"></div></section>'),y0=D('<section class="space-y-3"><h2 class="text-xl font-semibold text-anthracite-900 dark:text-slate-100">Similar books</h2> <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3"></div></section>'),w0=D('<a class="inline-flex w-fit items-center gap-1.5 rounded-lg border border-linen-300 px-3 py-1.5 text-sm text-anthracite-700 transition hover:bg-linen-100 dark:border-slate-600 dark:text-slate-300 dark:hover:bg-slate-800"><!> Back to Results</a> <article class="overflow-hidden rounded-xl border border-linen-200 shadow-soft dark:border-slate-700"><div class="grid gap-6 p-5 md:grid-cols-[320px_1fr] md:p-8"><div class="relative flex items-center justify-center overflow-hidden rounded-xl bg-linen-50 p-6 dark:bg-slate-900"><img class="max-h-[400px] w-auto rounded-book object-contain shadow-book" loading="lazy"/> <!></div> <div class="flex flex-col gap-4"><h1 class="text-3xl font-semibold text-anthracite-900 dark:text-slate-100"> </h1> <p class="text-base text-anthracite-700 dark:text-slate-300"> </p> <dl class="grid gap-3 text-sm text-anthracite-700 dark:text-slate-300 sm:grid-cols-2"><div class="flex items-start gap-2"><!> <div><dt class="font-medium text-anthracite-800 dark:text-slate-200">Published</dt> <dd> </dd></div></div> <div class="flex items-start gap-2"><!> <div><dt class="font-medium text-anthracite-800 dark:text-slate-200">Publisher</dt> <dd> </dd></div></div> <div class="flex items-start gap-2"><!> <div><dt class="font-medium text-anthracite-800 dark:text-slate-200">Language</dt> <dd> </dd></div></div> <div class="flex items-start gap-2"><!> <div><dt class="font-medium text-anthracite-800 dark:text-slate-200">Pages</dt> <dd> </dd></div></div></dl> <!> <!> <!></div></div></article> <!> <!>',1),x0=D('<p class="text-sm text-anthracite-600 dark:text-slate-300">Book not found.</p>'),k0=D('<section class="mx-auto flex max-w-6xl flex-col gap-6 px-4 py-8 md:px-6"><!></section>');function S0(e,t){ie(t,!0);let r=te(!0),n=te(null),o=te(null),i=te(Rt([])),a=te(Rt({})),s=te(null),c=te(!1),u=null;async function f(){M(r,!0),M(n,null);try{const h=await Jm(t.identifier),[w,R]=await Promise.allSettled([Ym(t.identifier,6),Qm(t.identifier)]);M(o,h,!0),M(i,w.status==="fulfilled"?w.value:[],!0),M(a,R.status==="fulfilled"?R.value:{},!0),M(s,null),u&&(u(),u=null);const z=h.id;u=await Wg(z,B=>{M(s,B,!0)},B=>{console.error("Realtime cover update error:",B.message)})}catch(h){M(n,h instanceof Error?h.message:"Unable to load this book",!0),M(o,null),M(i,[],!0),M(a,{},!0)}finally{M(r,!1)}}function v(){return d(s)&&d(s).trim().length>0?d(s):d(o)?.cover?.preferredUrl&&d(o).cover.preferredUrl.trim().length>0?d(o).cover.preferredUrl:d(o)?.cover?.fallbackUrl&&d(o).cover.fallbackUrl.trim().length>0?d(o).cover.fallbackUrl:"/images/placeholder-book-cover.svg"}function p(){return!d(o)||d(o).authors.length===0?"Unknown author":d(o).authors.map(h=>h.name).join(", ")}function y(){if(!d(o)?.publication?.publishedDate)return"Unknown";const h=new Date(d(o).publication.publishedDate);return Number.isNaN(h.getTime())?String(d(o).publication.publishedDate):h.toLocaleDateString()}function E(h){return{id:h.id,slug:h.slug??h.id,title:h.title??"Untitled",authors:h.authors.map(w=>w.name),description:h.descriptionContent?.text??h.description,coverUrl:h.cover?.preferredUrl??h.cover?.s3ImagePath??h.cover?.externalImageUrl??null,fallbackCoverUrl:h.cover?.fallbackUrl??"/images/placeholder-book-cover.svg"}}function I(){return d(o)?.descriptionContent?.html&&d(o).descriptionContent.html.trim().length>0?d(o).descriptionContent.html:""}function k(){const h=t.currentUrl.searchParams.get("query");if(!h)return"/search";const w=new URL("/search",window.location.origin);w.searchParams.set("query",h);const R=t.currentUrl.searchParams.get("page"),z=t.currentUrl.searchParams.get("sort"),B=t.currentUrl.searchParams.get("view"),$=t.currentUrl.searchParams.get("year");return R&&w.searchParams.set("page",R),z&&w.searchParams.set("sort",z),B&&w.searchParams.set("view",B),$&&w.searchParams.set("year",$),`${w.pathname}${w.search}`}const N={amazon:{label:"Amazon",icon:hm,bgClass:"bg-canvas-400",hoverClass:"hover:bg-canvas-500"},barnesAndNoble:{label:"Barnes & Noble",icon:vm,bgClass:"bg-[#00563F]",hoverClass:"hover:bg-[#004832]"},bookshop:{label:"Bookshop.org",icon:fm,bgClass:"bg-[#4C32C0]",hoverClass:"hover:bg-[#3D28A0]"},audible:{label:"Audible",icon:cm,bgClass:"bg-[#FF9900]",hoverClass:"hover:bg-[#E68A00]"}};function b(h){return N[h]??{label:h,icon:sm,bgClass:"bg-canvas-400",hoverClass:"hover:bg-canvas-500"}}function x(){return Object.entries(d(a)).sort(([h],[w])=>h.localeCompare(w))}cn(()=>{t.identifier&&f()}),Kn(()=>()=>{u&&u()});var _=k0(),l=S(_);{var m=h=>{var w=o0();T(h,w)},g=h=>{var w=Q(),R=V(w);{var z=$=>{var ee=i0(),A=S(ee);J(()=>X(A,d(n))),T($,ee)},B=$=>{var ee=Q(),A=V(ee);{var F=K=>{var j=w0(),G=V(j),re=S(G);im(re,{size:16});var ne=O(G,2),pe=S(ne),ke=S(pe),me=S(ke),qe=O(me,2);{var Ye=de=>{var ge=a0(),De=S(ge);Ii(De,{size:12,class:"fill-current"});var Ke=O(De,2),Se=S(Ke);J(rt=>X(Se,rt),[()=>Number(d(o).extras.averageRating).toFixed(1)]),T(de,ge)};H(qe,de=>{d(o).extras?.averageRating!==void 0&&d(o).extras?.averageRating!==null&&de(Ye)})}var sr=O(ke,2),at=S(sr),Xt=S(at),Kt=O(at,2),qr=S(Kt),lr=O(Kt,2),xr=S(lr),Le=S(xr);nm(Le,{size:16,class:"mt-0.5 shrink-0 text-canvas-500"});var Ge=O(Le,2),Be=O(S(Ge),2),pt=S(Be),mt=O(xr,2),$e=S(mt);xc($e,{size:16,class:"mt-0.5 shrink-0 text-canvas-500"});var ze=O($e,2),gt=O(S(ze),2),Ae=S(gt),st=O(mt,2),tt=S(st);lm(tt,{size:16,class:"mt-0.5 shrink-0 text-canvas-500"});var P=O(tt,2),Z=O(S(P),2),q=S(Z),se=O(st,2),ve=S(se);An(ve,{size:16,class:"mt-0.5 shrink-0 text-canvas-500"});var Xe=O(ve,2),lt=O(S(Xe),2),jt=S(lt),Fe=O(lr,2);{var Mt=de=>{var ge=s0(),De=S(ge);id(De,I),T(de,ge)},cr=de=>{var ge=Q(),De=V(ge);{var Ke=Se=>{var rt=l0(),$t=S(rt);J(()=>X($t,d(o).description)),T(Se,rt)};H(De,Se=>{d(o).description&&Se(Ke)},!0)}T(de,ge)};H(Fe,de=>{I().length>0?de(Mt):de(cr,!1)})}var kr=O(Fe,2);{var Br=de=>{var ge=f0(),De=S(ge);let Ke;je(De,21,()=>d(o).categories,Lt,(Je,_t)=>{var bt=c0(),At=S(bt);pm(At,{size:12});var ur=O(At);J(()=>X(ur,` ${d(_t)??""}`)),T(Je,bt)});var Se=O(De,2);{var rt=Je=>{var _t=u0();T(Je,_t)};H(Se,Je=>{!d(c)&&d(o).categories.length>6&&Je(rt)})}var $t=O(Se,2);{var Fr=Je=>{var _t=d0();_t.__click=()=>M(c,!d(c));var bt=S(_t);{let ur=Re(()=>`transition-transform duration-200 ${d(c)?"rotate-180":""}`);om(bt,{size:14,get class(){return d(ur)}})}var At=O(bt);J(()=>X(At,` ${d(c)?"Show less":`Show all ${d(o).categories.length} tags`}`)),T(Je,_t)};H($t,Je=>{d(o).categories.length>6&&Je(Fr)})}J(()=>Ke=ft(De,1,"flex flex-wrap gap-2 overflow-hidden transition-all duration-300 ease-out",null,Ke,{"max-h-[2.75rem]":!d(c),"max-h-none":d(c)})),T(de,ge)};H(kr,de=>{d(o).categories.length>0&&de(Br)})}var Qe=O(kr,2);{var ct=de=>{var ge=v0(),De=O(S(ge),2);je(De,21,x,Lt,(Ke,Se)=>{var rt=Re(()=>Xs(d(Se),2));let $t=()=>d(rt)[0],Fr=()=>d(rt)[1];const Je=Re(()=>b($t())),_t=Re(()=>d(Je).icon);var bt=h0(),At=S(bt);xi(At,()=>d(_t),(oo,io)=>{io(oo,{size:16})});var ur=O(At);J(()=>{fe(bt,"href",Fr()),ft(bt,1,`inline-flex items-center gap-2 rounded-lg px-4 py-2 text-sm font-medium text-white shadow-sm transition-all duration-200 ${d(Je).bgClass} ${d(Je).hoverClass} hover:shadow-canvas focus:outline-none focus:ring-2 focus:ring-canvas-500 focus:ring-offset-2`,"svelte-1viyzig"),X(ur,` ${d(Je).label??""}`)}),T(Ke,bt)}),T(de,ge)};H(Qe,de=>{x().length>0&&de(ct)})}var Sr=O(ne,2);{var mn=de=>{var ge=b0(),De=O(S(ge),2);je(De,21,()=>d(o).editions,Lt,(Ke,Se)=>{var rt=_0(),$t=S(rt);{var Fr=Et=>{var Jt=p0();J(()=>fe(Jt,"src",d(Se).coverImageUrl)),T(Et,Jt)};H($t,Et=>{d(Se).coverImageUrl&&Et(Fr)})}var Je=O($t,2),_t=S(Je),bt=S(_t),At=O(_t,2);{var ur=Et=>{var Jt=m0(),ao=S(Jt);J(()=>X(ao,`ISBN-13: ${d(Se).isbn13??""}`)),T(Et,Jt)};H(At,Et=>{d(Se).isbn13&&Et(ur)})}var oo=O(At,2);{var io=Et=>{var Jt=g0(),ao=S(Jt);J(Uc=>X(ao,`Published: ${Uc??""}`),[()=>new Date(d(Se).publishedDate).toLocaleDateString()]),T(Et,Jt)};H(oo,Et=>{d(Se).publishedDate&&Et(io)})}J(()=>X(bt,d(Se).identifier??d(Se).googleBooksId??"Edition")),T(Ke,rt)}),T(de,ge)};H(Sr,de=>{d(o).editions.length>0&&de(mn)})}var gn=O(Sr,2);{var _n=de=>{var ge=y0(),De=O(S(ge),2);je(De,21,()=>d(i),Ke=>Ke.id,(Ke,Se)=>{{let rt=Re(()=>E(d(Se))),$t=Re(()=>`/book/${encodeURIComponent(d(Se).slug??d(Se).id)}`);jn(Ke,{get book(){return d(rt)},get href(){return d($t)}})}}),T(de,ge)};H(gn,de=>{d(i).length>0&&de(_n)})}J((de,ge,De,Ke)=>{fe(G,"href",de),fe(me,"src",ge),fe(me,"alt",`${d(o).title??"Book"} cover`),X(Xt,d(o).title??"Book details"),X(qr,De),X(pt,Ke),X(Ae,d(o).publication?.publisher??"Unknown"),X(q,d(o).publication?.language??"Unknown"),X(jt,d(o).publication?.pageCount??"Unknown")},[k,v,p,y]),T(K,j)},Y=K=>{var j=x0();T(K,j)};H(A,K=>{d(o)?K(F):K(Y,!1)},!0)}T($,ee)};H(R,$=>{d(n)?$(z):$(B,!1)},!0)}T(h,w)};H(l,h=>{d(r)?h(m):h(g,!1)})}T(e,_),ae()}dn(["click"]);var E0=D('<p class="text-sm text-anthracite-600 dark:text-slate-300">Loading sitemap...</p>'),I0=D('<p class="rounded-lg border border-red-200 bg-red-50 p-3 text-sm text-red-700 dark:border-red-900/40 dark:bg-red-950/40 dark:text-red-200"> </p>'),T0=D("<button> </button>"),R0=D('<div class="rounded-lg border border-blue-200 bg-blue-50 p-3 text-sm text-blue-700 dark:border-blue-900/40 dark:bg-blue-950/40 dark:text-blue-200">No books found for this letter yet.</div>'),C0=D('<a class="rounded-xl border border-linen-200 p-4 text-sm transition hover:shadow-md dark:border-slate-700"><p class="font-medium text-anthracite-900 dark:text-slate-100"> </p> <p class="text-xs text-anthracite-500 dark:text-slate-400"> </p></a>'),N0=D('<div class="grid grid-cols-1 gap-3 md:grid-cols-2"></div>'),O0=D('<div class="rounded-lg border border-blue-200 bg-blue-50 p-3 text-sm text-blue-700 dark:border-blue-900/40 dark:bg-blue-950/40 dark:text-blue-200">No authors found for this letter yet.</div>'),$0=D('<p class="text-sm text-anthracite-500 dark:text-slate-400">No indexed titles for this author yet.</p>'),A0=D('<li><a class="text-sm text-canvas-600 transition hover:text-canvas-700 dark:text-canvas-400 dark:hover:text-canvas-300"> </a></li>'),P0=D('<ul class="space-y-1"></ul>'),z0=D('<div class="border-t border-linen-200 bg-linen-50/50 px-4 py-3 dark:border-slate-700 dark:bg-slate-900/30"><!></div>'),U0=D('<div><button class="flex w-full items-center justify-between px-4 py-3 text-left transition hover:bg-linen-50 dark:hover:bg-slate-800/50"><span class="font-medium text-anthracite-900 dark:text-slate-100"> </span> <div class="flex items-center gap-2"><span class="rounded-full bg-linen-100 px-2.5 py-0.5 text-xs font-medium text-anthracite-600 dark:bg-slate-700 dark:text-slate-300"> </span> <!></div></button> <!></div>'),L0=D('<div class="divide-y divide-linen-200 rounded-xl border border-linen-200 dark:divide-slate-700 dark:border-slate-700"></div>'),D0=D('<span class="px-2 text-sm text-anthracite-400 dark:text-slate-500">&hellip;</span>'),Z0=D("<button> </button>"),j0=D('<nav class="flex items-center justify-center gap-1"><button class="rounded-md border border-linen-300 px-3 py-1.5 text-sm transition disabled:opacity-40 dark:border-slate-600 dark:text-slate-300 hover:bg-linen-100 dark:hover:bg-slate-800" aria-label="Previous page">&laquo;</button> <!> <button class="rounded-md border border-linen-300 px-3 py-1.5 text-sm transition disabled:opacity-40 dark:border-slate-600 dark:text-slate-300 hover:bg-linen-100 dark:hover:bg-slate-800" aria-label="Next page">&raquo;</button></nav>'),M0=D('<div class="rounded-xl border border-linen-200 bg-white p-4 shadow-soft dark:border-slate-700 dark:bg-slate-800"><div class="flex flex-wrap items-center gap-2"><span class="text-xs font-semibold uppercase tracking-wider text-anthracite-500 dark:text-slate-400">Jump to letter:</span> <!></div></div> <div class="overflow-hidden rounded-xl border border-linen-200 bg-white shadow-soft dark:border-slate-700 dark:bg-slate-800"><div class="border-b border-linen-200 bg-white px-5 py-3 dark:border-slate-700 dark:bg-slate-800"><h2 class="text-lg font-semibold text-anthracite-900 dark:text-slate-100"> </h2> <p class="text-sm text-anthracite-500 dark:text-slate-400"> </p></div> <div class="p-5"><!></div></div> <!> <div class="rounded-lg border border-linen-300 bg-linen-50 p-3 text-sm text-anthracite-600 dark:border-slate-700 dark:bg-slate-800/50 dark:text-slate-400">XML versions of this sitemap are available at <a href="/sitemap.xml" data-no-spa="true" class="font-medium text-canvas-600 hover:text-canvas-700 dark:text-canvas-400 dark:hover:text-canvas-300"> </a>.</div>',1),q0=D('<section class="mx-auto flex max-w-6xl flex-col gap-6 px-4 py-8 md:px-6"><header class="flex flex-col gap-4 rounded-xl border border-linen-200 bg-white p-5 shadow-soft dark:border-slate-700 dark:bg-slate-800 md:flex-row md:items-center md:justify-between"><div><h1 class="text-2xl font-semibold text-anthracite-900 dark:text-slate-100">Site Index</h1> <p class="text-sm text-anthracite-600 dark:text-slate-300">Server-rendered directory of books and authors for search engines and readers.</p></div> <div class="flex items-center gap-1"><button>Authors &amp; Books</button> <button>Books Only</button></div></header> <!></section>');function B0(e,t){ie(t,!0);let r=zt(t,"view",3,"authors"),n=zt(t,"letter",3,"A"),o=zt(t,"page",3,1),i=te(!0),a=te(null),s=te(null),c=te(null);async function u(){M(i,!0),M(a,null);try{M(s,await Zm(r(),n(),o()),!0),M(c,d(s).authors.length>0?d(s).authors[0].authorId:null,!0)}catch(l){M(a,l instanceof Error?l.message:"Unable to load sitemap",!0),M(s,null)}finally{M(i,!1)}}function f(l,m,g){Dr(`/sitemap/${l}/${encodeURIComponent(m)}/${Math.max(1,g)}`)}function v(l){M(c,d(c)===l?null:l,!0)}function p(l,m){if(m<=7)return Array.from({length:m},(R,z)=>z+1);const g=[1];l>3&&g.push("ellipsis");const h=Math.max(2,l-1),w=Math.min(m-1,l+1);for(let R=h;R<=w;R++)g.push(R);return l<m-2&&g.push("ellipsis"),g.push(m),g}cn(()=>{u()});var y=q0(),E=S(y),I=O(S(E),2),k=S(I);k.__click=()=>f("authors",n(),1);var N=O(k,2);N.__click=()=>f("books",n(),1);var b=O(E,2);{var x=l=>{var m=E0();T(l,m)},_=l=>{var m=Q(),g=V(m);{var h=R=>{var z=I0(),B=S(z);J(()=>X(B,d(a))),T(R,z)},w=R=>{var z=Q(),B=V(z);{var $=ee=>{const A=Re(()=>d(s));var F=M0(),Y=V(F),K=S(Y),j=O(S(K),2);je(j,17,()=>d(A).letters,Lt,(Le,Ge)=>{var Be=T0();Be.__click=()=>f(d(A).viewType,d(Ge),1);var pt=S(Be);J(()=>{ft(Be,1,`rounded-md px-2.5 py-1 text-xs font-medium transition ${d(Ge)===d(A).activeLetter?"bg-canvas-500 text-white":"bg-linen-100 text-anthracite-700 hover:bg-linen-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600"}`),X(pt,d(Ge))}),T(Le,Be)});var G=O(Y,2),re=S(G),ne=S(re),pe=S(ne),ke=O(ne,2),me=S(ke),qe=O(re,2),Ye=S(qe);{var sr=Le=>{var Ge=Q(),Be=V(Ge);{var pt=$e=>{var ze=R0();T($e,ze)},mt=$e=>{var ze=N0();je(ze,21,()=>d(A).books,Lt,(gt,Ae)=>{var st=C0(),tt=S(st),P=S(tt),Z=O(tt,2),q=S(Z);J((se,ve)=>{fe(st,"href",se),X(P,d(Ae).title),X(q,`Last updated: ${ve??""}`)},[()=>`/book/${encodeURIComponent(d(Ae).slug)}`,()=>d(Ae).updatedAt?new Date(d(Ae).updatedAt).toLocaleDateString():"Unknown"]),T(gt,st)}),T($e,ze)};H(Be,$e=>{d(A).books.length===0?$e(pt):$e(mt,!1)})}T(Le,Ge)},at=Le=>{var Ge=Q(),Be=V(Ge);{var pt=$e=>{var ze=O0();T($e,ze)},mt=$e=>{var ze=L0();je(ze,21,()=>d(A).authors,gt=>gt.authorId,(gt,Ae)=>{var st=U0(),tt=S(st);tt.__click=()=>v(d(Ae).authorId);var P=S(tt),Z=S(P),q=O(P,2),se=S(q),ve=S(se),Xe=O(se,2);{let Fe=Re(()=>`shrink-0 text-anthracite-400 transition-transform duration-200 dark:text-slate-500 ${d(c)===d(Ae).authorId?"rotate-90":""}`);am(Xe,{size:16,get class(){return d(Fe)}})}var lt=O(tt,2);{var jt=Fe=>{var Mt=z0(),cr=S(Mt);{var kr=Qe=>{var ct=$0();T(Qe,ct)},Br=Qe=>{var ct=P0();je(ct,21,()=>d(Ae).books,Lt,(Sr,mn)=>{var gn=A0(),_n=S(gn),de=S(_n);J(ge=>{fe(_n,"href",ge),X(de,d(mn).title)},[()=>`/book/${encodeURIComponent(d(mn).slug)}`]),T(Sr,gn)}),T(Qe,ct)};H(cr,Qe=>{d(Ae).books.length===0?Qe(kr):Qe(Br,!1)})}T(Fe,Mt)};H(lt,Fe=>{d(c)===d(Ae).authorId&&Fe(jt)})}J(()=>{fe(tt,"aria-expanded",d(c)===d(Ae).authorId),X(Z,d(Ae).authorName),X(ve,`${d(Ae).books.length??""} ${d(Ae).books.length===1?"title":"titles"}`)}),T(gt,st)}),T($e,ze)};H(Be,$e=>{d(A).authors.length===0?$e(pt):$e(mt,!1)})}T(Le,Ge)};H(Ye,Le=>{d(A).viewType==="books"?Le(sr):Le(at,!1)})}var Xt=O(G,2);{var Kt=Le=>{var Ge=j0(),Be=S(Ge);Be.__click=()=>f(d(A).viewType,d(A).activeLetter,d(A).pageNumber-1);var pt=O(Be,2);je(pt,17,()=>p(d(A).pageNumber,d(A).totalPages),Lt,($e,ze)=>{var gt=Q(),Ae=V(gt);{var st=P=>{var Z=D0();T(P,Z)},tt=P=>{var Z=Z0();Z.__click=()=>f(d(A).viewType,d(A).activeLetter,d(ze));var q=S(Z);J(()=>{ft(Z,1,`min-w-[2.25rem] rounded-md border px-2 py-1.5 text-sm transition ${d(ze)===d(A).pageNumber?"border-canvas-500 bg-canvas-500 text-white":"border-linen-300 text-anthracite-700 hover:bg-linen-100 dark:border-slate-600 dark:text-slate-300 dark:hover:bg-slate-800"}`),X(q,d(ze))}),T(P,Z)};H(Ae,P=>{d(ze)==="ellipsis"?P(st):P(tt,!1)})}T($e,gt)});var mt=O(pt,2);mt.__click=()=>f(d(A).viewType,d(A).activeLetter,d(A).pageNumber+1),J(()=>{Be.disabled=d(A).pageNumber<=1,mt.disabled=d(A).pageNumber>=d(A).totalPages}),T(Le,Ge)};H(Xt,Le=>{d(A).totalPages>1&&Le(Kt)})}var qr=O(Xt,2),lr=O(S(qr)),xr=S(lr);J(()=>{X(pe,`${d(A).viewType==="books"?"Books":"Authors"} starting with '${d(A).activeLetter??""}'`),X(me,`${d(A).totalItems??""} ${d(A).viewType==="books"?"titles":"authors"} indexed`),X(xr,`${d(A).baseUrl??""}/sitemap.xml`)}),T(ee,F)};H(B,ee=>{d(s)&&ee($)},!0)}T(R,z)};H(g,R=>{d(a)?R(h):R(w,!1)},!0)}T(l,m)};H(b,l=>{d(i)?l(x):l(_,!1)})}J(()=>{ft(k,1,`rounded-lg px-4 py-2 text-sm font-medium transition ${r()==="authors"?"bg-canvas-500 text-white":"bg-linen-100 text-anthracite-700 hover:bg-linen-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600"}`),ft(N,1,`rounded-lg px-4 py-2 text-sm font-medium transition ${r()==="books"?"bg-canvas-500 text-white":"bg-linen-100 text-anthracite-700 hover:bg-linen-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600"}`)}),T(e,y),ae()}dn(["click"]);var F0=D('<section class="mx-auto flex max-w-3xl flex-col items-center gap-6 px-4 py-16 text-center md:px-6"><p class="text-6xl font-semibold text-canvas-500">404</p> <h1 class="text-3xl font-semibold text-anthracite-900 dark:text-slate-100">Page not found</h1> <p class="text-sm text-anthracite-600 dark:text-slate-300">The page you requested does not exist. Try searching for a book instead.</p> <form class="flex w-full max-w-xl flex-col gap-3 sm:flex-row"><input type="search" class="w-full rounded-xl border border-linen-300 px-4 py-3 outline-none ring-canvas-300 focus:ring-2 dark:border-slate-600 dark:bg-slate-800" placeholder="Search books"/> <button type="submit" class="rounded-xl bg-canvas-500 px-5 py-3 font-medium text-white transition hover:bg-canvas-600">Search</button></form> <a href="/" class="rounded-lg border border-linen-300 px-4 py-2 text-sm text-anthracite-700 transition hover:bg-linen-100 dark:border-slate-600 dark:text-slate-300 dark:hover:bg-slate-800">Go home</a></section>');function H0(e,t){ie(t,!0);let r=te("");function n(s){s.preventDefault();const c=d(r).trim();c&&Dr(`/search?query=${encodeURIComponent(c)}`)}var o=F0(),i=O(S(o),6),a=S(i);Vn("submit",i,n),Xn(a,()=>d(r),s=>M(r,s)),T(e,o),ae()}var W0=D('<div class="flex min-h-screen flex-col bg-linen-50 text-anthracite-900 dark:bg-slate-900 dark:text-slate-100"><!> <main class="flex-1"><!></main> <!></div>');function V0(e,t){ie(t,!0);let r=te(Rt(new URL(window.location.href))),n=Re(()=>kd(d(r).pathname));Kn(()=>{const v=Gl.subscribe(y=>{y.href!==d(r).href&&M(r,y,!0)}),p=Ed();return Yp(),()=>{v(),p()}});var o=W0(),i=S(o);Em(i,{get activeRoute(){return d(n).name}});var a=O(i,2),s=S(a);{var c=v=>{Gm(v,{})},u=v=>{var p=Q(),y=V(p);{var E=k=>{vi(k,{get currentUrl(){return d(r)}})},I=k=>{var N=Q(),b=V(N);{var x=l=>{vi(l,{get currentUrl(){return d(r)}})},_=l=>{var m=Q(),g=V(m);{var h=R=>{vi(R,{get currentUrl(){return d(r)}})},w=R=>{var z=Q(),B=V(z);{var $=A=>{{let F=Re(()=>d(n).params.identifier??"");S0(A,{get currentUrl(){return d(r)},get identifier(){return d(F)}})}},ee=A=>{var F=Q(),Y=V(F);{var K=G=>{{let re=Re(()=>d(n).params.view??"authors"),ne=Re(()=>d(n).params.letter??"A"),pe=Re(()=>d(n).params.page??1);B0(G,{get view(){return d(re)},get letter(){return d(ne)},get page(){return d(pe)}})}},j=G=>{H0(G,{})};H(Y,G=>{d(n).name==="sitemap"?G(K):G(j,!1)},!0)}T(A,F)};H(B,A=>{d(n).name==="book"?A($):A(ee,!1)},!0)}T(R,z)};H(g,R=>{d(n).name==="categories"?R(h):R(w,!1)},!0)}T(l,m)};H(b,l=>{d(n).name==="explore"?l(x):l(_,!1)},!0)}T(k,N)};H(y,k=>{d(n).name==="search"?k(E):k(I,!1)},!0)}T(v,p)};H(s,v=>{d(n).name==="home"?v(c):v(u,!1)})}var f=O(a,2);Tm(f),T(e,o),ae()}Qu(V0,{target:document.getElementById("app")});
//# sourceMappingURL=app.js.map
