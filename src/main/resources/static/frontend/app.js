(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}})();const hi=!1;var Ii=Array.isArray,zc=Array.prototype.indexOf,Er=Array.prototype.includes,Ln=Array.from,Uc=Object.defineProperty,Kt=Object.getOwnPropertyDescriptor,Lc=Object.getOwnPropertyDescriptors,Dc=Object.prototype,Zc=Array.prototype,Hs=Object.getPrototypeOf,Ki=Object.isExtensible;function Br(e){return typeof e=="function"}const ve=()=>{};function jc(e){for(var t=0;t<e.length;t++)e[t]()}function Ws(){var e,t,r=new Promise((n,o)=>{e=n,t=o});return{promise:r,resolve:e,reject:t}}function Vs(e,t){if(Array.isArray(e))return e;if(!(Symbol.iterator in e))return Array.from(e);const r=[];for(const n of e)if(r.push(n),r.length===t)break;return r}const He=2,Nn=4,Dn=8,Ti=1<<24,Ht=16,Rt=32,vr=64,Ri=128,_t=512,je=1024,We=2048,Tt=4096,ft=8192,Mt=16384,Ci=32768,Ft=65536,Ji=1<<17,Gs=1<<18,Or=1<<19,Mc=1<<20,jt=1<<25,dr=32768,vi=1<<21,Ni=1<<22,Jt=1<<23,cr=Symbol("$state"),Xs=Symbol("legacy props"),Bc=Symbol(""),kr=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function qc(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Fc(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Hc(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Wc(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Vc(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Gc(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Xc(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Kc(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Jc(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Yc(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Qc(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const eu=1,tu=2,Ks=4,ru=8,nu=16,ou=1,iu=4,au=8,su=16,lu=1,cu=2,De=Symbol(),uu="http://www.w3.org/1999/xhtml",fu="http://www.w3.org/2000/svg",du="@attach";function hu(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function vu(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Js(e){return e===this.v}function Ys(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Qs(e){return!Ys(e,this.v)}let pu=!1,dt=null;function Ir(e){dt=e}function se(e,t=!1,r){dt={p:dt,i:!1,c:null,e:null,s:e,x:null,l:null}}function le(e){var t=dt,r=t.e;if(r!==null){t.e=null;for(var n of r)yl(n)}return t.i=!0,dt=t.p,{}}function el(){return!0}let ar=[];function tl(){var e=ar;ar=[],jc(e)}function Bt(e){if(ar.length===0&&!Kr){var t=ar;queueMicrotask(()=>{t===ar&&tl()})}ar.push(e)}function mu(){for(;ar.length>0;)tl()}function rl(e){var t=ue;if(t===null)return ne.f|=Jt,e;if((t.f&Ci)===0){if((t.f&Ri)===0)throw e;t.b.error(e)}else Tr(e,t)}function Tr(e,t){for(;t!==null;){if((t.f&Ri)!==0)try{t.b.error(e);return}catch(r){e=r}t=t.parent}throw e}const gu=-7169;function $e(e,t){e.f=e.f&gu|t}function Oi(e){(e.f&_t)!==0||e.deps===null?$e(e,je):$e(e,Tt)}function nl(e){if(e!==null)for(const t of e)(t.f&He)===0||(t.f&dr)===0||(t.f^=dr,nl(t.deps))}function ol(e,t,r){(e.f&We)!==0?t.add(e):(e.f&Tt)!==0&&r.add(e),nl(e.deps),$e(e,je)}const pn=new Set;let ae=null,On=null,kt=null,ut=[],Zn=null,pi=!1,Kr=!1;class Yt{committed=!1;current=new Map;previous=new Map;#t=new Set;#s=new Set;#e=0;#i=0;#a=null;#n=new Set;#r=new Set;#o=new Map;is_fork=!1;#l=!1;is_deferred(){return this.is_fork||this.#i>0}skip_effect(t){this.#o.has(t)||this.#o.set(t,{d:[],m:[]})}unskip_effect(t){var r=this.#o.get(t);if(r){this.#o.delete(t);for(var n of r.d)$e(n,We),St(n);for(n of r.m)$e(n,Tt),St(n)}}process(t){ut=[],this.apply();var r=[],n=[];for(const o of t)this.#c(o,r,n);if(this.is_deferred()){this.#u(n),this.#u(r);for(const[o,i]of this.#o)ll(o,i)}else{for(const o of this.#t)o();this.#t.clear(),this.#e===0&&this.#f(),On=this,ae=null,Yi(n),Yi(r),On=null,this.#a?.resolve()}kt=null}#c(t,r,n){t.f^=je;for(var o=t.first,i=null;o!==null;){var a=o.f,s=(a&(Rt|vr))!==0,c=s&&(a&je)!==0,u=c||(a&ft)!==0||this.#o.has(o);if(!u&&o.fn!==null){s?o.f^=je:i!==null&&(a&(Nn|Dn|Ti))!==0?i.b.defer_effect(o):(a&Nn)!==0?r.push(o):sn(o)&&((a&Ht)!==0&&this.#r.add(o),en(o));var d=o.first;if(d!==null){o=d;continue}}var v=o.parent;for(o=o.next;o===null&&v!==null;)v===i&&(i=null),o=v.next,v=v.parent}}#u(t){for(var r=0;r<t.length;r+=1)ol(t[r],this.#n,this.#r)}capture(t,r){r!==De&&!this.previous.has(t)&&this.previous.set(t,r),(t.f&Jt)===0&&(this.current.set(t,t.v),kt?.set(t,t.v))}activate(){ae=this,this.apply()}deactivate(){ae===this&&(ae=null,kt=null)}flush(){if(this.activate(),ut.length>0){if(il(),ae!==null&&ae!==this)return}else this.#e===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#s)t(this);this.#s.clear()}#f(){if(pn.size>1){this.previous.clear();var t=kt,r=!0;for(const o of pn){if(o===this){r=!1;continue}const i=[];for(const[s,c]of this.current){if(o.current.has(s))if(r&&c!==o.current.get(s))o.current.set(s,c);else continue;i.push(s)}if(i.length===0)continue;const a=[...o.current.keys()].filter(s=>!this.current.has(s));if(a.length>0){var n=ut;ut=[];const s=new Set,c=new Map;for(const u of i)al(u,a,s,c);if(ut.length>0){ae=o,o.apply();for(const u of ut)o.#c(u,[],[]);o.deactivate()}ut=n}}ae=null,kt=t}this.committed=!0,pn.delete(this)}increment(t){this.#e+=1,t&&(this.#i+=1)}decrement(t){this.#e-=1,t&&(this.#i-=1),!this.#l&&(this.#l=!0,Bt(()=>{this.#l=!1,this.is_deferred()?ut.length>0&&this.flush():this.revive()}))}revive(){for(const t of this.#n)this.#r.delete(t),$e(t,We),St(t);for(const t of this.#r)$e(t,Tt),St(t);this.flush()}oncommit(t){this.#t.add(t)}ondiscard(t){this.#s.add(t)}settled(){return(this.#a??=Ws()).promise}static ensure(){if(ae===null){const t=ae=new Yt;pn.add(ae),Kr||Bt(()=>{ae===t&&t.flush()})}return ae}apply(){}}function _u(e){var t=Kr;Kr=!0;try{for(var r;;){if(mu(),ut.length===0&&(ae?.flush(),ut.length===0))return Zn=null,r;il()}}finally{Kr=t}}function il(){pi=!0;var e=null;try{for(var t=0;ut.length>0;){var r=Yt.ensure();if(t++>1e3){var n,o;bu()}r.process(ut),Qt.clear()}}finally{pi=!1,Zn=null}}function bu(){try{Gc()}catch(e){Tr(e,Zn)}}let Zt=null;function Yi(e){var t=e.length;if(t!==0){for(var r=0;r<t;){var n=e[r++];if((n.f&(Mt|ft))===0&&sn(n)&&(Zt=new Set,en(n),n.deps===null&&n.first===null&&n.nodes===null&&(n.teardown===null&&n.ac===null?Il(n):n.fn=null),Zt?.size>0)){Qt.clear();for(const o of Zt){if((o.f&(Mt|ft))!==0)continue;const i=[o];let a=o.parent;for(;a!==null;)Zt.has(a)&&(Zt.delete(a),i.push(a)),a=a.parent;for(let s=i.length-1;s>=0;s--){const c=i[s];(c.f&(Mt|ft))===0&&en(c)}}Zt.clear()}}Zt=null}}function al(e,t,r,n){if(!r.has(e)&&(r.add(e),e.reactions!==null))for(const o of e.reactions){const i=o.f;(i&He)!==0?al(o,t,r,n):(i&(Ni|Ht))!==0&&(i&We)===0&&sl(o,t,n)&&($e(o,We),St(o))}}function sl(e,t,r){const n=r.get(e);if(n!==void 0)return n;if(e.deps!==null)for(const o of e.deps){if(Er.call(t,o))return!0;if((o.f&He)!==0&&sl(o,t,r))return r.set(o,!0),!0}return r.set(e,!1),!1}function St(e){for(var t=Zn=e;t.parent!==null;){t=t.parent;var r=t.f;if(pi&&t===ue&&(r&Ht)!==0&&(r&Gs)===0)return;if((r&(vr|Rt))!==0){if((r&je)===0)return;t.f^=je}}ut.push(t)}function ll(e,t){if(!((e.f&Rt)!==0&&(e.f&je)!==0)){(e.f&We)!==0?t.d.push(e):(e.f&Tt)!==0&&t.m.push(e),$e(e,je);for(var r=e.first;r!==null;)ll(r,t),r=r.next}}function yu(e){let t=0,r=hr(0),n;return()=>{Ai()&&(h(r),wl(()=>(t===0&&(n=Ar(()=>e(()=>Jr(r)))),t+=1,()=>{Bt(()=>{t-=1,t===0&&(n?.(),n=void 0,Jr(r))})})))}}var wu=Ft|Or|Ri;function xu(e,t,r){new ku(e,t,r)}class ku{parent;is_pending=!1;#t;#s=null;#e;#i;#a;#n=null;#r=null;#o=null;#l=null;#c=null;#u=0;#f=0;#v=!1;#h=!1;#p=new Set;#m=new Set;#d=null;#w=yu(()=>(this.#d=hr(this.#u),()=>{this.#d=null}));constructor(t,r,n){this.#t=t,this.#e=r,this.#i=n,this.parent=ue.b,this.is_pending=!!this.#e.pending,this.#a=$r(()=>{ue.b=this;{var o=this.#b();try{this.#n=nt(()=>n(o))}catch(i){this.error(i)}this.#f>0?this.#_():this.is_pending=!1}return()=>{this.#c?.remove()}},wu)}#x(){try{this.#n=nt(()=>this.#i(this.#t))}catch(t){this.error(t)}}#k(){const t=this.#e.pending;t&&(this.#r=nt(()=>t(this.#t)),Bt(()=>{var r=this.#b();this.#n=this.#g(()=>(Yt.ensure(),nt(()=>this.#i(r)))),this.#f>0?this.#_():(ur(this.#r,()=>{this.#r=null}),this.is_pending=!1)}))}#b(){var t=this.#t;return this.is_pending&&(this.#c=qt(),this.#t.before(this.#c),t=this.#c),t}defer_effect(t){ol(t,this.#p,this.#m)}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!this.#e.pending}#g(t){var r=ue,n=ne,o=dt;zt(this.#a),yt(this.#a),Ir(this.#a.ctx);try{return t()}catch(i){return rl(i),null}finally{zt(r),yt(n),Ir(o)}}#_(){const t=this.#e.pending;this.#n!==null&&(this.#l=document.createDocumentFragment(),this.#l.append(this.#c),Cl(this.#n,this.#l)),this.#r===null&&(this.#r=nt(()=>t(this.#t)))}#y(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#y(t);return}if(this.#f+=t,this.#f===0){this.is_pending=!1;for(const r of this.#p)$e(r,We),St(r);for(const r of this.#m)$e(r,Tt),St(r);this.#p.clear(),this.#m.clear(),this.#r&&ur(this.#r,()=>{this.#r=null}),this.#l&&(this.#t.before(this.#l),this.#l=null)}}update_pending_count(t){this.#y(t),this.#u+=t,!(!this.#d||this.#v)&&(this.#v=!0,Bt(()=>{this.#v=!1,this.#d&&Rr(this.#d,this.#u)}))}get_effect_pending(){return this.#w(),h(this.#d)}error(t){var r=this.#e.onerror;let n=this.#e.failed;if(this.#h||!r&&!n)throw t;this.#n&&(Fe(this.#n),this.#n=null),this.#r&&(Fe(this.#r),this.#r=null),this.#o&&(Fe(this.#o),this.#o=null);var o=!1,i=!1;const a=()=>{if(o){vu();return}o=!0,i&&Qc(),Yt.ensure(),this.#u=0,this.#o!==null&&ur(this.#o,()=>{this.#o=null}),this.is_pending=this.has_pending_snippet(),this.#n=this.#g(()=>(this.#h=!1,nt(()=>this.#i(this.#t)))),this.#f>0?this.#_():this.is_pending=!1};Bt(()=>{try{i=!0,r?.(t,a),i=!1}catch(s){Tr(s,this.#a&&this.#a.parent)}n&&(this.#o=this.#g(()=>{Yt.ensure(),this.#h=!0;try{return nt(()=>{n(this.#t,()=>t,()=>a)})}catch(s){return Tr(s,this.#a.parent),null}finally{this.#h=!1}}))})}}function cl(e,t,r,n){const o=jn;var i=e.filter(p=>!p.settled);if(r.length===0&&i.length===0){n(t.map(o));return}var a=ae,s=ue,c=Su(),u=i.length===1?i[0].promise:i.length>1?Promise.all(i.map(p=>p.promise)):null;function d(p){c();try{n(p)}catch(y){(s.f&Mt)===0&&Tr(y,s)}a?.deactivate(),mi()}if(r.length===0){u.then(()=>d(t.map(o)));return}function v(){c(),Promise.all(r.map(p=>Eu(p))).then(p=>d([...t.map(o),...p])).catch(p=>Tr(p,s))}u?u.then(v):v()}function Su(){var e=ue,t=ne,r=dt,n=ae;return function(i=!0){zt(e),yt(t),Ir(r),i&&n?.activate()}}function mi(){zt(null),yt(null),Ir(null)}function jn(e){var t=He|We,r=ne!==null&&(ne.f&He)!==0?ne:null;return ue!==null&&(ue.f|=Or),{ctx:dt,deps:null,effects:null,equals:Js,f:t,fn:e,reactions:null,rv:0,v:De,wv:0,parent:r??ue,ac:null}}function Eu(e,t,r){let n=ue;n===null&&Fc();var o=n.b,i=void 0,a=hr(De),s=!ne,c=new Map;return Lu(()=>{var u=Ws();i=u.promise;try{Promise.resolve(e()).then(u.resolve,u.reject).then(()=>{d===ae&&d.committed&&d.deactivate(),mi()})}catch(y){u.reject(y),mi()}var d=ae;if(s){var v=o.is_rendered();o.update_pending_count(1),d.increment(v),c.get(d)?.reject(kr),c.delete(d),c.set(d,u)}const p=(y,E=void 0)=>{if(d.activate(),E)E!==kr&&(a.f|=Jt,Rr(a,E));else{(a.f&Jt)!==0&&(a.f^=Jt),Rr(a,y);for(const[I,k]of c){if(c.delete(I),I===d)break;k.reject(kr)}}s&&(o.update_pending_count(-1),d.decrement(v))};u.promise.then(p,y=>p(null,y||"unknown"))}),Bn(()=>{for(const u of c.values())u.reject(kr)}),new Promise(u=>{function d(v){function p(){v===i?u(a):d(i)}v.then(p,p)}d(i)})}function Oe(e){const t=jn(e);return Nl(t),t}function ul(e){const t=jn(e);return t.equals=Qs,t}function fl(e){var t=e.effects;if(t!==null){e.effects=null;for(var r=0;r<t.length;r+=1)Fe(t[r])}}function Iu(e){for(var t=e.parent;t!==null;){if((t.f&He)===0)return(t.f&Mt)===0?t:null;t=t.parent}return null}function $i(e){var t,r=ue;zt(Iu(e));try{e.f&=~dr,fl(e),t=Pl(e)}finally{zt(r)}return t}function dl(e){var t=$i(e);if(!e.equals(t)&&(e.wv=$l(),(!ae?.is_fork||e.deps===null)&&(e.v=t,e.deps===null))){$e(e,je);return}er||(kt!==null?(Ai()||ae?.is_fork)&&kt.set(e,t):Oi(e))}let gi=new Set;const Qt=new Map;let hl=!1;function hr(e,t){var r={f:0,v:e,reactions:null,equals:Js,rv:0,wv:0};return r}function ee(e,t){const r=hr(e);return Nl(r),r}function Tu(e,t=!1,r=!0){const n=hr(e);return t||(n.equals=Qs),n}function B(e,t,r=!1){ne!==null&&(!It||(ne.f&Ji)!==0)&&el()&&(ne.f&(He|Ht|Ni|Ji))!==0&&(bt===null||!Er.call(bt,e))&&Yc();let n=r?Et(t):t;return Rr(e,n)}function Rr(e,t){if(!e.equals(t)){var r=e.v;er?Qt.set(e,t):Qt.set(e,r),e.v=t;var n=Yt.ensure();if(n.capture(e,r),(e.f&He)!==0){const o=e;(e.f&We)!==0&&$i(o),Oi(o)}e.wv=$l(),vl(e,We),ue!==null&&(ue.f&je)!==0&&(ue.f&(Rt|vr))===0&&(mt===null?Zu([e]):mt.push(e)),!n.is_fork&&gi.size>0&&!hl&&Ru()}return t}function Ru(){hl=!1;for(const e of gi)(e.f&je)!==0&&$e(e,Tt),sn(e)&&en(e);gi.clear()}function Jr(e){B(e,e.v+1)}function vl(e,t){var r=e.reactions;if(r!==null)for(var n=r.length,o=0;o<n;o++){var i=r[o],a=i.f,s=(a&We)===0;if(s&&$e(i,t),(a&He)!==0){var c=i;kt?.delete(c),(a&dr)===0&&(a&_t&&(i.f|=dr),vl(c,Tt))}else s&&((a&Ht)!==0&&Zt!==null&&Zt.add(i),St(i))}}function Et(e){if(typeof e!="object"||e===null||cr in e)return e;const t=Hs(e);if(t!==Dc&&t!==Zc)return e;var r=new Map,n=Ii(e),o=ee(0),i=fr,a=s=>{if(fr===i)return s();var c=ne,u=fr;yt(null),na(i);var d=s();return yt(c),na(u),d};return n&&r.set("length",ee(e.length)),new Proxy(e,{defineProperty(s,c,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&Kc();var d=r.get(c);return d===void 0?d=a(()=>{var v=ee(u.value);return r.set(c,v),v}):B(d,u.value,!0),!0},deleteProperty(s,c){var u=r.get(c);if(u===void 0){if(c in s){const d=a(()=>ee(De));r.set(c,d),Jr(o)}}else B(u,De),Jr(o);return!0},get(s,c,u){if(c===cr)return e;var d=r.get(c),v=c in s;if(d===void 0&&(!v||Kt(s,c)?.writable)&&(d=a(()=>{var y=Et(v?s[c]:De),E=ee(y);return E}),r.set(c,d)),d!==void 0){var p=h(d);return p===De?void 0:p}return Reflect.get(s,c,u)},getOwnPropertyDescriptor(s,c){var u=Reflect.getOwnPropertyDescriptor(s,c);if(u&&"value"in u){var d=r.get(c);d&&(u.value=h(d))}else if(u===void 0){var v=r.get(c),p=v?.v;if(v!==void 0&&p!==De)return{enumerable:!0,configurable:!0,value:p,writable:!0}}return u},has(s,c){if(c===cr)return!0;var u=r.get(c),d=u!==void 0&&u.v!==De||Reflect.has(s,c);if(u!==void 0||ue!==null&&(!d||Kt(s,c)?.writable)){u===void 0&&(u=a(()=>{var p=d?Et(s[c]):De,y=ee(p);return y}),r.set(c,u));var v=h(u);if(v===De)return!1}return d},set(s,c,u,d){var v=r.get(c),p=c in s;if(n&&c==="length")for(var y=u;y<v.v;y+=1){var E=r.get(y+"");E!==void 0?B(E,De):y in s&&(E=a(()=>ee(De)),r.set(y+"",E))}if(v===void 0)(!p||Kt(s,c)?.writable)&&(v=a(()=>ee(void 0)),B(v,Et(u)),r.set(c,v));else{p=v.v!==De;var I=a(()=>Et(u));B(v,I)}var k=Reflect.getOwnPropertyDescriptor(s,c);if(k?.set&&k.set.call(d,u),!p){if(n&&typeof c=="string"){var N=r.get("length"),b=Number(c);Number.isInteger(b)&&b>=N.v&&B(N,b+1)}Jr(o)}return!0},ownKeys(s){h(o);var c=Reflect.ownKeys(s).filter(v=>{var p=r.get(v);return p===void 0||p.v!==De});for(var[u,d]of r)d.v!==De&&!(u in s)&&c.push(u);return c},setPrototypeOf(){Jc()}})}function Qi(e){try{if(e!==null&&typeof e=="object"&&cr in e)return e[cr]}catch{}return e}function Cu(e,t){return Object.is(Qi(e),Qi(t))}var ea,pl,ml,gl;function Nu(){if(ea===void 0){ea=window,pl=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,r=Text.prototype;ml=Kt(t,"firstChild").get,gl=Kt(t,"nextSibling").get,Ki(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Ki(r)&&(r.__t=void 0)}}function qt(e=""){return document.createTextNode(e)}function At(e){return ml.call(e)}function on(e){return gl.call(e)}function S(e,t){return At(e)}function V(e,t=!1){{var r=At(e);return r instanceof Comment&&r.data===""?on(r):r}}function O(e,t=1,r=!1){let n=e;for(;t--;)n=on(n);return n}function Ou(e){e.textContent=""}function _l(){return!1}function $u(e,t){if(t){const r=document.body;e.autofocus=!0,Bt(()=>{document.activeElement===r&&e.focus()})}}let ta=!1;function Au(){ta||(ta=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function Mn(e){var t=ne,r=ue;yt(null),zt(null);try{return e()}finally{yt(t),zt(r)}}function bl(e,t,r,n=r){e.addEventListener(t,()=>Mn(r));const o=e.__on_r;o?e.__on_r=()=>{o(),n(!0)}:e.__on_r=()=>n(!0),Au()}function Pu(e){ue===null&&(ne===null&&Vc(),Wc()),er&&Hc()}function zu(e,t){var r=t.last;r===null?t.last=t.first=e:(r.next=e,e.prev=r,t.last=e)}function Ut(e,t,r){var n=ue;n!==null&&(n.f&ft)!==0&&(e|=ft);var o={ctx:dt,deps:null,nodes:null,f:e|We|_t,first:null,fn:t,last:null,next:null,parent:n,b:n&&n.b,prev:null,teardown:null,wv:0,ac:null};if(r)try{en(o),o.f|=Ci}catch(s){throw Fe(o),s}else t!==null&&St(o);var i=o;if(r&&i.deps===null&&i.teardown===null&&i.nodes===null&&i.first===i.last&&(i.f&Or)===0&&(i=i.first,(e&Ht)!==0&&(e&Ft)!==0&&i!==null&&(i.f|=Ft)),i!==null&&(i.parent=n,n!==null&&zu(i,n),ne!==null&&(ne.f&He)!==0&&(e&vr)===0)){var a=ne;(a.effects??=[]).push(i)}return o}function Ai(){return ne!==null&&!It}function Bn(e){const t=Ut(Dn,null,!1);return $e(t,je),t.teardown=e,t}function an(e){Pu();var t=ue.f,r=!ne&&(t&Rt)!==0&&(t&Ci)===0;if(r){var n=dt;(n.e??=[]).push(e)}else return yl(e)}function yl(e){return Ut(Nn|Mc,e,!1)}function Uu(e){Yt.ensure();const t=Ut(vr|Or,e,!0);return(r={})=>new Promise(n=>{r.outro?ur(t,()=>{Fe(t),n(void 0)}):(Fe(t),n(void 0))})}function Pi(e){return Ut(Nn,e,!1)}function Lu(e){return Ut(Ni|Or,e,!0)}function wl(e,t=0){return Ut(Dn|t,e,!0)}function Y(e,t=[],r=[],n=[]){cl(n,t,r,o=>{Ut(Dn,()=>e(...o.map(h)),!0)})}function $r(e,t=0){var r=Ut(Ht|t,e,!0);return r}function xl(e,t=0){var r=Ut(Ti|t,e,!0);return r}function nt(e){return Ut(Rt|Or,e,!0)}function kl(e){var t=e.teardown;if(t!==null){const r=er,n=ne;ra(!0),yt(null);try{t.call(null)}finally{ra(r),yt(n)}}}function Sl(e,t=!1){var r=e.first;for(e.first=e.last=null;r!==null;){const o=r.ac;o!==null&&Mn(()=>{o.abort(kr)});var n=r.next;(r.f&vr)!==0?r.parent=null:Fe(r,t),r=n}}function Du(e){for(var t=e.first;t!==null;){var r=t.next;(t.f&Rt)===0&&Fe(t),t=r}}function Fe(e,t=!0){var r=!1;(t||(e.f&Gs)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(El(e.nodes.start,e.nodes.end),r=!0),Sl(e,t&&!r),$n(e,0),$e(e,Mt);var n=e.nodes&&e.nodes.t;if(n!==null)for(const i of n)i.stop();kl(e);var o=e.parent;o!==null&&o.first!==null&&Il(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function El(e,t){for(;e!==null;){var r=e===t?null:on(e);e.remove(),e=r}}function Il(e){var t=e.parent,r=e.prev,n=e.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),t!==null&&(t.first===e&&(t.first=n),t.last===e&&(t.last=r))}function ur(e,t,r=!0){var n=[];Tl(e,n,!0);var o=()=>{r&&Fe(e),t&&t()},i=n.length;if(i>0){var a=()=>--i||o();for(var s of n)s.out(a)}else o()}function Tl(e,t,r){if((e.f&ft)===0){e.f^=ft;var n=e.nodes&&e.nodes.t;if(n!==null)for(const s of n)(s.is_global||r)&&t.push(s);for(var o=e.first;o!==null;){var i=o.next,a=(o.f&Ft)!==0||(o.f&Rt)!==0&&(e.f&Ht)!==0;Tl(o,t,a?r:!1),o=i}}}function zi(e){Rl(e,!0)}function Rl(e,t){if((e.f&ft)!==0){e.f^=ft,(e.f&je)===0&&($e(e,We),St(e));for(var r=e.first;r!==null;){var n=r.next,o=(r.f&Ft)!==0||(r.f&Rt)!==0;Rl(r,o?t:!1),r=n}var i=e.nodes&&e.nodes.t;if(i!==null)for(const a of i)(a.is_global||t)&&a.in()}}function Cl(e,t){if(e.nodes)for(var r=e.nodes.start,n=e.nodes.end;r!==null;){var o=r===n?null:on(r);t.append(r),r=o}}let Tn=!1,er=!1;function ra(e){er=e}let ne=null,It=!1;function yt(e){ne=e}let ue=null;function zt(e){ue=e}let bt=null;function Nl(e){ne!==null&&(bt===null?bt=[e]:bt.push(e))}let rt=null,ct=0,mt=null;function Zu(e){mt=e}let Ol=1,sr=0,fr=sr;function na(e){fr=e}function $l(){return++Ol}function sn(e){var t=e.f;if((t&We)!==0)return!0;if(t&He&&(e.f&=~dr),(t&Tt)!==0){for(var r=e.deps,n=r.length,o=0;o<n;o++){var i=r[o];if(sn(i)&&dl(i),i.wv>e.wv)return!0}(t&_t)!==0&&kt===null&&$e(e,je)}return!1}function Al(e,t,r=!0){var n=e.reactions;if(n!==null&&!(bt!==null&&Er.call(bt,e)))for(var o=0;o<n.length;o++){var i=n[o];(i.f&He)!==0?Al(i,t,!1):t===i&&(r?$e(i,We):(i.f&je)!==0&&$e(i,Tt),St(i))}}function Pl(e){var t=rt,r=ct,n=mt,o=ne,i=bt,a=dt,s=It,c=fr,u=e.f;rt=null,ct=0,mt=null,ne=(u&(Rt|vr))===0?e:null,bt=null,Ir(e.ctx),It=!1,fr=++sr,e.ac!==null&&(Mn(()=>{e.ac.abort(kr)}),e.ac=null);try{e.f|=vi;var d=e.fn,v=d(),p=e.deps,y=ae?.is_fork;if(rt!==null){var E;if(y||$n(e,ct),p!==null&&ct>0)for(p.length=ct+rt.length,E=0;E<rt.length;E++)p[ct+E]=rt[E];else e.deps=p=rt;if(Ai()&&(e.f&_t)!==0)for(E=ct;E<p.length;E++)(p[E].reactions??=[]).push(e)}else!y&&p!==null&&ct<p.length&&($n(e,ct),p.length=ct);if(el()&&mt!==null&&!It&&p!==null&&(e.f&(He|Tt|We))===0)for(E=0;E<mt.length;E++)Al(mt[E],e);if(o!==null&&o!==e){if(sr++,o.deps!==null)for(let I=0;I<r;I+=1)o.deps[I].rv=sr;if(t!==null)for(const I of t)I.rv=sr;mt!==null&&(n===null?n=mt:n.push(...mt))}return(e.f&Jt)!==0&&(e.f^=Jt),v}catch(I){return rl(I)}finally{e.f^=vi,rt=t,ct=r,mt=n,ne=o,bt=i,Ir(a),It=s,fr=c}}function ju(e,t){let r=t.reactions;if(r!==null){var n=zc.call(r,e);if(n!==-1){var o=r.length-1;o===0?r=t.reactions=null:(r[n]=r[o],r.pop())}}if(r===null&&(t.f&He)!==0&&(rt===null||!Er.call(rt,t))){var i=t;(i.f&_t)!==0&&(i.f^=_t,i.f&=~dr),Oi(i),fl(i),$n(i,0)}}function $n(e,t){var r=e.deps;if(r!==null)for(var n=t;n<r.length;n++)ju(e,r[n])}function en(e){var t=e.f;if((t&Mt)===0){$e(e,je);var r=ue,n=Tn;ue=e,Tn=!0;try{(t&(Ht|Ti))!==0?Du(e):Sl(e),kl(e);var o=Pl(e);e.teardown=typeof o=="function"?o:null,e.wv=Ol;var i;hi&&pu&&(e.f&We)!==0&&e.deps}finally{Tn=n,ue=r}}}async function Mu(){await Promise.resolve(),_u()}function h(e){var t=e.f,r=(t&He)!==0;if(ne!==null&&!It){var n=ue!==null&&(ue.f&Mt)!==0;if(!n&&(bt===null||!Er.call(bt,e))){var o=ne.deps;if((ne.f&vi)!==0)e.rv<sr&&(e.rv=sr,rt===null&&o!==null&&o[ct]===e?ct++:rt===null?rt=[e]:rt.push(e));else{(ne.deps??=[]).push(e);var i=e.reactions;i===null?e.reactions=[ne]:Er.call(i,ne)||i.push(ne)}}}if(er&&Qt.has(e))return Qt.get(e);if(r){var a=e;if(er){var s=a.v;return((a.f&je)===0&&a.reactions!==null||Ul(a))&&(s=$i(a)),Qt.set(a,s),s}var c=(a.f&_t)===0&&!It&&ne!==null&&(Tn||(ne.f&_t)!==0),u=a.deps===null;sn(a)&&(c&&(a.f|=_t),dl(a)),c&&!u&&zl(a)}if(kt?.has(e))return kt.get(e);if((e.f&Jt)!==0)throw e.v;return e.v}function zl(e){if(e.deps!==null){e.f|=_t;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&He)!==0&&(t.f&_t)===0&&zl(t)}}function Ul(e){if(e.v===De)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Qt.has(t)||(t.f&He)!==0&&Ul(t))return!0;return!1}function Ar(e){var t=It;try{return It=!0,e()}finally{It=t}}function Bu(e){return e.endsWith("capture")&&e!=="gotpointercapture"&&e!=="lostpointercapture"}const qu=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function Fu(e){return qu.includes(e)}const Hu={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function Wu(e){return e=e.toLowerCase(),Hu[e]??e}const Vu=["touchstart","touchmove"];function Gu(e){return Vu.includes(e)}const Ll=new Set,_i=new Set;function Dl(e,t,r,n={}){function o(i){if(n.capture||Vr.call(t,i),!i.cancelBubble)return Mn(()=>r?.call(this,i))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Bt(()=>{t.addEventListener(e,o,n)}):t.addEventListener(e,o,n),o}function qn(e,t,r,n,o){var i={capture:n,passive:o},a=Dl(e,t,r,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Bn(()=>{t.removeEventListener(e,a,i)})}function Fn(e){for(var t=0;t<e.length;t++)Ll.add(e[t]);for(var r of _i)r(e)}let oa=null;function Vr(e){var t=this,r=t.ownerDocument,n=e.type,o=e.composedPath?.()||[],i=o[0]||e.target;oa=e;var a=0,s=oa===e&&e.__root;if(s){var c=o.indexOf(s);if(c!==-1&&(t===document||t===window)){e.__root=t;return}var u=o.indexOf(t);if(u===-1)return;c<=u&&(a=c)}if(i=o[a]||e.target,i!==t){Uc(e,"currentTarget",{configurable:!0,get(){return i||r}});var d=ne,v=ue;yt(null),zt(null);try{for(var p,y=[];i!==null;){var E=i.assignedSlot||i.parentNode||i.host||null;try{var I=i["__"+n];I!=null&&(!i.disabled||e.target===i)&&I.call(i,e)}catch(k){p?y.push(k):p=k}if(e.cancelBubble||E===t||E===null)break;i=E}if(p){for(let k of y)queueMicrotask(()=>{throw k});throw p}}finally{e.__root=t,delete e.currentTarget,yt(d),zt(v)}}}function Ui(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Cr(e,t){var r=ue;r.nodes===null&&(r.nodes={start:e,end:t,a:null,t:null})}function Z(e,t){var r=(t&lu)!==0,n=(t&cu)!==0,o,i=!e.startsWith("<!>");return()=>{o===void 0&&(o=Ui(i?e:"<!>"+e),r||(o=At(o)));var a=n||pl?document.importNode(o,!0):o.cloneNode(!0);if(r){var s=At(a),c=a.lastChild;Cr(s,c)}else Cr(a,a);return a}}function Xu(e,t,r="svg"){var n=!e.startsWith("<!>"),o=`<${r}>${n?e:"<!>"+e}</${r}>`,i;return()=>{if(!i){var a=Ui(o),s=At(a);i=At(s)}var c=i.cloneNode(!0);return Cr(c,c),c}}function Ku(e,t){return Xu(e,t,"svg")}function Q(){var e=document.createDocumentFragment(),t=document.createComment(""),r=qt();return e.append(t,r),Cr(t,r),e}function T(e,t){e!==null&&e.before(t)}function G(e,t){var r=t==null?"":typeof t=="object"?t+"":t;r!==(e.__t??=e.nodeValue)&&(e.__t=r,e.nodeValue=r+"")}function Ju(e,t){return Yu(e,t)}const wr=new Map;function Yu(e,{target:t,anchor:r,props:n={},events:o,context:i,intro:a=!0}){Nu();var s=new Set,c=v=>{for(var p=0;p<v.length;p++){var y=v[p];if(!s.has(y)){s.add(y);var E=Gu(y);t.addEventListener(y,Vr,{passive:E});var I=wr.get(y);I===void 0?(document.addEventListener(y,Vr,{passive:E}),wr.set(y,1)):wr.set(y,I+1)}}};c(Ln(Ll)),_i.add(c);var u=void 0,d=Uu(()=>{var v=r??t.appendChild(qt());return xu(v,{pending:()=>{}},p=>{if(i){se({});var y=dt;y.c=i}o&&(n.$$events=o),u=e(p,n)||{},i&&le()}),()=>{for(var p of s){t.removeEventListener(p,Vr);var y=wr.get(p);--y===0?(document.removeEventListener(p,Vr),wr.delete(p)):wr.set(p,y)}_i.delete(c),v!==r&&v.parentNode?.removeChild(v)}});return Qu.set(u,d),u}let Qu=new WeakMap;class Hn{anchor;#t=new Map;#s=new Map;#e=new Map;#i=new Set;#a=!0;constructor(t,r=!0){this.anchor=t,this.#a=r}#n=()=>{var t=ae;if(this.#t.has(t)){var r=this.#t.get(t),n=this.#s.get(r);if(n)zi(n),this.#i.delete(r);else{var o=this.#e.get(r);o&&(this.#s.set(r,o.effect),this.#e.delete(r),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),n=o.effect)}for(const[i,a]of this.#t){if(this.#t.delete(i),i===t)break;const s=this.#e.get(a);s&&(Fe(s.effect),this.#e.delete(a))}for(const[i,a]of this.#s){if(i===r||this.#i.has(i))continue;const s=()=>{if(Array.from(this.#t.values()).includes(i)){var u=document.createDocumentFragment();Cl(a,u),u.append(qt()),this.#e.set(i,{effect:a,fragment:u})}else Fe(a);this.#i.delete(i),this.#s.delete(i)};this.#a||!n?(this.#i.add(i),ur(a,s,!1)):s()}}};#r=t=>{this.#t.delete(t);const r=Array.from(this.#t.values());for(const[n,o]of this.#e)r.includes(n)||(Fe(o.effect),this.#e.delete(n))};ensure(t,r){var n=ae,o=_l();if(r&&!this.#s.has(t)&&!this.#e.has(t))if(o){var i=document.createDocumentFragment(),a=qt();i.append(a),this.#e.set(t,{effect:nt(()=>r(a)),fragment:i})}else this.#s.set(t,nt(()=>r(this.anchor)));if(this.#t.set(n,t),o){for(const[s,c]of this.#s)s===t?n.unskip_effect(c):n.skip_effect(c);for(const[s,c]of this.#e)s===t?n.unskip_effect(c.effect):n.skip_effect(c.effect);n.oncommit(this.#n),n.ondiscard(this.#r)}else this.#n()}}function W(e,t,r=!1){var n=new Hn(e),o=r?Ft:0;function i(a,s){n.ensure(a,s)}$r(()=>{var a=!1;t((s,c=!0)=>{a=!0,i(c,s)}),a||i(!1,null)},o)}function Pt(e,t){return t}function ef(e,t,r){for(var n=[],o=t.length,i,a=t.length,s=0;s<o;s++){let v=t[s];ur(v,()=>{if(i){if(i.pending.delete(v),i.done.add(v),i.pending.size===0){var p=e.outrogroups;bi(Ln(i.done)),p.delete(i),p.size===0&&(e.outrogroups=null)}}else a-=1},!1)}if(a===0){var c=n.length===0&&r!==null;if(c){var u=r,d=u.parentNode;Ou(d),d.append(u),e.items.clear()}bi(t,!c)}else i={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(i)}function bi(e,t=!0){for(var r=0;r<e.length;r++)Fe(e[r],t)}var ia;function Ze(e,t,r,n,o,i=null){var a=e,s=new Map,c=(t&Ks)!==0;if(c){var u=e;a=u.appendChild(qt())}var d=null,v=ul(()=>{var N=r();return Ii(N)?N:N==null?[]:Ln(N)}),p,y=!0;function E(){k.fallback=d,tf(k,p,a,t,n),d!==null&&(p.length===0?(d.f&jt)===0?zi(d):(d.f^=jt,Gr(d,null,a)):ur(d,()=>{d=null}))}var I=$r(()=>{p=h(v);for(var N=p.length,b=new Set,w=ae,_=_l(),l=0;l<N;l+=1){var g=p[l],f=n(g,l),m=y?null:s.get(f);m?(m.v&&Rr(m.v,g),m.i&&Rr(m.i,l),_&&w.unskip_effect(m.e)):(m=rf(s,y?a:ia??=qt(),g,f,l,o,t,r),y||(m.e.f|=jt),s.set(f,m)),b.add(f)}if(N===0&&i&&!d&&(y?d=nt(()=>i(a)):(d=nt(()=>i(ia??=qt())),d.f|=jt)),!y)if(_){for(const[x,R]of s)b.has(x)||w.skip_effect(R.e);w.oncommit(E),w.ondiscard(()=>{})}else E();h(v)}),k={effect:I,items:s,outrogroups:null,fallback:d};y=!1}function qr(e){for(;e!==null&&(e.f&Rt)===0;)e=e.next;return e}function tf(e,t,r,n,o){var i=(n&ru)!==0,a=t.length,s=e.items,c=qr(e.effect.first),u,d=null,v,p=[],y=[],E,I,k,N;if(i)for(N=0;N<a;N+=1)E=t[N],I=o(E,N),k=s.get(I).e,(k.f&jt)===0&&(k.nodes?.a?.measure(),(v??=new Set).add(k));for(N=0;N<a;N+=1){if(E=t[N],I=o(E,N),k=s.get(I).e,e.outrogroups!==null)for(const R of e.outrogroups)R.pending.delete(k),R.done.delete(k);if((k.f&jt)!==0)if(k.f^=jt,k===c)Gr(k,null,r);else{var b=d?d.next:c;k===e.effect.last&&(e.effect.last=k.prev),k.prev&&(k.prev.next=k.next),k.next&&(k.next.prev=k.prev),Xt(e,d,k),Xt(e,k,b),Gr(k,b,r),d=k,p=[],y=[],c=qr(d.next);continue}if((k.f&ft)!==0&&(zi(k),i&&(k.nodes?.a?.unfix(),(v??=new Set).delete(k))),k!==c){if(u!==void 0&&u.has(k)){if(p.length<y.length){var w=y[0],_;d=w.prev;var l=p[0],g=p[p.length-1];for(_=0;_<p.length;_+=1)Gr(p[_],w,r);for(_=0;_<y.length;_+=1)u.delete(y[_]);Xt(e,l.prev,g.next),Xt(e,d,l),Xt(e,g,w),c=w,d=g,N-=1,p=[],y=[]}else u.delete(k),Gr(k,c,r),Xt(e,k.prev,k.next),Xt(e,k,d===null?e.effect.first:d.next),Xt(e,d,k),d=k;continue}for(p=[],y=[];c!==null&&c!==k;)(u??=new Set).add(c),y.push(c),c=qr(c.next);if(c===null)continue}(k.f&jt)===0&&p.push(k),d=k,c=qr(k.next)}if(e.outrogroups!==null){for(const R of e.outrogroups)R.pending.size===0&&(bi(Ln(R.done)),e.outrogroups?.delete(R));e.outrogroups.size===0&&(e.outrogroups=null)}if(c!==null||u!==void 0){var f=[];if(u!==void 0)for(k of u)(k.f&ft)===0&&f.push(k);for(;c!==null;)(c.f&ft)===0&&c!==e.fallback&&f.push(c),c=qr(c.next);var m=f.length;if(m>0){var x=(n&Ks)!==0&&a===0?r:null;if(i){for(N=0;N<m;N+=1)f[N].nodes?.a?.measure();for(N=0;N<m;N+=1)f[N].nodes?.a?.fix()}ef(e,f,x)}}i&&Bt(()=>{if(v!==void 0)for(k of v)k.nodes?.a?.apply()})}function rf(e,t,r,n,o,i,a,s){var c=(a&eu)!==0?(a&nu)===0?Tu(r,!1,!1):hr(r):null,u=(a&tu)!==0?hr(o):null;return{v:c,i:u,e:nt(()=>(i(t,c??r,u??o,s),()=>{e.delete(n)}))}}function Gr(e,t,r){if(e.nodes)for(var n=e.nodes.start,o=e.nodes.end,i=t&&(t.f&jt)===0?t.nodes.start:r;n!==null;){var a=on(n);if(i.before(n),n===o)return;n=a}}function Xt(e,t,r){t===null?e.effect.first=r:t.next=r,r===null?e.effect.last=t:r.prev=t}function nf(e,t,r=!1,n=!1,o=!1){var i=e,a="";Y(()=>{var s=ue;if(a!==(a=t()??"")&&(s.nodes!==null&&(El(s.nodes.start,s.nodes.end),s.nodes=null),a!=="")){var c=a+"";r?c=`<svg>${c}</svg>`:n&&(c=`<math>${c}</math>`);var u=Ui(c);if((r||n)&&(u=At(u)),Cr(At(u),u.lastChild),r||n)for(;At(u);)i.before(At(u));else i.before(u)}})}function ke(e,t,...r){var n=new Hn(e);$r(()=>{const o=t()??null;n.ensure(o,o&&(i=>o(i,...r)))},Ft)}function yi(e,t,r){var n=new Hn(e);$r(()=>{var o=t()??null;n.ensure(o,o&&(i=>r(i,o)))},Ft)}function of(e,t,r,n,o,i){var a=null,s=e,c=new Hn(s,!1);$r(()=>{const u=t()||null;var d=fu;if(u===null){c.ensure(null,null);return}return c.ensure(u,v=>{if(u){if(a=document.createElementNS(d,u),Cr(a,a),n){var p=a.appendChild(qt());n(a,p)}ue.nodes.end=a,v.before(a)}}),()=>{}},Ft),Bn(()=>{})}function af(e,t){var r=void 0,n;xl(()=>{r!==(r=t())&&(n&&(Fe(n),n=null),r&&(n=nt(()=>{Pi(()=>r(e))})))})}function Zl(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(r=Zl(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function sf(){for(var e,t,r=0,n="",o=arguments.length;r<o;r++)(e=arguments[r])&&(t=Zl(e))&&(n&&(n+=" "),n+=t);return n}function Li(e){return typeof e=="object"?sf(e):e??""}const aa=[...` 	
\r\fÂ \v\uFEFF`];function lf(e,t,r){var n=e==null?"":""+e;if(t&&(n=n?n+" "+t:t),r){for(var o in r)if(r[o])n=n?n+" "+o:o;else if(n.length)for(var i=o.length,a=0;(a=n.indexOf(o,a))>=0;){var s=a+i;(a===0||aa.includes(n[a-1]))&&(s===n.length||aa.includes(n[s]))?n=(a===0?"":n.substring(0,a))+n.substring(s+1):a=s}}return n===""?null:n}function sa(e,t=!1){var r=t?" !important;":";",n="";for(var o in e){var i=e[o];i!=null&&i!==""&&(n+=" "+o+": "+i+r)}return n}function ao(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function cf(e,t){if(t){var r="",n,o;if(Array.isArray(t)?(n=t[0],o=t[1]):n=t,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,a=0,s=!1,c=[];n&&c.push(...Object.keys(n).map(ao)),o&&c.push(...Object.keys(o).map(ao));var u=0,d=-1;const I=e.length;for(var v=0;v<I;v++){var p=e[v];if(s?p==="/"&&e[v-1]==="*"&&(s=!1):i?i===p&&(i=!1):p==="/"&&e[v+1]==="*"?s=!0:p==='"'||p==="'"?i=p:p==="("?a++:p===")"&&a--,!s&&i===!1&&a===0){if(p===":"&&d===-1)d=v;else if(p===";"||v===I-1){if(d!==-1){var y=ao(e.substring(u,d).trim());if(!c.includes(y)){p!==";"&&v++;var E=e.substring(u,v).trim();r+=" "+E+";"}}u=v+1,d=-1}}}}return n&&(r+=sa(n)),o&&(r+=sa(o,!0)),r=r.trim(),r===""?null:r}return e==null?null:String(e)}function gt(e,t,r,n,o,i){var a=e.__className;if(a!==r||a===void 0){var s=lf(r,n,i);s==null?e.removeAttribute("class"):t?e.className=s:e.setAttribute("class",s),e.__className=r}else if(i&&o!==i)for(var c in i){var u=!!i[c];(o==null||u!==!!o[c])&&e.classList.toggle(c,u)}return i}function so(e,t={},r,n){for(var o in r){var i=r[o];t[o]!==i&&(r[o]==null?e.style.removeProperty(o):e.style.setProperty(o,i,n))}}function uf(e,t,r,n){var o=e.__style;if(o!==t){var i=cf(t,n);i==null?e.removeAttribute("style"):e.style.cssText=i,e.__style=t}else n&&(Array.isArray(n)?(so(e,r?.[0],n[0]),so(e,r?.[1],n[1],"important")):so(e,r,n));return n}function An(e,t,r=!1){if(e.multiple){if(t==null)return;if(!Ii(t))return hu();for(var n of e.options)n.selected=t.includes(Yr(n));return}for(n of e.options){var o=Yr(n);if(Cu(o,t)){n.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function jl(e){var t=new MutationObserver(()=>{An(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Bn(()=>{t.disconnect()})}function ff(e,t,r=t){var n=new WeakSet,o=!0;bl(e,"change",i=>{var a=i?"[selected]":":checked",s;if(e.multiple)s=[].map.call(e.querySelectorAll(a),Yr);else{var c=e.querySelector(a)??e.querySelector("option:not([disabled])");s=c&&Yr(c)}r(s),ae!==null&&n.add(ae)}),Pi(()=>{var i=t();if(e===document.activeElement){var a=On??ae;if(n.has(a))return}if(An(e,i,o),o&&i===void 0){var s=e.querySelector(":checked");s!==null&&(i=Yr(s),r(i))}e.__value=i,o=!1}),jl(e)}function Yr(e){return"__value"in e?e.__value:e.value}const Fr=Symbol("class"),Hr=Symbol("style"),Ml=Symbol("is custom element"),Bl=Symbol("is html");function df(e,t){t?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function de(e,t,r,n){var o=ql(e);o[t]!==(o[t]=r)&&(t==="loading"&&(e[Bc]=r),r==null?e.removeAttribute(t):typeof r!="string"&&Fl(e).includes(t)?e[t]=r:e.setAttribute(t,r))}function hf(e,t,r,n,o=!1,i=!1){var a=ql(e),s=a[Ml],c=!a[Bl],u=t||{},d=e.tagName==="OPTION";for(var v in t)v in r||(r[v]=null);r.class?r.class=Li(r.class):r[Fr]&&(r.class=null),r[Hr]&&(r.style??=null);var p=Fl(e);for(const _ in r){let l=r[_];if(d&&_==="value"&&l==null){e.value=e.__value="",u[_]=l;continue}if(_==="class"){var y=e.namespaceURI==="http://www.w3.org/1999/xhtml";gt(e,y,l,n,t?.[Fr],r[Fr]),u[_]=l,u[Fr]=r[Fr];continue}if(_==="style"){uf(e,l,t?.[Hr],r[Hr]),u[_]=l,u[Hr]=r[Hr];continue}var E=u[_];if(!(l===E&&!(l===void 0&&e.hasAttribute(_)))){u[_]=l;var I=_[0]+_[1];if(I!=="$$")if(I==="on"){const g={},f="$$"+_;let m=_.slice(2);var k=Fu(m);if(Bu(m)&&(m=m.slice(0,-7),g.capture=!0),!k&&E){if(l!=null)continue;e.removeEventListener(m,u[f],g),u[f]=null}if(l!=null)if(k)e[`__${m}`]=l,Fn([m]);else{let x=function(R){u[_].call(this,R)};var w=x;u[f]=Dl(m,e,x,g)}else k&&(e[`__${m}`]=void 0)}else if(_==="style")de(e,_,l);else if(_==="autofocus")$u(e,!!l);else if(!s&&(_==="__value"||_==="value"&&l!=null))e.value=e.__value=l;else if(_==="selected"&&d)df(e,l);else{var N=_;c||(N=Wu(N));var b=N==="defaultValue"||N==="defaultChecked";if(l==null&&!s&&!b)if(a[_]=null,N==="value"||N==="checked"){let g=e;const f=t===void 0;if(N==="value"){let m=g.defaultValue;g.removeAttribute(N),g.defaultValue=m,g.value=g.__value=f?m:null}else{let m=g.defaultChecked;g.removeAttribute(N),g.defaultChecked=m,g.checked=f?m:!1}}else e.removeAttribute(_);else b||p.includes(N)&&(s||typeof l!="string")?(e[N]=l,N in a&&(a[N]=De)):typeof l!="function"&&de(e,N,l)}}}return u}function la(e,t,r=[],n=[],o=[],i,a=!1,s=!1){cl(o,r,n,c=>{var u=void 0,d={},v=e.nodeName==="SELECT",p=!1;if(xl(()=>{var E=t(...c.map(h)),I=hf(e,u,E,i,a,s);p&&v&&"value"in E&&An(e,E.value);for(let N of Object.getOwnPropertySymbols(d))E[N]||Fe(d[N]);for(let N of Object.getOwnPropertySymbols(E)){var k=E[N];N.description===du&&(!u||k!==u[N])&&(d[N]&&Fe(d[N]),d[N]=nt(()=>af(e,()=>k))),I[N]=k}u=I}),v){var y=e;Pi(()=>{An(y,u.value,!0),jl(y)})}p=!0})}function ql(e){return e.__attributes??={[Ml]:e.nodeName.includes("-"),[Bl]:e.namespaceURI===uu}}var ca=new Map;function Fl(e){var t=e.getAttribute("is")||e.nodeName,r=ca.get(t);if(r)return r;ca.set(t,r=[]);for(var n,o=e,i=Element.prototype;i!==o;){n=Lc(o);for(var a in n)n[a].set&&r.push(a);o=Hs(o)}return r}function Wn(e,t,r=t){var n=new WeakSet;bl(e,"input",async o=>{var i=o?e.defaultValue:e.value;if(i=lo(e)?co(i):i,r(i),ae!==null&&n.add(ae),await Mu(),i!==(i=t())){var a=e.selectionStart,s=e.selectionEnd,c=e.value.length;if(e.value=i??"",s!==null){var u=e.value.length;a===s&&s===c&&u>c?(e.selectionStart=u,e.selectionEnd=u):(e.selectionStart=a,e.selectionEnd=Math.min(s,u))}}}),Ar(t)==null&&e.value&&(r(lo(e)?co(e.value):e.value),ae!==null&&n.add(ae)),wl(()=>{var o=t();if(e===document.activeElement){var i=On??ae;if(n.has(i))return}lo(e)&&o===co(e.value)||e.type==="date"&&!o&&!e.value||o!==e.value&&(e.value=o??"")})}function lo(e){var t=e.type;return t==="number"||t==="range"}function co(e){return e===""?null:+e}function vf(e,t,r){if(e==null)return t(void 0),ve;const n=Ar(()=>e.subscribe(t,r));return n.unsubscribe?()=>n.unsubscribe():n}const xr=[];function Hl(e,t=ve){let r=null;const n=new Set;function o(s){if(Ys(e,s)&&(e=s,r)){const c=!xr.length;for(const u of n)u[1](),xr.push(u,e);if(c){for(let u=0;u<xr.length;u+=2)xr[u][0](xr[u+1]);xr.length=0}}}function i(s){o(s(e))}function a(s,c=ve){const u=[s,c];return n.add(u),n.size===1&&(r=t(o,i)||ve),s(e),()=>{n.delete(u),n.size===0&&r&&(r(),r=null)}}return{set:o,update:i,subscribe:a}}function pf(e){let t;return vf(e,r=>t=r)(),t}let mn=!1;function mf(e){var t=mn;try{return mn=!1,[e(),mn]}finally{mn=t}}const gf={get(e,t){if(!e.exclude.includes(t))return e.props[t]},set(e,t){return!1},getOwnPropertyDescriptor(e,t){if(!e.exclude.includes(t)&&t in e.props)return{enumerable:!0,configurable:!0,value:e.props[t]}},has(e,t){return e.exclude.includes(t)?!1:t in e.props},ownKeys(e){return Reflect.ownKeys(e.props).filter(t=>!e.exclude.includes(t))}};function Se(e,t,r){return new Proxy({props:e,exclude:t},gf)}const _f={get(e,t){let r=e.props.length;for(;r--;){let n=e.props[r];if(Br(n)&&(n=n()),typeof n=="object"&&n!==null&&t in n)return n[t]}},set(e,t,r){let n=e.props.length;for(;n--;){let o=e.props[n];Br(o)&&(o=o());const i=Kt(o,t);if(i&&i.set)return i.set(r),!0}return!1},getOwnPropertyDescriptor(e,t){let r=e.props.length;for(;r--;){let n=e.props[r];if(Br(n)&&(n=n()),typeof n=="object"&&n!==null&&t in n){const o=Kt(n,t);return o&&!o.configurable&&(o.configurable=!0),o}}},has(e,t){if(t===cr||t===Xs)return!1;for(let r of e.props)if(Br(r)&&(r=r()),r!=null&&t in r)return!0;return!1},ownKeys(e){const t=[];for(let r of e.props)if(Br(r)&&(r=r()),!!r){for(const n in r)t.includes(n)||t.push(n);for(const n of Object.getOwnPropertySymbols(r))t.includes(n)||t.push(n)}return t}};function Te(...e){return new Proxy({props:e},_f)}function $t(e,t,r,n){var o=(r&au)!==0,i=(r&su)!==0,a=n,s=!0,c=()=>(s&&(s=!1,a=i?Ar(n):n),a),u;if(o){var d=cr in e||Xs in e;u=Kt(e,t)?.set??(d&&t in e?b=>e[t]=b:void 0)}var v,p=!1;o?[v,p]=mf(()=>e[t]):v=e[t],v===void 0&&n!==void 0&&(v=c(),u&&(Xc(),u(v)));var y;if(y=()=>{var b=e[t];return b===void 0?c():(s=!0,b)},(r&iu)===0)return y;if(u){var E=e.$$legacy;return(function(b,w){return arguments.length>0?((!w||E||p)&&u(w?y():b),b):y()})}var I=!1,k=((r&ou)!==0?jn:ul)(()=>(I=!1,y()));o&&h(k);var N=ue;return(function(b,w){if(arguments.length>0){const _=w?h(k):o?Et(b):b;return B(k,_),I=!0,a!==void 0&&(a=_),b}return er&&I||(N.f&Mt)!==0?k.v:h(k)})}function Vn(e){dt===null&&qc(),an(()=>{const t=Ar(e);if(typeof t=="function")return t})}const bf="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(bf);const yf=typeof window<"u"?new URL(window.location.href):new URL("http://localhost/"),Wl=Hl(yf);function wf(e){const t=Number.parseInt(e,10);return!Number.isFinite(t)||t<1?1:t}function xf(e){if(e==="/")return{name:"home",params:{}};if(e==="/search")return{name:"search",params:{}};if(e==="/explore")return{name:"explore",params:{}};if(e==="/categories")return{name:"categories",params:{}};const t=e.match(/^\/book\/([^/]+)$/);if(t)return{name:"book",params:{identifier:decodeURIComponent(t[1])}};if(e==="/sitemap")return{name:"sitemap",params:{view:"authors",letter:"A",page:1}};const r=e.match(/^\/sitemap\/(authors|books)\/([^/]+)\/(\d+)$/);return r?{name:"sitemap",params:{view:r[1]==="books"?"books":"authors",letter:decodeURIComponent(r[2]),page:wf(r[3])}}:e==="/404"?{name:"notFound",params:{}}:{name:"notFound",params:{}}}function kf(e){if(e.target&&e.target!=="_self"||e.hasAttribute("download")||e.dataset.noSpa==="true")return!1;const t=new URL(e.href,window.location.origin);if(t.origin!==window.location.origin)return!1;const r=["/api","/admin","/actuator","/ws","/topic","/sitemap.xml","/sitemap-xml","/r"];for(const n of r)if(t.pathname===n||t.pathname.startsWith(`${n}/`))return!1;return!0}function Vl(){Wl.set(new URL(window.location.href))}function Pr(e,t=!1){const r=new URL(e,window.location.origin);t?window.history.replaceState(null,"",`${r.pathname}${r.search}${r.hash}`):window.history.pushState(null,"",`${r.pathname}${r.search}${r.hash}`),Vl()}function Sf(){const e=()=>{Vl()},t=r=>{if(r.defaultPrevented||r.button!==0||r.metaKey||r.ctrlKey||r.shiftKey||r.altKey)return;const n=r.target;if(!(n instanceof Element))return;const o=n.closest("a[href]");if(!(o instanceof HTMLAnchorElement)||!kf(o))return;const i=new URL(o.href,window.location.origin);r.preventDefault(),Pr(`${i.pathname}${i.search}${i.hash}`)};return window.addEventListener("popstate",e),document.addEventListener("click",t),()=>{window.removeEventListener("popstate",e),document.removeEventListener("click",t)}}function C(e,t,r){function n(s,c){var u;Object.defineProperty(s,"_zod",{value:s._zod??{},enumerable:!1}),(u=s._zod).traits??(u.traits=new Set),s._zod.traits.add(e),t(s,c);for(const d in a.prototype)d in s||Object.defineProperty(s,d,{value:a.prototype[d].bind(s)});s._zod.constr=a,s._zod.def=c}const o=r?.Parent??Object;class i extends o{}Object.defineProperty(i,"name",{value:e});function a(s){var c;const u=r?.Parent?new i:this;n(u,s),(c=u._zod).deferred??(c.deferred=[]);for(const d of u._zod.deferred)d();return u}return Object.defineProperty(a,"init",{value:n}),Object.defineProperty(a,Symbol.hasInstance,{value:s=>r?.Parent&&s instanceof r.Parent?!0:s?._zod?.traits?.has(e)}),Object.defineProperty(a,"name",{value:e}),a}class tn extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const Gl={};function tr(e){return Gl}function Ef(e){const t=Object.values(e).filter(n=>typeof n=="number");return Object.entries(e).filter(([n,o])=>t.indexOf(+n)===-1).map(([n,o])=>o)}function If(e,t){return typeof t=="bigint"?t.toString():t}function Xl(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function Di(e){return e==null}function Zi(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function Tf(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,o=r>n?r:n,i=Number.parseInt(e.toFixed(o).replace(".","")),a=Number.parseInt(t.toFixed(o).replace(".",""));return i%a/10**o}function _e(e,t,r){Object.defineProperty(e,t,{get(){{const n=r();return e[t]=n,n}},set(n){Object.defineProperty(e,t,{value:n})},configurable:!0})}function ji(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function Wr(e){return JSON.stringify(e)}const Kl=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function wi(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const Rf=Xl(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function Pn(e){if(wi(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(wi(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}const Cf=new Set(["string","number","symbol"]);function Gn(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function pr(e,t,r){const n=new e._zod.constr(t??e._zod.def);return(!t||r?.parent)&&(n._zod.parent=e),n}function H(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function Nf(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const Of={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function $f(e,t){const r={},n=e._zod.def;for(const o in t){if(!(o in n.shape))throw new Error(`Unrecognized key: "${o}"`);t[o]&&(r[o]=n.shape[o])}return pr(e,{...e._zod.def,shape:r,checks:[]})}function Af(e,t){const r={...e._zod.def.shape},n=e._zod.def;for(const o in t){if(!(o in n.shape))throw new Error(`Unrecognized key: "${o}"`);t[o]&&delete r[o]}return pr(e,{...e._zod.def,shape:r,checks:[]})}function Pf(e,t){if(!Pn(t))throw new Error("Invalid input to extend: expected a plain object");const r={...e._zod.def,get shape(){const n={...e._zod.def.shape,...t};return ji(this,"shape",n),n},checks:[]};return pr(e,r)}function zf(e,t){return pr(e,{...e._zod.def,get shape(){const r={...e._zod.def.shape,...t._zod.def.shape};return ji(this,"shape",r),r},catchall:t._zod.def.catchall,checks:[]})}function Uf(e,t,r){const n=t._zod.def.shape,o={...n};if(r)for(const i in r){if(!(i in n))throw new Error(`Unrecognized key: "${i}"`);r[i]&&(o[i]=e?new e({type:"optional",innerType:n[i]}):n[i])}else for(const i in n)o[i]=e?new e({type:"optional",innerType:n[i]}):n[i];return pr(t,{...t._zod.def,shape:o,checks:[]})}function Lf(e,t,r){const n=t._zod.def.shape,o={...n};if(r)for(const i in r){if(!(i in o))throw new Error(`Unrecognized key: "${i}"`);r[i]&&(o[i]=new e({type:"nonoptional",innerType:n[i]}))}else for(const i in n)o[i]=new e({type:"nonoptional",innerType:n[i]});return pr(t,{...t._zod.def,shape:o,checks:[]})}function Qr(e,t=0){for(let r=t;r<e.issues.length;r++)if(e.issues[r]?.continue!==!0)return!0;return!1}function lr(e,t){return t.map(r=>{var n;return(n=r).path??(n.path=[]),r.path.unshift(e),r})}function gn(e){return typeof e=="string"?e:e?.message}function rr(e,t,r){const n={...e,path:e.path??[]};if(!e.message){const o=gn(e.inst?._zod.def?.error?.(e))??gn(t?.error?.(e))??gn(r.customError?.(e))??gn(r.localeError?.(e))??"Invalid input";n.message=o}return delete n.inst,delete n.continue,t?.reportInput||delete n.input,n}function Mi(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function rn(...e){const[t,r,n]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:n}:{...t}}const Jl=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get(){return JSON.stringify(t,If,2)},enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Yl=C("$ZodError",Jl),Ql=C("$ZodError",Jl,{Parent:Error});function Df(e,t=r=>r.message){const r={},n=[];for(const o of e.issues)o.path.length>0?(r[o.path[0]]=r[o.path[0]]||[],r[o.path[0]].push(t(o))):n.push(t(o));return{formErrors:n,fieldErrors:r}}function Zf(e,t){const r=t||function(i){return i.message},n={_errors:[]},o=i=>{for(const a of i.issues)if(a.code==="invalid_union"&&a.errors.length)a.errors.map(s=>o({issues:s}));else if(a.code==="invalid_key")o({issues:a.issues});else if(a.code==="invalid_element")o({issues:a.issues});else if(a.path.length===0)n._errors.push(r(a));else{let s=n,c=0;for(;c<a.path.length;){const u=a.path[c];c===a.path.length-1?(s[u]=s[u]||{_errors:[]},s[u]._errors.push(r(a))):s[u]=s[u]||{_errors:[]},s=s[u],c++}}};return o(e),n}const jf=e=>(t,r,n,o)=>{const i=n?Object.assign(n,{async:!1}):{async:!1},a=t._zod.run({value:r,issues:[]},i);if(a instanceof Promise)throw new tn;if(a.issues.length){const s=new(o?.Err??e)(a.issues.map(c=>rr(c,i,tr())));throw Kl(s,o?.callee),s}return a.value},Mf=e=>async(t,r,n,o)=>{const i=n?Object.assign(n,{async:!0}):{async:!0};let a=t._zod.run({value:r,issues:[]},i);if(a instanceof Promise&&(a=await a),a.issues.length){const s=new(o?.Err??e)(a.issues.map(c=>rr(c,i,tr())));throw Kl(s,o?.callee),s}return a.value},ec=e=>(t,r,n)=>{const o=n?{...n,async:!1}:{async:!1},i=t._zod.run({value:r,issues:[]},o);if(i instanceof Promise)throw new tn;return i.issues.length?{success:!1,error:new(e??Yl)(i.issues.map(a=>rr(a,o,tr())))}:{success:!0,data:i.value}},Bf=ec(Ql),tc=e=>async(t,r,n)=>{const o=n?Object.assign(n,{async:!0}):{async:!0};let i=t._zod.run({value:r,issues:[]},o);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(a=>rr(a,o,tr())))}:{success:!0,data:i.value}},qf=tc(Ql),Ff=/^[cC][^\s-]{8,}$/,Hf=/^[0-9a-z]+$/,Wf=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Vf=/^[0-9a-vA-V]{20}$/,Gf=/^[A-Za-z0-9]{27}$/,Xf=/^[a-zA-Z0-9_-]{21}$/,Kf=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Jf=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,ua=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,Yf=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,Qf="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function ed(){return new RegExp(Qf,"u")}const td=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,rd=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,nd=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,od=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,id=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,rc=/^[A-Za-z0-9_-]*$/,ad=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,sd=/^\+(?:[0-9]){6,14}[0-9]$/,nc="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",ld=new RegExp(`^${nc}$`);function oc(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function cd(e){return new RegExp(`^${oc(e)}$`)}function ud(e){const t=oc({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-]\\d{2}:\\d{2})");const n=`${t}(?:${r.join("|")})`;return new RegExp(`^${nc}T(?:${n})$`)}const fd=e=>{const t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},dd=/^\d+$/,hd=/^-?\d+(?:\.\d+)?/i,vd=/true|false/i,pd=/null/i,md=/^[^A-Z]*$/,gd=/^[^a-z]*$/,ot=C("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),ic={number:"number",bigint:"bigint",object:"date"},ac=C("$ZodCheckLessThan",(e,t)=>{ot.init(e,t);const r=ic[typeof t.value];e._zod.onattach.push(n=>{const o=n._zod.bag,i=(t.inclusive?o.maximum:o.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<i&&(t.inclusive?o.maximum=t.value:o.exclusiveMaximum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value<=t.value:n.value<t.value)||n.issues.push({origin:r,code:"too_big",maximum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),sc=C("$ZodCheckGreaterThan",(e,t)=>{ot.init(e,t);const r=ic[typeof t.value];e._zod.onattach.push(n=>{const o=n._zod.bag,i=(t.inclusive?o.minimum:o.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>i&&(t.inclusive?o.minimum=t.value:o.exclusiveMinimum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value>=t.value:n.value>t.value)||n.issues.push({origin:r,code:"too_small",minimum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),_d=C("$ZodCheckMultipleOf",(e,t)=>{ot.init(e,t),e._zod.onattach.push(r=>{var n;(n=r._zod.bag).multipleOf??(n.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%t.value===BigInt(0):Tf(r.value,t.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),bd=C("$ZodCheckNumberFormat",(e,t)=>{ot.init(e,t),t.format=t.format||"float64";const r=t.format?.includes("int"),n=r?"int":"number",[o,i]=Of[t.format];e._zod.onattach.push(a=>{const s=a._zod.bag;s.format=t.format,s.minimum=o,s.maximum=i,r&&(s.pattern=dd)}),e._zod.check=a=>{const s=a.value;if(r){if(!Number.isInteger(s)){a.issues.push({expected:n,format:t.format,code:"invalid_type",input:s,inst:e});return}if(!Number.isSafeInteger(s)){s>0?a.issues.push({input:s,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort}):a.issues.push({input:s,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort});return}}s<o&&a.issues.push({origin:"number",input:s,code:"too_small",minimum:o,inclusive:!0,inst:e,continue:!t.abort}),s>i&&a.issues.push({origin:"number",input:s,code:"too_big",maximum:i,inst:e})}}),yd=C("$ZodCheckMaxLength",(e,t)=>{var r;ot.init(e,t),(r=e._zod.def).when??(r.when=n=>{const o=n.value;return!Di(o)&&o.length!==void 0}),e._zod.onattach.push(n=>{const o=n._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<o&&(n._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{const o=n.value;if(o.length<=t.maximum)return;const a=Mi(o);n.issues.push({origin:a,code:"too_big",maximum:t.maximum,inclusive:!0,input:o,inst:e,continue:!t.abort})}}),wd=C("$ZodCheckMinLength",(e,t)=>{var r;ot.init(e,t),(r=e._zod.def).when??(r.when=n=>{const o=n.value;return!Di(o)&&o.length!==void 0}),e._zod.onattach.push(n=>{const o=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>o&&(n._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{const o=n.value;if(o.length>=t.minimum)return;const a=Mi(o);n.issues.push({origin:a,code:"too_small",minimum:t.minimum,inclusive:!0,input:o,inst:e,continue:!t.abort})}}),xd=C("$ZodCheckLengthEquals",(e,t)=>{var r;ot.init(e,t),(r=e._zod.def).when??(r.when=n=>{const o=n.value;return!Di(o)&&o.length!==void 0}),e._zod.onattach.push(n=>{const o=n._zod.bag;o.minimum=t.length,o.maximum=t.length,o.length=t.length}),e._zod.check=n=>{const o=n.value,i=o.length;if(i===t.length)return;const a=Mi(o),s=i>t.length;n.issues.push({origin:a,...s?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),Xn=C("$ZodCheckStringFormat",(e,t)=>{var r,n;ot.init(e,t),e._zod.onattach.push(o=>{const i=o._zod.bag;i.format=t.format,t.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=o=>{t.pattern.lastIndex=0,!t.pattern.test(o.value)&&o.issues.push({origin:"string",code:"invalid_format",format:t.format,input:o.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(n=e._zod).check??(n.check=()=>{})}),kd=C("$ZodCheckRegex",(e,t)=>{Xn.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),Sd=C("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=md),Xn.init(e,t)}),Ed=C("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=gd),Xn.init(e,t)}),Id=C("$ZodCheckIncludes",(e,t)=>{ot.init(e,t);const r=Gn(t.includes),n=new RegExp(typeof t.position=="number"?`^.{${t.position}}${r}`:r);t.pattern=n,e._zod.onattach.push(o=>{const i=o._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(n)}),e._zod.check=o=>{o.value.includes(t.includes,t.position)||o.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:o.value,inst:e,continue:!t.abort})}}),Td=C("$ZodCheckStartsWith",(e,t)=>{ot.init(e,t);const r=new RegExp(`^${Gn(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const o=n._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(r)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),Rd=C("$ZodCheckEndsWith",(e,t)=>{ot.init(e,t);const r=new RegExp(`.*${Gn(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const o=n._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(r)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}}),Cd=C("$ZodCheckOverwrite",(e,t)=>{ot.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}});class Nd{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const n=t.split(`
`).filter(a=>a),o=Math.min(...n.map(a=>a.length-a.trimStart().length)),i=n.map(a=>a.slice(o)).map(a=>" ".repeat(this.indent*2)+a);for(const a of i)this.content.push(a)}compile(){const t=Function,r=this?.args,o=[...(this?.content??[""]).map(i=>`  ${i}`)];return new t(...r,o.join(`
`))}}const Od={major:4,minor:0,patch:0},be=C("$ZodType",(e,t)=>{var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=Od;const n=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&n.unshift(e);for(const o of n)for(const i of o._zod.onattach)i(e);if(n.length===0)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const o=(i,a,s)=>{let c=Qr(i),u;for(const d of a){if(d._zod.def.when){if(!d._zod.def.when(i))continue}else if(c)continue;const v=i.issues.length,p=d._zod.check(i);if(p instanceof Promise&&s?.async===!1)throw new tn;if(u||p instanceof Promise)u=(u??Promise.resolve()).then(async()=>{await p,i.issues.length!==v&&(c||(c=Qr(i,v)))});else{if(i.issues.length===v)continue;c||(c=Qr(i,v))}}return u?u.then(()=>i):i};e._zod.run=(i,a)=>{const s=e._zod.parse(i,a);if(s instanceof Promise){if(a.async===!1)throw new tn;return s.then(c=>o(c,n,a))}return o(s,n,a)}}e["~standard"]={validate:o=>{try{const i=Bf(e,o);return i.success?{value:i.data}:{issues:i.error?.issues}}catch{return qf(e,o).then(a=>a.success?{value:a.data}:{issues:a.error?.issues})}},vendor:"zod",version:1}}),Bi=C("$ZodString",(e,t)=>{be.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??fd(e._zod.bag),e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),ye=C("$ZodStringFormat",(e,t)=>{Xn.init(e,t),Bi.init(e,t)}),$d=C("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=Jf),ye.init(e,t)}),Ad=C("$ZodUUID",(e,t)=>{if(t.version){const n={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(n===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=ua(n))}else t.pattern??(t.pattern=ua());ye.init(e,t)}),Pd=C("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=Yf),ye.init(e,t)}),zd=C("$ZodURL",(e,t)=>{ye.init(e,t),e._zod.check=r=>{try{const n=r.value,o=new URL(n),i=o.href;t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(o.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:ad.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(o.protocol.endsWith(":")?o.protocol.slice(0,-1):o.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),!n.endsWith("/")&&i.endsWith("/")?r.value=i.slice(0,-1):r.value=i;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),Ud=C("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=ed()),ye.init(e,t)}),Ld=C("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=Xf),ye.init(e,t)}),Dd=C("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=Ff),ye.init(e,t)}),Zd=C("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=Hf),ye.init(e,t)}),jd=C("$ZodULID",(e,t)=>{t.pattern??(t.pattern=Wf),ye.init(e,t)}),Md=C("$ZodXID",(e,t)=>{t.pattern??(t.pattern=Vf),ye.init(e,t)}),Bd=C("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=Gf),ye.init(e,t)}),qd=C("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=ud(t)),ye.init(e,t)}),Fd=C("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=ld),ye.init(e,t)}),Hd=C("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=cd(t)),ye.init(e,t)}),Wd=C("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=Kf),ye.init(e,t)}),Vd=C("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=td),ye.init(e,t),e._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv4"})}),Gd=C("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=rd),ye.init(e,t),e._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),Xd=C("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=nd),ye.init(e,t)}),Kd=C("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=od),ye.init(e,t),e._zod.check=r=>{const[n,o]=r.value.split("/");try{if(!o)throw new Error;const i=Number(o);if(`${i}`!==o)throw new Error;if(i<0||i>128)throw new Error;new URL(`http://[${n}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function lc(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const Jd=C("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=id),ye.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{lc(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function Yd(e){if(!rc.test(e))return!1;const t=e.replace(/[-_]/g,n=>n==="-"?"+":"/"),r=t.padEnd(Math.ceil(t.length/4)*4,"=");return lc(r)}const Qd=C("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=rc),ye.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{Yd(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),eh=C("$ZodE164",(e,t)=>{t.pattern??(t.pattern=sd),ye.init(e,t)});function th(e,t=null){try{const r=e.split(".");if(r.length!==3)return!1;const[n]=r;if(!n)return!1;const o=JSON.parse(atob(n));return!("typ"in o&&o?.typ!=="JWT"||!o.alg||t&&(!("alg"in o)||o.alg!==t))}catch{return!1}}const rh=C("$ZodJWT",(e,t)=>{ye.init(e,t),e._zod.check=r=>{th(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),cc=C("$ZodNumber",(e,t)=>{be.init(e,t),e._zod.pattern=e._zod.bag.pattern??hd,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=Number(r.value)}catch{}const o=r.value;if(typeof o=="number"&&!Number.isNaN(o)&&Number.isFinite(o))return r;const i=typeof o=="number"?Number.isNaN(o)?"NaN":Number.isFinite(o)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:o,inst:e,...i?{received:i}:{}}),r}}),nh=C("$ZodNumber",(e,t)=>{bd.init(e,t),cc.init(e,t)}),oh=C("$ZodBoolean",(e,t)=>{be.init(e,t),e._zod.pattern=vd,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=!!r.value}catch{}const o=r.value;return typeof o=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:o,inst:e}),r}}),ih=C("$ZodNull",(e,t)=>{be.init(e,t),e._zod.pattern=pd,e._zod.values=new Set([null]),e._zod.parse=(r,n)=>{const o=r.value;return o===null||r.issues.push({expected:"null",code:"invalid_type",input:o,inst:e}),r}}),ah=C("$ZodUnknown",(e,t)=>{be.init(e,t),e._zod.parse=r=>r}),sh=C("$ZodNever",(e,t)=>{be.init(e,t),e._zod.parse=(r,n)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)});function fa(e,t,r){e.issues.length&&t.issues.push(...lr(r,e.issues)),t.value[r]=e.value}const lh=C("$ZodArray",(e,t)=>{be.init(e,t),e._zod.parse=(r,n)=>{const o=r.value;if(!Array.isArray(o))return r.issues.push({expected:"array",code:"invalid_type",input:o,inst:e}),r;r.value=Array(o.length);const i=[];for(let a=0;a<o.length;a++){const s=o[a],c=t.element._zod.run({value:s,issues:[]},n);c instanceof Promise?i.push(c.then(u=>fa(u,r,a))):fa(c,r,a)}return i.length?Promise.all(i).then(()=>r):r}});function _n(e,t,r){e.issues.length&&t.issues.push(...lr(r,e.issues)),t.value[r]=e.value}function da(e,t,r,n){e.issues.length?n[r]===void 0?r in n?t.value[r]=void 0:t.value[r]=e.value:t.issues.push(...lr(r,e.issues)):e.value===void 0?r in n&&(t.value[r]=void 0):t.value[r]=e.value}const ch=C("$ZodObject",(e,t)=>{be.init(e,t);const r=Xl(()=>{const v=Object.keys(t.shape);for(const y of v)if(!(t.shape[y]instanceof be))throw new Error(`Invalid element at key "${y}": expected a Zod schema`);const p=Nf(t.shape);return{shape:t.shape,keys:v,keySet:new Set(v),numKeys:v.length,optionalKeys:new Set(p)}});_e(e._zod,"propValues",()=>{const v=t.shape,p={};for(const y in v){const E=v[y]._zod;if(E.values){p[y]??(p[y]=new Set);for(const I of E.values)p[y].add(I)}}return p});const n=v=>{const p=new Nd(["shape","payload","ctx"]),y=r.value,E=b=>{const w=Wr(b);return`shape[${w}]._zod.run({ value: input[${w}], issues: [] }, ctx)`};p.write("const input = payload.value;");const I=Object.create(null);let k=0;for(const b of y.keys)I[b]=`key_${k++}`;p.write("const newResult = {}");for(const b of y.keys)if(y.optionalKeys.has(b)){const w=I[b];p.write(`const ${w} = ${E(b)};`);const _=Wr(b);p.write(`
        if (${w}.issues.length) {
          if (input[${_}] === undefined) {
            if (${_} in input) {
              newResult[${_}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${w}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${_}, ...iss.path] : [${_}],
              }))
            );
          }
        } else if (${w}.value === undefined) {
          if (${_} in input) newResult[${_}] = undefined;
        } else {
          newResult[${_}] = ${w}.value;
        }
        `)}else{const w=I[b];p.write(`const ${w} = ${E(b)};`),p.write(`
          if (${w}.issues.length) payload.issues = payload.issues.concat(${w}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${Wr(b)}, ...iss.path] : [${Wr(b)}]
          })));`),p.write(`newResult[${Wr(b)}] = ${w}.value`)}p.write("payload.value = newResult;"),p.write("return payload;");const N=p.compile();return(b,w)=>N(v,b,w)};let o;const i=wi,a=!Gl.jitless,c=a&&Rf.value,u=t.catchall;let d;e._zod.parse=(v,p)=>{d??(d=r.value);const y=v.value;if(!i(y))return v.issues.push({expected:"object",code:"invalid_type",input:y,inst:e}),v;const E=[];if(a&&c&&p?.async===!1&&p.jitless!==!0)o||(o=n(t.shape)),v=o(v,p);else{v.value={};const w=d.shape;for(const _ of d.keys){const l=w[_],g=l._zod.run({value:y[_],issues:[]},p),f=l._zod.optin==="optional"&&l._zod.optout==="optional";g instanceof Promise?E.push(g.then(m=>f?da(m,v,_,y):_n(m,v,_))):f?da(g,v,_,y):_n(g,v,_)}}if(!u)return E.length?Promise.all(E).then(()=>v):v;const I=[],k=d.keySet,N=u._zod,b=N.def.type;for(const w of Object.keys(y)){if(k.has(w))continue;if(b==="never"){I.push(w);continue}const _=N.run({value:y[w],issues:[]},p);_ instanceof Promise?E.push(_.then(l=>_n(l,v,w))):_n(_,v,w)}return I.length&&v.issues.push({code:"unrecognized_keys",keys:I,input:y,inst:e}),E.length?Promise.all(E).then(()=>v):v}});function ha(e,t,r,n){for(const o of e)if(o.issues.length===0)return t.value=o.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(o=>o.issues.map(i=>rr(i,n,tr())))}),t}const uh=C("$ZodUnion",(e,t)=>{be.init(e,t),_e(e._zod,"optin",()=>t.options.some(r=>r._zod.optin==="optional")?"optional":void 0),_e(e._zod,"optout",()=>t.options.some(r=>r._zod.optout==="optional")?"optional":void 0),_e(e._zod,"values",()=>{if(t.options.every(r=>r._zod.values))return new Set(t.options.flatMap(r=>Array.from(r._zod.values)))}),_e(e._zod,"pattern",()=>{if(t.options.every(r=>r._zod.pattern)){const r=t.options.map(n=>n._zod.pattern);return new RegExp(`^(${r.map(n=>Zi(n.source)).join("|")})$`)}}),e._zod.parse=(r,n)=>{let o=!1;const i=[];for(const a of t.options){const s=a._zod.run({value:r.value,issues:[]},n);if(s instanceof Promise)i.push(s),o=!0;else{if(s.issues.length===0)return s;i.push(s)}}return o?Promise.all(i).then(a=>ha(a,r,e,n)):ha(i,r,e,n)}}),fh=C("$ZodIntersection",(e,t)=>{be.init(e,t),e._zod.parse=(r,n)=>{const o=r.value,i=t.left._zod.run({value:o,issues:[]},n),a=t.right._zod.run({value:o,issues:[]},n);return i instanceof Promise||a instanceof Promise?Promise.all([i,a]).then(([c,u])=>va(r,c,u)):va(r,i,a)}});function xi(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Pn(e)&&Pn(t)){const r=Object.keys(t),n=Object.keys(e).filter(i=>r.indexOf(i)!==-1),o={...e,...t};for(const i of n){const a=xi(e[i],t[i]);if(!a.valid)return{valid:!1,mergeErrorPath:[i,...a.mergeErrorPath]};o[i]=a.data}return{valid:!0,data:o}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let n=0;n<e.length;n++){const o=e[n],i=t[n],a=xi(o,i);if(!a.valid)return{valid:!1,mergeErrorPath:[n,...a.mergeErrorPath]};r.push(a.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function va(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),Qr(e))return e;const n=xi(t.value,r.value);if(!n.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return e.value=n.data,e}const dh=C("$ZodRecord",(e,t)=>{be.init(e,t),e._zod.parse=(r,n)=>{const o=r.value;if(!Pn(o))return r.issues.push({expected:"record",code:"invalid_type",input:o,inst:e}),r;const i=[];if(t.keyType._zod.values){const a=t.keyType._zod.values;r.value={};for(const c of a)if(typeof c=="string"||typeof c=="number"||typeof c=="symbol"){const u=t.valueType._zod.run({value:o[c],issues:[]},n);u instanceof Promise?i.push(u.then(d=>{d.issues.length&&r.issues.push(...lr(c,d.issues)),r.value[c]=d.value})):(u.issues.length&&r.issues.push(...lr(c,u.issues)),r.value[c]=u.value)}let s;for(const c in o)a.has(c)||(s=s??[],s.push(c));s&&s.length>0&&r.issues.push({code:"unrecognized_keys",input:o,inst:e,keys:s})}else{r.value={};for(const a of Reflect.ownKeys(o)){if(a==="__proto__")continue;const s=t.keyType._zod.run({value:a,issues:[]},n);if(s instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(s.issues.length){r.issues.push({origin:"record",code:"invalid_key",issues:s.issues.map(u=>rr(u,n,tr())),input:a,path:[a],inst:e}),r.value[s.value]=s.value;continue}const c=t.valueType._zod.run({value:o[a],issues:[]},n);c instanceof Promise?i.push(c.then(u=>{u.issues.length&&r.issues.push(...lr(a,u.issues)),r.value[s.value]=u.value})):(c.issues.length&&r.issues.push(...lr(a,c.issues)),r.value[s.value]=c.value)}}return i.length?Promise.all(i).then(()=>r):r}}),hh=C("$ZodEnum",(e,t)=>{be.init(e,t);const r=Ef(t.entries);e._zod.values=new Set(r),e._zod.pattern=new RegExp(`^(${r.filter(n=>Cf.has(typeof n)).map(n=>typeof n=="string"?Gn(n):n.toString()).join("|")})$`),e._zod.parse=(n,o)=>{const i=n.value;return e._zod.values.has(i)||n.issues.push({code:"invalid_value",values:r,input:i,inst:e}),n}}),vh=C("$ZodTransform",(e,t)=>{be.init(e,t),e._zod.parse=(r,n)=>{const o=t.transform(r.value,r);if(n.async)return(o instanceof Promise?o:Promise.resolve(o)).then(a=>(r.value=a,r));if(o instanceof Promise)throw new tn;return r.value=o,r}}),ph=C("$ZodOptional",(e,t)=>{be.init(e,t),e._zod.optin="optional",e._zod.optout="optional",_e(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),_e(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${Zi(r.source)})?$`):void 0}),e._zod.parse=(r,n)=>t.innerType._zod.optin==="optional"?t.innerType._zod.run(r,n):r.value===void 0?r:t.innerType._zod.run(r,n)}),mh=C("$ZodNullable",(e,t)=>{be.init(e,t),_e(e._zod,"optin",()=>t.innerType._zod.optin),_e(e._zod,"optout",()=>t.innerType._zod.optout),_e(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${Zi(r.source)}|null)$`):void 0}),_e(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,n)=>r.value===null?r:t.innerType._zod.run(r,n)}),gh=C("$ZodDefault",(e,t)=>{be.init(e,t),e._zod.optin="optional",_e(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(r.value===void 0)return r.value=t.defaultValue,r;const o=t.innerType._zod.run(r,n);return o instanceof Promise?o.then(i=>pa(i,t)):pa(o,t)}});function pa(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const _h=C("$ZodPrefault",(e,t)=>{be.init(e,t),e._zod.optin="optional",_e(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>(r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,n))}),bh=C("$ZodNonOptional",(e,t)=>{be.init(e,t),_e(e._zod,"values",()=>{const r=t.innerType._zod.values;return r?new Set([...r].filter(n=>n!==void 0)):void 0}),e._zod.parse=(r,n)=>{const o=t.innerType._zod.run(r,n);return o instanceof Promise?o.then(i=>ma(i,e)):ma(o,e)}});function ma(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const yh=C("$ZodCatch",(e,t)=>{be.init(e,t),e._zod.optin="optional",_e(e._zod,"optout",()=>t.innerType._zod.optout),_e(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{const o=t.innerType._zod.run(r,n);return o instanceof Promise?o.then(i=>(r.value=i.value,i.issues.length&&(r.value=t.catchValue({...r,error:{issues:i.issues.map(a=>rr(a,n,tr()))},input:r.value}),r.issues=[]),r)):(r.value=o.value,o.issues.length&&(r.value=t.catchValue({...r,error:{issues:o.issues.map(i=>rr(i,n,tr()))},input:r.value}),r.issues=[]),r)}}),wh=C("$ZodPipe",(e,t)=>{be.init(e,t),_e(e._zod,"values",()=>t.in._zod.values),_e(e._zod,"optin",()=>t.in._zod.optin),_e(e._zod,"optout",()=>t.out._zod.optout),e._zod.parse=(r,n)=>{const o=t.in._zod.run(r,n);return o instanceof Promise?o.then(i=>ga(i,t,n)):ga(o,t,n)}});function ga(e,t,r){return Qr(e)?e:t.out._zod.run({value:e.value,issues:e.issues},r)}const xh=C("$ZodReadonly",(e,t)=>{be.init(e,t),_e(e._zod,"propValues",()=>t.innerType._zod.propValues),_e(e._zod,"values",()=>t.innerType._zod.values),_e(e._zod,"optin",()=>t.innerType._zod.optin),_e(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(r,n)=>{const o=t.innerType._zod.run(r,n);return o instanceof Promise?o.then(_a):_a(o)}});function _a(e){return e.value=Object.freeze(e.value),e}const kh=C("$ZodCustom",(e,t)=>{ot.init(e,t),be.init(e,t),e._zod.parse=(r,n)=>r,e._zod.check=r=>{const n=r.value,o=t.fn(n);if(o instanceof Promise)return o.then(i=>ba(i,r,n,e));ba(o,r,n,e)}});function ba(e,t,r,n){if(!e){const o={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(o.params=n._zod.def.params),t.issues.push(rn(o))}}class Sh{constructor(){this._map=new Map,this._idmap=new Map}add(t,...r){const n=r[0];if(this._map.set(t,n),n&&typeof n=="object"&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){const r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){const r=t._zod.parent;if(r){const n={...this.get(r)??{}};return delete n.id,{...n,...this._map.get(t)}}return this._map.get(t)}has(t){return this._map.has(t)}}function Eh(){return new Sh}const bn=Eh();function Ih(e,t){return new e({type:"string",...H(t)})}function Th(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...H(t)})}function ya(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...H(t)})}function Rh(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...H(t)})}function Ch(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...H(t)})}function Nh(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...H(t)})}function Oh(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...H(t)})}function $h(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...H(t)})}function Ah(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...H(t)})}function Ph(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...H(t)})}function zh(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...H(t)})}function Uh(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...H(t)})}function Lh(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...H(t)})}function Dh(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...H(t)})}function Zh(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...H(t)})}function jh(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...H(t)})}function Mh(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...H(t)})}function Bh(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...H(t)})}function qh(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...H(t)})}function Fh(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...H(t)})}function Hh(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...H(t)})}function Wh(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...H(t)})}function Vh(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...H(t)})}function Gh(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...H(t)})}function Xh(e,t){return new e({type:"string",format:"date",check:"string_format",...H(t)})}function Kh(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...H(t)})}function Jh(e,t){return new e({type:"string",format:"duration",check:"string_format",...H(t)})}function Yh(e,t){return new e({type:"number",checks:[],...H(t)})}function Qh(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...H(t)})}function ev(e,t){return new e({type:"boolean",...H(t)})}function tv(e,t){return new e({type:"null",...H(t)})}function rv(e){return new e({type:"unknown"})}function nv(e,t){return new e({type:"never",...H(t)})}function wa(e,t){return new ac({check:"less_than",...H(t),value:e,inclusive:!1})}function uo(e,t){return new ac({check:"less_than",...H(t),value:e,inclusive:!0})}function xa(e,t){return new sc({check:"greater_than",...H(t),value:e,inclusive:!1})}function fo(e,t){return new sc({check:"greater_than",...H(t),value:e,inclusive:!0})}function ka(e,t){return new _d({check:"multiple_of",...H(t),value:e})}function uc(e,t){return new yd({check:"max_length",...H(t),maximum:e})}function zn(e,t){return new wd({check:"min_length",...H(t),minimum:e})}function fc(e,t){return new xd({check:"length_equals",...H(t),length:e})}function ov(e,t){return new kd({check:"string_format",format:"regex",...H(t),pattern:e})}function iv(e){return new Sd({check:"string_format",format:"lowercase",...H(e)})}function av(e){return new Ed({check:"string_format",format:"uppercase",...H(e)})}function sv(e,t){return new Id({check:"string_format",format:"includes",...H(t),includes:e})}function lv(e,t){return new Td({check:"string_format",format:"starts_with",...H(t),prefix:e})}function cv(e,t){return new Rd({check:"string_format",format:"ends_with",...H(t),suffix:e})}function ln(e){return new Cd({check:"overwrite",tx:e})}function uv(e){return ln(t=>t.normalize(e))}function fv(){return ln(e=>e.trim())}function dv(){return ln(e=>e.toLowerCase())}function hv(){return ln(e=>e.toUpperCase())}function vv(e,t,r){return new e({type:"array",element:t,...H(r)})}function pv(e,t,r){return new e({type:"custom",check:"custom",fn:t,...H(r)})}const mv=C("ZodISODateTime",(e,t)=>{qd.init(e,t),Ee.init(e,t)});function gv(e){return Gh(mv,e)}const _v=C("ZodISODate",(e,t)=>{Fd.init(e,t),Ee.init(e,t)});function bv(e){return Xh(_v,e)}const yv=C("ZodISOTime",(e,t)=>{Hd.init(e,t),Ee.init(e,t)});function wv(e){return Kh(yv,e)}const xv=C("ZodISODuration",(e,t)=>{Wd.init(e,t),Ee.init(e,t)});function kv(e){return Jh(xv,e)}const Sv=(e,t)=>{Yl.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>Zf(e,r)},flatten:{value:r=>Df(e,r)},addIssue:{value:r=>e.issues.push(r)},addIssues:{value:r=>e.issues.push(...r)},isEmpty:{get(){return e.issues.length===0}}})},Kn=C("ZodError",Sv,{Parent:Error}),Ev=jf(Kn),Iv=Mf(Kn),Tv=ec(Kn),Rv=tc(Kn),Re=C("ZodType",(e,t)=>(be.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone({...t,checks:[...t.checks??[],...r.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]}),e.clone=(r,n)=>pr(e,r,n),e.brand=()=>e,e.register=((r,n)=>(r.add(e,n),e)),e.parse=(r,n)=>Ev(e,r,n,{callee:e.parse}),e.safeParse=(r,n)=>Tv(e,r,n),e.parseAsync=async(r,n)=>Iv(e,r,n,{callee:e.parseAsync}),e.safeParseAsync=async(r,n)=>Rv(e,r,n),e.spa=e.safeParseAsync,e.refine=(r,n)=>e.check(yp(r,n)),e.superRefine=r=>e.check(wp(r)),e.overwrite=r=>e.check(ln(r)),e.optional=()=>Ia(e),e.nullable=()=>Ta(e),e.nullish=()=>Ia(Ta(e)),e.nonoptional=r=>dp(e,r),e.array=()=>Ue(e),e.or=r=>zr([e,r]),e.and=r=>np(e,r),e.transform=r=>Ra(e,ap(r)),e.default=r=>cp(e,r),e.prefault=r=>fp(e,r),e.catch=r=>vp(e,r),e.pipe=r=>Ra(e,r),e.readonly=()=>gp(e),e.describe=r=>{const n=e.clone();return bn.add(n,{description:r}),n},Object.defineProperty(e,"description",{get(){return bn.get(e)?.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return bn.get(e);const n=e.clone();return bn.add(n,r[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),dc=C("_ZodString",(e,t)=>{Bi.init(e,t),Re.init(e,t);const r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...n)=>e.check(ov(...n)),e.includes=(...n)=>e.check(sv(...n)),e.startsWith=(...n)=>e.check(lv(...n)),e.endsWith=(...n)=>e.check(cv(...n)),e.min=(...n)=>e.check(zn(...n)),e.max=(...n)=>e.check(uc(...n)),e.length=(...n)=>e.check(fc(...n)),e.nonempty=(...n)=>e.check(zn(1,...n)),e.lowercase=n=>e.check(iv(n)),e.uppercase=n=>e.check(av(n)),e.trim=()=>e.check(fv()),e.normalize=(...n)=>e.check(uv(...n)),e.toLowerCase=()=>e.check(dv()),e.toUpperCase=()=>e.check(hv())}),Cv=C("ZodString",(e,t)=>{Bi.init(e,t),dc.init(e,t),e.email=r=>e.check(Th(Nv,r)),e.url=r=>e.check($h(Ov,r)),e.jwt=r=>e.check(Vh(Wv,r)),e.emoji=r=>e.check(Ah($v,r)),e.guid=r=>e.check(ya(Sa,r)),e.uuid=r=>e.check(Rh(yn,r)),e.uuidv4=r=>e.check(Ch(yn,r)),e.uuidv6=r=>e.check(Nh(yn,r)),e.uuidv7=r=>e.check(Oh(yn,r)),e.nanoid=r=>e.check(Ph(Av,r)),e.guid=r=>e.check(ya(Sa,r)),e.cuid=r=>e.check(zh(Pv,r)),e.cuid2=r=>e.check(Uh(zv,r)),e.ulid=r=>e.check(Lh(Uv,r)),e.base64=r=>e.check(Fh(qv,r)),e.base64url=r=>e.check(Hh(Fv,r)),e.xid=r=>e.check(Dh(Lv,r)),e.ksuid=r=>e.check(Zh(Dv,r)),e.ipv4=r=>e.check(jh(Zv,r)),e.ipv6=r=>e.check(Mh(jv,r)),e.cidrv4=r=>e.check(Bh(Mv,r)),e.cidrv6=r=>e.check(qh(Bv,r)),e.e164=r=>e.check(Wh(Hv,r)),e.datetime=r=>e.check(gv(r)),e.date=r=>e.check(bv(r)),e.time=r=>e.check(wv(r)),e.duration=r=>e.check(kv(r))});function U(e){return Ih(Cv,e)}const Ee=C("ZodStringFormat",(e,t)=>{ye.init(e,t),dc.init(e,t)}),Nv=C("ZodEmail",(e,t)=>{Pd.init(e,t),Ee.init(e,t)}),Sa=C("ZodGUID",(e,t)=>{$d.init(e,t),Ee.init(e,t)}),yn=C("ZodUUID",(e,t)=>{Ad.init(e,t),Ee.init(e,t)}),Ov=C("ZodURL",(e,t)=>{zd.init(e,t),Ee.init(e,t)}),$v=C("ZodEmoji",(e,t)=>{Ud.init(e,t),Ee.init(e,t)}),Av=C("ZodNanoID",(e,t)=>{Ld.init(e,t),Ee.init(e,t)}),Pv=C("ZodCUID",(e,t)=>{Dd.init(e,t),Ee.init(e,t)}),zv=C("ZodCUID2",(e,t)=>{Zd.init(e,t),Ee.init(e,t)}),Uv=C("ZodULID",(e,t)=>{jd.init(e,t),Ee.init(e,t)}),Lv=C("ZodXID",(e,t)=>{Md.init(e,t),Ee.init(e,t)}),Dv=C("ZodKSUID",(e,t)=>{Bd.init(e,t),Ee.init(e,t)}),Zv=C("ZodIPv4",(e,t)=>{Vd.init(e,t),Ee.init(e,t)}),jv=C("ZodIPv6",(e,t)=>{Gd.init(e,t),Ee.init(e,t)}),Mv=C("ZodCIDRv4",(e,t)=>{Xd.init(e,t),Ee.init(e,t)}),Bv=C("ZodCIDRv6",(e,t)=>{Kd.init(e,t),Ee.init(e,t)}),qv=C("ZodBase64",(e,t)=>{Jd.init(e,t),Ee.init(e,t)}),Fv=C("ZodBase64URL",(e,t)=>{Qd.init(e,t),Ee.init(e,t)}),Hv=C("ZodE164",(e,t)=>{eh.init(e,t),Ee.init(e,t)}),Wv=C("ZodJWT",(e,t)=>{rh.init(e,t),Ee.init(e,t)}),hc=C("ZodNumber",(e,t)=>{cc.init(e,t),Re.init(e,t),e.gt=(n,o)=>e.check(xa(n,o)),e.gte=(n,o)=>e.check(fo(n,o)),e.min=(n,o)=>e.check(fo(n,o)),e.lt=(n,o)=>e.check(wa(n,o)),e.lte=(n,o)=>e.check(uo(n,o)),e.max=(n,o)=>e.check(uo(n,o)),e.int=n=>e.check(Ea(n)),e.safe=n=>e.check(Ea(n)),e.positive=n=>e.check(xa(0,n)),e.nonnegative=n=>e.check(fo(0,n)),e.negative=n=>e.check(wa(0,n)),e.nonpositive=n=>e.check(uo(0,n)),e.multipleOf=(n,o)=>e.check(ka(n,o)),e.step=(n,o)=>e.check(ka(n,o)),e.finite=()=>e;const r=e._zod.bag;e.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function Ie(e){return Yh(hc,e)}const Vv=C("ZodNumberFormat",(e,t)=>{nh.init(e,t),hc.init(e,t)});function Ea(e){return Qh(Vv,e)}const Gv=C("ZodBoolean",(e,t)=>{oh.init(e,t),Re.init(e,t)});function vc(e){return ev(Gv,e)}const Xv=C("ZodNull",(e,t)=>{ih.init(e,t),Re.init(e,t)});function Jn(e){return tv(Xv,e)}const Kv=C("ZodUnknown",(e,t)=>{ah.init(e,t),Re.init(e,t)});function Nr(){return rv(Kv)}const Jv=C("ZodNever",(e,t)=>{sh.init(e,t),Re.init(e,t)});function Yv(e){return nv(Jv,e)}const Qv=C("ZodArray",(e,t)=>{lh.init(e,t),Re.init(e,t),e.element=t.element,e.min=(r,n)=>e.check(zn(r,n)),e.nonempty=r=>e.check(zn(1,r)),e.max=(r,n)=>e.check(uc(r,n)),e.length=(r,n)=>e.check(fc(r,n)),e.unwrap=()=>e.element});function Ue(e,t){return vv(Qv,e,t)}const ep=C("ZodObject",(e,t)=>{ch.init(e,t),Re.init(e,t),_e(e,"shape",()=>t.shape),e.keyof=()=>qi(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:Nr()}),e.loose=()=>e.clone({...e._zod.def,catchall:Nr()}),e.strict=()=>e.clone({...e._zod.def,catchall:Yv()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>Pf(e,r),e.merge=r=>zf(e,r),e.pick=r=>$f(e,r),e.omit=r=>Af(e,r),e.partial=(...r)=>Uf(pc,e,r[0]),e.required=(...r)=>Lf(mc,e,r[0])});function Ae(e,t){const r={type:"object",get shape(){return ji(this,"shape",{...e}),this.shape},...H(t)};return new ep(r)}const tp=C("ZodUnion",(e,t)=>{uh.init(e,t),Re.init(e,t),e.options=t.options});function zr(e,t){return new tp({type:"union",options:e,...H(t)})}const rp=C("ZodIntersection",(e,t)=>{fh.init(e,t),Re.init(e,t)});function np(e,t){return new rp({type:"intersection",left:e,right:t})}const op=C("ZodRecord",(e,t)=>{dh.init(e,t),Re.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function Yn(e,t,r){return new op({type:"record",keyType:e,valueType:t,...H(r)})}const ki=C("ZodEnum",(e,t)=>{hh.init(e,t),Re.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const r=new Set(Object.keys(t.entries));e.extract=(n,o)=>{const i={};for(const a of n)if(r.has(a))i[a]=t.entries[a];else throw new Error(`Key ${a} not found in enum`);return new ki({...t,checks:[],...H(o),entries:i})},e.exclude=(n,o)=>{const i={...t.entries};for(const a of n)if(r.has(a))delete i[a];else throw new Error(`Key ${a} not found in enum`);return new ki({...t,checks:[],...H(o),entries:i})}});function qi(e,t){const r=Array.isArray(e)?Object.fromEntries(e.map(n=>[n,n])):e;return new ki({type:"enum",entries:r,...H(t)})}const ip=C("ZodTransform",(e,t)=>{vh.init(e,t),Re.init(e,t),e._zod.parse=(r,n)=>{r.addIssue=i=>{if(typeof i=="string")r.issues.push(rn(i,r.value,t));else{const a=i;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=r.value),a.inst??(a.inst=e),a.continue??(a.continue=!0),r.issues.push(rn(a))}};const o=t.transform(r.value,r);return o instanceof Promise?o.then(i=>(r.value=i,r)):(r.value=o,r)}});function ap(e){return new ip({type:"transform",transform:e})}const pc=C("ZodOptional",(e,t)=>{ph.init(e,t),Re.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Ia(e){return new pc({type:"optional",innerType:e})}const sp=C("ZodNullable",(e,t)=>{mh.init(e,t),Re.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Ta(e){return new sp({type:"nullable",innerType:e})}const lp=C("ZodDefault",(e,t)=>{gh.init(e,t),Re.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function cp(e,t){return new lp({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const up=C("ZodPrefault",(e,t)=>{_h.init(e,t),Re.init(e,t),e.unwrap=()=>e._zod.def.innerType});function fp(e,t){return new up({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const mc=C("ZodNonOptional",(e,t)=>{bh.init(e,t),Re.init(e,t),e.unwrap=()=>e._zod.def.innerType});function dp(e,t){return new mc({type:"nonoptional",innerType:e,...H(t)})}const hp=C("ZodCatch",(e,t)=>{yh.init(e,t),Re.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function vp(e,t){return new hp({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const pp=C("ZodPipe",(e,t)=>{wh.init(e,t),Re.init(e,t),e.in=t.in,e.out=t.out});function Ra(e,t){return new pp({type:"pipe",in:e,out:t})}const mp=C("ZodReadonly",(e,t)=>{xh.init(e,t),Re.init(e,t)});function gp(e){return new mp({type:"readonly",innerType:e})}const _p=C("ZodCustom",(e,t)=>{kh.init(e,t),Re.init(e,t)});function bp(e){const t=new ot({check:"custom"});return t._zod.check=e,t}function yp(e,t={}){return pv(_p,e,t)}function wp(e){const t=bp(r=>(r.addIssue=n=>{if(typeof n=="string")r.issues.push(rn(n,r.value,t._zod.def));else{const o=n;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=r.value),o.inst??(o.inst=t),o.continue??(o.continue=!t._zod.def.abort),r.issues.push(rn(o))}},e(r.value,r)));return t}const xp=8;function kp(e){return e===null?"null":Array.isArray(e)?`array(length=${e.length})`:typeof e=="object"?`object(keys=${Object.keys(e).slice(0,6).join(",")})`:typeof e}function Fi(e,t,r){const n=e.safeParse(t);if(!n.success){const o=n.error.issues.slice(0,xp).map(i=>`${i.path.length>0?i.path.join("."):"(root)"}: ${i.message}`).join("; ");return console.error(`[zod] ${r} validation failed`,o,kp(t)),{success:!1,error:n.error}}return{success:!0,data:n.data}}async function gc(e,t,r){if(!e.ok)return{success:!1,error:`HTTP ${e.status}: ${e.statusText}`};let n;try{n=await e.json()}catch(i){return{success:!1,error:`Invalid JSON response: ${i instanceof Error?i.message:String(i)}`}}const o=Fi(t,n,r);return o.success?{success:!0,data:o.data}:{success:!1,error:`Schema validation failed for ${r}`}}const Sp="XSRF-TOKEN",Ca="X-XSRF-TOKEN";function Ep(e){if(typeof document>"u")return null;const t=document.cookie.split(";").map(n=>n.trim()).find(n=>n.startsWith(`${e}=`));if(!t)return null;const r=t.substring(e.length+1);try{return decodeURIComponent(r)}catch{return r}}function Ip(e){const t=new Headers(e.headers??{}),r=Ep(Sp);return r&&!t.has(Ca)&&t.set(Ca,r),{...e,headers:t}}async function mr(e,t,r){const n=await fetch(e,{method:"GET",cache:"no-store",credentials:"same-origin"}),o=await gc(n,t,r);if(!o.success)throw new Error(o.error);return o.data}async function Tp(e,t,r,n){const o=await fetch(e,Ip({method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify(t)})),i=await gc(o,r,n);if(!i.success)throw new Error(i.error);return i.data}const Rp=Ae({id:U().nullable().optional(),name:U()}),Cp=Ae({id:U().nullable().optional(),name:U().nullable().optional(),type:U().nullable().optional(),rank:Ie().nullable().optional(),source:U().nullable().optional()}),Np=Ae({key:U(),attributes:Yn(U(),Nr()).optional().default({})}),Op=Ae({s3ImagePath:U().nullable().optional(),externalImageUrl:U().nullable().optional(),width:Ie().nullable().optional(),height:Ie().nullable().optional(),highResolution:vc().nullable().optional(),preferredUrl:U().nullable().optional(),fallbackUrl:U().nullable().optional(),source:U().nullable().optional()}),$p=Ae({googleBooksId:U().nullable().optional(),type:U().nullable().optional(),identifier:U().nullable().optional(),isbn10:U().nullable().optional(),isbn13:U().nullable().optional(),publishedDate:zr([U(),Ie(),Jn()]).optional(),coverImageUrl:U().nullable().optional()}),Ap=Ae({publishedDate:zr([U(),Ie(),Jn()]).optional(),language:U().nullable().optional(),pageCount:Ie().nullable().optional(),publisher:U().nullable().optional()}),Pp=Ae({raw:U().nullable().optional(),format:qi(["HTML","MARKDOWN","PLAIN_TEXT","UNKNOWN"]).optional().default("UNKNOWN"),html:U().optional().default(""),text:U().optional().default("")}),Hi=Ae({id:U(),slug:U().nullable().optional(),title:U().nullable().optional(),source:U().nullable().optional(),description:U().nullable().optional(),descriptionContent:Pp.nullable().optional(),publication:Ap.nullable().optional(),authors:Ue(Rp).optional().default([]),categories:Ue(U()).optional().default([]),collections:Ue(Cp).optional().default([]),tags:Ue(Np).optional().default([]),cover:Op.nullable().optional(),editions:Ue($p).optional().default([]),recommendationIds:Ue(U()).optional().default([]),extras:Yn(U(),Nr()).optional().default({})}),zp=Hi.extend({matchType:U().nullable().optional(),relevanceScore:Ie().nullable().optional()}),Up=Ae({query:U(),queryHash:U(),startIndex:Ie(),maxResults:Ie(),totalResults:Ie(),hasMore:vc(),nextStartIndex:Ie(),prefetchedCount:Ie(),orderBy:U(),coverSource:U(),resolution:U(),results:Ue(zp)}),Lp=Ue(Hi),Na=Ae({id:U(),slug:U().nullable().optional(),title:U(),authors:Ue(U()).optional().default([]),cover_url:U().nullable().optional(),cover_s3_key:U().nullable().optional(),fallback_cover_url:U().nullable().optional(),average_rating:Ie().nullable().optional(),ratings_count:Ie().nullable().optional(),tags:Yn(U(),Nr()).optional().default({})}),Dp=Ae({currentBestsellers:Ue(Na),recentBooks:Ue(Na)}),_c=Ae({id:U().nullable().optional(),slug:U(),title:U(),updatedAt:zr([U(),Ie(),Jn()]).optional()}),Zp=Ae({authorId:U(),authorName:U(),lastModified:zr([U(),Ie(),Jn()]).optional(),books:Ue(_c)}),jp=Ae({viewType:qi(["authors","books"]),activeLetter:U(),pageNumber:Ie(),totalPages:Ie(),totalItems:Ie(),letters:Ue(U()),baseUrl:U(),books:Ue(_c).optional().default([]),authors:Ue(Zp).optional().default([])}),bc=Ae({theme:U().nullable(),source:U()}),Mp=Yn(U(),U()).optional().default({}),Bp=Ae({message:U().optional()}),qp=Ae({newResults:Ue(Nr()).optional().default([])}),Fp=Ae({newCoverUrl:U().optional()}),Hp=Ae({id:U(),slug:U().optional(),title:U().optional(),source:U().optional(),description:U().nullable().optional(),authors:Ue(U()).optional().default([]),categories:Ue(U()).optional().default([]),publishedDate:zr([U(),Ie()]).optional(),language:U().optional(),pageCount:Ie().optional(),publisher:U().optional(),cover:Ae({s3ImagePath:U().optional(),externalImageUrl:U().optional(),preferredUrl:U().optional(),fallbackUrl:U().optional(),source:U().optional()}).optional(),matchType:U().optional(),relevanceScore:Ie().optional()});function Wp(){return mr("/api/theme",bc,"getThemePreference")}function Vp(e,t){return Tp("/api/theme",{theme:e,useSystem:t},bc,"persistThemePreference")}const Sr=Hl("light");function Wi(){return typeof window>"u"?"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function Rn(e){document.documentElement.setAttribute("data-theme",e)}function Gp(){const e=window.localStorage.getItem("preferred_theme");return e==="light"||e==="dark"?e:e==="system"?Wi():null}async function Xp(){const e=await Wp();return e.theme==="light"||e.theme==="dark"?e.theme:Wi()}async function Kp(){if(typeof window>"u")return;const e=Gp();if(e){Sr.set(e),Rn(e);return}try{const t=await Xp();Sr.set(t),Rn(t),window.localStorage.setItem("preferred_theme",t)}catch(t){console.error("Failed to load theme preference",t);const r=Wi();Sr.set(r),Rn(r)}}async function Jp(){const t=pf(Sr)==="light"?"dark":"light";Sr.set(t),Rn(t),window.localStorage.setItem("preferred_theme",t);try{await Vp(t,!1)}catch(r){console.error("Failed to persist theme preference",r)}}const Yp={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};const Qp=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0;return!1};var em=Ku("<svg><!><!></svg>");function Ce(e,t){se(t,!0);const r=$t(t,"color",3,"currentColor"),n=$t(t,"size",3,24),o=$t(t,"strokeWidth",3,2),i=$t(t,"absoluteStrokeWidth",3,!1),a=$t(t,"iconNode",19,()=>[]),s=Se(t,["$$slots","$$events","$$legacy","name","color","size","strokeWidth","absoluteStrokeWidth","iconNode","children"]);var c=em();la(c,(v,p)=>({...Yp,...v,...s,width:n(),height:n(),stroke:r(),"stroke-width":p,class:["lucide-icon lucide",t.name&&`lucide-${t.name}`,t.class]}),[()=>!t.children&&!Qp(s)&&{"aria-hidden":"true"},()=>i()?Number(o())*24/Number(n()):o()]);var u=S(c);Ze(u,17,a,Pt,(v,p)=>{var y=Oe(()=>Vs(h(p),2));let E=()=>h(y)[0],I=()=>h(y)[1];var k=Q(),N=V(k);of(N,E,!0,(b,w)=>{la(b,()=>({...I()}))}),T(v,k)});var d=O(u);ke(d,()=>t.children??ve),T(e,c),le()}function yc(e,t){se(t,!0);let r=Se(t,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M12 7v14"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"}]];Ce(e,Te({name:"book-open"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ke(s,()=>t.children??ve),T(o,a)},$$slots:{default:!0}})),le()}function tm(e,t){se(t,!0);let r=Se(t,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M8 2v4"}],["path",{d:"M16 2v4"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2"}],["path",{d:"M3 10h18"}]];Ce(e,Te({name:"calendar"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ke(s,()=>t.children??ve),T(o,a)},$$slots:{default:!0}})),le()}function rm(e,t){se(t,!0);let r=Se(t,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"m15 18-6-6 6-6"}]];Ce(e,Te({name:"chevron-left"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ke(s,()=>t.children??ve),T(o,a)},$$slots:{default:!0}})),le()}function nm(e,t){se(t,!0);let r=Se(t,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"m9 18 6-6-6-6"}]];Ce(e,Te({name:"chevron-right"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ke(s,()=>t.children??ve),T(o,a)},$$slots:{default:!0}})),le()}function om(e,t){se(t,!0);let r=Se(t,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M15 3h6v6"}],["path",{d:"M10 14 21 3"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}]];Ce(e,Te({name:"external-link"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ke(s,()=>t.children??ve),T(o,a)},$$slots:{default:!0}})),le()}function im(e,t){se(t,!0);let r=Se(t,["$$slots","$$events","$$legacy"]);const n=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"}],["path",{d:"M2 12h20"}]];Ce(e,Te({name:"globe"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ke(s,()=>t.children??ve),T(o,a)},$$slots:{default:!0}})),le()}function am(e,t){se(t,!0);let r=Se(t,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3"}]];Ce(e,Te({name:"headphones"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ke(s,()=>t.children??ve),T(o,a)},$$slots:{default:!0}})),le()}function Oa(e,t){se(t,!0);let r=Se(t,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}]];Ce(e,Te({name:"house"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ke(s,()=>t.children??ve),T(o,a)},$$slots:{default:!0}})),le()}function Cn(e,t){se(t,!0);let r=Se(t,["$$slots","$$events","$$legacy"]);const n=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M12 16v-4"}],["path",{d:"M12 8h.01"}]];Ce(e,Te({name:"info"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ke(s,()=>t.children??ve),T(o,a)},$$slots:{default:!0}})),le()}function sm(e,t){se(t,!0);let r=Se(t,["$$slots","$$events","$$legacy"]);const n=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1"}]];Ce(e,Te({name:"layout-grid"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ke(s,()=>t.children??ve),T(o,a)},$$slots:{default:!0}})),le()}function wc(e,t){se(t,!0);let r=Se(t,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M3 5h.01"}],["path",{d:"M3 12h.01"}],["path",{d:"M3 19h.01"}],["path",{d:"M8 5h13"}],["path",{d:"M8 12h13"}],["path",{d:"M8 19h13"}]];Ce(e,Te({name:"list"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ke(s,()=>t.children??ve),T(o,a)},$$slots:{default:!0}})),le()}function $a(e,t){se(t,!0);let r=Se(t,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56"}]];Ce(e,Te({name:"loader-circle"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ke(s,()=>t.children??ve),T(o,a)},$$slots:{default:!0}})),le()}function lm(e,t){se(t,!0);let r=Se(t,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M4 5h16"}],["path",{d:"M4 12h16"}],["path",{d:"M4 19h16"}]];Ce(e,Te({name:"menu"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ke(s,()=>t.children??ve),T(o,a)},$$slots:{default:!0}})),le()}function wn(e,t){se(t,!0);let r=Se(t,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401"}]];Ce(e,Te({name:"moon"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ke(s,()=>t.children??ve),T(o,a)},$$slots:{default:!0}})),le()}function nn(e,t){se(t,!0);let r=Se(t,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"m21 21-4.34-4.34"}],["circle",{cx:"11",cy:"11",r:"8"}]];Ce(e,Te({name:"search"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ke(s,()=>t.children??ve),T(o,a)},$$slots:{default:!0}})),le()}function cm(e,t){se(t,!0);let r=Se(t,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M16 10a4 4 0 0 1-8 0"}],["path",{d:"M3.103 6.034h17.794"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z"}]];Ce(e,Te({name:"shopping-bag"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ke(s,()=>t.children??ve),T(o,a)},$$slots:{default:!0}})),le()}function um(e,t){se(t,!0);let r=Se(t,["$$slots","$$events","$$legacy"]);const n=[["circle",{cx:"8",cy:"21",r:"1"}],["circle",{cx:"19",cy:"21",r:"1"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"}]];Ce(e,Te({name:"shopping-cart"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ke(s,()=>t.children??ve),T(o,a)},$$slots:{default:!0}})),le()}function Si(e,t){se(t,!0);let r=Se(t,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z"}]];Ce(e,Te({name:"star"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ke(s,()=>t.children??ve),T(o,a)},$$slots:{default:!0}})),le()}function fm(e,t){se(t,!0);let r=Se(t,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05"}]];Ce(e,Te({name:"store"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ke(s,()=>t.children??ve),T(o,a)},$$slots:{default:!0}})),le()}function xn(e,t){se(t,!0);let r=Se(t,["$$slots","$$events","$$legacy"]);const n=[["circle",{cx:"12",cy:"12",r:"4"}],["path",{d:"M12 2v2"}],["path",{d:"M12 20v2"}],["path",{d:"m4.93 4.93 1.41 1.41"}],["path",{d:"m17.66 17.66 1.41 1.41"}],["path",{d:"M2 12h2"}],["path",{d:"M20 12h2"}],["path",{d:"m6.34 17.66-1.41 1.41"}],["path",{d:"m19.07 4.93-1.41 1.41"}]];Ce(e,Te({name:"sun"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ke(s,()=>t.children??ve),T(o,a)},$$slots:{default:!0}})),le()}function dm(e,t){se(t,!0);let r=Se(t,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor"}]];Ce(e,Te({name:"tag"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ke(s,()=>t.children??ve),T(o,a)},$$slots:{default:!0}})),le()}function hm(e,t){se(t,!0);let r=Se(t,["$$slots","$$events","$$legacy"]);const n=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];Ce(e,Te({name:"x"},()=>r,{get iconNode(){return n},children:(o,i)=>{var a=Q(),s=V(a);ke(s,()=>t.children??ve),T(o,a)},$$slots:{default:!0}})),le()}var vm=Z('<a><!> <span class="tracking-wide"> </span></a>'),pm=Z("<!> <!>",1),mm=Z("<!> <!>",1),gm=Z("<!> <!>",1),_m=Z("<!> <!>",1),bm=Z('<a><!> <span class="tracking-wide"> </span></a>'),ym=Z('<div class="border-t border-anthracite-200/60 dark:border-slate-700 px-4 py-3 lg:hidden"><nav class="space-y-1"></nav> <form class="mt-3 flex items-center gap-2"><input type="search" placeholder="Quick search..." class="w-full rounded-lg border border-linen-300 bg-white px-3 py-2 text-sm text-anthracite-900 outline-none ring-canvas-300 transition focus:ring-2 dark:border-slate-600 dark:bg-slate-800 dark:text-slate-100"/> <button type="submit" class="rounded-lg bg-canvas-400 px-3 py-2 text-sm font-medium text-white transition hover:bg-canvas-500 hover:shadow-canvas"><!></button></form></div>'),wm=Z('<header class="sticky top-0 z-30 border-b border-linen-200/80 dark:border-slate-700 transition-all duration-300 bg-[rgba(253,252,250,0.80)] dark:bg-[rgba(30,41,59,0.95)] backdrop-blur-[12px]"><div class="mx-auto flex h-14 max-w-6xl items-center px-4 md:px-6"><div class="w-[200px] shrink-0"><a href="/" class="group flex items-center"><img src="/images/findmybook-logo-white-bg.png" alt="FindMyBook Logo" class="h-[140px] w-auto -ml-4 transition-transform duration-200 group-hover:scale-105 block dark:hidden"/> <img src="/images/findmybook-logo.png" alt="FindMyBook Logo" class="h-12 w-auto transition-transform duration-200 group-hover:scale-105 hidden dark:block"/></a></div> <div class="hidden min-w-4 grow lg:flex"></div> <nav class="hidden shrink-0 items-center gap-1 lg:flex"></nav> <div class="hidden min-w-4 grow lg:flex"></div> <div class="hidden w-[200px] shrink-0 justify-end lg:flex"><button type="button" class="group inline-flex items-center justify-center rounded-md p-2 text-anthracite-700 dark:text-slate-400 transition-all duration-200 hover:text-anthracite-800 dark:hover:text-slate-50 hover:bg-canvas-400/8 dark:hover:bg-slate-700/50 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-canvas-400"><!></button></div> <div class="ml-auto flex items-center gap-1.5 lg:hidden"><button type="button" class="group inline-flex items-center justify-center rounded-md p-2 text-anthracite-700 dark:text-slate-400 transition hover:bg-canvas-400/8 dark:hover:bg-slate-700/50"><!></button> <button type="button" class="inline-flex items-center justify-center rounded-md p-2 text-anthracite-700 dark:text-slate-400 transition hover:bg-canvas-400/8 dark:hover:bg-slate-700/50" aria-label="Toggle navigation"><!></button></div></div> <!></header>');function xm(e,t){se(t,!0);let r=ee(""),n=ee(!1),o=ee("light");const i=Sr.subscribe($=>{B(o,$,!0)});an(()=>()=>{i()});function a($){$.preventDefault();const F=h(r).trim();F&&(B(n,!1),Pr(`/search?query=${encodeURIComponent(F)}`))}function s(){Jp()}const c=[{href:"/",route:"home",label:"Home"},{href:"/search",route:"search",label:"Search"},{href:"/explore",route:"explore",label:"Explore"},{href:"/categories",route:"categories",label:"Categories"}];function u($){switch($){case"home":return Oa;case"search":return nn;case"explore":return yc;case"categories":return wc;default:return Oa}}function d($){return t.activeRoute===$}function v($){return d($)?"inline-flex items-center gap-2 rounded-md px-3.5 py-2 text-sm font-semibold text-canvas-800 dark:text-canvas-500 transition-all duration-200 bg-canvas-200/85 dark:bg-canvas-600/15 shadow-[0_1px_3px_rgba(212,165,116,0.4),0_1px_2px_rgba(212,165,116,0.3)] dark:shadow-[0_1px_3px_rgba(168,151,120,0.2)]":"inline-flex items-center gap-2 rounded-md px-3.5 py-2 text-sm font-medium text-anthracite-700 dark:text-slate-400 transition-all duration-200 hover:text-anthracite-800 dark:hover:text-slate-50 hover:bg-canvas-400/8 dark:hover:bg-slate-700/50"}var p=wm(),y=S(p),E=O(S(y),4);Ze(E,21,()=>c,$=>$.route,($,F)=>{const X=Oe(()=>u(h(F).route));var J=vm(),j=S(J);yi(j,()=>h(X),(oe,he)=>{he(oe,{size:16})});var K=O(j,2),re=S(K);Y(oe=>{de(J,"href",h(F).href),gt(J,1,oe),G(re,h(F).label)},[()=>Li(v(h(F).route))]),T($,J)});var I=O(E,4),k=S(I);k.__click=s;var N=S(k);{var b=$=>{var F=pm(),X=V(F);xn(X,{size:18,class:"block group-hover:hidden"});var J=O(X,2);wn(J,{size:18,class:"hidden group-hover:block"}),T($,F)},w=$=>{var F=mm(),X=V(F);wn(X,{size:18,class:"block group-hover:hidden"});var J=O(X,2);xn(J,{size:18,class:"hidden group-hover:block"}),T($,F)};W(N,$=>{h(o)==="light"?$(b):$(w,!1)})}var _=O(I,2),l=S(_);l.__click=s;var g=S(l);{var f=$=>{var F=gm(),X=V(F);xn(X,{size:18,class:"block group-hover:hidden"});var J=O(X,2);wn(J,{size:18,class:"hidden group-hover:block"}),T($,F)},m=$=>{var F=_m(),X=V(F);wn(X,{size:18,class:"block group-hover:hidden"});var J=O(X,2);xn(J,{size:18,class:"hidden group-hover:block"}),T($,F)};W(g,$=>{h(o)==="light"?$(f):$(m,!1)})}var x=O(l,2);x.__click=()=>B(n,!h(n));var R=S(x);{var z=$=>{hm($,{size:18})},q=$=>{lm($,{size:18})};W(R,$=>{h(n)?$(z):$(q,!1)})}var A=O(y,2);{var te=$=>{var F=ym(),X=S(F);Ze(X,21,()=>c,oe=>oe.route,(oe,he)=>{const me=Oe(()=>u(h(he).route));var we=bm();we.__click=()=>B(n,!1);var Me=S(we);yi(Me,()=>h(me),(ht,Lt)=>{Lt(ht,{size:16})});var Ke=O(Me,2),Wt=S(Ke);Y(ht=>{de(we,"href",h(he).href),gt(we,1,ht),G(Wt,h(he).label)},[()=>`${v(h(he).route)} w-full justify-start`]),T(oe,we)});var J=O(X,2),j=S(J),K=O(j,2),re=S(K);nn(re,{size:16}),qn("submit",J,a),Wn(j,()=>h(r),oe=>B(r,oe)),T($,F)};W(A,$=>{h(n)&&$(te)})}Y(()=>{de(k,"title",h(o)==="light"?"Light â Dark":"Dark â Light"),de(k,"aria-label",h(o)==="light"?"Switch to dark mode":"Switch to light mode"),de(l,"title",h(o)==="light"?"Light â Dark":"Dark â Light"),de(l,"aria-label",h(o)==="light"?"Switch to dark mode":"Switch to light mode"),de(x,"aria-expanded",h(n))}),T(e,p),le()}Fn(["click"]);var km=Z('<footer class="mt-auto border-t border-linen-200 py-8 transition-colors duration-300 dark:border-slate-700"><div class="mx-auto flex max-w-6xl flex-col items-center gap-4 px-4 text-sm md:flex-row md:justify-between md:px-6"><p class="text-anthracite-600 dark:text-slate-400">By <a href="https://williamcallahan.com" target="_blank" rel="noopener" class="font-medium text-canvas-600 transition-colors duration-200 hover:text-canvas-700 dark:text-canvas-400 dark:hover:text-canvas-300">William Callahan</a></p> <p class="flex items-center gap-2 text-anthracite-600 dark:text-slate-400"><a href="https://github.com/WilliamAGH/book-finder" target="_blank" rel="noopener" class="font-medium text-canvas-600 transition-colors duration-200 hover:text-canvas-700 dark:text-canvas-400 dark:hover:text-canvas-300">Open Source</a> <span class="mx-1">&bull;</span> Made with <span class="text-red-500 dark:text-red-400">&#10084;&#65039;</span> in California <span class="mx-1">&bull;</span> <a href="/sitemap" class="font-medium text-canvas-600 transition-colors duration-200 hover:text-canvas-700 dark:text-canvas-400 dark:hover:text-canvas-300">Sitemap</a></p></div></footer>');function Sm(e){var t=km();T(e,t)}var Em=Z('<p class="line-clamp-3 text-sm text-anthracite-600 dark:text-slate-400"> </p>'),Im=Z('<div class="flex items-center gap-1 text-sm font-medium text-canvas-700 dark:text-canvas-400"><!> <span> </span> <span class="text-anthracite-500 dark:text-slate-500"> </span></div>'),Tm=Z('<article class="flex gap-4 rounded-xl border border-linen-300 bg-white p-4 shadow-soft transition-all duration-300 hover:shadow-book hover:-translate-y-0.5 dark:border-slate-700 dark:bg-slate-800"><a class="flex h-40 w-28 shrink-0 items-center justify-center overflow-hidden rounded-lg bg-linen-50 dark:bg-slate-900"><img class="max-h-full w-auto object-contain" loading="lazy"/></a> <div class="flex min-w-0 flex-1 flex-col gap-2"><a class="line-clamp-2 text-lg font-semibold text-anthracite-900 transition hover:text-canvas-600 dark:text-slate-100 dark:hover:text-canvas-400"> </a> <p class="truncate text-sm font-light text-anthracite-600 dark:text-slate-400"> </p> <!> <!></div></article>'),Rm=Z('<div class="absolute right-3 top-3 flex items-center gap-1 rounded-lg bg-canvas-400 px-2.5 py-1 text-sm font-medium text-white shadow-sm"><!> <span> </span></div>'),Cm=Z('<span class="rounded-full bg-linen-100 px-2 py-0.5 text-xs text-anthracite-700 dark:bg-slate-700 dark:text-slate-200"> </span>'),Nm=Z('<span class="rounded-full bg-linen-100 px-2 py-0.5 text-xs text-anthracite-700 dark:bg-slate-700 dark:text-slate-200"> </span>'),Om=Z('<span class="rounded-full bg-linen-100 px-2 py-0.5 text-xs text-anthracite-700 dark:bg-slate-700 dark:text-slate-200"> </span>'),$m=Z('<div class="mb-2 mt-auto flex flex-wrap gap-1.5"><!> <!> <!></div>'),Am=Z('<p class="mb-3 text-xs text-slate-500"> </p>'),Pm=Z('<article class="group flex h-full flex-col overflow-hidden rounded-xl border border-linen-300 shadow-soft transition-all duration-300 hover:-translate-y-1 hover:shadow-book dark:border-slate-700"><div class="relative flex h-80 items-center justify-center overflow-hidden bg-linen-50 p-4 dark:bg-slate-900"><a class="flex h-full w-full items-center justify-center"><img class="max-h-full w-auto object-contain transition-transform duration-300 group-hover:scale-105" loading="lazy"/></a> <!></div> <div class="flex grow flex-col bg-white p-4 dark:bg-slate-800"><h5 class="mb-1.5 line-clamp-2 text-base font-semibold leading-snug text-anthracite-900 dark:text-slate-50"><a class="transition-colors duration-200 hover:text-canvas-600 dark:hover:text-canvas-400"> </a></h5> <p class="mb-3 truncate text-sm font-light text-anthracite-600 dark:text-slate-400"> </p> <!> <!></div> <div class="mt-auto bg-white px-4 pb-4 dark:bg-slate-800"><a class="block w-full rounded-lg bg-canvas-400 px-4 py-2.5 text-center text-sm font-medium text-white transition-all duration-200 hover:bg-canvas-500 hover:shadow-canvas focus:outline-none focus:ring-2 focus:ring-canvas-500 focus:ring-offset-2">View Details</a></div></article>');function Un(e,t){se(t,!0);let r=$t(t,"layout",3,"grid"),n=$t(t,"showStats",3,!1);const o="/images/placeholder-book-cover.svg";function i(){return t.book.coverUrl&&t.book.coverUrl.trim().length>0?t.book.coverUrl:t.book.fallbackCoverUrl&&t.book.fallbackCoverUrl.trim().length>0?t.book.fallbackCoverUrl:o}function a(y){if(!n()||!t.book.tags)return null;const E=t.book.tags[y];return typeof E=="number"&&E>0?E:null}function s(){return a("recent.views.24h")!==null||a("recent.views.7d")!==null||a("recent.views.30d")!==null}function c(){if(!n()||!t.book.tags)return null;const y=t.book.tags["recent.views.lastViewedAt"];if(!y)return null;try{const E=new Date(y);return Number.isNaN(E.getTime())?null:`Last viewed ${E.toLocaleDateString("en-US",{month:"short",day:"numeric"})} ${E.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})}`}catch{return null}}var u=Q(),d=V(u);{var v=y=>{var E=Tm(),I=S(E),k=S(I),N=O(I,2),b=S(N),w=S(b),_=O(b,2),l=S(_),g=O(_,2);{var f=R=>{var z=Em(),q=S(z);Y(()=>G(q,t.book.description)),T(R,z)};W(g,R=>{t.book.description&&R(f)})}var m=O(g,2);{var x=R=>{var z=Im(),q=S(z);Si(q,{size:14,class:"fill-current"});var A=O(q,2),te=S(A),$=O(A,2),F=S($);Y(X=>{G(te,X),G(F,`(${t.book.ratingsCount??0??""})`)},[()=>t.book.averageRating.toFixed(1)]),T(R,z)};W(m,R=>{t.book.averageRating!==null&&t.book.averageRating!==void 0&&R(x)})}Y((R,z)=>{de(I,"href",t.href),de(k,"src",R),de(k,"alt",`${t.book.title} cover`),de(b,"href",t.href),G(w,t.book.title),G(l,z)},[i,()=>t.book.authors.length>0?t.book.authors.join(", "):"Unknown Author"]),T(y,E)},p=y=>{var E=Pm(),I=S(E),k=S(I),N=S(k),b=O(k,2);{var w=F=>{var X=Rm(),J=S(X);Si(J,{size:12,class:"fill-current"});var j=O(J,2),K=S(j);Y(re=>G(K,re),[()=>t.book.averageRating.toFixed(1)]),T(F,X)};W(b,F=>{t.book.averageRating!==null&&t.book.averageRating!==void 0&&F(w)})}var _=O(I,2),l=S(_),g=S(l),f=S(g),m=O(l,2),x=S(m),R=O(m,2);{var z=F=>{var X=$m(),J=S(X);{var j=me=>{var we=Cm(),Me=S(we);Y(Ke=>G(Me,`${Ke??""} in 24h`),[()=>a("recent.views.24h")]),T(me,we)};W(J,me=>{a("recent.views.24h")&&me(j)})}var K=O(J,2);{var re=me=>{var we=Nm(),Me=S(we);Y(Ke=>G(Me,`${Ke??""} in 7d`),[()=>a("recent.views.7d")]),T(me,we)};W(K,me=>{a("recent.views.7d")&&me(re)})}var oe=O(K,2);{var he=me=>{var we=Om(),Me=S(we);Y(Ke=>G(Me,`${Ke??""} in 30d`),[()=>a("recent.views.30d")]),T(me,we)};W(oe,me=>{a("recent.views.30d")&&me(he)})}T(F,X)};W(R,F=>{s()&&F(z)})}var q=O(R,2);{var A=F=>{var X=Am(),J=S(X);Y(j=>G(J,j),[c]),T(F,X)};W(q,F=>{c()&&F(A)})}var te=O(_,2),$=S(te);Y(F=>{de(k,"href",t.href),de(N,"src",F),de(N,"alt",`${t.book.title} cover`),de(g,"href",t.href),G(f,t.book.title),G(x,t.book.authors.length>0?t.book.authors[0]:"Unknown Author"),de($,"href",t.href)},[i]),T(y,E)};W(d,y=>{r()==="list"?y(v):y(p,!1)})}T(e,u),le()}function zm(){return mr("/api/pages/home",Dp,"getHomePagePayload")}function Um(e,t,r){const n=new URL("/api/pages/sitemap",window.location.origin);return n.searchParams.set("view",e),n.searchParams.set("letter",t),n.searchParams.set("page",String(r)),mr(`${n.pathname}${n.search}`,jp,"getSitemapPayload")}var Lm=Z('<a class="rounded-full border border-gray-300 px-4 py-2 text-sm font-medium shadow-sm transition-all duration-200 hover:shadow-md text-anthracite-700 hover:text-anthracite-900 dark:border-slate-600 dark:text-slate-300 dark:hover:text-slate-100 dark:hover:border-slate-500"> </a>'),Dm=Z('<p class="text-sm text-anthracite-600 dark:text-slate-300">Loading homepage sections...</p>'),Zm=Z('<div class="flex items-center gap-2 rounded-xl border border-red-200 bg-red-50 p-4 text-sm text-red-700 dark:border-red-900/40 dark:bg-red-950/40 dark:text-red-200"><!> </div>'),jm=Z('<div class="flex items-center gap-2 rounded-xl border border-blue-200 bg-blue-50 p-4 text-sm text-blue-700 dark:border-blue-900/40 dark:bg-blue-950/40 dark:text-blue-200"><!> No current bestsellers to display. Check back soon!</div>'),Mm=Z('<div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4"></div>'),Bm=Z('<div class="flex items-center gap-2 rounded-xl border border-blue-200 bg-blue-50 p-4 text-sm text-blue-700 dark:border-blue-900/40 dark:bg-blue-950/40 dark:text-blue-200"><!> No recent books to display. Start exploring to see recommendations!</div>'),qm=Z('<div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4"></div>'),Fm=Z('<section class="bg-gradient-to-b from-linen-50 to-white py-16 transition-colors duration-300 dark:from-slate-900 dark:to-slate-900 md:py-24"><div class="mx-auto max-w-4xl px-4"><div class="mb-10 text-center"><h1 class="mb-4 font-heading text-4xl font-bold tracking-tight text-anthracite-900 dark:text-slate-50 md:text-5xl lg:text-6xl">Discover Your Next Great Read</h1> <p class="mx-auto max-w-2xl text-lg font-light leading-relaxed text-anthracite-600 dark:text-slate-400 md:text-xl">Curated book recommendations with a touch of elegance. Search millions of titles and find your perfect match.</p></div> <form class="mb-8"><div class="relative mx-auto max-w-2xl"><input type="text" placeholder="Search by title, author, or ISBN..." class="w-full rounded-xl border border-gray-300 bg-white px-6 py-4 pr-14 text-base shadow-soft outline-none transition-all duration-200 focus:border-transparent focus:ring-2 focus:ring-canvas-400 focus:shadow-soft-lg dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100 md:text-lg" required/> <button type="submit" class="absolute right-2 top-1/2 -translate-y-1/2 rounded-lg bg-canvas-400 px-3 py-2.5 text-white transition-all duration-200 hover:bg-canvas-500 hover:shadow-canvas focus:outline-none focus:ring-2 focus:ring-canvas-500 focus:ring-offset-2 md:px-5" aria-label="Search"><!></button></div></form> <div class="text-center"><p class="mb-3 text-sm font-medium uppercase tracking-wider text-anthracite-600 dark:text-slate-400">Popular Genres</p> <div class="flex flex-wrap justify-center gap-2"></div></div></div></section> <section class="mx-auto max-w-6xl px-4 py-12 md:px-6 md:py-16"><!> <div class="mb-12 space-y-6"><div class="flex items-center justify-between"><h2 class="font-heading text-2xl font-bold text-anthracite-900 dark:text-slate-50 md:text-3xl">NYT Bestsellers</h2> <a class="rounded-lg border border-canvas-400 px-6 py-2.5 text-sm font-medium text-canvas-600 transition-all duration-200 hover:bg-canvas-50 hover:text-canvas-700 dark:border-canvas-600 dark:text-canvas-400 dark:hover:bg-slate-700 dark:hover:text-canvas-300">View All</a></div> <!></div> <div class="space-y-6"><div class="flex items-center justify-between"><h2 class="font-heading text-2xl font-bold text-anthracite-900 dark:text-slate-50 md:text-3xl">Recent Views</h2> <a href="/search?query=explore" class="rounded-lg border border-canvas-400 px-6 py-2.5 text-sm font-medium text-canvas-600 transition-all duration-200 hover:bg-canvas-50 hover:text-canvas-700 dark:border-canvas-600 dark:text-canvas-400 dark:hover:bg-slate-700 dark:hover:text-canvas-300">Explore More</a></div> <!></div></section>',1);function Hm(e,t){se(t,!0);let r=ee(!0),n=ee(null),o=ee(Et([])),i=ee(Et([])),a=ee("");function s(j){return{id:j.id,slug:j.slug??j.id,title:j.title,authors:j.authors??[],coverUrl:j.cover_url??null,fallbackCoverUrl:j.fallback_cover_url??null,averageRating:j.average_rating??null,ratingsCount:j.ratings_count??null,tags:j.tags??{}}}async function c(){B(r,!0),B(n,null);try{const j=await zm();B(o,j.currentBestsellers.map(s),!0),B(i,j.recentBooks.map(s),!0)}catch(j){B(n,j instanceof Error?j.message:"Unable to load homepage content",!0),B(o,[],!0),B(i,[],!0)}finally{B(r,!1)}}function u(j){j.preventDefault();const K=h(a).trim();K&&Pr(`/search?query=${encodeURIComponent(K)}`)}const d=[{label:"Fiction",query:"fiction"},{label:"Mystery",query:"mystery"},{label:"Science Fiction",query:"sci-fi"},{label:"Fantasy",query:"fantasy"},{label:"Biography",query:"biography"}];Vn(()=>{c()});var v=Fm(),p=V(v),y=S(p),E=O(S(y),2),I=S(E),k=S(I),N=O(k,2),b=S(N);nn(b,{size:18});var w=O(E,2),_=O(S(w),2);Ze(_,21,()=>d,j=>j.query,(j,K)=>{var re=Lm(),oe=S(re);Y(he=>{de(re,"href",he),G(oe,h(K).label)},[()=>`/search?query=${encodeURIComponent(h(K).query)}`]),T(j,re)});var l=O(p,2),g=S(l);{var f=j=>{var K=Dm();T(j,K)},m=j=>{var K=Q(),re=V(K);{var oe=he=>{var me=Zm(),we=S(me);Cn(we,{size:16});var Me=O(we);Y(()=>G(Me,` ${h(n)??""}`)),T(he,me)};W(re,he=>{h(n)&&he(oe)},!0)}T(j,K)};W(g,j=>{h(r)?j(f):j(m,!1)})}var x=O(g,2),R=S(x),z=O(S(R),2);de(z,"href",`/search?query=${encodeURIComponent("new york times")}`);var q=O(R,2);{var A=j=>{var K=jm(),re=S(K);Cn(re,{size:16}),T(j,K)},te=j=>{var K=Mm();Ze(K,21,()=>h(o),re=>re.id,(re,oe)=>{{let he=Oe(()=>`/book/${encodeURIComponent(h(oe).slug??h(oe).id)}`);Un(re,{get book(){return h(oe)},get href(){return h(he)}})}}),T(j,K)};W(q,j=>{!h(r)&&h(o).length===0?j(A):j(te,!1)})}var $=O(x,2),F=O(S($),2);{var X=j=>{var K=Bm(),re=S(K);Cn(re,{size:16}),T(j,K)},J=j=>{var K=qm();Ze(K,21,()=>h(i),re=>re.id,(re,oe)=>{{let he=Oe(()=>`/book/${encodeURIComponent(h(oe).slug??h(oe).id)}`);Un(re,{get book(){return h(oe)},get href(){return h(he)},showStats:!0})}}),T(j,K)};W(F,j=>{!h(r)&&h(i).length===0?j(X):j(J,!1)})}qn("submit",E,u),Wn(k,()=>h(a),j=>B(a,j)),T(e,v),le()}const Wm=6;function Vm(e){const t=new URL("/api/books/search",window.location.origin);return t.searchParams.set("query",e.query),t.searchParams.set("startIndex",String(e.startIndex)),t.searchParams.set("maxResults",String(e.maxResults)),t.searchParams.set("orderBy",e.orderBy),t.searchParams.set("coverSource",e.coverSource),t.searchParams.set("resolution",e.resolution),e.publishedYear!=null&&t.searchParams.set("publishedYear",String(e.publishedYear)),`${t.pathname}${t.search}`}function Aa(e){return mr(Vm(e),Up,"searchBooks")}function Gm(e){return mr(`/api/books/${encodeURIComponent(e)}`,Hi,`getBook:${e}`)}function Xm(e,t=Wm){return mr(`/api/books/${encodeURIComponent(e)}/similar?limit=${t}`,Lp,`getSimilarBooks:${e}`)}function Km(e){return mr(`/api/pages/book/${encodeURIComponent(e)}/affiliate-links`,Mp,`getAffiliateLinks:${e}`)}function Jm(e){return e.map(t=>({id:null,name:t}))}function Pa(e){return!!(e.cover?.preferredUrl||e.cover?.externalImageUrl||e.cover?.s3ImagePath||e.cover?.fallbackUrl)}function za(e){return e?e.trim().toUpperCase():null}function Ym(e){const t=za(e.source);if(t)return t;const r=za(e.cover?.source);if(r)return r;const o=(e.cover?.preferredUrl??e.cover?.externalImageUrl??e.cover?.fallbackUrl??null)?.toLowerCase()??"";return o.includes("covers.openlibrary.org")?"OPEN_LIBRARY":o.includes("googleusercontent.com")||o.includes("books.google")?"GOOGLE_BOOKS":(e.cover?.s3ImagePath,"POSTGRES")}function Ua(e){const t=Ym(e);return t==="POSTGRES"?0:t==="OPEN_LIBRARY"||t==="OPEN_LIBRARY_API"?1:t==="GOOGLE_BOOKS"||t==="GOOGLE_BOOKS_API"||t==="GOOGLE_API"?2:3}function Qm(e){return e.map((t,r)=>({hit:t,index:r})).sort((t,r)=>{const n=Number(Pa(r.hit))-Number(Pa(t.hit));if(n!==0)return n;const o=Ua(t.hit)-Ua(r.hit);return o!==0?o:t.index-r.index}).map(t=>t.hit)}function eg(e){return{s3ImagePath:e.s3ImagePath??null,externalImageUrl:e.externalImageUrl??null,width:null,height:null,highResolution:null,preferredUrl:e.preferredUrl??null,fallbackUrl:e.fallbackUrl??null,source:e.source??null}}function tg(e){const t=Fi(Hp,e,"realtimeSearchHit");if(!t.success)return console.warn("Dropped unparseable realtime search hit",e),null;const r=t.data,n=r.publishedDate??null;return{id:r.id,slug:r.slug??r.id,title:r.title??"Untitled",source:r.source??null,description:r.description??null,publication:{publishedDate:n,language:r.language??null,pageCount:r.pageCount??null,publisher:r.publisher??null},authors:Jm(r.authors),categories:r.categories,collections:[],tags:[],cover:eg(r.cover??{}),editions:[],recommendationIds:[],extras:{},matchType:r.matchType??null,relevanceScore:r.relevanceScore??null}}function rg(e){return e.map(tg).filter(t=>t!==null)}function ng(e,t){const r=new Map(e.map(n=>[n.id,n]));for(const n of t)r.has(n.id)||r.set(n.id,n);return Qm(Array.from(r.values()))}var L=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function og(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Xr={exports:{}},ig=Xr.exports,La;function ag(){return La||(La=1,(function(e,t){(function(r,n){n(t)})(ig,(function(r){function n(_,l){_.terminate=function(){const g=()=>{};this.onerror=g,this.onmessage=g,this.onopen=g;const f=new Date,m=Math.random().toString().substring(2,8),x=this.onclose;this.onclose=R=>{const z=new Date().getTime()-f.getTime();l(`Discarded socket (#${m})  closed after ${z}ms, with code/reason: ${R.code}/${R.reason}`)},this.close(),x?.call(_,{code:4001,reason:`Quick discarding socket (#${m}) without waiting for the shutdown sequence.`,wasClean:!1})}}const o={LF:`
`,NULL:"\0"};class i{get body(){return!this._body&&this.isBinaryBody&&(this._body=new TextDecoder().decode(this._binaryBody)),this._body||""}get binaryBody(){return!this._binaryBody&&!this.isBinaryBody&&(this._binaryBody=new TextEncoder().encode(this._body)),this._binaryBody}constructor(l){const{command:g,headers:f,body:m,binaryBody:x,escapeHeaderValues:R,skipContentLengthHeader:z}=l;this.command=g,this.headers=Object.assign({},f||{}),x?(this._binaryBody=x,this.isBinaryBody=!0):(this._body=m||"",this.isBinaryBody=!1),this.escapeHeaderValues=R||!1,this.skipContentLengthHeader=z||!1}static fromRawFrame(l,g){const f={},m=x=>x.replace(/^\s+|\s+$/g,"");for(const x of l.headers.reverse()){x.indexOf(":");const R=m(x[0]);let z=m(x[1]);g&&l.command!=="CONNECT"&&l.command!=="CONNECTED"&&(z=i.hdrValueUnEscape(z)),f[R]=z}return new i({command:l.command,headers:f,binaryBody:l.binaryBody,escapeHeaderValues:g})}toString(){return this.serializeCmdAndHeaders()}serialize(){const l=this.serializeCmdAndHeaders();return this.isBinaryBody?i.toUnit8Array(l,this._binaryBody).buffer:l+this._body+o.NULL}serializeCmdAndHeaders(){const l=[this.command];this.skipContentLengthHeader&&delete this.headers["content-length"];for(const g of Object.keys(this.headers||{})){const f=this.headers[g];this.escapeHeaderValues&&this.command!=="CONNECT"&&this.command!=="CONNECTED"?l.push(`${g}:${i.hdrValueEscape(`${f}`)}`):l.push(`${g}:${f}`)}return(this.isBinaryBody||!this.isBodyEmpty()&&!this.skipContentLengthHeader)&&l.push(`content-length:${this.bodyLength()}`),l.join(o.LF)+o.LF+o.LF}isBodyEmpty(){return this.bodyLength()===0}bodyLength(){const l=this.binaryBody;return l?l.length:0}static sizeOfUTF8(l){return l?new TextEncoder().encode(l).length:0}static toUnit8Array(l,g){const f=new TextEncoder().encode(l),m=new Uint8Array([0]),x=new Uint8Array(f.length+g.length+m.length);return x.set(f),x.set(g,f.length),x.set(m,f.length+g.length),x}static marshall(l){return new i(l).serialize()}static hdrValueEscape(l){return l.replace(/\\/g,"\\\\").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/:/g,"\\c")}static hdrValueUnEscape(l){return l.replace(/\\r/g,"\r").replace(/\\n/g,`
`).replace(/\\c/g,":").replace(/\\\\/g,"\\")}}const a=0,s=10,c=13,u=58;class d{constructor(l,g){this.onFrame=l,this.onIncomingPing=g,this._encoder=new TextEncoder,this._decoder=new TextDecoder,this._token=[],this._initState()}parseChunk(l,g=!1){let f;if(typeof l=="string"?f=this._encoder.encode(l):f=new Uint8Array(l),g&&f[f.length-1]!==0){const m=new Uint8Array(f.length+1);m.set(f,0),m[f.length]=0,f=m}for(let m=0;m<f.length;m++){const x=f[m];this._onByte(x)}}_collectFrame(l){if(l!==a&&l!==c){if(l===s){this.onIncomingPing();return}this._onByte=this._collectCommand,this._reinjectByte(l)}}_collectCommand(l){if(l!==c){if(l===s){this._results.command=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaders;return}this._consumeByte(l)}}_collectHeaders(l){if(l!==c){if(l===s){this._setupCollectBody();return}this._onByte=this._collectHeaderKey,this._reinjectByte(l)}}_reinjectByte(l){this._onByte(l)}_collectHeaderKey(l){if(l===u){this._headerKey=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaderValue;return}this._consumeByte(l)}_collectHeaderValue(l){if(l!==c){if(l===s){this._results.headers.push([this._headerKey,this._consumeTokenAsUTF8()]),this._headerKey=void 0,this._onByte=this._collectHeaders;return}this._consumeByte(l)}}_setupCollectBody(){const l=this._results.headers.filter(g=>g[0]==="content-length")[0];l?(this._bodyBytesRemaining=parseInt(l[1],10),this._onByte=this._collectBodyFixedSize):this._onByte=this._collectBodyNullTerminated}_collectBodyNullTerminated(l){if(l===a){this._retrievedBody();return}this._consumeByte(l)}_collectBodyFixedSize(l){if(this._bodyBytesRemaining--===0){this._retrievedBody();return}this._consumeByte(l)}_retrievedBody(){this._results.binaryBody=this._consumeTokenAsRaw();try{this.onFrame(this._results)}catch(l){console.log("Ignoring an exception thrown by a frame handler. Original exception: ",l)}this._initState()}_consumeByte(l){this._token.push(l)}_consumeTokenAsUTF8(){return this._decoder.decode(this._consumeTokenAsRaw())}_consumeTokenAsRaw(){const l=new Uint8Array(this._token);return this._token=[],l}_initState(){this._results={command:void 0,headers:[],binaryBody:void 0},this._token=[],this._headerKey=void 0,this._onByte=this._collectFrame}}r.StompSocketState=void 0,(function(_){_[_.CONNECTING=0]="CONNECTING",_[_.OPEN=1]="OPEN",_[_.CLOSING=2]="CLOSING",_[_.CLOSED=3]="CLOSED"})(r.StompSocketState||(r.StompSocketState={})),r.ActivationState=void 0,(function(_){_[_.ACTIVE=0]="ACTIVE",_[_.DEACTIVATING=1]="DEACTIVATING",_[_.INACTIVE=2]="INACTIVE"})(r.ActivationState||(r.ActivationState={})),r.ReconnectionTimeMode=void 0,(function(_){_[_.LINEAR=0]="LINEAR",_[_.EXPONENTIAL=1]="EXPONENTIAL"})(r.ReconnectionTimeMode||(r.ReconnectionTimeMode={})),r.TickerStrategy=void 0,(function(_){_.Interval="interval",_.Worker="worker"})(r.TickerStrategy||(r.TickerStrategy={}));class v{constructor(l,g=r.TickerStrategy.Interval,f){this._interval=l,this._strategy=g,this._debug=f,this._workerScript=`
    var startTime = Date.now();
    setInterval(function() {
        self.postMessage(Date.now() - startTime);
    }, ${this._interval});
  `}start(l){this.stop(),this.shouldUseWorker()?this.runWorker(l):this.runInterval(l)}stop(){this.disposeWorker(),this.disposeInterval()}shouldUseWorker(){return typeof Worker<"u"&&this._strategy===r.TickerStrategy.Worker}runWorker(l){this._debug("Using runWorker for outgoing pings"),this._worker||(this._worker=new Worker(URL.createObjectURL(new Blob([this._workerScript],{type:"text/javascript"}))),this._worker.onmessage=g=>l(g.data))}runInterval(l){if(this._debug("Using runInterval for outgoing pings"),!this._timer){const g=Date.now();this._timer=setInterval(()=>{l(Date.now()-g)},this._interval)}}disposeWorker(){this._worker&&(this._worker.terminate(),delete this._worker,this._debug("Outgoing ping disposeWorker"))}disposeInterval(){this._timer&&(clearInterval(this._timer),delete this._timer,this._debug("Outgoing ping disposeInterval"))}}class p{constructor(l){this.versions=l}supportedVersions(){return this.versions.join(",")}protocolVersions(){return this.versions.map(l=>`v${l.replace(".","")}.stomp`)}}p.V1_0="1.0",p.V1_1="1.1",p.V1_2="1.2",p.default=new p([p.V1_2,p.V1_1,p.V1_0]);class y{get connectedVersion(){return this._connectedVersion}get connected(){return this._connected}constructor(l,g,f){this._client=l,this._webSocket=g,this._connected=!1,this._serverFrameHandlers={CONNECTED:m=>{this.debug(`connected to server ${m.headers.server}`),this._connected=!0,this._connectedVersion=m.headers.version,this._connectedVersion===p.V1_2&&(this._escapeHeaderValues=!0),this._setupHeartbeat(m.headers),this.onConnect(m)},MESSAGE:m=>{const x=m.headers.subscription,R=this._subscriptions[x]||this.onUnhandledMessage,z=m,q=this,A=this._connectedVersion===p.V1_2?z.headers.ack:z.headers["message-id"];z.ack=(te={})=>q.ack(A,x,te),z.nack=(te={})=>q.nack(A,x,te),R(z)},RECEIPT:m=>{const x=this._receiptWatchers[m.headers["receipt-id"]];x?(x(m),delete this._receiptWatchers[m.headers["receipt-id"]]):this.onUnhandledReceipt(m)},ERROR:m=>{this.onStompError(m)}},this._counter=0,this._subscriptions={},this._receiptWatchers={},this._partialData="",this._escapeHeaderValues=!1,this._lastServerActivityTS=Date.now(),this.debug=f.debug,this.stompVersions=f.stompVersions,this.connectHeaders=f.connectHeaders,this.disconnectHeaders=f.disconnectHeaders,this.heartbeatIncoming=f.heartbeatIncoming,this.heartbeatToleranceMultiplier=f.heartbeatGracePeriods,this.heartbeatOutgoing=f.heartbeatOutgoing,this.splitLargeFrames=f.splitLargeFrames,this.maxWebSocketChunkSize=f.maxWebSocketChunkSize,this.forceBinaryWSFrames=f.forceBinaryWSFrames,this.logRawCommunication=f.logRawCommunication,this.appendMissingNULLonIncoming=f.appendMissingNULLonIncoming,this.discardWebsocketOnCommFailure=f.discardWebsocketOnCommFailure,this.onConnect=f.onConnect,this.onDisconnect=f.onDisconnect,this.onStompError=f.onStompError,this.onWebSocketClose=f.onWebSocketClose,this.onWebSocketError=f.onWebSocketError,this.onUnhandledMessage=f.onUnhandledMessage,this.onUnhandledReceipt=f.onUnhandledReceipt,this.onUnhandledFrame=f.onUnhandledFrame,this.onHeartbeatReceived=f.onHeartbeatReceived,this.onHeartbeatLost=f.onHeartbeatLost}start(){const l=new d(f=>{const m=i.fromRawFrame(f,this._escapeHeaderValues);this.logRawCommunication||this.debug(`<<< ${m}`),(this._serverFrameHandlers[m.command]||this.onUnhandledFrame)(m)},()=>{this.debug("<<< PONG"),this.onHeartbeatReceived()});this._webSocket.onmessage=f=>{if(this.debug("Received data"),this._lastServerActivityTS=Date.now(),this.logRawCommunication){const m=f.data instanceof ArrayBuffer?new TextDecoder().decode(f.data):f.data;this.debug(`<<< ${m}`)}l.parseChunk(f.data,this.appendMissingNULLonIncoming)},this._webSocket.onclose=f=>{this.debug(`Connection closed to ${this._webSocket.url}`),this._cleanUp(),this.onWebSocketClose(f)},this._webSocket.onerror=f=>{this.onWebSocketError(f)};const g=()=>{const f=Object.assign({},this.connectHeaders);this.debug("Web Socket Opened..."),f["accept-version"]=this.stompVersions.supportedVersions(),f["heart-beat"]=[this.heartbeatOutgoing,this.heartbeatIncoming].join(","),this._transmit({command:"CONNECT",headers:f})};this._webSocket.readyState===r.StompSocketState.OPEN?g():this._webSocket.onopen=g}_setupHeartbeat(l){if(l.version!==p.V1_1&&l.version!==p.V1_2||!l["heart-beat"])return;const[g,f]=l["heart-beat"].split(",").map(m=>parseInt(m,10));if(this.heartbeatOutgoing!==0&&f!==0){const m=Math.max(this.heartbeatOutgoing,f);this.debug(`send PING every ${m}ms`),this._pinger=new v(m,this._client.heartbeatStrategy,this.debug),this._pinger.start(()=>{this._webSocket.readyState===r.StompSocketState.OPEN&&(this._webSocket.send(o.LF),this.debug(">>> PING"))})}if(this.heartbeatIncoming!==0&&g!==0){const m=Math.max(this.heartbeatIncoming,g);this.debug(`check PONG every ${m}ms`),this._ponger=setInterval(()=>{const x=Date.now()-this._lastServerActivityTS;x>m*this.heartbeatToleranceMultiplier&&(this.debug(`did not receive server activity for the last ${x}ms`),this.onHeartbeatLost(),this._closeOrDiscardWebsocket())},m)}}_closeOrDiscardWebsocket(){this.discardWebsocketOnCommFailure?(this.debug("Discarding websocket, the underlying socket may linger for a while"),this.discardWebsocket()):(this.debug("Issuing close on the websocket"),this._closeWebsocket())}forceDisconnect(){this._webSocket&&(this._webSocket.readyState===r.StompSocketState.CONNECTING||this._webSocket.readyState===r.StompSocketState.OPEN)&&this._closeOrDiscardWebsocket()}_closeWebsocket(){this._webSocket.onmessage=()=>{},this._webSocket.close()}discardWebsocket(){typeof this._webSocket.terminate!="function"&&n(this._webSocket,l=>this.debug(l)),this._webSocket.terminate()}_transmit(l){const{command:g,headers:f,body:m,binaryBody:x,skipContentLengthHeader:R}=l,z=new i({command:g,headers:f,body:m,binaryBody:x,escapeHeaderValues:this._escapeHeaderValues,skipContentLengthHeader:R});let q=z.serialize();if(this.logRawCommunication?this.debug(`>>> ${q}`):this.debug(`>>> ${z}`),this.forceBinaryWSFrames&&typeof q=="string"&&(q=new TextEncoder().encode(q)),typeof q!="string"||!this.splitLargeFrames)this._webSocket.send(q);else{let A=q;for(;A.length>0;){const te=A.substring(0,this.maxWebSocketChunkSize);A=A.substring(this.maxWebSocketChunkSize),this._webSocket.send(te),this.debug(`chunk sent = ${te.length}, remaining = ${A.length}`)}}}dispose(){if(this.connected)try{const l=Object.assign({},this.disconnectHeaders);l.receipt||(l.receipt=`close-${this._counter++}`),this.watchForReceipt(l.receipt,g=>{this._closeWebsocket(),this._cleanUp(),this.onDisconnect(g)}),this._transmit({command:"DISCONNECT",headers:l})}catch(l){this.debug(`Ignoring error during disconnect ${l}`)}else(this._webSocket.readyState===r.StompSocketState.CONNECTING||this._webSocket.readyState===r.StompSocketState.OPEN)&&this._closeWebsocket()}_cleanUp(){this._connected=!1,this._pinger&&(this._pinger.stop(),this._pinger=void 0),this._ponger&&(clearInterval(this._ponger),this._ponger=void 0)}publish(l){const{destination:g,headers:f,body:m,binaryBody:x,skipContentLengthHeader:R}=l,z=Object.assign({destination:g},f);this._transmit({command:"SEND",headers:z,body:m,binaryBody:x,skipContentLengthHeader:R})}watchForReceipt(l,g){this._receiptWatchers[l]=g}subscribe(l,g,f={}){f=Object.assign({},f),f.id||(f.id=`sub-${this._counter++}`),f.destination=l,this._subscriptions[f.id]=g,this._transmit({command:"SUBSCRIBE",headers:f});const m=this;return{id:f.id,unsubscribe(x){return m.unsubscribe(f.id,x)}}}unsubscribe(l,g={}){g=Object.assign({},g),delete this._subscriptions[l],g.id=l,this._transmit({command:"UNSUBSCRIBE",headers:g})}begin(l){const g=l||`tx-${this._counter++}`;this._transmit({command:"BEGIN",headers:{transaction:g}});const f=this;return{id:g,commit(){f.commit(g)},abort(){f.abort(g)}}}commit(l){this._transmit({command:"COMMIT",headers:{transaction:l}})}abort(l){this._transmit({command:"ABORT",headers:{transaction:l}})}ack(l,g,f={}){f=Object.assign({},f),this._connectedVersion===p.V1_2?f.id=l:f["message-id"]=l,f.subscription=g,this._transmit({command:"ACK",headers:f})}nack(l,g,f={}){return f=Object.assign({},f),this._connectedVersion===p.V1_2?f.id=l:f["message-id"]=l,f.subscription=g,this._transmit({command:"NACK",headers:f})}}class E{get webSocket(){return this._stompHandler?._webSocket}get disconnectHeaders(){return this._disconnectHeaders}set disconnectHeaders(l){this._disconnectHeaders=l,this._stompHandler&&(this._stompHandler.disconnectHeaders=this._disconnectHeaders)}get connected(){return!!this._stompHandler&&this._stompHandler.connected}get connectedVersion(){return this._stompHandler?this._stompHandler.connectedVersion:void 0}get active(){return this.state===r.ActivationState.ACTIVE}_changeState(l){this.state=l,this.onChangeState(l)}constructor(l={}){this.stompVersions=p.default,this.connectionTimeout=0,this.reconnectDelay=5e3,this._nextReconnectDelay=0,this.maxReconnectDelay=900*1e3,this.reconnectTimeMode=r.ReconnectionTimeMode.LINEAR,this.heartbeatIncoming=1e4,this.heartbeatToleranceMultiplier=2,this.heartbeatOutgoing=1e4,this.heartbeatStrategy=r.TickerStrategy.Interval,this.splitLargeFrames=!1,this.maxWebSocketChunkSize=8*1024,this.forceBinaryWSFrames=!1,this.appendMissingNULLonIncoming=!1,this.discardWebsocketOnCommFailure=!1,this.state=r.ActivationState.INACTIVE;const g=()=>{};this.debug=g,this.beforeConnect=g,this.onConnect=g,this.onDisconnect=g,this.onUnhandledMessage=g,this.onUnhandledReceipt=g,this.onUnhandledFrame=g,this.onHeartbeatReceived=g,this.onHeartbeatLost=g,this.onStompError=g,this.onWebSocketClose=g,this.onWebSocketError=g,this.logRawCommunication=!1,this.onChangeState=g,this.connectHeaders={},this._disconnectHeaders={},this.configure(l)}configure(l){Object.assign(this,l),this.maxReconnectDelay>0&&this.maxReconnectDelay<this.reconnectDelay&&(this.debug(`Warning: maxReconnectDelay (${this.maxReconnectDelay}ms) is less than reconnectDelay (${this.reconnectDelay}ms). Using reconnectDelay as the maxReconnectDelay delay.`),this.maxReconnectDelay=this.reconnectDelay)}activate(){const l=()=>{if(this.active){this.debug("Already ACTIVE, ignoring request to activate");return}this._changeState(r.ActivationState.ACTIVE),this._nextReconnectDelay=this.reconnectDelay,this._connect()};this.state===r.ActivationState.DEACTIVATING?(this.debug("Waiting for deactivation to finish before activating"),this.deactivate().then(()=>{l()})):l()}async _connect(){if(await this.beforeConnect(this),this._stompHandler){this.debug("There is already a stompHandler, skipping the call to connect");return}if(!this.active){this.debug("Client has been marked inactive, will not attempt to connect");return}this.connectionTimeout>0&&(this._connectionWatcher&&clearTimeout(this._connectionWatcher),this._connectionWatcher=setTimeout(()=>{this.connected||(this.debug(`Connection not established in ${this.connectionTimeout}ms, closing socket`),this.forceDisconnect())},this.connectionTimeout)),this.debug("Opening Web Socket...");const l=this._createWebSocket();this._stompHandler=new y(this,l,{debug:this.debug,stompVersions:this.stompVersions,connectHeaders:this.connectHeaders,disconnectHeaders:this._disconnectHeaders,heartbeatIncoming:this.heartbeatIncoming,heartbeatGracePeriods:this.heartbeatToleranceMultiplier,heartbeatOutgoing:this.heartbeatOutgoing,heartbeatStrategy:this.heartbeatStrategy,splitLargeFrames:this.splitLargeFrames,maxWebSocketChunkSize:this.maxWebSocketChunkSize,forceBinaryWSFrames:this.forceBinaryWSFrames,logRawCommunication:this.logRawCommunication,appendMissingNULLonIncoming:this.appendMissingNULLonIncoming,discardWebsocketOnCommFailure:this.discardWebsocketOnCommFailure,onConnect:g=>{if(this._connectionWatcher&&(clearTimeout(this._connectionWatcher),this._connectionWatcher=void 0),this._nextReconnectDelay=this.reconnectDelay,!this.active){this.debug("STOMP got connected while deactivate was issued, will disconnect now"),this._disposeStompHandler();return}this.onConnect(g)},onDisconnect:g=>{this.onDisconnect(g)},onStompError:g=>{this.onStompError(g)},onWebSocketClose:g=>{this._stompHandler=void 0,this.state===r.ActivationState.DEACTIVATING&&this._changeState(r.ActivationState.INACTIVE),this.onWebSocketClose(g),this.active&&this._schedule_reconnect()},onWebSocketError:g=>{this.onWebSocketError(g)},onUnhandledMessage:g=>{this.onUnhandledMessage(g)},onUnhandledReceipt:g=>{this.onUnhandledReceipt(g)},onUnhandledFrame:g=>{this.onUnhandledFrame(g)},onHeartbeatReceived:()=>{this.onHeartbeatReceived()},onHeartbeatLost:()=>{this.onHeartbeatLost()}}),this._stompHandler.start()}_createWebSocket(){let l;if(this.webSocketFactory)l=this.webSocketFactory();else if(this.brokerURL)l=new WebSocket(this.brokerURL,this.stompVersions.protocolVersions());else throw new Error("Either brokerURL or webSocketFactory must be provided");return l.binaryType="arraybuffer",l}_schedule_reconnect(){this._nextReconnectDelay>0&&(this.debug(`STOMP: scheduling reconnection in ${this._nextReconnectDelay}ms`),this._reconnector=setTimeout(()=>{this.reconnectTimeMode===r.ReconnectionTimeMode.EXPONENTIAL&&(this._nextReconnectDelay=this._nextReconnectDelay*2,this.maxReconnectDelay!==0&&(this._nextReconnectDelay=Math.min(this._nextReconnectDelay,this.maxReconnectDelay))),this._connect()},this._nextReconnectDelay))}async deactivate(l={}){const g=l.force||!1,f=this.active;let m;if(this.state===r.ActivationState.INACTIVE)return this.debug("Already INACTIVE, nothing more to do"),Promise.resolve();if(this._changeState(r.ActivationState.DEACTIVATING),this._nextReconnectDelay=0,this._reconnector&&(clearTimeout(this._reconnector),this._reconnector=void 0),this._stompHandler&&this.webSocket.readyState!==r.StompSocketState.CLOSED){const x=this._stompHandler.onWebSocketClose;m=new Promise((R,z)=>{this._stompHandler.onWebSocketClose=q=>{x(q),R()}})}else return this._changeState(r.ActivationState.INACTIVE),Promise.resolve();return g?this._stompHandler?.discardWebsocket():f&&this._disposeStompHandler(),m}forceDisconnect(){this._stompHandler&&this._stompHandler.forceDisconnect()}_disposeStompHandler(){this._stompHandler&&this._stompHandler.dispose()}publish(l){this._checkConnection(),this._stompHandler.publish(l)}_checkConnection(){if(!this.connected)throw new TypeError("There is no underlying STOMP connection")}watchForReceipt(l,g){this._checkConnection(),this._stompHandler.watchForReceipt(l,g)}subscribe(l,g,f={}){return this._checkConnection(),this._stompHandler.subscribe(l,g,f)}unsubscribe(l,g={}){this._checkConnection(),this._stompHandler.unsubscribe(l,g)}begin(l){return this._checkConnection(),this._stompHandler.begin(l)}commit(l){this._checkConnection(),this._stompHandler.commit(l)}abort(l){this._checkConnection(),this._stompHandler.abort(l)}ack(l,g,f={}){this._checkConnection(),this._stompHandler.ack(l,g,f)}nack(l,g,f={}){this._checkConnection(),this._stompHandler.nack(l,g,f)}}class I{}class k{}class N{constructor(l){this.client=l}get outgoing(){return this.client.heartbeatOutgoing}set outgoing(l){this.client.heartbeatOutgoing=l}get incoming(){return this.client.heartbeatIncoming}set incoming(l){this.client.heartbeatIncoming=l}}class b extends E{constructor(l){super(),this.maxWebSocketFrameSize=16*1024,this._heartbeatInfo=new N(this),this.reconnect_delay=0,this.webSocketFactory=l,this.debug=(...g)=>{console.log(...g)}}_parseConnect(...l){let g,f,m,x={};if(l.length<2)throw new Error("Connect requires at least 2 arguments");return typeof l[1]=="function"?[x,f,m,g]=l:l.length===6?[x.login,x.passcode,f,m,g,x.host]=l:[x.login,x.passcode,f,m,g]=l,[x,f,m,g]}connect(...l){const g=this._parseConnect(...l);g[0]&&(this.connectHeaders=g[0]),g[1]&&(this.onConnect=g[1]),g[2]&&(this.onStompError=g[2]),g[3]&&(this.onWebSocketClose=g[3]),super.activate()}disconnect(l,g={}){l&&(this.onDisconnect=l),this.disconnectHeaders=g,super.deactivate()}send(l,g={},f=""){g=Object.assign({},g);const m=g["content-length"]===!1;m&&delete g["content-length"],this.publish({destination:l,headers:g,body:f,skipContentLengthHeader:m})}set reconnect_delay(l){this.reconnectDelay=l}get ws(){return this.webSocket}get version(){return this.connectedVersion}get onreceive(){return this.onUnhandledMessage}set onreceive(l){this.onUnhandledMessage=l}get onreceipt(){return this.onUnhandledReceipt}set onreceipt(l){this.onUnhandledReceipt=l}get heartbeat(){return this._heartbeatInfo}set heartbeat(l){this.heartbeatIncoming=l.incoming,this.heartbeatOutgoing=l.outgoing}}class w{static client(l,g){g==null&&(g=p.default.protocolVersions());const f=()=>{const m=w.WebSocketClass||WebSocket;return new m(l,g)};return new b(f)}static over(l){let g;return typeof l=="function"?g=l:(console.warn("Stomp.over did not receive a factory, auto reconnect will not work. Please see https://stomp-js.github.io/api-docs/latest/classes/Stomp.html#over"),g=()=>l),new b(g)}}w.WebSocketClass=null,r.Client=E,r.CompatClient=b,r.FrameImpl=i,r.Parser=d,r.Stomp=w,r.StompConfig=I,r.StompHeaders=k,r.Versions=p}))})(Xr,Xr.exports)),Xr.exports}var sg=ag(),ho={exports:{}},kn={},Da;function lg(){return Da||(Da=1,L.crypto&&L.crypto.getRandomValues?kn.randomBytes=function(e){var t=new Uint8Array(e);return L.crypto.getRandomValues(t),t}:kn.randomBytes=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=Math.floor(Math.random()*256);return t}),kn}var vo,Za;function Ur(){if(Za)return vo;Za=1;var e=lg(),t="abcdefghijklmnopqrstuvwxyz012345";return vo={string:function(r){for(var n=t.length,o=e.randomBytes(r),i=[],a=0;a<r;a++)i.push(t.substr(o[a]%n,1));return i.join("")},number:function(r){return Math.floor(Math.random()*r)},numberString:function(r){var n=(""+(r-1)).length,o=new Array(n+1).join("0");return(o+this.number(r)).slice(-n)}},vo}var ja;function nr(){return ja||(ja=1,(function(e){var t=Ur(),r={},n=!1,o=L.chrome&&L.chrome.app&&L.chrome.app.runtime;e.exports={attachEvent:function(a,s){typeof L.addEventListener<"u"?L.addEventListener(a,s,!1):L.document&&L.attachEvent&&(L.document.attachEvent("on"+a,s),L.attachEvent("on"+a,s))},detachEvent:function(a,s){typeof L.addEventListener<"u"?L.removeEventListener(a,s,!1):L.document&&L.detachEvent&&(L.document.detachEvent("on"+a,s),L.detachEvent("on"+a,s))},unloadAdd:function(a){if(o)return null;var s=t.string(8);return r[s]=a,n&&setTimeout(this.triggerUnloadCallbacks,0),s},unloadDel:function(a){a in r&&delete r[a]},triggerUnloadCallbacks:function(){for(var a in r)r[a](),delete r[a]}};var i=function(){n||(n=!0,e.exports.triggerUnloadCallbacks())};o||e.exports.attachEvent("unload",i)})(ho)),ho.exports}var po,Ma;function cg(){return Ma||(Ma=1,po=function(t,r){if(r=r.split(":")[0],t=+t,!t)return!1;switch(r){case"http":case"ws":return t!==80;case"https":case"wss":return t!==443;case"ftp":return t!==21;case"gopher":return t!==70;case"file":return!1}return t!==0}),po}var Sn={},Ba;function ug(){if(Ba)return Sn;Ba=1;var e=Object.prototype.hasOwnProperty,t;function r(a){try{return decodeURIComponent(a.replace(/\+/g," "))}catch{return null}}function n(a){try{return encodeURIComponent(a)}catch{return null}}function o(a){for(var s=/([^=?#&]+)=?([^&]*)/g,c={},u;u=s.exec(a);){var d=r(u[1]),v=r(u[2]);d===null||v===null||d in c||(c[d]=v)}return c}function i(a,s){s=s||"";var c=[],u,d;typeof s!="string"&&(s="?");for(d in a)if(e.call(a,d)){if(u=a[d],!u&&(u===null||u===t||isNaN(u))&&(u=""),d=n(d),u=n(u),d===null||u===null)continue;c.push(d+"="+u)}return c.length?s+c.join("&"):""}return Sn.stringify=i,Sn.parse=o,Sn}var mo,qa;function xc(){if(qa)return mo;qa=1;var e=cg(),t=ug(),r=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,n=/[\n\r\t]/g,o=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,i=/:\d+$/,a=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,s=/^[a-zA-Z]:/;function c(b){return(b||"").toString().replace(r,"")}var u=[["#","hash"],["?","query"],function(w,_){return p(_.protocol)?w.replace(/\\/g,"/"):w},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],d={hash:1,query:1};function v(b){var w;typeof window<"u"?w=window:typeof L<"u"?w=L:typeof self<"u"?w=self:w={};var _=w.location||{};b=b||_;var l={},g=typeof b,f;if(b.protocol==="blob:")l=new I(unescape(b.pathname),{});else if(g==="string"){l=new I(b,{});for(f in d)delete l[f]}else if(g==="object"){for(f in b)f in d||(l[f]=b[f]);l.slashes===void 0&&(l.slashes=o.test(b.href))}return l}function p(b){return b==="file:"||b==="ftp:"||b==="http:"||b==="https:"||b==="ws:"||b==="wss:"}function y(b,w){b=c(b),b=b.replace(n,""),w=w||{};var _=a.exec(b),l=_[1]?_[1].toLowerCase():"",g=!!_[2],f=!!_[3],m=0,x;return g?f?(x=_[2]+_[3]+_[4],m=_[2].length+_[3].length):(x=_[2]+_[4],m=_[2].length):f?(x=_[3]+_[4],m=_[3].length):x=_[4],l==="file:"?m>=2&&(x=x.slice(2)):p(l)?x=_[4]:l?g&&(x=x.slice(2)):m>=2&&p(w.protocol)&&(x=_[4]),{protocol:l,slashes:g||p(l),slashesCount:m,rest:x}}function E(b,w){if(b==="")return w;for(var _=(w||"/").split("/").slice(0,-1).concat(b.split("/")),l=_.length,g=_[l-1],f=!1,m=0;l--;)_[l]==="."?_.splice(l,1):_[l]===".."?(_.splice(l,1),m++):m&&(l===0&&(f=!0),_.splice(l,1),m--);return f&&_.unshift(""),(g==="."||g==="..")&&_.push(""),_.join("/")}function I(b,w,_){if(b=c(b),b=b.replace(n,""),!(this instanceof I))return new I(b,w,_);var l,g,f,m,x,R,z=u.slice(),q=typeof w,A=this,te=0;for(q!=="object"&&q!=="string"&&(_=w,w=null),_&&typeof _!="function"&&(_=t.parse),w=v(w),g=y(b||"",w),l=!g.protocol&&!g.slashes,A.slashes=g.slashes||l&&w.slashes,A.protocol=g.protocol||w.protocol||"",b=g.rest,(g.protocol==="file:"&&(g.slashesCount!==2||s.test(b))||!g.slashes&&(g.protocol||g.slashesCount<2||!p(A.protocol)))&&(z[3]=[/(.*)/,"pathname"]);te<z.length;te++){if(m=z[te],typeof m=="function"){b=m(b,A);continue}f=m[0],R=m[1],f!==f?A[R]=b:typeof f=="string"?(x=f==="@"?b.lastIndexOf(f):b.indexOf(f),~x&&(typeof m[2]=="number"?(A[R]=b.slice(0,x),b=b.slice(x+m[2])):(A[R]=b.slice(x),b=b.slice(0,x)))):(x=f.exec(b))&&(A[R]=x[1],b=b.slice(0,x.index)),A[R]=A[R]||l&&m[3]&&w[R]||"",m[4]&&(A[R]=A[R].toLowerCase())}_&&(A.query=_(A.query)),l&&w.slashes&&A.pathname.charAt(0)!=="/"&&(A.pathname!==""||w.pathname!=="")&&(A.pathname=E(A.pathname,w.pathname)),A.pathname.charAt(0)!=="/"&&p(A.protocol)&&(A.pathname="/"+A.pathname),e(A.port,A.protocol)||(A.host=A.hostname,A.port=""),A.username=A.password="",A.auth&&(x=A.auth.indexOf(":"),~x?(A.username=A.auth.slice(0,x),A.username=encodeURIComponent(decodeURIComponent(A.username)),A.password=A.auth.slice(x+1),A.password=encodeURIComponent(decodeURIComponent(A.password))):A.username=encodeURIComponent(decodeURIComponent(A.auth)),A.auth=A.password?A.username+":"+A.password:A.username),A.origin=A.protocol!=="file:"&&p(A.protocol)&&A.host?A.protocol+"//"+A.host:"null",A.href=A.toString()}function k(b,w,_){var l=this;switch(b){case"query":typeof w=="string"&&w.length&&(w=(_||t.parse)(w)),l[b]=w;break;case"port":l[b]=w,e(w,l.protocol)?w&&(l.host=l.hostname+":"+w):(l.host=l.hostname,l[b]="");break;case"hostname":l[b]=w,l.port&&(w+=":"+l.port),l.host=w;break;case"host":l[b]=w,i.test(w)?(w=w.split(":"),l.port=w.pop(),l.hostname=w.join(":")):(l.hostname=w,l.port="");break;case"protocol":l.protocol=w.toLowerCase(),l.slashes=!_;break;case"pathname":case"hash":if(w){var g=b==="pathname"?"/":"#";l[b]=w.charAt(0)!==g?g+w:w}else l[b]=w;break;case"username":case"password":l[b]=encodeURIComponent(w);break;case"auth":var f=w.indexOf(":");~f?(l.username=w.slice(0,f),l.username=encodeURIComponent(decodeURIComponent(l.username)),l.password=w.slice(f+1),l.password=encodeURIComponent(decodeURIComponent(l.password))):l.username=encodeURIComponent(decodeURIComponent(w))}for(var m=0;m<u.length;m++){var x=u[m];x[4]&&(l[x[1]]=l[x[1]].toLowerCase())}return l.auth=l.password?l.username+":"+l.password:l.username,l.origin=l.protocol!=="file:"&&p(l.protocol)&&l.host?l.protocol+"//"+l.host:"null",l.href=l.toString(),l}function N(b){(!b||typeof b!="function")&&(b=t.stringify);var w,_=this,l=_.host,g=_.protocol;g&&g.charAt(g.length-1)!==":"&&(g+=":");var f=g+(_.protocol&&_.slashes||p(_.protocol)?"//":"");return _.username?(f+=_.username,_.password&&(f+=":"+_.password),f+="@"):_.password?(f+=":"+_.password,f+="@"):_.protocol!=="file:"&&p(_.protocol)&&!l&&_.pathname!=="/"&&(f+="@"),(l[l.length-1]===":"||i.test(_.hostname)&&!_.port)&&(l+=":"),f+=l+_.pathname,w=typeof _.query=="object"?b(_.query):_.query,w&&(f+=w.charAt(0)!=="?"?"?"+w:w),_.hash&&(f+=_.hash),f}return I.prototype={set:k,toString:N},I.extractProtocol=y,I.location=v,I.trimLeft=c,I.qs=t,mo=I,mo}var go,Fa;function wt(){if(Fa)return go;Fa=1;var e=xc();return go={getOrigin:function(t){if(!t)return null;var r=new e(t);if(r.protocol==="file:")return null;var n=r.port;return n||(n=r.protocol==="https:"?"443":"80"),r.protocol+"//"+r.hostname+":"+n},isOriginEqual:function(t,r){var n=this.getOrigin(t)===this.getOrigin(r);return n},isSchemeEqual:function(t,r){return t.split(":")[0]===r.split(":")[0]},addPath:function(t,r){var n=t.split("?");return n[0]+r+(n[1]?"?"+n[1]:"")},addQuery:function(t,r){return t+(t.indexOf("?")===-1?"?"+r:"&"+r)},isLoopbackAddr:function(t){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(t)||/^\[::1\]$/.test(t)}},go}var En={exports:{}},Ha;function fe(){return Ha||(Ha=1,typeof Object.create=="function"?En.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:En.exports=function(t,r){if(r){t.super_=r;var n=function(){};n.prototype=r.prototype,t.prototype=new n,t.prototype.constructor=t}}),En.exports}var _o={},bo,Wa;function kc(){if(Wa)return bo;Wa=1;function e(){this._listeners={}}return e.prototype.addEventListener=function(t,r){t in this._listeners||(this._listeners[t]=[]);var n=this._listeners[t];n.indexOf(r)===-1&&(n=n.concat([r])),this._listeners[t]=n},e.prototype.removeEventListener=function(t,r){var n=this._listeners[t];if(n){var o=n.indexOf(r);if(o!==-1){n.length>1?this._listeners[t]=n.slice(0,o).concat(n.slice(o+1)):delete this._listeners[t];return}}},e.prototype.dispatchEvent=function(){var t=arguments[0],r=t.type,n=arguments.length===1?[t]:Array.apply(null,arguments);if(this["on"+r]&&this["on"+r].apply(this,n),r in this._listeners)for(var o=this._listeners[r],i=0;i<o.length;i++)o[i].apply(this,n)},bo=e,bo}var Va;function et(){if(Va)return _o;Va=1;var e=fe(),t=kc();function r(){t.call(this)}return e(r,t),r.prototype.removeAllListeners=function(n){n?delete this._listeners[n]:this._listeners={}},r.prototype.once=function(n,o){var i=this,a=!1;function s(){i.removeListener(n,s),a||(a=!0,o.apply(this,arguments))}this.on(n,s)},r.prototype.emit=function(){var n=arguments[0],o=this._listeners[n];if(o){for(var i=arguments.length,a=new Array(i-1),s=1;s<i;s++)a[s-1]=arguments[s];for(var c=0;c<o.length;c++)o[c].apply(this,a)}},r.prototype.on=r.prototype.addListener=t.prototype.addEventListener,r.prototype.removeListener=t.prototype.removeEventListener,_o.EventEmitter=r,_o}var In={exports:{}},Ga;function fg(){if(Ga)return In.exports;Ga=1;var e=L.WebSocket||L.MozWebSocket;return e?In.exports=function(r){return new e(r)}:In.exports=void 0,In.exports}var yo,Xa;function dg(){if(Xa)return yo;Xa=1;var e=nr(),t=wt(),r=fe(),n=et().EventEmitter,o=fg(),i=function(){};function a(s,c,u){if(!a.enabled())throw new Error("Transport created when disabled");n.call(this);var d=this,v=t.addPath(s,"/websocket");v.slice(0,5)==="https"?v="wss"+v.slice(5):v="ws"+v.slice(4),this.url=v,this.ws=new o(this.url,[],u),this.ws.onmessage=function(p){i("message event",p.data),d.emit("message",p.data)},this.unloadRef=e.unloadAdd(function(){d.ws.close()}),this.ws.onclose=function(p){i("close event",p.code,p.reason),d.emit("close",p.code,p.reason),d._cleanup()},this.ws.onerror=function(p){d.emit("close",1006,"WebSocket connection broken"),d._cleanup()}}return r(a,n),a.prototype.send=function(s){var c="["+s+"]";this.ws.send(c)},a.prototype.close=function(){var s=this.ws;this._cleanup(),s&&s.close()},a.prototype._cleanup=function(){var s=this.ws;s&&(s.onmessage=s.onclose=s.onerror=null),e.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},a.enabled=function(){return!!o},a.transportName="websocket",a.roundTrips=2,yo=a,yo}var wo,Ka;function hg(){if(Ka)return wo;Ka=1;var e=fe(),t=et().EventEmitter,r=function(){};function n(o,i){t.call(this),this.sendBuffer=[],this.sender=i,this.url=o}return e(n,t),n.prototype.send=function(o){this.sendBuffer.push(o),this.sendStop||this.sendSchedule()},n.prototype.sendScheduleWait=function(){var o=this,i;this.sendStop=function(){o.sendStop=null,clearTimeout(i)},i=setTimeout(function(){o.sendStop=null,o.sendSchedule()},25)},n.prototype.sendSchedule=function(){r("sendSchedule",this.sendBuffer.length);var o=this;if(this.sendBuffer.length>0){var i="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,i,function(a){o.sendStop=null,a?(o.emit("close",a.code||1006,"Sending error: "+a),o.close()):o.sendScheduleWait()}),this.sendBuffer=[]}},n.prototype._cleanup=function(){this.removeAllListeners()},n.prototype.close=function(){this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},wo=n,wo}var xo,Ja;function vg(){if(Ja)return xo;Ja=1;var e=fe(),t=et().EventEmitter,r=function(){};function n(o,i,a){t.call(this),this.Receiver=o,this.receiveUrl=i,this.AjaxObject=a,this._scheduleReceiver()}return e(n,t),n.prototype._scheduleReceiver=function(){var o=this,i=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);i.on("message",function(a){o.emit("message",a)}),i.once("close",function(a,s){r("close",a,s,o.pollIsClosing),o.poll=i=null,o.pollIsClosing||(s==="network"?o._scheduleReceiver():(o.emit("close",a||1006,s),o.removeAllListeners()))})},n.prototype.abort=function(){this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},xo=n,xo}var ko,Ya;function Sc(){if(Ya)return ko;Ya=1;var e=fe(),t=wt(),r=hg(),n=vg();function o(i,a,s,c,u){var d=t.addPath(i,a),v=this;r.call(this,i,s),this.poll=new n(c,d,u),this.poll.on("message",function(p){v.emit("message",p)}),this.poll.once("close",function(p,y){v.poll=null,v.emit("close",p,y),v.close()})}return e(o,r),o.prototype.close=function(){r.prototype.close.call(this),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)},ko=o,ko}var So,Qa;function Lr(){if(Qa)return So;Qa=1;var e=fe(),t=wt(),r=Sc();function n(i){return function(a,s,c){var u={};typeof s=="string"&&(u.headers={"Content-type":"text/plain"});var d=t.addPath(a,"/xhr_send"),v=new i("POST",d,s,u);return v.once("finish",function(p){if(v=null,p!==200&&p!==204)return c(new Error("http status "+p));c()}),function(){v.close(),v=null;var p=new Error("Aborted");p.code=1e3,c(p)}}}function o(i,a,s,c){r.call(this,i,a,n(c),s,c)}return e(o,r),So=o,So}var Eo,es;function Qn(){if(es)return Eo;es=1;var e=fe(),t=et().EventEmitter;function r(n,o){t.call(this);var i=this;this.bufferPosition=0,this.xo=new o("POST",n,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(a,s){i._chunkHandler(a,s),i.xo=null;var c=a===200?"network":"permanent";i.emit("close",null,c),i._cleanup()})}return e(r,t),r.prototype._chunkHandler=function(n,o){if(!(n!==200||!o))for(var i=-1;;this.bufferPosition+=i+1){var a=o.slice(this.bufferPosition);if(i=a.indexOf(`
`),i===-1)break;var s=a.slice(0,i);s&&this.emit("message",s)}},r.prototype._cleanup=function(){this.removeAllListeners()},r.prototype.abort=function(){this.xo&&(this.xo.close(),this.emit("close",null,"user"),this.xo=null),this._cleanup()},Eo=r,Eo}var Io,ts;function Ec(){if(ts)return Io;ts=1;var e=et().EventEmitter,t=fe(),r=nr(),n=wt(),o=L.XMLHttpRequest,i=function(){};function a(u,d,v,p){var y=this;e.call(this),setTimeout(function(){y._start(u,d,v,p)},0)}t(a,e),a.prototype._start=function(u,d,v,p){var y=this;try{this.xhr=new o}catch{}if(!this.xhr){this.emit("finish",0,"no xhr support"),this._cleanup();return}d=n.addQuery(d,"t="+ +new Date),this.unloadRef=r.unloadAdd(function(){y._cleanup(!0)});try{this.xhr.open(u,d,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){i("xhr timeout"),y.emit("finish",0,""),y._cleanup(!1)})}catch{this.emit("finish",0,""),this._cleanup(!1);return}if((!p||!p.noCredentials)&&a.supportsCORS&&(this.xhr.withCredentials=!0),p&&p.headers)for(var E in p.headers)this.xhr.setRequestHeader(E,p.headers[E]);this.xhr.onreadystatechange=function(){if(y.xhr){var I=y.xhr,k,N;switch(i("readyState",I.readyState),I.readyState){case 3:try{N=I.status,k=I.responseText}catch{}N===1223&&(N=204),N===200&&k&&k.length>0&&y.emit("chunk",N,k);break;case 4:N=I.status,N===1223&&(N=204),(N===12005||N===12029)&&(N=0),i("finish",N,I.responseText),y.emit("finish",N,I.responseText),y._cleanup(!1);break}}};try{y.xhr.send(v)}catch{y.emit("finish",0,""),y._cleanup(!1)}},a.prototype._cleanup=function(u){if(this.xhr){if(this.removeAllListeners(),r.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),u)try{this.xhr.abort()}catch{}this.unloadRef=this.xhr=null}},a.prototype.close=function(){this._cleanup(!0)},a.enabled=!!o;var s=["Active"].concat("Object").join("X");!a.enabled&&s in L&&(o=function(){try{return new L[s]("Microsoft.XMLHTTP")}catch{return null}},a.enabled=!!new o);var c=!1;try{c="withCredentials"in new o}catch{}return a.supportsCORS=c,Io=a,Io}var To,rs;function eo(){if(rs)return To;rs=1;var e=fe(),t=Ec();function r(n,o,i,a){t.call(this,n,o,i,a)}return e(r,t),r.enabled=t.enabled&&t.supportsCORS,To=r,To}var Ro,ns;function cn(){if(ns)return Ro;ns=1;var e=fe(),t=Ec();function r(n,o,i){t.call(this,n,o,i,{noCredentials:!0})}return e(r,t),r.enabled=t.enabled,Ro=r,Ro}var Co,os;function un(){return os||(os=1,Co={isOpera:function(){return L.navigator&&/opera/i.test(L.navigator.userAgent)},isKonqueror:function(){return L.navigator&&/konqueror/i.test(L.navigator.userAgent)},hasDomain:function(){if(!L.document)return!0;try{return!!L.document.domain}catch{return!1}}}),Co}var No,is;function pg(){if(is)return No;is=1;var e=fe(),t=Lr(),r=Qn(),n=eo(),o=cn(),i=un();function a(s){if(!o.enabled&&!n.enabled)throw new Error("Transport created when disabled");t.call(this,s,"/xhr_streaming",r,n)}return e(a,t),a.enabled=function(s){return s.nullOrigin||i.isOpera()?!1:n.enabled},a.transportName="xhr-streaming",a.roundTrips=2,a.needBody=!!L.document,No=a,No}var Oo,as;function Vi(){if(as)return Oo;as=1;var e=et().EventEmitter,t=fe(),r=nr(),n=un(),o=wt(),i=function(){};function a(s,c,u){var d=this;e.call(this),setTimeout(function(){d._start(s,c,u)},0)}return t(a,e),a.prototype._start=function(s,c,u){var d=this,v=new L.XDomainRequest;c=o.addQuery(c,"t="+ +new Date),v.onerror=function(){d._error()},v.ontimeout=function(){d._error()},v.onprogress=function(){i("progress",v.responseText),d.emit("chunk",200,v.responseText)},v.onload=function(){d.emit("finish",200,v.responseText),d._cleanup(!1)},this.xdr=v,this.unloadRef=r.unloadAdd(function(){d._cleanup(!0)});try{this.xdr.open(s,c),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(u)}catch{this._error()}},a.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},a.prototype._cleanup=function(s){if(this.xdr){if(this.removeAllListeners(),r.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,s)try{this.xdr.abort()}catch{}this.unloadRef=this.xdr=null}},a.prototype.close=function(){this._cleanup(!0)},a.enabled=!!(L.XDomainRequest&&n.hasDomain()),Oo=a,Oo}var $o,ss;function Ic(){if(ss)return $o;ss=1;var e=fe(),t=Lr(),r=Qn(),n=Vi();function o(i){if(!n.enabled)throw new Error("Transport created when disabled");t.call(this,i,"/xhr_streaming",r,n)}return e(o,t),o.enabled=function(i){return i.cookie_needed||i.nullOrigin?!1:n.enabled&&i.sameScheme},o.transportName="xdr-streaming",o.roundTrips=2,$o=o,$o}var Ao,ls;function Tc(){return ls||(ls=1,Ao=L.EventSource),Ao}var Po,cs;function mg(){if(cs)return Po;cs=1;var e=fe(),t=et().EventEmitter,r=Tc(),n=function(){};function o(i){t.call(this);var a=this,s=this.es=new r(i);s.onmessage=function(c){n("message",c.data),a.emit("message",decodeURI(c.data))},s.onerror=function(c){n("error",s.readyState);var u=s.readyState!==2?"network":"permanent";a._cleanup(),a._close(u)}}return e(o,t),o.prototype.abort=function(){this._cleanup(),this._close("user")},o.prototype._cleanup=function(){var i=this.es;i&&(i.onmessage=i.onerror=null,i.close(),this.es=null)},o.prototype._close=function(i){var a=this;setTimeout(function(){a.emit("close",null,i),a.removeAllListeners()},200)},Po=o,Po}var zo,us;function fs(){if(us)return zo;us=1;var e=fe(),t=Lr(),r=mg(),n=eo(),o=Tc();function i(a){if(!i.enabled())throw new Error("Transport created when disabled");t.call(this,a,"/eventsource",r,n)}return e(i,t),i.enabled=function(){return!!o},i.transportName="eventsource",i.roundTrips=2,zo=i,zo}var Uo,ds;function Rc(){return ds||(ds=1,Uo="1.6.1"),Uo}var Lo={exports:{}},hs;function fn(){return hs||(hs=1,(function(e){var t=nr(),r=un();e.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){e.exports.WPrefix in L||(L[e.exports.WPrefix]={})},postMessage:function(n,o){L.parent!==L&&L.parent.postMessage(JSON.stringify({windowId:e.exports.currentWindowId,type:n,data:o||""}),"*")},createIframe:function(n,o){var i=L.document.createElement("iframe"),a,s,c=function(){clearTimeout(a);try{i.onload=null}catch{}i.onerror=null},u=function(){i&&(c(),setTimeout(function(){i&&i.parentNode.removeChild(i),i=null},0),t.unloadDel(s))},d=function(p){i&&(u(),o(p))},v=function(p,y){setTimeout(function(){try{i&&i.contentWindow&&i.contentWindow.postMessage(p,y)}catch{}},0)};return i.src=n,i.style.display="none",i.style.position="absolute",i.onerror=function(){d("onerror")},i.onload=function(){clearTimeout(a),a=setTimeout(function(){d("onload timeout")},2e3)},L.document.body.appendChild(i),a=setTimeout(function(){d("timeout")},15e3),s=t.unloadAdd(u),{post:v,cleanup:u,loaded:c}},createHtmlfile:function(n,o){var i=["Active"].concat("Object").join("X"),a=new L[i]("htmlfile"),s,c,u,d=function(){clearTimeout(s),u.onerror=null},v=function(){a&&(d(),t.unloadDel(c),u.parentNode.removeChild(u),u=a=null,CollectGarbage())},p=function(I){a&&(v(),o(I))},y=function(I,k){try{setTimeout(function(){u&&u.contentWindow&&u.contentWindow.postMessage(I,k)},0)}catch{}};a.open(),a.write('<html><script>document.domain="'+L.document.domain+'";<\/script></html>'),a.close(),a.parentWindow[e.exports.WPrefix]=L[e.exports.WPrefix];var E=a.createElement("div");return a.body.appendChild(E),u=a.createElement("iframe"),E.appendChild(u),u.src=n,u.onerror=function(){p("onerror")},s=setTimeout(function(){p("timeout")},15e3),c=t.unloadAdd(v),{post:y,cleanup:v,loaded:d}}},e.exports.iframeEnabled=!1,L.document&&(e.exports.iframeEnabled=(typeof L.postMessage=="function"||typeof L.postMessage=="object")&&!r.isKonqueror())})(Lo)),Lo.exports}var Do,vs;function Cc(){if(vs)return Do;vs=1;var e=fe(),t=et().EventEmitter,r=Rc(),n=wt(),o=fn(),i=nr(),a=Ur(),s=function(){};function c(u,d,v){if(!c.enabled())throw new Error("Transport created when disabled");t.call(this);var p=this;this.origin=n.getOrigin(v),this.baseUrl=v,this.transUrl=d,this.transport=u,this.windowId=a.string(8);var y=n.addPath(v,"/iframe.html")+"#"+this.windowId;this.iframeObj=o.createIframe(y,function(E){p.emit("close",1006,"Unable to load an iframe ("+E+")"),p.close()}),this.onmessageCallback=this._message.bind(this),i.attachEvent("message",this.onmessageCallback)}return e(c,t),c.prototype.close=function(){if(this.removeAllListeners(),this.iframeObj){i.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch{}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},c.prototype._message=function(u){if(s("message",u.data),!n.isOriginEqual(u.origin,this.origin)){s("not same origin",u.origin,this.origin);return}var d;try{d=JSON.parse(u.data)}catch{s("bad json",u.data);return}if(d.windowId!==this.windowId){s("mismatched window id",d.windowId,this.windowId);return}switch(d.type){case"s":this.iframeObj.loaded(),this.postMessage("s",JSON.stringify([r,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",d.data);break;case"c":var v;try{v=JSON.parse(d.data)}catch{s("bad json",d.data);return}this.emit("close",v[0],v[1]),this.close();break}},c.prototype.postMessage=function(u,d){this.iframeObj.post(JSON.stringify({windowId:this.windowId,type:u,data:d||""}),this.origin)},c.prototype.send=function(u){this.postMessage("m",u)},c.enabled=function(){return o.iframeEnabled},c.transportName="iframe",c.roundTrips=2,Do=c,Do}var Zo,ps;function Gi(){return ps||(ps=1,Zo={isObject:function(e){var t=typeof e;return t==="function"||t==="object"&&!!e},extend:function(e){if(!this.isObject(e))return e;for(var t,r,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}}),Zo}var jo,ms;function Mo(){if(ms)return jo;ms=1;var e=fe(),t=Cc(),r=Gi();return jo=function(n){function o(i,a){t.call(this,n.transportName,i,a)}return e(o,t),o.enabled=function(i,a){if(!L.document)return!1;var s=r.extend({},a);return s.sameOrigin=!0,n.enabled(s)&&t.enabled()},o.transportName="iframe-"+n.transportName,o.needBody=!0,o.roundTrips=t.roundTrips+n.roundTrips-1,o.facadeTransport=n,o},jo}var Bo,gs;function gg(){if(gs)return Bo;gs=1;var e=fe(),t=fn(),r=wt(),n=et().EventEmitter,o=Ur(),i=function(){};function a(c){n.call(this);var u=this;t.polluteGlobalNamespace(),this.id="a"+o.string(6),c=r.addQuery(c,"c="+decodeURIComponent(t.WPrefix+"."+this.id)),i("using htmlfile",a.htmlfileEnabled);var d=a.htmlfileEnabled?t.createHtmlfile:t.createIframe;L[t.WPrefix][this.id]={start:function(){u.iframeObj.loaded()},message:function(v){u.emit("message",v)},stop:function(){u._cleanup(),u._close("network")}},this.iframeObj=d(c,function(){u._cleanup(),u._close("permanent")})}e(a,n),a.prototype.abort=function(){this._cleanup(),this._close("user")},a.prototype._cleanup=function(){this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete L[t.WPrefix][this.id]},a.prototype._close=function(c){this.emit("close",null,c),this.removeAllListeners()},a.htmlfileEnabled=!1;var s=["Active"].concat("Object").join("X");if(s in L)try{a.htmlfileEnabled=!!new L[s]("htmlfile")}catch{}return a.enabled=a.htmlfileEnabled||t.iframeEnabled,Bo=a,Bo}var qo,_s;function bs(){if(_s)return qo;_s=1;var e=fe(),t=gg(),r=cn(),n=Lr();function o(i){if(!t.enabled)throw new Error("Transport created when disabled");n.call(this,i,"/htmlfile",t,r)}return e(o,n),o.enabled=function(i){return t.enabled&&i.sameOrigin},o.transportName="htmlfile",o.roundTrips=2,qo=o,qo}var Fo,ys;function ws(){if(ys)return Fo;ys=1;var e=fe(),t=Lr(),r=Qn(),n=eo(),o=cn();function i(a){if(!o.enabled&&!n.enabled)throw new Error("Transport created when disabled");t.call(this,a,"/xhr",r,n)}return e(i,t),i.enabled=function(a){return a.nullOrigin?!1:o.enabled&&a.sameOrigin?!0:n.enabled},i.transportName="xhr-polling",i.roundTrips=2,Fo=i,Fo}var Ho,xs;function _g(){if(xs)return Ho;xs=1;var e=fe(),t=Lr(),r=Ic(),n=Qn(),o=Vi();function i(a){if(!o.enabled)throw new Error("Transport created when disabled");t.call(this,a,"/xhr",n,o)}return e(i,t),i.enabled=r.enabled,i.transportName="xdr-polling",i.roundTrips=2,Ho=i,Ho}var Wo,ks;function bg(){if(ks)return Wo;ks=1;var e=fn(),t=Ur(),r=un(),n=wt(),o=fe(),i=et().EventEmitter,a=function(){};function s(c){var u=this;i.call(this),e.polluteGlobalNamespace(),this.id="a"+t.string(6);var d=n.addQuery(c,"c="+encodeURIComponent(e.WPrefix+"."+this.id));L[e.WPrefix][this.id]=this._callback.bind(this),this._createScript(d),this.timeoutId=setTimeout(function(){u._abort(new Error("JSONP script loaded abnormally (timeout)"))},s.timeout)}return o(s,i),s.prototype.abort=function(){if(L[e.WPrefix][this.id]){var c=new Error("JSONP user aborted read");c.code=1e3,this._abort(c)}},s.timeout=35e3,s.scriptErrorTimeout=1e3,s.prototype._callback=function(c){this._cleanup(),!this.aborting&&(c&&this.emit("message",c),this.emit("close",null,"network"),this.removeAllListeners())},s.prototype._abort=function(c){this._cleanup(),this.aborting=!0,this.emit("close",c.code,c.message),this.removeAllListeners()},s.prototype._cleanup=function(){if(clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var c=this.script;c.parentNode.removeChild(c),c.onreadystatechange=c.onerror=c.onload=c.onclick=null,this.script=null}delete L[e.WPrefix][this.id]},s.prototype._scriptError=function(){var c=this;this.errorTimer||(this.errorTimer=setTimeout(function(){c.loadedOkay||c._abort(new Error("JSONP script loaded abnormally (onerror)"))},s.scriptErrorTimeout))},s.prototype._createScript=function(c){var u=this,d=this.script=L.document.createElement("script"),v;if(d.id="a"+t.string(8),d.src=c,d.type="text/javascript",d.charset="UTF-8",d.onerror=this._scriptError.bind(this),d.onload=function(){u._abort(new Error("JSONP script loaded abnormally (onload)"))},d.onreadystatechange=function(){if(a("onreadystatechange",d.readyState),/loaded|closed/.test(d.readyState)){if(d&&d.htmlFor&&d.onclick){u.loadedOkay=!0;try{d.onclick()}catch{}}d&&u._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},typeof d.async>"u"&&L.document.attachEvent)if(r.isOpera())v=this.script2=L.document.createElement("script"),v.text="try{var a = document.getElementById('"+d.id+"'); if(a)a.onerror();}catch(x){};",d.async=v.async=!1;else{try{d.htmlFor=d.id,d.event="onclick"}catch{}d.async=!0}typeof d.async<"u"&&(d.async=!0);var p=L.document.getElementsByTagName("head")[0];p.insertBefore(d,p.firstChild),v&&p.insertBefore(v,p.firstChild)},Wo=s,Wo}var Vo,Ss;function yg(){if(Ss)return Vo;Ss=1;var e=Ur(),t=wt(),r=function(){},n,o;function i(s){try{return L.document.createElement('<iframe name="'+s+'">')}catch{var c=L.document.createElement("iframe");return c.name=s,c}}function a(){n=L.document.createElement("form"),n.style.display="none",n.style.position="absolute",n.method="POST",n.enctype="application/x-www-form-urlencoded",n.acceptCharset="UTF-8",o=L.document.createElement("textarea"),o.name="d",n.appendChild(o),L.document.body.appendChild(n)}return Vo=function(s,c,u){n||a();var d="a"+e.string(8);n.target=d,n.action=t.addQuery(t.addPath(s,"/jsonp_send"),"i="+d);var v=i(d);v.id=d,v.style.display="none",n.appendChild(v);try{o.value=c}catch{}n.submit();var p=function(y){v.onerror&&(v.onreadystatechange=v.onerror=v.onload=null,setTimeout(function(){v.parentNode.removeChild(v),v=null},500),o.value="",u(y))};return v.onerror=function(){p()},v.onload=function(){p()},v.onreadystatechange=function(y){r("onreadystatechange",d,v.readyState),v.readyState==="complete"&&p()},function(){p(new Error("Aborted"))}},Vo}var Go,Es;function wg(){if(Es)return Go;Es=1;var e=fe(),t=Sc(),r=bg(),n=yg();function o(i){if(!o.enabled())throw new Error("Transport created when disabled");t.call(this,i,"/jsonp",n,r)}return e(o,t),o.enabled=function(){return!!L.document},o.transportName="jsonp-polling",o.roundTrips=1,o.needBody=!0,Go=o,Go}var Xo,Is;function xg(){return Is||(Is=1,Xo=[dg(),pg(),Ic(),fs(),Mo()(fs()),bs(),Mo()(bs()),ws(),_g(),Mo()(ws()),wg()]),Xo}var Ts={},Rs;function kg(){if(Rs)return Ts;Rs=1;var e=Array.prototype,t=Object.prototype,r=Function.prototype,n=String.prototype,o=e.slice,i=t.toString,a=function(f){return t.toString.call(f)==="[object Function]"},s=function(m){return i.call(m)==="[object Array]"},c=function(m){return i.call(m)==="[object String]"},u=Object.defineProperty&&(function(){try{return Object.defineProperty({},"x",{}),!0}catch{return!1}})(),d;u?d=function(f,m,x,R){!R&&m in f||Object.defineProperty(f,m,{configurable:!0,enumerable:!1,writable:!0,value:x})}:d=function(f,m,x,R){!R&&m in f||(f[m]=x)};var v=function(f,m,x){for(var R in m)t.hasOwnProperty.call(m,R)&&d(f,R,m[R],x)},p=function(f){if(f==null)throw new TypeError("can't convert "+f+" to object");return Object(f)};function y(f){var m=+f;return m!==m?m=0:m!==0&&m!==1/0&&m!==-1/0&&(m=(m>0||-1)*Math.floor(Math.abs(m))),m}function E(f){return f>>>0}function I(){}v(r,{bind:function(m){var x=this;if(!a(x))throw new TypeError("Function.prototype.bind called on incompatible "+x);for(var R=o.call(arguments,1),z=function(){if(this instanceof $){var F=x.apply(this,R.concat(o.call(arguments)));return Object(F)===F?F:this}else return x.apply(m,R.concat(o.call(arguments)))},q=Math.max(0,x.length-R.length),A=[],te=0;te<q;te++)A.push("$"+te);var $=Function("binder","return function ("+A.join(",")+"){ return binder.apply(this, arguments); }")(z);return x.prototype&&(I.prototype=x.prototype,$.prototype=new I,I.prototype=null),$}}),v(Array,{isArray:s});var k=Object("a"),N=k[0]!=="a"||!(0 in k),b=function(m){var x=!0,R=!0;return m&&(m.call("foo",function(z,q,A){typeof A!="object"&&(x=!1)}),m.call([1],function(){R=typeof this=="string"},"x")),!!m&&x&&R};v(e,{forEach:function(m){var x=p(this),R=N&&c(this)?this.split(""):x,z=arguments[1],q=-1,A=R.length>>>0;if(!a(m))throw new TypeError;for(;++q<A;)q in R&&m.call(z,R[q],q,x)}},!b(e.forEach));var w=Array.prototype.indexOf&&[0,1].indexOf(1,2)!==-1;v(e,{indexOf:function(m){var x=N&&c(this)?this.split(""):p(this),R=x.length>>>0;if(!R)return-1;var z=0;for(arguments.length>1&&(z=y(arguments[1])),z=z>=0?z:Math.max(0,R+z);z<R;z++)if(z in x&&x[z]===m)return z;return-1}},w);var _=n.split;"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1?(function(){var f=/()??/.exec("")[1]===void 0;n.split=function(m,x){var R=this;if(m===void 0&&x===0)return[];if(i.call(m)!=="[object RegExp]")return _.call(this,m,x);var z=[],q=(m.ignoreCase?"i":"")+(m.multiline?"m":"")+(m.extended?"x":"")+(m.sticky?"y":""),A=0,te,$,F,X;for(m=new RegExp(m.source,q+"g"),R+="",f||(te=new RegExp("^"+m.source+"$(?!\\s)",q)),x=x===void 0?-1>>>0:E(x);($=m.exec(R))&&(F=$.index+$[0].length,!(F>A&&(z.push(R.slice(A,$.index)),!f&&$.length>1&&$[0].replace(te,function(){for(var J=1;J<arguments.length-2;J++)arguments[J]===void 0&&($[J]=void 0)}),$.length>1&&$.index<R.length&&e.push.apply(z,$.slice(1)),X=$[0].length,A=F,z.length>=x)));)m.lastIndex===$.index&&m.lastIndex++;return A===R.length?(X||!m.test(""))&&z.push(""):z.push(R.slice(A)),z.length>x?z.slice(0,x):z}})():"0".split(void 0,0).length&&(n.split=function(m,x){return m===void 0&&x===0?[]:_.call(this,m,x)});var l=n.substr,g="".substr&&"0b".substr(-1)!=="b";return v(n,{substr:function(m,x){return l.call(this,m<0&&(m=this.length+m)<0?0:m,x)}},g),Ts}var Ko,Cs;function Sg(){if(Cs)return Ko;Cs=1;var e=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,t,r=function(n){var o,i={},a=[];for(o=0;o<65536;o++)a.push(String.fromCharCode(o));return n.lastIndex=0,a.join("").replace(n,function(s){return i[s]="\\u"+("0000"+s.charCodeAt(0).toString(16)).slice(-4),""}),n.lastIndex=0,i};return Ko={quote:function(n){var o=JSON.stringify(n);return e.lastIndex=0,e.test(o)?(t||(t=r(e)),o.replace(e,function(i){return t[i]})):o}},Ko}var Jo,Ns;function Eg(){if(Ns)return Jo;Ns=1;var e=function(){};return Jo=function(t){return{filterToEnabled:function(r,n){var o={main:[],facade:[]};return r?typeof r=="string"&&(r=[r]):r=[],t.forEach(function(i){if(i&&!(i.transportName==="websocket"&&n.websocket===!1)){if(r.length&&r.indexOf(i.transportName)===-1){e("not in whitelist",i.transportName);return}i.enabled(n)?(e("enabled",i.transportName),o.main.push(i),i.facadeTransport&&o.facade.push(i.facadeTransport)):e("disabled",i.transportName)}}),o}}},Jo}var Yo,Os;function Ig(){if(Os)return Yo;Os=1;var e={};return["log","debug","warn"].forEach(function(t){var r;try{r=L.console&&L.console[t]&&L.console[t].apply}catch{}e[t]=r?function(){return L.console[t].apply(L.console,arguments)}:t==="log"?function(){}:e.log}),Yo=e,Yo}var Qo,$s;function Xi(){if($s)return Qo;$s=1;function e(t){this.type=t}return e.prototype.initEvent=function(t,r,n){return this.type=t,this.bubbles=r,this.cancelable=n,this.timeStamp=+new Date,this},e.prototype.stopPropagation=function(){},e.prototype.preventDefault=function(){},e.CAPTURING_PHASE=1,e.AT_TARGET=2,e.BUBBLING_PHASE=3,Qo=e,Qo}var ei,As;function Nc(){return As||(As=1,ei=L.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""}),ei}var ti,Ps;function Tg(){if(Ps)return ti;Ps=1;var e=fe(),t=Xi();function r(){t.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}return e(r,t),ti=r,ti}var ri,zs;function Rg(){if(zs)return ri;zs=1;var e=fe(),t=Xi();function r(n){t.call(this),this.initEvent("message",!1,!1),this.data=n}return e(r,t),ri=r,ri}var ni,Us;function Cg(){if(Us)return ni;Us=1;var e=et().EventEmitter,t=fe();function r(){var n=this;e.call(this),this.to=setTimeout(function(){n.emit("finish",200,"{}")},r.timeout)}return t(r,e),r.prototype.close=function(){clearTimeout(this.to)},r.timeout=2e3,ni=r,ni}var oi,Ls;function Oc(){if(Ls)return oi;Ls=1;var e=et().EventEmitter,t=fe(),r=Gi();function n(o,i){e.call(this);var a=this,s=+new Date;this.xo=new i("GET",o),this.xo.once("finish",function(c,u){var d,v;if(c===200){if(v=+new Date-s,u)try{d=JSON.parse(u)}catch{}r.isObject(d)||(d={})}a.emit("finish",d,v),a.removeAllListeners()})}return t(n,e),n.prototype.close=function(){this.removeAllListeners(),this.xo.close()},oi=n,oi}var ii,Ds;function $c(){if(Ds)return ii;Ds=1;var e=fe(),t=et().EventEmitter,r=cn(),n=Oc();function o(i){var a=this;t.call(this),this.ir=new n(i,r),this.ir.once("finish",function(s,c){a.ir=null,a.emit("message",JSON.stringify([s,c]))})}return e(o,t),o.transportName="iframe-info-receiver",o.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},ii=o,ii}var ai,Zs;function Ng(){if(Zs)return ai;Zs=1;var e=et().EventEmitter,t=fe(),r=nr(),n=Cc(),o=$c();function i(a,s){var c=this;e.call(this);var u=function(){var d=c.ifr=new n(o.transportName,s,a);d.once("message",function(v){if(v){var p;try{p=JSON.parse(v)}catch{c.emit("finish"),c.close();return}var y=p[0],E=p[1];c.emit("finish",y,E)}c.close()}),d.once("close",function(){c.emit("finish"),c.close()})};L.document.body?u():r.attachEvent("load",u)}return t(i,e),i.enabled=function(){return n.enabled()},i.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},ai=i,ai}var si,js;function Og(){if(js)return si;js=1;var e=et().EventEmitter,t=fe(),r=wt(),n=Vi(),o=eo(),i=cn(),a=Cg(),s=Ng(),c=Oc();function u(d,v){var p=this;e.call(this),setTimeout(function(){p.doXhr(d,v)},0)}return t(u,e),u._getReceiver=function(d,v,p){return p.sameOrigin?new c(v,i):o.enabled?new c(v,o):n.enabled&&p.sameScheme?new c(v,n):s.enabled()?new s(d,v):new c(v,a)},u.prototype.doXhr=function(d,v){var p=this,y=r.addPath(d,"/info");this.xo=u._getReceiver(d,y,v),this.timeoutRef=setTimeout(function(){p._cleanup(!1),p.emit("finish")},u.timeout),this.xo.once("finish",function(E,I){p._cleanup(!0),p.emit("finish",E,I)})},u.prototype._cleanup=function(d){clearTimeout(this.timeoutRef),this.timeoutRef=null,!d&&this.xo&&this.xo.close(),this.xo=null},u.prototype.close=function(){this.removeAllListeners(),this._cleanup(!1)},u.timeout=8e3,si=u,si}var li,Ms;function $g(){if(Ms)return li;Ms=1;var e=fn();function t(r){this._transport=r,r.on("message",this._transportMessage.bind(this)),r.on("close",this._transportClose.bind(this))}return t.prototype._transportClose=function(r,n){e.postMessage("c",JSON.stringify([r,n]))},t.prototype._transportMessage=function(r){e.postMessage("t",r)},t.prototype._send=function(r){this._transport.send(r)},t.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},li=t,li}var ci,Bs;function Ag(){if(Bs)return ci;Bs=1;var e=wt(),t=nr(),r=$g(),n=$c(),o=fn(),i=Nc(),a=function(){};return ci=function(s,c){var u={};c.forEach(function(v){v.facadeTransport&&(u[v.facadeTransport.transportName]=v.facadeTransport)}),u[n.transportName]=n;var d;s.bootstrap_iframe=function(){var v;o.currentWindowId=i.hash.slice(1);var p=function(y){if(y.source===parent&&(typeof d>"u"&&(d=y.origin),y.origin===d)){var E;try{E=JSON.parse(y.data)}catch{a("bad json",y.data);return}if(E.windowId===o.currentWindowId)switch(E.type){case"s":var I;try{I=JSON.parse(E.data)}catch{a("bad json",E.data);break}var k=I[0],N=I[1],b=I[2],w=I[3];if(k!==s.version)throw new Error('Incompatible SockJS! Main site uses: "'+k+'", the iframe: "'+s.version+'".');if(!e.isOriginEqual(b,i.href)||!e.isOriginEqual(w,i.href))throw new Error("Can't connect to different domain from within an iframe. ("+i.href+", "+b+", "+w+")");v=new r(new u[N](b,w));break;case"m":v._send(E.data);break;case"c":v&&v._close(),v=null;break}}};t.attachEvent("message",p),o.postMessage("s")}},ci}var ui,qs;function Pg(){if(qs)return ui;qs=1,kg();var e=xc(),t=fe(),r=Ur(),n=Sg(),o=wt(),i=nr(),a=Eg(),s=Gi(),c=un(),u=Ig(),d=Xi(),v=kc(),p=Nc(),y=Tg(),E=Rg(),I=Og(),k=function(){},N;function b(_,l,g){if(!(this instanceof b))return new b(_,l,g);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");v.call(this),this.readyState=b.CONNECTING,this.extensions="",this.protocol="",g=g||{},g.protocols_whitelist&&u.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=g.transports,this._transportOptions=g.transportOptions||{},this._timeout=g.timeout||0;var f=g.sessionId||8;if(typeof f=="function")this._generateSessionId=f;else if(typeof f=="number")this._generateSessionId=function(){return r.string(f)};else throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._server=g.server||r.numberString(1e3);var m=new e(_);if(!m.host||!m.protocol)throw new SyntaxError("The URL '"+_+"' is invalid");if(m.hash)throw new SyntaxError("The URL must not contain a fragment");if(m.protocol!=="http:"&&m.protocol!=="https:")throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+m.protocol+"' is not allowed.");var x=m.protocol==="https:";if(p.protocol==="https:"&&!x&&!o.isLoopbackAddr(m.hostname))throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");l?Array.isArray(l)||(l=[l]):l=[];var R=l.sort();R.forEach(function(q,A){if(!q)throw new SyntaxError("The protocols entry '"+q+"' is invalid.");if(A<R.length-1&&q===R[A+1])throw new SyntaxError("The protocols entry '"+q+"' is duplicated.")});var z=o.getOrigin(p.href);this._origin=z?z.toLowerCase():null,m.set("pathname",m.pathname.replace(/\/+$/,"")),this.url=m.href,k("using url",this.url),this._urlInfo={nullOrigin:!c.hasDomain(),sameOrigin:o.isOriginEqual(this.url,p.href),sameScheme:o.isSchemeEqual(this.url,p.href)},this._ir=new I(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}t(b,v);function w(_){return _===1e3||_>=3e3&&_<=4999}return b.prototype.close=function(_,l){if(_&&!w(_))throw new Error("InvalidAccessError: Invalid code");if(l&&l.length>123)throw new SyntaxError("reason argument has an invalid length");if(!(this.readyState===b.CLOSING||this.readyState===b.CLOSED)){var g=!0;this._close(_||1e3,l||"Normal closure",g)}},b.prototype.send=function(_){if(typeof _!="string"&&(_=""+_),this.readyState===b.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===b.OPEN&&this._transport.send(n.quote(_))},b.version=Rc(),b.CONNECTING=0,b.OPEN=1,b.CLOSING=2,b.CLOSED=3,b.prototype._receiveInfo=function(_,l){if(this._ir=null,!_){this._close(1002,"Cannot connect to server");return}this._rto=this.countRTO(l),this._transUrl=_.base_url?_.base_url:this.url,_=s.extend(_,this._urlInfo);var g=N.filterToEnabled(this._transportsWhitelist,_);this._transports=g.main,k(this._transports.length+" enabled transports"),this._connect()},b.prototype._connect=function(){for(var _=this._transports.shift();_;_=this._transports.shift()){if(k("attempt",_.transportName),_.needBody&&(!L.document.body||typeof L.document.readyState<"u"&&L.document.readyState!=="complete"&&L.document.readyState!=="interactive")){this._transports.unshift(_),i.attachEvent("load",this._connect.bind(this));return}var l=Math.max(this._timeout,this._rto*_.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),l);var g=o.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),f=this._transportOptions[_.transportName],m=new _(g,this._transUrl,f);m.on("message",this._transportMessage.bind(this)),m.once("close",this._transportClose.bind(this)),m.transportName=_.transportName,this._transport=m;return}this._close(2e3,"All transports failed",!1)},b.prototype._transportTimeout=function(){this.readyState===b.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))},b.prototype._transportMessage=function(_){var l=this,g=_.slice(0,1),f=_.slice(1),m;switch(g){case"o":this._open();return;case"h":this.dispatchEvent(new d("heartbeat")),k("heartbeat",this.transport);return}if(f)try{m=JSON.parse(f)}catch{}if(!(typeof m>"u"))switch(g){case"a":Array.isArray(m)&&m.forEach(function(x){k("message",l.transport),l.dispatchEvent(new E(x))});break;case"m":k("message",this.transport),this.dispatchEvent(new E(m));break;case"c":Array.isArray(m)&&m.length===2&&this._close(m[0],m[1],!0);break}},b.prototype._transportClose=function(_,l){if(k("_transportClose",this.transport),this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),!w(_)&&_!==2e3&&this.readyState===b.CONNECTING){this._connect();return}this._close(_,l)},b.prototype._open=function(){k("_open",this._transport&&this._transport.transportName,this.readyState),this.readyState===b.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=b.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new d("open")),k("connected",this.transport)):this._close(1006,"Server lost session")},b.prototype._close=function(_,l,g){k("_close",this.transport,_,l,g,this.readyState);var f=!1;if(this._ir&&(f=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===b.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=b.CLOSING,setTimeout((function(){this.readyState=b.CLOSED,f&&this.dispatchEvent(new d("error"));var m=new y("close");m.wasClean=g||!1,m.code=_||1e3,m.reason=l,this.dispatchEvent(m),this.onmessage=this.onclose=this.onerror=null}).bind(this),0)},b.prototype.countRTO=function(_){return _>100?4*_:300+_},ui=function(_){return N=a(_),Ag()(b,_),b},ui}var fi,Fs;function zg(){if(Fs)return fi;Fs=1;var e=xg();return fi=Pg()(e),"_sockjs_onload"in L&&setTimeout(L._sockjs_onload,1),fi}var Ug=zg();const Lg=og(Ug),Dg=5e3,Zg=2e4,jg=1e4;let Ot={status:"idle"};function Mg(){return new sg.Client({webSocketFactory:()=>new Lg("/ws"),reconnectDelay:Dg,heartbeatIncoming:Zg,heartbeatOutgoing:jg})}function Ei(e,t,r){let n;try{n=JSON.parse(e)}catch(i){return console.warn(`Failed to parse ${t} payload`,i),null}const o=Fi(r,n,t);return o.success?o.data:null}async function Ac(){if(Ot.status==="connected"&&Ot.client.connected)return Ot.client;if(Ot.status==="connecting")return Ot.pending;const e=new Promise((t,r)=>{const n=Mg();n.onConnect=o=>{Ot={status:"connected",client:n},t(n)},n.onStompError=o=>{Ot={status:"idle"},r(new Error(o.body||"STOMP connection failed"))},n.onWebSocketError=o=>{Ot={status:"idle"},r(new Error("WebSocket connection failed"))},n.activate()}).catch(t=>{throw Ot={status:"idle"},t});return Ot={status:"connecting",pending:e},e}async function Bg(e,t,r,n){const o=await Ac(),i=o.subscribe(`/topic/search/${e}/progress`,s=>{const c=Ei(s.body,"searchProgressEvent",Bp);if(!c){n(new Error("Failed to parse search progress event"));return}t(c.message??"Searching...")}),a=o.subscribe(`/topic/search/${e}/results`,s=>{const c=Ei(s.body,"searchResultsEvent",qp);if(!c){n(new Error("Failed to parse search results event"));return}r(c.newResults)});return()=>{i.unsubscribe(),a.unsubscribe()}}async function qg(e,t,r){const o=(await Ac()).subscribe(`/topic/book/${e}/coverUpdate`,i=>{const a=Ei(i.body,"bookCoverUpdateEvent",Fp);if(!a){r(new Error("Failed to parse book cover update event"));return}a.newCoverUrl&&t(a.newCoverUrl)});return()=>o.unsubscribe()}var Fg=Z("<option> </option>"),Hg=Z('<div class="flex items-center gap-2 text-sm text-anthracite-600 dark:text-slate-300"><!> Searching books...</div>'),Wg=Z('<div class="flex items-center gap-2 text-xs text-canvas-700 dark:text-canvas-400"><!> </div>'),Vg=Z('<p class="rounded-lg border border-red-200 bg-red-50 p-3 text-sm text-red-700 dark:border-red-900/40 dark:bg-red-950/40 dark:text-red-200"> </p>'),Gg=Z('<p class="text-sm text-anthracite-600 dark:text-slate-400"> <span class="font-medium text-anthracite-900 dark:text-slate-100"> </span></p>'),Xg=Z('<div class="text-center py-12"><!> <p class="text-lg font-medium text-anthracite-700 dark:text-slate-300">Search for books</p> <p class="text-sm text-anthracite-500 dark:text-slate-400">Enter a title, author, or ISBN above to find books.</p></div>'),Kg=Z('<p class="text-sm text-anthracite-600 dark:text-slate-300">No results found.</p>'),Jg=Z('<span class="px-2 text-sm text-anthracite-400 dark:text-slate-500">&hellip;</span>'),Yg=Z("<button> </button>"),Qg=Z('<div></div> <nav class="mt-4 flex items-center justify-center gap-1"><button class="rounded-md border border-linen-300 px-3 py-1.5 text-sm transition disabled:opacity-40 dark:border-slate-600 dark:text-slate-300 hover:bg-linen-100 dark:hover:bg-slate-800" aria-label="Previous page">&laquo;</button> <!> <button class="rounded-md border border-linen-300 px-3 py-1.5 text-sm transition disabled:opacity-40 dark:border-slate-600 dark:text-slate-300 hover:bg-linen-100 dark:hover:bg-slate-800" aria-label="Next page">&raquo;</button></nav>',1),e0=Z('<section class="mx-auto flex max-w-6xl flex-col gap-6 px-4 py-8 md:px-6"><form class="rounded-xl border border-linen-200 bg-white p-4 shadow-soft dark:border-slate-700 dark:bg-slate-800"><div class="flex flex-col gap-3 sm:flex-row"><div class="relative flex-1"><input class="w-full rounded-lg border border-linen-300 px-4 py-2.5 pr-12 text-sm outline-none ring-canvas-300 transition focus:ring-2 dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100" placeholder="Search by title, author, ISBN" required/> <button type="submit" class="absolute right-2 top-1/2 -translate-y-1/2 rounded-md bg-canvas-400 p-1.5 text-white transition hover:bg-canvas-500" aria-label="Search"><!></button></div></div> <div class="mt-3 flex flex-wrap items-center justify-between gap-3"><div class="flex items-center gap-2"><label for="sort-select" class="text-xs font-medium text-anthracite-600 dark:text-slate-400">Sort:</label> <select id="sort-select" class="rounded-lg border border-linen-300 px-3 py-1.5 text-sm dark:border-slate-600 dark:bg-slate-900 dark:text-slate-100"></select></div> <div class="flex items-center gap-1"><button type="button" aria-label="Grid view"><!></button> <button type="button" aria-label="List view"><!></button></div></div></form> <!> <!> <!> <!> <!> <!></section>');function di(e,t){se(t,!0);const r=12,n=5,o=["ANY","GOOGLE_BOOKS","OPEN_LIBRARY","LONGITOOD"],i=["ANY","HIGH_ONLY","HIGH_FIRST"],a=["relevance","title","author","newest","rating"],s={relevance:"Most Relevant",title:"Title AâZ",author:"By Author",newest:"Newest First",rating:"Highest Rated"},c=new Map;let u=null,d=ee(""),v=ee(1),p=ee("newest"),y=ee("ANY"),E=ee("HIGH_FIRST"),I=ee("grid"),k=ee(!1),N=ee(null),b=ee(null),w=ee(null);function _(P,D){if(!P)return D;const M=Number.parseInt(P,10);return!Number.isFinite(M)||M<1?D:M}function l(){return{query:h(d),startIndex:(h(v)-1)*r,maxResults:r,orderBy:h(p),coverSource:h(y),resolution:h(E)}}function g(P){return[P.query,P.startIndex,P.maxResults,P.orderBy,P.coverSource,P.resolution].join("::")}function f(P,D,M,ie){const pe=P.get(D)??ie;return M.includes(pe)?pe:ie}function m(P){const D=P.searchParams;B(d,D.get("query")?.trim()??"",!0),B(v,_(D.get("page"),1),!0),B(p,f(D,"sort",a,"newest"),!0),B(y,f(D,"coverSource",o,"ANY"),!0),B(E,f(D,"resolution",i,"HIGH_FIRST"),!0);const M=D.get("view");B(I,M==="list"?"list":"grid",!0)}function x(P){if(!h(w))return;const D=rg(P);if(D.length===0)return;const M=ng(h(w).results,D);B(w,{...h(w),results:M,totalResults:Math.max(h(w).totalResults,M.length)},!0)}async function R(P,D){if(D.hasMore)for(let M=1;M<=n;M++){const ie=P.startIndex+M*r,pe={...P,startIndex:ie},Ge=g(pe);if(!c.has(Ge))try{const lt=await Aa(pe);if(c.set(Ge,lt),!lt.hasMore)break}catch(lt){console.warn("Prefetch failed for offset",M,lt);break}}}async function z(){if(!h(d)){u&&(u(),u=null),B(w,null),B(N,null),B(b,null);return}B(k,!0),B(N,null),B(b,null);const P=l(),D=g(P);try{const M=c.get(D)??await Aa(P);c.set(D,M),B(w,M,!0),u&&(u(),u=null),u=await Bg(M.queryHash,ie=>{B(b,ie,!0)},ie=>{x(ie)},ie=>{console.error("Realtime search subscription error:",ie.message),B(b,null)}),R(P,M)}catch(M){B(N,M instanceof Error?M.message:"Search request failed",!0),B(w,null)}finally{B(k,!1)}}function q(P=1){const D=new URL("/search",window.location.origin);h(d).trim()&&D.searchParams.set("query",h(d).trim()),D.searchParams.set("page",String(P)),D.searchParams.set("sort",h(p)),D.searchParams.set("view",h(I)),D.searchParams.set("coverSource",h(y)),D.searchParams.set("resolution",h(E)),Pr(`${D.pathname}${D.search}`)}function A(P){const D=P.authors.map(M=>M.name).filter(M=>M&&M.length>0);return{id:P.id,slug:P.slug??P.id,title:P.title??"Untitled",authors:D,description:P.descriptionContent?.text??P.description,coverUrl:P.cover?.preferredUrl??P.cover?.s3ImagePath??P.cover?.externalImageUrl??null,fallbackCoverUrl:P.cover?.fallbackUrl??"/images/placeholder-book-cover.svg"}}function te(P,D,M){if(!P)return 1;const ie=Math.max(1,Math.ceil(P.totalResults/M));return P.hasMore?Math.max(ie,D+1):ie}function $(P,D){if(D<=7)return Array.from({length:D},(Ge,lt)=>lt+1);const M=[1];P>3&&M.push("ellipsis");const ie=Math.max(2,P-1),pe=Math.min(D-1,P+1);for(let Ge=ie;Ge<=pe;Ge++)M.push(Ge);return P<D-2&&M.push("ellipsis"),M.push(D),M}let F=Oe(()=>te(h(w),h(v),r)),X=Oe(()=>$(h(v),h(F)));an(()=>{m(t.currentUrl),Ar(()=>{z()})}),Vn(()=>()=>{u&&u()});var J=e0(),j=S(J),K=S(j),re=S(K),oe=S(re),he=O(oe,2),me=S(he);nn(me,{size:16});var we=O(K,2),Me=S(we),Ke=O(S(Me),2);Ke.__change=()=>q(1),Ze(Ke,21,()=>a,Pt,(P,D)=>{var M=Fg(),ie=S(M),pe={};Y(()=>{G(ie,s[h(D)]),pe!==(pe=h(D))&&(M.value=(M.__value=h(D))??"")}),T(P,M)});var Wt=O(Me,2),ht=S(Wt);ht.__click=()=>{B(I,"grid"),q(h(v))};var Lt=S(ht);sm(Lt,{size:16});var or=O(ht,2);or.__click=()=>{B(I,"list"),q(h(v))};var gr=S(or);wc(gr,{size:16});var ir=O(j,2);{var _r=P=>{var D=Hg(),M=S(D);$a(M,{size:16,class:"animate-spin"}),T(P,D)};W(ir,P=>{h(k)&&P(_r)})}var Be=O(ir,2);{var Ve=P=>{var D=Wg(),M=S(D);$a(M,{size:14,class:"animate-spin"});var ie=O(M);Y(()=>G(ie,` ${h(b)??""}`)),T(P,D)};W(Be,P=>{h(b)&&P(Ve)})}var qe=O(Be,2);{var it=P=>{var D=Vg(),M=S(D);Y(()=>G(M,h(N))),T(P,D)};W(qe,P=>{h(N)&&P(it)})}var vt=O(qe,2);{var Pe=P=>{var D=Gg(),M=S(D),ie=O(M),pe=S(ie);Y(()=>{G(M,`Showing ${h(w).results.length??""} of ${h(w).totalResults??""} results for `),G(pe,`'${h(d)??""}'`)}),T(P,D)};W(vt,P=>{!h(k)&&h(w)&&h(d)&&P(Pe)})}var ze=O(vt,2);{var pt=P=>{var D=Xg(),M=S(D);nn(M,{size:48,class:"mx-auto mb-4 text-linen-400 dark:text-slate-600"}),T(P,D)},Ne=P=>{var D=Q(),M=V(D);{var ie=pe=>{var Ge=Kg();T(pe,Ge)};W(M,pe=>{!h(k)&&h(w)&&h(w).results.length===0&&pe(ie)},!0)}T(P,D)};W(ze,P=>{!h(k)&&!h(d)?P(pt):P(Ne,!1)})}var at=O(ze,2);{var st=P=>{var D=Qg(),M=V(D);Ze(M,21,()=>h(w).results,Ct=>Ct.id,(Ct,Xe)=>{{let Dt=Oe(()=>A(h(Xe))),Vt=Oe(()=>`/book/${encodeURIComponent(h(Xe).slug??h(Xe).id)}?query=${encodeURIComponent(h(d))}&page=${h(v)}&sort=${encodeURIComponent(h(p))}&view=${h(I)}`);Un(Ct,{get layout(){return h(I)},get book(){return h(Dt)},get href(){return h(Vt)}})}});var ie=O(M,2),pe=S(ie);pe.__click=()=>q(h(v)-1);var Ge=O(pe,2);Ze(Ge,17,()=>h(X),Pt,(Ct,Xe)=>{var Dt=Q(),Vt=V(Dt);{var Dr=Je=>{var tt=Jg();T(Je,tt)},Zr=Je=>{var tt=Yg();tt.__click=()=>q(h(Xe));var jr=S(tt);Y(()=>{gt(tt,1,`min-w-[2.25rem] rounded-md border px-2 py-1.5 text-sm transition ${h(Xe)===h(v)?"border-canvas-500 bg-canvas-500 text-white":"border-linen-300 text-anthracite-700 hover:bg-linen-100 dark:border-slate-600 dark:text-slate-300 dark:hover:bg-slate-800"}`),G(jr,h(Xe))}),T(Je,tt)};W(Vt,Je=>{h(Xe)==="ellipsis"?Je(Dr):Je(Zr,!1)})}T(Ct,Dt)});var lt=O(Ge,2);lt.__click=()=>q(h(v)+1),Y(()=>{gt(M,1,Li(h(I)==="grid"?"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4":"grid grid-cols-1 gap-4")),pe.disabled=h(v)<=1,lt.disabled=h(v)>=h(F)}),T(P,D)};W(at,P=>{h(w)&&h(w).results.length>0&&P(st)})}Y(()=>{gt(ht,1,`rounded-md p-2 transition ${h(I)==="grid"?"bg-canvas-500 text-white":"bg-linen-100 text-anthracite-700 dark:bg-slate-700 dark:text-slate-200"}`),gt(or,1,`rounded-md p-2 transition ${h(I)==="list"?"bg-canvas-500 text-white":"bg-linen-100 text-anthracite-700 dark:bg-slate-700 dark:text-slate-200"}`)}),qn("submit",j,P=>{P.preventDefault(),q(1)}),Wn(oe,()=>h(d),P=>B(d,P)),ff(Ke,()=>h(p),P=>B(p,P)),T(e,J),le()}Fn(["change","click"]);var t0=Z('<p class="text-sm text-anthracite-600 dark:text-slate-300">Loading book details...</p>'),r0=Z('<div class="rounded-xl border border-red-200 bg-red-50 p-4 text-sm text-red-700 dark:border-red-900/40 dark:bg-red-950/40 dark:text-red-200"> </div>'),n0=Z('<div class="absolute right-3 top-3 flex items-center gap-1 rounded-lg bg-canvas-400 px-2.5 py-1 text-sm font-medium text-white shadow-sm"><!> <span> </span></div>'),o0=Z('<div class="book-description-content text-sm leading-relaxed text-anthracite-700 dark:text-slate-300 svelte-1viyzig"><!></div>'),i0=Z('<p class="whitespace-pre-wrap text-sm leading-relaxed text-anthracite-700 dark:text-slate-300"> </p>'),a0=Z('<span class="inline-flex items-center gap-1 rounded-full bg-linen-100 px-3 py-1 text-xs font-medium text-anthracite-700 dark:bg-slate-700 dark:text-slate-200"><!> </span>'),s0=Z('<div class="flex flex-wrap gap-2"></div>'),l0=Z('<a data-no-spa="true" target="_blank" rel="noopener sponsored"><!> </a>'),c0=Z('<div class="space-y-3"><p class="text-sm font-medium text-anthracite-800 dark:text-slate-200">Buy or Preview</p> <div class="flex flex-wrap gap-2"></div></div>'),u0=Z('<img alt="Edition cover" class="h-24 w-auto shrink-0 rounded-md object-contain" loading="lazy"/>'),f0=Z('<p class="text-xs text-anthracite-600 dark:text-slate-300"> </p>'),d0=Z('<p class="text-xs text-anthracite-500 dark:text-slate-400"> </p>'),h0=Z('<article class="flex gap-3 rounded-xl border border-linen-200 bg-white p-3 dark:border-slate-700 dark:bg-slate-800"><!> <div class="flex min-w-0 flex-col gap-0.5"><p class="text-sm font-medium text-anthracite-800 dark:text-slate-100"> </p> <!> <!></div></article>'),v0=Z('<section class="space-y-3"><h2 class="text-xl font-semibold text-anthracite-900 dark:text-slate-100">Editions</h2> <div class="grid grid-cols-1 gap-3 md:grid-cols-2 lg:grid-cols-3"></div></section>'),p0=Z('<section class="space-y-3"><h2 class="text-xl font-semibold text-anthracite-900 dark:text-slate-100">Similar books</h2> <div class="grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3"></div></section>'),m0=Z('<a class="inline-flex w-fit items-center gap-1.5 rounded-lg border border-linen-300 px-3 py-1.5 text-sm text-anthracite-700 transition hover:bg-linen-100 dark:border-slate-600 dark:text-slate-300 dark:hover:bg-slate-800"><!> Back to Results</a> <article class="overflow-hidden rounded-xl border border-linen-200 shadow-soft dark:border-slate-700"><div class="grid gap-6 p-5 md:grid-cols-[320px_1fr] md:p-8"><div class="relative flex items-center justify-center overflow-hidden rounded-xl bg-linen-50 p-6 dark:bg-slate-900"><img class="max-h-[400px] w-auto rounded-book object-contain shadow-book" loading="lazy"/> <!></div> <div class="flex flex-col gap-4"><h1 class="text-3xl font-semibold text-anthracite-900 dark:text-slate-100"> </h1> <p class="text-base text-anthracite-700 dark:text-slate-300"> </p> <dl class="grid gap-3 text-sm text-anthracite-700 dark:text-slate-300 sm:grid-cols-2"><div class="flex items-start gap-2"><!> <div><dt class="font-medium text-anthracite-800 dark:text-slate-200">Published</dt> <dd> </dd></div></div> <div class="flex items-start gap-2"><!> <div><dt class="font-medium text-anthracite-800 dark:text-slate-200">Publisher</dt> <dd> </dd></div></div> <div class="flex items-start gap-2"><!> <div><dt class="font-medium text-anthracite-800 dark:text-slate-200">Language</dt> <dd> </dd></div></div> <div class="flex items-start gap-2"><!> <div><dt class="font-medium text-anthracite-800 dark:text-slate-200">Pages</dt> <dd> </dd></div></div></dl> <!> <!> <!></div></div></article> <!> <!>',1),g0=Z('<p class="text-sm text-anthracite-600 dark:text-slate-300">Book not found.</p>'),_0=Z('<section class="mx-auto flex max-w-6xl flex-col gap-6 px-4 py-8 md:px-6"><!></section>');function b0(e,t){se(t,!0);let r=ee(!0),n=ee(null),o=ee(null),i=ee(Et([])),a=ee(Et({})),s=ee(null),c=null;async function u(){B(r,!0),B(n,null);try{const f=await Gm(t.identifier),[m,x]=await Promise.allSettled([Xm(t.identifier,6),Km(t.identifier)]);B(o,f,!0),B(i,m.status==="fulfilled"?m.value:[],!0),B(a,x.status==="fulfilled"?x.value:{},!0),B(s,null),c&&(c(),c=null);const R=f.id;c=await qg(R,z=>{B(s,z,!0)},z=>{console.error("Realtime cover update error:",z.message)})}catch(f){B(n,f instanceof Error?f.message:"Unable to load this book",!0),B(o,null),B(i,[],!0),B(a,{},!0)}finally{B(r,!1)}}function d(){return h(s)&&h(s).trim().length>0?h(s):h(o)?.cover?.preferredUrl&&h(o).cover.preferredUrl.trim().length>0?h(o).cover.preferredUrl:h(o)?.cover?.fallbackUrl&&h(o).cover.fallbackUrl.trim().length>0?h(o).cover.fallbackUrl:"/images/placeholder-book-cover.svg"}function v(){return!h(o)||h(o).authors.length===0?"Unknown author":h(o).authors.map(f=>f.name).join(", ")}function p(){if(!h(o)?.publication?.publishedDate)return"Unknown";const f=new Date(h(o).publication.publishedDate);return Number.isNaN(f.getTime())?String(h(o).publication.publishedDate):f.toLocaleDateString()}function y(f){return{id:f.id,slug:f.slug??f.id,title:f.title??"Untitled",authors:f.authors.map(m=>m.name),description:f.descriptionContent?.text??f.description,coverUrl:f.cover?.preferredUrl??f.cover?.s3ImagePath??f.cover?.externalImageUrl??null,fallbackCoverUrl:f.cover?.fallbackUrl??"/images/placeholder-book-cover.svg"}}function E(){return h(o)?.descriptionContent?.html&&h(o).descriptionContent.html.trim().length>0?h(o).descriptionContent.html:""}function I(){const f=t.currentUrl.searchParams.get("query");if(!f)return"/search";const m=new URL("/search",window.location.origin);m.searchParams.set("query",f);const x=t.currentUrl.searchParams.get("page"),R=t.currentUrl.searchParams.get("sort"),z=t.currentUrl.searchParams.get("view"),q=t.currentUrl.searchParams.get("year");return x&&m.searchParams.set("page",x),R&&m.searchParams.set("sort",R),z&&m.searchParams.set("view",z),q&&m.searchParams.set("year",q),`${m.pathname}${m.search}`}const k={amazon:{label:"Amazon",icon:um,bgClass:"bg-canvas-400",hoverClass:"hover:bg-canvas-500"},barnesAndNoble:{label:"Barnes & Noble",icon:fm,bgClass:"bg-[#00563F]",hoverClass:"hover:bg-[#004832]"},bookshop:{label:"Bookshop.org",icon:cm,bgClass:"bg-[#4C32C0]",hoverClass:"hover:bg-[#3D28A0]"},audible:{label:"Audible",icon:am,bgClass:"bg-[#FF9900]",hoverClass:"hover:bg-[#E68A00]"}};function N(f){return k[f]??{label:f,icon:om,bgClass:"bg-canvas-400",hoverClass:"hover:bg-canvas-500"}}function b(){return Object.entries(h(a)).sort(([f],[m])=>f.localeCompare(m))}an(()=>{t.identifier&&u()}),Vn(()=>()=>{c&&c()});var w=_0(),_=S(w);{var l=f=>{var m=t0();T(f,m)},g=f=>{var m=Q(),x=V(m);{var R=q=>{var A=r0(),te=S(A);Y(()=>G(te,h(n))),T(q,A)},z=q=>{var A=Q(),te=V(A);{var $=X=>{var J=m0(),j=V(J),K=S(j);rm(K,{size:16});var re=O(j,2),oe=S(re),he=S(oe),me=S(he),we=O(me,2);{var Me=ce=>{var ge=n0(),Le=S(ge);Si(Le,{size:12,class:"fill-current"});var Ye=O(Le,2),xe=S(Ye);Y(Qe=>G(xe,Qe),[()=>Number(h(o).extras.averageRating).toFixed(1)]),T(ce,ge)};W(we,ce=>{h(o).extras?.averageRating!==void 0&&h(o).extras?.averageRating!==null&&ce(Me)})}var Ke=O(he,2),Wt=S(Ke),ht=S(Wt),Lt=O(Wt,2),or=S(Lt),gr=O(Lt,2),ir=S(gr),_r=S(ir);tm(_r,{size:16,class:"mt-0.5 shrink-0 text-canvas-500"});var Be=O(_r,2),Ve=O(S(Be),2),qe=S(Ve),it=O(ir,2),vt=S(it);yc(vt,{size:16,class:"mt-0.5 shrink-0 text-canvas-500"});var Pe=O(vt,2),ze=O(S(Pe),2),pt=S(ze),Ne=O(it,2),at=S(Ne);im(at,{size:16,class:"mt-0.5 shrink-0 text-canvas-500"});var st=O(at,2),P=O(S(st),2),D=S(P),M=O(Ne,2),ie=S(M);Cn(ie,{size:16,class:"mt-0.5 shrink-0 text-canvas-500"});var pe=O(ie,2),Ge=O(S(pe),2),lt=S(Ge),Ct=O(gr,2);{var Xe=ce=>{var ge=o0(),Le=S(ge);nf(Le,E),T(ce,ge)},Dt=ce=>{var ge=Q(),Le=V(ge);{var Ye=xe=>{var Qe=i0(),Nt=S(Qe);Y(()=>G(Nt,h(o).description)),T(xe,Qe)};W(Le,xe=>{h(o).description&&xe(Ye)},!0)}T(ce,ge)};W(Ct,ce=>{E().length>0?ce(Xe):ce(Dt,!1)})}var Vt=O(Ct,2);{var Dr=ce=>{var ge=s0();Ze(ge,21,()=>h(o).categories,Pt,(Le,Ye)=>{var xe=a0(),Qe=S(xe);dm(Qe,{size:12});var Nt=O(Qe);Y(()=>G(Nt,` ${h(Ye)??""}`)),T(Le,xe)}),T(ce,ge)};W(Vt,ce=>{h(o).categories.length>0&&ce(Dr)})}var Zr=O(Vt,2);{var Je=ce=>{var ge=c0(),Le=O(S(ge),2);Ze(Le,21,b,Pt,(Ye,xe)=>{var Qe=Oe(()=>Vs(h(xe),2));let Nt=()=>h(Qe)[0],to=()=>h(Qe)[1];const br=Oe(()=>N(Nt())),vn=Oe(()=>h(br).icon);var yr=l0(),Mr=S(yr);yi(Mr,()=>h(vn),(no,oo)=>{oo(no,{size:16})});var ro=O(Mr);Y(()=>{de(yr,"href",to()),gt(yr,1,`inline-flex items-center gap-2 rounded-lg px-4 py-2 text-sm font-medium text-white shadow-sm transition-all duration-200 ${h(br).bgClass} ${h(br).hoverClass} hover:shadow-canvas focus:outline-none focus:ring-2 focus:ring-canvas-500 focus:ring-offset-2`,"svelte-1viyzig"),G(ro,` ${h(br).label??""}`)}),T(Ye,yr)}),T(ce,ge)};W(Zr,ce=>{b().length>0&&ce(Je)})}var tt=O(re,2);{var jr=ce=>{var ge=v0(),Le=O(S(ge),2);Ze(Le,21,()=>h(o).editions,Pt,(Ye,xe)=>{var Qe=h0(),Nt=S(Qe);{var to=xt=>{var Gt=u0();Y(()=>de(Gt,"src",h(xe).coverImageUrl)),T(xt,Gt)};W(Nt,xt=>{h(xe).coverImageUrl&&xt(to)})}var br=O(Nt,2),vn=S(br),yr=S(vn),Mr=O(vn,2);{var ro=xt=>{var Gt=f0(),io=S(Gt);Y(()=>G(io,`ISBN-13: ${h(xe).isbn13??""}`)),T(xt,Gt)};W(Mr,xt=>{h(xe).isbn13&&xt(ro)})}var no=O(Mr,2);{var oo=xt=>{var Gt=d0(),io=S(Gt);Y(Pc=>G(io,`Published: ${Pc??""}`),[()=>new Date(h(xe).publishedDate).toLocaleDateString()]),T(xt,Gt)};W(no,xt=>{h(xe).publishedDate&&xt(oo)})}Y(()=>G(yr,h(xe).identifier??h(xe).googleBooksId??"Edition")),T(Ye,Qe)}),T(ce,ge)};W(tt,ce=>{h(o).editions.length>0&&ce(jr)})}var dn=O(tt,2);{var hn=ce=>{var ge=p0(),Le=O(S(ge),2);Ze(Le,21,()=>h(i),Ye=>Ye.id,(Ye,xe)=>{{let Qe=Oe(()=>y(h(xe))),Nt=Oe(()=>`/book/${encodeURIComponent(h(xe).slug??h(xe).id)}`);Un(Ye,{get book(){return h(Qe)},get href(){return h(Nt)}})}}),T(ce,ge)};W(dn,ce=>{h(i).length>0&&ce(hn)})}Y((ce,ge,Le,Ye)=>{de(j,"href",ce),de(me,"src",ge),de(me,"alt",`${h(o).title??"Book"} cover`),G(ht,h(o).title??"Book details"),G(or,Le),G(qe,Ye),G(pt,h(o).publication?.publisher??"Unknown"),G(D,h(o).publication?.language??"Unknown"),G(lt,h(o).publication?.pageCount??"Unknown")},[I,d,v,p]),T(X,J)},F=X=>{var J=g0();T(X,J)};W(te,X=>{h(o)?X($):X(F,!1)},!0)}T(q,A)};W(x,q=>{h(n)?q(R):q(z,!1)},!0)}T(f,m)};W(_,f=>{h(r)?f(l):f(g,!1)})}T(e,w),le()}var y0=Z('<p class="text-sm text-anthracite-600 dark:text-slate-300">Loading sitemap...</p>'),w0=Z('<p class="rounded-lg border border-red-200 bg-red-50 p-3 text-sm text-red-700 dark:border-red-900/40 dark:bg-red-950/40 dark:text-red-200"> </p>'),x0=Z("<button> </button>"),k0=Z('<div class="rounded-lg border border-blue-200 bg-blue-50 p-3 text-sm text-blue-700 dark:border-blue-900/40 dark:bg-blue-950/40 dark:text-blue-200">No books found for this letter yet.</div>'),S0=Z('<a class="rounded-xl border border-linen-200 p-4 text-sm transition hover:shadow-md dark:border-slate-700"><p class="font-medium text-anthracite-900 dark:text-slate-100"> </p> <p class="text-xs text-anthracite-500 dark:text-slate-400"> </p></a>'),E0=Z('<div class="grid grid-cols-1 gap-3 md:grid-cols-2"></div>'),I0=Z('<div class="rounded-lg border border-blue-200 bg-blue-50 p-3 text-sm text-blue-700 dark:border-blue-900/40 dark:bg-blue-950/40 dark:text-blue-200">No authors found for this letter yet.</div>'),T0=Z('<p class="text-sm text-anthracite-500 dark:text-slate-400">No indexed titles for this author yet.</p>'),R0=Z('<li><a class="text-sm text-canvas-600 transition hover:text-canvas-700 dark:text-canvas-400 dark:hover:text-canvas-300"> </a></li>'),C0=Z('<ul class="space-y-1"></ul>'),N0=Z('<div class="border-t border-linen-200 bg-linen-50/50 px-4 py-3 dark:border-slate-700 dark:bg-slate-900/30"><!></div>'),O0=Z('<div><button class="flex w-full items-center justify-between px-4 py-3 text-left transition hover:bg-linen-50 dark:hover:bg-slate-800/50"><span class="font-medium text-anthracite-900 dark:text-slate-100"> </span> <div class="flex items-center gap-2"><span class="rounded-full bg-linen-100 px-2.5 py-0.5 text-xs font-medium text-anthracite-600 dark:bg-slate-700 dark:text-slate-300"> </span> <!></div></button> <!></div>'),$0=Z('<div class="divide-y divide-linen-200 rounded-xl border border-linen-200 dark:divide-slate-700 dark:border-slate-700"></div>'),A0=Z('<span class="px-2 text-sm text-anthracite-400 dark:text-slate-500">&hellip;</span>'),P0=Z("<button> </button>"),z0=Z('<nav class="flex items-center justify-center gap-1"><button class="rounded-md border border-linen-300 px-3 py-1.5 text-sm transition disabled:opacity-40 dark:border-slate-600 dark:text-slate-300 hover:bg-linen-100 dark:hover:bg-slate-800" aria-label="Previous page">&laquo;</button> <!> <button class="rounded-md border border-linen-300 px-3 py-1.5 text-sm transition disabled:opacity-40 dark:border-slate-600 dark:text-slate-300 hover:bg-linen-100 dark:hover:bg-slate-800" aria-label="Next page">&raquo;</button></nav>'),U0=Z('<div class="rounded-xl border border-linen-200 bg-white p-4 shadow-soft dark:border-slate-700 dark:bg-slate-800"><div class="flex flex-wrap items-center gap-2"><span class="text-xs font-semibold uppercase tracking-wider text-anthracite-500 dark:text-slate-400">Jump to letter:</span> <!></div></div> <div class="overflow-hidden rounded-xl border border-linen-200 bg-white shadow-soft dark:border-slate-700 dark:bg-slate-800"><div class="border-b border-linen-200 bg-white px-5 py-3 dark:border-slate-700 dark:bg-slate-800"><h2 class="text-lg font-semibold text-anthracite-900 dark:text-slate-100"> </h2> <p class="text-sm text-anthracite-500 dark:text-slate-400"> </p></div> <div class="p-5"><!></div></div> <!> <div class="rounded-lg border border-linen-300 bg-linen-50 p-3 text-sm text-anthracite-600 dark:border-slate-700 dark:bg-slate-800/50 dark:text-slate-400">XML versions of this sitemap are available at <a href="/sitemap.xml" data-no-spa="true" class="font-medium text-canvas-600 hover:text-canvas-700 dark:text-canvas-400 dark:hover:text-canvas-300"> </a>.</div>',1),L0=Z('<section class="mx-auto flex max-w-6xl flex-col gap-6 px-4 py-8 md:px-6"><header class="flex flex-col gap-4 rounded-xl border border-linen-200 bg-white p-5 shadow-soft dark:border-slate-700 dark:bg-slate-800 md:flex-row md:items-center md:justify-between"><div><h1 class="text-2xl font-semibold text-anthracite-900 dark:text-slate-100">Site Index</h1> <p class="text-sm text-anthracite-600 dark:text-slate-300">Server-rendered directory of books and authors for search engines and readers.</p></div> <div class="flex items-center gap-1"><button>Authors &amp; Books</button> <button>Books Only</button></div></header> <!></section>');function D0(e,t){se(t,!0);let r=$t(t,"view",3,"authors"),n=$t(t,"letter",3,"A"),o=$t(t,"page",3,1),i=ee(!0),a=ee(null),s=ee(null),c=ee(null);async function u(){B(i,!0),B(a,null);try{B(s,await Um(r(),n(),o()),!0),B(c,h(s).authors.length>0?h(s).authors[0].authorId:null,!0)}catch(l){B(a,l instanceof Error?l.message:"Unable to load sitemap",!0),B(s,null)}finally{B(i,!1)}}function d(l,g,f){Pr(`/sitemap/${l}/${encodeURIComponent(g)}/${Math.max(1,f)}`)}function v(l){B(c,h(c)===l?null:l,!0)}function p(l,g){if(g<=7)return Array.from({length:g},(R,z)=>z+1);const f=[1];l>3&&f.push("ellipsis");const m=Math.max(2,l-1),x=Math.min(g-1,l+1);for(let R=m;R<=x;R++)f.push(R);return l<g-2&&f.push("ellipsis"),f.push(g),f}an(()=>{u()});var y=L0(),E=S(y),I=O(S(E),2),k=S(I);k.__click=()=>d("authors",n(),1);var N=O(k,2);N.__click=()=>d("books",n(),1);var b=O(E,2);{var w=l=>{var g=y0();T(l,g)},_=l=>{var g=Q(),f=V(g);{var m=R=>{var z=w0(),q=S(z);Y(()=>G(q,h(a))),T(R,z)},x=R=>{var z=Q(),q=V(z);{var A=te=>{const $=Oe(()=>h(s));var F=U0(),X=V(F),J=S(X),j=O(S(J),2);Ze(j,17,()=>h($).letters,Pt,(Be,Ve)=>{var qe=x0();qe.__click=()=>d(h($).viewType,h(Ve),1);var it=S(qe);Y(()=>{gt(qe,1,`rounded-md px-2.5 py-1 text-xs font-medium transition ${h(Ve)===h($).activeLetter?"bg-canvas-500 text-white":"bg-linen-100 text-anthracite-700 hover:bg-linen-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600"}`),G(it,h(Ve))}),T(Be,qe)});var K=O(X,2),re=S(K),oe=S(re),he=S(oe),me=O(oe,2),we=S(me),Me=O(re,2),Ke=S(Me);{var Wt=Be=>{var Ve=Q(),qe=V(Ve);{var it=Pe=>{var ze=k0();T(Pe,ze)},vt=Pe=>{var ze=E0();Ze(ze,21,()=>h($).books,Pt,(pt,Ne)=>{var at=S0(),st=S(at),P=S(st),D=O(st,2),M=S(D);Y((ie,pe)=>{de(at,"href",ie),G(P,h(Ne).title),G(M,`Last updated: ${pe??""}`)},[()=>`/book/${encodeURIComponent(h(Ne).slug)}`,()=>h(Ne).updatedAt?new Date(h(Ne).updatedAt).toLocaleDateString():"Unknown"]),T(pt,at)}),T(Pe,ze)};W(qe,Pe=>{h($).books.length===0?Pe(it):Pe(vt,!1)})}T(Be,Ve)},ht=Be=>{var Ve=Q(),qe=V(Ve);{var it=Pe=>{var ze=I0();T(Pe,ze)},vt=Pe=>{var ze=$0();Ze(ze,21,()=>h($).authors,pt=>pt.authorId,(pt,Ne)=>{var at=O0(),st=S(at);st.__click=()=>v(h(Ne).authorId);var P=S(st),D=S(P),M=O(P,2),ie=S(M),pe=S(ie),Ge=O(ie,2);{let Xe=Oe(()=>`shrink-0 text-anthracite-400 transition-transform duration-200 dark:text-slate-500 ${h(c)===h(Ne).authorId?"rotate-90":""}`);nm(Ge,{size:16,get class(){return h(Xe)}})}var lt=O(st,2);{var Ct=Xe=>{var Dt=N0(),Vt=S(Dt);{var Dr=Je=>{var tt=T0();T(Je,tt)},Zr=Je=>{var tt=C0();Ze(tt,21,()=>h(Ne).books,Pt,(jr,dn)=>{var hn=R0(),ce=S(hn),ge=S(ce);Y(Le=>{de(ce,"href",Le),G(ge,h(dn).title)},[()=>`/book/${encodeURIComponent(h(dn).slug)}`]),T(jr,hn)}),T(Je,tt)};W(Vt,Je=>{h(Ne).books.length===0?Je(Dr):Je(Zr,!1)})}T(Xe,Dt)};W(lt,Xe=>{h(c)===h(Ne).authorId&&Xe(Ct)})}Y(()=>{de(st,"aria-expanded",h(c)===h(Ne).authorId),G(D,h(Ne).authorName),G(pe,`${h(Ne).books.length??""} ${h(Ne).books.length===1?"title":"titles"}`)}),T(pt,at)}),T(Pe,ze)};W(qe,Pe=>{h($).authors.length===0?Pe(it):Pe(vt,!1)})}T(Be,Ve)};W(Ke,Be=>{h($).viewType==="books"?Be(Wt):Be(ht,!1)})}var Lt=O(K,2);{var or=Be=>{var Ve=z0(),qe=S(Ve);qe.__click=()=>d(h($).viewType,h($).activeLetter,h($).pageNumber-1);var it=O(qe,2);Ze(it,17,()=>p(h($).pageNumber,h($).totalPages),Pt,(Pe,ze)=>{var pt=Q(),Ne=V(pt);{var at=P=>{var D=A0();T(P,D)},st=P=>{var D=P0();D.__click=()=>d(h($).viewType,h($).activeLetter,h(ze));var M=S(D);Y(()=>{gt(D,1,`min-w-[2.25rem] rounded-md border px-2 py-1.5 text-sm transition ${h(ze)===h($).pageNumber?"border-canvas-500 bg-canvas-500 text-white":"border-linen-300 text-anthracite-700 hover:bg-linen-100 dark:border-slate-600 dark:text-slate-300 dark:hover:bg-slate-800"}`),G(M,h(ze))}),T(P,D)};W(Ne,P=>{h(ze)==="ellipsis"?P(at):P(st,!1)})}T(Pe,pt)});var vt=O(it,2);vt.__click=()=>d(h($).viewType,h($).activeLetter,h($).pageNumber+1),Y(()=>{qe.disabled=h($).pageNumber<=1,vt.disabled=h($).pageNumber>=h($).totalPages}),T(Be,Ve)};W(Lt,Be=>{h($).totalPages>1&&Be(or)})}var gr=O(Lt,2),ir=O(S(gr)),_r=S(ir);Y(()=>{G(he,`${h($).viewType==="books"?"Books":"Authors"} starting with '${h($).activeLetter??""}'`),G(we,`${h($).totalItems??""} ${h($).viewType==="books"?"titles":"authors"} indexed`),G(_r,`${h($).baseUrl??""}/sitemap.xml`)}),T(te,F)};W(q,te=>{h(s)&&te(A)},!0)}T(R,z)};W(f,R=>{h(a)?R(m):R(x,!1)},!0)}T(l,g)};W(b,l=>{h(i)?l(w):l(_,!1)})}Y(()=>{gt(k,1,`rounded-lg px-4 py-2 text-sm font-medium transition ${r()==="authors"?"bg-canvas-500 text-white":"bg-linen-100 text-anthracite-700 hover:bg-linen-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600"}`),gt(N,1,`rounded-lg px-4 py-2 text-sm font-medium transition ${r()==="books"?"bg-canvas-500 text-white":"bg-linen-100 text-anthracite-700 hover:bg-linen-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600"}`)}),T(e,y),le()}Fn(["click"]);var Z0=Z('<section class="mx-auto flex max-w-3xl flex-col items-center gap-6 px-4 py-16 text-center md:px-6"><p class="text-6xl font-semibold text-canvas-500">404</p> <h1 class="text-3xl font-semibold text-anthracite-900 dark:text-slate-100">Page not found</h1> <p class="text-sm text-anthracite-600 dark:text-slate-300">The page you requested does not exist. Try searching for a book instead.</p> <form class="flex w-full max-w-xl flex-col gap-3 sm:flex-row"><input type="search" class="w-full rounded-xl border border-linen-300 px-4 py-3 outline-none ring-canvas-300 focus:ring-2 dark:border-slate-600 dark:bg-slate-800" placeholder="Search books"/> <button type="submit" class="rounded-xl bg-canvas-500 px-5 py-3 font-medium text-white transition hover:bg-canvas-600">Search</button></form> <a href="/" class="rounded-lg border border-linen-300 px-4 py-2 text-sm text-anthracite-700 transition hover:bg-linen-100 dark:border-slate-600 dark:text-slate-300 dark:hover:bg-slate-800">Go home</a></section>');function j0(e,t){se(t,!0);let r=ee("");function n(s){s.preventDefault();const c=h(r).trim();c&&Pr(`/search?query=${encodeURIComponent(c)}`)}var o=Z0(),i=O(S(o),6),a=S(i);qn("submit",i,n),Wn(a,()=>h(r),s=>B(r,s)),T(e,o),le()}var M0=Z('<div class="flex min-h-screen flex-col bg-linen-50 text-anthracite-900 dark:bg-slate-900 dark:text-slate-100"><!> <main class="flex-1"><!></main> <!></div>');function B0(e,t){se(t,!0);let r=ee(Et(new URL(window.location.href))),n=Oe(()=>xf(h(r).pathname));Vn(()=>{const v=Wl.subscribe(y=>{B(r,y,!0)}),p=Sf();return Kp(),()=>{v(),p()}});var o=M0(),i=S(o);xm(i,{get activeRoute(){return h(n).name}});var a=O(i,2),s=S(a);{var c=v=>{Hm(v,{})},u=v=>{var p=Q(),y=V(p);{var E=k=>{di(k,{get currentUrl(){return h(r)}})},I=k=>{var N=Q(),b=V(N);{var w=l=>{di(l,{get currentUrl(){return h(r)}})},_=l=>{var g=Q(),f=V(g);{var m=R=>{di(R,{get currentUrl(){return h(r)}})},x=R=>{var z=Q(),q=V(z);{var A=$=>{{let F=Oe(()=>h(n).params.identifier??"");b0($,{get currentUrl(){return h(r)},get identifier(){return h(F)}})}},te=$=>{var F=Q(),X=V(F);{var J=K=>{{let re=Oe(()=>h(n).params.view??"authors"),oe=Oe(()=>h(n).params.letter??"A"),he=Oe(()=>h(n).params.page??1);D0(K,{get view(){return h(re)},get letter(){return h(oe)},get page(){return h(he)}})}},j=K=>{j0(K,{})};W(X,K=>{h(n).name==="sitemap"?K(J):K(j,!1)},!0)}T($,F)};W(q,$=>{h(n).name==="book"?$(A):$(te,!1)},!0)}T(R,z)};W(f,R=>{h(n).name==="categories"?R(m):R(x,!1)},!0)}T(l,g)};W(b,l=>{h(n).name==="explore"?l(w):l(_,!1)},!0)}T(k,N)};W(y,k=>{h(n).name==="search"?k(E):k(I,!1)},!0)}T(v,p)};W(s,v=>{h(n).name==="home"?v(c):v(u,!1)})}var d=O(a,2);Sm(d),T(e,o),le()}Ju(B0,{target:document.getElementById("app")});
//# sourceMappingURL=app.js.map
