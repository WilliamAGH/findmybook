<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en"
      th:with="
        homeTitle='Home',
        homeDescription='Discover your next favorite book with our recommendation engine. Search, explore, and find personalized book suggestions.',
        homeCanonicalUrl=${#httpServletRequest != null ? #httpServletRequest.requestURL.toString() : ''},
        homeOgImage=@{/images/og-logo.png},
        homeKeywords='book recommendations, find books, book suggestions, reading, literature'
">
<head th:replace="~{fragments/layout :: head(title=${homeTitle}, description=${homeDescription}, canonicalUrl=${homeCanonicalUrl}, ogImage=${homeOgImage}, keywords=${homeKeywords})}">
    <!-- Static fallbacks for linters/SEO. These are replaced by the fragment. -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home - Book Finder (findmybook.net)</title>
</head>
<body>

<!-- Navbar -->
<nav th:replace="~{fragments/layout :: navbar}"></nav>

<!-- Main Content -->
<main class="main-content">
    <!-- Hero Section with Search Bar - Claude-inspired Linen Aesthetic -->
    <section class="theme-hero-bg py-16 md:py-24 transition-colors duration-300">
        <div class="container mx-auto px-4 max-w-4xl">
            <!-- Refined Typography -->
            <div class="text-center mb-10">
                <h1 class="font-heading text-4xl md:text-5xl lg:text-6xl font-bold theme-hero-title text-anthracite-900 dark:text-slate-50 mb-4 tracking-tight">
                    Discover Your Next Great Read
                </h1>
                <p class="text-lg md:text-xl theme-hero-text text-anthracite-600 dark:text-slate-400 max-w-2xl mx-auto font-light leading-relaxed">
                    Curated book recommendations with a touch of elegance. Search millions of titles and find your perfect match.
                </p>
            </div>

            <!-- Elegant Search Form -->
            <form action="/search" method="get" class="mb-8">
                <div class="relative max-w-2xl mx-auto">
                    <input
                        type="text"
                        name="query"
                        class="w-full px-6 py-4 pr-14 text-base md:text-lg
                               border border-gray-300 dark:border-slate-700
                               theme-search-input rounded-xl shadow-soft focus:shadow-soft-lg
                               focus:outline-none focus:ring-2 focus:ring-canvas-400
                               focus:border-transparent transition-all duration-200"
                        placeholder="Search by title, author, or ISBN..."
                        aria-label="Search books"
                        required>
                    <button
                        type="submit"
                        class="absolute right-2 top-1/2 -translate-y-1/2
                               px-3 md:px-5 py-2.5 theme-search-button bg-canvas-400 hover:bg-canvas-500
                               text-white rounded-lg transition-all duration-200
                               hover:shadow-canvas focus:outline-none focus:ring-2 focus:ring-canvas-500 focus:ring-offset-2"
                        aria-label="Search">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
            </form>

            <!-- Sophisticated Tag Pills -->
            <div class="text-center">
                <p class="text-sm font-medium theme-hero-text text-anthracite-600 mb-3 uppercase tracking-wider">
                    Popular Genres
                </p>
                <div class="flex flex-wrap justify-center gap-2">
                    <a href="/search?query=fiction"
                       class="px-4 py-2 text-sm font-medium theme-tag rounded-full transition-all duration-200 shadow-sm hover:shadow-md border border-gray-300">
                        Fiction
                    </a>
                    <a href="/search?query=mystery"
                       class="px-4 py-2 text-sm font-medium theme-tag rounded-full transition-all duration-200 shadow-sm hover:shadow-md border border-gray-300">
                        Mystery
                    </a>
                    <a href="/search?query=sci-fi"
                       class="px-4 py-2 text-sm font-medium theme-tag rounded-full transition-all duration-200 shadow-sm hover:shadow-md border border-gray-300">
                        Science Fiction
                    </a>
                    <a href="/search?query=fantasy"
                       class="px-4 py-2 text-sm font-medium theme-tag rounded-full transition-all duration-200 shadow-sm hover:shadow-md border border-gray-300">
                        Fantasy
                    </a>
                    <a href="/search?query=biography"
                       class="px-4 py-2 text-sm font-medium theme-tag rounded-full transition-all duration-200 shadow-sm hover:shadow-md border border-gray-300">
                        Biography
                    </a>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Current Bestsellers Section -->
    <section class="py-12 md:py-16 theme-section transition-colors duration-300">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-2xl md:text-3xl font-heading font-bold theme-section-title text-anthracite-900 dark:text-slate-50">
                    NYT Bestsellers
                </h2>
                <a th:href="@{/search(query='new york times', year=${T(java.time.Year).now().getValue()})}"
                   class="px-6 py-2.5 text-sm font-medium theme-section-link text-canvas-600 dark:text-canvas-400
                          border border-canvas-400 dark:border-canvas-600 rounded-lg
                          hover:bg-canvas-50 dark:hover:bg-slate-700 hover:text-canvas-700 dark:hover:text-canvas-300
                          transition-all duration-200">
                    View All
                </a>
            </div>
            
            <div class="row g-4">
                <!-- Check if currentBestsellers list exists and is not empty -->
                <div th:if="${currentBestsellers == null or #lists.isEmpty(currentBestsellers)}" class="col-12 text-center py-5">
                    <div class="alert alert-info" role="alert">
                        <i class="fas fa-info-circle me-2"></i> No current bestsellers to display. Check back soon!
                    </div>
                </div>
                
                <!-- Loop through current bestsellers -->
                <th:block th:each="book : ${currentBestsellers}">
                    <div th:replace="~{fragments/cards :: bookCard(book=${book}, showStats=${false})}"></div>
                </th:block>
            </div>
        </div>
    </section>

    <!-- Recent Views Section -->
    <section class="py-12 md:py-16 theme-section-alt transition-colors duration-300">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-2xl md:text-3xl font-heading font-bold theme-section-title text-anthracite-900 dark:text-slate-50">
                    Recent Views
                </h2>
                <a href="/search?query=explore"
                   class="px-6 py-2.5 text-sm font-medium theme-section-link text-canvas-600 dark:text-canvas-400
                          border border-canvas-400 dark:border-canvas-600 rounded-lg
                          hover:bg-canvas-50 dark:hover:bg-slate-700 hover:text-canvas-700 dark:hover:text-canvas-300
                          transition-all duration-200">
                    Explore More
                </a>
            </div>
            
            <div class="row g-4">
                <!-- Check if recentBooks list exists and is not empty -->
                <div th:if="${recentBooks == null or #lists.isEmpty(recentBooks)}" class="col-12 text-center py-5">
                    <div class="alert alert-info" role="alert">
                        <i class="fas fa-info-circle me-2"></i> No recent books to display. Start exploring to see recommendations!
                    </div>
                </div>
                
                <!-- Loop through recent books -->
                <th:block th:each="book : ${recentBooks}">
                    <div th:replace="~{fragments/cards :: bookCard(book=${book}, showStats=${true})}"></div>
                </th:block>
            </div>
        </div>
    </section>
</main>

<!-- Footer -->
<footer th:replace="~{fragments/layout :: footer}"></footer>

<!-- Scripts -->
<th:block th:replace="~{fragments/layout :: scripts}"></th:block>

<!-- @deprecated - All page-specific styles moved to main.css
     Old purple gradient hero section (#4F46E5, #7C3AED) replaced with Tailwind linen/canvas/anthracite palette -->

</body>
</html>
